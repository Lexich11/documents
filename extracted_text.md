iCommandLineReference2TableofContents
1Preface...............................................................................................1
1.1Declaration......................................................................................1
1.2Audience.........................................................................................1
1.3Conventions.....................................................................................1
2BasicCommands..................................................................................3
2.1SystemConfigurationCommands...........................................................3
2.1.1hostname...................................................................................................3
2.1.2managementipaddress..................................................................................4
2.1.3managementroute........................................................................................6
2.1.4showmanagementarp...................................................................................7
2.1.5showmanagementipaddress..........................................................................8
2.1.6showmanagementinterface............................................................................9
2.1.7clearcountersmgmt-if..................................................................................10
2.1.8enablepassword.........................................................................................11
2.1.9terminallength............................................................................................12
2.1.10serviceterminal-length................................................................................13
2.1.11bannermotd.............................................................................................14
2.1.12bannerexec.............................................................................................15
2.1.13bannerlogin.............................................................................................17
2.1.14showversion............................................................................................18
2.1.15linevty....................................................................................................19
2.1.16exec-timeout............................................................................................20
2.1.17access-class............................................................................................21
2.1.18ipv6access-class.......................................................................................22
2.1.19reboot....................................................................................................23
2.1.20schedulerebootat......................................................................................24
2.1.21schedulerebootdelay.................................................................................25
2.1.22bootsystem.............................................................................................26
2.1.23showboot................................................................................................28
2.1.24showbootimages......................................................................................28
2.1.25showmemory...........................................................................................29
2.1.26showcputraffic-limit...................................................................................32
2.1.27showprocessescpusorted...........................................................................34
2.1.28showprocessescpuhistory..........................................................................36
2.1.29showprocessesmemorysorted.....................................................................37
2.1.30terminalmonitor........................................................................................39
2.1.31configureterminal......................................................................................4032.1.32disable....................................................................................................41
2.1.33enable....................................................................................................42
2.1.34end........................................................................................................43
2.1.35exit(global)..............................................................................................44
2.1.36exit(EXEC)..............................................................................................45
2.1.37quit........................................................................................................46
2.1.38cd.........................................................................................................47
2.1.39copy......................................................................................................49
2.1.40delete.....................................................................................................50
2.1.41dir.........................................................................................................51
2.1.42ls..........................................................................................................53
2.1.43more......................................................................................................54
2.1.44mkdir......................................................................................................55
2.1.45rename...................................................................................................56
2.1.46rmdir......................................................................................................57
2.1.47tarcreate.................................................................................................58
2.1.48tartable..................................................................................................59
2.1.49tarxtract..................................................................................................60
2.1.50showdiagnostic-information..........................................................................61
2.1.51tardiagnostic-information.............................................................................62
2.1.52format....................................................................................................63
2.1.53umount...................................................................................................64
2.1.54cut-throughenable.....................................................................................65
2.1.55showcut-through-forwardingmode.................................................................66
2.1.56resetfactory-config.....................................................................................67
2.1.57showfactory-config....................................................................................68
2.1.58showthis.................................................................................................69
2.1.59showroute-mac.........................................................................................70
2.2UserManagementCommands..............................................................71
2.2.1username..................................................................................................71
2.2.2usernamepassword.....................................................................................72
2.2.3usernamesecret.........................................................................................73
2.2.4usernameprivilege......................................................................................74
2.2.5usernameservice-type..................................................................................75
2.2.6usernameprivilegepassword..........................................................................76
2.2.7re-usernamenewname.................................................................................77
2.2.8cipherdetect..............................................................................................78
2.3FTPCommands...............................................................................79
2.3.1ftp...........................................................................................................79
2.3.2ftpvrf.......................................................................................................81
2.3.3ftppassive.................................................................................................82
2.3.4showftp....................................................................................................8342.3.5copyGFILENAMEGURLNAME.......................................................................83
2.3.6copyGURLNAMEGFILENAME.......................................................................85
2.4FTPserverCommands.......................................................................86
2.4.1ftpserverenable.........................................................................................86
2.4.2ftpserverport.............................................................................................87
2.4.3ftpservertime-out........................................................................................88
2.4.4ftpserversourceaddress...............................................................................89
2.5TFTPCommands.............................................................................90
2.5.1copyGFILENAMEGURLNAME.......................................................................90
2.5.2copyGURLNAMEGFILENAME.......................................................................92
2.5.3copyrunning-configmgmt-if............................................................................93
2.5.4copymgmt-ifstartup-config............................................................................94
2.6scpCommands................................................................................95
2.6.1copyGFILENAMEGURLNAME.......................................................................95
2.6.2copyGURLNAMEGFILENAME.......................................................................96
2.6.3copyrunning-configmgmt-if............................................................................97
2.6.4copymgmt-ifstartup-config............................................................................99
2.7TelnetCommands...........................................................................100
2.7.1telnet......................................................................................................100
2.7.2iptelnetserversourceaddress......................................................................101
2.7.3iptelnetserversourceport............................................................................102
2.7.4iptelnetserversourcemgmt-ifport..................................................................103
2.8SSHCommands.............................................................................104
2.8.1ipsshserver.............................................................................................104
2.8.2ipsshserverauthentication-retries..................................................................105
2.8.3ipsshserverauthentication-timeout.................................................................106
2.8.4ipsshserverauthentication-type....................................................................107
2.8.5ipsshserverhost-keyrsakey........................................................................109
2.8.6ipsshserverrekey-interval...........................................................................110
2.8.7ipsshserverversion...................................................................................111
2.8.8ipsshserversourceaddress.........................................................................112
2.8.9ipsshserversourceport..............................................................................113
2.8.10ipsshserversourcemgmt-ifport..................................................................114
2.8.11showipsshserversession..........................................................................115
2.8.12showipsshserverstatus............................................................................116
2.8.13rsakeygenerate......................................................................................117
2.8.14rsakey..................................................................................................118
2.8.15keyformat..............................................................................................119
2.8.16keystringend..........................................................................................120
2.8.17keytype.................................................................................................121
2.8.18reset.....................................................................................................12252.8.19validate.................................................................................................122
2.8.20KEYLINE...............................................................................................123
2.8.21rsakeyexport.........................................................................................124
2.8.22rsakeyimport.........................................................................................126
2.8.23showrsakey...........................................................................................127
2.8.24showrsakeys.........................................................................................128
2.8.25ssh.......................................................................................................129
2.9Time&TimezoneCommands...............................................................132
2.9.1clocksetdatetime......................................................................................132
2.9.2clocksettimezone......................................................................................133
2.9.3clocksetsummer-time.................................................................................135
2.9.4showclock...............................................................................................137
2.9.5showtimezones.........................................................................................138
2.10LicenseCommands........................................................................139
2.10.1generatedeviceidentifier............................................................................139
2.10.2showlicense...........................................................................................140
2.11HTTPcommandsCommands............................................................141
2.11.1servicehttp.............................................................................................141
2.11.2servicehttps...........................................................................................142
2.11.3httpserverload........................................................................................143
2.11.4httptimeout............................................................................................144
2.11.5httpserversourceaddress..........................................................................145
2.11.6httpserversourceport...............................................................................147
2.11.7httpserversourcessl-port...........................................................................148
2.11.8httpserversourcemgmt-ifport.....................................................................149
2.11.9httpserversourcemgmt-ifssl-port.................................................................150
2.11.10httpauthenticationaaa.............................................................................151
2.12RPC-APIcommandsCommands........................................................153
2.12.1servicerpc-api.........................................................................................153
2.12.2servicerpc-apiauth-mode...........................................................................154
2.12.3showservicesrpc-api................................................................................155
2.13DIAGCommands..........................................................................156
2.13.1diagnostic-informationdiscard......................................................................156
2.13.2showdiagnostic-informationdiscard...............................................................157
3EthernetCommands...........................................................................159
3.1InterfaceCommands........................................................................159
3.1.1bandwidth................................................................................................159
3.1.2clearcounters...........................................................................................160
3.1.3description...............................................................................................161
3.1.4duplex....................................................................................................162
3.1.5speed.....................................................................................................16463.1.6speed.....................................................................................................165
3.1.7interface..................................................................................................167
3.1.8interfacerange..........................................................................................168
3.1.9interfacerangecreatevlan............................................................................169
3.1.10jumboframe............................................................................................170
3.1.11media-type.............................................................................................171
3.1.12unidirectional...........................................................................................173
3.1.13shutdown...............................................................................................174
3.1.14splitinterface...........................................................................................175
3.1.15load-interval............................................................................................176
3.1.16vlandot1qtagnative.................................................................................177
3.1.17showinterface.........................................................................................178
3.1.18showinterfacestatus.................................................................................180
3.1.19showinterfacesummary.............................................................................181
3.1.20showipinterface......................................................................................182
3.1.21switchport..............................................................................................183
3.1.22switchportaccessallowed...........................................................................184
3.1.23switchportaccessvlan...............................................................................186
3.1.24switchportmodeaccess.............................................................................187
3.1.25switchportmodetrunk................................................................................188
3.1.26switchportmodedot1q-tunnel......................................................................189
3.1.27switchporttrunkallowed.............................................................................189
3.1.28switchporttrunknativevlan.........................................................................191
3.1.29switchportport-bridgeenable.......................................................................192
3.1.30port-xconnect..........................................................................................193
3.1.31carrierup-hold-timeinterval.........................................................................194
3.1.32carrierdown-hold-timeinterval......................................................................195
3.1.33mtu......................................................................................................196
3.1.34wavelengthfreq.......................................................................................197
3.1.35fec.......................................................................................................198
3.1.36mdi......................................................................................................199
3.2InterfaceErrdisableCommands...........................................................201
3.2.1errdisabledetect........................................................................................201
3.2.2errdisablerecoveryinterval...........................................................................202
3.2.3errdisablefdb-loopcount..............................................................................203
3.2.4errdisablefdb-loopexclude-vlan.....................................................................204
3.2.5errdisablerecoveryreason............................................................................205
3.2.6errdisableflap...........................................................................................207
3.2.7showerrdisabledetect.................................................................................208
3.2.8showerrdisablerecovery..............................................................................209
3.2.9showerrdisableflap....................................................................................210
3.2.10showerrdisablefdb-loop.............................................................................21173.2.11errdisablefdb-looptrust..............................................................................212
3.3MACAddressTableCommands...........................................................213
3.3.1mac-address-tableaging-time........................................................................213
3.3.2mac-address-tablehardware-learning..............................................................214
3.3.3mac-address-tableforward...........................................................................215
3.3.4mac-address-tablediscard............................................................................217
3.3.5clearmacaddress-table...............................................................................218
3.3.6port-bridge...............................................................................................220
3.3.7showmacaddress-tableaging-time.................................................................220
3.3.8showmacaddress-table..............................................................................221
3.3.9showmacaddress-tablehardware..................................................................223
3.3.10showmacaddress-tablecount.....................................................................224
3.3.11showmacaddress-tablehardwarecount.........................................................225
3.3.12showmacaddress-tableadd-fdb-fail..............................................................226
3.3.13showmac-filteraddress-table.......................................................................227
3.3.14showresourcemac-filter.............................................................................228
3.3.15showresourcestatic-fdb.............................................................................229
3.4VLANCommands...........................................................................230
3.4.1vlandatabase...........................................................................................230
3.4.2vlan.......................................................................................................231
3.4.3vlanport..................................................................................................232
3.4.4vlanVLAN_LIST........................................................................................233
3.4.5showvlan................................................................................................234
3.4.6showvlanall.............................................................................................235
3.4.7showvlanbrief..........................................................................................236
3.4.8showinterfaceswitchport.............................................................................237
3.4.9switchportaccessallowed............................................................................239
3.4.10switchportaccessvlan...............................................................................240
3.4.11switchportmodeaccess.............................................................................241
3.4.12switchportmodetrunk................................................................................242
3.4.13switchporttrunkallowed.............................................................................243
3.4.14switchporttrunknative...............................................................................244
3.4.15switchporttrunkunatggedvlan.....................................................................245
3.4.16vlanbridgedisable....................................................................................246
3.4.17vlanstatisticsenable.................................................................................247
3.4.18vlanstatisticsinterval.................................................................................248
3.4.19clearvlanstatistics....................................................................................250
3.4.20showvlanstatistics...................................................................................251
3.4.21showresourcevlan-stats............................................................................252
3.5VoiceVLANCommands....................................................................253
3.5.1voicevlan................................................................................................25383.5.2voicevlansecurityenable.............................................................................254
3.5.3voicevlansetcosto...................................................................................254
3.5.4voicevlanmac-address...............................................................................255
3.5.5voicevlanenable.......................................................................................257
3.5.6showvoicevlanstate..................................................................................258
3.6LinkAggregationCommands..............................................................258
3.6.1channel-group...........................................................................................258
3.6.2static-channel-group...................................................................................260
3.6.3distribute-weight........................................................................................261
3.6.4lacpmax-active-linknumber...........................................................................262
3.6.5lacppreemptenable...................................................................................263
3.6.6lacppreemptdelay.....................................................................................264
3.6.7lacpport-idextend......................................................................................265
3.6.8lacpport-priority.........................................................................................266
3.6.9lacptimeout.............................................................................................267
3.6.10lacpsystem-priority...................................................................................268
3.6.11lacpmlagsystem-id..................................................................................269
3.6.12port-channelchannel-group-numberload-balance-modedynamic...........................271
3.6.13port-channelchannel-group-numberload-balance-moderesilient............................272
3.6.14port-channelchannel-group-numberload-balance-moderound-robin.......................273
3.6.15port-channelchannel-group-numberself-healing................................................274
3.6.16port-channelchannel-group-numbersession-preservation....................................275
3.6.17port-channelchannel-group-numberstatic.......................................................276
3.6.18port-channelchannel-group-numberlacp-modedynamic......................................277
3.6.19port-channelgroup-mode............................................................................278
3.6.20local-preference.......................................................................................279
3.6.21showchannel-groupsummary......................................................................280
3.6.22showchannel-groupdetail..........................................................................282
3.6.23showlacpinternal.....................................................................................283
3.6.24showlacpinternaldetail.............................................................................284
3.6.25showlacpneighbor...................................................................................285
3.6.26showlacpneighbordetail............................................................................286
3.6.27showchannel-groupport............................................................................288
3.6.28showlacpcounters...................................................................................290
3.6.29showlacpsys-id.......................................................................................291
3.6.30clearlacpcounters....................................................................................292
3.6.31debuglacp.............................................................................................293
3.6.32showdebugginglacp.................................................................................294
3.7VLANClassificationCommands...........................................................295
3.7.1vlanclassifieractivate.................................................................................295
3.7.2vlanclassifiergroup....................................................................................297
3.7.3vlanclassifierrule......................................................................................29893.7.4vlanclassifierdefault-action..........................................................................300
3.7.5showvlanclassifiergroup.............................................................................301
3.7.6showvlanclassifierinterface.........................................................................302
3.7.7showvlanclassifierrule...............................................................................303
3.7.8showresourcevlan-classification....................................................................304
3.8VLANMappingCommands................................................................305
3.8.1ethernetevc.............................................................................................305
3.8.2dot1qmapped-vlan.....................................................................................306
3.8.3dot1qmapped-double-vlan...........................................................................307
3.8.4vlanmappingtable.....................................................................................308
3.8.5rawvlangroup..........................................................................................309
3.8.6raw-vlan..................................................................................................310
3.8.7raw-vlan..................................................................................................311
3.8.8dot1qethertype.........................................................................................313
3.8.9showvlanmappingtable..............................................................................314
3.8.10showvlanmappingtableapplied-interface.......................................................315
3.8.11switchportmode.......................................................................................316
3.8.12switchportdot1q-tunneltype........................................................................317
3.8.13switchportdot1q-tunnelnative......................................................................318
3.8.14switchportdot1q-tunnelallowvlan.................................................................319
3.8.15switchportdot1q-tunnelvlanmappingtable......................................................320
3.8.16switchportdot1q-tunnelvlanmappingmiss-forward............................................321
3.8.17switchporttrunkvlan-translation....................................................................322
3.8.18switchporttrunkvlan-translationmappingtable..................................................323
3.8.19switchporttrunkvlan-translationmiss-forward...................................................324
3.8.20vlandot1qtagnative.................................................................................325
3.8.21showresourcevlan-mapping.......................................................................325
3.9MSTPCommands...........................................................................326
3.9.1spanning-treeenable..................................................................................326
3.9.2spanning-treepriority..................................................................................327
3.9.3spanning-treeinstancepriority.......................................................................328
3.9.4spanning-treeforward-time...........................................................................329
3.9.5spanning-treehello-time...............................................................................331
3.9.6spanning-treemax-age................................................................................332
3.9.7spanning-treemax-hops..............................................................................333
3.9.8spanning-treetransmit-holdcount....................................................................334
3.9.9spanning-treeedgeportbpdu-guard.................................................................335
3.9.10spanning-treeedgeportbpdu-filter.................................................................336
3.9.11spanning-treeport....................................................................................337
3.9.12spanning-treeport-priority...........................................................................338
3.9.13spanning-treepathcost-standard...................................................................339
3.9.14spanning-treepath-cost..............................................................................340103.9.15spanning-treelink-type...............................................................................341
3.9.16spanning-treeedgeport..............................................................................343
3.9.17spanning-treeedgeportbpdu-guard...............................................................344
3.9.18spanning-treeedgeportbpdu-filter.................................................................345
3.9.19spanning-treeguardroot............................................................................346
3.9.20spanning-treeguardloop............................................................................347
3.9.21spanning-treeforce-version.........................................................................348
3.9.22spanning-treerestricted-tcn.........................................................................349
3.9.23spanning-treerestricted-role........................................................................350
3.9.24spanning-treetc-protection..........................................................................351
3.9.25spanning-treetc-protectionthreshold..............................................................352
3.9.26spanning-treemode..................................................................................353
3.9.27spanning-treeinstanceport-priority................................................................354
3.9.28spanning-treeinstancepath-cost...................................................................356
3.9.29spanning-treeinstancerestricted-tcn..............................................................357
3.9.30spanning-treeinstancerestricted-role.............................................................358
3.9.31spanning-treemstconfiguration....................................................................359
3.9.32instance.................................................................................................360
3.9.33region...................................................................................................361
3.9.34revision.................................................................................................362
3.9.35clearspanning-treedetectedprotocols............................................................363
3.9.36clearspanning-treedisabled-port..................................................................364
3.9.37showspanning-tree...................................................................................365
3.9.38showspanning-treeinterface.......................................................................366
3.9.39showspanning-treebrief............................................................................368
3.9.40showspanning-treedisabled-port..................................................................369
3.9.41showspanning-treemst.............................................................................369
3.9.42showspanning-treemstconfig.....................................................................371
3.9.43showspanning-treemstdetail......................................................................372
3.9.44showspanning-treemstinstance..................................................................373
3.9.45showspanning-treemstinterface..................................................................374
3.9.46showspanning-treemstbrief.......................................................................376
3.9.47spanning-treeinstanceforward.....................................................................377
3.10FlowControlCommands..................................................................378
3.10.1flowcontrolsend.......................................................................................378
3.10.2flowcontrolreceive....................................................................................379
3.10.3showflowcontrol......................................................................................380
3.11Priority-basedflowcontrolCommands..................................................382
3.11.1priority-flow-controlenablepriority.................................................................382
3.11.2showpriority-flow-control............................................................................383
3.11.3showpriority-flow-controlstatistics.................................................................384113.12Layer2ProtocolsTunnelingCommands...............................................385
3.12.1l2protocolenable......................................................................................385
3.12.2l2protocoltunnel-dmac...............................................................................386
3.12.3l2protocolmac1.......................................................................................387
3.12.4l2protocolmac<2-6>.................................................................................388
3.12.5l2protocol...............................................................................................389
3.12.6l2protocoluplinkenable..............................................................................391
3.12.7showl2protocol........................................................................................392
3.12.8l2protocolcos..........................................................................................393
3.12.9l2protocolfull-mac....................................................................................394
3.13StormControlCommands................................................................395
3.13.1portstorm-control.....................................................................................395
3.13.2vlanstorm-control.....................................................................................396
3.13.3ipgstorm-controlenable.............................................................................398
3.13.4showstorm-control...................................................................................399
3.13.5showstorm-controlresource........................................................................400
3.14LoopbackDetectionCommands.........................................................401
3.14.1loopback-detectenable..............................................................................401
3.14.2loopback-detectpacket-interval....................................................................402
3.14.3loopback-detectrecovery-time......................................................................403
3.14.4loopback-detectdelay-time..........................................................................404
3.14.5loopback-detectaction...............................................................................405
3.14.6loopback-detectpacketvlan........................................................................407
3.14.7showloopback-detect................................................................................408
3.14.8loopback-detectin-loop-enable.....................................................................409
3.15MLAGCommands.........................................................................410
3.15.1mlagconfiguration....................................................................................410
3.15.2peer-address...........................................................................................411
3.15.3peer-link................................................................................................412
3.15.4timersmlag.............................................................................................413
3.15.5reload-delay............................................................................................415
3.15.6sync-orphan............................................................................................416
3.15.7sync-overlay...........................................................................................417
3.15.8mlag.....................................................................................................418
3.15.9clearmlagcount.......................................................................................419
3.15.10showmlag............................................................................................420
3.15.11showmlagpeer......................................................................................421
3.15.12showmlaginterface.................................................................................423
3.16Hashload-banlanceCommands.........................................................424
3.16.1hashfield...............................................................................................424
3.16.2l2.........................................................................................................425123.16.3ip.........................................................................................................426
3.16.4ipv6......................................................................................................428
3.16.5vxlan....................................................................................................429
3.16.6nvgre....................................................................................................431
3.16.7showhash-value......................................................................................433
3.16.8showhash-valueinterface-applied.................................................................434
3.16.9hash-valueglobal.....................................................................................435
3.16.10showhash-valueglobal............................................................................436
4IPServiceCommands.........................................................................438
4.1ARPCommands.............................................................................438
4.1.1arp........................................................................................................438
4.1.2arpretry-interval........................................................................................439
4.1.3arptimeout...............................................................................................440
4.1.4arpas-layer-3enable..................................................................................442
4.1.5arpfakeglobalenable.................................................................................443
4.1.6arpfakeenable.........................................................................................443
4.1.7arpfaketimeout.........................................................................................444
4.1.8cleararp-cache.........................................................................................445
4.1.9cleariparp...............................................................................................447
4.1.10cleariparpstatistics..................................................................................448
4.1.11showiparp.............................................................................................449
4.1.12showiparpsummary.................................................................................450
4.1.13debugarp..............................................................................................452
4.1.14showdebuggingarp..................................................................................453
4.1.15proxy-arpenable......................................................................................454
4.1.16local-proxy-arpenable...............................................................................455
4.1.17gratuitous-arp-learningenable......................................................................456
4.1.18gratuitous-arpsendinterval.........................................................................457
4.1.19gratuitous-arpsendenable..........................................................................458
4.2DHCPClientCommands...................................................................459
4.2.1ipaddressdhcp.........................................................................................459
4.2.2managementipaddressdhcp........................................................................460
4.2.3dhcpclientrequest.....................................................................................461
4.2.4dhcpclientclient-id.....................................................................................463
4.2.5dhcpclientclass-id.....................................................................................465
4.2.6dhcpclientlease........................................................................................466
4.2.7dhcpclienthostname..................................................................................468
4.2.8dhcpclientdefault-routerdistance...................................................................469
4.2.9dhcpclientbroadcast-flag.............................................................................470
4.2.10debugdhcpclient.....................................................................................471
4.2.11showdhcpclient......................................................................................472134.2.12showdhcpclientstatistics...........................................................................473
4.2.13cleardhcpclientstatistics...........................................................................474
4.3DHCPRelayCommands...................................................................475
4.3.1dhcprelay................................................................................................475
4.3.2dhcp-server(global)....................................................................................476
4.3.3dhcp-server(interface).................................................................................477
4.3.4dhcprelayinformationcheck.........................................................................478
4.3.5dhcprelayinformationoption.........................................................................479
4.3.6dhcprelayinformationpolicy.........................................................................480
4.3.7dhcprelayinformationpolicy(interface)............................................................482
4.3.8dhcprelayinformationtrust-all.......................................................................483
4.3.9dhcprelayinformationtrusted........................................................................484
4.3.10dhcprelaygateway...................................................................................485
4.3.11dhcprelayaddresscycle............................................................................486
4.3.12servicedhcp...........................................................................................487
4.3.13debugdhcprelay......................................................................................488
4.3.14showdhcp-server.....................................................................................490
4.3.15showdhcprelayinterfaces..........................................................................491
4.3.16showdhcprelayinformationconfig................................................................492
4.3.17showdhcprelayinformationtrusted-sources....................................................493
4.3.18showdhcprelaystatistics...........................................................................494
4.3.19cleardhcprelaystatistics............................................................................495
4.4DHCPServerCommands..................................................................495
4.4.1servicedhcp.............................................................................................495
4.4.2dhcp-server(global)....................................................................................497
4.4.3dhcp-server(interface).................................................................................498
4.4.4dhcppingpackets......................................................................................499
4.4.5dhcppingtimeout.......................................................................................500
4.4.6dhcppool................................................................................................501
4.4.7static-bind................................................................................................503
4.4.8dns-serveraddress.....................................................................................504
4.4.9domain-name...........................................................................................505
4.4.10bootfile-name..........................................................................................507
4.4.11tftp-server-address....................................................................................508
4.4.12gatewayaddress......................................................................................510
4.4.13netbios-name-server.................................................................................511
4.4.14netbios-node-type.....................................................................................512
4.4.15network.................................................................................................513
4.4.16lease....................................................................................................515
4.4.17option...................................................................................................516
4.4.18dhcpexcluded-address..............................................................................518
4.4.19showdhcpserverconflict............................................................................519144.4.20showdhcpserverbinding...........................................................................520
4.4.21showdhcpserverstatistics..........................................................................521
4.4.22showdhcpserverconfig.............................................................................522
4.4.23cleardhcpserverconflict............................................................................523
4.4.24cleardhcpserverbinding............................................................................524
4.4.25cleardhcpserverstatistics..........................................................................526
4.4.26showdhcpserverpool...............................................................................526
4.5DNSCommands.............................................................................528
4.5.1iphost....................................................................................................528
4.5.2dnsdomain..............................................................................................529
4.5.3dnsserver...............................................................................................530
4.5.4showdns.................................................................................................531
4.5.5showiphost.............................................................................................532
5IPv6ServiceCommands......................................................................534
5.1TunnelCommands..........................................................................534
5.1.1interface..................................................................................................534
5.1.2tunnelmode.............................................................................................535
5.1.3tunnelsource............................................................................................536
5.1.4tunneldestination.......................................................................................538
5.1.5tunnelenable............................................................................................539
5.1.6tunnelecmp-destination...............................................................................540
5.1.7tunnelgrekey...........................................................................................541
5.1.8tunnelextend-header..................................................................................542
5.1.9tunnelextend-headerid...............................................................................543
5.1.10tunneldscp.............................................................................................544
5.1.11tunnelttl................................................................................................545
5.1.12ipv6mtu................................................................................................546
5.1.13showinterfacetunnel.................................................................................547
5.1.14showresourcetunnel................................................................................548
5.2NDPCommands.............................................................................549
5.2.1ipv6neighbor............................................................................................549
5.2.2clearipv6neighbors....................................................................................550
5.2.3ipv6hop-limit............................................................................................551
5.2.4ipv6ndrahop-limit.....................................................................................552
5.2.5ipv6nddadattempts...................................................................................553
5.2.6ipv6ndns-interval......................................................................................554
5.2.7ipv6ndrasuppress....................................................................................555
5.2.8ipv6ndramtusuppress...............................................................................556
5.2.9ipv6ndrainterval.......................................................................................557
5.2.10ipv6ndralifetime.....................................................................................558
5.2.11ipv6ndreachable-time...............................................................................560155.2.12ipv6ndmanaged-config-flag........................................................................561
5.2.13ipv6ndother-config-flag.............................................................................562
5.2.14ipv6ndprefix..........................................................................................562
5.2.15showipv6interfaceIFNAMEprefix................................................................564
5.2.16showipv6neighbors..................................................................................565
5.2.17debugipv6nd.........................................................................................566
5.3DHCPv6RelayCommands................................................................567
5.3.1dhcpv6relay.............................................................................................567
5.3.2dhcpv6-server(global).................................................................................568
5.3.3dhcpv6-server(interface)..............................................................................569
5.3.4dhcpv6relayremote-idoption........................................................................571
5.3.5dhcpv6relayremote-idformat........................................................................572
5.3.6dhcpv6relaypdroute..................................................................................573
5.3.7dhcpv6relaypdroutedistance.......................................................................574
5.3.8servicedhcpv6..........................................................................................575
5.3.9debugdhcpv6relay....................................................................................576
5.3.10showdhcpv6-server..................................................................................577
5.3.11showdhcpv6relayinterfaces.......................................................................578
5.3.12showdhcpv6relaypdclient.........................................................................579
5.3.13showdhcpv6relaystatistics........................................................................580
5.3.14cleardhcpv6relaystatistics.........................................................................581
5.3.15cleardhcpv6relaypdroute.........................................................................582
6IPRoutingCommands........................................................................584
6.1IPUnicast-RoutingCommands............................................................584
6.1.1ipaddress................................................................................................584
6.1.2ipicmperror-interval...................................................................................586
6.1.3ipredirects...............................................................................................587
6.1.4ipunreachables.........................................................................................588
6.1.5ipverifyunicastreverse-path.........................................................................589
6.1.6unicastreverse-pathcheck-type(strict|loose(allow-default-route|))..........................590
6.1.7router-id(global)........................................................................................591
6.1.8iproute...................................................................................................592
6.1.9showiproute............................................................................................594
6.1.10showiproutedatabase..............................................................................596
6.1.11showipprotocols.....................................................................................597
6.1.12showiproutesummary..............................................................................599
6.1.13showiprouteadd-fib-fail.............................................................................600
6.1.14max-static-routes......................................................................................601
6.1.15showresourcefib.....................................................................................602
6.1.16ecmpload-balance-modedynamic................................................................603
6.1.17ecmpload-balance-modedynamic(efd-only|tcp-only).........................................604166.1.18ecmpload-balance-modestatic....................................................................605
6.1.19ecmpload-balance-modestaticself-healing.....................................................605
6.1.20ecmpload-balance-moderound-robin.............................................................606
6.1.21ecmpbandwidth-based-load-balance.............................................................607
6.1.22showecmpinformation..............................................................................608
6.2RIPCommands..............................................................................609
6.2.1default-informationoriginate(RIP)...................................................................609
6.2.2default-metric(RIP)....................................................................................610
6.2.3distance(RIP)...........................................................................................611
6.2.4ipripauthentication....................................................................................613
6.2.5ipripauthenticationmode.............................................................................614
6.2.6ipripreceiveversion...................................................................................615
6.2.7ipripreceive-packet....................................................................................617
6.2.8ipripsendversion......................................................................................618
6.2.9ipripsend-packet.......................................................................................619
6.2.10ipripsplit-horizon.....................................................................................620
6.2.11network(RIP)..........................................................................................621
6.2.12neighbor(RIP).........................................................................................622
6.2.13offset-list(RIP).........................................................................................624
6.2.14passive-interface(RIP)...............................................................................625
6.2.15redistribute(RIP)......................................................................................626
6.2.16routerrip................................................................................................628
6.2.17timersbasic(RIP).....................................................................................629
6.2.18showipripdatabase.................................................................................630
6.2.19showipripinterface..................................................................................631
6.2.20version(RIP)...........................................................................................633
6.2.21distribute-list...........................................................................................634
6.2.22address-family.........................................................................................635
6.2.23showipprotocolrip...................................................................................636
6.2.24debugrip...............................................................................................637
6.2.25showdebuggingrip...................................................................................638
6.2.26showipripdatabasedatabase-summary.........................................................639
6.2.27showresourcerip.....................................................................................640
6.3OSPFCommands...........................................................................641
6.3.1areaauthentication.....................................................................................641
6.3.2areadefault-cost........................................................................................643
6.3.3areafilter-list.............................................................................................645
6.3.4arearange...............................................................................................647
6.3.5areastub.................................................................................................649
6.3.6areanssa................................................................................................650
6.3.7auto-cost.................................................................................................653
6.3.8clearipospf.............................................................................................654176.3.9compatiblerfc1583.....................................................................................655
6.3.10default-informationoriginate(OSPF)..............................................................656
6.3.11default-metric(OSPF)................................................................................657
6.3.12distance(OSPF)......................................................................................659
6.3.13distribute-list(OSPF).................................................................................661
6.3.14distribute-list(OSPF).................................................................................662
6.3.15ipospfauthentication.................................................................................663
6.3.16ipospfauthentication-key...........................................................................665
6.3.17ipospfcost.............................................................................................666
6.3.18ipospfdatabase-filterallout........................................................................667
6.3.19ipospfdead-interval..................................................................................668
6.3.20ipospfhello-interval..................................................................................670
6.3.21ipospfmessage-digest-keymd5...................................................................671
6.3.22ipospfmtu.............................................................................................673
6.3.23ipospfmtu-ignore.....................................................................................674
6.3.24ipospfpriority..........................................................................................675
6.3.25ipospfretransmit-interval............................................................................676
6.3.26ipospftransmit-delay................................................................................677
6.3.27ipospfnetwork........................................................................................679
6.3.28neighbor(OSPF)......................................................................................681
6.3.29networkarea(OSPF).................................................................................682
6.3.30overflowdatabaseexternal..........................................................................684
6.3.31passive-interface(OSPF)............................................................................685
6.3.32redistribute(OSPF)...................................................................................686
6.3.33router-id(OSPF)......................................................................................688
6.3.34routerospf..............................................................................................689
6.3.35ospfrestart.............................................................................................691
6.3.36ospfrestarthelper.....................................................................................692
6.3.37ospfrestartperiod.....................................................................................693
6.3.38summary-address(OSPF)..........................................................................694
6.3.39showipospf...........................................................................................695
6.3.40showipospfborder-routers.........................................................................697
6.3.41showipospfdatabase...............................................................................698
6.3.42showipospfinterface................................................................................700
6.3.43showipospfneighbor................................................................................702
6.3.44showipospfsummary-address....................................................................703
6.3.45showipospfroutesummary........................................................................704
6.3.46showipprotocolsospf...............................................................................705
6.3.47showipospfprocesses-count......................................................................706
6.3.48timersspf...............................................................................................707
6.3.49max-concurrent-dd....................................................................................708
6.3.50maximum-area........................................................................................709186.3.51refreshtimer...........................................................................................710
6.3.52ipospfbfd..............................................................................................711
6.3.53debugospf.............................................................................................712
6.3.54debugospfbfd.........................................................................................713
6.3.55debugospfevents....................................................................................714
6.3.56debugospfifsm.......................................................................................715
6.3.57debugospfnfsm......................................................................................716
6.3.58debugospflsa.........................................................................................717
6.3.59debugospfpacket....................................................................................719
6.3.60debugospfroute......................................................................................720
6.3.61showdebuggingospf.................................................................................721
6.3.62showresourceospf...................................................................................722
6.3.63min-lsa-interval........................................................................................723
6.4RouteMapCommands.....................................................................724
6.4.1route-map................................................................................................724
6.4.2matchas-path...........................................................................................728
6.4.3matchcommunity.......................................................................................729
6.4.4matchinterface.........................................................................................730
6.4.5matchipaddress.......................................................................................732
6.4.6matchipaddressprefix-list...........................................................................733
6.4.7matchipnext-hop......................................................................................734
6.4.8matchipnext-hopprefix-list..........................................................................736
6.4.9matchlocal-preference................................................................................737
6.4.10matchmetric...........................................................................................738
6.4.11matchorigin............................................................................................739
6.4.12matchroute-typeexternal...........................................................................741
6.4.13matchtag...............................................................................................742
6.4.14setaggregator.........................................................................................743
6.4.15setas-path.............................................................................................744
6.4.16setatomic-aggregate.................................................................................746
6.4.17setcomm-listdelete..................................................................................747
6.4.18setcommunity.........................................................................................748
6.4.19setdampening.........................................................................................750
6.4.20setextcommunity.....................................................................................752
6.4.21setipnext-hopip-group..............................................................................754
6.4.22setipdefaultnext-hopip-group.....................................................................755
6.4.23setipnext-hop.........................................................................................756
6.4.24setipvrfnext-hop.....................................................................................757
6.4.25setipdefaultnext-hop................................................................................758
6.4.26setipdefaultvrfnext-hop............................................................................760
6.4.27setlocal-preference...................................................................................761
6.4.28setmetric...............................................................................................762196.4.29setmetric-type.........................................................................................764
6.4.30setorigin................................................................................................765
6.4.31setoriginator-id........................................................................................766
6.4.32settag...................................................................................................767
6.4.33setvpnv4next-hop...................................................................................768
6.4.34setweight..............................................................................................769
6.4.35showroute-map.......................................................................................770
6.5Prefix-listCommands.......................................................................771
6.5.1ipprefix-list..............................................................................................771
6.5.2ipprefix-listdescription................................................................................775
6.5.3ipprefix-listsequence-number.......................................................................776
6.5.4showipprefix-list.......................................................................................777
6.5.5clearipprefix-list........................................................................................778
6.6Policy-BasedRoutingCommands........................................................779
6.6.1ippolicyroute-map.....................................................................................779
6.6.2ip-group..................................................................................................780
6.6.3ip-member...............................................................................................781
6.6.4showip-group...........................................................................................783
6.6.5showippolicyroute-map..............................................................................784
6.6.6showresourcepbr......................................................................................785
6.7BGPCommands.............................................................................786
6.7.1address-family..........................................................................................786
6.7.2aggregate-address.....................................................................................787
6.7.3bgpalways-compare-med............................................................................788
6.7.4bgpbestpathas-pathignore..........................................................................789
6.7.5bgpbestpathcompare-confed-aspath..............................................................790
6.7.6bgpbestpathcompare-routerid......................................................................791
6.7.7bgpbestpathmed......................................................................................792
6.7.8bgpclient-to-clientreflection..........................................................................793
6.7.9bgpcluster-id............................................................................................794
6.7.10bgpconfederationidentifier.........................................................................796
6.7.11bgpconfederationpeers.............................................................................797
6.7.12bgpdampening........................................................................................798
6.7.13bgpdefaultipv4-unicast..............................................................................801
6.7.14bgpdefaultlocal-preference........................................................................802
6.7.15bgpdeterministic-med................................................................................803
6.7.16bgpenforce-first-as...................................................................................804
6.7.17bgpfast-external-failover............................................................................805
6.7.18bgplog-neighbor-changes...........................................................................806
6.7.19bgprouter-id...........................................................................................807
6.7.20bgpscan-time.........................................................................................808206.7.21clearipbgp*...........................................................................................809
6.7.22clearipbgpA.B.C.D..................................................................................811
6.7.23clearipbgpdampening..............................................................................813
6.7.24clearipbgpflap-statistics............................................................................814
6.7.25clearipbgpASN......................................................................................816
6.7.26clearipbgpexternal..................................................................................817
6.7.27clearipbgppeer-group..............................................................................819
6.7.28clearipbgpvrf.........................................................................................820
6.7.29debugbgp..............................................................................................822
6.7.30distance.................................................................................................823
6.7.31exit-address-family....................................................................................825
6.7.32ipas-pathaccess-list.................................................................................826
6.7.33ipcommunity-list......................................................................................827
6.7.34ipcommunity-listexpanded.........................................................................829
6.7.35ipcommunity-liststandard...........................................................................830
6.7.36neighboractivate......................................................................................833
6.7.37neighboradvertisement-interval....................................................................835
6.7.38neighboras-origination-interval.....................................................................836
6.7.39neighborallowas-in...................................................................................838
6.7.40neighborattribute-unchanged.......................................................................839
6.7.41neighborcapabilitydynamic.........................................................................841
6.7.42neighborcapabilityorfprefix-list....................................................................842
6.7.43neighborcapabilityroute-refresh...................................................................844
6.7.44neighbordefault-originate...........................................................................846
6.7.45neighbordescription..................................................................................848
6.7.46neighbordistribute-list................................................................................850
6.7.47neighborebgp-multihop..............................................................................851
6.7.48neighborfilter-list......................................................................................853
6.7.49neighbormaximum-prefix............................................................................855
6.7.50neighbornext-hop-self...............................................................................857
6.7.51neighboroverride-capability.........................................................................858
6.7.52neighborpassive......................................................................................859
6.7.53neighborpeer-group(addinganeighbor).........................................................861
6.7.54neighborpeer-group(creatingapeer-group).....................................................862
6.7.55neighborprefix-list....................................................................................863
6.7.56neighborremote-as...................................................................................865
6.7.57neighborremove-private-AS........................................................................867
6.7.58neighborroute-reflector-client.......................................................................868
6.7.59neighborsend-community...........................................................................870
6.7.60neighborshutdown...................................................................................871
6.7.61neighborsoft-reconfigurationinbound.............................................................873
6.7.62neighborstrict-capability-match....................................................................875216.7.63neighbortimers........................................................................................876
6.7.64neighborunsuppress-map...........................................................................878
6.7.65neighborupdate-source..............................................................................880
6.7.66neighborweight.......................................................................................881
6.7.67neighborfall-overbfd.................................................................................883
6.7.68network.................................................................................................884
6.7.69networksynchronization.............................................................................885
6.7.70synchronization........................................................................................886
6.7.71routerbgp..............................................................................................888
6.7.72showdebuggingbgp.................................................................................889
6.7.73showipbgp............................................................................................889
6.7.74showipbgpattribute-info............................................................................891
6.7.75showipbgpcidr-only.................................................................................891
6.7.76showipbgpcommunity..............................................................................893
6.7.77showipbgpcommunity-info........................................................................894
6.7.78showipbgpcommunity-list..........................................................................895
6.7.79showipbgpdampening..............................................................................897
6.7.80showipbgpfilter-list..................................................................................898
6.7.81showipbgpinconsistent-as.........................................................................900
6.7.82showipbgpneighbors...............................................................................901
6.7.83showipbgppaths.....................................................................................903
6.7.84showipbgpprefix-list................................................................................904
6.7.85showipbgpquote-regexp...........................................................................905
6.7.86showipbgpregexp...................................................................................907
6.7.87showipbgpscan.....................................................................................908
6.7.88showipbgpsummary................................................................................909
6.7.89showipbgpvpnv4all................................................................................910
6.7.90showipbgpvpnv4rd.................................................................................911
6.7.91showipbgpvpnv4vrf................................................................................913
6.7.92timers...................................................................................................914
6.8ISISCommands.............................................................................915
6.8.1accept-lifetime...........................................................................................915
6.8.2address-familyipv6.....................................................................................917
6.8.3adjacency-check........................................................................................918
6.8.4area-password..........................................................................................919
6.8.5authenticationkey-chain..............................................................................921
6.8.6authenticationmodemd5.............................................................................923
6.8.7authenticationsend-only..............................................................................924
6.8.8bfdall-interfaces........................................................................................926
6.8.9clearclnsneighbors....................................................................................927
6.8.10clearclnsis-neighbors...............................................................................927
6.8.11clearipisisroute......................................................................................928226.8.12clearisiscounter......................................................................................929
6.8.13clearisisinterfacecounter...........................................................................930
6.8.14clearisisprocess......................................................................................931
6.8.15debugisis..............................................................................................932
6.8.16default-informationoriginate........................................................................934
6.8.17distance.................................................................................................936
6.8.18domain-password.....................................................................................937
6.8.19ignore-lsp-errors.......................................................................................939
6.8.20iproutehigh-prioritytag..............................................................................940
6.8.21iprouterisis............................................................................................941
6.8.22ipv6routerisis.........................................................................................942
6.8.23isisauthenticationkey-chain........................................................................943
6.8.24isisauthenticationmodemd5.......................................................................945
6.8.25isisauthenticationsend-only........................................................................946
6.8.26isisbfd..................................................................................................947
6.8.27isiscircuit-type.........................................................................................949
6.8.28isiscsnp-interval......................................................................................950
6.8.29isishello................................................................................................951
6.8.30isishello-interval......................................................................................952
6.8.31isishello-multiplier....................................................................................954
6.8.32isislsp-interval.........................................................................................955
6.8.33isismesh-group.......................................................................................956
6.8.34isismetric...............................................................................................957
6.8.35isisnetwork............................................................................................959
6.8.36isispassword..........................................................................................960
6.8.37isisprefix-sid...........................................................................................961
6.8.38isispriority..............................................................................................962
6.8.39isisretransmit-interval................................................................................963
6.8.40isistag..................................................................................................964
6.8.41ispf.......................................................................................................966
6.8.42is-type...................................................................................................967
6.8.43lsp-gen-interval........................................................................................968
6.8.44lsp-mtu..................................................................................................969
6.8.45lsp-refresh-interval....................................................................................970
6.8.46max-area-addresses.................................................................................971
6.8.47max-lsp-lifetime.......................................................................................972
6.8.48metric-style.............................................................................................973
6.8.49net.......................................................................................................975
6.8.50passive-interface......................................................................................976
6.8.51prc-interval-exp........................................................................................977
6.8.52redistribute.............................................................................................978
6.8.53redistributeisis........................................................................................980236.8.54routerisis...............................................................................................982
6.8.55segment-routingmpls................................................................................983
6.8.56segment-routingglobal-block.......................................................................984
6.8.57set-overload-bit........................................................................................985
6.8.58spf-interval-exp........................................................................................987
6.8.59summary-address.....................................................................................988
6.8.60summary-prefix........................................................................................990
6.8.61showclnsis-neighbors...............................................................................991
6.8.62showdebuggingisis..................................................................................993
6.8.63showipisisroute......................................................................................993
6.8.64showipv6isisroute...................................................................................994
6.8.65showipv6isistopology..............................................................................995
6.8.66showipv6protocolsisis..............................................................................996
6.8.67showisiscounter......................................................................................997
6.8.68showisisdatabase...................................................................................999
6.8.69showisisinterface...................................................................................1000
6.8.70showisistopology...................................................................................1002
6.8.71showrunning-configinterfaceisis................................................................1003
6.8.72showrunning-configrouterisis....................................................................1004
7IPv6RoutingCommands....................................................................1006
7.1OSPFv3Commands.......................................................................1006
7.1.1areadefault-cost......................................................................................1006
7.1.2arearange..............................................................................................1007
7.1.3areastub...............................................................................................1009
7.1.4auto-cost................................................................................................1011
7.1.5clearipv6ospf.........................................................................................1012
7.1.6default-informationoriginate(OSPFv3)...........................................................1013
7.1.7default-metric(OSPFv3).............................................................................1015
7.1.8distance(OSPFv3)....................................................................................1016
7.1.9distribute-list(OSPFv3)..............................................................................1018
7.1.10enabledb-summary-opt............................................................................1020
7.1.11ipv6ospfcost........................................................................................1021
7.1.12ipv6ospfdead-interval.............................................................................1022
7.1.13ipv6ospfhello-interval..............................................................................1023
7.1.14ipv6ospfmtu-ignore................................................................................1025
7.1.15ipv6ospfpriority.....................................................................................1026
7.1.16ipv6ospfretransmit-interval.......................................................................1027
7.1.17ipv6ospftransmit-delay............................................................................1029
7.1.18ipv6ospfnetwork....................................................................................1030
7.1.19ipv6ospfneighbor...................................................................................1031
7.1.20passive-interface(OSPF)..........................................................................1033247.1.21redistribute(OSPFv3)...............................................................................1034
7.1.22router-id(OSPF).....................................................................................1036
7.1.23routeripv6ospf......................................................................................1037
7.1.24summary-address(OSPFv3)......................................................................1038
7.1.25showipv6ospf.......................................................................................1040
7.1.26showipv6ospfdatabase...........................................................................1041
7.1.27showipv6ospfinterface............................................................................1043
7.1.28showipv6ospfneighbor...........................................................................1045
7.1.29showipv6ospfdatabasedatabase-summary..................................................1046
7.1.30showipv6ospfroute................................................................................1048
7.1.31showipv6ospfroutesummary....................................................................1049
7.1.32showipv6protocolsospf...........................................................................1051
7.1.33timersspf.............................................................................................1052
7.1.34max-concurrent-dd..................................................................................1053
7.1.35debugipv6ospf......................................................................................1054
7.1.36debugipv6ospfevents.............................................................................1055
7.1.37debugipv6ospfifsm................................................................................1056
7.1.38debugipv6ospfnfsm...............................................................................1057
7.1.39debugipv6ospflsa..................................................................................1058
7.1.40debugipv6ospfpacket.............................................................................1060
7.1.41debugipv6ospfroute...............................................................................1061
7.1.42showdebuggingipv6ospf.........................................................................1062
7.1.43showresourceipv6ospf...........................................................................1063
7.1.44showipv6vrfospf...................................................................................1064
7.1.45areanssa.............................................................................................1065
7.2RIPngCommands..........................................................................1067
7.2.1routeripv6rip..........................................................................................1067
7.2.2ipv6routerrip..........................................................................................1068
7.2.3ipv6ripmetric-offset..................................................................................1069
7.2.4ipv6ripsplit-horizon..................................................................................1070
7.2.5default-informationoriginate(RIPng)..............................................................1071
7.2.6default-metric(RIPng)................................................................................1072
7.2.7distance(RIPng)......................................................................................1073
7.2.8neighbor(RIPng)......................................................................................1075
7.2.9offset-list(RIPng)......................................................................................1077
7.2.10passive-interface(RIPng)..........................................................................1078
7.2.11redistribute(RIPng).................................................................................1079
7.2.12timersbasic(RIPng)................................................................................1081
7.2.13distribute-list(RIPng)................................................................................1083
7.2.14aggregate-address(RIPng)........................................................................1084
7.2.15routemap(RIPng)...................................................................................1086
7.2.16maximum-prefix(RIPng)............................................................................1087257.2.17showipv6ripdatabase.............................................................................1088
7.2.18showipv6ripinterface..............................................................................1089
7.2.19showipv6ripdatabasedatabase-summary....................................................1090
7.2.20showipv6protocolrip...............................................................................1091
7.2.21debugipv6rip........................................................................................1092
7.2.22showdebuggingipv6rip...........................................................................1093
7.2.23showresourceipv6rip..............................................................................1094
7.2.24clearipv6riproute...................................................................................1095
7.3IPv6UCCommands........................................................................1096
7.3.1ipv6enable.............................................................................................1096
7.3.2max-static-v6routes...................................................................................1097
7.3.3ipv6route...............................................................................................1098
7.3.4ipv6address...........................................................................................1100
7.3.5showipv6route........................................................................................1102
7.3.6showipv6interface...................................................................................1105
7.3.7ipv6verifyunicastreverse-path.....................................................................1107
7.3.8ipv6icmperror-interval...............................................................................1108
7.3.9clearipv6routestatic.................................................................................1109
7.4Ipv6Prefix-listCommands................................................................1109
7.4.1ipv6prefix-list..........................................................................................1109
7.4.2ipv6prefix-listdescription............................................................................1113
7.4.3ipv6prefix-listsequence-number...................................................................1114
7.4.4showipv6prefix-list...................................................................................1115
7.4.5clearipv6prefix-list...................................................................................1117
7.5RouteMapCommands....................................................................1118
7.5.1route-map..............................................................................................1118
7.5.2matchas-path.........................................................................................1121
7.5.3matchcommunity.....................................................................................1122
7.5.4matchinterface........................................................................................1124
7.5.5matchipv6address...................................................................................1125
7.5.6matchipv6addressprefix-list.......................................................................1126
7.5.7matchipv6next-hop..................................................................................1128
7.5.8matchipv6next-hopprefix-list......................................................................1129
7.5.9matchlocal-preference...............................................................................1130
7.5.10matchmetric..........................................................................................1131
7.5.11matchorigin..........................................................................................1133
7.5.12matchroute-type.....................................................................................1134
7.5.13matchtag.............................................................................................1135
7.5.14setipv6aggregator..................................................................................1136
7.5.15setas-path............................................................................................1138
7.5.16setatomic-aggregate...............................................................................1139267.5.17setcomm-listdelete.................................................................................1140
7.5.18setcommunity........................................................................................1141
7.5.19setdampening.......................................................................................1144
7.5.20setextcommunity....................................................................................1146
7.5.21setipv6next-hop....................................................................................1147
7.5.22setlocal-preference.................................................................................1148
7.5.23setmetric.............................................................................................1149
7.5.24setmetric-type.......................................................................................1151
7.5.25setorigin..............................................................................................1152
7.5.26setipv6originator-id................................................................................1153
7.5.27settag.................................................................................................1154
7.5.28setvpnv6next-hop..................................................................................1155
7.5.29setweight.............................................................................................1157
7.5.30showroute-map......................................................................................1158
7.6IPv6BGPCommands.....................................................................1159
7.6.1address-family.........................................................................................1159
7.6.2aggregate-address....................................................................................1160
7.6.3bgpalways-compare-med...........................................................................1161
7.6.4bgpbestpathas-pathignore........................................................................1162
7.6.5bgpbestpathcompare-confed-aspath.............................................................1163
7.6.6bgpbestpathcompare-routerid.....................................................................1164
7.6.7bgpbestpathmed.....................................................................................1165
7.6.8bgpclient-to-clientreflection........................................................................1167
7.6.9bgpcluster-id..........................................................................................1168
7.6.10bgpconfederationidentifier........................................................................1169
7.6.11bgpconfederationpeers...........................................................................1170
7.6.12bgpdampening......................................................................................1171
7.6.13bgpdefaultlocal-preference.......................................................................1174
7.6.14bgpdeterministic-med..............................................................................1175
7.6.15bgpenforce-first-as..................................................................................1176
7.6.16bgpfast-external-failover...........................................................................1177
7.6.17bgplog-neighbor-changes.........................................................................1178
7.6.18bgprouter-id..........................................................................................1180
7.6.19bgpscan-time........................................................................................1181
7.6.20clearbgpipv6*......................................................................................1182
7.6.21clearbgpipv6X:X::X:X.............................................................................1183
7.6.22clearbgpipv6unicastdampening................................................................1185
7.6.23clearbgpipv6unicastflap-statistics..............................................................1186
7.6.24clearbgpipv6ASN..................................................................................1187
7.6.25clearbgpipv6external.............................................................................1188
7.6.26clearbgpipv6peer-group..........................................................................1189
7.6.27debugbgp............................................................................................1190277.6.28exit-address-family..................................................................................1192
7.6.29neighboractivate....................................................................................1193
7.6.30neighboradvertisement-interval...................................................................1194
7.6.31neighborallowas-in..................................................................................1196
7.6.32neighborattribute-unchanged.....................................................................1198
7.6.33neighborcapabilityorfprefix-list..................................................................1200
7.6.34neighbordefault-originate..........................................................................1202
7.6.35neighbordescription................................................................................1203
7.6.36neighbordistribute-list..............................................................................1205
7.6.37neighborebgp-multihop............................................................................1206
7.6.38neighborfilter-list....................................................................................1208
7.6.39neighbormaximum-prefix..........................................................................1209
7.6.40neighbornext-hop-self..............................................................................1211
7.6.41neighboroverride-capability.......................................................................1213
7.6.42neighborpassive....................................................................................1214
7.6.43neighborpeer-group(addinganeighbor).......................................................1215
7.6.44neighborpeer-group(creatingapeer-group)...................................................1217
7.6.45neighborprefix-list...................................................................................1218
7.6.46neighborremote-as.................................................................................1220
7.6.47neighborremove-private-AS.......................................................................1222
7.6.48neighborroute-reflector-client.....................................................................1223
7.6.49neighborsend-community.........................................................................1225
7.6.50neighborshutdown..................................................................................1226
7.6.51neighborsoft-reconfigurationinbound...........................................................1228
7.6.52neighborstrict-capability-match...................................................................1230
7.6.53neighbortimers......................................................................................1231
7.6.54neighborunsuppress-map.........................................................................1233
7.6.55neighborupdate-source............................................................................1235
7.6.56neighborweight......................................................................................1236
7.6.57network................................................................................................1238
7.6.58networksynchronization............................................................................1239
7.6.59synchronization......................................................................................1240
7.6.60routerbgp.............................................................................................1242
7.6.61showdebuggingbgp................................................................................1243
7.6.62showbgpipv6........................................................................................1243
7.6.63showbgpipv6community.........................................................................1244
7.6.64showbgpipv6community-list.....................................................................1246
7.6.65showbgpipv6dampening.........................................................................1247
7.6.66showbgpipv6filter-list.............................................................................1248
7.6.67showbgpipv6inconsistent-as....................................................................1249
7.6.68showbgpipv6neighbors...........................................................................1249
7.6.69showbgpipv6paths................................................................................1250287.6.70showbgpipv6prefix-list............................................................................1251
7.6.71showbgpipv6quote-regexp.......................................................................1252
7.6.72showbgpipv6regexp..............................................................................1253
7.6.73showbgpipv6summary...........................................................................1254
7.6.74timers..................................................................................................1254
8MulticastCommands........................................................................1257
8.1IPMulticast-RoutingCommands.........................................................1257
8.1.1ipmulticast-routing....................................................................................1257
8.1.2ipmulticastroute-limit................................................................................1258
8.1.3showipmroute........................................................................................1259
8.1.4showipmvif............................................................................................1261
8.1.5showipmulticastgroupscount.....................................................................1262
8.1.6showresourcemcast.................................................................................1262
8.1.7clearipmroute.........................................................................................1263
8.2IGMPCommands..........................................................................1264
8.2.1ipigmpaccess-group.................................................................................1264
8.2.2ipigmpimmediate-leavegroup-list.................................................................1266
8.2.3ipigmplast-member-query-count..................................................................1267
8.2.4ipigmplast-member-query-interval................................................................1268
8.2.5ipigmplimit............................................................................................1269
8.2.6ipigmpmroute-proxy.................................................................................1270
8.2.7ipigmpproxy-service.................................................................................1272
8.2.8ipigmpquerier-timeout...............................................................................1273
8.2.9ipigmpquery-interval................................................................................1274
8.2.10ipigmpquery-max-response-time................................................................1275
8.2.11ipigmprobustness-variable.......................................................................1276
8.2.12ipigmpversion.......................................................................................1277
8.2.13ipigmpstatic-group.................................................................................1278
8.2.14ipigmpssm-mapenable...........................................................................1279
8.2.15ipigmpssm-mapstatic.............................................................................1280
8.2.16clearipigmp..........................................................................................1281
8.2.17clearipigmpinterface..............................................................................1282
8.2.18showipigmpgroups................................................................................1283
8.2.19showipigmpgroupsinterface.....................................................................1284
8.2.20showipigmpgroupscount........................................................................1286
8.2.21showipigmpinterface..............................................................................1287
8.3IGMPSnoopingCommands..............................................................1288
8.3.1ipigmpsnooping......................................................................................1288
8.3.2ipigmpsnoopingfast-leave.........................................................................1289
8.3.3ipigmpsnoopinglast-member-query-interval....................................................1290
8.3.4ipigmpsnoopingglobalsource-address..........................................................1291298.3.5ipigmpsnoopingmax-member-num...............................................................1292
8.3.6ipigmpsnoopingquery-interval....................................................................1294
8.3.7ipigmpsnoopingquery-max-response-time......................................................1295
8.3.8ipigmpsnoopingreport-suppression..............................................................1296
8.3.9ipigmpsnoopingversion............................................................................1297
8.3.10ipigmpsnoopingdiscard-unknown...............................................................1298
8.3.11ipigmpsnoopinglimit-mrouter-forward..........................................................1299
8.3.12ipigmpsnoopingqueriertcn.......................................................................1300
8.3.13ipigmpsnoopingvlanaccess-group.............................................................1301
8.3.14ipigmpsnoopingvlanmrouterinterface.........................................................1302
8.3.15ipigmpsnoopingvlanmrouter-aging-interval...................................................1304
8.3.16ipigmpsnoopingvlanmrouter-port-discard.....................................................1305
8.3.17ipigmpsnoopingvlanquerier.....................................................................1306
8.3.18ipigmpsnoopingvlanquerieraddress...........................................................1307
8.3.19ipigmpsnoopingvlanquerier-timeout...........................................................1308
8.3.20ipigmpsnoopingvlanstatic-group...............................................................1309
8.3.21clearipigmpsnoopinggroup......................................................................1310
8.3.22clearipigmpsnoopingvlan........................................................................1311
8.3.23clearipigmpsnoopingmroutervlan.............................................................1312
8.3.24clearipigmpsnoopingmrouter...................................................................1313
8.3.25showipigmpsnoopingglobal.....................................................................1314
8.3.26showipigmpsnoopinggroups....................................................................1315
8.3.27showipigmpsnoopinggroupsvlan..............................................................1316
8.3.28showipigmpsnoopinggroupscount............................................................1317
8.3.29showipigmpsnoopingquerier....................................................................1318
8.3.30showipigmpsnoopingmrouter...................................................................1319
8.3.31showipigmpsnoopingvlan.......................................................................1320
8.3.32showresourcel2mcast.............................................................................1321
8.4PIMCommands............................................................................1322
8.4.1ippimaccept-register................................................................................1322
8.4.2ippimanycast-rp......................................................................................1323
8.4.3ippimbsr-candidate..................................................................................1325
8.4.4ippimbsr-border......................................................................................1326
8.4.5ippimdr-priority.......................................................................................1327
8.4.6ippimexclude-genid..................................................................................1328
8.4.7ippimhello-interval...................................................................................1329
8.4.8ippimignore-rp-set-priority..........................................................................1330
8.4.9ippimjp-timer..........................................................................................1331
8.4.10ippimneighbor-filter................................................................................1332
8.4.11ippimregister-rate-limit............................................................................1333
8.4.12ippimregister-source...............................................................................1335
8.4.13ippimregister-rp-reachability......................................................................1336308.4.14ippimregister-suppression........................................................................1337
8.4.15ippimrp-address....................................................................................1338
8.4.16ippimrp-candidate..................................................................................1339
8.4.17ippimrp-register-kat................................................................................1341
8.4.18ippimspt-switch-thresholdinfinity................................................................1342
8.4.19ippimcisco-register-checksum...................................................................1343
8.4.20ippimsparse-mode.................................................................................1344
8.4.21ippimdense-mode..................................................................................1345
8.4.22ippimpropagation-delay...........................................................................1346
8.4.23ippimstate-refreshorigination-interval..........................................................1348
8.4.24ippimunicast-bsm..................................................................................1349
8.4.25ippimssm............................................................................................1350
8.4.26ippimgraceful-restart...............................................................................1351
8.4.27showippimsparse-modebsr-router.............................................................1352
8.4.28showippimsparse-modeinterface..............................................................1353
8.4.29showippimsparse-modelocal-member........................................................1354
8.4.30showippimsparse-modemroute................................................................1355
8.4.31showippimsparse-modeneighbor..............................................................1357
8.4.32showippimsparse-moderpmapping...........................................................1358
8.4.33showippimsparse-moderp-hash................................................................1359
8.4.34showippimsparse-modespt-threshold.........................................................1360
8.4.35showippimdense-modeinterface...............................................................1360
8.4.36showippimdense-modemroute.................................................................1361
8.4.37showippimdense-modeneighbor...............................................................1363
8.4.38showippimdense-modenexthop................................................................1364
8.4.39showippimdense-modeinterface...............................................................1364
8.4.40showippimdense-modemroute.................................................................1365
8.4.41showippimsparse-modenexthop-virtual-pair.................................................1367
8.4.42ippimnexthop-address.............................................................................1367
8.4.43showippimgraceful-restart.......................................................................1369
8.5MVRCommands...........................................................................1369
8.5.1mvr......................................................................................................1369
8.5.2mvrvlan................................................................................................1370
8.5.3mvrgroup..............................................................................................1371
8.5.4mvrsource-address..................................................................................1372
8.5.5mvrtype................................................................................................1373
8.5.6showmvr...............................................................................................1374
8.5.7showmvrinterface....................................................................................1375
8.5.8showmvrgroup.......................................................................................1376
8.5.9showmvrgroupstatic................................................................................1377
8.5.10showresourcemvr..................................................................................1378319IPv6MulticastCommands..................................................................1380
9.1IPv6Multicast-RoutingCommands......................................................1380
9.1.1Ipv6multicast-routing.................................................................................1380
9.1.2ipv6multicastroute-limit.............................................................................1381
9.1.3showipv6mroute.....................................................................................1382
9.1.4showipv6mif..........................................................................................1384
9.1.5showipv6multicastgroupscount..................................................................1385
9.1.6showresourcemcast6...............................................................................1385
9.1.7clearipv6mroute......................................................................................1386
9.2MLDCommands...........................................................................1387
9.2.1ipv6mldaccess-group...............................................................................1387
9.2.2ipv6mldimmediate-leavegroup-list...............................................................1389
9.2.3ipv6mldlast-member-query-count.................................................................1390
9.2.4ipv6mldlast-member-query-interval...............................................................1391
9.2.5ipv6mldlimit...........................................................................................1392
9.2.6ipv6mldmroute-proxy................................................................................1393
9.2.7ipv6mldproxy-service...............................................................................1395
9.2.8ipv6mldquerier-timeout.............................................................................1396
9.2.9ipv6mldquery-interval...............................................................................1397
9.2.10ipv6mldquery-max-response-time...............................................................1398
9.2.11ipv6mldrobustness-variable......................................................................1399
9.2.12ipv6mldversion.....................................................................................1400
9.2.13ipv6mldstatic-group................................................................................1402
9.2.14ipv6mldssm-mapenable..........................................................................1403
9.2.15ipv6mldssm-mapstatic............................................................................1404
9.2.16clearipv6mld........................................................................................1405
9.2.17clearipv6mldinterface.............................................................................1406
9.2.18showipv6mldgroups...............................................................................1407
9.2.19showipv6mldgroupsinterface...................................................................1408
9.2.20showipv6mldgroupscount.......................................................................1409
9.2.21showipv6mldinterface............................................................................1410
9.3MLDSnoopingCommands...............................................................1411
9.3.1ipv6mldsnooping.....................................................................................1411
9.3.2ipv6mldsnoopingfast-leave........................................................................1412
9.3.3ipv6mldsnoopinglast-member-query-interval...................................................1413
9.3.4ipv6mldsnoopingglobalsource-address........................................................1415
9.3.5ipv6mldsnoopingmax-member-num.............................................................1416
9.3.6ipv6mldsnoopingquery-interval...................................................................1417
9.3.7ipv6mldsnoopingquery-max-response-time....................................................1418
9.3.8ipv6mldsnoopingreport-suppression.............................................................1419
9.3.9ipv6mldsnoopingversion...........................................................................1420329.3.10ipv6mldsnoopingdiscard-unknown.............................................................1421
9.3.11ipv6mldsnoopingqueriertcn.....................................................................1422
9.3.12ipv6mldsnoopingvlanaccess-group............................................................1424
9.3.13ipv6mldsnoopingvlanmrouterinterface.......................................................1425
9.3.14ipv6mldsnoopingvlanmrouter-aging-interval.................................................1426
9.3.15ipv6mldsnoopingvlanquerier....................................................................1427
9.3.16ipv6mldsnoopingvlanquerieraddress.........................................................1428
9.3.17ipv6mldsnoopingvlanquerier-timeout..........................................................1429
9.3.18ipv6mldsnoopingvlanstatic-group..............................................................1430
9.3.19clearipv6mldsnoopinggroup....................................................................1432
9.3.20clearipv6mldsnoopingvlangroup...............................................................1433
9.3.21showipv6mldsnoopingglobal....................................................................1434
9.3.22showipv6mldsnoopinggroups...................................................................1435
9.3.23showipv6mldsnoopinggroupsvlan.............................................................1435
9.3.24showipv6mldsnoopinggroupscount...........................................................1436
9.3.25showipv6mldsnoopingquerier..................................................................1437
9.3.26showipv6mldsnoopingmrouter.................................................................1439
9.3.27showipv6mldsnoopingvlan......................................................................1440
9.3.28showresourcel2mcast.............................................................................1441
9.4PIMv6Commands.........................................................................1442
9.4.1ipv6pimaccept-register..............................................................................1442
9.4.2ipv6pimanycast-rp...................................................................................1443
9.4.3ipv6pimbsr-candidate...............................................................................1444
9.4.4ipv6pimbsr-border...................................................................................1445
9.4.5ipv6pimdr-priority....................................................................................1446
9.4.6ipv6pimexclude-genid...............................................................................1447
9.4.7ipv6pimhello-interval................................................................................1449
9.4.8ipv6pimignore-rp-set-priority.......................................................................1450
9.4.9ipv6pimjp-timer.......................................................................................1451
9.4.10ipv6pimneighbor-filter.............................................................................1452
9.4.11ipv6pimregister-rate-limit.........................................................................1453
9.4.12ipv6pimregister-source............................................................................1454
9.4.13ipv6pimregister-rp-reachability...................................................................1456
9.4.14ipv6pimregister-suppression.....................................................................1457
9.4.15ipv6pimrp-address.................................................................................1458
9.4.16ipv6pimrp-candidate...............................................................................1459
9.4.17ipv6pimrp-register-kat.............................................................................1460
9.4.18ipv6pimspt-switch-thresholdinfinity.............................................................1462
9.4.19ipv6pimcisco-register-checksum................................................................1463
9.4.20ipv6pimsparse-mode..............................................................................1464
9.4.21ipv6pimunicast-bsm...............................................................................1465
9.4.22ipv6pimssm.........................................................................................1466339.4.23showipv6pimsparse-modebsr-router..........................................................1467
9.4.24showipv6pimsparse-modeinterface...........................................................1468
9.4.25showipv6pimsparse-modelocal-member.....................................................1469
9.4.26showipv6pimsparse-modemroute.............................................................1470
9.4.27showipv6pimsparse-modeneighbor...........................................................1472
9.4.28showipv6pimsparse-moderpmapping........................................................1473
9.4.29showipv6pimsparse-moderp-hash.............................................................1474
9.4.30showipv6pimsparse-modespt-threshold......................................................1475
9.5MVR6Commands..........................................................................1476
9.5.1mvr6.....................................................................................................1476
9.5.2mvr6vlan...............................................................................................1477
9.5.3mvr6group.............................................................................................1478
9.5.4mvr6source-address.................................................................................1479
9.5.5mvr6type...............................................................................................1480
9.5.6showmvr6..............................................................................................1481
9.5.7showmvr6interface..................................................................................1482
9.5.8showmvr6group......................................................................................1483
9.5.9showmvr6groupstatic..............................................................................1484
9.5.10showresourcemvr6................................................................................1484
10TrafficManagementCommands.........................................................1486
10.1QOSCommands..........................................................................1486
10.1.1table-map.............................................................................................1486
10.1.2map....................................................................................................1487
10.1.3default.................................................................................................1488
10.1.4class-maptypeqos..................................................................................1489
10.1.5matchaccess-group................................................................................1491
10.1.6matchcos.............................................................................................1492
10.1.7matchdscp...........................................................................................1493
10.1.8class-maptypetraffic-class........................................................................1494
10.1.9matchtraffic-class...................................................................................1495
10.1.10policy-maptypeqos...............................................................................1496
10.1.11classtypeqos......................................................................................1497
10.1.12classtypeqosclass-default......................................................................1498
10.1.13setcos...............................................................................................1499
10.1.14setdscp..............................................................................................1500
10.1.15settraffic-class.....................................................................................1501
10.1.16setcolor.............................................................................................1502
10.1.17policer................................................................................................1503
10.1.18qosaggregate-policer.............................................................................1506
10.1.19aggregate-policer..................................................................................1509
10.1.20policy-maptypetraffic-class......................................................................15103410.1.21classtypetraffic-class.............................................................................1512
10.1.22classtypetraffic-classclass-default............................................................1513
10.1.23prioritylevel.........................................................................................1514
10.1.24bandwidthpercentage.............................................................................1515
10.1.25queue-limit..........................................................................................1516
10.1.26queue-limitdynamic...............................................................................1517
10.1.27random-detect......................................................................................1518
10.1.28service-policytypeqos............................................................................1520
10.1.29service-policytypetraffic-class..................................................................1521
10.1.30qospolicer..........................................................................................1522
10.1.31qosshaperate......................................................................................1525
10.1.32showtable-map....................................................................................1526
10.1.33showclass-map....................................................................................1527
10.1.34showpolicy-map...................................................................................1528
10.1.35showqosaggregate-policer......................................................................1529
10.1.36showqosinterfaceingress.......................................................................1530
10.1.37showqosinterfaceegress........................................................................1531
10.1.38showqosaggregate-policerstatistics..........................................................1533
10.1.39showpolicy-maptypeqosstatisticsinterfaceace............................................1534
10.1.40showpolicy-maptypeqosstatisticsvlanace.................................................1535
10.1.41showpolicy-maptypeqosstatisticsport-groupace..........................................1537
10.1.42showpolicy-maptypeqosstatisticsvlan-groupace.........................................1539
10.1.43showpolicy-maptypeqosstatisticsinterfacepolicer........................................1541
10.1.44showpolicy-maptypeqosstatisticsvlanpolicer..............................................1542
10.1.45showpolicy-maptypeqosstatisticsport-grouppolicer......................................1544
10.1.46showpolicy-maptypeqosstatisticsvlan-grouppolicer......................................1545
10.1.47showqosinterfacestatisticspolicer............................................................1547
10.1.48showqosinterfacestatisticsqueue.............................................................1548
10.1.49clearqosaggregate-policerstatistics...........................................................1549
10.1.50clearpolicy-maptypeqosstatisticsinterfaceace............................................1550
10.1.51clearpolicy-maptypeqosstatisticsvlanace..................................................1551
10.1.52clearpolicy-maptypeqosstatisticsport-groupace..........................................1552
10.1.53clearpolicy-maptypeqosstatisticsvlan-groupace..........................................1552
10.1.54clearpolicy-maptypeqosstatisticsace........................................................1553
10.1.55clearpolicy-maptypeqosstatisticsinterfacepolicer.........................................1554
10.1.56clearpolicy-maptypeqosstatisticsvlanpolicer..............................................1555
10.1.57clearpolicy-maptypeqosstatisticsport-grouppolicer......................................1556
10.1.58clearpolicy-maptypeqosstatisticsvlan-grouppolicer......................................1557
10.1.59clearpolicy-maptypeqosstatisticspolicer....................................................1557
10.1.60clearqosinterfacestatisticspolicer.............................................................1558
10.1.61clearqosvlanstatisticspolicer..................................................................1559
10.1.62clearqosinterfacestatisticsqueue.............................................................15603510.1.63flow-policernumber................................................................................1561
10.1.64ipgshapingenable.................................................................................1562
10.1.65ipgpolicerenable..................................................................................1563
10.1.66smartbufferenable................................................................................1564
10.1.67service-policy.......................................................................................1565
10.1.68access-group.......................................................................................1566
10.1.69trust..................................................................................................1568
11SecurityCommands........................................................................1571
11.1PortSecurityCommands................................................................1571
11.1.1clearport-securityaddress-tablestatic...........................................................1571
11.1.2switchportport-security.............................................................................1572
11.1.3switchportport-securitymac-address............................................................1573
11.1.4switchportport-securitymaximum................................................................1574
11.1.5switchportport-securityviolation..................................................................1576
11.1.6showport-securityaddress-table.................................................................1577
11.1.7showport-securitycurrentmac-numinterface..................................................1578
11.1.8showport-securityinterface.......................................................................1579
11.1.9showport-securitymaximummac-numinterface..............................................1580
11.2VlanSecurityCommands................................................................1581
11.2.1vlanmac-limitmaximum............................................................................1581
11.2.2vlanmac-limitaction................................................................................1582
11.2.3vlanmaclearning....................................................................................1584
11.2.4showvlan-security...................................................................................1585
11.3TimeRangeCommands.................................................................1586
11.3.1time-range............................................................................................1586
11.3.2absolute...............................................................................................1587
11.3.3periodic................................................................................................1588
11.3.4showtime-range.....................................................................................1589
11.4ACLCommands..........................................................................1591
11.4.1macaccess-list......................................................................................1591
11.4.2sequence-num.......................................................................................1592
11.4.3denysrc-mac.........................................................................................1593
11.4.4permitsrc-mac.......................................................................................1596
11.4.5remark.................................................................................................1599
11.4.6showaccess-listmac...............................................................................1600
11.4.7ipaccess-list..........................................................................................1601
11.4.8deny...................................................................................................1602
11.4.9denytcp...............................................................................................1605
11.4.10denyudp............................................................................................1608
11.4.11denyicmp...........................................................................................1611
11.4.12denyigmp...........................................................................................16143611.4.13denygre.............................................................................................1616
11.4.14denynvgre..........................................................................................1619
11.4.15permit................................................................................................1622
11.4.16permittcp............................................................................................1624
11.4.17permitudp...........................................................................................1628
11.4.18permiticmp..........................................................................................1630
11.4.19permitigmp.........................................................................................1633
11.4.20permitgre...........................................................................................1636
11.4.21permitnvgre........................................................................................1638
11.4.22showaccess-listip.................................................................................1641
11.4.23udfaccess-list......................................................................................1642
11.4.24permitudf............................................................................................1643
11.4.25denyudf.............................................................................................1645
11.4.26showaccess-listudf...............................................................................1646
11.5ExtendACLCommands.................................................................1647
11.5.1ipaccess-listextend................................................................................1647
11.5.2sequence-num.......................................................................................1649
11.5.3denysrc-mac.........................................................................................1650
11.5.4permitsrc-mac.......................................................................................1653
11.5.5deny...................................................................................................1655
11.5.6denytcp...............................................................................................1658
11.5.7denyudp..............................................................................................1662
11.5.8denyicmp.............................................................................................1665
11.5.9denyigmp.............................................................................................1667
11.5.10denygre.............................................................................................1670
11.5.11denynvgre..........................................................................................1673
11.5.12permit................................................................................................1675
11.5.13permittcp............................................................................................1678
11.5.14permitudp...........................................................................................1682
11.5.15permiticmp..........................................................................................1685
11.5.16permitigmp.........................................................................................1687
11.5.17permitgre...........................................................................................1690
11.5.18permitnvgre........................................................................................1693
11.5.19remark...............................................................................................1695
11.5.20showaccess-listipextend........................................................................1696
11.6FLEXACLCommands...................................................................1697
11.6.1mac-ipaccess-list-template........................................................................1697
11.6.2mac-field..............................................................................................1699
11.6.3ip-field.................................................................................................1700
11.6.4arp-field...............................................................................................1702
11.6.5mpls-field..............................................................................................1703
11.6.6extra-field.............................................................................................17053711.6.7sequence-num.......................................................................................1706
11.6.8denysrc-mac.........................................................................................1707
11.6.9permitsrc-mac.......................................................................................1710
11.6.10remark...............................................................................................1712
11.6.11showaccess-listmactemplate..................................................................1714
11.6.12ipaccess-list........................................................................................1715
11.6.13sequence-num......................................................................................1716
11.6.14denysrc-mac.......................................................................................1717
11.6.15permitsrc-mac......................................................................................1720
11.6.16deny..................................................................................................1722
11.6.17denytcp.............................................................................................1725
11.6.18denyudp............................................................................................1729
11.6.19denyicmp...........................................................................................1732
11.6.20denyigmp...........................................................................................1734
11.6.21denygre.............................................................................................1737
11.6.22denynvgre..........................................................................................1740
11.6.23permit................................................................................................1742
11.6.24permittcp............................................................................................1745
11.6.25permitudp...........................................................................................1749
11.6.26permiticmp..........................................................................................1752
11.6.27permitigmp.........................................................................................1754
11.6.28permitgre...........................................................................................1757
11.6.29permitnvgre........................................................................................1760
11.6.30remark...............................................................................................1762
11.6.31mplsaccess-listtemplate.........................................................................1763
11.6.32sequence-num......................................................................................1765
11.6.33remark...............................................................................................1766
11.6.34showaccess-listmpls.............................................................................1767
11.6.35deny..................................................................................................1768
11.6.36permit................................................................................................1769
11.6.37showaccess-listiptemplate.....................................................................1771
11.7ACLv6Commands.......................................................................1772
11.7.1ipv6access-list.......................................................................................1772
11.7.2sequence-num.......................................................................................1773
11.7.3remark.................................................................................................1775
11.7.4deny...................................................................................................1776
11.7.5denytcp...............................................................................................1778
11.7.6denyudp..............................................................................................1781
11.7.7denyicmp.............................................................................................1784
11.7.8denygre...............................................................................................1786
11.7.9denynvgre............................................................................................1788
11.7.10permit................................................................................................17903811.7.11permittcp............................................................................................1793
11.7.12permitudp...........................................................................................1796
11.7.13permiticmp..........................................................................................1798
11.7.14permitgre...........................................................................................1801
11.7.15permitnvgre........................................................................................1803
11.7.16showaccess-listipv6..............................................................................1805
11.8FLEXACLv6Commands................................................................1806
11.8.1ipv6access-list-template...........................................................................1806
11.8.2mac-field..............................................................................................1807
11.8.3ip-field.................................................................................................1808
11.8.4extra-field.............................................................................................1810
11.8.5ipv6access-listtemplate...........................................................................1811
11.8.6sequence-num.......................................................................................1812
11.8.7remark.................................................................................................1814
11.8.8deny...................................................................................................1815
11.8.9denytcp...............................................................................................1817
11.8.10denyudp............................................................................................1819
11.8.11denyicmp...........................................................................................1821
11.8.12denygre.............................................................................................1823
11.8.13denynvgre..........................................................................................1825
11.8.14permit................................................................................................1827
11.8.15permittcp............................................................................................1829
11.8.16permitudp...........................................................................................1831
11.8.17permiticmp..........................................................................................1834
11.8.18permitgre...........................................................................................1836
11.8.19permitnvgre........................................................................................1838
11.8.20showaccess-listipv6..............................................................................1840
11.9PortGroupCommands..................................................................1841
11.9.1port-group.............................................................................................1841
11.9.2memberinterface....................................................................................1842
11.10VlanGroupCommands................................................................1843
11.10.1vlan-group...........................................................................................1843
11.10.2menbervlan.........................................................................................1844
11.11MPLSACLCommands.................................................................1846
11.11.1mplsaccess-list....................................................................................1846
11.11.2sequence-num......................................................................................1847
11.11.3remark...............................................................................................1848
11.11.4showaccess-listmpls.............................................................................1849
11.11.5deny..................................................................................................1850
11.11.6permit................................................................................................1852
11.11.7deny..................................................................................................18543911.11.8permit................................................................................................1855
11.12ExtendMPLSACLCommands........................................................1857
11.12.1mplsaccess-listextend...........................................................................1857
11.12.2sequence-num......................................................................................1858
11.12.3remark...............................................................................................1859
11.12.4denysrc-mac.......................................................................................1860
11.12.5permitsrc-mac......................................................................................1862
11.12.6deny..................................................................................................1864
11.12.7permit................................................................................................1866
11.12.8showaccess-listmplsextend....................................................................1868
11.13COPPCommands......................................................................1869
11.13.1control-planeaccess-list..........................................................................1869
11.13.2(deny|permit)exceptionany......................................................................1870
11.13.3(deny|permit)exceptionipda.....................................................................1871
11.13.4(deny|permit)exceptionfwd-to-cpu.............................................................1873
11.13.5(deny|permit)exceptionslow-protocol..........................................................1876
11.13.6(deny|permit)exceptiondhcp....................................................................1877
11.13.7(deny|permit)exceptionrip.......................................................................1879
11.13.8(deny|permit)exceptionospf.....................................................................1880
11.13.9(deny|permit)exceptionpim......................................................................1882
11.13.10(deny|permit)exceptionbgp....................................................................1883
11.13.11(deny|permit)exceptionvrrp....................................................................1885
11.13.12(deny|permit)exceptionssh....................................................................1886
11.13.13(deny|permit)exceptiontelnet..................................................................1888
11.13.14(deny|permit)exceptiontcp.....................................................................1889
11.13.15(deny|permit)exceptionmlag...................................................................1891
11.13.16(deny|permit)exceptionarp.....................................................................1892
11.13.17(deny|permit)exceptionigmp...................................................................1894
11.13.18(deny|permit)exception.........................................................................1896
11.13.19class-maptype(control-plane).................................................................1897
11.13.20policy-maptype(control-plane)................................................................1898
11.13.21classtypecontrol-plane.........................................................................1899
11.13.22statisticsenable...................................................................................1900
11.13.23control-plane......................................................................................1901
11.13.24service-policytypecontrol-planeinput........................................................1902
11.13.25showpolicy-maptypecontrol-planestatisticsinputace...................................1903
11.13.26policercir..........................................................................................1904
11.13.27showpolicy-maptypecontrol-planestatisticsinputpolicer................................1905
11.14FLEXCOPPCommands...............................................................1906
11.14.1control-planeaccess-list-template...............................................................1906
11.14.2mac-field.............................................................................................19074011.14.3ip-field................................................................................................1908
11.14.4arp-field..............................................................................................1910
11.14.5control-planeaccess-listtemplate...............................................................1911
11.14.6(deny|permit)exceptionany......................................................................1913
11.14.7(deny|permit)exceptionany......................................................................1914
11.14.8(deny|permit)exceptionipda.....................................................................1917
11.14.9(deny|permit)exceptionfwd-to-cpu.............................................................1920
11.14.10(deny|permit)exceptionslow-protocol........................................................1922
11.14.11(deny|permit)exceptiondhcp...................................................................1924
11.14.12(deny|permit)exceptionrip......................................................................1925
11.14.13(deny|permit)exceptionospf...................................................................1927
11.14.14(deny|permit)exceptionpim....................................................................1928
11.14.15(deny|permit)exceptionbgp....................................................................1930
11.14.16(deny|permit)exceptionvrrp....................................................................1931
11.14.17(deny|permit)exceptionssh....................................................................1933
11.14.18(deny|permit)exceptiontelnet..................................................................1934
11.14.19(deny|permit)exceptiontcp.....................................................................1935
11.14.20(deny|permit)exceptionmlag...................................................................1937
11.14.21(deny|permit)exceptionarp.....................................................................1938
11.14.22(deny|permit)exceptionigmp...................................................................1940
11.14.23(deny|permit)exception.........................................................................1942
11.14.24class-maptype(control-plane).................................................................1943
11.14.25matchaccess-group.............................................................................1944
11.14.26policy-maptype(control-plane)................................................................1945
11.14.27classtypecontrol-plane.........................................................................1946
11.14.28statisticsenable...................................................................................1947
11.14.29control-plane......................................................................................1948
11.14.30service-policytypecontrol-planeinput........................................................1949
11.14.31showpolicy-maptypecontrol-planestatisticsinputace...................................1950
11.14.32policercir..........................................................................................1951
11.14.33showpolicy-maptypecontrol-planestatisticsinputpolicer................................1952
11.15IEEE802.1xCommands...............................................................1953
11.15.1dot1xsystem-auth-ctrl.............................................................................1953
11.15.2dot1xinitialize......................................................................................1954
11.15.3dot1xmax-req......................................................................................1955
11.15.4dot1xport-control..................................................................................1957
11.15.5dot1xprotocol-version.............................................................................1959
11.15.6dot1xtimeoutquiet-period........................................................................1960
11.15.7dot1xhandshake...................................................................................1961
11.15.8dot1xtimeouthandshake-period................................................................1962
11.15.9dot1xreauthentication.............................................................................1963
11.15.10dot1xre-authenticate............................................................................19644111.15.11dot1xtimeout......................................................................................1965
11.15.12dot1xguest-vlan..................................................................................1967
11.15.13showdot1x........................................................................................1968
11.15.14showdot1xstatistics.............................................................................1970
11.15.15debugdot1x.......................................................................................1971
11.15.16cleardot1x.........................................................................................1973
11.15.17dot1xport-mode..................................................................................1974
11.15.18dot1xmax-user...................................................................................1975
11.15.19dot1xre-activeradius-server...................................................................1976
11.15.20dot1xaccounting-moderadius.................................................................1977
11.15.21dot1xaccountingstart-fail.......................................................................1978
11.15.22dot1xaccountingrealtime.......................................................................1980
11.15.23dot1xaccountinginterim-fail....................................................................1981
11.16ArpInspectionCommands.............................................................1982
11.16.1showiparpinspection............................................................................1982
11.16.2showiparpinspectioninterfaces................................................................1983
11.16.3showiparpinspectionlog........................................................................1985
11.16.4showiparpinspectionstatistics.................................................................1986
11.16.5showiparpinspectionvlan.......................................................................1988
11.16.6showdebuggingarpinspection..................................................................1989
11.16.7debugarpinspection..............................................................................1990
11.16.8iparpinspectionfiltervlan........................................................................1991
11.16.9iparpinspectionlog-bufferentries..............................................................1992
11.16.10iparpinspectionlog-bufferlogsinterval......................................................1993
11.16.11iparpinspectionvalidate........................................................................1994
11.16.12iparpinspectionvlan............................................................................1995
11.16.13iparpinspectionvlanloggingacl-macth......................................................1996
11.16.14iparpinspectionvlanloggingdhcp-bindings................................................1998
11.16.15cleariparpinspectionlog-buffer...............................................................1999
11.16.16cleariparpinspectionstatistics................................................................2000
11.16.17iparpinspectiontrust............................................................................2000
11.16.18arpaccess-list.....................................................................................2001
11.16.19ipmac..............................................................................................2002
11.16.20nosequence-num................................................................................2004
11.16.21showaccess-listarp.............................................................................2005
11.17DHCPSnoopingCommands..........................................................2006
11.17.1cleardhcpsnooping...............................................................................2006
11.17.2dhcpsnooping......................................................................................2007
11.17.3dhcpsnoopingbinding............................................................................2008
11.17.4dhcpsnoopingdatabase..........................................................................2010
11.17.5dhcpsnoopinginformationoption...............................................................2011
11.17.6dhcpsnoopinginformationoptionallow-untrusted...........................................20124211.17.7dhcpsnoopinginformationoptionallow-untrusted(interface)..............................2014
11.17.8dhcpsnoopingtrust................................................................................2015
11.17.9dhcpsnoopingverify..............................................................................2016
11.17.10dhcpsnoopingvlan..............................................................................2017
11.17.11dhcpsnoopingvlaninformationoptionformat-typecircuit-idstring......................2018
11.17.12dhcpsnoopinginformationoptionformatremote-id........................................2019
11.17.13dhcpsnoopinginformationoptionformatremote-id(interface)............................2020
11.17.14debugdhcpsnooping............................................................................2022
11.17.15showdhcpsnoopingbinding...................................................................2023
11.17.16showdhcpsnoopingconfig.....................................................................2024
11.17.17showdhcpsnoopingstatistics..................................................................2025
11.17.18showdhcpsnoopingtrusted-sources.........................................................2026
11.18IPSourceGuardCommands..........................................................2027
11.18.1ipsourcebinding...................................................................................2027
11.18.2ipv6sourcebinding................................................................................2029
11.18.3noipsourcebindingentries......................................................................2030
11.18.4ipsourcemaximalbinding........................................................................2031
11.18.5ipverifysource.....................................................................................2032
11.18.6showipsourcebinding............................................................................2034
11.19AAACommands.........................................................................2035
11.19.1aaanew-model.....................................................................................2035
11.19.2aaaauthenticationlogin...........................................................................2036
11.19.3aaaauthorizationexec............................................................................2037
11.19.4aaaaccountingexec..............................................................................2038
11.19.5aaaaccountingcommands.......................................................................2040
11.19.6aaaprivilegemapping.............................................................................2041
11.19.7loginauthentication................................................................................2042
11.19.8authorizationexec.................................................................................2043
11.19.9accountingexec....................................................................................2044
11.19.10accountingcommands...........................................................................2045
11.19.11showaaamethod-listsauthentication.........................................................2046
11.19.12showaaastatus..................................................................................2047
11.19.13showaaaprivilegemapping....................................................................2048
11.19.14login-securityenable.............................................................................2049
11.19.15login-securitymax-fail-num.....................................................................2050
11.19.16login-securitylock-duration.....................................................................2051
11.19.17showlogin-security...............................................................................2052
11.19.18clearlogin-securityrecord.......................................................................2053
11.20RADIUSAuthenticationCommands..................................................2054
11.20.1radius-serverdeadtime...........................................................................2054
11.20.2radius-serverhost..................................................................................20554311.20.3radius-serverretransmit...........................................................................2058
11.20.4radius-servertimeout..............................................................................2059
11.20.5radius-serverkey...................................................................................2060
11.20.6showdot1xradius-serverstatus.................................................................2061
11.20.7showradius-server................................................................................2063
11.21Tacacs+Commands....................................................................2064
11.21.1tacacs-serverhost.................................................................................2064
11.21.2cleartacacsstatistics..............................................................................2065
11.21.3showtacacs.........................................................................................2066
11.22PortIsolateCommands................................................................2067
11.22.1port-isolategroup..................................................................................2067
11.22.2port-isolatemode..................................................................................2068
11.22.3showport-isolate...................................................................................2070
11.22.4port-isolateam......................................................................................2071
11.23PrivateVlanCommands...............................................................2072
11.23.1switchportmodeprivate-vlan.....................................................................2072
11.23.2switchportprivate-vlan............................................................................2073
11.23.3showprivate-vlan..................................................................................2074
11.24DDOSCommands......................................................................2076
11.24.1ipicmpintercept....................................................................................2076
11.24.2ipsmurfintercept...................................................................................2077
11.24.3ipfraggleintercept.................................................................................2078
11.24.4ipudpintercept.....................................................................................2079
11.24.5iptcpintercept......................................................................................2080
11.24.6ipsmall-packetintercept..........................................................................2081
11.24.7ipmaceqintercept.................................................................................2082
11.24.8ipipeqintercept....................................................................................2083
11.24.9showip-interceptconfig...........................................................................2084
11.24.10showip-interceptstatistics......................................................................2085
11.24.11clearip-interceptstatistics......................................................................2087
11.25KeyChainCommands..................................................................2088
11.25.1keychain............................................................................................2088
11.25.2key....................................................................................................2089
11.25.3key-string............................................................................................2090
11.25.4accept-lifetime......................................................................................2091
11.25.5send-lifetime........................................................................................2093
11.25.6showkeychain.....................................................................................2095
11.26Port-blockCommands..................................................................2096
11.26.1port-block............................................................................................2096
11.26.2showport-block....................................................................................2097
11.27DevicemanagementsecuriyCommands............................................20984411.27.1iptelnetserveracl.................................................................................2098
11.27.2ipsshserveracl....................................................................................2099
11.27.3servicepassword-encryption.....................................................................2100
11.28MACsecCommands....................................................................2101
11.28.1mkapolicy...........................................................................................2101
11.28.2replay-protectionenable..........................................................................2102
11.28.3replay-protectionwindow-size...................................................................2103
11.28.4validation-mode....................................................................................2105
11.28.5icv-mode.............................................................................................2106
11.28.6confidentiality-offset...............................................................................2107
11.28.7mkaapplypolicy...................................................................................2108
11.28.8macsecreplay-protectionenable................................................................2110
11.28.9macsecreplay-protectionwindow-size.........................................................2111
11.28.10macsecvalidation-mode........................................................................2112
11.28.11macsecicv-mode.................................................................................2113
11.28.12macsecconfidentiality-offset....................................................................2114
11.28.13macsecplain-packet-policy.....................................................................2116
11.28.14macsecdesire....................................................................................2117
11.28.15mkapriority........................................................................................2118
11.28.16mkapsk............................................................................................2119
11.28.17mkaenable........................................................................................2121
11.28.18resetmkasession................................................................................2122
11.28.19showmkapolicy..................................................................................2123
11.28.20showmkastatistics..............................................................................2124
11.28.21showmacsecstatistics..........................................................................2126
11.28.22clearmkastatistics...............................................................................2130
11.28.23clearmacsecstatistics...........................................................................2131
12IPv6SecurityCommands..................................................................2132
12.1DHCPv6SnoopingCommands.........................................................2132
12.1.1cleardhcpv6snoopingbindingslearning........................................................2132
12.1.2cleardhcpv6snoopingstatistics..................................................................2133
12.1.3dhcpv6snooping....................................................................................2134
12.1.4dhcpv6snoopingbinding...........................................................................2135
12.1.5dhcpv6snoopingdatabase........................................................................2137
12.1.6dhcpv6snoopingremote-idformat...............................................................2138
12.1.7dhcpv6snoopingremote-idoption................................................................2139
12.1.8dhcpv6snoopingtrust..............................................................................2140
12.1.9dhcpv6snoopingvlan...............................................................................2141
12.1.10debugdhcpv6snooping..........................................................................2142
12.1.11showdhcpv6snoopingbinding..................................................................2143
12.1.12showdhcpv6snoopingconfig...................................................................21454512.1.13showdhcpv6snoopingtrusted-sources........................................................2146
12.1.14showdhcpv6snoopingstatistics................................................................2147
12.2DevicemanagementsecuriyCommands.............................................2148
12.2.1ipv6telnetserveracl................................................................................2148
12.2.2ipv6sshserveracl..................................................................................2149
13ReliabilityCommands......................................................................2151
13.1BHMCommands..........................................................................2151
13.1.1sysmonenable.......................................................................................2151
13.1.2showsysmon.........................................................................................2152
13.1.3heart-beat-monitorenable.........................................................................2153
13.1.4heart-beat-monitorreactivate......................................................................2153
13.1.5showheart-beat-monitor...........................................................................2154
13.2EFMCommands..........................................................................2155
13.2.1ethernetoamenable................................................................................2155
13.2.2ethernetoammode.................................................................................2156
13.2.3ethernetoammin-rate..............................................................................2157
13.2.4ethernetoammax-rate.............................................................................2158
13.2.5ethernetoamlink-monitoron......................................................................2159
13.2.6ethernetoamlink-monitorsupported.............................................................2160
13.2.7ethernetoamlink-monitorframe..................................................................2161
13.2.8ethernetoamlink-monitorframe-secondsthreshold...........................................2163
13.2.9ethernetoamlink-monitorhighthresholdaction................................................2164
13.2.10ethernetoamremote-loopback..................................................................2165
13.2.11ethernetoamremote-loopbackstart............................................................2166
13.2.12ethernetoamremote-loopbackstop............................................................2167
13.2.13ethernetoamtimeout..............................................................................2168
13.2.14ethernetoamremote-failure......................................................................2169
13.2.15showethernetoamdiscovery....................................................................2170
13.2.16showEthernetoamstatus........................................................................2171
13.2.17showethernetoamstate-machine..............................................................2172
13.2.18showethernetoamstatistics.....................................................................2173
13.3CFMCommands..........................................................................2174
13.3.1ethernetcfmenable.................................................................................2174
13.3.2ethernetcfmdomainlevel..........................................................................2175
13.3.3service.................................................................................................2177
13.3.4ethernetcfmmep....................................................................................2178
13.3.5ethernetcfmmepcrosscheckmpid..............................................................2180
13.3.6ethernetcfmmip.....................................................................................2181
13.3.7ethernetcfmccenabledomain...................................................................2182
13.3.8ethernetcfmccdomainpriority...................................................................2183
13.3.9ethernetcfmloopback..............................................................................21844613.3.10ethernetcfmloopbackmac.......................................................................2186
13.3.11ethernetcfmerrorsenabledomain.............................................................2187
13.3.12clearethernetcfmerrors..........................................................................2188
13.3.13ethernetcfmaisstatusenable...................................................................2189
13.3.14ethernetcfmaissuppressalarmenabledomain.............................................2191
13.3.15ethernetcfmserver-aisstatusenablelevel....................................................2192
13.3.16showethernetcfmdomain.......................................................................2193
13.3.17showethernetcfmmaintenance-points........................................................2194
13.3.18showethernetcfmmaintenance-pointslocal..................................................2195
13.3.19showethernetcfmmaintenance-pointsremote...............................................2196
13.3.20showethernetcfmccconfig.....................................................................2197
13.3.21showethernetcfmerrors.........................................................................2198
13.3.22showethernetcfmaismep.......................................................................2199
13.3.23showethernetcfm.................................................................................2200
13.3.24ethernetcfmlinktracermepid....................................................................2201
13.3.25ethernetcfmlinktracemac.......................................................................2203
13.3.26ethernetcfmlinktracecacheenable............................................................2204
13.3.27ethernetcfmlinktracecachesize...............................................................2205
13.3.28ethernetcfmlinktracecacheholdtime..........................................................2206
13.3.29showethernetcfmlinktracecache..............................................................2207
13.3.30clearethernetcfmlinktracecache..............................................................2207
13.3.31ethernetcfmmipccm-databasesize...........................................................2208
13.3.32ethernetcfmmipccm-databaseholdtime......................................................2209
13.3.33showethernetcfmmipccm-database..........................................................2210
13.3.34clearethernetcfmmipccm-database..........................................................2211
13.3.35ethernetcfmsf-reason............................................................................2212
13.3.36ethernetcfmmode.................................................................................2213
13.3.37ethernetcfmraw-vlan.............................................................................2214
13.3.38ethernetcfmlmenabledual-ended.............................................................2215
13.3.39ethernetcfmlmenablesingle-ended...........................................................2217
13.3.40ethernetcfmlmsingle-ended....................................................................2218
13.3.41showethernetcfmlm.............................................................................2220
13.3.42ethernetcfmsd-reason...........................................................................2222
13.3.43ethernetcfm(1dm|dmm)..........................................................................2223
13.3.44ethernetcfm(1dm|dmm)continual..............................................................2224
13.3.45showethernetcfmdmmcontinual..............................................................2226
13.3.46ethernetcfmdelaymeasurementcacheenable...............................................2227
13.3.47ethernetcfmdelaymeasurementcachesize..................................................2228
13.3.48showethernetcfmdelaymeasurementcache.................................................2229
13.3.49clearethernetcfmdelaymeasurementcache.................................................2230
13.3.50ethernetcfmcsf....................................................................................2231
13.3.51showethernetcfmcsf.............................................................................22324713.3.52ethernetcfmlckenable...........................................................................2233
13.3.53showethernetcfmlck.............................................................................2234
13.3.54showethernetcfmlmbrief.......................................................................2235
13.3.55ethernetcfmtsttransmissionenable...........................................................2236
13.3.56ethernetcfmtststart/stop.........................................................................2238
13.3.57ethernetcfmtstreceptionenable...............................................................2239
13.3.58showethernetcfmtst.............................................................................2240
13.3.59clearethernetcfmtstcounters...................................................................2242
13.4CPUTrafficLimitCommands...........................................................2242
13.4.1cpu-traffic-limittotalrate............................................................................2242
13.4.2cpu-traffic-limitreasonrate.........................................................................2244
13.4.3cpu-traffic-limitreasonclass.......................................................................2249
13.4.4showcputraffic-limit................................................................................2251
13.5CPUTrafficStatisticsCommands......................................................2253
13.5.1cpu-traffic-statisticstime............................................................................2253
13.5.2nocpu-traffic-statisticstime........................................................................2254
13.5.3showcputraffic-statisticsreceive................................................................2255
13.5.4showcputraffic-statisticsreceiveall.............................................................2258
13.5.5showcputraffic-statisticstransmit................................................................2260
13.6CPUTrafficProtectCommands........................................................2261
13.6.1cpu-traffic-protect....................................................................................2261
13.6.2traceenable..........................................................................................2262
13.6.3tracetype.............................................................................................2263
13.6.4tracesample..........................................................................................2264
13.6.5tracethreshold.......................................................................................2265
13.6.6tracetimeout.........................................................................................2266
13.6.7traceaction...........................................................................................2267
13.6.8traceprotectdelay-time............................................................................2268
13.6.9applyaccess-list.....................................................................................2269
13.6.10cpu-traffic-protectmanualrecoverdhcp........................................................2270
13.6.11showcputraffic-protectdhcprecovertable....................................................2271
13.6.12showcputraffic-protecttrace....................................................................2272
13.6.13showcputraffic-protecttraceconfig............................................................2274
13.6.14clearcputraffic-protecttrace.....................................................................2275
13.7G.8031Commands.......................................................................2276
13.7.1g8031eps-id.........................................................................................2276
13.7.2instance...............................................................................................2277
13.7.3domain................................................................................................2278
13.7.4mode..................................................................................................2280
13.7.5timer...................................................................................................2281
13.7.6g8031force...........................................................................................22824813.7.7g8031manual........................................................................................2284
13.7.8g8031lockout........................................................................................2285
13.7.9g8031exercise.......................................................................................2286
13.7.10g8031clear.........................................................................................2287
13.7.11showg8031.........................................................................................2288
13.7.12debugg8031........................................................................................2289
13.8G.8032Commands.......................................................................2290
13.8.1g8032ring-id.........................................................................................2290
13.8.2instance...............................................................................................2292
13.8.3domain................................................................................................2293
13.8.4control-vlan...........................................................................................2295
13.8.5rplowner..............................................................................................2296
13.8.6timer...................................................................................................2297
13.8.7ringenable............................................................................................2299
13.8.8ringdisable...........................................................................................2300
13.8.9showg8032..........................................................................................2301
13.8.10debugg8032........................................................................................2302
13.8.11g8032force.........................................................................................2303
13.8.12g8032manual......................................................................................2304
13.8.13g8032clear.........................................................................................2306
13.8.14rplneighbor.........................................................................................2307
13.8.15virtual-channelenable.............................................................................2308
13.8.16mode.................................................................................................2309
13.8.17raps-melLEVEL-ID................................................................................2310
13.9UDLDCommands........................................................................2311
13.9.1udldenable...........................................................................................2311
13.9.2udldport...............................................................................................2312
13.9.3udldmessageinterval..............................................................................2313
13.9.4udldreset.............................................................................................2314
13.9.5showudld.............................................................................................2314
13.9.6showudldneighbors................................................................................2316
13.9.7debugudld............................................................................................2316
13.9.8showdebuggingudld...............................................................................2317
13.10ERPSCommands.......................................................................2318
13.10.1erps..................................................................................................2318
13.10.2erpscontrolvlan....................................................................................2319
13.10.3erpshellotime.......................................................................................2321
13.10.4erpsfailtime.........................................................................................2322
13.10.5erpsmstpinstance.................................................................................2323
13.10.6erpsringlevel.......................................................................................2324
13.10.7erpsringmode.....................................................................................23254913.10.8erpsringprimaryinterface........................................................................2326
13.10.9erpsringsecondaryinterface....................................................................2327
13.10.10erpsringinterface................................................................................2328
13.10.11erpsringedge-mode.............................................................................2330
13.10.12erpsringedgeinterface.........................................................................2331
13.10.13erpsringcommoninterface.....................................................................2332
13.10.14erpsringsrpt......................................................................................2333
13.10.15erpsringenable..................................................................................2334
13.10.16erpsringdisable..................................................................................2335
13.10.17erpsenable........................................................................................2336
13.10.18erpsdisable.......................................................................................2337
13.10.19erpsmoderrpp....................................................................................2338
13.10.20showerps..........................................................................................2339
13.10.21showerpslist......................................................................................2340
13.10.22clearerpscounters...............................................................................2341
13.10.23debugerps........................................................................................2342
13.11Smart-LinkCommands.................................................................2343
13.11.1smart-linkgroup....................................................................................2343
13.11.2smart-linkrelayenable............................................................................2344
13.11.3interface.............................................................................................2345
13.11.4protectedmstpinstance..........................................................................2347
13.11.5load-balanceinstance.............................................................................2348
13.11.6restoretime.........................................................................................2350
13.11.7restoreenable......................................................................................2351
13.11.8flushsend...........................................................................................2352
13.11.9groupenable........................................................................................2353
13.11.10smart-linkflushreceive..........................................................................2354
13.11.11smart-linktcnenable.............................................................................2355
13.11.12smart-linktcnquery-count......................................................................2356
13.11.13smart-linktcnquery-interval....................................................................2357
13.11.14showsmart-link...................................................................................2358
13.11.15showsmart-linkgroup...........................................................................2359
13.11.16clearsmart-linkstatistic.........................................................................2360
13.11.17debugsmart-link..................................................................................2360
13.12Multi-LinkCommands..................................................................2361
13.12.1multi-linkgroup.....................................................................................2361
13.12.2multi-linkrelayenable.............................................................................2362
13.12.3interface.............................................................................................2363
13.12.4protectedmstpinstance..........................................................................2365
13.12.5load-balanceinstance.............................................................................2367
13.12.6restoretime.........................................................................................2368
13.12.7restoreenable......................................................................................23695013.12.8flushsend...........................................................................................2370
13.12.9groupenable........................................................................................2371
13.12.10multi-linkflushreceive...........................................................................2372
13.12.11multi-linktcnenable..............................................................................2373
13.12.12multi-linktcnquery-count.......................................................................2374
13.12.13multi-linktcnquery-interval.....................................................................2375
13.12.14showmulti-link....................................................................................2376
13.12.15showmulti-linkgroup............................................................................2377
13.12.16clearmulti-linkstatistic...........................................................................2378
13.12.17debugmulti-link...................................................................................2379
13.12.18multilink-enhanceinterface.....................................................................2380
13.12.19multilink-enhancereceive.......................................................................2381
13.12.20multilink-enhancesend-interval................................................................2382
13.12.21multilink-enhancetimeout.......................................................................2383
13.13MonitorLinkCommands...............................................................2384
13.13.1monitor-linkgroup..................................................................................2384
13.13.2monitor-linkuplinkinterface......................................................................2385
13.13.3monitor-linkuplinksmart-linkgroup.............................................................2386
13.13.4nomonitor-linkuplink..............................................................................2387
13.13.5monitor-linkdownlinkinterface...................................................................2388
13.13.6monitor-linkrecover-time.........................................................................2389
13.13.7showmonitor-linkgroup..........................................................................2390
13.13.8debugmonitor-link.................................................................................2391
13.14VRRPCommands.......................................................................2392
13.14.1advertisement-interval.............................................................................2392
13.14.2advertisement-intervalmsec.....................................................................2393
13.14.3interface(VRRP)...................................................................................2394
13.14.4learnmaster-mode.................................................................................2395
13.14.5preempt-mode......................................................................................2397
13.14.6preemptdelay......................................................................................2398
13.14.7priority(VRRP).....................................................................................2399
13.14.8routervrrp...........................................................................................2400
13.14.9track(VRRP)........................................................................................2401
13.14.10enable/disable....................................................................................2402
13.14.11virtual-ip............................................................................................2403
13.14.12showvrrp..........................................................................................2405
13.15TrackCommands.......................................................................2406
13.15.1delayup.............................................................................................2406
13.15.2delaydown..........................................................................................2407
13.15.3frequency............................................................................................2408
13.15.4ipslamonitor.......................................................................................24095113.15.5descriptionstring...................................................................................2410
13.15.6ipslamonitorschedule...........................................................................2411
13.15.7timeout...............................................................................................2412
13.15.8threshold............................................................................................2413
13.15.9interval...............................................................................................2414
13.15.10ttl....................................................................................................2415
13.15.11tos...................................................................................................2416
13.15.12data-size...........................................................................................2417
13.15.13data-pattern.......................................................................................2418
13.15.14fail-percent.........................................................................................2419
13.15.15packets-per-test..................................................................................2420
13.15.16statistics(packet|test)...........................................................................2421
13.15.17clearipslastatistics..............................................................................2422
13.15.18track................................................................................................2423
13.15.19trackinterfacelinkstate..........................................................................2424
13.15.20trackrtrreachability..............................................................................2425
13.15.21trackrtrstate......................................................................................2426
13.15.22trackbfd............................................................................................2428
13.15.23trackbfdsession..................................................................................2429
13.15.24trackcfm...........................................................................................2430
13.15.25typeicmp-echo....................................................................................2432
13.15.26showipslamonitor...............................................................................2433
13.15.27showtrack.........................................................................................2434
13.15.28vrf...................................................................................................2435
13.16VARPCommands.......................................................................2436
13.16.1ipvirtual-routermac...............................................................................2436
13.16.2ipvirtual-routeraddress...........................................................................2437
13.17IPBFDCommands.....................................................................2438
13.17.1bfdinterval..........................................................................................2438
13.17.2bfdNAMEpeer-ipA.B.C.Dinterface............................................................2440
13.17.3bfdNAMEpeer-ipA.B.C.Dsource-ip...........................................................2441
13.17.4iproute...............................................................................................2443
13.17.5bfdsetinterval......................................................................................2444
13.17.6bfdglobaldscp.....................................................................................2445
13.17.7bfdsetdscp.........................................................................................2446
13.17.8showbfd.............................................................................................2447
13.17.9showbfdstaticconfigurations...................................................................2448
13.17.10showbfdsession.................................................................................2449
13.17.11showresourcebfdstaticconfigurations......................................................2451
13.17.12showbfdinterface................................................................................2452
13.18UDPHelperCommands................................................................24535213.18.1ipudp-helperenable...............................................................................2453
13.18.2ipudp-helperdisable..............................................................................2454
13.18.3ipudp-helperport..................................................................................2455
13.18.4ipudp-helperserver...............................................................................2456
13.18.5showipudp-helperserver........................................................................2457
13.18.6showresourceudp-helper........................................................................2458
13.18.7clearipudp-helperstatistics.....................................................................2459
14DeviceManagementCommands.........................................................2461
14.1STMCommands..........................................................................2461
14.1.1stmprefer.............................................................................................2461
14.1.2showstmprefer......................................................................................2463
14.2SyslogCommands.......................................................................2466
14.2.1clearloggingbuffer..................................................................................2466
14.2.2loggingalarm-trap...................................................................................2466
14.2.3loggingfile............................................................................................2468
14.2.4logginglevelfile......................................................................................2469
14.2.5loggingbuffer.........................................................................................2470
14.2.6logginglevelmodule................................................................................2471
14.2.7loggingmerge........................................................................................2472
14.2.8loggingsync..........................................................................................2474
14.2.9loggingsynctimeout................................................................................2475
14.2.10loggingoperate.....................................................................................2476
14.2.11loggingserver......................................................................................2477
14.2.12loggingserveraddress............................................................................2478
14.2.13loggingserverfacility..............................................................................2479
14.2.14loggingserverseverity............................................................................2481
14.2.15loggingtimestamp.................................................................................2483
14.2.16showlogging........................................................................................2484
14.2.17showloggingbuffer................................................................................2485
14.3MirrorCommands.........................................................................2486
14.3.1monitorsessiondestinationinterface............................................................2486
14.3.2monitorsessiondestinationcpu...................................................................2488
14.3.3monitorsessiondestinationgroup................................................................2489
14.3.4member...............................................................................................2490
14.3.5monitorsessionsourceinterface.................................................................2492
14.3.6monitorsessionsourcevlan.......................................................................2493
14.3.7monitorsessionsourcecpu........................................................................2495
14.3.8monitorsessiondestinationinterfacetunnel....................................................2497
14.3.9monitorsessiondestinationremote..............................................................2498
14.3.10monitormacescape...............................................................................2500
14.3.11showmonitor.......................................................................................25015314.3.12showmonitormacescape........................................................................2503
14.3.13monitordestinationforwardingenable..........................................................2504
14.3.14monitorcpusetpacketbuffer....................................................................2505
14.3.15monitorcpucapturepacket......................................................................2506
14.3.16monitorcpucapturestrategy.....................................................................2507
14.3.17showmonitorcpupacket.........................................................................2508
14.3.18clearmonitorcpupacketall......................................................................2509
14.3.19showmonitorcpupacketbuffer-size...........................................................2510
14.3.20showmonitorcpucapturestrategy.............................................................2510
14.4DeviceManagementCommands.......................................................2511
14.4.1temperature..........................................................................................2511
14.4.2showenvironment...................................................................................2512
14.4.3bootsystem..........................................................................................2514
14.4.4showtransceiver.....................................................................................2515
14.4.5updatebootrom......................................................................................2516
14.4.6showreboot-info.....................................................................................2517
14.5BootromCommands.....................................................................2519
14.5.1version................................................................................................2519
14.5.2setenv.................................................................................................2520
14.5.3saveenv...............................................................................................2521
14.5.4printenv................................................................................................2522
14.5.5reset...................................................................................................2523
14.5.6ping....................................................................................................2524
14.5.7ctcls....................................................................................................2525
14.5.8boot_tftp...............................................................................................2526
14.5.9boot_tftp_nopass....................................................................................2527
14.5.10boot_flash...........................................................................................2528
14.5.11boot_flash_nopass.................................................................................2529
14.5.12upgrade_uboot.....................................................................................2530
14.6BootupDiagnosticCommands.........................................................2531
14.6.1diagnosticbootuplevel.............................................................................2531
14.6.2showdiagnosticbootuplevel......................................................................2532
14.6.3showdiagnosticbootupresult.....................................................................2532
14.7SmartConfigCommands................................................................2534
14.7.1smart-config..........................................................................................2534
14.7.2showsmart-configconfig...........................................................................2535
14.8DebianCommands.......................................................................2536
14.8.1bash...................................................................................................2536
14.8.2showdebian-version................................................................................2537
15NetworkManagementCommands.......................................................2538
15.1NetworkDiagnosisCommands.........................................................25385415.1.1ping....................................................................................................2538
15.1.2traceroute.............................................................................................2541
15.2NTPCommands..........................................................................2543
15.2.1ntpace................................................................................................2543
15.2.2ntpauthentication....................................................................................2545
15.2.3ntpdisable............................................................................................2546
15.2.4ntpkey................................................................................................2547
15.2.5ntpinterfacereload..................................................................................2548
15.2.6ntpmax-distance....................................................................................2549
15.2.7ntppeer...............................................................................................2550
15.2.8ntprefclock...........................................................................................2552
15.2.9ntpserver.............................................................................................2553
15.2.10ntptrustedkey......................................................................................2554
15.2.11showntp.............................................................................................2556
15.2.12showntpace........................................................................................2557
15.2.13showntpassociations.............................................................................2558
15.2.14showntpkey........................................................................................2559
15.2.15showntpstatus.....................................................................................2560
15.2.16showntpstatistics.................................................................................2561
15.2.17clearntpstatistics..................................................................................2562
15.2.18ntpmgmt-if..........................................................................................2563
15.3PhyLoopbackCommands..............................................................2564
15.3.1loopbackphy.........................................................................................2564
15.3.2loopbackport.........................................................................................2565
15.3.3noloopback..........................................................................................2566
15.3.4showphyloopback..................................................................................2567
15.3.5l2ping.................................................................................................2568
15.3.6l2pingresponse.....................................................................................2570
15.3.7showl2pingresponse...............................................................................2571
15.3.8showl2pingstate....................................................................................2572
15.3.9l2pingstop...........................................................................................2572
15.3.10l2pingforwardenable.............................................................................2573
15.3.11debugl2ping........................................................................................2574
15.3.12showdebuggingl2ping...........................................................................2575
15.4RMONCommands.......................................................................2576
15.4.1rmoncollectionstats................................................................................2576
15.4.2rmoncollectionhistory..............................................................................2577
15.4.3rmonevent............................................................................................2579
15.4.4rmonalarm...........................................................................................2580
15.4.5showrmonstatistics................................................................................2582
15.4.6showrmonhistory...................................................................................25835515.4.7showrmonevent....................................................................................2584
15.4.8showrmonalarm....................................................................................2585
15.4.9rmonclearcounters.................................................................................2586
15.4.10debugrmon.........................................................................................2587
15.5SNMPCommands........................................................................2588
15.5.1snmp-serveraccess.................................................................................2588
15.5.2snmp-servercommunity............................................................................2590
15.5.3snmp-servercontext................................................................................2592
15.5.4snmp-serverenable.................................................................................2593
15.5.5snmp-serverengineID..............................................................................2594
15.5.6snmp-servergroup..................................................................................2595
15.5.7snmp-servernotify...................................................................................2596
15.5.8snmp-serversystem-contact.......................................................................2598
15.5.9snmp-serversystem-location......................................................................2599
15.5.10snmp-servertarget-address......................................................................2600
15.5.11snmp-servertarget-params......................................................................2602
15.5.12snmp-servertrapenable..........................................................................2603
15.5.13snmp-servertrapdelay...........................................................................2604
15.5.14snmp-servertraptarget-address................................................................2605
15.5.15snmp-servertrapsource-address...............................................................2607
15.5.16snmp-serverinformtarget-address.............................................................2608
15.5.17snmp-serverinform................................................................................2609
15.5.18snmp-serverusm-user............................................................................2610
15.5.19snmp-serverversion...............................................................................2613
15.5.20snmp-serverview..................................................................................2614
15.5.21snmp-serveraccess-groupNAMEin...........................................................2615
15.5.22showsnmp..........................................................................................2616
15.5.23showsnmp-serveraccess........................................................................2617
15.5.24showsnmp-servercommunity...................................................................2618
15.5.25showsnmp-servercontext.......................................................................2619
15.5.26showsnmp-serverengineID.....................................................................2620
15.5.27showsnmp-servergroup.........................................................................2621
15.5.28showsnmp-servernotify..........................................................................2622
15.5.29showsnmp-serversys-info.......................................................................2623
15.5.30showsnmp-servertrap-receiver.................................................................2624
15.5.31showsnmp-serverusm-user.....................................................................2625
15.5.32showsnmp-serverversion.......................................................................2626
15.5.33showsnmp-serverview...........................................................................2627
15.6SFLOWCommands......................................................................2628
15.6.1sflowenable..........................................................................................2628
15.6.2sflowagent...........................................................................................2629
15.6.3sflowcollector........................................................................................26305615.6.4sflowcounterinterval...............................................................................2631
15.6.5sflowcounter-samplingenable....................................................................2632
15.6.6sflowflow-samplingrate............................................................................2633
15.6.7sflowflow-samplingenable........................................................................2634
15.6.8showsflow............................................................................................2635
15.7LLDPCommands.........................................................................2636
15.7.1lldpenable(global)...................................................................................2636
15.7.2lldpenable(interface)................................................................................2637
15.7.3lldpsystem-name....................................................................................2638
15.7.4lldpsystem-description.............................................................................2639
15.7.5lldpmanagement....................................................................................2640
15.7.6lldpmsg-tx-hold......................................................................................2641
15.7.7lldptimermsg-tx-interval...........................................................................2642
15.7.8lldptimerreinit-delay................................................................................2643
15.7.9lldptimertx-delay....................................................................................2644
15.7.10lldptlvbasic.........................................................................................2645
15.7.11lldptlv8021-org-specific..........................................................................2647
15.7.12lldptlv8021-org-specificvlan-name-value.....................................................2648
15.7.13lldptlv8023-org-specific..........................................................................2649
15.7.14lldptlvmed..........................................................................................2650
15.7.15lldptlvmedlocation-id............................................................................2652
15.7.16debuglldp...........................................................................................2653
15.7.17showlldplocal......................................................................................2654
15.7.18showlldpneighbor.................................................................................2657
15.7.19showlldpstatistics.................................................................................2658
15.7.20clearlldpstatistics.................................................................................2659
15.8IPFIXCommands.........................................................................2660
15.8.1ipfixrecorder.........................................................................................2660
15.8.2description............................................................................................2662
15.8.3matchipv4............................................................................................2663
15.8.4matchipv6............................................................................................2664
15.8.5matchmac............................................................................................2665
15.8.6matchtransport......................................................................................2666
15.8.7matchvlan............................................................................................2668
15.8.8matchcos.............................................................................................2669
15.8.9matchinterface(input|output)....................................................................2670
15.8.10matchvxlan-vni.....................................................................................2671
15.8.11matchnvgre-key...................................................................................2672
15.8.12matchtransporttcpflags.........................................................................2672
15.8.13matchpacket(drop|non-drop)..................................................................2674
15.8.14collectcounter......................................................................................2675
15.8.15collectflow..........................................................................................26765715.8.16collectttl.............................................................................................2677
15.8.17collectquality.......................................................................................2678
15.8.18collecttimestamp..................................................................................2679
15.8.19ipfixexporter........................................................................................2680
15.8.20description..........................................................................................2682
15.8.21destination..........................................................................................2683
15.8.22dscp..................................................................................................2684
15.8.23domain-id............................................................................................2685
15.8.24sourceinterface....................................................................................2686
15.8.25templatedatatimeout.............................................................................2687
15.8.26flowdatatimeout...................................................................................2688
15.8.27transportprotocol..................................................................................2689
15.8.28ttl......................................................................................................2690
15.8.29eventflow...........................................................................................2691
15.8.30ipfixsampler........................................................................................2692
15.8.31description..........................................................................................2693
15.8.321out-of..............................................................................................2694
15.8.33ipfixmonitor(global)...............................................................................2695
15.8.34description..........................................................................................2696
15.8.35recorder..............................................................................................2697
15.8.36exporter..............................................................................................2698
15.8.37flowmirror...........................................................................................2699
15.8.38ipfixmonitor(interface/port-group/vlangroup)................................................2700
15.8.39ipfixglobalconfigure...............................................................................2701
15.8.40ipfixglobalflow.....................................................................................2701
15.8.41ipfixhardware-telemetryenable.................................................................2703
15.8.42ipfixhardware-telemetrydest....................................................................2704
15.8.43showipfixrecorder.................................................................................2705
15.8.44showipfixexporter.................................................................................2706
15.8.45showipfixcache....................................................................................2707
15.8.46showipfixmonitor..................................................................................2709
15.8.47showipfixsampler.................................................................................2709
15.8.48showresourceipfix................................................................................2710
15.8.49clearipfixcachemonitor..........................................................................2711
15.8.50clearipfixcacheobserve-pointinterface.......................................................2712
16VPNCommands.............................................................................2714
16.1VRFCommands..........................................................................2714
16.1.1ipvrf...................................................................................................2714
16.1.2showipvrf............................................................................................2715
16.1.3ipvrfforwarding......................................................................................2716
16.1.4iproutevrf............................................................................................27175816.1.5arpvrf..................................................................................................2719
16.1.6showiparpvrf.......................................................................................2720
16.1.7cleariparpvrf........................................................................................2721
16.1.8pingvrf................................................................................................2722
16.1.9traceroutevrf.........................................................................................2724
16.1.10telnetvrf.............................................................................................2725
16.1.11rd.....................................................................................................2726
16.1.12route-target..........................................................................................2727
16.1.13importmap..........................................................................................2728
16.1.14exportmap..........................................................................................2729
16.1.15router-id..............................................................................................2730
16.1.16description..........................................................................................2731
16.1.17showresourcevrf..................................................................................2732
16.2GRETUNNELCommands..............................................................2733
16.2.1interface...............................................................................................2733
16.2.2tunnelmodegre.....................................................................................2734
16.2.3tunnelsource.........................................................................................2735
16.2.4tunneldestination....................................................................................2736
16.2.5tunnelenable.........................................................................................2737
16.2.6tunnelgrekey........................................................................................2738
16.2.7tunneldscp...........................................................................................2739
16.2.8keepalive..............................................................................................2740
16.2.9showinterfacetunnel...............................................................................2741
16.2.10showresourcetunnel.............................................................................2742
16.2.11showtunnelkeepalivestatistics.................................................................2743
16.2.12cleartunnelkeepalivestatistics..................................................................2744
16.2.13cleartunnelstatistics..............................................................................2745
16.3ERSPANTUNNELCommands.........................................................2746
16.3.1interface...............................................................................................2746
16.3.2tunnelmodeerspan.................................................................................2747
16.3.3tunnelsource.........................................................................................2748
16.3.4tunneldestination....................................................................................2749
16.3.5tunnelecmp-destination............................................................................2750
16.3.6tunnelgrekey........................................................................................2751
16.3.7tunneldscp...........................................................................................2752
16.3.8tunnelttl...............................................................................................2753
16.3.9tunnelextend-header...............................................................................2754
16.3.10tunnelextend-headerid...........................................................................2755
16.3.11tunnelextend-headerdst-load-balance........................................................2756
16.3.12showresourcetunnel.............................................................................2757
17DataCenterCommands...................................................................27595917.1OverlayCommands......................................................................2759
17.1.1vlanoverlayenable..................................................................................2759
17.1.2overlay................................................................................................2760
17.1.3vlanvni................................................................................................2761
17.1.4vnisplit-horizon-disable............................................................................2762
17.1.5source.................................................................................................2763
17.1.6remote-vtep...........................................................................................2764
17.1.7dscp-strategy.........................................................................................2766
17.1.8Virtual-mac...........................................................................................2767
17.1.9vlanremote-vtep.....................................................................................2768
17.1.10vxlanuplink.........................................................................................2770
17.1.11nvgreuplink.........................................................................................2771
17.1.12mac-address-tableforwardremote-vtep.......................................................2772
17.1.13gateway-mac.......................................................................................2773
17.1.14iprouteremote-vtep...............................................................................2774
17.1.15overlaydistributed-gateway......................................................................2776
17.1.16selectiveqinqoverlaymode......................................................................2777
17.1.17vxlanudp-dest-port................................................................................2778
17.1.18qostunnel-awareinner............................................................................2779
17.1.19qostunnel-awareinner-outer-merge............................................................2780
17.1.20Showoverlay.......................................................................................2781
17.2PFCCommands..........................................................................2782
17.2.1priority-flow-controlmode..........................................................................2782
17.2.2priority-flow-controlenablepriority................................................................2783
17.2.3showpriority-flow-control...........................................................................2784
17.2.4showpriority-flow-controlstatistics...............................................................2785
17.3EFDCommands..........................................................................2786
17.3.1efdenable............................................................................................2786
17.3.2efdtcp-onlyenable..................................................................................2787
17.3.3efdflow-traffic-class.................................................................................2788
17.3.4efdflow-color.........................................................................................2789
17.3.5efddetectspeed.....................................................................................2790
17.3.6efddetectgranularity................................................................................2791
17.3.7efddetecttime-interval.............................................................................2792
17.3.8efddetectmin-pkt-size.............................................................................2793
17.3.9efdaging-period.....................................................................................2794
17.3.10efdredirecttointerface...........................................................................2795
17.3.11efdipgenable......................................................................................2796
17.3.12efdnotifyenable....................................................................................2797
17.3.13efdnotifypacket....................................................................................2798
17.3.14efdblack-hole-routegw...........................................................................27996017.3.15efdblack-hole-routeaging-timer.................................................................2800
17.3.16efdsyslogenable..................................................................................2801
17.3.17showefdbhrinformation.........................................................................2802
17.3.18showefdconfiguration............................................................................2803
17.3.19showefdflowtable................................................................................2804
17.3.20showefdflowinformation.........................................................................2805
17.3.21clearefdflowinformation.........................................................................2806
17.4OVSDBCommands......................................................................2807
17.4.1ovsdbenable.........................................................................................2807
17.4.2ovsdbportenable...................................................................................2808
17.4.3ovsdbvirtual-port....................................................................................2809
17.4.4ovsdbcontroller......................................................................................2810
17.4.5debugovsdb..........................................................................................2811
17.4.6showovsdb...........................................................................................2812
17.5EVPNCommands........................................................................2814
17.5.1address-familyl2vpnevpn.........................................................................2814
17.5.2debugoverlayevpn.................................................................................2815
17.5.3evpn...................................................................................................2815
17.5.4overlayhost-collect..................................................................................2816
17.5.5rd.......................................................................................................2817
17.5.6route-target...........................................................................................2818
17.5.7route-targetevpn....................................................................................2820
17.5.8neighborattribute-unchanged.....................................................................2821
17.5.9neighborsend-community.........................................................................2822
17.5.10neighborroute-reflector-client....................................................................2823
17.5.11retainroute-targetall..............................................................................2825
17.5.12advertisel2vpnevpn..............................................................................2826
17.5.13vni....................................................................................................2827
17.5.14vxlanvni.............................................................................................2828
17.5.15vxlanuplink.........................................................................................2829
17.5.16interfacenve........................................................................................2830
17.5.17source................................................................................................2831
17.5.18membervni.........................................................................................2832
17.5.19dscp-strategy.......................................................................................2833
17.5.20virtual-mac..........................................................................................2834
17.5.21keep-vlan-tag.......................................................................................2835
17.5.22split-horizon.........................................................................................2836
17.5.23evpninclusive-multicast...........................................................................2837
17.5.24vlanarp-broadcast-suppress.....................................................................2838
17.5.25evpnmode..........................................................................................2839
17.5.26vlanmac-address-tunnellearning-disable.....................................................2840
17.5.27showbgpevpn.....................................................................................28416117.5.28showbgpevpninstance..........................................................................2842
17.5.29showbgpevpnneighbors........................................................................2843
17.5.30showoverlayhost-information...................................................................2845
17.5.31showinterfacenve.................................................................................2846
17.5.32showoverlaytunnel...............................................................................2847
17.5.33showoverlayevpnremote-vtep.................................................................2848
17.5.34showoverlayarp-suppress-information........................................................2849
17.5.35showoverlaymac-forwarding-information.....................................................2850
18MPLSCommands...........................................................................2852
18.1LDPCommands..........................................................................2852
18.1.1advertise-labelsfor..................................................................................2852
18.1.2clearldpadjacency..................................................................................2853
18.1.3clearldpsession.....................................................................................2854
18.1.4clearldpstatistics....................................................................................2855
18.1.5clearldpstatisticsadvertise-labels...............................................................2856
18.1.6control-mode.........................................................................................2857
18.1.7debugldpadvertise-labels.........................................................................2858
18.1.8debugldpall..........................................................................................2859
18.1.9debugldpdsm.......................................................................................2860
18.1.10debugldpusm......................................................................................2861
18.1.11debugldpevents...................................................................................2862
18.1.12debugldpfsm......................................................................................2863
18.1.13debugldphexdump...............................................................................2864
18.1.14debugldppacket...................................................................................2865
18.1.15debugldpqos......................................................................................2866
18.1.16debugldptsm......................................................................................2867
18.1.17debugldpvc........................................................................................2868
18.1.18disable-ldp..........................................................................................2869
18.1.19enable-ldp...........................................................................................2870
18.1.20explicit-null..........................................................................................2871
18.1.21hello-interval........................................................................................2872
18.1.22hold-time............................................................................................2873
18.1.23keepalive-interval..................................................................................2874
18.1.24keepalive-timeout..................................................................................2875
18.1.25ldphello-interval....................................................................................2876
18.1.26ldphold-time........................................................................................2877
18.1.27ldpkeepalive-interval..............................................................................2878
18.1.28ldpkeepalive-timeout..............................................................................2879
18.1.29ldpmulticast-hellos................................................................................2880
18.1.30ldptargeted-peer-hello-interval..................................................................2881
18.1.31ldptargeted-peer-hold-time......................................................................28826218.1.32routerldp............................................................................................2883
18.1.33router-id..............................................................................................2884
18.1.34showdebuggingldp...............................................................................2885
18.1.35showldp.............................................................................................2886
18.1.36showldpadjacency................................................................................2888
18.1.37showldpadvertise-labels.........................................................................2889
18.1.38showldpdownstream.............................................................................2889
18.1.39showldpfec........................................................................................2891
18.1.40showldpinterface..................................................................................2892
18.1.41showldplsp.........................................................................................2893
18.1.42showldpmpls-vpws...............................................................................2894
18.1.43showldpsession...................................................................................2895
18.1.44showldpstatistics..................................................................................2897
18.1.45showldptargeted-peers..........................................................................2899
18.1.46showldpupstream.................................................................................2900
18.1.47showmemoryldp..................................................................................2900
18.1.48targeted-peer.......................................................................................2902
18.1.49targeted-peer-hello-interval.......................................................................2903
18.1.50targeted-peer-hello-receipt.......................................................................2904
18.1.51targeted-peer-hold-time...........................................................................2905
18.1.52transport-address..................................................................................2906
18.1.53showldpigpsync..................................................................................2907
18.1.54showldpvpls.......................................................................................2908
18.1.55labeldistributiondefault-route...................................................................2909
18.2MPLSCommands........................................................................2910
18.2.1mplsenable-all-interfaces..........................................................................2910
18.2.2label-switching.......................................................................................2911
18.2.3showmplsinterface.................................................................................2912
18.2.4mplslsp-model.......................................................................................2913
18.2.5mplsilm-entry........................................................................................2914
18.2.6mplsmtu..............................................................................................2915
18.2.7showmplsilm-database............................................................................2916
18.2.8showmplsilm-forwarding..........................................................................2917
18.2.9mplsftn-entry.........................................................................................2918
18.2.10showmplsftn-database...........................................................................2919
18.2.11showmplsftn-forwarding.........................................................................2920
18.2.12mplslsp-tunneling..................................................................................2921
18.2.13showmplslsp-tunneling..........................................................................2922
18.2.14mplsmap-route.....................................................................................2923
18.2.15showmplsmap-routes............................................................................2924
18.3VPLSCommands.........................................................................2925
18.3.1mplsvpls..............................................................................................29256318.3.2vpls-description......................................................................................2926
18.3.3vpls-mtu...............................................................................................2927
18.3.4vpls-peer..............................................................................................2928
18.3.5vpls-fib-add...........................................................................................2930
18.3.6mpls-vpls..............................................................................................2931
18.3.7vpls-mac-learning....................................................................................2932
18.3.8vpls-mac-limitmaximum............................................................................2933
18.3.9vpls-mac-limit........................................................................................2934
18.3.10clearmplsvplsmac-addresses..................................................................2935
18.3.11clearmacaddress-tablevpls.....................................................................2936
18.3.12showmplsvpls.....................................................................................2937
18.3.13showmacaddress-tablevpls....................................................................2939
18.3.14mac-address-table.................................................................................2940
18.3.15discard...............................................................................................2942
18.3.16mplstrusttopmost-exp............................................................................2943
18.3.17vlanoperationtable................................................................................2944
18.3.18rewriteingresstag.................................................................................2945
18.3.19mplsvpls-l3vpn-compatible......................................................................2946
18.4VPWSCommands........................................................................2947
18.4.1mplsl2-circuit........................................................................................2947
18.4.2mpls-l2-circuit........................................................................................2948
18.4.3mplsl2-circuit-fib-entry..............................................................................2949
18.4.4showmplsl2-circuit.................................................................................2950
18.4.5showmplsvc-table..................................................................................2951
18.5MPLSSRCommands....................................................................2952
18.5.1static-sr-mplsadjacency............................................................................2952
18.5.2static-sr-mplsprefix.................................................................................2953
18.5.3static-sr-mplslsp.....................................................................................2955
18.5.4static-sr-mplstunnel.................................................................................2956
18.5.5primary................................................................................................2957
18.5.6secondary.............................................................................................2958
18.5.7map-route.............................................................................................2959
18.5.8static-sr-mplsmanual-switch......................................................................2960
18.5.9showmplssr-adj.....................................................................................2961
18.5.10showmplssr-prefix................................................................................2962
18.5.11showmplssr-lsp...................................................................................2962
18.5.12showmplssr-tunnel...............................................................................2963
18.5.13showmplssr-mapped-routes....................................................................296464ListofTables
Table1-1Commandsyntaxconventiontable..................................................................165RevisionHistory
Date Version Description
2021-04-
26R0.1Internalrelease
2021-10-
10R1.0Initialrelease
2022-03-
08R1.1Updatedocumentfornewproductversion
2022-06-
30R1.2Updatedocumentfornewproductversion
2022-11-
01V7.4.4Productversionupdate.ForproductversionV7.4.4
2022-12-
16V7.4.5Productversionupdate.ForproductversionV7.4.511Preface
1.1Declaration
Thisdocumentupdatesatirregularintervalsbecauseofproductupgradeorother
reason.
Thisdocumentisforyourreferenceonly.
1.2Audience
Thisdocumentisforthefollowingaudiences:
Systemmaintenanceengineers
Debuggingandtestingengineers
Networkmonitoringengineers
Fieldmaintenanceengineers
1.3Conventions
Table1-1Commandsyntaxconventiontable
Syntax Description
Italictypewithcapitalletters Useitalictypewithcapitallettersforthe
parametersofthecommands.
Parametersarethepartswhichneedto
replacewiththeactualvalue.
(x|y|) Selectoneamongthechoices.
(x|y||) Selectoneornoneamongthechoices.
[x|y|] Selectoneormoreamongthechoices.
Thechoicescanbeselected
repeatedly.
[x|y||] Selectoneormoreornoneamongthe
choices.Thechoicescanbeselected
repeatedly.
{x|y|} Selectoneormoreamongthechoices.
Thechoicescanbeselectedonlyonce.2{x|y||} Selectoneormoreornoneamongthe
choices.Thechoicescanbeselected
onlyonce.
<x-y> Selectanumberbetweenxandy.32BasicCommands
2.1SystemConfigurationCommands
2.1.1hostname
CommandPurpose
Tospecifyormodifythehostnameforthenetworkserver,usethehostname
commandinGlobalConfiguration.
Torestoretheconfigurationtothedefault,usethenohostnamecommand.
CommandSyntax
hostnameNAME
nohostname
Parameter ParameterDescriptionParameterValue
NAME Newhostnameforthe
networkserverHostnameisastringwith
1-63characters
CommandMode
GlobalConfiguration
Default
ThedefaulthostnameisSwitch.
Usage
Thehostnameisusedinpromptsanddefaultconfigurationfilenames.4ThenamemustalsofollowtherulesforARPANEThostnames.Theyhaveasinterior
charactersonlyletters,digits,hyphens,andunderline.Namesmustbe64characters
orfewer.
Examples
Thefollowingexamplechangesthehostnametosandbox:
Switch#configureterminal
Switch(config)#hostnamesandbox
sandbox(config)#
RelatedCommands
None
2.1.2managementipaddress
CommandPurpose
UsethiscommandtosetthemanagementIPaddressontheSwitch.
ToremovethemanagementIPaddress,usethenoformofthiscommand.
CommandSyntax
managementipaddress(A.B.C.D/M|A.B.C.Dmask)(gatewayA.B.C.D|)
nomanagementipaddress
managementipv6address(X:X::X:X/M|X:X::X:Xmask)(gatewayX:X::X:X|)
nomanagementipv6address
Parameter ParameterDescriptionParameterValue
A.B.C.D/M ThemanagementIPv4
addresswithmasklength
configuredIPv4addresswithmask
length1-32
A.B.C.Dmask ThemanagementIPv4
addressandmask
configuredIPv4addressandmask5X:X::X:X/M ThemanagementIPv6
addresswithmasklength
configuredIPv4addresswithmask
length1-128
X:X::X:Xmask ThemanagementIPv6
addressandmask
configuredIPv6addressandmask
gatewayA.B.C.D AddIPv4gateway IPv4address
gatewayX:X::X:X AddIPv6gateway IPv6address
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexamplesetsthemanagementipv4address:
Switch#configureterminal
Switch(config)#managementipaddress192.168.100.100/24
Thefollowingexampleunsetsthemanagementipv4address:
Switch#configureterminal
Switch(config)#nomanagementipaddress
Thefollowingexamplesetsthemanagementipv6address:
Switch#configureterminal
Switch(config)#managementipv6address2001:1000::1000/96
Thefollowingexampleunsetsthemanagementipv6address:
Switch#configureterminal
Switch(config)#nomanagementipv6address6RelatedCommands
None
2.1.3managementroute
CommandPurpose
UsethiscommandtosetthegatewayontheSwitchformanagementip.
CommandSyntax
managementroute(add|del)gatewayA.B.C.D
managementipv6route(add|del)gatewayX:X::X:X
Parameter ParameterDescriptionParameterValue
add Addtheroute -
del Deltheroute -
ipv6 ConfigureIPv6gateway-
gateway Addgateway -
A.B.C.D TheIPv4addressofthe
gatewayIPv4address
X:X::X:X TheIPv6addressofthe
gatewayIPv6address
CommandMode
GlobalConfiguration
Default
None
Usage
None7Examples
Thefollowingexamplesetsthegatewayof192.168.100.254fortheswitch:
Switch#configureterminal
Switch(config)#managementrouteaddgateway192.168.100.254
Thefollowingexamplesetsthegatewayof200110001fortheswitch:
Switch#configureterminal
Switch(config)#managementipv6routeaddgateway2001:1000::1
RelatedCommands
None
2.1.4showmanagementarp
CommandPurpose
UseThiscommandtoshowtheARPofthemanagementport.
CommandSyntax
showmanagementarp
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowstheARPofthemanagementport:
Switch#showmanagementarp
AddressHardwareAddrInterface8----------------+--------------------+----------
10.10.39.24124:6e:96:62:3f:c4mgmt-if
10.10.39.25400:1e:08:09:67:6dmgmt-if
RelatedCommands
None
2.1.5showmanagementipaddress
CommandPurpose
UseThiscommandtoshowtheIPaddressofthemanagementport.
CommandSyntax
showmanagementipaddress
showmanagementipv6address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowstheIPaddressofthemanagementport:
Switch#showmanagementipaddress
ManagementIPaddressis:192.168.100.100/24
Gateway:192.168.100.254
Switch#showmanagementipv6address9ManagementIPv6addressis:2001:1000::1000/96
Gateway:2001:1000::1
RelatedCommands
None
2.1.6showmanagementinterface
CommandPurpose
Usethiscommandtodisplaytheconfigurationsandstatisticsonmanagement
interface.
CommandSyntax
showmanagementinterface
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaytheconfigurationsandstatisticson
managementinterface:
Switch#showmanagementinterface
ManagementInterfacecurrentstate:DOWN
Description:
Linkencap:EthernetHWaddr:94:EB:AB:88:2A:B4
Inetaddr:192.168.100.102Mask:255.255.255.0
Bcast:192.168.100.255MTU:1500
Speed:10 Duplex:Half
Auto-negotiation:Enable10Received:2Packets,128Bytes(128.0b)
Transmitted:1Packets,78Bytes(78.0b)
RelatedCommands
clearcountersmgmt-if
2.1.7clearcountersmgmt-if
CommandPurpose
Usethiscommandtoclearstatisticscountersonmanagementinterface.
CommandSyntax
clearcountersmgmt-if
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoclearstatisticscountersonmanagement
interface:
Switch#clearcountersmgmt-if
RelatedCommands
None112.1.8enablepassword
CommandPurpose
UsethiscommandtosetthepasswordwhichisneededwhenuserenterPrivileged
EXECmode.
CommandSyntax
enablepassword(privilegeLEVEL|)(8|)LINE
noenablepassword
Parameter ParameterDescriptionParameterValue
PrivilegeLEVEL Userprivilegelevel Levelvalue<1-4>
8 Specifiesahidden
passwordwillfollow-
LINE Thepasswordstring -
CommandMode
GlobalConfiguration
Default
None
Usage
Ifthiscommandisset,userneedtoprovidethepasswordwhenenterPrivileged
EXECmode.
Examples
Thefollowingexampleshowshowtosetthepassword:
Switch#configureterminal
Switch(config)#enablepassword123
Switch(config)#exit
Switch#disable12Switch>enable
Password:
Switch#
RelatedCommands
None
2.1.9terminallength
CommandPurpose
Tosetthenumberoflinesonthecurrentterminalscreenforthecurrentsession,use
theterminallengthcommandinEXECmode.Torestoretheconfigurationtothe
default,usethenoformofthiscommand.
CommandSyntax
terminallengthLENGTH
terminalnolength
Parameter ParameterDescriptionParameterValue
LENGTH Numberoflinesonthe
screenThevalueisanumber
from0to512.Avalueof
zerodisablespausing
betweenscreensofoutput
CommandMode
PrivilegedEXEC
Default
Automaticallydetectedbyterminalscreenlengthbydefault
Usage
Thesystemusesthelengthvaluetodeterminewhentopauseduringmultiple-screen
output.Avalueofzeropreventstheswitchfrompausingbetweenscreensofoutput.13Sometypesofterminalsessionsdonotrequireyoutospecifythescreenlength
becausethescreenlengthspecifiedcanbelearnedbysomeremotehosts.For
example,therloginprotocolusesthescreenlengthtosetupterminalparameterson
aremoteUNIXhost.
Examples
Inthefollowingexample,thesystemisconfiguredtopreventoutputfrompausingifit
exceedsthelengthofthescreen:
Switch#terminallength0
RelatedCommands
serviceterminal-length
2.1.10serviceterminal-length
CommandPurpose
Tosetthenumberoflinesonthecurrentterminalscreenforallsessions,usethe
serviceterminal-lengthcommandinGlobalConfiguration.Torestorethe
configurationtothedefault,usethenoformofthiscommand.
CommandSyntax
serviceterminal-lengthLENGTH
noserviceterminal-length
Parameter ParameterDescriptionParameterValue
LENGTH Numberoflinesonthe
screenThevalueisanumber
from0to512.Avalueof
zerodisablespausing
betweenscreensofoutput
CommandMode
GlobalConfiguration14Default
None
Usage
Thesystemusesthelengthvaluetodeterminewhentopauseduringmultiple-screen
output.Avalueofzeropreventstheswitchfrompausingbetweenscreensofoutput.
Sometypesofterminalsessionsdonotrequireyoutospecifythescreenlength
becausethescreenlengthspecifiedcanbelearnedbysomeremotehosts.For
example,therloginprotocolusesthescreenlengthtosetupterminalparameterson
aremoteUNIXhost.
Examples
Inthefollowingexample,thesystemisconfiguredtopreventoutputfrompausingifit
exceedsthelengthofthescreen:
Switch#configureterminal
Switch(config)#serviceterminal-length0
RelatedCommands
terminallength
2.1.11bannermotd
CommandPurpose
Tosetasingleormultilinemessagebannerthatappearsonthescreenwhen
someonelogsintotheswitch,usethebannermotdcommandinGlobal
Configuration.Torestoretheconfigurationtothedefault,usethenoformofthis
command.
CommandSyntax
bannermotdline
nobannermotd
Parameter ParameterDescriptionParameterValue15LINE messagestring specifyavisiblecharacter
asdelimitingcharacter,
enterthemessage
between2delimiting
characters.Atmost
support99lineswith1023
characterineachline
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetasinglemessagebanner:
Switch#configureterminal
Switch(config)#bannermotd#
EnterTEXTmessage.Endwiththecharacter'#'.
thisisaexamplemessage#
RelatedCommands
bannerexec
bannerlogin
2.1.12bannerexec
CommandPurpose
Tosetanexecbannertobedisplayedonallconnectedterminalsandthisbanner
appearswhenterminalinPrivilegedEXECmode,usethebannermotdcommandin16GlobalConfiguration.Torestoretheconfigurationtothedefault,usethenoformof
thiscommand.
CommandSyntax
bannerexecline
nobannerexec
Parameter ParameterDescriptionParameterValue
LINE messagestring specifyavisiblecharacter
asdelimitingcharacter,
enterthemessage
between2delimiting
characters.Atmost
support99lineswith1023
characterineachline
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetasinglemessagebanner:
Switch#configureterminal
Switch(config)#bannerexec#
EnterTEXTmessage.Endwiththecharacter'#'.
thisisaexamplemessage#17RelatedCommands
bannermotd
bannerlogin
2.1.13bannerlogin
CommandPurpose
Tosetaloginbannertobedisplayedonallconnectedterminals,andthisbanner
appearsaftertheMOTDbannerandbeforetheloginprompt,usethebannermotd
commandinGlobalConfiguration.Torestoretheconfigurationtothedefault,usethe
noformofthiscommand.
CommandSyntax
bannerloginline
nobannerlogin
Parameter ParameterDescriptionParameterValue
LINE messagestring specifyavisiblecharacter
asdelimitingcharacter,
enterthemessage
between2delimiting
characters.Atmost
support99lineswith1023
characterineachline
CommandMode
GlobalConfiguration
Default
None18Usage
None
Examples
Thefollowingexampleshowshowtosetasinglemessagebanner:
Switch#configureterminal
Switch(config)#bannerlogin#
EnterTEXTmessage.Endwiththecharacter'#'.
thisisaexamplemessage#
RelatedCommands
bannerexec
bannermotd
2.1.14showversion
CommandPurpose
Todisplaytheversioninformationofthehardwareandfirmware,usetheshow
versioncommandinEXECmode.
CommandSyntax
showversion(slotID|)
Parameter ParameterDescriptionParameterValue
ID slotid 1-29
CommandMode
PrivilegedEXEC
Default
None19Usage
None
Examples
Thefollowingexampleshowshowtodisplayversioninformationofthehardwareand
firmware:
Switch#showversion
Switch#showversion
NetworkOSSoftware,Switch,Version5.3.8.5
Copyright(C)2018SwitchVendorInc.Allrightsreserved.
Thecurrentrunningimageisflash:/boot/uImage.p1010.48t4x.r_20181115
Switchuptimeis0days,19hours,8minutes
HardwareTypeis52TX
HardwareVersionis1.1
SDRAMsize2048M
Flashsize2048M
EPLDVersionis2.1
BootRomVersionis6.1.2
SystemserialnumberisE101ZB14202C
CurrentWebVersionis5.3.8.3
RelatedCommands
None
2.1.15linevty
CommandPurpose
TosetthemaxloginVTY,usethiscommandinGlobalConfiguration.Torestorethe
configurationtothedefault,usethenoformofthiscommand.
CommandSyntax
linevtymaximumMAX_VTY
nolinevtymaximum
linevtyVTY
Parameter ParameterDescriptionParameterValue20MAX_VTY MaxloginVTY Thedefaultvalueis
8.range<0-8>
VTY NumberofVTY Range<0-7>
CommandMode
GlobalConfiguration
Default
8
Usage
None
Examples
ThefollowingexampleshowshowtosetthemaxVTYto5:
Switch#configureterminal
Switch(config)#linevtymaximum5
ThefollowingexampleshowshowtoenterLineConfigurationmode:
Switch#configureterminal
Switch(config)#linevty2
RelatedCommands
None
2.1.16exec-timeout
CommandPurpose
Tosethowmuchtimetheloginuserdonotdoanyoperationthentheusershouldbe
forcedtoquit,usethenoformofthiscommand.
CommandSyntax
exec-timeoutMINUTESSECONDS21noexec-timeout
Parameter ParameterDescriptionParameterValue
MINUTES Timeoutinminute Range<0-35791>
SECONDS Timeoutinsecond Range<0-2147483>
CommandMode
LineConfiguration
Default
600seconds
Usage
Whentheuserloginagainthenconfigwillbeeffected
Examples
Thefollowingexampleshowshowtosetmaxtimetheloginuserdonotdoany
operationthentheusershouldbeforcedtoquit:
Switch#configureterminal
Switch(config)#linevty0
Swicth(config-line)#exec-timeout3200
RelatedCommands
None
2.1.17access-class
CommandPurpose
ToapplyIPv4ACLonlinevty.Torestoretodefault,usethenoformofthiscommand.
CommandSyntax
access-classACL-NAMEin22noaccess-classin
Parameter ParameterDescriptionParameterValue
ACL-NAME ThenameoftheIPv4aclAstringwithupto40
characters
CommandMode
LineConfiguration
Default
NoACL
Usage
IfanACLbeappliedtolineVTY,noneoftheentriesintheACLwillbematched
exceptforIPaddressandportnumber.
Examples
ThefollowingexampleshowshowtoapplyIPv4ACLonvty:
Switch(config-line)#access-classacl4in
RelatedCommands
ipaccess-list
2.1.18ipv6access-class
CommandPurpose
ToapplyIPv6ACLonlinevty.Torestoretodefault,usethenoformofthiscommand.
CommandSyntax
ipv6access-classACL-NAMEin
noipv6access-classin23Parameter ParameterDescriptionParameterValue
ACL-NAME ThenameoftheIPv6aclAstringwithupto40
characters
CommandMode
LineConfiguration
Default
NoACL
Usage
IfanACLbeappliedtolineVTY,noneoftheentriesintheACLwillbematched
exceptforIPaddressandportnumber.
Examples
ThefollowingexampleshowshowtoapplyIPv6ACLonvty:
Switch(config-line)#ipv6access-classaclv6in
RelatedCommands
ipv6access-list
2.1.19reboot
CommandPurpose
Toreloadtheoperatingsystem,usethereloadcommandinPrivilegedEXECmode.
CommandSyntax
reboot
CommandMode
PrivilegedEXEC24Default
None
Usage
Therebootcommandhaltsthesystem.Usetherebootcommandafterconfiguration
informationisenteredintoafileandsavedtothestartupconfiguration.
Examples
Thefollowingexampleissampledialogfromtherebootcommand:
Switch#reboot
RelatedCommands
reload
2.1.20schedulerebootat
CommandPurpose
Toscheduleareloadofthesoftwaretotakeplaceatthespecifiedtime,usethe
schedulerebootatcommandinGlobalConfiguration.Tocancelthescheduledreboot
task,usethenoformofthiscommand.
CommandSyntax
schedulerebootatHH:MM(MM/DD|MM/DD/YYYY|YYYY/MM/DD)
noschedulereboot
Parameter ParameterDescriptionParameterValue
HH:MM ThehourandminutesThetimerangeis00:00
23:59
MM/DD Specifythedateforcurrent
year(MM/DDformat)daterangeis[1/1,12/31]25MM/DD/YYYY Specifythedate
(MM/DD/YYYYformat,
yearrangeis[2000,2037])yearrangeis[2000,2037]
YYYY/MM/DD Specifythedate
(YYYY/MM/DDformatyearrangeis[2000,2037]
CommandMode
GlobalConfiguration
Default
Noscheduledreboottaskisdefined.
Usage
Ifyouspecifythemonthandday,thereloadisscheduledtotakeplaceatthe
specifiedtimeanddate.Ifyoudonotspecifythemonthandday,thereloadtakes
placeatthespecifiedtimeonthecurrentday.
Examples
Thefollowingexampleissampledialogfromtheschedulerebootatcommand:
Switch#configureterminal
Switch(config)#schedulerebootat12:122008/12/25
RelatedCommands
schedulerebootdelay
2.1.21schedulerebootdelay
CommandPurpose
Toscheduleareloadofthesoftwaretotakeplaceafterthespecifiedtime,usethe
schedulerebootdelaycommandinGlobalConfiguration.Tocancelthescheduled
reboottask,usethenoformofthiscommand.26CommandSyntax
schedulerebootdelay{HH:MM|MINUTES}
noschedulereboot
Parameter ParameterDescriptionParameterValue
HH:MM ThehourandminutesThetimerangeis00:00
23:59
MINUTES Theminutes Therangeis1-720
CommandMode
GlobalConfiguration
Default
Noscheduledreboottaskisdefined.
Usage
None
Examples
Thefollowingexampleissampledialogfromtheschedulerebootdelaycommand:
Switch#configureterminal
Switch(config)#schedulerebootdelay300
RelatedCommands
schedulerebootat
2.1.22bootsystem
CommandPurpose
Tospecifythesystemimagethattheswitchloadsatstartup,usethefollowingboot
systemcommandsinPrivilegedEXECmode.27CommandSyntax
bootsystem(tftp:mgmt-ifSERVERIP|flash:/)FILE_NAME
Parameter ParameterDescriptionParameterValue
flash:/ Systemimagefilefornext
booting-
tftp Systemimagefilefornext
booting-
mgmt-if Managementport -
SERVERIP Thetftpserverip -
FILE_NAME Thefilenamethatwillbe
usedtoloadatstartupThefullpathandfile
nameupto255
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
ManagementIPaddressinstartup-configfilewillbeusedassourceaddresswhen
systembootviaTFTP.
Examples
Thefollowingexampleissampledialogfromthebootsystemcommand:
Switch#bootsystemflash:/boot/Internal-1.0.0.25.bin
RelatedCommands
showboot282.1.23showboot
CommandPurpose
Todisplaythecurrentimageandtheimagethenextstartupwillload,usetheshow
bootcommandinPrivilegedEXECmode.
CommandSyntax
showboot
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowbootcommand:
Switch#showboot
Thecurrentbootimageversionis:E330-3.0.0.23.it
Thecurrentrunningimageis:tftp://10.10.29.160/humberOS-e330-ma-v3.0.0.23.it.r.bin
Thenextrunningimageis:tftp://10.10.29.160/humberOS-e330-ma-v3.0.0.23.it.r.bin
RelatedCommands
showbootimages
2.1.24showbootimages
CommandPurpose
Todisplayallbootingimagesavailableintheflashsystem,usetheshowbootimages
commandinPrivilegedEXECmode.29CommandSyntax
showbootimages
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowbootimagescommand:
Switch#showbootimages
Systemimagefileslist:
Currentbootimageversion:1.0.0.25
CreateTimeVersion Filename
===============================================================
*2011-07-2510:58:29v3.0.0.22itInternal-.00.22.bin
RelatedCommands
showboot
2.1.25showmemory
CommandPurpose
Todisplaymemoryutilizationinformationabouttheactiveprocesses,usetheshow
memorycommandinPrivilegedEXECmode.
CommandSyntax
showmemory(all|bgp|bhm|chsm|dhclient|dot1x|imi|ipv6|lacp|ldp|lib|
mstp|nsm|oamd|onmd|ospf|pim|ptp|rip|rsvp|shal|summary)30Parameter ParameterDescriptionParameterValue
all Allmemoryinformation-
bgp BorderGatewayProtocol
(BGP)-
bhm Healthmonitoring -
chsm Chassismanagement-
dhclient DHCPclientmodule -
dhcpd DHCP -
dhcprelay DHCPrelay -
dhcprelay6 DHCPrelay6(IPv6) -
dot1x IEEE802.1XPort-Based
AccessControl-
imi IntegratedManagement
Interface(IMI)-
ipv6 InternetProtocolversion6
(IPv6)-
lacp LinkAggregationControl
Protocol(LACP)-
ldp LabelDistributionProtocol
(LDP)-
lib Libraryinformation -
mstp SpanningTreeProtocols
(STP/RSTP/MSTP)-
nsm NetworkServiceModule
(NSM)-
oamd BidirectionalForwarding
Detection(BFD)-31onmd LLDPandEFM_OAM -
ospf OpenShortestPathFirst
(OSPF)-
pim ProtocolIndependent
Multicast(PIM)-
ptp PrecisionTimeProtocol
(PTP)-
rip RoutingInformation
Protocol(RIP)-
rsvp ResourceReservation
Protocol(RSVP)-
shal Halservermonitoring -
summary Summarymemory
information-
monitor monitor -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowmemorycommandwithkeywordbgp:
Switch#showmemorybgp
LibrarymemoriesforBGP
Memorytype AlloccellsAllocbytes32========================================================
Temporarymemory :6596322216
Hash :10320
Hashindex :1040960
Hashbucket :55880
Linklist :13400
Linklistnode :1151840
Show :1512
Showpage :18192
Showserver :164
PrefixIPv4 :648
Routetable :648
Routenode :30919776
Vector :3383324768
Vectorindex :338348824
SNMPsubtree :86144
Hostconfig :116
MessageofTheDay :1128
IMIClient :21056
VTYmaster :116
VTYif :5239936
VTYconnected :3192
Messagehandler :2128
Host :196
Loginformation :2128
Context :1512
MemoriesforBGP
Memorytype AlloccellsAllocbytes
==========================================================
BGPstructure :1768
BGPVRstructure :1384
BGPglobalstructure:164
BGPpeer :12048
Extcommunity :116
BGPaslistmaster :132
Communitylisthandler:132
BGPDampReuseListArray:12048
BGPtable :31248
BGPVRFlist :164
RelatedCommands
showprocessesmemorysorted
2.1.26showcputraffic-limit
CommandPurpose
UsethiscommandtoshowtheCPUtraffic-limitconfigurations.33CommandSyntax
showcputraffic-limit
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowcputraffic-limit:
Switch#showcputraffic-limit
reason rate(pps)class
bpdu 643
cfm 5122
slow-protocol1281
eapol 1280
erps 1282
smart-link 1282
udld 1283
arp 6401
dhcp 1280
rip 641
ldp 5121
ospf 2561
pim 1281
vrrp 5121
rsvp 5121
ipda 10240
icmp-redirect1280
mcast-rpf-fail1281
macsa-mismatch1280
port-security-discard1280
vlan-security-discard1280
mtu-dontfrag 640
mtu-frag 640
ptp 5122
ip-option 5120
ucast-ttl-fail64034mpls-ttl-fail640
igmp 1282
sflow-ingress1280
sflow-egress 1280
fwd-to-cpu 640
mpls-tp-pwoam 1282
Totalrate:2048(pps)
RelatedCommands
None
2.1.27showprocessescpusorted
CommandPurpose
TodisplayCPUutilizationinformationabouttheactiveprocessessortedby
percentageinadevice,usetheshowprocessescpusortedcommandinPrivileged
EXECmode.
CommandSyntax
showprocesscpusorted
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowprocesscpusorted:
Switch#showprocessescpusorted
PIDTIME%CPUTTYCOMMAND
92400:20:032.0?hsrvd3595600:07:170.7?nsm
100700:02:440.2?imi
95900:01:240.1?snmpd
131700:00:010.1pts/0imish
500:00:450.0?events/0
98300:00:230.0?mstpd
98500:00:150.0?onmd
96600:00:150.0?lacpd
96300:00:120.0?bhm
92900:00:120.0?chsm
96400:00:110.0?oamd
91900:00:100.0?ntpd
100300:00:080.0?pimd
94200:00:080.0?sshd
95700:00:080.0?dhcrelay
97300:00:070.0?authd
100500:00:070.0?ldpd
97700:00:070.0?rmond
102100:00:070.0?ripd
102700:00:070.0?ospfd
103200:00:070.0?bgpd
100:00:050.0?init
77900:00:040.0?jffs2_gcd_mtd1
110600:00:010.0?imish
300:00:000.0?ksoftirqd/0
91600:00:000.0?syslog-ng
6500:00:000.0?bdi-default
96500:00:000.0?ptpd
91700:00:000.0?crond
6300:00:000.0?sync_supers
109600:00:000.0?telnetd
600:00:000.0?khelper
10500:00:000.0?khungtaskd
200:00:000.0?kthreadd
400:00:000.0?watchdog/0
900:00:000.0?netns
1000:00:000.0?async/mgr
6600:00:000.0?kblockd/0
7300:00:000.0?kseriod
8800:00:000.0?rpciod/0
10600:00:000.0?kswapd0
15700:00:000.0?aio/0
16400:00:000.0?nfsiod
17100:00:000.0?crypto/0
71200:00:000.0?mtdblockd
74100:00:000.0?kpsmoused
78900:00:000.0?PETH/Tx
91200:00:000.0?angel
109800:00:000.0?telnetd
141400:00:000.0pts/0imish
141500:00:000.0pts/0more
141600:00:000.0?ps36RelatedCommands
None
2.1.28showprocessescpuhistory
CommandPurpose
TodisplayCPUutilizationinformationforaperiodoftime,usetheshowprocesses
cpuhistorycommandinPrivilegedEXECmode,theperiodof1s,1min,5mincould
beshown.
CommandSyntax
showprocesscpuhistory
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowprocessescpuhistorycommand:
Switch#showprocessescpuhistory
CPUusageforfiveseconds:4.17%;oneminute:3.70%;fiveminutes:3.68%
RelatedCommands
None372.1.29showprocessesmemorysorted
CommandPurpose
Todisplaymemoryutilizationinformationabouttheactiveprocessessortedby
percentageinadevice,usetheshowprocessesmemorysortedcommandin
PrivilegedEXECmode.Here,CPUusageforeachprocessmeanstheCPUtimeslice
usedbythisprocessfromtheprocesswasstartedtothiscommandhasbeen
operated.
CommandSyntax
showprocessesmemorysorted(core|physical|virtual)
Parameter ParameterDescriptionParameterValue
core Sizeinphysicalpagesof
thecoreimageofthe
process-
physical Non-swappedphysical
memorythatataskhas
used-
virtual Virtualmemoryusageof
entireprocess-
CommandMode
PrivilegedEXEC
Default
None
Usage
None38Examples
Thefollowingissampleoutputfromtheshowprocessesmemorysortedcommand
withoutkeywords:
Switch#showprocessesmemorysorted
Total:256108;Used:89644;Free:166464;Buffers:0
PIDTTYRSSVSZSZCOMMAND
1317pts/09516131043276imish
1106?9428131043276imish
1463pts/07436131043276imish
956?6836146443661nsm
1007?594896242406imi
924?5912176524413hsrvd
959?333680762019snmpd
1032?272482042051bgpd
1027?248871401785ospfd
1003?247271521788pimd
957?234065721643dhcrelay
983?233665921648mstpd
1021?232466001650ripd
1005?232067321683ldpd
942?228467721693sshd
985?220865921648onmd
929?213271681792chsm
966?202861401535lacpd
973?202862841571authd
965?202464081602ptpd
964?195263641591oamd
977?194862001550rmond
963?170859801495bhm
919?11203792948ntpd
916?10602300575syslog-ng
1465pts/07642516629ps
917?6683040760crond
1?6562928732init
1464pts/04721668417more
1096?4162928732telnetd
1098?2722928732telnetd
912?1721496374angel
2?000kthreadd
3?000ksoftirqd/0
4?000watchdog/0
5?000events/0
6?000khelper
9?000netns
10?000async/mgr
63?000sync_supers
65?000bdi-default
66?000kblockd/0
73?000kseriod
88?000rpciod/0
105?000khungtaskd39106?000kswapd0
157?000aio/0
164?000nfsiod
171?000crypto/0
712?000mtdblockd
741?000kpsmoused
779?000jffs2_gcd_mtd1
789?000PETH/Tx
RelatedCommands
None
2.1.30terminalmonitor
CommandPurpose
Tocopydebugoutputtothecurrentterminalline,usetheterminalmonitorcommand
inPrivilegedEXECmode.
CommandSyntax
terminalmonitor
terminalnomonitor
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheterminalmonitorcommand:
Switch#terminalmonitor
Jan116:09:30DUT1IMISH-6:readytoservice40RelatedCommands
None
2.1.31configureterminal
CommandPurpose
ToenterGlobalConfiguration,useconfigureterminalcommandinPrivilegedEXEC
mode.
CommandSyntax
configureterminal
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtoenterGlobalConfiguration.Notethatcommandsinthismode
arewrittentotherunningconfigurationfileassoonasyouenterthem(usingthe
Enterkey/CarriageReturn).
Afteryouentertheconfigurecommand,thesystempromptchangesfrom#to
(config)#,indicatingthattheswitchisinGlobalConfiguration.ToleaveGlobal
ConfigurationandreturntoPrivilegedEXECmode,typeendorpressCtrl-Z.
Examples
Inthefollowingexample,theuserentersGlobalConfiguration:
Switch#configureterminal
Switch(config)#
Enterconfigurationcommandsoneperline.EndwithCNTL/Z.
Switch(config)#41RelatedCommands
enable
disable
2.1.32disable
CommandPurpose
ToexitPrivilegedEXECmodeandreturntouserEXECmode,enterthedisable
commandinEXECmode.
CommandSyntax
disable
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theuserentersPrivilegedEXECmodeusingtheenable
command,thenexitsbacktouserEXECmodeusingthedisablecommand.Notethat
thepromptforuserEXECmodeis>,andthepromptforPrivilegedEXECmodeis#:
Switch#configureterminal
Switch>enable
Password:<password>
Switch#disable
Switch>42RelatedCommands
enable
2.1.33enable
CommandPurpose
ToenterPrivilegedEXECmod,usetheenablecommandinuserEXECorPrivileged
EXECmode.
CommandSyntax
enable
CommandMode
UserEXEC
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theuserentersPrivilegedEXECmodeusingtheenable
command.Thesystempromptstheuserforapasswordbeforeallowingaccessto
thePrivilegedEXECmode.Thepasswordisnotprintedtothescreen.Theuserthen
exitsbacktouserEXECmodeusingthedisablecommand.Notethatthepromptfor
userEXECmodeisthegreaterthansymbol(>),andthepromptforPrivilegedEXEC
modeisthenumbersign(#).:
Switch#configureterminal
Switch>enable
Password:<password>43Switch#disable
Switch>
RelatedCommands
disable
2.1.34end
CommandPurpose
ToendthecurrentconfigurationsessionandreturntoPrivilegedEXECmode,use
theendcommandinGlobalConfiguration.
CommandSyntax
end
CommandMode
GlobalConfiguration
Default
None
Usage
ThiscommandwillbringyoubacktoPrivilegedEXECmoderegardlessofwhat
configurationmodeorconfigurationsub-modeyouarein.
Thisglobalconfigurationcommandcanbeusedinanyconfigurationmode.
Usethiscommandwhenyouaredoneconfiguringthesystemandyouwanttoreturn
toEXECmodetoperformverificationsteps.
Examples
Inthefollowingexample,theendcommandisusedtoexitfrominterface
configurationmodeandreturntoPrivilegedEXECmode.Ashowcommandisusedin
PrivilegedEXECmodetoverifytheconfiguration:44Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#end
Switch#showinterfaceeth-0-1
RelatedCommands
exit
2.1.35exit(global)
CommandPurpose
ToexitanyconfigurationmodetothelowermodeintheCLImodehierarchy,usethe
exitcommandinanyconfigurationmode.
CommandSyntax
exit
CommandMode
AllConfigurationMode
Default
None
Usage
TheexitcommandisusedintheCLItoexitfromthecurrentcommandmodetothe
lowermodeintheCLImodehierarchy.
Forexample,usetheexitcommandinGlobalConfigurationtoreturntoPrivileged
EXECmode.Usetheexitcommandininterface,line,orrouterconfigurationmodeto
returntoGlobalConfiguration.
Examples
Thefollowingexampledisplaysanexitfromtheinterfaceconfigurationmodeto
returntotheGlobalConfiguration:45Switch#configureterminal
Switch(config-if)#exit
Switch(config)#
RelatedCommands
end
exit(EXEC)
2.1.36exit(EXEC)
CommandPurpose
Tocloseanactiveterminalsessionbyloggingofftheswitch,usetheexitcommandin
EXECmode.
CommandSyntax
exit
CommandMode
PrivilegedEXEC
Default
None
Usage
UsetheexitcommandinEXECmodetoexittheactivesession(logoffthedevice).
ThiscommandcanbeusedinanyEXECmode(suchasUserEXECmodeor
PrivilegedEXECmode)toexitfromtheEXECprocess.
Examples
Inthefollowingexample,theexit(global)commandisusedtomovefromGlobal
ConfigurationtoPrivilegedEXECmode,thedisablecommandisusedtomovefrom
PrivilegedEXECmodetouserEXECmode,andtheexit(EXEC)commandisused
tologoff(exittheactivesession):46Switch#configureterminal
Switch(config)#exit
Switch#disable
Switch>exit
RelatedCommands
quit
2.1.37quit
CommandPurpose
Tocloseanactiveterminalsessionbyloggingofftheswitch,usethequitcommand
inEXECmode.
CommandSyntax
quit
CommandMode
AllConfigurationMode
Default
None
Usage
UsethequitcommandinEXECmodetoexittheactivesession(logoffthedevice).
ThiscommandcanbeusedinanyEXECmode(suchasUserEXECmodeor
PrivilegedEXECmode)toexitfromtheEXECprocess.
Examples
Inthefollowingexample,thequitcommandisusedtomovefromGlobal
ConfigurationtoPrivilegedEXECmode,thedisablecommandisusedtomovefrom
PrivilegedEXECmodetouserEXECmode,andthequitcommandisusedtologoff
(exittheactivesession):47Switch#configureterminal
Switch(config)#quit
Switch#disable
Switch>quit
RelatedCommands
exit
2.1.38cd
CommandPurpose
Changethecurrentdirectorytodir,usethecdcommandinEXECmode.
CommandSyntax
cd(dir|)
Parameter ParameterDescriptionParameterValue
dir (Optional)Thedirectoryor
filesystemsfollowedbya
colon.Ifflash:argumentis
specified,changethe
currentdirectorytoflash:.
Ifudisk:argumentis
specified,changethe
currentdirectorytoudisk:.
IfyoudontuseUSB
device,failedtocdudisk-
CommandMode
PrivilegedEXEC
Default
Theinitialdefaultfilesystemisflash:.Ifyoudonotspecifyadirectoryonafile
system,thedefaultistherootdirectoryonthatfilesystem.48Usage
ForallEXECcommandsthathaveanoptionalfilesystemargument,thesystemuses
thefilesystemspecifiedbythecdcommandwhenyouomittheoptionalfilesystem
argument.Forexample,thedirEXECcommand,whichdisplaysalistoffilesonafile
system,containanoptionalfilesystemargument.Whenyouomitthisargument,the
systemliststhefilesonthefilesystemspecifiedbythecdcommand.
Examples
Inthefollowingexample,thecdcommandisusedtosetthedefaultfilesystemtothe
Flashmemory.:
Switch#configureterminal
DUT1#cd
DUT1#pwd
flash:/
Inthefollowingexample,thecdcommandisusedtosetthedefaultfilesystemtothe
USBdevice:
Switch#configureterminal
storagedevice
DUT1#cdudisk:
DUT1#pwd
udisk:/
Inthefollowingexample,thecdcommandisusedtosetthefilesystemwithoutplug
intheUSBmassstoragedevice:
Switch#cdudisk:
%Failedtocdudisk::Nosuchfileordirectory
Inthefollowingexample,thecdcommandisusedtosetthefilesystemwithplugintheUSBmassstoragedevice
RelatedCommands
dir
ls
pwd492.1.39copy
CommandPurpose
Tocopyfilesystem,usethecopycommandinPrivilegedEXECmode.
CommandSyntax
copysource-namedestination-name
Parameter ParameterDescriptionParameterValue
source-name ThelocationURLofthe
sourcefiletobecopied.
Thesourcecanbeeither
localorremote-
destination-name ThedestinationURLofthe
copiedfile.Thedestination
canbeeitherlocalor
remote-
CommandMode
PrivilegedEXEC
Default
None
Usage
TheexactformatofthesourceanddestinationURLsvariesaccordingtothefileor
directorylocation.Youmayenteraparticularfileorafilenamethatfollowsthe
standardfilesystemsyntax(filesystem:[/filepath][/filename]).
Examples
ThefollowingexampleshowshowtogetimagefromTFTPserverthroughinband
managementinterface.:50Switch#copytftp://192.168.0.1/imageflash:/boot/image
DownloadfromURLtotemporaryfile.
Getfilefromtftp://192.168.0.1/image
..............................................................................................................
Received15591515bytesin16.6seconds
Copythetemporaryfiletoitsdestination.
..............................................................................................................
15591515bytesin69.8seconds,218kbytes/second
ThefollowingexampleshowshowtogetimagefromTFTPserverthroughoutband
managementinterface:
Switch#copymgmt-iftftp://192.168.0.1/imageflash:/boot/image
RelatedCommands
delete
2.1.40delete
CommandPurpose
Todeleteafileontheflash,usethedeletecommandinPrivilegedEXECmode.
CommandSyntax
deletefile-name
Parameter ParameterDescriptionParameterValue
file-name Thefilenamethatis
supposedtobedeleted-
CommandMode
PrivilegedEXEC
Default
None51Usage
Ifyouattempttodeletetheconfigurationfileorimage,thesystempromptsyouto
confirmthedeletion.Also,ifyouattempttodeletethesystemspecifiedfilesuchas
DHCPsnoopingbindings,thesystempromptsyoutoconfirmthedeletion.
Examples
Thefollowingexampledeletesthefilenamedtestfromtheflash:
Switch#deleteflash:/test
Areyousuretodeleteflash:/test?[confirm]:y
RelatedCommands
copy
2.1.41dir
CommandPurpose
Todisplayalistoffilesonafilesystem,usethedircommandinEXECmode.
CommandSyntax
dir(flash:|udisk:|)(directory-name|)(file-name|)
Parameter ParameterDescriptionParameterValue
flash Theflashsystem -
udisk TheUSBmassstorage
device.Ifyoudontuse
USBmassstoragedevice,
failedtodirudisk-
directory-name Thedirectoryinflashor
udisk-
file-name Thefilename -52CommandMode
PrivilegedEXEC
Default
None
Usage
Usethedir(Flashfilesystem)commandtodisplayflashorudiskinformation.
Examples
Thefollowingissampleoutputfromthedircommand.:
Switch#dir
Directoryofflash:/
total42
drwxr-xr-x20Jul3015:42boot
drwxr-xr-x30Jan11970conf
drwxr-xr-x20Jan11970log
-rw-r-----11020Jul2919:18startup-config.conf
-rw-r--r--110270Jul3010:10syslog
-rw-r--r--16886Jul2923:59syslog.1.gz
63.0Mbytestotal(30.4Mbytesfree)
Switch#cdudisk:
Switch#dir
Directoryofudisk:/
total12
drwxrwxrwx24096Jun22011test
drwxrwxrwx24096Jun82011test1
drwxrwxrwx24096Jun72011test2
3.7Gbytestotal(3.7Gbytesfree)
ThefollowingissampleoutputfromudiskifplugintheUSBmassstoragedevice.:
Switch#cdudisk:
Switch#dir
Directoryofudisk:/
total12
drwxrwxrwx24096Jun22011test
drwxrwxrwx24096Jun82011test1
drwxrwxrwx24096Jun72011test2
3.7Gbytestotal(3.7Gbytesfree)53RelatedCommands
ls
2.1.42ls
CommandPurpose
Todisplayalistoffilesonafilesystem,usethelscommandinEXECmode.
CommandSyntax
ls(flash:|udisk:|)(directory-name|)(file-name|)
Parameter ParameterDescriptionParameterValue
flash Theflashsystem -
udisk TheUSBmassstorage
device.Ifyoudontuse
USBmassstoragedevice,
failedtodirudisk-
directory-name Thedirectoryinflashor
udisk-
file-name Thefilename -
CommandMode
PrivilegedEXEC
Default
None
Usage
None54Examples
Thefollowingissampleoutputfromthelscommand:
Switch#ls
Directoryofflash:/
total42
drwxr-xr-x20Jul3015:42boot
drwxr-xr-x30Jan11970conf
drwxr-xr-x20Jan11970log
-rw-r-----11020Jul2919:18startup-config.conf
-rw-r--r--110270Jul3010:10syslog
-rw-r--r--16886Jul2923:59syslog.1.gz
63.0Mbytestotal(30.4Mbytesfree)
RelatedCommands
dir
2.1.43more
CommandPurpose
Todisplaythecontentsofafile,usethemorecommandinEXECmode.
CommandSyntax
more(flash:|udisk:)(directory-name|)file-name
Parameter ParameterDescriptionParameterValue
flash Theflashsystem -
udisk TheUSBmassstorage
device.Ifyoudontuse
USBmassstoragedevice,
failedtodirudisk-
directory-name Thedirectoryinflashor
udisk-
file-name Thefilename -55CommandMode
PrivilegedEXEC
Default
None
Usage
ThesystemcanonlydisplayafileinASCIIformat.
Examples
Thefollowingpartialsampleoutputdisplaystheconfigurationfilenamedstartup-
configinflash:
Switch#moreflash:/startup-config.conf
RelatedCommands
dir
ls
2.1.44mkdir
CommandPurpose
TocreateanewdirectoryinaFlashfilesystemorudiskdevice,usethemkdir
commandinEXECmode.
CommandSyntax
mkdirdirectory-name
Parameter ParameterDescriptionParameterValue
directory-name Thedirectoryinflashor
udisk-56CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisvalidonlyforlocalfilesystems.
Examples
ThefollowingexamplecreatesadirectorynamednewdirinFlash.:
Switch#mkdirflash:/newdir
ThefollowingexamplecreatesadirectorynamednewdirinUSBmassstorage
deviceifpluginit:
Switch#mkdirudisk:/newdir
RelatedCommands
rmdir
dir
2.1.45rename
CommandPurpose
TorenameafileinaClassCFlashfilesystemorudiskdevice,usetherename
commandinEXECmode.
CommandSyntax
renameold-filenamenew-filename
Parameter ParameterDescriptionParameterValue57old-filename Theoriginalfilenamein
flash-
new-filename Thenewfilenameinflash-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisvalidonlyforlocalfilesystems
Examples
Inthefollowingexample,thefilenamedstartup-config.conf-bakisrenamedstartup-
config.conf-bak2:
Switch#configureterminal
Switch1#renameudisk:/wusudisk:/wu
Areyousuretorenameudisk:/wus?[confirm]
RelatedCommands
None
2.1.46rmdir
CommandPurpose
ToremoveanexistingdirectoryinaFlashfilesystemorudiskdevice,usethermdir
commandinPrivilegedEXECmode.
CommandSyntax
rmdirdirectory-name58Parameter ParameterDescriptionParameterValue
directory-name Thedirectoryinflash -
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisvalidonlyforlocalfilesystems
Examples
Thefollowingexampledeletesadirectorynamednewdir:
Switch#rmdirflash:/newdir
Areyousuretodeletenewdir?[yes/no]:y
RelatedCommands
mkdir
dir
2.1.47tarcreate
CommandPurpose
TocreateannewtarfileinaFlashfilesystemorudiskdevice,usethetarcreate
commandinPrivilegedEXECmode.
CommandSyntax
tarcreatetar-file-namesource-directory
Parameter ParameterDescriptionParameterValue59tar-file-name Thefilenameofthenew
tarfile-
source-directory Thesourcedirectoryin
flash-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thesource-directorymustbeadirectory
Examples
Thefollowingexamplecreatesatarfilenamedtar1:
Switch#tarcreateudisk:/tar1udisk:/wu
RelatedCommands
tartable
tarxtract
2.1.48tartable
CommandPurpose
Todisplayfilesinthetarfile,usethetartablecommandinPrivilegedEXECmode.
CommandSyntax
tartabletar-file-name
Parameter ParameterDescriptionParameterValue60tar-file-name Thefilenameofthenew
tarfile-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thetar-file-namemustbeaintheflash
Examples
Thefollowingexampleshowsfilesinatarfilenamedtar1:
Switch#tartableudisk:/tar1
RelatedCommands
tarcreate
2.1.49tarxtract
CommandPurpose
Tountarfilesinthetarfile,usethetarxtractcommandinPrivilegedEXECmode.
CommandSyntax
tarxtracttar-filedestination-directory
Parameter ParameterDescriptionParameterValue
tar-file Thefilenameofthetarfile-
destination-directory Thedestinationdirectory-61CommandMode
PrivilegedEXEC
Default
None
Usage
Thedestination-directorymustexistintheflash.Youcanusemkdirtocreateanew
directory
Examples
Thefollowingshowsanexampletoextractatarfilenamedtar1intoadirectoryname
dir1:
Switch#tarxtractflash:/tar1flash:/mydir
RelatedCommands
tarcreate
tartable
2.1.50showdiagnostic-information
CommandPurpose
Displaydiagnstic-informationincludingsyslogfiles,coredumpfiles,tcam
entries,running-config,startup-config,version,clock,memoryandloggingbuffer.
CommandSyntax
showdiagnostic-information(bgp|ospf|)
Parameter ParameterDescriptionParameterValue
bgp BGPprotocoldiagnostic
information-62ospf OSPFprotocoldiagnostic
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowdiagnostic-information:
Switch#showdiagnostic-information
RelatedCommands
None
2.1.51tardiagnostic-information
CommandPurpose
Toputdiagnostic-informationtoaFlashfilesystem,udiskdevice,ftpserverortftp
server,usethetardiagnostic-informationcommandinPrivilegedEXECmode.Syslog
files,coredumpfiles,tcamentries,running-config,startup-config,version,clock,
memoryandloggingbufferareincludedinthistarfile.
CommandSyntax
tardiagnostic-information(mgmt-if|)destination-directory/tar-file
Parameter ParameterDescriptionParameterValue63destination-directory Thedestinationdirectory,
suchasflash,udisk,tftpor
ftpserver-
tar-file Thefilenameofthetarfile-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thedestination-directorymustreachableanddiskisenough
Examples
Thefollowingshowsanexampletoputadiagnostic-informationtarfiletoflash:
Switch#tardiagnostic-informationflash:/diag.tar.gz
RelatedCommands
None
2.1.52format
CommandPurpose
Toformatudisk,alldataonudisk:willbelost.
CommandSyntax
formatudsik:
Parameter ParameterDescriptionParameterValue64udsik: TheUSBmassstorage
device.Ifyoudontuse
USBmassstoragedevice,
failedtoformatudisk-
CommandMode
ApplicationConfiguration
Default
None
Usage
Thedestination-directorymustexist
Examples
ThefollowingshowsanexampletoformatUSBmassstoragedevice:
Switch#configureterminal
Switch(config)#formatudisk:
WARNING:Alldataonudisk:willbelost!!!
Andformatoperationmaytakeawhile.
Areyousuretoprocesswithformat?[yes/no]:yes
RelatedCommands
None
2.1.53umount
CommandPurpose
TouninstalltheUSBmassstoragedevicebeforeplugoutitfromtheswitch.
CommandSyntax
umountudsik:65Parameter ParameterDescriptionParameterValue
udisk: TheUSBmassstorage
device.Ifyoudontuse
USBmassstoragedevice,
failedtoformatudisk-
CommandMode
ApplicationConfiguration
Default
None
Usage
USBmassstoragedevicemustexistinthesystem.Youcanuseumountcommand
touninstalltheUSBmassstoragedevice
Examples
ThefollowingshowsanexampletoumountUSBmassstoragedevice:
Switch#configureterminal
Switch(config)#umountudisk:
Afterthisoperation,youcannotuseUSBdisk.
Areyousuretocontinue?[yes/no]:yes
RelatedCommands
None
2.1.54cut-throughenable
CommandPurpose
Toenablecutthroughmode,andcanconfigurespeedonlyonGGtruck.66CommandSyntax
cut_through_forwardingenable(10G|100G|1G|25G|2G5|40G|50G|5G)
nocut_through_forwardingenable
Parameter ParameterDescriptionParameterValue
enbale enablecutthroughmode-
(10G|100G|1G|
25G|2G5|40G|50G|5G)Configurecut_through
speed-
CommandMode
ApplicationConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurecutthroughmode:
Switch#configureterminal
Switch(config)#cut-through-forwardingenable10G
%Configurationaboutcuttingthroughforwardingmodehasbeenstored,butcannottakeeffectuntilthenext
reload.
RelatedCommands
None
2.1.55showcut-through-forwardingmode
CommandPurpose
Todisplaycurrentworkingmode.67CommandSyntax
showcut-through-forwardingmode
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingshowsanexampletodisplaycurrentworkingmode:
DUT1#showcut-through-forwardingmode
RelatedCommands
None
2.1.56resetfactory-config
CommandPurpose
Resettofactoryconfiguration.
CommandSyntax
resetfactory-config
CommandMode
PrivilegedEXEC68Default
None
Usage
Devicewillrestorethesavedconfigurationtofactoryconfigurationwhenselectyes,
andprompttosaveconfigurationwhenrebooting,pleaseselectNO.
Examples
Thefollowingshowsanexampletoresetfactoryconfiguration:
Switch#configureterminal
DUT1#resetfactory-config
Thisactionwillresetthesavedconfigurationimmediately.
Running-configwillbeerasedafterreboot.Continue?[yes/no]:
RelatedCommands
None
2.1.57showfactory-config
CommandPurpose
Todisplaythefactoryconfiguration.
CommandSyntax
showfactory-config
CommandMode
PrivilegedEXEC
Default
None69Usage
None
Examples
ThefollowingshowsanexampletodisplayfactoryconfigurationDUT1#show
factory-config:
DUT1#showfactory-config
RelatedCommands
None
2.1.58showthis
CommandPurpose
Todisplaytheconfigurationofthismode.
CommandSyntax
showthis
CommandMode
AllConfigurationMode
Default
None
Usage
Notsupportthismodekey-chainkey-chainkeytimerangeaclroute-map
lineclassmap
Examples
Thefollowingexampleshowtheconfigurationofthismode:70Switch(config-vlan)#showthis
vlandatabase
vlan5
!
RelatedCommands
None
2.1.59showroute-mac
CommandPurpose
TodisplaytherouteMACaddressofthisdevice.
CommandSyntax
showroute-mac
CommandMode
PrivilegedEXEC
Default
None
Usage
Allinterfacesonadevicesharethesamesingleroute-mac.
Examples
Thefollowingshowsanexampletodisplayroute-macofthisdevice:
Switch#showroute-mac
RouteMACis:222c.12fd.6c00
!71RelatedCommands
None
2.2UserManagementCommands
2.2.1username
CommandPurpose
Usethiscommandtocreateordeletealocaluseraccountontheswitch.
CommandSyntax
usernameWORD
nousernameWORD
Parameter ParameterDescriptionParameterValue
username EstablishUserName
Authentication-
WORD Username -
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoaddausernamed
testName:72Switch#configureterminal
Switch(config)#usernametestName
RelatedCommands
None
2.2.2usernamepassword
CommandPurpose
Usethiscommandtoaddusernameandpassword.
CommandSyntax
usernameWORDpassword(8|)LINE
Parameter ParameterDescriptionParameterValue
WORD Username -
Password Passwordforusername-
(8|) Specifiesahidden
passwordwillfollow-
LINE Userpasswordstring -
CommandMode
GlobalConfiguration
Default
None
Usage
None73Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoaddausernamed
testNameandwiththepasswordof123456:
Switch#configureterminal
Switch(config)#usernametestNamepassword123456
RelatedCommands
None
2.2.3usernamesecret
CommandPurpose
Usethiscommandtoaddusernameandpasswordandthepasswordwillbe
encryptedbytheswitch.
CommandSyntax
usernameWORDsecretLINE
Parameter ParameterDescriptionParameterValue
WORD Username -
secret Specifythesecretforthe
user-
LINE Userprivilegelevel -
CommandMode
GlobalConfiguration
Default
None
Usage
None74Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoaddausernamed
testNameandwiththepasswordof123456:
Switch#configureterminal
Switch(config)#usernametestNamesecret123456
RelatedCommands
None
2.2.4usernameprivilege
CommandPurpose
Usethiscommandtosetalocaluseraccountwithprivilegelevelontheswitch.
CommandSyntax
usernameWORDprivilege<1-4>
Parameter ParameterDescriptionParameterValue
usernameWORD Username -
privilege<1-4> serprivilegelevel -
CommandMode
GlobalConfiguration
Default
None
Usage
None75Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoaddauserwith
privilegelevelof2:
Switch#configureterminal
Switch(config)#usernametestNameprivilege2
RelatedCommands
None
2.2.5usernameservice-type
CommandPurpose
Usethiscommandtosettheuserservicetype.
CommandSyntax
usernameWORDservice-type({rpc-api|ssh|telnet|web}|ftp-server}|all|none)
Parameter ParameterDescriptionParameterValue
usernameWORD Username -
service-type Userservicetype(include
rpc-api,ssh,telnet,web,
ftp-server)-
CommandMode
GlobalConfiguration
Default
Allowalluserservicetype
Usage
None76Examples
Thisisasampleshowhowtosetonlysupportrpc-apiuserservice-type:
Switch#configureterminal
Switch(config)#usernametestNameservice-typerpc-api
RelatedCommands
None
2.2.6usernameprivilegepassword
CommandPurpose
Usethiscommandtosetalocaluseraccountwithprivilegelevelandpasswordon
theswitch.
CommandSyntax
usernameWORDprivilege<1-4>password(8|)LINE
Parameter ParameterDescriptionParameterValue
WORD Username -
privilege<1-4> Userprivilegelevel -
8 SpecifiesaHIDDEN
passwordwillfollow-
LINE Userprivilegelevel -
CommandMode
GlobalConfiguration
Default
None77Usage
None
Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoaddauserwith
privilegelevelof2andpasswordof123456:
Switch#configureterminal
Switch(config)#usernametestNameprivilege2password123456
RelatedCommands
None
2.2.7re-usernamenewname
CommandPurpose
Usethiscommandtoresetusername.
CommandSyntax
re-usernameWORDnewnameWORD
Parameter ParameterDescriptionParameterValue
re-usernameWORD Oldusername -
newnameWORD Newusername -
CommandMode
GlobalConfiguration
Default
None
Usage
None78Examples
Thisisasampleoutputfromthiscommanddisplayinghowtoresetusername:
Switch#configureterminal
Switch(config)#re-usernametestNamenewnamenewname
RelatedCommands
None
2.2.8cipherdetect
CommandPurpose
Usethiscommandtosethighlevelofcipherdetect.
CommandSyntax
cipherdetect(strong(level(1|2)|)|normal|none)
Parameter ParameterDescriptionParameterValue
strong Cipherslengthmustrange
formto63andmust
containtwotypeofdigital,
normalcharandspecial
char-
stronglevel1 Cipherslengthmustrange
formto63andmust
containtwotypeofdigital,
normalcharandspecial
char-
stronglevel2 Cipherslengthmustno
lessthan8andconsistsof
upper-caseletters,lower-
caseletters,digits,and
specialcharactersandis
username-independent.-79normal Cipherslengthmustrange
form8to63-
none Disablesecuritycheck-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisisasampleoutputfromthiscommanddisplayinghowtosethighlevelofcipher
detect:
Switch#configureterminal
Switch(config)#cipherdetectstrong
RelatedCommands
None
2.3FTPCommands
2.3.1ftp
CommandPurpose
Toexchangefilesbetweenlocalandremoteftpserver,usetheftpcommandin
PrivilegedEXECmode.
CommandSyntax
ftp(mgmt-if|)host80Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
HOST IPv4,IPv6addressor
nameoftheremotehostSupportIPv4/IPv6address
orhostname
CommandMode
PrivilegedEXEC
Default
None
Usage
Usetheftpcommandtouploadanddownloadfilesfromremoteftpserver.
Examples
Thefollowingexampleshowshowtoconnectftpserverbyipv4address:
Switch#ftpmgmt-if10.10.29.160
Connectedto10.10.29.160.
220----------WelcometoPure-FTPd----------
220-Youareusernumber1of50allowed.
220-Localtimeisnow09:00.Serverport:21.
220-IPv6connectionsarealsowelcomeonthisserver.
220Youwillbedisconnectedafter15minutesofinactivity.
Name(10.10.29.160:root):root
331UserrootOK.Passwordrequired
Password:
230-Userroothasgroupaccessto:wheeldiskadmsysdaemon
230-binroot
230OK.Currentdirectoryis/root
RemotesystemtypeisUNIX.
Usingbinarymodetotransferfiles.
ftp>
Thefollowingexampleshowshowtoconnectftpserverbyipv6address:
Switch#ftpmgmt-if2001:1000::2
Connectedto2001:1000::2(2001:1000::2).
220Serv-UFTPServerv10.2ready...81Name(2001:1000::2:root):Username
331Usernameokay,needpassword.
Password:
230Userloggedin,proceed.
RemotesystemtypeisUNIX.
Usingbinarymodetotransferfiles.
ftp>
RelatedCommands
None
2.3.2ftpvrf
CommandPurpose
ToexchangefilesbetweenlocalandremoteftpserverinVPN,usetheftpvrf
commandinPrivilegedEXECmode.
CommandSyntax
ftpvrfWORD
Parameter ParameterDescriptionParameterValue
WORD VPNRouting/Forwarding
instancenameAstringwith1-15
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#ftpvrftestvrf82RelatedCommands
None
2.3.3ftppassive
CommandPurpose
TosettheFTPmodeinpassivemode,usetheftppassivecommandinGlobal
Configuration.Torestoretheconfigurationtothedefault,usenoformofthis
command.
CommandSyntax
ftppassive
noftppassive
CommandMode
GlobalConfiguration
Default
FTPworksinActivemode.
Usage
None
Examples
Thefollowingexamplesetstheftpmodetopassive:
Switch#configureterminal
Switch(config)#ftppassive
RelatedCommands
ftpusername
ftppassword832.3.4showftp
CommandPurpose
Todisplaytheftpconfigurations,useshowftpcommandinPrivilegedEXECmode.
CommandSyntax
showftp
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampledisplaystheftpconfigurations:
Switch#showftp
ftppassivemode:on
ftpusername:root
ftppassword:unencryptedabc
Switch#
RelatedCommands
ftpusername
ftppassword
2.3.5copyGFILENAMEGURLNAME
CommandPurpose
Usethiscommandtocopylocalfiletoftpserver.84CommandSyntax
copyGFILENAME(vrfVRF_NAME|)(mgmt-if|-aSRC_ADDR|-siSRC_INTF)
GURLNAME
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
vrfWORD VPNRouting/Forwarding
instanceAstringwith1-15
characters
GFILENAME Copyfromlocalfile Thefullpathandfile
nameupto255
characters
GURLNAME Copytolocalfile Thefullpathandfile
nameupto255
characters
-aSRC_ADDR CopywithassignedIP-
-siSRC_INTF Copywithassigned
Interface-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopylocalfiletoftp
server:85Switch#copyflash:/test.cftp:/username:password@1.1.1.1:21/running-config
RelatedCommands
None
2.3.6copyGURLNAMEGFILENAME
CommandPurpose
Usethiscommandtocopyfilefromftpservertolocal.
CommandSyntax
copy(vrfVRF_NAME|)(mgmt-if|-aSRC_ADDR|-siSRC_INTF)GURLNAME
GFILENAME
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
vrfWORD VPNRouting/Forwarding
instanceAstringwith1-15
characters
GURLNAME CopyfromURL Thefullpathandfile
nameupto255
characters
GFILENAME Copytolocalfile Thefullpathandfile
nameupto255
characters
-aSRC_ADDR CopywithassignedIP-
-siSRC_INTF Copywithassigned
Interface-
CommandMode
PrivilegedEXEC86Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopyfilefromftpserver
tolocal:
Switch#copyftp://username:password@1.1.1.1:21/test.cflash:test1.c
getfilefromftp://username:password@1.1.1.1:21/test.c
.
Received225bytesin0.3seconds
RelatedCommands
None
2.4FTPserverCommands
2.4.1ftpserverenable
CommandPurpose
ToenableFTPserveronswitch.
CommandSyntax
ftpserver(mgmt-if|)enable
noftpserverenable
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -87CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
RelatedCommands
None
2.4.2ftpserverport
CommandPurpose
ToconfigFTPserverlistenport.Torestorethedefaultvalue,usethenoformofthis
command.
CommandSyntax
ftpserverportPORTNUM
noftpserverport
Parameter ParameterDescriptionParameterValue
portnum (1025-65535)
CommandMode
GlobalConfiguration88Default
Defaultvalueis21
Usage
None
Examples
ThefollowingexamplesetFTPserverportis10000:
Switch#configureterminal
Switch#ftpserverport10000
RelatedCommands
None
2.4.3ftpservertime-out
CommandPurpose
ToconfigFTPserveridle-time.Torestorethedefaultvalue,usethenoformofthis
command.
CommandSyntax
ftpservertime-outMINUTES
noftpservertime-out
Parameter ParameterDescriptionParameterValue
minutes (1-1000)mins
CommandMode
GlobalConfiguration89Default
Defaultidle-timeis15mins
Usage
None
Examples
ThefollowingexamplesetFTPserveridle-timeis5mins:
Switch#configureterminal
Switch#ftpservertime-out5
RelatedCommands
ftppassive
2.4.4ftpserversourceaddress
CommandPurpose
ToconfigurethesourceaddressofFTPserveronyourswitch,usetheFTPserver
sourceaddresscommandinGlobalConfiguration.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ftpserversourceaddress(vrfNAME|)IP_ADDR
noftpserversourceaddress
Parameter ParameterDescriptionParameterValue
vrfNAME Specifyavrftoprovide
FTPserverAstringwith1-15
characters
IP_ADDR ConfigureIPaddressfor
ftpserverworkinginbandIPv4Address90CommandMode
GlobalConfiguration
Default
None
Usage
YoucanusethiscommandtomodifytheaddresswhichFTPserverworkson,and
specifyavrftoprovideFTPserver.Thesourceaddresscanonlybe0.0.0.0or
loopbackinterfacesaddress,0.0.0.0indicatesthattheSSHserveraddressisnot
specified.
Examples
ThefollowingexampleshowshowtospecifyFTPserversourceaddress:
Switch#configureterminal
Switch(config)#ftpserversourceaddressvrfvpn110.10.10.1
RelatedCommands
None
2.5TFTPCommands
2.5.1copyGFILENAMEGURLNAME
CommandPurpose
Usethiscommandtocopylocalfiletotftpserver.
CommandSyntax
copyGFILENAME(vrfVRF_NAME|)(mgmt-if|-aSRC_ADDR|-siSRC_INTF)
GURLNAME
Parameter ParameterDescriptionParameterValue91mgmt-if Managementport -
vrfWORD VPNRouting/Forwarding
instanceAstringwith1-15
characters
GFILENAME Copyfromlocalfile Thefullpathandfile
nameupto255
characters
GURLNAME Copytolocalfile Thefullpathandfile
nameupto255
characters
-aSRC_ADDR CopywithassignedIP-
-siSRC_INTF Copywithassigned
Interface-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopylocalfiletotftp
server:
Switch#copyflash:/test.ctftp://1.1.1.1/running-config
RelatedCommands
None922.5.2copyGURLNAMEGFILENAME
CommandPurpose
Usethiscommandtocopyfilefromtftpservertolocal.
CommandSyntax
copy(vrfVRF_NAME|)(mgmt-if|-aSRC_ADDR|-siSRC_INTF)GURLNAME
GFILENAME
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
vrfWORD VPNRouting/Forwarding
instanceAstringwith1-15
characters
GURLNAME CopyfromURL Thefullpathandfile
nameupto255
characters
GFILENAME Copytolocalfile Thefullpathandfile
nameupto255
characters
-aSRC_ADDR CopywithassignedIP-
-siSRC_INTF Copywithassigned
Interface-
CommandMode
PrivilegedEXEC
Default
None
Usage
None93Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopyfilefromtftpserver
tolocal:
Switch#copytftp://1.1.1.1/test.cflash:test1.c
getfilefromtftp://1.1.1.1/test.c
.
Received225bytesin0.3seconds
RelatedCommands
None
2.5.3copyrunning-configmgmt-if
CommandPurpose
Usethiscommandtocopyrunning-configtotftpserver.
CommandSyntax
copyrunning-config(mgmt-if|)GURLNAME
Parameter ParameterDescriptionParameterValue
startup-config Copyfromcurrentsystem
configuration-
mgmt-if Managementport -
GURLNAME CopytoURL Thefullpathandfile
nameupto255
characters
CommandMode
PrivilegedEXEC
Default
None94Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopyrunning-configto
tftpserver:
Switch#copyrunning-configtftp://1.1.1.1/running-config
Buildingconfiguration
sendfiletotftp://1.1.1.1/running-config

Sent40198bytesin8.3seconds
RelatedCommands
None
2.5.4copymgmt-ifstartup-config
CommandPurpose
Usethiscommandtocopystartup-configfromtftpserver.
CommandSyntax
copy(mgmt-if|)GURLNAMEstartup-config
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
GURLNAME CopyfromURL Thefullpathandfile
nameupto255
characters
startup-config Copytostartupsystem
configuration-
CommandMode
PrivilegedEXEC95Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopystartup-config
fromtftpserver:
Switch#copytftp://1.1.1.1/startup-configstartup-config
getfilefromtftp://1.1.1.1/startup-config
..
Sent32252bytesin6.4seconds
RelatedCommands
None
2.6scpCommands
2.6.1copyGFILENAMEGURLNAME
CommandPurpose
Usethiscommandtocopylocalfiletoscpserver.
CommandSyntax
copyGFILENAME(mgmt-if|)GURLNAME
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
GFILENAME Copyfromlocalfile Thefullpathandfile
nameupto255
characters96GURLNAME Copytolocalfile Thefullpathandfile
nameupto255
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopylocalfiletoscp
server:
Switch#copyflash:/test.cscp://1.1.1.1/running-config
RelatedCommands
None
2.6.2copyGURLNAMEGFILENAME
CommandPurpose
Usethiscommandtocopyfilefromscpservertolocal.
CommandSyntax
copy(mgmt-if|)GURLNAMEGFILENAME
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -97GURLNAME CopyfromURL Thefullpathandfile
nameupto255
characters
GFILENAME Copytolocalfile Thefullpathandfile
nameupto255
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopyfilefromscp
servertolocal:
Switch#copyscp://1.1.1.1/test.cflash:test1.c
getfilefromscp://1.1.1.1/test.c
.
Received225bytesin0.3seconds
RelatedCommands
None
2.6.3copyrunning-configmgmt-if
CommandPurpose
Usethiscommandtocopyrunning-configtoscpserver.98CommandSyntax
copyrunning-config(mgmt-if|)GURLNAME
Parameter ParameterDescriptionParameterValue
startup-config Copyfromcurrentsystem
configuration-
mgmt-if Managementport -
GURLNAME CopytoURL Thefullpathandfile
nameupto255
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopyrunning-configto
scpserver:
Switch#copyrunning-configmgmt-ifscp://1.1.1.1/running-config
Buildingconfiguration
sendfiletoscp://1.1.1.1/running-config

Sent40198bytesin8.3seconds
RelatedCommands
None992.6.4copymgmt-ifstartup-config
CommandPurpose
Usethiscommandtocopystartup-configfromscpserver.
CommandSyntax
copy(mgmt-if|)GURLNAMEstartup-config
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
GURLNAME CopyfromURL Thefullpathandfile
nameupto255
characters
startup-config Copytostartupsystem
configuration-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromthecommanddisplayinghowtocopystartup-config
fromscpserver:
Switch#copyscp://1.1.1.1/startup-configstartup-config
getfilefromscp://1.1.1.1/startup-config
..
Sent32252bytesin6.4seconds100RelatedCommands
None
2.7TelnetCommands
2.7.1telnet
CommandPurpose
Usethiscommandfromtheswitchtoaccesstheotherdevicesinthenetwork.
CommandSyntax
telnet(-aSRC_ADDR)(vrfWORD|mgmt-if)HOST(PORT|)
Parameter ParameterDescriptionParameterValue
-aSRC_ADDR TelnetwithassignedIP-
vrfWORD VPNRouting/Forwarding
instanceAstringwith1-15
characters
mgmt-if Managementport -
HOST IPv4,IPv6addressor
nameoftheremotehostSupportIPv4/IPv6address
orhostname
PORT TCPPortnumber 1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
None101Examples
ThisexampleshowshowtoTelnetfromtheswitchtoaremotehost:
Switch#telnetmgmt-if10.10.29.247
Enteringcharactermode
Escapecharacteris'^]'.
TestOSVersion2.3(62)fcs
Switch#telnet2001:1000::1
Enteringcharactermode
Escapecharacteris'^]'.
DUT1#
RelatedCommands
None
2.7.2iptelnetserversourceaddress
CommandPurpose
Toconfigurethesourceaddressoftelnetserveronyourswitch,usethetelnetserver
sourceaddresscommandinGlobalConfiguration.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
iptelnetserversourceaddress(vrfNAME|)IP_ADDR
noiptelnetserversourceaddress
Parameter ParameterDescriptionParameterValue
vrfNAME Specifyavrftoprovide
telnetserverAstringwith1-15
characters
IP_ADDR ConfigureIPaddressfor
telnetserverworking
inbandIPv4Address
CommandMode
GlobalConfiguration102Default
None
Usage
Youcanusethiscommandtomodifytheaddresswhichtelnetserverworkson,and
specifyavrftoprovidetelnetserver.Thesourceaddresscanonlybe0.0.0.0or
loopbackinterfacesaddress,0.0.0.0indicatesthattheSSHserveraddressisnot
specified.
Examples
Thefollowingexampleshowshowtospecifytelnetserversourceaddress:
Switch#configureterminal
Switch(config)#iptelnetserversourceaddressvrfvpn110.10.10.1
RelatedCommands
None
2.7.3iptelnetserversourceport
CommandPurpose
ToconfiguretheTCPportfortelnetserverworkinginbandonyourswitch,usethe
telnetserversourcecommandinGlobalConfiguration.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
iptelnetserversourceportNUMBER
noiptelnetserversourceport
Parameter ParameterDescriptionParameterValue
portNUMBER ConfigureTCPportfor
telnetserverworking
inband1025-65535103CommandMode
GlobalConfiguration
Default
None
Usage
TheCLIofnotelnetserversourceportwillconfigureTCPportfortelnetserver
workinginbandwithdefaultvalueof23.
Examples
ThefollowingexampleshowshowtosettheTCPportfortelnetserverworking
inbandontheswitch:
Switch#configureterminal
Switch(config)#iptelnetserversourceport2323
RelatedCommands
None
2.7.4iptelnetserversourcemgmt-ifport
CommandPurpose
ToconfiguretheTCPportfortelnetserverworkingoutbandonyourswitch,usethe
telnetserversourcecommandinGlobalConfiguration.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
iptelnetserversourcemgmt-ifportNUMBER
noiptelnetserversourcemgmt-ifport
Parameter ParameterDescriptionParameterValue104mgmt-ifportNUMBERConfigureTCPportfor
telnetserverworking
outband1025-65535
CommandMode
GlobalConfiguration
Default
None
Usage
TheCLIofnotelnetserversourcmgmt-ifportwillconfigureTCPportfortelnet
serverworkingoutbandwithdefaultvalueof23.
Examples
ThefollowingexampleshowshowtosettheTCPportfortelnetserverworking
outbandontheswitch:
Switch#configureterminal
Switch(config)#iptelnetserversourcemgmt-ifport2323
RelatedCommands
None
2.8SSHCommands
2.8.1ipsshserver
CommandPurpose
ToenableSSHservice,useipsshserverenablecommandinGlobalConfiguration.
TodisableSSHservice,useipsshserverdisablecommand.
CommandSyntax
ipsshserver(enable|disable)105Parameter ParameterDescriptionParameterValue
enable TurnontheSSHservice-
disable TurnofftheSSHservice-
CommandMode
GlobalConfiguration
Default
SSHserviceisenabled.
Usage
None
Examples
ThefollowingexampleenablestheSSHserviceonyourswitch:
Switch#configureterminal
Switch(config)#ipsshserverenable
RelatedCommands
showipsshserverstatus
2.8.2ipsshserverauthentication-retries
CommandPurpose
ToconfigureSecureShell(SSH)authenticationretrytimesonyourswitch,usetheip
sshserverauthentication-retriescommandinGlobalConfiguration.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
ipsshserverauthentication-retriesCOUNT
noipsshserverauthentication-retries106Parameter ParameterDescriptionParameterValue
COUNT Thenumberofretries,with
amaximumof6
authenticationretries1-6
CommandMode
GlobalConfiguration
Default
Thedefaultis6.
Usage
None
Examples
ThefollowingexamplesconfigureSSHauthenticationretrytimesonyourswitch:
Switch#configureterminal
Switch(config)#ipsshserverauthentication-retries3
RelatedCommands
showipsshserverstatus
2.8.3ipsshserverauthentication-timeout
CommandPurpose
ToconfigureSecureShell(SSH)authenticationtimeoutonyourswitch,usetheip
sshserverauthentication-timeoutcommandinGlobalConfiguration.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
ipsshserverauthentication-timeoutSECONDS
noipsshserverauthentication-timeout107Parameter ParameterDescriptionParameterValue
SECONDS Thenumberofseconds
untiltimeoutdisconnects1-120seconds
CommandMode
GlobalConfiguration
Default
Thedefaultis120seconds.
Usage
None
Examples
ThefollowingexamplesconfigureSSHauthenticationtimeoutonyourswitch:
Switch#configureterminal
Switch(config)#ipsshserverauthentication-timeout100
RelatedCommands
showipsshserverstatus
2.8.4ipsshserverauthentication-type
CommandPurpose
ToconfigureSecureShell(SSH)authenticationtypeonyourswitch,usetheipssh
serverauthentication-typecommandinGlobalConfiguration.Torestorethedefault
value,usethenoformofthiscommand.
CommandSyntax
ipsshserverauthentication-type(all|{password|public-key|rsa})
noipsshserverauthentication-type108Parameter ParameterDescriptionParameterValue
all Enableallauthentication
type-
password Enablepassword
authentication-
public-key EnableSSHv2publickey
authentication-
rsa EnableSSHv1rsa
authentication-
CommandMode
GlobalConfiguration
Default
Thedefaultauthenticationtypeisall.
Usage
None
Examples
ThefollowingexamplesconfigureSSHauthenticationtypeontheswitch:
Switch#configureterminal
Switch(config)#ipsshserverauthentication-typepassword
RelatedCommands
showipsshserverstatus1092.8.5ipsshserverhost-keyrsakey
CommandPurpose
ToconfigureSecureShell(SSH)host-keyonyourswitch,usetheipsshserverhost-
keyrsakeycommandinGlobalConfiguration.Torestorethedefaultvalue,usethe
noformofthiscommand.
CommandSyntax
ipsshserverhost-keyrsakeyKEYNAME
noipsshserverhost-keyrsa
Parameter ParameterDescriptionParameterValue
KEYNAME ThekeyvalueforhostkeyUpto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
Host-keyisusedtocombiningpublickeytogenerateasession.WhenSSH
login,modifinghost-keycancauseconnectionclosed.
Examples
ThefollowingexamplesconfigureSSHhostkeyonyourswitch:
Switch#configureterminal
Switch(config)#ipsshserverhost-keyrsakeyKEY1
RelatedCommands
showipsshserverstatus1102.8.6ipsshserverrekey-interval
CommandPurpose
ToconfigureSecureShell(SSH)rekeyintervalonyourswitch,usetheipsshserver
rekey-intervalcommandinGlobalConfiguration.Torestorethedefaultvalue,usethe
noformofthiscommand.
CommandSyntax
ipsshserverrekey-intervalMINUTE
noipsshserverrekey-interval
Parameter ParameterDescriptionParameterValue
MINUTE Therekeyintervalin
minutes1-1440minutes
CommandMode
GlobalConfiguration
Default
Thedefaultintervalis60minutes.
Usage
None
Examples
ThefollowingexamplesconfigureSSHrekeyintervalonyourswitch:
Switch#configureterminal
Switch(config)#ipsshserverrekey-interval30
RelatedCommands
showipsshserverstatus1112.8.7ipsshserverversion
CommandPurpose
ToconfigureSecureShell(SSH)versiononyourswitch,usetheipsshserver
versioncommandinGlobalConfiguration.Torestorethedefaultvalue,usetheno
formofthiscommand.
CommandSyntax
ipsshserverversion(1|2|all)
noipsshserverversion
Parameter ParameterDescriptionParameterValue
1 SwitchrunsonlySSH
Version1-
2 SwitchrunsonlySSH
Version2-
all Version1andVersion2
arebothsupported-
CommandMode
GlobalConfiguration
Default
ThedefaultSSHversionis2.
Usage
Youcanusethiscommandwiththe2keywordtoensurethatyourswitchwillnot
inadvertentlyestablishaweakerSSHVersion1connection.
Examples
ThefollowingexampleshowsthatonlySSHVersion1supportisconfigured:112Switch#configureterminal
Switch(config)#ipsshserverversion1
RelatedCommands
showipsshserverstatus
2.8.8ipsshserversourceaddress
CommandPurpose
ToconfigurethesourceaddressofSecureShell(SSH)serveronyourswitch,use
theipsshserversourcecommandinGlobalConfiguration.Torestorethedefault
value,usethenoformofthiscommand.
CommandSyntax
ipsshserversourceaddress{vrfNAME|}IP_ADDR
noipsshserversourceaddress
Parameter ParameterDescriptionParameterValue
vrfNAME Specifyavrftoprovide
SSHserverUpto15characters
IP_ADDR ConfigureIPaddressfor
SSHserverworking
inbandIPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
YoucanusethiscommandtomodifytheaddresswhichSSHserverworkson,and
specifyavrftoprovideSSHserver.Thesourceaddresscanonlybe0.0.0.0or113loopbackinterfacesaddress,0.0.0.0indicatesthattheSSHserveraddressisnot
specified.
Examples
ThefollowingexampleshowshowtosetSSHserverinbindaddress:
Switch#configureterminal
Switch(config)#ipsshserversourceaddress10.10.10.1
RelatedCommands
ipsshserver
2.8.9ipsshserversourceport
CommandPurpose
ToconfiguretheTCPportforSSHserverworkinginbandonyourswitch,usetheip
sshserversourcecommandinGlobalConfiguration.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ipsshserversourceportNUMBER
noipsshserversourceport
Parameter ParameterDescriptionParameterValue
portNUMBER ConfigureTCPportfor
SSHserverworking
inband1025-65535
CommandMode
GlobalConfiguration
Default
None114Usage
TheCLIofnoipsshserversourceportwillconfigureTCPportforSSHserver
workinginbandwithdefaultvalueof22.
Examples
Thefollowingexampleshowsthespecialportisconfigured:
Switch#configureterminal
Switch(config)#ipsshserversourceport2222
RelatedCommands
ipsshserver
2.8.10ipsshserversourcemgmt-ifport
CommandPurpose
ToconfiguretheTCPportforSSHserverworkingoutbandonyourswitch,usetheip
sshserversourcecommandinGlobalConfiguration.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ipsshserversourcemgmt-ifportNUMBER
noipsshserversourcemgmt-ifport
Parameter ParameterDescriptionParameterValue
mgmt-ifportNUMBERConfigureTCPportfor
SSHserverworking
outband1025-65535
CommandMode
GlobalConfiguration115Default
None
Usage
TheCLIofnoipsshserversourcemgmt-ifportwillconfigureTCPportforSSH
serverworkingoutbandwithdefaultvalueof22.
Examples
Thefollowingexampleshowsthespecialportisconfigured:
Switch#configureterminal
Switch(config)#ipsshserversourcemgmt-ifport2222
RelatedCommands
ipsshserver
2.8.11showipsshserversession
CommandPurpose
TodisplaythesessioninformationforSecureShell(SSH),usetheshowipsshserver
sessioncommandinPrivilegedEXECmode.
CommandSyntax
showipsshserversession
CommandMode
PrivilegedEXEC
Default
None
Usage
None116Examples
ThefollowingexampleshowsthecurrentSSHsessions:
Switch#showipsshserversession
VersionEncryptionHmacUserIP State
=================================================================
2.0aes128-cbchmac-md5abc10.10.29.22Sessionstarted
RelatedCommands
showipsshserverstatus
2.8.12showipsshserverstatus
CommandPurpose
TodisplaytheversionandconfigurationdataforSecureShell(SSH),usetheshowip
sshserverstatuscommandinPrivilegedEXECmode.
CommandSyntax
showipsshserverstatus
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowsthecurrentSSHconfigurations:
Switch#showipsshserverstatus
SSHserverenabled117Version:1.99
Authenticationtimeout:33second(s)
Authenticationretries:6time(s)
Serverkeylifetime:60minute(s)
Authenticationtype:passwordpublic-key
RelatedCommands
showipsshserversession
2.8.13rsakeygenerate
CommandPurpose
Tocreateakeybysystem,usethersakeygeneratecommandinGlobal
Configuration.
CommandSyntax
rsakeyKEYNAMEgenerate
Parameter ParameterDescriptionParameterValue
KEYNAME Thenameofthekey Upto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
Usethersakeycommandtocreateakeybysystem.
Examples
ThefollowingexamplecreatesakeynamedKEY1:
Switch#configureterminal
Switch(config)#rsakeyKEY1generate118GeneratingRSAprivatekey,1024bitlongmodulus
Pleasewaitingforamoment:done!
Publicexponentis65537(0x10001)
GenerateRSAkeysuccessfully
Switch(config)#
RelatedCommands
showrsakeys
2.8.14rsakey
CommandPurpose
Tocreateakey,usethersakeycommandinGlobalConfiguration.
CommandSyntax
rsakeyKEYNAME
Parameter ParameterDescriptionParameterValue
KEYNAME Thenameofthekey Upto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
Usethersakeycommandtocreateakey.
Examples
ThefollowingexamplecreatesakeynamedKEY1:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#119RelatedCommands
showrsakeys
2.8.15keyformat
CommandPurpose
Tospecifythekeyformat,usethekeyformatcommandinRSAkeyconfiguration
mode.
CommandSyntax
keyformat(der|pem)
Parameter ParameterDescriptionParameterValue
der Theformatisder -
pem Theformatispem -
CommandMode
RsaKeyConfiguration
Default
ThedefaultkeyformatisDER.
Usage
None
Examples
ThefollowingexamplespecifythekeyformatofKEY1asder:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#keyformatder120RelatedCommands
rsakey
2.8.16keystringend
CommandPurpose
ToexitthersakeyconfigurationmodetoGlobalConfigurationandapplyallrsakey
configurations,usethekeystringendcommandinRSAkeyconfigurationmode.
CommandSyntax
keystringend
CommandMode
RsaKeyConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowsexitthersakeyconfigurationmode:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#keystringend
Switch(config)#
RelatedCommands
rsakey1212.8.17keytype
CommandPurpose
Tospecifythekeytype,usethekeytypecommandinRSAkeyconfigurationmode.
CommandSyntax
keytype(public|private)
Parameter ParameterDescriptionParameterValue
public Specifythekeyasapublic
key-
private Specifythekeyasa
privatekey-
CommandMode
RsaKeyConfiguration
Default
None
Usage
None
Examples
ThefollowingexamplespecifiesthekeytypeofKEY1aspublickey:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#keytypepublic
RelatedCommands
rsakey1222.8.18reset
CommandPurpose
Toclearallkeyconfigurations,usetheresetcommandinRSAkeyconfiguration
mode.
CommandSyntax
reset
CommandMode
RsaKeyConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowstoclearallconfigurationsforthekeyKEY1:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#reset
RelatedCommands
rsakey
2.8.19validate
CommandPurpose
Tocheckthevalidationofthekeystrings,usethevalidatecommandinRSAkey
configurationmode.123CommandSyntax
validate
CommandMode
RsaKeyConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowstovalidatekeystringsofthekeyKEY1:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#validate
RelatedCommands
rsakey
2.8.20KEYLINE
CommandPurpose
Toaddkeystringsfromthescreendirectly,typeanystringsinRSAkeyconfiguration
modeexceptthekeywordsinthismode.
CommandSyntax
KEYLINE
Parameter ParameterDescriptionParameterValue
KEYLINE keyline keylinestring124CommandMode
RsaKeyConfiguration
Default
None
Usage
Typeanykeystring.
Examples
ThefollowingexampleshowstotypeakeystringofthekeyKEY1:
Switch#configureterminal
Switch(config)#rsakeyKEY1
Switch(config-rsa-key)#003020174A7D385B1234EF29335FC973
Switch(config-rsa-key)#2DD50A37C4F4B0FD9DADE748429618D5
RelatedCommands
validate
2.8.21rsakeyexport
CommandPurpose
Toexportthekeyfiletoaspecifieddestination,usethersakeyexportcommandin
GlobalConfiguration.
CommandSyntax
rsakeyKEYNAMEexporturlDEST_FILE(public|private)(der|der-hex|pem|
ssh1|ssh2)
Parameter ParameterDescriptionParameterValue
KEYNAME Specifythekeynameto
displayUpto32characters125DEST_FILE Thedestinationfilepath
andnameThefullpathandfile
nameupto255
characters
public Specifythekeyasapublic
key-
private Specifythekeyasa
privatekey-
der DERformat -
der-hex DERHEXformat -
pem PEMformat -
ssh1 SSHv1format -
ssh2 Specifythekeyformat-
CommandMode
GlobalConfiguration
Default
None
Usage
Usethersakeygeneratecommandtogenerateakey.
Examples
ThefollowingexampleshowstoexportthekeyKEY1toflashasapublickey:
Switch#configureterminal
Switch(config)#rsakeyKEY1exporturlflash:/key1.pubpublicssh2
ThefollowingexampleshowstoexportthekeyKEY2toflashasaprivatekey:
Switch#configureterminal
Switch(config)#rsakeyKEY2exporturlflash:/key1privatessh1126RelatedCommands
rsakeygenerate
rsakeyimport
2.8.22rsakeyimport
CommandPurpose
Toimportthekeyfilefromaspecifiedsource,usethersakeyimportcommandin
GlobalConfiguration.
CommandSyntax
rsakeyKEYNAMEimporturlSRC_FILE(public|private)(der|der-hex|pem|
ssh1|ssh2)
Parameter ParameterDescriptionParameterValue
KEYNAME Specifythekeynameto
displayUpto32characters
SRC_FILE Thedestinationfilepath
andnameThefullpathandfile
nameupto255
characters
public Specifythekeyasapublic
key-
private Specifythekeyasa
privatekey-
der DERformat -
der-hex DERHEXformat -
pem PEMformat -
ssh1 SSHv1format -
ssh2 Specifythekeyformat-127CommandMode
GlobalConfiguration
Default
None
Usage
Usethersakeytogeneratecommandtogenerateakey.
Examples
ThefollowingexampleshowstoimportthekeyKEY1toflashasapublickey:
Switch#configureterminal
Switch(config)#rsakeyKEY1importurlflash:/key1.pubpublicssh2
ThefollowingexampleshowstoimportthekeyKEY2toflashasaprivatekey:
Switch#configureterminal
Switch(config)#rsakeyKEY2importurlflash:/key1privatessh1
RelatedCommands
rsakeygenerate
rsakeyexport
2.8.23showrsakey
CommandPurpose
Todisplaythedetailsofthekeys,usetheshowrsakeycommandinPrivilegedEXEC
mode.
CommandSyntax
showrsakeyKEYNAME
Parameter ParameterDescriptionParameterValue128KEYNAME Specifythekeynameto
displayUpto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampledisplaysthedetailedinformationofthekeynamedKEY1:
Switch#showrsakeyKEY1
RSAkeyinformation:
============================================================
Name:KEY1
Type:private
Modulus:1024bit
Usagecount:0
PrivatekeyDERcode:
30820258
0201
00
028180
9B3E97266405BD54692F172A901F3879C947366E5703D282AA31707F214D38C9
RelatedCommands
showrsakeys
2.8.24showrsakeys
CommandPurpose
Todisplaythebriefinformationofallthekeys,usetheshowrsakeyscommandin
PrivilegedEXECmode.129CommandSyntax
showrsakeys
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethersakeygeneratecommandtogenerateakey.
Examples
Thefollowingexampledisplaysthebriefinformationofthekeys:
Switch#showrsakeys
Name TypeUsageModulus
============================================================
key1 private01024
key2 public01024
RelatedCommands
showrsakey
2.8.25ssh
CommandPurpose
ToconnecttotheremoteSSHserver,usethesshcommandinPrivilegedEXEC
mode.
CommandSyntax
ssh-lNAME({-iKEYNAME|-pDPORT|-v(1|2)|-c{3des|des|3des-cbc|
aes128-cbc|aes192-cbc|aes256-cbc}|-m{hmac-md5-128|hmac-md5-96|130hmac-sha1-160|hmac-sha1-96}|-onumberofpasswordpromptsNUM|-aA.B.C.D}
|)(mgmt-if|)(A.B.C.D|X:X::X:X|HOST)
Parameter ParameterDescriptionParameterValue
-lNAME Loginusingthisuser
nameUpto31characters
-iKEYNAME SpecifythenameofRSA
privatekeyUpto32characters
-pDPORT Specifytheremoteport1-65535
-v(1|2) SpecifySSHprotocol
version-
-c Selectencryption
algorithm-
3des TripleDES(SSHv1only)-
des DES(SSHv1only) -
3des-cbc TripleDES(SSHv2only)-
aes128-cbc AES128bits(SSHv2only)-
aes192-cbc AES192bits(SSHv2only)-
aes256-cbc AES256bits(SSHv2only)-
-m SelectHMACalgorithm-
hmac-md5-128 MD5basedHMAC(128
bits,SSHv2only)-
hmac-md5-96 MD5basedHMAC(96
bits,SSHv2only)-
hmac-sha1-160 SHA1basedHMAC(160
bits,SSHv2only)-
hmac-sha1-96 SHA1basedHMAC(96
bits,SSHv2only)-131-onumberof-
passwordpromptsNUMSpecifynumberof
passwordpromptswithTherangein[1,7]
-aA.B.C.D SshwithassignedIP IPv4Address
mgmt-if UseManagementport-
A.B.C.D SpecifyIPaddressof
remotesystemIPv4Address
X:X::X:X SpecifyIPv6addressof
remotesystemIPv6Address
HOST Specifyhostnameof
remotesystem-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampledisplaystheusageofthiscommand:
Switch#ssh-laaa-v21.1.1.1
aaa@1.1.1.1'spassword:
Switch#
RelatedCommands
ipsshserver1322.9Time&TimezoneCommands
2.9.1clocksetdatetime
CommandPurpose
UsethiscommandtosetsystemcurrentdateandtimeontheSwitch.
CommandSyntax
clocksetdatetimeHH:MM:SSMONTHDAYYEAR
Parameter ParameterDescriptionParameterValue
HH:MM:SS Specifythetimeinhours
(24-hourformat),minutes,
andseconds.Thetime
specifiedisrelativetothe
configuredtimezoneHH:MM:SSin24-hour
format.
MONTH Specifythemonthby
nameShouldbeinrange1to12
DAY Specifythedaybydatein
themonthShouldbeinrange1to31
YEAR Specifytheyear Shouldbeinrange1993to
2035
CommandMode
GlobalConfiguration
Default
ThedefaulttimeisbasedfromUTC.
Usage
Ifnoothersourceoftimeisavailable,youcanmanuallyconfigurethetimeanddate
afterthesystemisrestarted.Thetimeremainsaccurateuntilthenextsystemrestart.133Werecommendthatyouusemanualconfigurationonlyasalastresort.Ifyouhave
anoutsidesourcetowhichtheswitchcansynchronize,youdonotneedtomanually
setthesystemclock.
Examples
Thisexampleshowshowtomanuallysetthesystemclockto132p.m.onJuly23,
2014:
Switch#configureterminal
Switch(config)#clockset13:32:002372014
RelatedCommands
showclock
2.9.2clocksettimezone
CommandPurpose
UsethiscommandtosetthetimezoneontheSwitch.
TorestoretothedefaulttimeofUTC,usethenoformofthiscommand.
CommandSyntax
clocksettimezoneZONE(add|minus)hours-offset[minutes-offset][seconds-
offset]
noclocksettimezone
Parameter ParameterDescriptionParameterValue
ZONE Specifythezonenamethelengthshouldbe[3,
32),andonly[a-zA-Z_]is
supported,andthefirst
andlastcharactermustbe
alphabet.
add Specifythetimeoffsetis
positivefromUTC-134minus Specifythetimeoffsetis
negativefromUTC-
HOUR_OFFSET Specifythetimeoffsetin
hours0-18
MINUTES_OFFSET [optional]Specifythetime
offsetinminutes,should
beinrange0to590-59
SECCONDS_OFFSET[optional]Specifythetime
offsetinseconds0-59
CommandMode
GlobalConfiguration
Default
ThedefaulttimezoneshouldbeUTC.
Usage
None
Examples
ThefollowingexamplesetstheAtlanticCanadatimezoneis3.5hourslessthanUTC:
Switch#configureterminal
Switch(config)#clocksettimezoneCanadaminus330
ThefollowingexamplesetsthetimezonenamedZZZis5hoursfasterthanUTC:
Switch#configureterminal
Switch(config)#clocksettimezoneZZZadd5
RelatedCommands
showclock(detail)1352.9.3clocksetsummer-time
CommandPurpose
Usethiscommandtosetsummertime(daylightsavingtime)inareaswhereitstarts
andendsonaparticulardayeachyear(recurring)oronspecifiedyear(date).
TorestoretothedefaulttimeofUTC,usethenoformofthiscommand.
CommandSyntax
clocksetsummer-timeZONErecurringstart-timeend-timeoffset
clocksetsummer-timeZONEdatestart-timeend-timeoffset
noclocksetsummer-time
Parameter ParameterDescriptionParameterValue
ZONE Specifythesummerzone
nameThelengthshouldbe[3,
32),andonly[a-zA-Z_]is
supported,andthefirst
andlastcharactermustbe
alphabet.
recurring Specifythatsummertime
startsandendsona
particulardayoftheweek
eachyear-
date Specifythatsummertime
startsandendsona
particulardayofthe
specifiedyear-136START_TIME Specifythestarttimeof
summertimeForrecurringsummer
time,theformatshouldbe
month,day,hh:mm:ssor
(first|second|third|
fourth|last)DAY<1-12>
HH:MM:SS,whilefordate
summertime,theformat
shouldbemonth,day,
year,hh:mm:ss
END_TIME Specifytheendtimeof
summertimeForrecurringsummer
time,theformatshouldbe
month,day,hh:mm:ssor
(first|second|third|
fourth|last)DAY<1-12>
HH:MM:SS,whilefordate
summertime,theformat
shouldbemonth,day,
year,hh:mm:ss
OFFSET Foroffset,specifythe
numberofminutestoadd
duringsummertime.The
defaultis60.1-120minutes
CommandMode
GlobalConfiguration
Default
Summertimeshouldbedisabledbydefault.
Usage
Thefirstpartoftheclocksummer-timeglobalconfigurationcommandspecifieswhen
summertimebegins,andthesecondpartspecifieswhenitends.Alltimesare
relativetothelocaltimezone.Thestarttimeisrelativetostandardtime.Theend137timeisrelativetosummertime.Ifthestartingmonthisaftertheendingmonth,the
systemassumesthatyouareinthesouthernhemisphere.
Examples
Thisexampleshowshowtospecifythatsummertimestartsonjune1stat0200and
endsontheOctober31at0200:
Switch#configureterminal
Switch(config)#clocksetsummer-timestimerecurring6102:00:00103102:00:00120
ThisexampleshowshowtospecifythatsummertimestartsonMarchthesecond
Wednesdayat0200andendsontheAugustthelastFridayat0100:
Switch#configureterminal
Switch(config)#clocksetsummer-timestimerecurringsecondWed302:0:0lastFri801:0:060
RelatedCommands
showclock(detail)
2.9.4showclock
CommandPurpose
Usethiscommandtodisplaythecurrenttimeanddateconfiguration.
CommandSyntax
showclock(detail|)
Parameter ParameterDescriptionParameterValue
detail Displaytheconfigured
timezoneandsummer
timeinformationinaddition
tocurrentdateandtime-
CommandMode
PrivilegedEXEC138Default
None
Usage
None
Examples
Thisexampledisplayscurrenttimeanddateindetail:
Switch#showclockdetail
10:43:00beijingFriOct252013
Timezone:(GMT+08:00:00)beijing
RelatedCommands
showclock
2.9.5showtimezones
CommandPurpose
Usethiscommandtodisplayallthetimezonesinworld.
CommandSyntax
showtimezons
CommandMode
PrivilegedEXEC
Default
None
Usage
None139Examples
Thisexampledisplaysallthecurrenttimezones:
Switch#showtimezones
(GMT+00:06:04)Europe/Andorra
(GMT+03:41:12)Asia/Dubai
(GMT+04:36:48)Asia/Kabul
(GMT-04:07:12)America/Antigua
(GMT-04:12:16)America/Anguilla
(GMT+01:19:20)Europe/Tirane
(GMT+02:58:00)Asia/Yerevan
(GMT-04:36:00)America/Curacao
(GMT+00:52:56)Africa/Luanda
(GMT+11:06:24)Antarctica/McMurdoMcMurdoStation,RossIsland
============================================================
(GMT+00:00:00)Antarctica/South_PoleAmundsen-ScottStation,SouthPole
(GMT-04:32:32)Antarctica/RotheraRotheraStation,AdelaideIsland
(GMT-04:16:24)Antarctica/PalmerPalmerStation,AnversIsland
RelatedCommands
showclock
2.10LicenseCommands
2.10.1generatedeviceidentifier
CommandPurpose
Togeneratedeviceidentifier,usethiscommandinPrivilegedEXECmode.
CommandSyntax
generatedeviceidentifier(mgmt-if|)GURLNAME
generatedeviceidentifier(GFILENAME|)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
GURLNAME URLname -
GFILENAME localfilename -140CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandwillgeneratetheuniquedeviceidentifier(UDI)onthecurrentdevice,
customercangetlicenseforthecurrentdeviceformthevendorwithUDI.
Examples
ThefollowingexampleshowshowtogenerateUDI:
Switch#generatedeviceidentifiermgmt-iftftp://10.10.38.160/device.udi
RelatedCommands
None
2.10.2showlicense
CommandPurpose
Toshowlicenseonthedevice,usetheshowlicensecommandinPrivilegedEXEC
mode.
CommandSyntax
showlicense(GFILENAME|)
Parameter ParameterDescriptionParameterValue
GFILENAME localfilename -
CommandMode
PrivilegedEXEC141Default
None
Usage
Thiscommandwillshowthelicenseonthecurrentdevice.
Examples
Thefollowingexampleshowshowtoshowlicense:
Switch#showlincese
Licensefiles:
======================================================================
flash:/ma.lic:
CreatedTime:FriDec617:22:23CST2013
Vendor:Vendor1
Customer:Customer1
DeviceMAC:00:1E:08:09:03:00
FeatureSet:QINQMVRERPSMEFETHOAM
VPWSVPLSHVPLSSMLKTPOAM
OSPFPIM_SMIGMPVRFMPLS
LDPBGPRSVPOSPF_TEEXTEND_ACL
PTPBFDSSMIPV6OSPF6
PIM_SM6MVR6RIPNGTUNNEL_V6
RelatedCommands
None
2.11HTTPcommandsCommands
2.11.1servicehttp
CommandPurpose
ToenableHTTPservice,useservicehttpenablecommandinGlobalConfiguration.
TodisableHTTPservice,useservicehttpdisablecommand.
CommandSyntax
servicehttp(enable|disable)142Parameter ParameterDescriptionParameterValue
enable TurnontheHTTPservice-
disable TurnofftheHTTPservice-
CommandMode
GlobalConfiguration
Default
HTTPserviceisdisabled.
Usage
TheWEBimageshouldbeloadedfirst.
Examples
ThefollowingexampleshowshowtoenableHTTPservice:
Switch#configureterminal
Switch(config)#servicehttpenable
RelatedCommands
httpserverload
httptimeout
2.11.2servicehttps
CommandPurpose
ToenableHTTPSservice,useservicehttpenablecommandinGlobalConfiguration.
TodisableHTTPSservice,useservicehttpdisablecommand.
CommandSyntax
servicehttps(enable|disable)143Parameter ParameterDescriptionParameterValue
enable TurnontheHTTPS
service-
disable TurnofftheHTTPS
service-
CommandMode
GlobalConfiguration
Default
HTTPSserviceisdisabled.
Usage
TheWEBimageshouldbeloadedfirst.
Examples
ThefollowingexampleshowshowtoenableHTTPSservice:
Switch#configureterminal
Switch(config)#servicehttpsenable
RelatedCommands
httpserverload
httptimeout
2.11.3httpserverload
CommandPurpose
ToloadWEBimage,userthehttpserverloadcommand.
CommandSyntax
httpserverloadFILENAME144Parameter ParameterDescriptionParameterValue
FILENAME NameofWEBimage -
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtospecifywebimage:
Switch#configureterminal
Switch(config)#httpserverloadflash:/webImage.bin
RelatedCommands
servicehttpenable
servicehttpsenable
httptimeout
2.11.4httptimeout
CommandPurpose
Toconfiguretheexpiretimeofonlinewebusers.
CommandSyntax
httptimeoutTIMEOUT
Parameter ParameterDescriptionParameterValue145TIMEOUT Onlinewebuserexpire
time.Therangeis[1,60],unitis
minute.
CommandMode
GlobalConfiguration
Default
20min.
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurehttptimeout:
Switch#configureterminal
Switch(config)#httptimeout30
RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable
2.11.5httpserversourceaddress
CommandPurpose
ToconfigurethesourceaddressofWEBserveronyourswitch,usethehttpserver
sourceaddresscommandinGlobalConfiguration.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
httpserversourceaddress(vrfNAME|)A.B.C.D
nohttpserversourceaddress146Parameter ParameterDescriptionParameterValue
vrfNAME Specifyavrftoprovide
WEBserverAstringwith1-15
characters
A.B.C.D ConfigureIPaddressfor
WEBserverworking-
CommandMode
GlobalConfiguration
Default
None
Usage
YoucanusethiscommandtomodifytheaddresswhichWEBserverworkson,and
specifyavrftoprovideWEBserver.Thesourceaddresscanonlybe0.0.0.0or
loopbackinterfacesaddress,0.0.0.0indicatesthattheWEBserveraddressisnot
specified.
Examples
Thefollowingexampleshowshowtosetinbandhttpserveraddress:
Switch#configureterminal
Switch(config)#httpserversourceaddress10.10.10.1
RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable1472.11.6httpserversourceport
CommandPurpose
ToconfiguretheTCPportforHTTPserverworkinginbandonyourswitch,usethe
httpserversourceportcommandinGlobalConfiguration.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
httpserversourceportPORT
nohttpserversourceport
Parameter ParameterDescriptionParameterValue
PORT ConfigureTCPportfor
HTTPserverworking
inband1025-65535
CommandMode
GlobalConfiguration
Default
80
Usage
TheCLIofnohttpserversourceportwillconfigureTCPportforHTTPserver
workinginbandwithdefaultvalueof80.
Examples
ThefollowingexampleshowshowtosetinbandhttpserverTCPport:
Switch#configureterminal
Switch(config)#httpserversourceport1080148RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable
2.11.7httpserversourcessl-port
CommandPurpose
ToconfiguretheTCPportforHTTPSserverworkinginbandonyourswitch,usethe
httpserversourcessl-portcommandinGlobalConfiguration.Torestorethedefault
value,usethenoformofthiscommand.
CommandSyntax
httpserversourcessl-portPORT
nohttpserversourcessl-port
Parameter ParameterDescriptionParameterValue
PORT ConfigureTCPportfor
HTTPSserverworking
inband1025-65535
CommandMode
GlobalConfiguration
Default
443
Usage
TheCLIofnohttpserversourcessl-portwillconfigureTCPportforHTTPSserver
workinginbandwithdefaultvalueof443.149Examples
ThefollowingexampleshowshowtosetinbandhttpsserverTCPport:
Switch#configureterminal
Switch(config)#httpserversourceport10443
Switch#configureterminal
Switch(config)#httpserversourcessl-port10443
RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable
2.11.8httpserversourcemgmt-ifport
CommandPurpose
ToconfiguretheTCPportforHTTPserverworkingoutbandonyourswitch,usethe
httpserversourcemgmt-ifportcommandinGlobalConfiguration.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
httpserversourcemgmt-ifportPORT
nohttpserversourcemgmt-ifport
Parameter ParameterDescriptionParameterValue
PORT ConfigureTCPportfor
HTTPserverworking
outband1025-65535
CommandMode
GlobalConfiguration150Default
80
Usage
TheCLIofnohttpserversourcemgmt-ifportwillconfigureTCPportforHTTP
serverworkingoutbandwithdefaultvalueof80.
Examples
ThefollowingexampleshowshowtosetoutbandhttpserverTCPport:
Switch#configureterminal
Switch(config)#httpserversourcemgmt-ifport1080
RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable
2.11.9httpserversourcemgmt-ifssl-port
CommandPurpose
ToconfiguretheTCPportforHTTPSserverworkingoutbandonyourswitch,usethe
httpserversourcemgmt-ifssl-portcommandinGlobalConfiguration.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
httpserversourcemgmt-ifssl-portPORT
nohttpserversourcemgmt-ifport
Parameter ParameterDescriptionParameterValue
PORT ConfigureTCPportfor
HTTPSserverworking
outband1025-65535151CommandMode
GlobalConfiguration
Default
443
Usage
TheCLIofnohttpserversourcemgmt-ifssl-portwillconfigureTCPportforHTTPS
serverworkingoutbandwithdefaultvalueof443.
Examples
ThefollowingexampleshowshowtosetoutbandhttpsserverTCPport:
Switch#configureterminal
Switch(config)#httpserversourceport10443
RelatedCommands
httpserverload
servicehttpenable
servicehttpsenable
2.11.10httpauthenticationaaa
CommandPurpose
ToconfiguretheAAAmethodlistforwebloginonyourswitch,usethehttp
authenticationaaacommandinGlobalConfiguration.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
httpauthentication(local|aaa(login-authentication|exec-authorization)(default|
LISTNAME))
nohttpauthentication(aaa(login-authentication|exec-authorization))152Parameter ParameterDescriptionParameterValue
local Configureweblogin
authenticationbylocal-
aaa Configureweblogin
authenticationbyAAA-
login-authentication Configureweblogin
authenticationmethodlist-
exec-authorization Configureweblogin
authorizationmethodlist-
default Setmethodlistname
default-
LISTNAME Setmethodlistname Upto31characters
CommandMode
GlobalConfiguration
Default
defaultwebloginmethodislocal
Usage
TheCLIofhttpauthentication(local|aaa(login-authentication|exec-authorization)
(default|LISTNAME))canonlybeconfiguredwhenAAAisenable.
Examples
ThefollowingexampleshowshowtosetwebAAAloginmethodtobedefault.:
Switch#configureterminal
Switch(config)#httpauthenticationaaalogin-authenticationdefault
RelatedCommands
aaanew-model153aaaauthenticationlogin
aaaauthorizationexec
2.12RPC-APIcommandsCommands
2.12.1servicerpc-api
CommandPurpose
ToenableRPC-APIservice,useservicerpc-apienablecommandinGlobal
Configuration.TodisableRPC-APIservice,useservicerpc-apidisablecommand.
CommandSyntax
servicerpc-api(enable(portPORT|ssl(ssl-portSSLPORT|)|)(vrfNAME|)
(connect-timeout<10-300>|)|disable)
servicerpc-apidisable
Parameter ParameterDescriptionParameterValue
enable TurnontheRPC-API
service-
disable TurnofftheRPC-API
service-
PORT TCPportnumber.
TCPportnumber.
Bydefault,theRPC-API
servicelistensonTCPport
80(HTTP)1025-65535
vrfNAME VPNRouting/Forwarding
instanceAstringwith1-15
characters
ssl EnableSSL(HTTPS)-154SSLPORT TCPportnumber.
TCPportnumber.
Bydefault,theRPC-API
servicelistensonTCPport
443(HTTPS)1025-65535
connect-timeout TCPlongconnectmode
withtimeout-
TIMEOUT Timeoutvalue 10-300
CommandMode
GlobalConfiguration
Default
Disabled.
Usage
None
Examples
ThefollowingexampleshowshowtoenableRPC-APIservice:
Switch#configureterminal
Switch(config)#servicerpc-apienableport2000
RelatedCommands
showservicesrpc-api
servicerpc-apiauth-mode
2.12.2servicerpc-apiauth-mode
CommandPurpose
ToenableRPC-APIHTTPBasicauthentication.155CommandSyntax
servicerpc-apiauth-modebasic
noservicerpc-apiauth-mode
CommandMode
GlobalConfiguration
Default
Disabled.
Usage
OnceenableordisableRPC-APIHTTPBasicauthentication,anduserswantto
continuetouseRPC-APIservice,usersmustre-enableit.
Examples
ThefollowingexampleshowshowtoenableRPC-APIHTTPBasicauthentication:
Switch#configureterminal
Switch(config)#servicerpc-apiauth-modebasic
RelatedCommands
servicerpc-apienable
showservicesrpc-api
2.12.3showservicesrpc-api
CommandPurpose
ToshowRPC-APIconfigurationinformation.
CommandSyntax
showservicesrpc-api156CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowstheconfigurationinformation:
Switch(config)#showservicesrpc-api
RPCAPIservicesconfiguration:
HTTPserver:shutdown,port:80,authenticationmode:none
RelatedCommands
servicerpc-apienable
2.13DIAGCommands
2.13.1diagnostic-informationdiscard
CommandPurpose
Usethiscommandtoenablethefunctionofdiagnostic-informationdiscard.
CommandSyntax
diagnostic-informationdiscardenable
nodiagnostic-informationdiscardenable
Parameter ParameterDescriptionParameterValue
enable enable Thestringofenable.157CommandMode
GlobalConfiguration
Default
nodiagnostic-informationdiscardenable
Usage
Thecommandusestoenablethefunctionofdiagnostic-informationdiscard.
Examples
Thefollowingexampleshowshowtoenablethefunctionofdiagnostic-information
discard:
Switch(config)#diagnostic-informationdiscardenable
Thefollowingexampleshowshowtodisablethefunctionofdiagnostic-information
discard:
Switch(config)#nodiagnostic-informationdiscardenable
RelatedCommands
N/A
2.13.2showdiagnostic-informationdiscard
CommandPurpose
Usethiscommandtodisplaythesituationofpacketdiscard.
CommandSyntax
showdiagnostic-informationdiscard
cleardiagnostic-informationdiscard
Parameter ParameterDescriptionParameterValue
discard discard Thestringofdiscard.158CommandMode
PrivilegedEXEC
Default
None
Usage
Thecommandusestodispalythesituationofpacketdiscard.
Examples
Thefollowingexampleshowshowtodisplaythesituationofpacketdiscard:
Switch#showdiagnostic-informationdiscard
Diagnostic-InformationDiscard:
Drop-Reason Description
------------------------------+------------------------------------
CTC_DROP_TTL_CHK TTLcheckfail
CTC_DROP_ACL_DENY Acldeny
CTC_DROP_PKT_ERR Packetcheckerror
CTC_DROP_ISOLATE_CHKPortisolatecheckfail
CTC_DROP_TRANSIT_DISABLETransitdisable
CTC_DROP_IP_CHK Ipaddressorpacketcheckfail
CTC_DROP_VLAN_FILTERVlanfiltering
CTC_DROP_STP_CHK Stpcheckfail
CTC_DROP_CHKSUM_ERRChecksumerror
CTC_DROP_PARSER_ERRParsererror
CTC_DROP_TRAFFIC_MANAGERTraficmanagercheckfail
CTC_DROP_NET_RX Netrxcheckfail
CTC_DROP_NET_TX Nettxcheckfail
Others Otherdropreasons
Thefollowingexampleshowshowtoclearpacketdiscard:
Switch#cleardiagnostic-informationdiscard
RelatedCommands
N/A1593EthernetCommands
3.1InterfaceCommands
3.1.1bandwidth
CommandPurpose
Usethiscommandtosetthebandwidthoftheport.
Toreturnthebandwidthtodefaultvalue,usethenoformofthiscommand.
CommandSyntax
bandwidthBANDWIDTH
nobandwidth
Parameter ParameterDescriptionParameterValue
BANDWIDTH portbandwidth 1-100000000,unitkbps
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingexamplesetthebandwidthoftheport:160Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#bandwidth1000
Thefollowingexamplereturnsthebandwidthtodefaultvalue:
Switch#configureterminal
Switch(config-if)#nobandwidth
RelatedCommands
duplex
speed
3.1.2clearcounters
CommandPurpose
Usethiscommandtoclearthecountersonthephysicalinterface.
CommandSyntax
clearcounters(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Onlyclearthespecified
interfacestatisticsSupport
physical/aggregationports
CommandMode
PrivilegedEXEC
Default
None
Usage
Theclearcounterscommandclearsallcurrentinterfacecountersfromtheinterface
unlessyouspecifyoptionalargumentsthatclearonlyaspecificinterfacetypefroma
specificinterfacenumber.161Examples
Thefollowingexampleclearsthecountersonallinterfaces:
Switch#clearcounters
Thefollowingexampleclearsthecountersontheinterfaceeth-0-1:
Switch#clearcounterseth-0-1
Thefollowingexampleclearsthecountersontheagg1:
Switch#clearcountersagg1
RelatedCommands
None
3.1.3description
CommandPurpose
Usethiscommandtosetthedescriptionontheinterface.
Toremovethedescriptionontheinterface,usethenoformofthiscommand.
CommandSyntax
descriptionLINE
nodescription
Parameter ParameterDescriptionParameterValue
LINE Thedescriptiononthe
interfaceshouldbenomorethan
240characters,andthe
charactercannotinclude
?
CommandMode
InterfaceConfiguration162Default
None
Usage
None
Examples
Thefollowingexamplesetsthedescriptionontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#descriptionEthernet
Thefollowingexampleremovesthedescriptionontheinterface:
Switch#configureterminal
Switch(config-if)#nodescription
RelatedCommands
None
3.1.4duplex
CommandPurpose
Usetheduplexinterfaceconfigurationcommandtospecifytheduplexmodeof
operationforaport.Usethenoformofthiscommandtoreturntheporttoitsdefault
value.
CommandSyntax
duplex(auto|full|half)
noduplex
Parameter ParameterDescriptionParameterValue163auto Enableautomaticduplex
configuration;port
automaticallydetects
whetheritshouldrunin
full-duplexorhalf-duplex
mode,dependingonthe
attacheddevicemode-
full Enablefull-duplexmode-
half Enablehalf-duplexmode
(onlyforinterfaces
operatingat10or100
Mb/s).Youcannot
configurehalf-duplex
modeforinterfaces
operatingat1000or10,000
Mb/s-
CommandMode
InterfaceConfiguration
Default
auto
Usage
Thecommandisnotallowedtobeseton10Gportoropticalmodeofcomboport.
Examples
Thefollowingexamplesetstheduplexmodetoauto:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#duplexauto
Thefollowingexamplesetstheduplexmodetofull:164Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#duplexfull
Thefollowingexamplereturnstheduplexmodetodefault:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noduplex
RelatedCommands
bandwidth
speed
3.1.5speed
CommandPurpose
Usethespeedinterfaceconfigurationcommandtospecifythespeedofport.Usethe
noofthiscommandtoreturntheporttoitsdefaultvalue.
CommandSyntax
speed(10|100|1000|2G5|5G|10G|25G|40G|50G|100G|auto)
nospeed
Parameter ParameterDescriptionParameterValue
auto Portautomaticallydetects
thespeeditshouldrun-
10 Portrunsat10Mb/s -
100 Portrunsat100Mb/s -
1000 Portrunsat1000Mb/s-
2G5 Portrunsat2.5Gb/s -
5G Portrunsat5Gb/s -
10G Portrunsat10Gb/s -
25G Portrunsat25Gb/s -16540G Portrunsat40Gb/s -
50G Portrunsat50Gb/s -
100G Portrunsat100Gb/s -
CommandMode
InterfaceConfiguration
Default
auto
Usage
Thecommandisnotallowedtobesetonopticalmodeofcomboport.
Examples
Thisexampleshowshowtosetthespeedonaportto1000Mb/s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#speed1000
Thisexampleshowshowtoreturnthespeedonaporttodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospeed
RelatedCommands
bandwidth
duplex
3.1.6speed
CommandPurpose
Usethespeedinterfaceconfigurationcommandtospecifythespeedofport.Usethe
noofthiscommandtoreturntheporttoitsdefaultvalue.166CommandSyntax
speed(10|100|1000|2G5|5G|10G|25G|40G|50G|100G|200G|400G|
auto)
nospeed
Parameter ParameterDescriptionParameterValue
auto Portautomaticallydetects
thespeeditshouldrun-
10 Portrunsat10Mb/s -
100 Portrunsat100Mb/s -
1000 Portrunsat1000Mb/s-
2G5 Portrunsat2.5Gb/s -
5G Portrunsat5Gb/s -
10G Portrunsat10Gb/s -
25G Portrunsat25Gb/s -
40G Portrunsat40Gb/s -
50G Portrunsat50Gb/s -
100G Portrunsat100Gb/s -
200G Portrunsat200Gb/s -
400G Portrunsat400Gb/s -
CommandMode
InterfaceConfiguration
Default
auto167Usage
Thecommandisnotallowedtobesetonopticalmodeofcomboport.
Examples
Thisexampleshowshowtosetthespeedonaportto1000Mb/s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#speed1000
Thisexampleshowshowtoreturnthespeedonaporttodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospeed
RelatedCommands
bandwidth
duplex
3.1.7interface
CommandPurpose
Usethiscommandtoenterinterfacemode.
CommandSyntax
interfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Thenameofinterface,
i.e.eth-0-1,agg1,
vlan1,loopback1Supportallinterfacetypes
CommandMode
GlobalConfiguration168Default
None
Usage
Theinterfacenamecanbeeitheraportname(i.e.eth-0-1)orlink-aggname
(i.e.agg1)orvlanname(i.e.vlan2)orloop-backname(i.e.loopback10).
Examples
Thefollowingexampleenterstheinterfacemodeforeth-0-1:
Switch(config)#interfaceeth-0-1
Thefollowingexampleenterstheinterfacemodeforagg1:
Switch(config)#interfaceagg1
Thefollowingexampleenterstheinterfacemodeforvlan2:
Switch(config)#interfacevlan2
RelatedCommands
exit
3.1.8interfacerange
CommandPurpose
Usethiscommandtooperatealistofinterfaces,theinterfaceincludephysicalport,
vlaninterface,linkagginterfaceandloopbackinterface.
CommandSyntax
interfacerangeIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Interfacerange Supportallinterfacetypes
canbeseparateby
comma,dash169CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleoperatealistofphysicalinterface:
Switch(config)#interfacerangeeth-0-124
Switch(config-if-range)#shutdown
Thefollowingexampleoperatealistofvlaninterface:
Switch(config)#interfacerangevlan1-20
Switch(config-if-range)#shutdown
Thefollowingexampleoperatealistoflinkagginterface:
Switch(config)#interfacerangeagg10-20
Switch(config-if-range)#shutdown
Thefollowingexampleoperatealistofloopbackinterface:
Switch(config)#interfacerangeloopback0-5
Switch(config-if-range)#shutdown
RelatedCommands
None
3.1.9interfacerangecreatevlan
CommandPurpose
Usethiscommandtocreatealistofvlaninterface.
CommandSyntax
interfacerangecreatevlanVLAN_RANGE170Parameter ParameterDescriptionParameterValue
VLAN_RANGE VLANIDrange VLANIDrangeis1-4094,
canbeseparateby
comma,dash
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexamplecreatevlaninterface10to20:
Switch(config)#interfacerangecreatevlan10-20
Switch(config-if-range)#shutdown
RelatedCommands
None
3.1.10jumboframe
CommandPurpose
Usethiscommandtoenablejumboframe.Todisablejumboframe,usethenoform
ofthiscommand.
CommandSyntax
jumboframeenable
nojumboframeenable171CommandMode
InterfaceConfiguration
Default
None
Usage
Jumboframeisdisabledbydefault.Themaxframewhichcanbetransmittedis1534
bytes.Whenenablejumboframe,themaxframecanbe9600bytes.
Examples
Thefollowingexampleenablesthejumboframe:
Switch(config)#interfaceeth-0-1
Switch(config-if)#jumboframeenable
Thefollowingexampledisablesthejumboframe:
Switch(config-if)#nojumboframeenable
RelatedCommands
None
3.1.11media-type
CommandPurpose
Usethemedia-typeinterfaceconfigurationcommandtoselectamediatypeforan
interface.Usethenoformofthiscommandrestoretothedefaultvalue.
CommandSyntax
media-type(auto-select|rj45|sfp)
Parameter ParameterDescriptionParameterValue172auto-select Enabletheswitchto
dynamicallyselectthetype
basedonwhichonefirst
linksup-
rj45 SelecttheRJ-45interface-
sfp Selectthesmallform-
factorpluggable(SFP)
moduleinterface-
CommandMode
InterfaceConfiguration
Default
Auto-select
Usage
Bydefault,weuseauto-selectmode.
Examples
Thefollowingexampleshowshowtoconfiguretheinterfaceasarj45media:
Switch(config)#interfaceeth-0-1
Switch(config-if)#media-typerj45
Thefollowingexampleshowshowtorestoretodefaultvalue:
Switch(config-if)#nomedia-type
RelatedCommands
None1733.1.12unidirectional
CommandPurpose
Usetheunidirectionalinterfaceconfigurationcommandtoenable/disable
unidirectionalfunction.
CommandSyntax
unidirectional(enable|disable)
Parameter ParameterDescriptionParameterValue
enable enableunidirectional
function-
disable disableunidirectional
function-
CommandMode
InterfaceConfiguration
Default
disableunidirectionalfunction
Usage
EnableunidirectionalfunctionwillforceenabletheinterfaceTXfunctionandforce
disabletheinterfaceRXfunction.
Onlyfiberportsupporttheunidirectionalfunction,andin1000Mspeedmode,duplex
mustbeforcedtofullmode.
Examples
Thefollowingexampleshowshowtoenableunidirectionalfunction:
Switch(config)#interfaceeth-0-1
Switch(config-if)#unidirectionalenable
Thefollowingexampleshowshowtodisableunidirectionalfunction:174Switch(config-if)#unidirectionaldisable
RelatedCommands
None
3.1.13shutdown
CommandPurpose
Usetheshutdowninterfaceconfigurationcommandtoadmindownaninterface.Use
thenoformofthiscommandtoadminupaninterface.
CommandSyntax
shutdown
noshutdown
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoshutdownaport:
Switch(config)#interfaceeth-0-1
Switch(config-if)#shutdown
Thefollowingexampleshowshowtoadminupaport:
Switch(config-if)#noshutdown175RelatedCommands
None
3.1.14splitinterface
CommandPurpose
Usethecommandtosplitphysicportto10Gport.Usethenoformofthiscommand
toun-splitthephysicport.
CommandSyntax
splitinterfaceIFNAME(10giga|40giga)
nosplitinterface
Parameter ParameterDescriptionParameterValue
IFNAME thephysicportneedto
splitSupportphysicalports
10giga splitphysicporttofour
10Gport-
40giga splitphysicporttoone
10Gport-
CommandMode
GlobalConfiguration
Default
None
Usage
Needsaveconfigurationandreboottomakecommandtakeeffect176Examples
Thefollowingexampleshowshowtosplitinterfacetofour10Gport:
Switch#configureterminal
Switch(config)#splitinterfaceeth-0-110giga
RelatedCommands
None
3.1.15load-interval
CommandPurpose
Usetheload-intervalinterfaceconfigurationcommandtospecifytheintervalwhen
calculatingspeedofaninterface.Usethenoofthiscommandtoreturntheporttoits
defaultvalue.
CommandSyntax
load-intervalSECONDS
noload-interval
Parameter ParameterDescriptionParameterValue
SECONDS Loadinterval 5-600,unit:second
CommandMode
InterfaceConfiguration
Default
300seconds
Usage
Load-intervalmustbeinincrementsof5secondanditsdefaultvalueis300second.177Examples
Thisexampleshowshowtosettheload-intervalonaportto600second:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#load-interval600
Thisexampleshowshowtoreturntheload-intervalonaporttodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noload-interval
RelatedCommands
showinterface
3.1.16vlandot1qtagnative
CommandPurpose
Usethevlandot1qtagnativeglobalconfigurationcommandtoconfiguretheedge
switchsothatallpacketsgoingoutan802.1Qtrunk,includingthenativeVLAN.
CommandSyntax
vlandot1qtagnative
novlandot1qtagnative
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoenabletaggingnative.Ifenabled,thepacketinnativevlanwill
betaggedwiththenativevlan.Otherwise,itwillbeuntagged.178Examples
Thisexampleshowshowtotagnativefortrunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vlandot1qtagnative
Thisexampleshowshowtodisabletaggingnativefortrunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#novlandot1qtagnative
RelatedCommands
None
3.1.17showinterface
CommandPurpose
Usethiscommandtodisplaytheconfigurationsandstatisticsonallinterfacesoran
interface.
CommandSyntax
showinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename eth:Physicalinterface
agg:Aggregationinterface
loopback:Loopback
interface
vlan:Vlaninterface
tunnel:Tunnelinterface
null:Nullinterface
CommandMode
PrivilegedEXEC179Default
None
Usage
TheOAMstatisticscanonlydisplaywhenportis10Gmode.
Examples
Thisexampleshowshowtodisplaytheconfigurationsandstatisticsontheinterface
eth-0-1:
Switch#showinterfaceeth-0-1
Interfaceeth-0-1
Interfacecurrentstate:UP
HardwareisEthernet,addressis001e.080a.5102(bia001e.080a.5102)
Bandwidth1000000kbits
Index1,Metric1,EncapsulationARPA
Speed-1000Mb/s,Duplex-Full,Mediatypeis1000BASE_T_SFP
Upcount:0
Downcount:0
Linktypeisautonegotiation
Admininputflow-controlisoff,outputflow-controlisoff
Operinputflow-controlisoff,outputflow-controlisoff
TheMaximumFrameSizeis1632bytes
VRFbinding:notbound
ARPtimeout01:00:00,ARPretryinterval1s
ARPProxyisdisabled,LocalARPProxyisdisabled
5minuteinputrate0bits/sec,0packets/sec
5minuteoutputrate0bits/sec,0packets/sec
0packetsinput,0bytes
Received0unicast,0broadcast,0multicast
0runts,0giants,0inputerrors,0CRC
0frame,0overrun,0pauseinput
24packetsoutput,2160bytes
Transmitted0unicast,24broadcast,0multicast
0underruns,0outputerrors,0pauseoutput
0outputdiscard
RelatedCommands
showinterfacestatus1803.1.18showinterfacestatus
CommandPurpose
UsethiscommandtodisplaythebriefinformationonallEthernetandlink
aggregationinterfaces.
CommandSyntax
showinterface(IFNAME|)status
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Supportaggregationand
physicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandwillnotshowVLANandtunnelinterfacesinformation.
Examples
ThisexampleshowshowtodisplaythebriefinformationonallEthernetandLAG
interfaces:
Switch#showinterfacestatus
PortStatusDuplexSpeedModeTypeDescription
-----------------------------------------------------------------
eth-0-1downa-fulla-1000ACCESS1000BASE_T
eth-0-2downa-fulla-1000ACCESS1000BASE_T
eth-0-3admindownautoautoACCESS1000BASE_T
eth-0-4admindownautoautoACCESS1000BASE_T
eth-0-5upa-fulla-1000routed1000BASE_T
eth-0-6upa-fulla-100ACCESS1000BASE_T
eth-0-7admindownautoautoACCESS1000BASE_T181eth-0-8admindownautoautoACCESS1000BASE_T
eth-0-9downa-fulla-1000ACCESS1000BASE_T
eth-0-10downa-fulla-1000ACCESS1000BASE_T
eth-0-11admindownautoautoACCESS1000BASE_T
eth-0-12admindownautoautoACCESS1000BASE_T
eth-0-13admindownautoautoACCESS1000BASE_T
eth-0-14admindownautoautoACCESS1000BASE_T
eth-0-15admindownautoautoACCESS1000BASE_T
eth-0-16admindownautoautoACCESS1000BASE_T
eth-0-17admindownautoautoACCESS1000BASE_T
eth-0-18admindownautoautoACCESS1000BASE_T
eth-0-19admindownautoautoACCESS1000BASE_T
eth-0-20admindownautoautoACCESS1000BASE_T
RelatedCommands
None
3.1.19showinterfacesummary
CommandPurpose
Usethiscommandtodisplaythesummaryonallinterfacesoraninterface.
CommandSyntax
showinterface(IFNAME|)summary
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Supportallinterfacetypes
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandwilldisplaythesummaryonallinterfacesoraninterfaceintheformof
list.182Examples
Thisexampleshowshowtodisplaythesummaryontheinterfaceeth-0-1:
Switch#showinterfaceeth-0-1summary
RXBS:rxrate(bits/sec)RXPS:rxrate(pkts/sec)
TXBS:txrate(bits/sec)TXPS:txrate(pkts/sec)
InterfaceLinkRXBSRXPSTXBSTXPS
-----------------------------------------------------------------------------
eth-0-1DOWN0000
RelatedCommands
showinterface
3.1.20showipinterface
CommandPurpose
Usethiscommandtoshowlayer3interfaceinformation.
CommandSyntax
showipinterface(IFNAME|)
showipinterfacebrief
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename,can
beeth,vlanoraggSupportallinterfacetypes
CommandMode
PrivilegedEXEC
Default
None183Usage
None
Examples
Thisexampleshowsthevlaninterfaceinformation:
Switch#showinterfacevlan10
Interfacevlan10
Interfacecurrentstate:DOWN
HardwareisVLAN,addressis8633.d260.6500(bia8633.d260.6500)
Bandwidth1000000kbits
Index4098,Metric1,EncapsulationARPA
Themaximumtransmitunit(MTU)is1500bytes
VRFbinding:notbound
Labelswitchingisdisabled
Novirtualcircuitconfigured
VRRPmasterof:VRRPisnotconfiguredonthisinterface
ARPtimeout01:00:00,ARPretryinterval1s
RelatedCommands
None
3.1.21switchport
CommandPurpose
Usethiscommandtoconfigureaporttoabridge(layer2)orrouting(layer3)mode.
CommandSyntax
switchport
noswitchport
CommandMode
InterfaceConfiguration
Default
Switchport184Usage
Whenusingthiscommandtochangethemodeofaport,allbridgeorrouting
configurationsofthisportwillbeclearedandnotrestored.Bydefault,theportisa
switchport.
Examples
Thisexampleshowshowtoconfigureaporttobridgemode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchport
Thisexampleshowshowtoconfigureaporttoroutingmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
RelatedCommands
None
3.1.22switchportaccessallowed
CommandPurpose
UsethiscommandtoconfigurewhetherthespecifiedVLANflowcanpassthis
accessport.
CommandSyntax
switchportaccessallowedvlan(addremove)VLAN_ID
Parameter ParameterDescriptionParameterValue
add Allowthetrafficfromthe
vlantopasstheaccess
port-185remove Notallowthetrafficfrom
thevlantopassthe
accessport-
VLAN_ID Vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-401-4094
CommandMode
InterfaceConfiguration
Default
1
Usage
ThiscommandisusedtoallowthetrafficfromthespecificVLANtopasstheaccess
port.
Examples
ThisexampleshowshowtoconfigurethespecifiedVLANflowpassthroughtheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessallowedvlanadd10
Thisexampleshowshowtoallowthetrafficfromthevlan11topasstheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessallowedvlanadd11
Thisexampleshowshowtorefusethetrafficfromthevlan12topasstheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessallowedvlanremove12
RelatedCommands
switchporttrunkallowedvlan(addvidremovevid|all|none)1863.1.23switchportaccessvlan
CommandPurpose
UsethiscommandtosetthedefaultVLANforaccessport.
CommandSyntax
switchportaccessvlanVLAN_ID
noswitchportaccessvlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
CommandMode
InterfaceConfiguration
Default
1
Usage
Theportshouldbeanaccessportbyswitchportmodeaccesscommandbeforeadd
tovlanbythiscommand.
Examples
Thisexampleshowshowtoconfiguretheaccessporttoaddtodefaultvlan10:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeaccess
Switch(config-if)#switchportaccessvlan10
Thisexampleshowshowtoconfiguretheaccessporttorestoretodefaultvlan1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportaccessvlan187RelatedCommands
switchporttrunknative
3.1.24switchportmodeaccess
CommandPurpose
Usethiscommandtoconfiguretheportworkinaccessmode.
CommandSyntax
switchportmodeaccess
CommandMode
InterfaceConfiguration
Default
AccessPort
Usage
Theaccessmodeisusuallyusedtoconnecttheporttoaterminaldevice,suchasa
PC.
Whenthemodeischanged,boththeMAClearntdynamicallyandconfigured
staticallyontheportwillbecleared.
Examples
Thisexampleshowshowtosettheswitchportmodetoaccess:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeaccess
RelatedCommands
switchportmodetrunk1883.1.25switchportmodetrunk
CommandPurpose
Usethiscommandtoconfiguretheportworkintrunkmode.
CommandSyntax
switchportmodetrunk
CommandMode
InterfaceConfiguration
Default
AccessPort
Usage
Thetrunkmodeisusuallyusedtoconnecttheportwithotherswitch.
Thetrunkmodeiscanalsousedtoconnecttheportwithhostdevice.
Whenthemodeischanged,boththeMAClearntdynamicallyandconfigured
staticallyontheportwillbecleared.
Examples
Thisexampleshowshowtoreturntheporttodefaultvlan1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodetrunk
RelatedCommands
switchportmodeaccess1893.1.26switchportmodedot1q-tunnel
CommandPurpose
UsethiscommandtoconfiguretheportasQINQport.
CommandSyntax
switchportmodedot1q-tunnel
CommandMode
InterfaceConfiguration
Default
AccessPort
Usage
Whenportmodechanged,allthedynamicFDBwillbecleared.
Examples
ThisexampleshowshowtoconfiguretheporttoQINQmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodedot1q-tunnel
RelatedCommands
switchportmodetrunk
3.1.27switchporttrunkallowed
CommandPurpose
UsethiscommandtoconfigurewhetherthespecifiedVLANflowcanpassthistrunk
port.190CommandSyntax
switchporttrunkallowedvlan(addVLAN_ID|removeVLAN_ID|all|none)
Parameter ParameterDescriptionParameterValue
addVLAN_ID allowthetrafficfromthe
specifiedvlantotransmit
thetrunkport.Vlanlist
connectedwith-and,,
forexample,1-
10,15,20,30-401-4094
removeVLAN_ID donotallowthetrafficfrom
thespecifiedvlanto
transmitthetrunkport.
Vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-401-4094
all allowthetrafficfromallthe
vlantotransmitthetrunk
port-
none donotallowthetrafficfrom
allthevlantotransmitthe
trunkport-
CommandMode
InterfaceConfiguration
Default
1
Usage
ThiscommandisusedtoallowtrafficfromspecifiedVLANtotransmitthetrunkport.191Examples
ThisexampleshowshowtoconfigurethespecifiedVLANflowpassthroughtheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanadd10
ThisexampleshowshowtorefusetrafficfromthespecifiedVLANtotransmitthe
trunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanremove11,12
Thisexampleshowshowtoallowtrafficfromallvlantotransmitthetrunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanall
Thisexampleshowshowtorefusetrafficfromallvlantotransmitthetrunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlannone
RelatedCommands
switchportaccessallowedvlan(addremove)vid
3.1.28switchporttrunknativevlan
CommandPurpose
UsethiscommandtosetthedefaultVLANfortrunkport.
CommandSyntax
switchporttrunknativevlanVLAN_ID
noswitchporttrunknativevlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094192CommandMode
InterfaceConfiguration
Default
1
Usage
Theportshouldbeatrunkportbyswitchportmodetrunkcommandbeforeaddto
vlanbythiscommand.
Examples
Thisexampleshowshowtoconfiguredefaultvlan10fortrunkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunknativevlan10
Thisexampleshowshowtoconfigurethetrunkporttorestoretodefaultvlan1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchporttrunknativevlan
RelatedCommands
switchportaccessvlanvid
3.1.29switchportport-bridgeenable
CommandPurpose
Usethiscommandtoenableport-bridge,allowhomologousandhomologous
translate.
CommandSyntax
switchportport-bridgeenable
noswitchportport-bridgeenable193CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoenableport-bridge:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportport-bridgeenable
RelatedCommands
port-bridgeenable
3.1.30port-xconnect
CommandPurpose
Usethiscommandtosetportcrossconnectdestinationinterface.Usethenoformof
thiscommandremovedestinationinterface.
CommandSyntax
port-xconnectdestination-interface(IFPHYSICAL|IFAGG)
noport-xconnectdestination-interface
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Physicalport N/A
IFAGG Aggregateport -194CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoseteth-0-1port-xconnectdestinationinterfacetoeth-0-2:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#interfaceeth-0-1
Switch(config-if)#port-xconnectdestination-interfaceeth-0-2
RelatedCommands
None
3.1.31carrierup-hold-timeinterval
CommandPurpose
Usethiscommandtosetportupholdtime.Usethenoformofthiscommandremove
portupholdtime.
CommandSyntax
carrierup-hold-timeintervalTIME
nocarrierup-hold-timeinterval
Parameter ParameterDescriptionParameterValue
TIME upholdtime 0-3600000,unitis
millisecond195CommandMode
InterfaceConfiguration
Default
0
Usage
None
Examples
Thisexampleshowshowtoset300msforeth-0-1upholdtime:
Switch(config)#interfaceeth-0-1
Switch(config-if)#carrierup-hold-timeinterval300
RelatedCommands
None
3.1.32carrierdown-hold-timeinterval
CommandPurpose
Usethiscommandtosetportdownholdtime.Usethenoformofthiscommand
removeportdownholdtime.
CommandSyntax
carrierdown-hold-timeintervalTIME
nocarrierdown-hold-timeinterval
Parameter ParameterDescriptionParameterValue
TIME downholdtime 0-3600000,unitis
millisecond196CommandMode
InterfaceConfiguration
Default
0
Usage
None
Examples
Thisexampleshowshowtoset300msforeth-0-1downholdtime:
Switch(config)#interfaceeth-0-1
Switch(config-if)#carrierdown-hold-timeinterval300
RelatedCommands
None
3.1.33mtu
CommandPurpose
Usethiscommandtoconfigurethemaximumtransmitunitforthisinterface.
CommandSyntax
mtuVALUE
Parameter ParameterDescriptionParameterValue
VALUE MTU 68-9216
CommandMode
InterfaceConfiguration197Default
1500
Usage
Thiscommandisonlyallowedtobeusedinlayer3interface.
Examples
ThisexampleshowshowtoconfigureMTU1600forVLANinterface10:
Switch#configureterminal
Switch(config)#interfacevlan10
Switch(config-if)#mtu1600
RelatedCommands
None
3.1.34wavelengthfreq
CommandPurpose
Usethiscommandtoconfigurethewavelengthoftunablefiberusedonthis
interface.Usethenoformofthiscommandrestoretothedefaultvalue.Each
wavelengthcorrespondstoafixedfrequencyandthecommandsetsthewavelength
byconfiguringthefrequency.
CommandSyntax
wavelengthfreqFREQ
nowavelengthfreq
Parameter ParameterDescriptionParameterValue
FREQ fiberfrequency 19110-19615,stepis5
CommandMode
InterfaceConfiguration198Default
19340
Usage
Theconfigurationsofthiscommandonlyeffectivewhenthetunablefiberisinserted
onthisinterface.
Examples
Thisexampleshowshowtoconfigurewavelengthfreq19120forinterface10:
Switch#configureterminal
Switch(config)#interfaceeth-0-10
Switch(config-if)#wavelengthfreq19120
RelatedCommands
None
3.1.35fec
CommandPurpose
Usethiscommandtosetfecfunctionforaport.Andusethenoformofthiscommand
tounsetfecfunctionforaport.
CommandSyntax
fec(none|baser|rs)
nofec
Parameter ParameterDescriptionParameterValue
none fecnone -
baser fecbaser -
rs fecrs -199CommandMode
InterfaceConfiguration
Default
nofec
Usage
FECissupporton10G/40G/25G/50G/100Gphysicalinterface
Examples
Thefollowingexampleshowshowtoenablefecrsfunctionforaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#fecrs
Thefollowingexampleshowshowtodisablefecfunctionforaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#fecnone
Thefollowingexampleshowshowtosetdefaultfecfunctionforaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#nofec
RelatedCommands
None
3.1.36mdi
CommandPurpose
UsethiscommandtosetMDIcrossovermodeforethernetport.Andusethenoform
ofthiscommandtounsetMDImodeforethernetport
CommandSyntax
mdi(across|auto|normal)200nomdi
Parameter ParameterDescriptionParameterValue
auto automaticMDIcrossover-
across Coppermediaforcedto
MDIX-
normal Coppermediaforcedto
MDI-
CommandMode
InterfaceConfiguration
Default
auto
Usage
MDIissupportonethernetinterface
Examples
ThefollowingexampleshowshowtosetautomaticMDIcrossover:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#mdiauto
ThefollowingexampleshowshowtosetMDIXmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#mdiacross
ThefollowingexampleshowshowtosetMDImode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if-eth-0-1)#mdinormal201RelatedCommands
None
3.2InterfaceErrdisableCommands
3.2.1errdisabledetect
CommandPurpose
Usetheinterfaceerrdisabledetectsconfigurationcommandtoenableerrdisable
detection.Usethenoformofthiscommandtodisableerrdisabledetection.
CommandSyntax
errdisabledetectreason(link-flap|fdb-loop|udld)
noerrdisabledetectreason(link-flap|fdb-loop|udld)
Parameter ParameterDescriptionParameterValue
link-flap EnabledetectLinkflap
error-
fdb-loop EnabledetectFDBerror-
udld EnabledetectUDLDerror-
CommandMode
GlobalConfiguration
Default
link-flapEnable
fdb-loopEnable
udldEnable
Usage
None202Examples
Thisexampleshowshowtoenableerrdisabledetectlinkflap:
Switch#configureterminal
Switch(config)#errdisabledetectreasonlink-flap
Thisexampleshowshowtodisableerrdisabledetectlinkflap:
Switch#configureterminal
Switch(config)#noerrdisabledetectreasonlink-flap
RelatedCommands
showerrdisabledetect
3.2.2errdisablerecoveryinterval
CommandPurpose
Usethiscommandtosetthespecifiedtimertorecoverfromtheerrdisablestate.Use
thenoformofthiscommandtorestoretothedefaultinterval.
CommandSyntax
errdisablerecoveryintervalRANGE
noerrdisablerecoveryinterval
Parameter ParameterDescriptionParameterValue
RANGE Recoveryintervalrange30-86400,unit:second
CommandMode
GlobalConfiguration
Default
300seconds203Usage
Defaultrecoveryintervalis300seconds.Thechangeofintervalwillnotaffectalready
startederrdisablerecoverytimer.Ifnotenableerrdisablerecovery,theportwillnot
revoeryautomatic.
Examples
Thisexampleshowshowtoseterrdisablerecoveryto30seconds:
Switch#configureterminal
Switch(config)#errdisablerecoveryinterval30
Thisexampleshowshowtoseterrdisablerecoverytodefaultvalues:
Switch#configureterminal
Switch(config)#noerrdisablerecoveryinterval
RelatedCommands
errdisablerecoveryreason
showerrdisablerecovery
3.2.3errdisablefdb-loopcount
CommandPurpose
UsethiscommandtosetFDB-loopcheckparameter.Usethenoformofthis
commandtorestoretothedefaultcount.
CommandSyntax
errdisablefdb-loopcountCOUNT
noerrdisablefdb-loopcount
Parameter ParameterDescriptionParameterValue
COUNT SettheFDB-looptimes,
default10.3-50204CommandMode
GlobalConfiguration
Default
10
Usage
Periodis60s.
Examples
Thisexampleshowshowtosetcount5:
Switch#configureterminal
Switch(config)#errdisablefdb-loopcount5
RelatedCommands
errdisablerecoveryreason
showerrdisablerecovery
showerrdisablefdb-loop
3.2.4errdisablefdb-loopexclude-vlan
CommandPurpose
UsethiscommandtosetFDB-loopvlanwhitelist.Usethenoformofthiscommand
todetectthespecifiedvlan.
CommandSyntax
errdisablefdb-loopexclude-vlanVLAN_LIST
noerrdisablefdb-loopexclude-vlan
Parameter ParameterDescriptionParameterValue205VLAN_LIST Setthevlanlistthatnot
needFDB-loopdetectConnectedwith-and,,
forexample,1-
10,15,20,30-40
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosetexclude-vlan1,5-7:
Switch#configureterminal
Switch(config)#errdisablefdb-loopexclude-vlan1,5-7
RelatedCommands
showerrdisablefdb-loop
3.2.5errdisablerecoveryreason
CommandPurpose
Usethiscommandtoenableerrordisabledetectionforaspecifiedcauseorallcause.
Usethenoformofthiscommandtodisabletheerrordisablefeature.
CommandSyntax
errdisablerecoveryreason(all|bpduguard|bpduloop|port-security|link-flap|link-
monitor-failure|oam-remote-failure|udld|fdb-loop|loopback-detection)
noerrdisablerecoveryreason(all|bpduguard|bpduloop|port-security|link-flap|
link-monitor-failure|oam-remote-failure|udld|fdb-loop|loopback-detection)206Parameter ParameterDescriptionParameterValue
all Enabletimertorecover
fromallreason-
bpduguard Enabletimertorecover
fromBPDUGuarderror
disablestate-
bpduloop Enabletimertorecover
fromBPDULoopback
errordisablestate-
port-security Enabletimertorecover
fromPortsecurityfailure-
link-flap Enabletimertorecover
fromLinkflapfailure-
link-monitor-failure Enabletimertorecover
fromlinkmonitoringfailure-
oam-remote-failure Enabletimertorecover
fromOAMdetected
remotefailure-
udld Enabletimertorecover
fromUDLDfailure-
fdb-loop Enabletimertorecover
fromFDBloopfailure-
loopback-detection Enabletimertorecover
fromloopbackdetection
errordisablestate-
CommandMode
GlobalConfiguration207Default
Disabled
Usage
Thechangeofreasonwillnotaffectthoseinterfaceshavealreadyentererrdisable
state.
Examples
Thisexampleshowshowtoenablelinkflaperrdisablerecovery:
Switch#configureterminal
Switch(config)#errdisablerecoveryreasonlink-flap
Thisexampleshowshowtodisablelinkflaperrdisablerecovery:
Switch#configureterminal
Switch(config)#noerrdisablerecoveryreasonlink-flap
RelatedCommands
errdisablerecoveryinterval
showerrdisablerecovery
3.2.6errdisableflap
CommandPurpose
Usethiscommandtosettheparametersforlink-flaperrordisable.Usethenoformof
thiscommandtorestoretodefaultvalue.
CommandSyntax
errdisableflapreasonlink-flapCOUNTSECONDS
noerrdisableflapreasonlink-flapCOUNTSECONDS
Parameter ParameterDescriptionParameterValue
link-flap Configurelinkflap
conditions-208COUNT Maxflapcount 1-100,unit:times
SECONDS Flapcounttimeinseconds1-120,unit:second
CommandMode
GlobalConfiguration
Default
count:10,seconds:10
Usage
Onlythelinkflapcanbedetected.<1-100>isthethresholdofflapcount,and<1-
120>isthecounttimeinsecondsforflapcount.Iftheerrdisabledetectlinkflapis
enabled,willresultinlinkflaperrdisable,otherwise,willonlyprintamessageinlog.
Examples
Thisexampleshowshowtosetlinkflapconditionsto20timesin60seconds:
Switch#configureterminal
Switch(config)#errdisableflapreasonlink-flap2060
Thisexampleshowshowtodisablelinkflapconditionstodefault:
Switch#configureterminal
Switch(config)#noerrdisableflapreasonlink-flap
RelatedCommands
showerrdisableflap
3.2.7showerrdisabledetect
CommandPurpose
Usethiscommandtodisplaytheerrordisabledetectionreason.
CommandSyntax
showerrdisabledetect209CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheerrordisabledetectionreason:
DUT1#showerrdisabledetect
ErrDisableReasonDetectionstatus
---------------------------------
bpduguard Enabled
bpduloop Enabled
link-monitor-failureEnabled
oam-remote-failureEnabled
port-securityEnabled
link-flap Enabled
monitor-linkEnabled
udld Disabled
fdb-loop Disabled
loopback-detectionEnabled
reload-delayEnabled
RelatedCommands
errdisabledetect
3.2.8showerrdisablerecovery
CommandPurpose
Usethiscommandtodisplaytheerrordisablerecoverytimer.
CommandSyntax
showerrdisablerecovery210CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheerrordisablerecovery:
Switch#showerrdisablerecovery
ErrDisableReasonTimerStatus
-------------------------------
bpduguard Disabled
bpduloop Disabled
link-monitor-failureDisabled
oam-remote-failureDisabled
port-securityDisabled
link-flap Disabled
udld Disabled
fdb-loop Disabled
loopback-detectionDisabled
Timerinterval:300seconds
RelatedCommands
errdisablerecoveryinterval
errdisablerecoveryreason
3.2.9showerrdisableflap
CommandPurpose
Usethiscommandtodisplayerrordisablelinkflapparameters.211CommandSyntax
showerrdisableflap
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheflapconfiguration:
Switch#showerrdisableflap
ErrDisableReasonFlapsTime(sec)
---------------------------------
link-flap 1010
RelatedCommands
errdisableflap
3.2.10showerrdisablefdb-loop
CommandPurpose
Usethiscommandtodisplayerrordisablefdb-loopparameters.
CommandSyntax
showerrdisablefdb-loop
CommandMode
PrivilegedEXEC212Default
None
Usage
Whenmacaddressmigratesfromoneporttoanotherportfor10timesinoneminute,
thismacaddressisconsideredasflappingandswitchwouldprintaflappinglogfor
users.Thelogwouldbeprintedevery10minutes.
Examples
Thisexampleshowshowtodisplaythefdb-loopconfiguration:
Switch#showerrdisablefdb-loop
ErrdisableFDBloopinformation
----------------------------------------------------------------------
ExcludeVLAN-list :N/A
Detectingcount :10
Detectingperiod :60s
Printinglogperiod :600s
RelatedCommands
None
3.2.11errdisablefdb-looptrust
CommandPurpose
Usethiscommandtosettrustmodeoninterfaceandthisinterfacewouldnotbe
seterrordisablebyfdb-loopdetection.
Usethenoformofthiscommandtodisabletheerrordisablefeature.
CommandSyntax
errdisablefdb-looptrust
noerrdisablefdb-looptrust213CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosettrustmodeoninterfaceforfdbflap:
DUT1(config)#interfaceeth-0-1
DUT1(config-if)#errdisablefdb-looptrust
Thisexampleshowshowtounsettrustmodeoninterfaceforfdbflap:
DUT1(config)#interfaceeth-0-1
DUT1(config-if)#noerrdisablefdb-looptrust
RelatedCommands
None
3.3MACAddressTableCommands
3.3.1mac-address-tableaging-time
CommandPurpose
Usethemac-address-tableaging-timeglobalconfigurationcommandontheswitchto
setthelengthoftimethatadynamicentryremainsintheMACaddresstableafter
theentryisusedorupdated.Usethenoformofthiscommandtoreturntothedefault
setting.TheagingtimeappliestoallVLANs.
CommandSyntax
mac_address-tableaging-timeSECONDS214nomac_address-tableaging-time
Parameter ParameterDescriptionParameterValue
SECONDS Agingtime. 010-1000000,0means
thatMACagingfunction
doesnotwork
unit:second
CommandMode
GlobalConfiguration
Default
Thedefaultis300seconds
Usage
Ifpacketsarenotreceivedcontinuously,usercanincreasetheagingtimetomake
thesystemrecordingthedynamicentriesforalongertime.Increasingthetimecan
reducethepossibilityoffloodingwhenthehostssendagain.
Examples
Thisexampleshowshowtosettheagingtimeto200secondsforallVLANs:
Switch#configureterminal
Switch(config)#mac-address-tableaging-time200
RelatedCommands
showmacaddress-tableaging-time
3.3.2mac-address-tablehardware-learning
CommandPurpose
Usethemac-address-tablehardware-learningenableglobalconfigurationcommand
ontheswitchtostudyFDBwithoutsoftware.Usethenoformofthiscommandto
returntothedefaultsetting.215CommandSyntax
mac_address-tablehardware-learningenable
nomac_address-tablehardware-learningenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
Hardwarelearningismorefasterthansoftwarelearning.
Examples
Thisexampleshowshowtoenablehardwarelearning:
Switch#configureterminal
Switch(config)#mac-address-tablehardware-learningenable
RelatedCommands
None
3.3.3mac-address-tableforward
CommandPurpose
Usethemac-address-tableforwardglobalconfigurationcommandontheswitchto
addstaticaddressestotheMACaddresstable.Usethenoformofthiscommandto
removestaticentriesfromthetable.
CommandSyntax
mac_address-tableMAC_ADDRforward(IFNAME|epsEPS_ID|remote-vtep
REMOTE_VTEP_ID|smart-linkSMART_LINK_ID)vlanVLAN_ID216nomac_address-tableMAC_ADDRforward(IFNAME|epsEPS_ID|remote-vtep
REMOTE_VTEP_ID|smart-linkSMART_LINK_ID)vlanVLAN_ID
Parameter ParameterDescriptionParameterValue
MAC_ADDR DestinationMACaddress
(unicastormulticast)to
addtotheaddresstable.
Packetswiththis
destinationaddress
receivedinthespecified
VLANareforwardedtothe
specifiedinterfaceMacaddressin
HHHH.HHHH.HHHH
format
IFNAME Interfacetowhichthe
receivedpacketis
forwarded.Validinterfacesinclude
physicalportsandlink
aggregationports
VLAN_ID SpecifytheVLANfor
whichthepacketwiththe
specifiedMACaddressis
received.1-4094
EPS_ID EPSprotectiongroup.1-2048
REMOTE_VTEP_ID RemoteVTEP 1-65535
SMART_LINK_ID Smart-LinkGroup 1-16
CommandMode
GlobalConfiguration
Default
None
Usage
Thestaticaddressentrieswhichareaddedbythiscommandarenotaged.217Examples
Thisexampleshowshowtoaddthestaticaddressc2f3220a12f4totheMACaddress
tableWhenapacketisreceivedinVLAN4withthisMACaddressasitsdestination,
thepacketisforwardedtothespecifiedinterface:
Switch#configureterminal
Switch(config)#mac-address-tablec2f3.220a.12f4forwardeth-0-1vlan4
RelatedCommands
showmacaddress-table
3.3.4mac-address-tablediscard
CommandPurpose
Usethemac-address-tablediscardglobalconfigurationcommandontheswitchto
enableunicastMACaddressfilteringandtoconfiguretheswitchtodroptrafficwitha
specificsourceordestinationMACaddress.Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
mac_address-tableMAC_ADDRdiscard
nomac_address-tableMAC_ADDRdiscard
Parameter ParameterDescriptionParameterValue
MAC_ADDR SourceorDestination
MACaddress(unicast)to
addtotheaddressfiltering
table-
CommandMode
GlobalConfiguration
Default
None218Usage
Followtheseguidelineswhenusingthisfeature:
MulticastMACaddresses,broadcastMACaddresses,androuterMACaddresses
arenotsupported.PacketsthatareforwardedtotheCPUarealsonotsupported.
Examples
ThisexampleshowshowtoenableunicastMACaddressfilteringandtoconfigure
theswitchtodroppacketsthathaveasourceordestinationaddressofc2f3220a12f4
WhenapacketisreceivedwiththisMACaddressasitssourceordestination,the
packetisdropped:
Switch#configureterminal
Switch(config)#mac-address-tablec2f3.220a.12f4discard
RelatedCommands
mac-address-tableforward
3.3.5clearmacaddress-table
CommandPurpose
Usetheclearmacaddress-tableprivilegedEXECcommandontheswitchtodelete
alldynamic(orstatic,ormulticast)addresses,oralldynamic(orstatic,ormulticast)
addressesonaparticularinterface,oralldynamic(orstatic,ormulticast)addresses
onaparticularVLANfromtheMACaddresstable.
CommandSyntax
clearmacaddress-table(static|dynamic|multicast){addressMAC_ADDR|
interfaceIFNAME|vlanVLAN_ID}
Parameter ParameterDescriptionParameterValue
dynamic DeletethedynamicMAC
address-
static DeletethestaticMAC
address-219multicast DeletethemulticastMAC
address-
addressMAC_ADDR DeletethespecifiedMAC
addressMacaddressin
HHHH.HHHH.HHHH
format
interfaceIFNAME DeleteallMACaddresses
onthespecifiedphysical
portorlinkaggregation
portSupport
physical/aggregationports
vlanVLAN_ID DeleteallMACaddresses
forthespecifiedVLAN.1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoremoveaspecificMACaddressfromthedynamic
addresstable:
Switch#clearmacaddress-tabledynamicaddress0008.0070.0007
RelatedCommands
showmacaddress-table2203.3.6port-bridge
CommandPurpose
Usethiscommandtosupporttoforwardpacketswiththesrc-macanddset-mac
learnedbythesameport.
CommandSyntax
switchportport-bridgeenable
noswitchportport-bridgeenable
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoenableport-bridgefunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportport-bridgeenable
RelatedCommands
None
3.3.7showmacaddress-tableaging-time
CommandPurpose
Usetheshowmacaddress-tableaging-timeprivilegedEXECcommandtodisplay
theagingtimeofalladdresstableinstancesonallVLANs.221CommandSyntax
showmacaddress-tableaging-time
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tableaging-timecommand:
Switch#showmacaddress-tableaging-time
MACaddresstableagingtimeis300seconds
RelatedCommands
mac-address-tableaging-time
3.3.8showmacaddress-table
CommandPurpose
Usetheshowmacaddress-tableprivilegedEXECcommandtodisplayaspecific
MACaddresstablestaticanddynamicentryortheMACaddresstablestaticand
dynamicentriesonaspecificinterfaceorVLAN.
CommandSyntax
showmacaddress-table(dynamic|static|multicast|)(addressMAC_ADDR|
interfaceIFNAME|vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue222dynamic DisplaythedynamicMAC
address-
static DisplaythestaticMAC
address-
multicast DisplaythemulticastMAC
address-
addressMAC_ADDR DisplaythespecifiedMAC
addressMacaddressin
HHHH.HHHH.HHHH
format
interfaceIFNAME DisplayallMACaddresses
onthespecifiedphysical
portorlinkaggregation
portSupport
physical/aggregationports
vlanVLAN_ID DisplayallMACaddresses
forthespecifiedVLAN.1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tablecommand:
Switch#showmacaddress-table
MacAddressTable
-------------------------------------------
(*)-SecurityEntry(M)-MLAGEntry
(MO)-MLAGOutputEntry(MI)-MLAGInputEntry223VlanMacAddressTypePorts
----------------------------
10000.0000.0001staticeth-0-2
10000.0001.0003static(*)eth-0-1
10000.0001.0002static(*)eth-0-1
226fc.72e5.0100dynamic(*)eth-0-9
10100.0000.0001staticeth-0-2
RelatedCommands
mac-address-table
3.3.9showmacaddress-tablehardware
CommandPurpose
Usetheshowmacaddress-tablehardwareprivilegedEXECcommandtodisplaya
specificMACaddresstablestaticanddynamicentryortheMACaddresstablestatic
anddynamicentriesonaspecificinterfaceorVLANinhardware.
CommandSyntax
showmacaddress-tablehardware(dynamic|static|)(addressMAC_ADDR|
interfaceIFNAME|vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
dynamic DisplaythedynamicMAC
address-
static DisplaythestaticMAC
address-
addressMAC_ADDR DisplaythespecifiedMAC
addressMacaddressin
HHHH.HHHH.HHHH
format
interfaceIFNAME DisplayallMACaddresses
onthespecifiedphysical
portorlinkaggregation
portSupport
physical/aggregationports224vlanVLAN_ID DisplayallMACaddresses
forthespecifiedVLAN.1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tablehardwarecommand:
Switch#showmacaddress-tablehardware
MacAddressTable
-------------------------------------------
(*)-SecurityEntry(M)-MLAGEntry
(MO)-MLAGOutputEntry(MI)-MLAGInputEntry
VlanMacAddressTypePorts
----------------------------
10000.0000.0001staticeth-0-2
10000.0001.0003static(*)eth-0-1
10000.0001.0002static(*)eth-0-1
226fc.72e5.0100dynamic(*)eth-0-9
10100.0000.0001staticeth-0-2
RelatedCommands
mac-address-table
3.3.10showmacaddress-tablecount
CommandPurpose
Usetheshowmacaddress-tablecountprivilegedEXECcommandtodisplaythe
numberofaddressespresentinallVLANs.225CommandSyntax
showmacaddress-tablecount
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tablecountcommand:
Switch#showmacaddress-tablecount
DynamicAddressCount:1(Security:0)
StaticAddressCount:1(Security:0)
TotalMacAddresses:2(Security:0)
RelatedCommands
showmacaddress-table
3.3.11showmacaddress-tablehardwarecount
CommandPurpose
Usetheshowmacaddress-tablecountprivilegedEXECcommandtodisplaythe
numberofaddressespresentinallVLANsinhardware.
CommandSyntax
showmacaddress-tablehardwarecount226CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tablehardwarecount
command:
Switch#showmacaddress-tablehardwarecount
MACaddresscountinhardwaretable:
(IncludeMACsecurityentry)
-------------------------------------------
DynamicAddressCount:0
StaticAddressCount:0
TotalMacAddresses:0
RelatedCommands
showmacaddress-tablehardware
3.3.12showmacaddress-tableadd-fdb-fail
CommandPurpose
Usetheshowmacaddress-tableadd-fdb-failprivilegedEXECcommandtodisplay
allfailedstaticFDBentrieswhenaddingFDBtableinchipforhashconflict.
CommandSyntax
showmacaddress-tableadd-fdb-fail
CommandMode
PrivilegedEXEC227Default
None
Usage
None
Examples
Thisisanexampleofoutputfromtheshowmacaddress-tableadd-fdb-failcommand:
Switch#showmacaddress-tableadd-fdb-fail
VlanMacAddressTypePorts
--------------------------------------------------
10000.0000.0001staticeth-0-1
10000.0000.0002staticeth-0-2
RelatedCommands
showmacaddress-table
3.3.13showmac-filteraddress-table
CommandPurpose
Usetheshowmac-filteraddress-tableprivilegedEXECcommandtodisplaythe
numberoffilteraddressespresentinallVLANs.
CommandSyntax
showmac-filteraddress-table
CommandMode
PrivilegedEXEC
Default
None228Usage
None
Examples
Thisisanexampleofoutputfromtheshowmac-filteraddress-tablecommand:
Switch#showmac-filteraddress-table
MACFilterAddressTable
----------------------------------
Currentcount:0
Maxcount:128
Leftcount:128
Filteraddresslist:
----------------------------------
RelatedCommands
showmacaddress-table
3.3.14showresourcemac-filter
CommandPurpose
Usethiscommandtodisplaytheresourcestatisticusedbymac-filter.
CommandSyntax
showresourcemac-filter
CommandMode
PrivilegedEXEC
Default
None
Usage
None229Examples
Thefollowingissampleoutputfromtheshowresourcemac-filtercommand:
Switch#showresourcemac-filter
MAC-FILTER
Resource UsedCapability
=============================================================
BlackholeMACAddresses0128
RelatedCommands
showresourcestatic-fdb
3.3.15showresourcestatic-fdb
CommandPurpose
UsethiscommandtodisplaytheresourcestatisticusedbystaticFDB.
CommandSyntax
showresourcestatic-fdb
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcestatic-fdbcommand:
Switch#showresourcestatic-fdb
STATIC-FDB
Resource UsedCapability230=============================================================
StaticFDB 01024
RelatedCommands
showresourcemac-filter
3.4VLANCommands
3.4.1vlandatabase
CommandPurpose
UsethiscommandtoenterVLANconfiguremode.
CommandSyntax
vlandatabase
CommandMode
GlobalConfiguration
Default
None
Usage
WhenyoutrytocreateorremoveVLAN,youmustusethiscommandtoenterVLAN
configuremodefirst.ToexitVLANconfiguremode,useexitcommand.
Examples
ThisexampleshowshowtoenterVLANconfiguremode:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#
ThisexampleshowshowtoexitVLANconfiguremode:
Switch#configureterminal
Switch(config)#vlandatabase231Switch(config-vlan)#exit
Switch(config)#
RelatedCommands
exit
3.4.2vlan
CommandPurpose
UsethevlanVLANconfigurationcommandtoconfigureVLANcharacteristicsfora
VLANintheVLANdatabase.UsethenoformofthiscommandtodeleteaVLAN.
CommandSyntax
vlanVLAN_ID(nameNAME|)(state(enable|disable)|)
novlanVLAN_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 1-4094
NAME thenameforspecificvlan,Astringwithnomorethan
31characters
enable settheoperationalstateof
theVLANtoenable,andit
isenabledbydefault-
disable settheoperationalstateof
theVLANtodisable-
CommandMode
VLANConfiguration
Default
VLAN1isthedefaultVLANandallportshavebeenaddedtoitbydefault.232Usage
DefaultVLAN1cannotberemoved.
Examples
ThisexampleshowshowtocreateVLAN11andnamedittovlan11:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan11namevlan11stateenable
ThisexampleshowshowtoremoveVLAN11:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#novlan11
RelatedCommands
vlanVLAN_LIST
showvlanvlan
showvlanall
3.4.3vlanport
CommandPurpose
UsethevlanVLANconfigurationcommandtoaddVLANtoport.Usethenoformof
thiscommandtoremoveVLANfromport.
CommandSyntax
vlanVLAN_IDportslotSLOT_IDportPORT_ID
novlanVLAN_IDportslotSLOT_IDportPORT_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 1-4094
SLOT_ID Theslotidoftheport -
PORT_ID Theportidoftheport-233CommandMode
VLANConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoaddVLAN11toeth-0-4:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan11portslot0port4
RelatedCommands
vlanVLAN_LIST
3.4.4vlanVLAN_LIST
CommandPurpose
UsethevlanVLAN_LISTconfigurationcommandtoaddanormal-rangeVLANsto
theVLANdatabase.
CommandSyntax
vlanVLAN_LIST
novlanVLAN_LIST
Parameter ParameterDescriptionParameterValue
VLAN_LIST vlanlist vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-40234CommandMode
VLANConfiguration
Default
Vlan1isthedefaultvlanandallportshavebeenaddedtoitbydefault.
Usage
Thevlanlistshouldbeconnectedwith-and,,thevalueshouldbeintherangeof
<1-4094>andshouldbeascendingorder.
DefaultVLAN1cannotberemoved.
Examples
Thisexampleshowshowtoaddvlansof100,200,300-400:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan100,200,300-400
Thisexampleshowshowtoremovevlansof100,200,300-400:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#novlan100,200,300-400
RelatedCommands
vlan<1-4094>
showvlanvlan
showvlanall
3.4.5showvlan
CommandPurpose
Usethiscommandtodisplayspecificvlaninformation.235CommandSyntax
showvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplayVLANpropertyincludingname,state,stpid,DSCP,
memberports.
Examples
ThisexampleshowshowtodisplaytheinformationonVLAN11:
Switch#showvlan11
VLANIDName StateSTPIDMemberports
(u)-Untagged,(t)-Tagged
============================================================================
11VLAN0011 ACTIVE0eth-0-3(u)eth-0-4(t)
RelatedCommands
showvlanall
3.4.6showvlanall
CommandPurpose
UsethiscommandtoshowtheinformationofalltheVLAN.236CommandSyntax
showvlanall
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplayallVLANpropertyincludingname,state,stpid,
DSCP,memberports.
Examples
ThisexampleshowshowtodisplaytheinformationonVLANall:
Switch#showvlanall
VLANIDName StateSTPIDMemberports
(u)-Untagged,(t)-Tagged
============================================================================
1default ACTIVE0eth-0-1(u)eth-0-2(u)
eth-0-4(t)eth-0-5(u)
11VLAN0011 ACTIVE0eth-0-3(u)eth-0-4(t)
RelatedCommands
showvlanvlan
3.4.7showvlanbrief
CommandPurpose
UsethiscommandtoshowthebriefinformationonVLAN.
CommandSyntax
showvlanbrief237CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplayallVLANinformationforallbridges,includingstatic
anddynamic.
Examples
ThisexampleshowshowtodisplaythebriefinformationonVLAN:
Switch#showvlanbrief
VLANIDName StateSTPIDMemberports
(u)-Untagged,(t)-Tagged
============================================================================
1default ACTIVE0eth-0-1(u)eth-0-2(u)
eth-0-4(u)eth-0-5(u)
10VLAN0010 ACTIVE0eth-0-3(u)
RelatedCommands
showvlanvlan
3.4.8showinterfaceswitchport
CommandPurpose
Usethiscommandtoshowthevlanconfigurationsonallbridgeportsorabridgeport.
CommandSyntax
showinterfaceswitchport{interfaceIFNAME|}
Parameter ParameterDescriptionParameterValue238IFNAME Interfacename Supportaggregationand
physicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplayoneorallVLANsL2configurations.
Examples
Thisexampleshowshowtodisplaythevlanconfigurationsonallbridgeportsora
bridgeport:
Switch#showinterfaceswitchportinterfaceeth-0-1
Interfacename:eth-0-1
Switchportmode:access
Ingressfilter:enable
Acceptableframetypes:vlan-untaggedonly
DefaultVlan:1
ConfiguredVlans:1
Interfacename:eth-0-2
Switchportmode:access
Ingressfilter:enable
Acceptableframetypes:vlan-untaggedonly
DefaultVlan:1
ConfiguredVlans:1
RelatedCommands
switchportmodeaccess
switchportmodetrunk2393.4.9switchportaccessallowed
CommandPurpose
Usethiscommandtoalloworremovetheaccessporttothespecifidvlan
CommandSyntax
switchportaccessallowedvlan(addremove)VLAN_ID_LIST
Parameter ParameterDescriptionParameterValue
add addtheporttothe
specifiedvlan-
remove removetheportfromthe
specifiedvlan-
VLAN_ID_LIST vlanlist Connectedwith-and,,
forexample,1-
10,15,20,30-40
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandusedtoalloworforbidtheporttransmitinspecifiedvlan.
Examples
Thisexampleshowshowtoaddtheaccessporttovlan11:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessallowedvlanadd11
Thisexampleshowshowtoremovetheaccessporttovlan12:240Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessallowedvlanremove12
RelatedCommands
switchporttrunkallowed
3.4.10switchportaccessvlan
CommandPurpose
Usethiscommandtoaddporttoaspecified.Usethenoformofthiscommandtoadd
porttovlan1.
CommandSyntax
switchportaccessvlanVLAN_ID
noswitchportaccessvlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
CommandMode
InterfaceConfiguration
Default
Allportsaredefaultinvlan1
Usage
Usedtheswitchportmodeaccesscommandtoswitchtheporttoaccessmode
beforeusethiscommand.
Examples
Thisexampleshowshowtoaddtheaccessporttovlan11:241Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportaccessvlan11
Thisexampleshowshowtoreverttheporttovlan1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportaccessvlan
RelatedCommands
switchportmodeaccess
3.4.11switchportmodeaccess
CommandPurpose
Usethiscommandtoswithporttoaccessmode.
CommandSyntax
switchportmodeaccess
CommandMode
InterfaceConfiguration
Default
None
Usage
Accessmodeusedtoconnectterminal,e.g:PC.TheFDBontheportwillbecleared
whenswitchtheportmode.
Examples
Thisexampleshowshowtosettheporttoaccessmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeaccess242RelatedCommands
switchportmodetrunk
3.4.12switchportmodetrunk
CommandPurpose
Usethiscommandtoswithporttotrunkmode.
CommandSyntax
switchportmodetrunk
CommandMode
InterfaceConfiguration
Default
None
Usage
Trunkmodeusedtoconnectswithdeviceorterminal.TheFDBontheportwillbe
clearedwhenswitchtheportmode.
Examples
Thisexampleshowshowtosettheporttotrunkmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodetrunk
RelatedCommands
switchportmodeaccess2433.4.13switchporttrunkallowed
CommandPurpose
Usethiscommandtoalloworremovethetrunkporttothespecifidvlan
CommandSyntax
switchporttrunkallowedvlan(addVLAN_ID_LISTremoveVLAN_ID_LIST|all|
none)
noswitchporttrunk
Parameter ParameterDescriptionParameterValue
VLAN_ID_LIST vlanlist Connectedwith-and,,
forexample,1-
10,15,20,30-40
add addtheporttothe
specifiedvlan-
remove removetheportfromthe
specifiedvlan-
all addtheporttoallvlans-
none removetheportfromall
vlans-
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandusedtoalloworforbidtheporttransmitinspecifiedvlan.244Examples
Thisexampleshowshowtoaddtheportinvlan11,12:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanadd11,12
Thisexampleshowshowtoremovetheportfromvlan11,12:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanremove11,12
Thisexampleshowshowtoallowtheporttransmitinallvlan:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlanall
Thisexampleshowshowtoforbidtheporttransmitinallvlan:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkallowedvlannone
RelatedCommands
switchportaccessallowed
3.4.14switchporttrunknative
CommandPurpose
UsethiscommandtoconfigurethedefaultVLANforthistrunkport.
CommandSyntax
switchporttrunknativevlanVLAN_ID
noswitchporttrunknativevlan
Parameter ParameterDescriptionParameterValue
VLAN_ID AnexistingVlanid 2-4094245CommandMode
InterfaceConfiguration
Default
vlan1
Usage
ThiscommandisusedtosetthenativeVLANforsendingandreceivinguntagged
traffic.
Examples
Thisexampleshowshowtosetthenativevlantovlan10ontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunknativevlan10
Thisexampleshowshowtoreturnthenativevlantodefaultontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchporttrunknativevlan
RelatedCommands
switchporttrunkallowed
3.4.15switchporttrunkunatggedvlan
CommandPurpose
Usethiscommandtostripthepacketsvlantagoutofthisport.
CommandSyntax
switchporttrunkuntaggedvlanVLAN_ID_LIST
noswitchporttrunkuntaggedvlanVLAN_ID_LIST
Parameter ParameterDescriptionParameterValue246VLAN_ID_LIST vlanlist Connectedwith-and,,
forexample,1-
10,15,20,30-40
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoallocatetheneedingstripvlantagontheinterface.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkuntaggedvlan1-2
RelatedCommands
None
3.4.16vlanbridgedisable
CommandPurpose
UsethiscommandtodisablebridgefunctiononspecificVLAN.Toenableit,usethe
noformofthiscommand.
CommandSyntax
vlanVLAN_IDbridgedisable
novlanvlanbridgedisable
Parameter ParameterDescriptionParameterValue247VLAN_ID Vlanid 1-4094
CommandMode
VLANConfiguration
Default
Vlanbridgeenable
Usage
None
Examples
ThisexampleshowshowtodisablebridgefunctiononVLAN2:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan10bridgedisable
ThisexampleshowshowtoenablebridgefunctiononVLAN2:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#novlan10bridgedisable
RelatedCommands
None
3.4.17vlanstatisticsenable
CommandPurpose
UsethiscommandtoenablethestatisticsofVLAN.
Todisablethestatistics,usethenoformofthiscommand.
CommandSyntax
vlanVLAN_IDstatisticsenable248novlanVLAN_IDstatisticsenable
Parameter ParameterDescriptionParameterValue
VLAN_ID AnexistingVlanid 1-4094
CommandMode
VLANConfiguration
Default
inactive
Usage
none
Examples
Thisexampleshowshowtoenablethestatisticsofvlan2:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2statisticsenable
Thisexampleshowshowtodisablethestatisticsofvlan2:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#novlan2statisticsenable
RelatedCommands
vlanstatisticsinterval
clearvlanstatistics
showvlanvlanstatistics
3.4.18vlanstatisticsinterval
CommandPurpose
Usethiscommandtosetsampleinterval.249Torestoretodefaultvalue,usethenoformofthiscommand.
CommandSyntax
vlanstatisticsintervalVALUE
novlanstatisticsintval
Parameter ParameterDescriptionParameterValue
VALUE Sampleinterval 5-600,unit:second
CommandMode
VLANConfiguration
Default
10s
Usage
none
Examples
Thisexampleshowshowtosetsampleinterval:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlanstatisticsinterval20
RelatedCommands
vlanstatisticsenable
clearvlanstatistics
showvlanvlanstatistics2503.4.19clearvlanstatistics
CommandPurpose
Usethiscommandtoclearstatisticsinformation.
CommandSyntax
clearvlanVLAN_IDstatistics
Parameter ParameterDescriptionParameterValue
VLAN_ID AnexistingVlanid 1-4094
CommandMode
PrivilegedEXEC
Default
none
Usage
none
Examples
Thisexampleshowshowtoclearvlanstatistics:
Switch#clearvlan2statistics
RelatedCommands
vlanstatisticsenable
vlanstatisticsinterval
showvlanvlanstatistics2513.4.20showvlanstatistics
CommandPurpose
Usethiscommandtoshowstatisticsinformation.
CommandSyntax
showvlanVLAN_IDstatistics
Parameter ParameterDescriptionParameterValue
VLAN_ID AnexistingVlanid 1-4094
CommandMode
PrivilegedEXEC
Default
none
Usage
none
Examples
Thisexampleshowshowtoshowvlanstatistics:
Switch#showvlan2statistics
VLAN:2
----------------------------------------------------------------
Item Packets
----------------------------------------------------------------
Inbound: 3654365
Outbound: 3654365
----------------------------------------------------------------
RelatedCommands
vlanstatisticsenable252vlanstatisticsinterval
3.4.21showresourcevlan-stats
CommandPurpose
Usethiscommandtoshowtheresourcestatisticusedbyvlanstatistics.
CommandSyntax
showresourcevlan-stats
CommandMode
PrivilegedEXEC
Default
none
Usage
none
Examples
Thisexampleshowshowtoshowresourceusedbyvlanstatistics:
Switch#showresourcevlan-stats
VLAN-STATS
Resource UsedCapability
=============================================================
AppliedVLANStatsEntry1128
RelatedCommands
vlanstatisticsenable2533.5VoiceVLANCommands
3.5.1voicevlan
CommandPurpose
UsethiscommandtospecificVLANasVOICEVLAN.
CommandSyntax
voicevlanVLAN_ID
novoicevlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
CommandMode
GlobalConfiguration
Default
VoiceVLANisdisable
Usage
ThiscommandisenabledVOICEVLAN.
Examples
ThisexampleshowshowtoenableVLAN2asVOICEVLAN:
Switch#configureterminal
Switch(config)#voicevlan2
RelatedCommands
None2543.5.2voicevlansecurityenable
CommandPurpose
UsethiscommandtoenableVOICEVLANsecurity.
CommandSyntax
voicevlansecurityenable
novoicevlansecurityenable
CommandMode
GlobalConfiguration
Default
Bydefaultthemodeissecurity.
Usage
Ifthesecurityisenabled,allthepacketthatwhoseMACismismatchedwithOUIwill
bedroppedinVOICEVLAN.
Examples
Thisexampleshowshowtoenablesecurity:
Switch#configureterminal
Switch(config)#voicevlansecurityenable
RelatedCommands
showvoicevlanstate
3.5.3voicevlansetcosto
CommandPurpose
UsethiscommandtosetCOSforVOICEpacket.255CommandSyntax
voicevlansetcostoCOS
novoicevlansetcos
Parameter ParameterDescriptionParameterValue
COS cosvalue 0-7
CommandMode
GlobalConfiguration
Default
Bydefaultthephbis5
Usage
ThiscommandisusedtosetCOSforVOICEpacketinglobalconfiguration.
Examples
Thisexampleshowshowtosetcosto7:
Switch#configureterminal
Switch(config)#voicevlansetcosto7
RelatedCommands
showvoicevlanstate
3.5.4voicevlanmac-address
CommandPurpose
UsethiscommandtoaddOUItosystem.
CommandSyntax
voicevlanmac-addressMACMASKdescriptionLINE256novoicevlanmac-addressMAC
Parameter ParameterDescriptionParameterValue
MAC SourceMACaddress
(unicastormulticast)to
addtotheaddresstableMACAddressin
HHHH.HHHH.HHHH
format
MASK TheMASKfortheSource
MACMACMaskin
HHHH.HHHH.HHHH
format
LINE Thedescriptionforthis
OUIUpto63characters
CommandMode
GlobalConfiguration
Default
Thereare5defaultOUIinthesystem.:
0003-6b00-0000Ciscophone
000f-e200-0000H3CAolynkphone
00d0-1e00-0000Pingtelphone
00e0-7500-0000Polycomphone
00e0-bb00-00003Comphone
Usage
ThiscommandisusedtoaddOUItosystemdatabase.Thepacketwillbeconsidered
asVOICEVLANpacketwhenthesourceMACmatchtheOUI.
Examples
ThisexampleshowshowtoaddOUItosystem:
Switch#configureterminal
Switch(config)#voicevlanmac-address0034.3400.0000FFFF.FF00.0000descriptiontest257RelatedCommands
showvoicevlanstate
3.5.5voicevlanenable
CommandPurpose
UsethiscommandtoenableVOICEVLANonport.
CommandSyntax
voicevlanenable
novoicevlanenable
CommandMode
InterfaceConfiguration
Default
VOICEVLANisdisableonport
Usage
ThiscommandisusedtoenableVOICEVLANonport.
Examples
ThisexampleshowshowtoenableVOICEVLANonport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#voicevlanenable
RelatedCommands
showvoicevlanstate2583.5.6showvoicevlanstate
CommandPurpose
UsethiscommandtoshowthecurrentstatusofVOICECVLAN.
CommandSyntax
showvoicevlanstate
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtoshowthecurrentstatusofVOICECVLAN.
Examples
ThisexampleshowshowtoshowthecurrentstatusofVOICECVLAN:
Switch#showvoicevlanstate
RelatedCommands
voicevlanenable
3.6LinkAggregationCommands
3.6.1channel-group
CommandPurpose
Usethiscommandtoassignaporttoachannelgroup.Usethenoformofthis
commandtoremoveaportfromachannelgroup.259CommandSyntax
channel-groupGROUP_NUMBERmode(active|passive)
nochannel-group
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber1-63
active EnableinitiationofLACP
negotiationonaport-
passive DisableinitiationofLACP
negotiationonaport-
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoassignaporttoachannelgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#channel-group1modeactive
Thisexampleshowshowtoremoveaportfromanchannelgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nochannel-group
RelatedCommands
None2603.6.2static-channel-group
CommandPurpose
Usethiscommandtoassignaporttoastaticchannelgroup.Usethenoformofthis
commandtoremoveaportfromastaticchannelgroup.
CommandSyntax
static-channel-groupGROUP_NUMBER
nostatic-channel-group
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoassignaporttoastaticchannelgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#static-channel-group1
Thisexampleshowshowtoremoveaportfromastaticchannelgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nostatic-channel-group261RelatedCommands
None
3.6.3distribute-weight
CommandPurpose
Usethiscommandtoconfigurethedistribute-weightofmemberforthestaticchannel
grouportheLinkAggregationControlProtocol(LACP).Usethenoformofthis
commandtoreturntothedefaultsetting.
CommandSyntax
distribute-weightWEIGHT
Parameter ParameterDescriptionParameterValue
WEIGHT Distribute-weight 1-256
CommandMode
InterfaceConfiguration
Default
1
Usage
Distribute-weightisonlysupportedinnon-selfing-healingofstaticload-balance-mode
memberport,andthetotalweightsofmemberportscannotexceedthemaximum
numberofmemberports.
Examples
Thisexampleshowshowtoconfigurethedistribute-weight10formember:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#static-channel-group1
Switch(config-if)#distribute-weight10262Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#static-channel-group1
Switch(config-if)#nodistribute-weight
RelatedCommands
None
3.6.4lacpmax-active-linknumber
CommandPurpose
UsethiscommandtoconfiguretheaggregatormaxactivelinknumberfortheLink
AggregationControlProtocol(LACP).Usethenoformofthiscommandtoreturnto
thedefaultsetting.
CommandSyntax
lacpmax-active-linknumberNUMBER
Parameter ParameterDescriptionParameterValue
NUMBER Max-active-linknumber1-255
CommandMode
InterfaceConfiguration
Default
255
Usage
Max-active-linknumisonlysupportedintheaggregatorofLinkAggregationControl
Protocol(LACP)263Examples
Thisexampleshowshowtoconfigurethemax-active-linknumber100fortheLink
AggregationControlProtocol(LACP)aggregator:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#lacpmax-active-linknumber100
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#nolacpmax-active-linknumber
RelatedCommands
None
3.6.5lacppreemptenable
CommandPurpose
UsethiscommandtoenabletheaggregatorofAggregationControlProtocol(LACP)
preemption.Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
lacppreemptenable
nolacppreemptenable
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
lacppreemptenableisonlysupportedintheaggregatorofLinkAggregationControl
Protocol(LACP)264Examples
ThisexampleshowshowtoenablepreemptfortheLinkAggregationControlProtocol
(LACP)aggregator:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#lacppreemptenable
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#nolacppreemptenable
RelatedCommands
None
3.6.6lacppreemptdelay
CommandPurpose
UsethiscommandtoconfigtheaggregatorofAggregationControlProtocol(LACP)
preemptdelay.Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
lacppreemptdelayTIME
nolacppreemptdelay
Parameter ParameterDescriptionParameterValue
TIME preemptdelaytime 0-180
CommandMode
InterfaceConfiguration
Default
30265Usage
lacppreemptdelayisonlysupportedintheaggregatorofLinkAggregationControl
Protocol(LACP),andtakeeffectwhenpreemptisenabled
Examples
Thisexampleshowshowtoconfigurelacppreemptdelay100fortheLink
AggregationControlProtocol(LACP)aggregator:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#lacppreemptdelay100
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#nolacppreemptdelay
RelatedCommands
None
3.6.7lacpport-idextend
CommandPurpose
UsethiscommandtoconfiguretheportnumberextendfortheLinkAggregation
ControlProtocol(LACP).Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
lacpport-idextendValue
Parameter ParameterDescriptionParameterValue
VALUE LACPportidextendvalue1-2
CommandMode
InterfaceConfiguration266Default
Disabled
Usage
None
Examples
Thisexampleshowshowtoconfiguretheport-idextend1fortheLinkAggregation
ControlProtocol(LACP)aggregator:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#lacpport-idextend1
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#nolacpport-idextend
RelatedCommands
None
3.6.8lacpport-priority
CommandPurpose
UsethiscommandtoconfiguretheportpriorityfortheLinkAggregationControl
Protocol(LACP).Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
lacpport-priorityPRIORITY
Parameter ParameterDescriptionParameterValue
PRIORITY LACPportpriority 1-65535267CommandMode
InterfaceConfiguration
Default
32768
Usage
None
Examples
Thisexampleshowshowtoconfiguretheportpriority100fortheLinkAggregation
ControlProtocol(LACP)member:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lacpport-priority100
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nolacpport-priority
RelatedCommands
None
3.6.9lacptimeout
CommandPurpose
UsethiscommandtoconfiguretheporttimeoutfortheLinkAggregationControl
Protocol(LACP).Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
lacptimeout(short|long)
Parameter ParameterDescriptionParameterValue268short SetLACPshorttimeout-
long SetLACPlongtimeout-
CommandMode
InterfaceConfiguration
Default
Long
Usage
None
Examples
ThisexampleshowshowtoconfiguretheporttimeoutshortfortheLinkAggregation
ControlProtocol(LACP):
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lacptimeoutshort
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nolacptimeout
RelatedCommands
None
3.6.10lacpsystem-priority
CommandPurpose
UsethiscommandtoconfigurethesystempriorityfortheLinkAggregationControl
Protocol(LACP).Usethenoformofthiscommandtoreturntothedefaultsetting.269CommandSyntax
lacpsystem-priorityPRIORITY
Parameter ParameterDescriptionParameterValue
PRIORITY LACPsystempriority 1-65535
CommandMode
GlobalConfiguration
Default
32768
Usage
None
Examples
Thisexampleshowshowtoconfigurethesystempriority100fortheLink
AggregationControlProtocol(LACP):
Switch#configureterminal
Switch(config)#lacpsystem-priority100
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#nolacpsystem-priority
RelatedCommands
None
3.6.11lacpmlagsystem-id
CommandPurpose
UsethiscommandtoconfigurethemlagsystemidfortheLinkAggregationControl
Protocol(LACP).Usethenoformofthiscommandtoreturntothedefaultsetting.270CommandSyntax
lacpmlagsystem-idMAC
nolacpmlagsystem-id
Parameter ParameterDescriptionParameterValue
MAC LACPmlagsystemid Macaddressin
HHHH.HHHH.HHHH
format
CommandMode
GlobalConfiguration
Default
systemroute-mac
Usage
None
Examples
Thisexampleshowshowtoconfigurethemlagsystemid1111.1111.1111fortheLink
AggregationControlProtocol(LACP):
Switch#configureterminal
Switch(config)#lacpmlagsystem-id1111.1111.1111
Thisexampleshowshowtoreturntothedefaultsetting:
Switch#configureterminal
Switch(config)#nolacpmlagsystem-id
RelatedCommands
None2713.6.12port-channelchannel-group-numberload-balance-mode
dynamic
CommandPurpose
UsethiscommandtoenabledynamicloadbalancefortheLinkAggregationGroup
(bothstaticanddynamicaggregator).Usethenoformofthiscommandtoreturnto
thedefaultsetting.
CommandSyntax
port-channelGROUP_NUMBERload-balance-modedynamic(flow-number
FLOW_NUMBER|)
noport-channelGROUP_NUMBERload-balance-mode
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
FLOW_NUMBER FlowNumber,default
valueis32,canbe
32/64/128/256/512/1024/2
048/4096/8192-
CommandMode
GlobalConfiguration
Default
None
Usage
Beforeenableordisabletheload-balancemode,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenabledynamicloadbalanceforagg1:272Switch#configureterminal
Switch(config)#port-channel1load-balance-modedynamic
RelatedCommands
None
3.6.13port-channelchannel-group-numberload-balance-mode
resilient
CommandPurpose
UsethiscommandtoenableresilientloadbalancefortheLinkAggregation
Group(bothstaticanddynamicaggregator).Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
port-channelGROUP_NUMBERload-balance-moderesilient(flow-number
FLOW_NUMBER|)
noport-channelchannel-group-numberload-balance-mode
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
FLOW_NUMBER FlowNumber,default
valueis32,canbe
32/64/128/256-
CommandMode
GlobalConfiguration
Default
None273Usage
Beforeenableordisabletheload-balancemode,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenableresilientloadbalanceforagg1:
Switch#configureterminal
Switch(config)#port-channel1load-balance-moderesilient
RelatedCommands
None
3.6.14port-channelchannel-group-numberload-balance-mode
round-robin
CommandPurpose
Usethiscommandtoenableround-robinloadbalancefortheLinkAggregation
Group(bothstaticanddynamicaggregator).Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
port-channelGROUP_NUMBERload-balance-moderound-robin(flow-number
FLOW_NUMBER|)
noport-channelGROUP_NUMBERload-balance-mode
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
FLOW_NUMBER FlowNumber,default
valueis24-
CommandMode
GlobalConfiguration274Default
None
Usage
Beforeenableordisabletheload-balancemode,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenableround-robinloadbalanceforagg1:
Switch#configureterminal
Switch(config)#port-channel1load-balance-moderound-robin
RelatedCommands
None
3.6.15port-channelchannel-group-numberself-healing
CommandPurpose
Usethiscommandtoenableself-healingfortheLinkAggregationGroup(bothstatic
anddynamicaggregator).Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
port-channelGROUP_NUMBERself-healing
noport-channelGROUP_NUMBERself-healing
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
GlobalConfiguration275Default
None
Usage
Beforeenableordisabletheself-healing,theLinkAggregationGroupshouldnotbe
create.
Examples
Thisexampleshowshowtoenableself-healingforagg1:
Switch#configureterminal
Switch(config)#port-channel1self-healing
RelatedCommands
None
3.6.16port-channelchannel-group-numbersession-
preservation
CommandPurpose
UsethiscommandtoenableEnablesessionpreservationmechanismfortheLink
AggregationGroup(bothstaticanddynamicaggregator).Usethenoformofthis
commandtoreturntothedefaultsetting.
CommandSyntax
port-channelGROUP_NUMBERsession-preservation
noport-channelGROUP_NUMBERsession-preservation
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
GlobalConfiguration276Default
None
Usage
Beforeenableordisablesession-preservation,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenablesession-preservationforagg1:
Switch#configureterminal
Switch(config)#port-channel1session-preservation
RelatedCommands
None
3.6.17port-channelchannel-group-numberstatic
CommandPurpose
UsethiscommandtoenablestaticloadbalancefortheLinkAggregationGroup(both
staticanddynamicaggregator).Usethenoformofthiscommandtoreturntothe
defaultsetting.
CommandSyntax
port-channelGROUP_NUMBERload-balance-modestatic(flow-number
FLOW_NUMBER|)
noport-channelGROUP_NUMBERload-balance-mode
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
FLOW_NUMBER FlowNumber,default
valueis16,canbe
1~24/32/64/128-277CommandMode
GlobalConfiguration
Default
None
Usage
Beforeenableordisabletheload-balancemode,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenablestaticloadbalanceforagg1:
Switch#configureterminal
Switch(config)#port-channel1load-balance-modestatic
RelatedCommands
None
3.6.18port-channelchannel-group-numberlacp-modedynamic
CommandPurpose
UsethiscommandtoenabledynamiclacpfortheLinkAggregationGroup(only
dynamicaggregator).Usethenoformofthiscommandtounsetthesetting.
CommandSyntax
port-channelGROUP_NUMBERlacp-modedynamic
noport-channelGROUP_NUMBERlacp-mode
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63278CommandMode
GlobalConfiguration
Default
None
Usage
Beforeenableordisablethedynamiclacpmode,theLinkAggregationGroupshould
notbecreate.
Examples
Thisexampleshowshowtoenabledynamiclacp-modeforagg1:
Switch#configureterminal
Switch(config)#port-channel1lacp-modedynamic
RelatedCommands
None
3.6.19port-channelgroup-mode
CommandPurpose
UsethiscommandtoswitchtheLinkAggregationGroupmode.Usethenoformof
thiscommandtoreturntothedefaultgroupmode(56).LacpcannotuseID0.
CommandSyntax
port-channelgroup-mode(flexible|8|16|32|56)
noport-channelgroup-mode
Parameter ParameterDescriptionParameterValue
flexible Groupmodeflexible,the
grouprangeis0~63-2798 Groupmode8,thegroup
rangeis0~78
16 Groupmode16,thegroup
rangeis0~1516
32 Groupmode32,thegroup
rangeis0~3132
56 Groupmode32,thegroup
rangeis0~5556
CommandMode
GlobalConfiguration
Default
flexible
Usage
Thelinkagggroup-modeyouspecifiedwillnottakeeffectuntilyousaveconfiguration
andreboot
Examples
Thisexampleshowshowtoswitchtogroupmode32:
Switch#configureterminal
Switch(config)#port-channelgroup-mode32
RelatedCommands
None
3.6.20local-preference
CommandPurpose
Usethiscommandtoconfigurelocal-preferencemodeoflinkaggregation.280CommandSyntax
local-preferenceenable|disable
Parameter ParameterDescriptionParameterValue
enable Enablelocal-preference-
disable Disablelocal-preference-
CommandMode
InterfaceConfiguration
Default
Enabled
Usage
None
Examples
Thisexampleshowshowtoconfigurelocal-preferencemodeoflinkaggregation:
DUT1#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
DUT1(config)#interfaceagg1
DUT1(config-if)#local-preferenceenable
RelatedCommands
None
3.6.21showchannel-groupsummary
CommandPurpose
Usethiscommandtodisplayasummaryofallofthechannelgroups,oraspecified
channelgroup.281CommandSyntax
showchannel-group(channel-group-number|)summary
Parameter ParameterDescriptionParameterValue
channel-group-numberChannelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayasummaryofallofthechannelgroups:
Switch#showchannel-groupsummary
port-channelload-balancehash-arithmetic:xor
port-channelload-balancehash-field-select:
ipsaipdasrcportdstportip-protocol
port-channelgroup-mode:flexible
Flags:s-SuspendT-Standby
D-Down/AdmindownB-Inbundle
R-Layer3S-Layer2
w-WaitU-Inuse
Mode:SLB-Staticloadbalance
DLB-Dynamicloadbalance
RR-Roundrobinloadbalance
RLB-Resilientloadbalance
AggregatorNameModeProtocolPorts
----------------+---------+------------+----------------------------------------
-------
agg4(SD)SLBStaticeth-0-10(D)282RelatedCommands
None
3.6.22showchannel-groupdetail
CommandPurpose
Usethiscommandtodisplaydetailedinformationofallofthechannelgroups,ora
specifiedchannelgroup.
CommandSyntax
showchannel-group(GROUP_NUMBER|)detail
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaydetailedinformationofthechannelgroup10:
Switch#showchannel-groupdetail
Channel-grouplisting:
----------------------
Group:4
----------
Groupstate:L2
Ports:1Maxports:16283Numberofportsinbundle:0MaxChannel-groups:63
Protocol:Static
Portsinthegroup:
-------------------
Port:eth-0-10
------------
Portstate:downNot-in-Bndl
Channelgroup:4Protocol:StaticPort-channel:agg4
Portindex:10
RelatedCommands
None
3.6.23showlacpinternal
CommandPurpose
Usethiscommandtodisplayinternalinformationofallofthechannelgroups,ora
specifiedchannelgroup.
CommandSyntax
showlacp(GROUP_NUMBER|)internal
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None284Examples
Thisexampleshowshowtodisplayinternalinformationofallofthechannelgroups:
Switch#showlacpinternal
Flags:S-DeviceisrequestingSlowLACPDUs
F-DeviceisrequestingFastLACPDUs
A-DeviceisinActivemodeP-DeviceisinPassivemode
Channelgroup1
LACPportAdminOperPortPort
PortFlagsStatePrioritykeyKeyNumberState
eth-0-9SAbndl32768110x90x3d
RelatedCommands
None
3.6.24showlacpinternaldetail
CommandPurpose
Usethiscommandtodisplaydetailedinternalinformationofallofthechannelgroups,
oraspecifiedchannelgroup.
CommandSyntax
showlacp(GROUP_NUMBER|)internaldetail
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None285Usage
None
Examples
Thisexampleshowshowtodisplaydetailedinternalinformationofallofthechannel
groups:
Switch#showlacpinternaldetail
Flags:S-DeviceisrequestingSlowLACPDUs
F-DeviceisrequestingFastLACPDUs
A-DeviceisinActivemodeP-DeviceisinPassivemode
Channelgroup1
Actor'sinformation:
Actor ActorActor
PortSystemID PortNumberFlags
eth-0-932768,e0ef.1a32.7e000x9SA
LACPActorActorActor
PortPriorityOperKeyPortState
3276810x4d
PortStateFlagsDecode:
Activity:Timeout:Aggregation:Synchronization:
ActiveLongYesYes
Collecting:Distributing:Defaulted:Expired:
NoNoYesNo
RelatedCommands
None
3.6.25showlacpneighbor
CommandPurpose
Usethiscommandtodisplayneighborinformationofallofthechannelgroups,ora
specifiedchannelgroup.
CommandSyntax
showlacp(GROUP_NUMBER|)neighbor286Parameter ParameterDescriptionParameterValue
channel-group-
numberGROUP_NUMBERChannelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayneighborinformationofallofthechannelgroups:
Switch#showlacpneighbor
Flags:S-DeviceisrequestingSlowLACPDUs
F-DeviceisrequestingFastLACPDUs
A-DeviceisinActivemodeP-DeviceisinPassivemode
Channelgroup1neighbors
Partner'sinformation:
LACPport AdminOperPortPort
PortFlagsPriorityDevIDkeyKeyNumberState
eth-0-9FP00000.0000.0000000x00x46
RelatedCommands
None
3.6.26showlacpneighbordetail
CommandPurpose
Usethiscommandtodisplaydetailedneighborinformationofallofthechannel
groups,oraspecifiedchannelgroup.287CommandSyntax
showlacp(GROUP_NUMBER|)neighbordetail
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaydetailedneighborinformationofallofthechannel
groups:
Switch#showlacpneighbordetail
Flags:S-DeviceisrequestingSlowLACPDUs
F-DeviceisrequestingFastLACPDUs
A-DeviceisinActivemodeP-DeviceisinPassivemode
Channelgroup1neighbors
Partner'sinformation:
Partner PartnerPartner
PortSystemID PortNumberFlags
eth-0-932768,0000.0000.00000x0SP
LACPPartnerPartnerPartner
PortPriorityOperKeyPortState
0 0 0x44
PortStateFlagsDecode:
Activity:Timeout:Aggregation:Synchronization:
PassiveLongYesNo
Collecting:Distributing:Defaulted:Expired:
NoNoYesNo288RelatedCommands
None
3.6.27showchannel-groupport
CommandPurpose
UsethiscommandtodisplaydetailsoftheLACPportofallofthechannelgroups,or
aspecifiedchannelgroup,oraspecifiedport.
CommandSyntax
showchannel-groupport(IFNAME|)
showchannel-groupGROUP_NUMBERport
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Supportphysicalports
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtodisplaydetailsoftheLACPportofallofthechannel
group:
Switch#showchannel-groupport
Channel-grouplisting:289----------------------
Group:1
----------
Portsinthegroup:
-------------------
Port:eth-0-9
------------
Portstate:UpSngl-port-BndlNot-in-Bndl
Channelnumber:1Protocol:LACPChannel-group:agg1
Portindex:9Mode:Active
Flags:S-DeviceissendingSlowLACPDUsF-DeviceissendingfastLACPDUs
A-DeviceisinactivemodeP-Deviceisinpassivemode
Localinformation:
Actor LACPportAdminOperPortPort
PortFlagsStatePriorityKeyKeyNumberState
eth-0-9SAindep327681190x4d
Partner'sinformation:
ActorLACPport OperPortPort
PortFlagsPriorityDevIDKeyNumberState
eth-0-9SP00000.0000.0000000x44
ThisexampleshowshowtodisplaydetailsoftheLACPportofaspecifiedport:
Switch#showchannel-groupporteth-0-9
Port:eth-0-9
------------
Portstate:UpSngl-port-BndlNot-in-Bndl
Channelnumber:1Protocol:LACPChannel-group:agg1
Portindex:9Mode:Active
Flags:S-DeviceissendingSlowLACPDUsF-DeviceissendingfastLACPDUs
A-DeviceisinactivemodeP-Deviceisinpassivemode
Localinformation:
Actor LACPportAdminOperPortPort
PortFlagsStatePriorityKeyKeyNumberState
eth-0-9SAindep327681190x4d
Partner'sinformation:
ActorLACPport OperPortPort
PortFlagsPriorityDevIDKeyNumberState
eth-0-9SP00000.0000.0000000x44290RelatedCommands
None
3.6.28showlacpcounters
CommandPurpose
Usethiscommandtodisplaythepackettrafficonallofthechannelgroups,ora
specifiedchannelgroup.
CommandSyntax
showlacp[GROUP_NUMBER]counters
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythepackettrafficonallofthechannelgroups:
Switch#showlacpcounters
Trafficstatistics
Port LACPDUsPktserr
SentRecvSentRecv
--------------------------------------------------------
Channel-groupagg1
eth-0-927000291RelatedCommands
None
3.6.29showlacpsys-id
CommandPurpose
UsethiscommandtodisplaytheLACPsystemID.
CommandSyntax
showlacpsys-id
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtodisplaytheLACPsystemID:
Switch#showlacpsys-id
SystemID:32768,4600.0987.6c01
RelatedCommands
None2923.6.30clearlacpcounters
CommandPurpose
Usethiscommandtoclearallcountersofallofthechannelgroups,oraspecified
channelgroup.
CommandSyntax
clearlacp(GROUP_NUMBER|)counters
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER Channelgroupnumber0-63
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearallcountersofallofthechannelgroups:
Switch#clearlacpcounters
Thisexampleshowshowtoclearaspecifiedchannelgroup:
Switch#clearlacp10counters
RelatedCommands
None2933.6.31debuglacp
CommandPurpose
Usethiscommandtospecifytheoptionsforthedisplayeddebugginginformationfor
LACPcli,LACPevent,LACPha,LACPpacket,LACPsyncandLACPtimer.Usethe
noparameterwiththiscommandtodisablealldebugging.
CommandSyntax
debuglacp(all|cli|event|ha|packet|sync|timer)
nodebuglacp(all|cli|event|ha|packet|sync|timer)
Parameter ParameterDescriptionParameterValue
all AllLACPdebug
information-
cli LACPcommandsdebug
informationisdisplayed-
event LACPeventsdebug
informationisdisplayed-
ha LACPhighavailability
eventsdebuginformation
isdisplayed-
packet LACPpacketcontents
debuginformationis
displayed-
sync LACPsynchronization
debuginformationis
displayed-
timer(detail|) LACPtimerexpirydebug
informationisdisplayed-294CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
Thefollowingexampledisplaysinformationaboutthelacppacketsthatarereceived
andsentoutfromtheconnectedrouter:
Switch#debuglacppacket
RelatedCommands
showdebugginglacp
3.6.32showdebugginglacp
CommandPurpose
UsethiscommandtodisplaytheLACPdebuggingstatusforthesedebugging
options:LACPclidebugging,LACPeventdebugging,LACPhadebugging,LACP
packetdebugging,LACPsyncdebuggingandLACPtimerdebugging.
CommandSyntax
showdebugginglacp
CommandMode
PrivilegedEXEC
Default
None295Usage
None
Examples
Thefollowingissampleoutputfromtheshowdebugginglacpcommand:
Switch#showdebuginglacp
LACPdebuggingstatus:
LACPpacketdebuggingison
RelatedCommands
debuglacpall
3.7VLANClassificationCommands
3.7.1vlanclassifieractivate
CommandPurpose
Usethiscommandtoapplyvlanclassifiergrouptoaninterface.
Toremoveit,usethenoformofthiscommand.
CommandSyntax
vlanclassifieractivateGROUP_NUMBERbased(ip|mac|protocol)
novlanclassifieractivate
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER VLANclassifiergroupid0-31,onlygroupid31can
beusedforprotocol
ip Basedonip -
mac BasedonMAC -
protocol Basedonprotocol -296CommandMode
InterfaceConfiguration
Default
None
Usage
Aninterfacecanonlybeappliedbyonevlanclassifiergroup.
Onevlanclassifiergroupcanapplymorethanoneinterface.
Thiscommandappliesvlanclassifiergrouptointerface,andtheinterfacecanclassify
packetstodifferentvlanaccordingtotheruleinvlanclassifiergroup.
Tocreatetherule,refertovlanclassifierrulecommand.
Tocreatethegroup,refertovlanclassifiergroupcommand.
Examples
Thisexampleshowshowtoapplyvlanclassifiergroup1totheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vlanclassifieractivate1basedip
Thisexampleshowshowtoremovethevlanclassifiergroup1fromtheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#novlanclassifieractivate
RelatedCommands
vlanclassifiergroup
vlanclassifierrule2973.7.2vlanclassifiergroup
CommandPurpose
Usethiscommandtoaddordeleteruletovlanclassifiergroup.Usethenoformof
thiscommandtodeletethegroup.
CommandSyntax
vlanclassifiergroupGROUP_NUMBER(add|delete)ruleRULE
novlanclassifiergroupgroup
Parameter ParameterDescriptionParameterValue
GROUP_NUMBER VLANclassifiergroupid0-31,onlygroupid31can
beusedforprotocol
add Addruletovlanclassifier
group-
delete Deleteruletovlan
classifiergroup-
RULE Theidofrule 0-4095
CommandMode
GlobalConfiguration
Default
None
Usage
Tocreatetherule,refertovlanclassifierrulecommand.
Toapplythevlanclassifiergrouptoaninterface,refertovlanclassifieractivate
command.
Whenaddaruletothegroupbythiscommand,therulewillbeactiveimmediatelyif
thegrouphasbeenappliedtoaninterfacealready.298Whendeletearulefromthegroupbythiscommand,theruleonthisinterfacewillbe
inactiveimmediatelyifthegroupisstillappliedtothatinterface.
Thevlanclassifiergroupwillbedeletedwhenthelastruleonthisgroupisdeleted.
Examples
Thisexampleshowshowtoaddrule1tovlanclassifiergroup1:
Switch#configureterminal
Switch(config)#vlanclassifiergroup1addrule1
Thisexampleshowshowtodeleterule1fromvlanclassifiergroup1:
Switch#configureterminal
Switch(config)#vlanclassifiergroup1deleterule1
Thisexampleshowshowtodeletevlanclassifiergroup1:
Switch#configureterminal
Switch(config)#novlanclassifiergroup1
RelatedCommands
vlanclassifieractivate
vlanclassifierrule
3.7.3vlanclassifierrule
CommandPurpose
Usethiscommandtocreatevlanclassifierrule.
Toremovethevlanclassifierrule,usethenoformofthiscommand.
CommandSyntax
vlanclassifierruleRULE(ipIP_ADDR|ipIP_ADDR/PREFIX-LENGTH|ipv6
IPV6_ADDR|macMAC_ADDR|protocol(arp|ip|mpls|mpls-mcast|pppoe|
rarp))vlanVLAN_ID
novlanclassifierruleRULE
Parameter ParameterDescriptionParameterValue299RULE Theidofvlanclassifier
rule0-4095
IP_ADDR Thesourceofipv4
addressinpacketsIPv4address
PREFIX-LENGTH Prefixlengthfortheip
address.1-32
IPV6_ADDR Thesourceofipv6
addressinpacketsIPv6address
MAC_ADDR Thesourceofmac
addressinpacketsMacaddressin
HHHH.HHHH.HHHH
format
protocol Specifyanethernet
protocolclassification-
arp SpecifiyARPprotocol-
ip SpecifiyIPprotocol -
mpls SpecifiyMPLSprotocol-
mpls-mcast SpecifiyMPLSmulticast
protocol-
pppoe SpecifiyPPPOEprotocol-
rarp SpecifiyRARPprotocol-
VLAN_ID Thevlanidtobeassigned1-4094
CommandMode
GlobalConfiguration
Default
None300Usage
Therulewillbeeffectiveonlyininboundoninterface.
Thevlanidassignedbyvlanclassifierrulewillbeappendedtothepacketswhich
matchtherule.
Toaddthisruletovlanclassifiergrouporapplythegrouptoaninterface,refertovlan
classifiergroupandvlanclassifieractivatecommand.
Examples
Thisexampleshowshowtocreaterule1whichwillclassifyallipv4packetstovlan11:
Switch#configureterminal
Switch(config)#vlanclassifierrule1protocolipvlan11
Thisexampleshowshowtodeleterule1:
Switch#configureterminal
Switch(config)#novlanclassifierrule1
RelatedCommands
vlanclassifiergroup
vlanclassifieractivate
3.7.4vlanclassifierdefault-action
CommandPurpose
Usethiscommandtosetactionwhennothitvlanclassifierrule.Usethenoformof
thiscommandtorestoredefaultaction.
CommandSyntax
vlanclassifierdefault-actiondrop
novlanclassifierdefault-actiondrop
CommandMode
InterfaceConfiguration301Default
None
Usage
Whenpacketinputtheportwhichenablevlanclassifierandnothitanyvlanclassifier
rule,thepacketwillbedropped.
Examples
Thisexampleshowshowtosetdefaultactiondrop:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vlanclassifierdefault-actiondrop
Thisexampleshowshowtosetdefaultactionnotdrop:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#novlanclassifierdefault-actiondrop
RelatedCommands
vlanclassifieractivate
3.7.5showvlanclassifiergroup
CommandPurpose
Usethiscommandtoshowtheinformationaboutvlanclassifiergroup.
CommandSyntax
showvlanclassifiergroupGROUP_ID
Parameter ParameterDescriptionParameterValue
GROUP_ID VLANclassifiergroupid0-31,onlygroupid31can
beusedforprotocol302CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayinformationaboutvlanclassifiergroup1:
Switch#showvlanclassifiergroup1
RelatedCommands
showvlanclassifierinterface
showvlanclassifierrule
3.7.6showvlanclassifierinterface
CommandPurpose
Usethiscommandtoshowtheinformationaboutvlanclassifiergrouponinterface.
CommandSyntax
showvlanclassifierinterfacegroupGROUP_ID
Parameter ParameterDescriptionParameterValue
GROUP_ID VLANclassifiergroupid0-31,onlygroupid31can
beusedforprotocol
CommandMode
PrivilegedEXEC303Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayinformationaboutvlanclassifiergroup1on
interface:
Switch#showvlanclassifierinterfacegroup1
RelatedCommands
showvlanclassifiergroup
showvlanclassifierrule
3.7.7showvlanclassifierrule
CommandPurpose
Usethiscommandtoshowtheinformationaboutvlanclassifierrule.
CommandSyntax
showvlanclassifierrule(RULE|)
Parameter ParameterDescriptionParameterValue
RULE Theidofvlanclassifier
rule0-4095
CommandMode
PrivilegedEXEC304Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayinformationaboutallthevlanclassifierrules:
Switch#showvlanclassifierrule
Thisexampleshowshowtodisplayinformationaboutthevlanclassifierrule1:
Switch#showvlanclassifierrule1
RelatedCommands
showvlanclassifiergroup
showvlanclassifierinterface
3.7.8showresourcevlan-classification
CommandPurpose
Usethiscommandtodisplaytheresourcestatisticusedbyvlanclassificationrules.
CommandSyntax
showresourcevlan-classification
CommandMode
PrivilegedEXEC
Default
None305Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcevlan-classificationcommand:
Switch#showresourcevlan-classification
VLAN-CLASS
Resource UsedCapability
=============================================================
MACBasedVLANClassification0512
IPv4BasedVLANClassification0512
RelatedCommands
None
3.8VLANMappingCommands
3.8.1ethernetevc
CommandPurpose
UsethiscommandtoaddordeleteEVCtable.
CommandSyntax
ethernetevcWORD
noethernetevcWORD
Parameter ParameterDescriptionParameterValue
WORD EVCname Upto16characters
CommandMode
GlobalConfiguration306Default
None
Usage
None
Examples
Createethernetevcevc_table:
Switch#configureterminal
Switch(config)#ethernetevcevc_table
Switch(config-evc)#dot1qmapped-vlan10
RelatedCommands
showethernetevcNAME
3.8.2dot1qmapped-vlan
CommandPurpose
UsethiscommandtoaddevcentrytoEVCtable.
CommandSyntax
dot1qmapped-vlanVLAN_ID
nodot1qmapped-vlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Mappedvlanid 1-4094
CommandMode
EVCConfiguration
Default
None307Usage
None
Examples
AddEVCmapped-vlanentry,mappedvlanis100:
Switch#configureterminal
Switch(config)#ethernetevcevc_table
Switch(config-evc)#dot1qmapped-vlan100
RelatedCommands
showethernetevcNAME
3.8.3dot1qmapped-double-vlan
CommandPurpose
UsethiscommandtoaddevcentrywithdoublevlanstoEVCtable.
CommandSyntax
dot1qmapped-double-vlanINNER_VLAN_IDOUTER_VLAN_ID
nodot1qmapped-double-vlan
Parameter ParameterDescriptionParameterValue
INNER_VLAN_ID Mappedinnervlanid 1-4094
OUTER_VLAN_ID Mappedoutervlanid 1-4094
CommandMode
EVCConfiguration
Default
None308Usage
Thiscommandisonlyusedforuntaggedpacket
Examples
AddEVCmapped-vlanentry,mappedinnervlanis100,mappedoutervlanis10:
Switch#configureterminal
Switch(config)#ethernetevcevc_table
Switch(config-evc)#dot1qmapped-double-vlan10010
RelatedCommands
showethernetevcNAME
3.8.4vlanmappingtable
CommandPurpose
Usethiscommandtoaddordeletevlanmappingtable.
CommandSyntax
vlanmappingtableWORD
novlanmappingtableWORD
Parameter ParameterDescriptionParameterValue
WORD Thenameofvlanmapping
tableUpto16characters
CommandMode
GlobalConfiguration
Default
None309Usage
None
Examples
CreatevlanmappingtableVMT:
Switch#configureterminal
Switch(config)#vlanmappingtableVMT
Switch(config-vlan-mapping)#
RelatedCommands
showvlanmappingtableWORD
3.8.5rawvlangroup
CommandPurpose
UsethiscommandtocreaterawVLANgroup.
CommandSyntax
rawvlangroupGROUP_IDvlanVLAN_LIST
norawvlangroupGROUP_ID
Parameter ParameterDescriptionParameterValue
GROUP_ID Rawvlangroupid 1-64
VLAN_LIST TheVLANIDlist,example:
2-5,9-11vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-40
CommandMode
GlobalConfiguration
Default
None310Usage
None
Examples
CreaterawVLANgroup1andtheVLANlistisfrom10to20:
Switch#configureterminal
Switch(config)#rawvlangroup1vlan10-20
RelatedCommands
showvlanmappingtableWORD
3.8.6raw-vlan
CommandPurpose
Usethiscommandtoaddvlanmappingentryintovlanmappingtable.
CommandSyntax
raw-vlan(VLAN_ID|out-of-range|untagged|groupGROUP_ID)evcWORD
noraw-vlan(VLAN_ID|out-of-range|untagged|group)
raw-vlanINNER_VLANOUTER_VLANegress-vlan(untagged|MAPPED_VLAN)
noraw-vlanINNER_VLANOUTER_VLANegress-vlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Rawvlanid,rangefrom
1~4094,theformatcould
be1,2,3or1-20.vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-40
out-of-range Vlanidisntspecified -
untagged Untaggedpacket -311groupGROUP_ID RawVLANgroup,The
groupwilluseless
resourcecomparewith
VLANrange.1-64
WORD EVCname Upto16characters
INNER_VLAN Innervlanid 1-4094
OUTER_VLAN Outervlanid 1-4094
MAPPED_VLAN Mappedvlanid 1-4094
CommandMode
VLANMappingConfiguration
Default
None
Usage
None
Examples
Addvlanmappingentry,rawvlanisfrom10to20,mappedevcisevc_table:
Switch#configureterminal
Switch(config)#vlanmappingtableVMT
Switch(config-vlan-mapping)#raw-vlan10-20evcevc_table
RelatedCommands
showvlanmappingtableWORD
3.8.7raw-vlan
CommandPurpose
Usethiscommandtoaddvlanmappingentryintovlanmappingtable.312CommandSyntax
raw-vlan(VLAN_ID|out-of-range|untagged|groupGROUP_ID)evcWORD
noraw-vlan(VLAN_ID|out-of-range|untagged|group)
raw-vlanINNER_VLANOUTER_VLANegress-vlan(untagged|MAPPED_VLAN)
raw-vlanINNER_VLANOUTER_VLANevcWORD
noraw-vlanINNER_VLANOUTER_VLANegress-vlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Rawvlanid,rangefrom
1~4094,theformatcould
be1,2,3or1-20.vlanlistconnectedwith-
and,,forexample,1-
10,15,20,30-40
out-of-range Vlanidisntspecified -
untagged Untaggedpacket -
groupGROUP_ID RawVLANgroup,The
groupwilluseless
resourcecomparewith
VLANrange.1-64
WORD EVCname Upto16characters
INNER_VLAN Innervlanid 1-4094
OUTER_VLAN Outervlanid 1-4094
MAPPED_VLAN Mappedvlanid 1-4094
CommandMode
VLANMappingConfiguration
Default
None313Usage
None
Examples
Addvlanmappingentry,rawvlanisfrom10to20,mappedevcisevc_table:
Switch#configureterminal
Switch(config)#vlanmappingtableVMT
Switch(config-vlan-mapping)#raw-vlan10-20evcevc_table
RelatedCommands
showvlanmappingtableWORD
3.8.8dot1qethertype
CommandPurpose
Usethiscommandtosetethertypeoninterface.
CommandSyntax
dot1qethertypeVALUE
nodot1qethertype
Parameter ParameterDescriptionParameterValue
VALUE SpecifyTheethertypeof
VLANtag.TheformatisHEX,the
defaultvalueis0x8100
CommandMode
InterfaceConfiguration
Default
None314Usage
None
Examples
Setethertypeto0x9100:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1qethertype9100
RelatedCommands
None
3.8.9showvlanmappingtable
CommandPurpose
Usethiscommandtodisplaycurrentvlanmappingtable.
CommandSyntax
showvlanmappingtable(WORD|)
Parameter ParameterDescriptionParameterValue
WORD Thevlanmappingtableto
bedisplayedUpto16characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None315Examples
Thisexampleshowallvlanmappingtableexistedinsystem:
Switch#showvlanmappingtable
TableNameEVCNameMappedVLANForwardInterfaceRawVLAN
===========================================================================
VMTevc_table100n/a 10-20
VMT_doubleevc_double10(100)n/a untagged
VMT_forwardevc_forward20eth-0-930
RelatedCommands
showvlanmappingtableapplied-interface
3.8.10showvlanmappingtableapplied-interface
CommandPurpose
Usethiscommandtodisplaywhoisusingthevlanmappingtableofinterface.
CommandSyntax
showvlanmappingtableapplied-interface
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowwhichinterfaceusedthevlanmappingtable:
Switch#showvlanmappingtableapplied-interface
TableNameInterfaceNameType316==============================================
VMT eth-0-1802.1Q-Tunnel
RelatedCommands
showvlanmappingtableWORD
3.8.11switchportmode
CommandPurpose
Usethiscommandtoconfigureswitchportmode
CommandSyntax
switchportmode(access|trunk|dot1q-tunnel)
noswitchportdot1q-tunnel
Parameter ParameterDescriptionParameterValue
access Configurethisportto
accessport-
trunk Configurethisporttotrunk
port-
dot1q-tunnel Configurethisportto
dot1q-tunnelport-
CommandMode
InterfaceConfiguration
Default
None
Usage
None317Examples
Thisexampleshowshowtoconfigureaswitchporttodot1q-tunnelport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodedot1q-tunnel
RelatedCommands
showinterfaceswitchport
3.8.12switchportdot1q-tunneltype
CommandPurpose
Usethiscommandtoconfiguredot1q-tunneltype.
CommandSyntax
switchportdot1q-tunneltype(basic|selective)
Parameter ParameterDescriptionParameterValue
basic Dot1q-tunnelbasictype-
selective Dot1q-tunnelselective
type-
CommandMode
InterfaceConfiguration
Default
basictype
Usage
None318Examples
Thiscommandisusedtoconfiguredot1q-tunneltype:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportdot1q-tunneltypeselective
RelatedCommands
showinterfaceswitchport
3.8.13switchportdot1q-tunnelnative
CommandPurpose
Usethiscommandtoconfigureaswitch-portsdefaultvlan.
CommandSyntax
switchportdot1q-tunnelnative(vlan|inner-vlan)VLAN_ID
noswitchportdot1q-tunnelnativevlan
Parameter ParameterDescriptionParameterValue
vlan VLANthatwillbeadded-
inner-vlan UntaggedinnerVLAN -
VLAN_ID VlanId 1-4094
CommandMode
InterfaceConfiguration
Default
None
Usage
None319Examples
Configuretheeth-0-1todot1q-tunnelandconfigurethisportsnativetovlan10:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan100
Switch(config-vlan)#exit
Switch(config)#interfaceeth-0-23
Switch(config-if)#switchportmodedot1q-tunnel
Switch(config-if)#switchportdot1q-tunnelnativevlan100
RelatedCommands
None
3.8.14switchportdot1q-tunnelallowvlan
CommandPurpose
Usethiscommandtoconfiguredot1q-tunnelallowedvlan.
CommandSyntax
switchportdot1q-tunnelallowvlan(all|none|addVLAN_ID|removeVLAN_ID)
Parameter ParameterDescriptionParameterValue
all AddallVLANstothe
allowedVLANlist-
none RemoveallVLANsfrom
theallowedVLANlist-
addVLAN_ID AddVLANstotheallowed
VLANlist1-4094
removeVLAN_ID RemoveVLANsfromthe
allowedVLANlist1-4094
CommandMode
InterfaceConfiguration320Default
None
Usage
None
Examples
Configuredot1q-tunnelallowedvlan100oninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportdot1q-tunnelallowedvlanadd100
RelatedCommands
showvlanbrief
3.8.15switchportdot1q-tunnelvlanmappingtable
CommandPurpose
Usethiscommandtoapplyvlanmappingtableonselectivedot1qtunnelport.
CommandSyntax
switchportdot1q-tunnelvlanmappingtableWORD
noswitchportdot1q-tunnelvlanmappingtable
Parameter ParameterDescriptionParameterValue
WORD VLANmappingtablenameUpto16characters
CommandMode
InterfaceConfiguration
Default
None321Usage
Applyexistvlanmappingtableondot1q-tunnelport.Thetypeofdot1q-tunnelport
shouldbeselective.
Examples
Thefollowingisasamplethatapplyingvlanmappingtableonselectivedot1qtunnel
port:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportdot1q-tunnelvlanmappingtablemp
RelatedCommands
showinterfaceswitchport
3.8.16switchportdot1q-tunnelvlanmappingmiss-forward
CommandPurpose
Usethiscommandtosetpacketdonormalforwardwhenvlanmappingtableisnot
matchedonselectivedot1qtunnelport.
CommandSyntax
switchportdot1q-tunnelvlanmappingmiss-forward
noswitchportdot1q-tunnelvlanmappingmiss-forward
CommandMode
InterfaceConfiguration
Default
None
Usage
Needtoswiththedot1q-tunnelportinselectivetypebeforeconfigthiscommand.322Examples
Thefollowingisasamplethatsetpacketdonormalforwardwhenvlanmappingtable
isnotmatchedonselectivedot1qtunnelport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportdot1q-tunnelvlanmappingmiss-forward
RelatedCommands
None
3.8.17switchporttrunkvlan-translation
CommandPurpose
Usethiscommandtoenablevlantranslation.
CommandSyntax
switchporttrunkvlan-translation
noswitchporttrunkvlan-translation
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoenablevlantranslationontrunkport.Onlytrunkportcan
enablevlantranslation.
Examples
Thefollowingisasamplethatenablingvlantranslationontrunkport:323Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkvlan-translation
RelatedCommands
showinterfaceswitchport
3.8.18switchporttrunkvlan-translationmappingtable
CommandPurpose
Usethiscommandtoapplyvlanmappingtableonvlantranslationport.
CommandSyntax
switchporttrunkvlan-translationmappingtableWORD
noswitchporttrunkvlan-translationmappingtable
Parameter ParameterDescriptionParameterValue
WORD VLANmappingtablenameUpto16characters
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoapplyvlanmappingonvlantranslationport.
Examples
Thefollowingisasamplethatapplyingvlanmappingonvlantranslationport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkvlan-translationvlanmappingtablemap_table324RelatedCommands
showinterfaceswitchport
3.8.19switchporttrunkvlan-translationmiss-forward
CommandPurpose
Usethiscommandtoallowthepacketwhichnotmatchvlanmappingtableforward
CommandSyntax
switchporttrunkvlan-translationmappingmiss-forward
noswitchporttrunkvlan-translationmappingmiss-forward
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingisasamplethatletthepacketwhichnotmatchedvlanmappingtable
forward:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchporttrunkvlan-translationmappingmiss-forward
RelatedCommands
None3253.8.20vlandot1qtagnative
CommandPurpose
Usethiscommandtosettagthevlanonpacketifindefaultvlan
CommandSyntax
vlandot1qtagnative
novlandot1qtagnative
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingisasamplethattagthevlanifindefaultvlan:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vlandot1qtagnative
RelatedCommands
None
3.8.21showresourcevlan-mapping
CommandPurpose
Usethiscommandtodisplaytheresourcestatisticusedbyvlanmappingtable.326CommandSyntax
showresourcevlan-mapping
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcevlan-mappingcommand:
Switch#showresourcevlan-mapping
VLAN-MAPPING
Resource UsedCapability
=============================================================
AppliedVLANMappingEntry01024
RelatedCommands
None
3.9MSTPCommands
3.9.1spanning-treeenable
CommandPurpose
UsethiscommandtoenabletheSpanningTreeProtocolonabridge.Usetheno
parametertodisabletheSpanningTreeProtocolonthebridge.
CommandSyntax
spanning-treeenable327nospanning-treeenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoglobalenablestp:
Switch#configureterminal
Switch(config)#spanning-treeenable
Thisexampleshowshowtoglobaldisablestp:
Switch#configureterminal
Switch(config)#nospanning-treeenable
RelatedCommands
showspanning-stree
3.9.2spanning-treepriority
CommandPurpose
Usethiscommandtosetthebridgepriorityforthecommoninstanceforthedefault
bridge.Usingalowerpriorityindicatesahigherlikelihoodofthebridgebecomingroot.
Usethenoparameterwiththiscommandtoresetittothedefaultvalue.
CommandSyntax
spanning-treepriorityPRIORITY
nospanning-treepriority328Parameter ParameterDescriptionParameterValue
PRIORITY Bridgepriority 0-61440
CommandMode
GlobalConfiguration
Default
Thedefaultpriorityis32678(orhex0x8000)
Usage
Thiscommandisusedtosetthepriorityofthebridge.Thepriorityvaluesmustbein
multiplesof4096.
Examples
Thisexampleshowshowtosetthebridgepriority.:
Switch#configureterminal
Switch(config)#spanning-treepriority4096
Thisexampleshowshowtoresetthebridgeprioritytodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treepriority
RelatedCommands
showspanning-stree
3.9.3spanning-treeinstancepriority
CommandPurpose
UsethiscommandtosetthedefaultbridgepriorityforanMSTinstancetothevalue
specified.Usethenoparameterwiththiscommandtorestorethedefaultvalueofthe
defaultbridgepriority.329CommandSyntax
spanning-treeinstanceINSTANCE_IDpriorityPRIORITY
nospanning-treeinstanceINSTANCE_IDpriority
Parameter ParameterDescriptionParameterValue
INSTANCE_ID SpecifytheinstanceID1-4094
PRIORITY Specifythebridgepriority0-61440
CommandMode
GlobalConfiguration
Default
Thedefaultvalueofportpriorityforeachinstanceis32768.
Usage
Thelowerthepriorityofthebridge,thereishigherlikelihoodthatthebridgebecomes
arootbridgeoradesignatedbridgefortheLAN.Thepermittedrangeofvaluesis0-
61440.Thepriorityvaluesmustbeinmultiplesof4096.
Examples
Thisexampleshowshowtosetthepriorityforinstance1:
Switch#configureterminal
Switch(config)#spanning-treeinstance1priority0
RelatedCommands
showspanning-stree
3.9.4spanning-treeforward-time
CommandPurpose
Usethiscommandtosetthetimeafterwhich(ifthisbridgeistherootbridge)each
portinthedefaultbridgechangesstatestolearningandforwarding.Thisvalueis330usedbyallinstances.Usethenoparameterwiththiscommandtorestorethedefault
valueof15seconds.
CommandSyntax
spanning-treeforward-timeSECONDS
nospanning-treeforward-time
Parameter ParameterDescriptionParameterValue
SECONDS Forwardingtimedelay,in
seconds,forthedefault
bridge2018/4/30
CommandMode
GlobalConfiguration
Default
Thedefaultvalueis15seconds
Usage
Theallowablerangefortheforwardtimeis4-30seconds.Itisnotadvisabletoset
thevaluebelow7seconds.
Examples
Thisexampleshowshowtosettheforwardtimeto16seconds:
Switch#configureterminal
Switch(config)#spanning-treeforward-time16
Thisexampleshowshowtoresettheforwardtimetodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treeforward-time
RelatedCommands
showspanning-stree3313.9.5spanning-treehello-time
CommandPurpose
Usethiscommandtosetthehello-time,thetimeinsecondsafterwhich(ifthisbridge
istherootbridge)allthedefaultbridgesinabridgedLANexchangeBridgeProtocol
DataUnits(BPDUs).Averylowvalueofthisparameterleadstoexcessivetrafficon
thenetwork,whileahighervaluedelaysthedetectionoftopologychange.Thisvalue
isusedbyallinstances.
CommandSyntax
spanning-treehello-timeSECONDS
nospanning-treehello-time
Parameter ParameterDescriptionParameterValue
SECONDS HelloBPDUinterval 1-10,unit:second
CommandMode
GlobalConfiguration
Default
Thedefaulthello-timevalueis2
Usage
Theallowablerangeofvaluesis1-10seconds.
Examples
Thisexampleshowshowtosetthehellotimeto5seconds:
Switch#configureterminal
Switch(config)#spanning-treehello-time5
Thisexampleshowshowtoresetthehello-timetodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treehello-time332RelatedCommands
showspanning-stree
3.9.6spanning-treemax-age
CommandPurpose
Usethiscommandtosetthemaximumageforthedefaultbridge.Usetheno
parameterwiththiscommandtorestorethedefaultvalueofthemaximumage.
CommandSyntax
spanning-treemax-ageSECONDS
nospanning-treemax-age
Parameter ParameterDescriptionParameterValue
SECONDS Themaximumtime,in
seconds,tolistenforthe
rootbridge6-40
CommandMode
GlobalConfiguration
Default
Thedefaultvalueofbridgemaximumageis20seconds.
Usage
Maximumageisthemaximumtimeforwhich(ifabridgeistherootbridge)a
messageisconsideredvalid.Thispreventstheframesfromloopingindefinitely.The
valueofmaximumageshouldbegreaterthantwicethevalueofhellotimeplus1,
andlessthantwicethevalueofforwarddelayminus1.Theallowablerangefor
maximumageis6-40seconds.Configurethisvaluesufficientlyhigh,sothataframe
generatedbyrootcanbepropagatedtotheleafnodeswithoutexceedingthe
maximumage.333Examples
Thisexampleshowshowtosetthemaxageto12seconds:
Switch#configureterminal
Switch(config)#spanning-treemax-age12
Thisexampleshowshowtoresetthemaxagetodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treemax-age
RelatedCommands
showspanning-tree
3.9.7spanning-treemax-hops
CommandPurpose
UsethiscommandtospecifythemaximumallowedhopsforaBPDUinanMST
region.ThisparameterisusedbyalltheinstancesoftheMST.Torestorethedefault
value,usethenoparameterwiththiscommand.
CommandSyntax
spanning-treemax-hopsNUMBER
nospanning-treemax-hops
Parameter ParameterDescriptionParameterValue
NUMBER Maxhops 1-40
CommandMode
GlobalConfiguration
Default
ThedefaultmaximumhopsinanMSTregionare20334Usage
SpecifyingthemaximumhopsforaBPDUpreventsthemessagesfromlooping
indefinitelyinthenetwork.WhenabridgereceivesanMSTBPDUthathasexceeded
theallowedmaximumhops,itdiscardstheBPDUpackets.
TheconfigurationshouldbeshownwhenthebridgeisMSTPmode.
Examples
Thisexampleshowshowtosetthemaxhopsto25:
Switch#configureterminal
Switch(config)#spanning-treemax-hops25
Thisexampleshowshowtoresetthemaxhopstodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treemax-hops
RelatedCommands
showspanning-tree
3.9.8spanning-treetransmit-holdcount
CommandPurpose
UsethiscommandtosetthemaximumnumberoftransmissionsofBPDUsinan
MSTregionbythetransmitstatemachine.Usethenoparameterwiththiscommand
torestorethedefaulttransmithold-countvalue.
CommandSyntax
spanning-treetransmit-holdcountNUMBER
nospanning-treetransmit-holdcount
Parameter ParameterDescriptionParameterValue
NUMBER Transmithold-countvalue1-10335CommandMode
GlobalConfiguration
Default
Transmithold-countdefaultvalueis3
Usage
None
Examples
Thisexampleshowshowtosetholdcountto5:
Switch#configureterminal
Switch(config)#spanning-treetransmit-holdcount5
Thisexampleshowshowtoresettheholdcounttodefaultvalue:
Switch#configureterminal
Switch(config)#nospanning-treetransmit-holdcount
RelatedCommands
showspanning-tree
3.9.9spanning-treeedgeportbpdu-guard
CommandPurpose
UsethiscommandtoenabletheBPDU(BridgeProtocolDataUnit)Guardfeatureon
abridge.UsethenoparameterwiththiscommandtodisabletheBPDUGuard
featureonabridge.
CommandSyntax
spanning-treeedgeportbpdu-guard
nospanning-treeedgeportbpdu-guard336CommandMode
GlobalConfiguration
Default
BPDUguardisdisabled
Usage
Usetheshowspanning-treecommandtodisplaythebridgeandportconfigurations
fortheBPDUGuardfeature.Itshowsboththeadministrativelyconfiguredand
currentlyrunningvaluesoftheBPDUguard.
Examples
Thisexampleshowshowtoglobalenablebpdu-guardandenablebpdu-guardon
eth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeedgeport
Switch(config-if)#spanning-treeedgeportbpdu-guardenable
RelatedCommands
showspanning-treeinterface
3.9.10spanning-treeedgeportbpdu-filter
CommandPurpose
UsethiscommandtoenabletheedgeportBPDUfilterforthebridge.Usetheno
parameterwiththiscommandtodisabletheBPDUfilterforthebridge.
CommandSyntax
spanning-treeedgeportbpdu-filter
nospanning-treeedgeportbpdu-filter337CommandMode
GlobalConfiguration
Default
None
Usage
Usetheshowspanningtreecommandtodisplayadministrativelyconfigured,and
currentlyrunningvalues,oftheBPDUfilterparameterforthebridgeandport.
Ifbpdu-guardandbpdu-filterareallconfigedonport,bpdu-filterhasahigherpriority.
Examples
Thisexampleshowshowtoglobalenablebpdu-filterandenablebpdu-filteroneth-0-
1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeedgeport
Switch(config-if)#spanning-treeedgeportbpdu-filter
RelatedCommands
showspanning-treeinterface
3.9.11spanning-treeport
CommandPurpose
Usethiscommandtoenableordisablespanningtreeprotocolonspecifiedport.
CommandSyntax
spanning-treeport(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enablespanningprotocol
onthisport-338disable Disablespanningprotocol
onthisport-
CommandMode
InterfaceConfiguration
Default
Thedefaultspanningtreestateoftheportisenabled.
Usage
None
Examples
ThisexampleshowshowtoenableSTPonporteth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeportenable
ThisexampleshowshowtodisableSTPonporteth-0-1:
Switch#configureterminal
Switch(config-if)#spanning-treeportdisable
RelatedCommands
showspanning-treeinterface
3.9.12spanning-treeport-priority
CommandPurpose
Usethiscommandtosettheportpriorityforabridge.Alowerpriorityindicatesa
greaterlikelihoodofthebridgebecomingroot.
CommandSyntax
spanning-treeport-priorityPRIORITY
nospanning-treeport-priority339Parameter ParameterDescriptionParameterValue
PRIORITY Portpriority 0-240
CommandMode
InterfaceConfiguration
Default
Thedefaultpriorityis128
Usage
None
Examples
Thisexampleshowshowtosetthepriorityto240onporteth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeport-priority240
RelatedCommands
showspanning-treeinterface
3.9.13spanning-treepathcost-standard
CommandPurpose
Usethiscommandtosetthepathcoststandardassociatedwiththedefaultbridge-
group.Usethenoparameterwiththiscommandtosettodefaultvalue.
CommandSyntax
spanning-treepathcost-standard(dot1d-1998|dot1t)
nospanning-treepathcost-standard
Parameter ParameterDescriptionParameterValue340dot1d-1998 IEEE802.1D-1998
standard-
dot1t IEEE802.1Tstandard-
CommandMode
GlobalConfiguration
Default
Thedefaultpathcost-standardisdot1t
Usage
Ifthepathcost-standardischanged,costofeveryportwillberesetandauto-
calculated.
Examples
Thisexampleshowshowtosetthepathcoststandard:
Switch#configureterminal
Switch(config)#spanning-treepathcost-standarddot1d-1998
Costofeveryporthasbeenresetandauto-calculationisavailable
RelatedCommands
showspanning-tree
3.9.14spanning-treepath-cost
CommandPurpose
Usethiscommandtosetthecostofapathassociatedwiththedefaultbridge-group.
Thelowerthepathcost,thegreaterlikelihoodofthebridgebecomingroot.Usethe
noparameterwiththiscommandtocalculatepathcostaccordingtointerfacesspeed.
CommandSyntax
spanning-treepath-costNUMBER341nospanning-treepath-cost
Parameter ParameterDescriptionParameterValue
NUMBER Thecosttobeassignedto
thegroup.Therangeis1to
200000000fordot1tand
1-65535fordot1d-1998
CommandMode
InterfaceConfiguration
Default
Thedefaultpathcostvalueiscalculatedaccordingtointerfacesspeed
Usage
None
Examples
ThisexampleshowshowtosettheSTPpath-costto123:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treepath-cost123
ThisexampleshowshowtoresettheSTPpath-costtodeafultvalue:
Switch#configureterminal
Switch(config-if)#nospanning-treepath-cost
RelatedCommands
showspanning-treeinterface
3.9.15spanning-treelink-type
CommandPurpose
Usethiscommandtoenableordisablepoint-to-pointorsharedlinktypes.Usetheno
parameterwiththiscommandtodisablerapidtransition.342CommandSyntax
spanning-treelink-type(auto|point-to-point|shared)
nospanning-treelink-type
Parameter ParameterDescriptionParameterValue
auto Automaticallydetectlink
type-
point-to-point Enablepointtopointlink-
shared Disablepointtopointlink-
CommandMode
InterfaceConfiguration
Default
Thelinktypeisautodetected
Usage
None
Examples
Thisexampleshowshowtosetthelinktypetosharedonporteth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treelink-typeshared
RelatedCommands
showspanning-treebrief3433.9.16spanning-treeedgeport
CommandPurpose
Usethiscommandtosetaportasanedge-portandtoenablerapidtransitions.Use
thenoparameterwiththiscommandtosetaporttoitsdefaultstate(notanedge-port)
andtodisablerapidtransitions.
CommandSyntax
spanning-treeedgeport
nospanning-treeedgeport
CommandMode
InterfaceConfiguration
Default
Theportisnotanedge-port
Usage
None
Examples
Thisexampleshowshowtosettheporteth-0-1toedgeport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeedgeport
Thisexampleshowshowtoresettheporttoannon-edgeport:
Switch#configureterminal
Switch(config-if)#nospanning-treeedgeport
RelatedCommands
showspanning-treeinterface3443.9.17spanning-treeedgeportbpdu-guard
CommandPurpose
UsethiscommandtoenableordisabletheBPDUGuardfeatureonaport.Usethe
noparameterwiththiscommandtosettheBPDUGuardfeatureonaporttodefault.
CommandSyntax
spanning-treeedgeportbpdu-guard(enable|disable|default)
nospanning-treeedgeportbpdu-guard
Parameter ParameterDescriptionParameterValue
enable Enableedgeportbpdu-
guard-
disable Disableedgeportbpdu-
guard-
default Default -
CommandMode
InterfaceConfiguration
Default
BPDUguardisdisabledonport
Usage
None
Examples
Thisexampleshowshowtochangeporttoedgeportandenablebpdu-guardonport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeedgeport
Switch(config-if)#spanning-treeedgeportbpdu-guardenable345RelatedCommands
showspanningtreeinterface
3.9.18spanning-treeedgeportbpdu-filter
CommandPurpose
UsethiscommandtosetedgeportBPDUfilterfortheport.Usethenoparameter
withthiscommandtoreverttheportBPDUfiltervaluetodefault.
CommandSyntax
spanning-treeedgeportbpdu-filter(enable|disable|default)
nospanning-treeedgeportbpdu-filter
Parameter ParameterDescriptionParameterValue
enable Enableedgeportbpdu-
filter-
disable Disableedgeportbpdu-
filter-
default Default -
CommandMode
InterfaceConfiguration
Default
BPDUfilterisdisabledonport
Usage
None
Examples
Thisexampleshowshowtoenablebpdu-filteronport:346Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeedgeport
Switch(config-if)#spanning-treeedgeportbpdu-filter
Thisexampleshowshowtodisablebpdu-filteronport:
Switch#configureterminal
Switch(config-if)#nospanning-treeedgeportbpdu-filter
RelatedCommands
showspanningtreeinterface
3.9.19spanning-treeguardroot
CommandPurpose
UsethiscommandtoenabletheRootGuardfeaturefortheport.Thisfeature
disablesreceptionofsuperiorBPDUs.Usethenoparameterwiththiscommandto
disabletherootguardfeaturefortheport.
CommandSyntax
spanning-treeguardroot
nospanning-treeguardroot
CommandMode
InterfaceConfiguration
Default
Rootguardisdisabled
Usage
TheRootGuardfeaturemakessurethattheportonwhichitisenabledisa
designatedport.IfaportwithRootGuardenabledreceivesasuperiorBPDU,itgoes
toaListeningstate(forSTP)ordiscardingstate(forRSTPandMSTP).347Examples
ThisexampleshowshowtoenabletheRootGuardfeaturefortheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeguardroot
ThisexampleshowshowtodisabletheRootGuardfeaturefortheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treeguardroot
RelatedCommands
None
3.9.20spanning-treeguardloop
CommandPurpose
Usethiscommandtoenabletheloopguardfeaturefortheport.Thisfeatureprovides
additionalprotectionagainstLayer2forwardingloops.Usethenoparameterwiththis
commandtodisabletheloopguardfeaturefortheport.
CommandSyntax
spanning-treeguardloop
nospanning-treeguardloop
CommandMode
InterfaceConfiguration
Default
Loopguardisdisabled
Usage
Theloopguardfeatureshouldbeenabledonthenon-designatedports.Whenaport
enablesloopguard,andBPDUsarenotreceivedonanon-designatedportafter348max_age,theportshouldmoveintotheSTPloop-inconsistentblockingstate,instead
ofthelistening/learning/forwardingstate,andshouldnotpassusertraffic.
Examples
Thisexampleshowshowtoenabletheloopguardontheport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeguardloop
RelatedCommands
spanning-treeguardroot
3.9.21spanning-treeforce-version
CommandPurpose
Usethiscommandtospecifytheversion.Aversionidentifieroflessthanavalueof2
enforcesthespanningtreeprotocol.Althoughthecommandsupportsaninputrange
of0-3,forRSTP,thevalidrangeis0-2.Usethenoparameterwiththiscommandto
setthedefaultprotocolversion.
CommandSyntax
spanning-treeforce-versionNUMBER
nospanning-treeforce-version
Parameter ParameterDescriptionParameterValue
NUMBER Versionidentifier. 0-STP,1-Notsupported,
2-RSTP,3-MSTP
CommandMode
InterfaceConfiguration
Default
STPdefault0,RSTPdefault2,MSTPdefault3349Usage
None
Examples
Thisexampleshowshowtospecifytheversion:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeforce-version1
Thisexampleshowshowtoresetthedefaultversion:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treeforce-version
RelatedCommands
None
3.9.22spanning-treerestricted-tcn
CommandPurpose
UsethiscommandtosettherestrictedTCNvalueoftheporttoTRUE.Usetheno
parameterwiththiscommandtosettherestrictedTCNvalueoftheporttoFALSE.
CommandSyntax
spanning-treerestricted-tcn
nospanning-treerestricted-tcn
CommandMode
InterfaceConfiguration
Default
ThedefaultrestrictedTCNvalueisFALSE350Usage
None
Examples
ThisexampleshowshowtosettherestrictedTCNvalueoftheporttoTRUE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treerestricted-tcn
ThisexampleshowshowtosettherestrictedTCNvalueoftheporttoFALSE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treerestricted-tcn
RelatedCommands
None
3.9.23spanning-treerestricted-role
CommandPurpose
Usethiscommandtosettherestricted-rolevalueoftheporttoTRUE.Usetheno
parameterwiththiscommandtosettherestricted-rolevalueoftheporttoFALSE.
CommandSyntax
spanning-treerestricted-role
nospanning-treerestricted-role
CommandMode
InterfaceConfiguration
Default
Thedefaultrestricted-rolevalueisFALSE351Usage
None
Examples
Thisexampleshowshowtosettherestricted-rolevalueoftheporttoTRUE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treerestricted-role
Thisexampleshowshowtosettherestricted-rolevalueoftheporttoFALSE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treerestricted-role
RelatedCommands
None
3.9.24spanning-treetc-protection
CommandPurpose
Usethiscommandtosetthetc-protectionvaluetoTRUE.Usethenoparameterwith
thiscommandtosetthetc-protectionvaluetoFALSE.Iftc-protectionisset,the
numberoftcpacketswhichcanbeprocessedeveryhellotimeintervalshouldntbe
greaterthanthenumberoftc-protectionthreshold.
CommandSyntax
spanning-treetc-protection
nospanning-treetc-protection
CommandMode
GlobalConfiguration
Default
Thedefaulttc-protectionvalueisFALSE352Usage
None
Examples
Thisexampleshowshowtosetthetc-protectionvaluetoTRUE:
Switch#configureterminal
Switch(config)#spanning-treetc-protection
Thisexampleshowshowtosetthetc-protectionvaluetoFALSE:
Switch#configureterminal
Switch(config)#nospanning-treetc-protection
RelatedCommands
None
3.9.25spanning-treetc-protectionthreshold
CommandPurpose
Usethiscommandtosetthetc-protectionthresholdvalue.Usethenoparameterwith
thiscommandtosetthetc-protectionthresholdvalueto1.Iftc-protectionisset,the
numberoftcpacketswhichcanbeprocessedeveryhellotimeintervalshouldntbe
greaterthanthenumberoftc-protectionthreshold.
CommandSyntax
spanning-treetc-protectionthresholdNUMBER
nospanning-treetc-protectionthreshold
Parameter ParameterDescriptionParameterValue
NUMBER Tc-protectionthreshole
value,default11-255
CommandMode
GlobalConfiguration353Default
Thedefaulttc-protectionthresholdvalueis1
Usage
None
Examples
Thisexampleshowshowtosetthetc-protectionto255:
Switch#configureterminal
Switch(config)#spanning-treetc-protectionthreshold255
Thisexampleshowshowtoresetthetc-protectiontodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treetc-protectionthreshold
RelatedCommands
None
3.9.26spanning-treemode
CommandPurpose
Usethiscommandtosetspanningtreemode.
CommandSyntax
spanning-treemode(stp|rstp|mstp)
Parameter ParameterDescriptionParameterValue
stp spanningtreeprotocol-
rstp rapidspanningtree
protocol-
mstp multiplespanningtree
protocol-354CommandMode
GlobalConfiguration
Default
Thedefaultspanning-treemodeisrstp
Usage
None
Examples
Thisexampleshowshowtosetthespanningtreemodetomstp:
Switch#configureterminal
Switch(config)#spanning-treemodemstp
RelatedCommands
None
3.9.27spanning-treeinstanceport-priority
CommandPurpose
Usethiscommandtosettheportpriorityforabridgegroup.Usethenoparameter
withthiscommandtorestorethedefaultpriorityvalue.
CommandSyntax
spanning-treeinstanceINSTANCE_IDport-priorityPRIORITY
nospanning-treeinstanceINSTANCE_IDport-priority
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Specifytheidentifier 1-4094355PRIORITY Specifytheportpriority(a
lowerpriorityindicates
greaterlikelihoodofthe
interfacebecomingaroot).
Therangeis0~2400-240
CommandMode
InterfaceConfiguration
Default
Thedefaultpriorityis128
Usage
TheMultipleSpanningTreeProtocolusesportpriorityasatiebreakertodetermine
whichportshouldforwardframeforaparticularinstanceonaLAN,orwhichport
shouldbetherootportforaninstance.Alowervalueimpliesabetterpriority.Inthe
caseofthesamepriority,theinterfaceindexwillserveasthetiebreaker,withthe
lower-numberedinterfacebeingpreferredoverothers.
Thepermittedrangeis0-240.Thepriorityvaluescanonlybesetinincrementsof16.
Examples
Thisexampleshowshowtosettheportpriorityto112forinstance3:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeinstance3port-priority112
Thisexampleshowshowtoresettheportprioritytodefaulevalueforinstance3:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nospanning-treeinstance3port-priority
RelatedCommands
None3563.9.28spanning-treeinstancepath-cost
CommandPurpose
Usethiscommandtosetthecostofapathassociatedwithaninterface.Usetheno
parameterwiththiscommandtorestorethedefaultcostvalueofthepath.
CommandSyntax
spanning-treeinstanceINSTANCE_IDpath-costCOST
nospanning-treeinstanceINSTANCE_IDpath-cost
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Specifytheidentifier 1-4094
COST Specifythecostofpath<1-200000000>fordot1t
and<1-65535>fordot1d-
1998(alowerpath-cost
indicatesagreater
likelihoodofthespecified
interfacebecomingaroot)
CommandMode
InterfaceConfiguration
Default
Assuminga10Mb/slinkspeed,thedefaultvalueisconfiguredas2,000,000
Usage
Beforeyoucanusethiscommandtosetapath-costinaVLANconfiguration,you
mustexplicitlyaddanMSTinstancetoaportusingthebridge-groupinstance
command(seetheexamplebelow).
Examples
Thisexampleshowshowtosetthecostofapathassociatedwithaninterface:357Switch#configureterminal
Switch(config)#spanning-treemstconfiguration
Switch(config-mst)#instance3vlan3
Switch(config-mst)#exit
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd3
Switch(config-if)#spanning-treeinstance3path-cost1000
Switch(config-mst)#exit
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeaccess
Switch(config-if)#switchportaccessvlan3
Switch(config-if)#spanning-treeinstance3path-cost1000
RelatedCommands
None
3.9.29spanning-treeinstancerestricted-tcn
CommandPurpose
UsethiscommandtosettherestrictedTCNvaluefortheinstancetoTRUE.Usethe
noparameterwiththiscommandtosettherestrictedTCNvaluefortheinstanceto
FALSE.
CommandSyntax
spanning-treeinstanceINSTANCE_IDrestricted-tcn
nospanning-treeinstanceINSTANCE_IDrestricted-tcn
Parameter ParameterDescriptionParameterValue
INSTANCE_ID SpecifytheinstanceID1-4094
CommandMode
InterfaceConfiguration
Default
ThedefaultrestrictedTCNvalueisFALSE358Usage
None
Examples
ThisexampleshowshowtosettherestrictedTCNvaluefortheinstancetoTRUE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeinstance2restricted-tcn
RelatedCommands
None
3.9.30spanning-treeinstancerestricted-role
CommandPurpose
UsethiscommandtosettherestrictedrolevaluefortheinstancetoTRUE.Usethe
noparameterwiththiscommandtosettherestrictedrolevaluefortheinstanceto
FALSE.
CommandSyntax
spanning-treeinstanceINSTANCE_IDrestricted-role
nospanning-treeinstanceINSTANCE_IDrestricted-role
Parameter ParameterDescriptionParameterValue
INSTANCE_ID SpecifytheinstanceID1-4094
CommandMode
InterfaceConfiguration
Default
Thedefaultrestricted-rolevalueisFALSE.359Usage
None
Examples
ThisexampleshowshowtosettherestrictedrolevaluefortheinstancetoTRUE:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeinstance2restricted-role
RelatedCommands
None
3.9.31spanning-treemstconfiguration
CommandPurpose
Usethiscommandtoentermstconfigurationmode.
CommandSyntax
spanning-treemstconfiguraiton
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoenterintomstconfigurationmode:360Switch#configureterminal
Switch(config)#spanning-treemstconfiguration
RelatedCommands
None
3.9.32instance
CommandPurpose
UsethiscommandtocreateanmstpinstanceandmapVLANstoanMSTinstance.
CommandSyntax
instanceINSTANCE_IDvlanVLAN_ID
noinstanceINSTANCE_IDvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Instanceid,wesupportat
most64instances1-4094
VLAN_ID Thevlanassociatedwith
instancemustbecreated
first.1-4094
CommandMode
MSTConfiguration
Default
None
Usage
WhenyoumapVLANstoanMSTinstance,themappingisincremental,andthe
VLANsspecifiedinthecommandareaddedtoorremovedfromtheVLANsthatwere
previouslymapped.361Examples
Thisexampleshowshowtomapvlan10toinstance1:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan10
Switch(config-vlan)#exit
Switch(config)#spanning-treeMstconfiguration
Switch(config-mst)#instance1vlan10
RelatedCommands
None
3.9.33region
CommandPurpose
Usethiscommandtocreatemstpregion.
CommandSyntax
regionNAME
noregionNAME
Parameter ParameterDescriptionParameterValue
NAME Specifytheregionname.Thenamestringhasa
maximumlengthof32
charactersandiscase
sensitive
CommandMode
MSTConfiguration
Default
Thedefaultregionnameisanemptystring362Usage
None
Examples
ThisexampleshowshowtosettheregiontoSwitch:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan10
Switch(config-vlan)#exit
Switch(config)#spanning-treemstconfiguration
Switch(config-mst)#regionSwitch
RelatedCommands
None
3.9.34revision
CommandPurpose
Usethiscommandtocreateanmstprevisionnumber.
CommandSyntax
revisionNUMBER
norevisionNUMBER
Parameter ParameterDescriptionParameterValue
NUMBER Specifytheconfiguration
revisionnumber.0-65535
CommandMode
MSTConfiguration
Default
Defaultvalueis0363Usage
None
Examples
Thisexampleshowshowtosettherevisionnumberto1:
Switch#configureterminal
Switch(config)#spanning-treemstconfiguration
Switch(config-mst)#revision1
RelatedCommands
None
3.9.35clearspanning-treedetectedprotocols
CommandPurpose
Usethiscommandtoclearthedetectedprotocolsforaspecificbridgeorinterface.
CommandSyntax
clearspanning-treedetectedprotocols(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Specifythenameofthe
interfaceonwhich
protocolshavetobe
cleared-
CommandMode
PrivilegedEXEC
Default
None364Usage
None
Examples
Thisexampleshowshowtoclearthedetectedprotocolsforaspecificbridgeor
interfaceeth-0-1:
Switch#clearspanning-treedetectedprotocolsinterfaceeth-0-1
RelatedCommands
None
3.9.36clearspanning-treedisabled-port
CommandPurpose
Usethiscommandtoclearallspanningtreeprotocoldisabledport.
CommandSyntax
clearspanning-treedisabled-port
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearallspanningtreeprotocoldisabledport:
Switch#clearspanning-treedisabled-port365RelatedCommands
None
3.9.37showspanning-tree
CommandPurpose
Usethiscommandtoshowthestateofthespanningtree.Thiscommandonlyshows
upinterfacesstate.
CommandSyntax
showspanning-tree
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowthestateofspanningtree:
Switch#showspanning-tree
Bridgeup-SpanningTreeEnabled
Mode-Multiplespanningtreeprotocol
PathCostStandard-dot1t
CISTRootPathCost0-CISTRootPort0-CISTBridgePriority32768
ForwardDelay15-HelloTime2-MaxAge20-Max-hops20
TxHoldCount6
CISTRootId80008afa58e9cb00
CISTRegRootId80008afa58e9cb00
CISTBridgeId80008afa58e9cb00
Edgeportbpdu-filterdisabled
Edgeportbpdu-guarddisabled
eth-0-1:Port1-Id8001-RoleDesignated-StateForwarding366eth-0-1:DesignatedExternalPathCost0-InternalPathCost0
eth-0-1:ConfiguredPathCost20000-AddtypeExplicitrefcount1
eth-0-1:DesignatedPortId8001-CISTPriority128
eth-0-1:CISTRoot80008afa58e9cb00
eth-0-1:RegionalRoot80008afa58e9cb00
eth-0-1:DesignatedBridge80008afa58e9cb00
eth-0-1:MessageAge0-MaxAge20
eth-0-1:CISTHelloTime2-ForwardDelay15
eth-0-1:CISTForwardTimer0-MsgAgeTimer0-HelloTimer0-topochanget
imer0
eth-0-1:Forward-transitions2
eth-0-1:BPDUsent373-BPDUreceived0
eth-0-1:VersionMultiplespanningtreeprotocol-ReceivedNone-SendMSTP
eth-0-1:Noedgeportconfigured-Currentedgeportoff
eth-0-1:Edgeportbpdu-guardDefault-Currentedgeportbpdu-guardoff
eth-0-1:Edgeportbpdu-filterDefault-Currentedgeportbpdu-filteroff
eth-0-1:Norootguardconfigured-Currentrootguardoff
eth-0-1:Noloopguardconfigured-Currentloopguardoff
eth-0-1:ConfiguredLinkTypeauto-Currentpoint-to-point
RelatedCommands
None
3.9.38showspanning-treeinterface
CommandPurpose
Usethiscommandtoshowthestateofthespanningtreeofthespecifiedinterface.
CommandSyntax
showspanning-treeinterfaceIFNAME(brief|)
Parameter ParameterDescriptionParameterValue
IFNAME Specifythenameofthe
interface-
brief Thebriefspanning-tree
information-
CommandMode
PrivilegedEXEC367Default
None
Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingthestateofthespanningtree
oftheinterfaceeth-0-1:
Switch#showspanning-treeinterfaceeth-0-1
Bridgeup-SpanningTreeEnabled
Mode-Multiplespanningtreeprotocol
PathCostStandard-dot1t
CISTRootPathCost0-CISTRootPort0-CISTBridgePriority32768
ForwardDelay15-HelloTime2-MaxAge20-Max-hops20
TxHoldCount6
CISTRootId80008afa58e9cb00
CISTRegRootId80008afa58e9cb00
CISTBridgeId80008afa58e9cb00
Edgeportbpdu-filterdisabled
Edgeportbpdu-guarddisabled
eth-0-1:Port1-Id8001-RoleDesignated-StateForwarding
eth-0-1:DesignatedExternalPathCost0-InternalPathCost0
eth-0-1:ConfiguredPathCost20000-AddtypeExplicitrefcount1
eth-0-1:DesignatedPortId8001-CISTPriority128
eth-0-1:CISTRoot80008afa58e9cb00
eth-0-1:RegionalRoot80008afa58e9cb00
eth-0-1:DesignatedBridge80008afa58e9cb00
eth-0-1:MessageAge0-MaxAge20
eth-0-1:CISTHelloTime2-ForwardDelay15
eth-0-1:CISTForwardTimer0-MsgAgeTimer0-HelloTimer0-topochanget
imer0
eth-0-1:Forward-transitions2
eth-0-1:BPDUsent352-BPDUreceived0
eth-0-1:VersionMultiplespanningtreeprotocol-ReceivedNone-SendMSTP
eth-0-1:Noedgeportconfigured-Currentedgeportoff
eth-0-1:Edgeportbpdu-guardDefault-Currentedgeportbpdu-guardoff
eth-0-1:Edgeportbpdu-filterDefault-Currentedgeportbpdu-filteroff
eth-0-1:Norootguardconfigured-Currentrootguardoff
eth-0-1:Noloopguardconfigured-Currentloopguardoff
eth-0-1:ConfiguredLinkTypeauto-Currentpoint-to-point
RelatedCommands
None3683.9.39showspanning-treebrief
CommandPurpose
Usethiscommandtoshowthebriefstateofthespanningtree.
CommandSyntax
showspanning-treebrief
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingthebriefstateofthespanning
treeThedowninterfaceshouldnotbeshow:
Switch#showspanning-treebrief
MultiplespanningtreeprotocolEnabled
RootIDPriority32768(0x8000)
Address8afa.58e9.cb00
HelloTime2secMaxAge20secForwardDelay15sec
BridgeIDPriority32768(0x8000)
Address8afa.58e9.cb00
HelloTime2secMaxAge20secForwardDelay15sec
AgingTime300sec
InterfaceRoleStateCostPriority.NumberType
-------------------------------------------------------------------------------
eth-0-1DesignatedForwarding20000128.1P2p
eth-0-2DesignatedForwarding20000128.2P2p
RelatedCommands
None3693.9.40showspanning-treedisabled-port
CommandPurpose
Usethiscommandtoshowthespanningtreeprotocoldisabledport.
CommandSyntax
showspanning-treedisabled-port
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingallspanningtreeprotocol
disabledport:
Switch#showspanning-treedisabled-port
Interface
---------
eth-0-1
RelatedCommands
None
3.9.41showspanning-treemst
CommandPurpose
Usethiscommandtoshowthemstpinformation.370CommandSyntax
showspanning-treemst
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingisanoutputofthiscommanddisplayingthemstpinformationThedown
interfaceshouldnotbeshow:
Switch#showspanning-treemst
Bridgeup-SpanningTreeEnabled
Mode-Multiplespanningtreeprotocol
PathCostStandard-dot1t
CISTRootPathCost0-CISTRootPort0-CISTBridgePriority32768
ForwardDelay15-HelloTime2-MaxAge20-Max-hops20
TxHoldCount6
CISTRootId80008afa58e9cb00
CISTRegRootId80008afa58e9cb00
CISTBridgeId80008afa58e9cb00
Edgeportbpdu-filterdisabled
Edgeportbpdu-guarddisabled
InstanceInterfaceVLAN
0: 1,3
1:eth-0-22
RelatedCommands
None3713.9.42showspanning-treemstconfig
CommandPurpose
Usethiscommandtoshowthemstpregionconfigurationinformation.
CommandSyntax
showspanning-treemstconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowthemstpregionconfigurationinformation:
Switch#showspanning-treemstconfig
MSTPConfigurationInformation:
------------------------------------------------------------------------
FormatId:0
Name:switch
RevisionLevel:0
Digest:0x3AB68794D602FDF43B21C0B37AC3BCA8
Instancesconfigured1
------------------------------------------------------------------------
InstanceVlansmapped
------------------------------------------------------------------------
01,3
12
------------------------------------------------------------------------
RelatedCommands
None3723.9.43showspanning-treemstdetail
CommandPurpose
Usethiscommandtoshowthedetailmstpinformation.
CommandSyntax
showspanning-treemstdetail(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Theinterfacenameyou
wanttodisplay-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingisanoutputofthiscommanddisplayingthemstpinformationThedown
interfaceshouldnotbeshow:
Switch#showspanning-treemstdetailinterfaceeth-0-1
Bridgeup-SpanningTreeEnabled
Mode-Multiplespanningtreeprotocol
PathCostStandard-dot1t
CISTRootPathCost0-CISTRootPort0-CISTBridgePriority32768
ForwardDelay15-HelloTime2-MaxAge20-Max-hops20
TxHoldCount6
CISTRootId80008afa58e9cb00
CISTRegRootId80008afa58e9cb00
CISTBridgeId80008afa58e9cb00
Edgeportbpdu-filterdisabled373Edgeportbpdu-guarddisabled
eth-0-1:Port1-Id8001-RoleDesignated-StateForwarding
eth-0-1:DesignatedExternalPathCost0-InternalPathCost0
eth-0-1:ConfiguredPathCost20000-AddtypeExplicitrefcount1
eth-0-1:DesignatedPortId8001-CISTPriority128
eth-0-1:CISTRoot80008afa58e9cb00
eth-0-1:RegionalRoot80008afa58e9cb00
eth-0-1:DesignatedBridge80008afa58e9cb00
eth-0-1:MessageAge0-MaxAge20
eth-0-1:CISTHelloTime2-ForwardDelay15
eth-0-1:CISTForwardTimer0-MsgAgeTimer0-HelloTimer0-topochanget
imer0
eth-0-1:Forward-transitions2
eth-0-1:BPDUsent247-BPDUreceived0
eth-0-1:VersionMultiplespanningtreeprotocol-ReceivedNone-SendMSTP
eth-0-1:Noedgeportconfigured-Currentedgeportoff
RelatedCommands
None
3.9.44showspanning-treemstinstance
CommandPurpose
Usethiscommandtoshowthedetailmstpinformationofaspecificinstance.
CommandSyntax
showspanning-treemstinstanceINSTANCE_ID(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Instancenumberyouwant
todisplay1-4094
IFNAME Theinterfacenameyou
wanttodisplaySupport
physical/aggregationports
CommandMode
PrivilegedEXEC
Default
None374Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingthedetailmstpinformation:
Switch#showspanning-treemstinstance2
MSTIRootPathCost0-MSTIRootPort0
MSTIRootId8002e083bce89601
MSTIBridgeId8002e083bce89601
MSTIBridgePriority32768
eth-0-48:Port48-Id8030-RoleDisabled-StateDiscarding
eth-0-48:DesignatedInternalPathCost0-DesignatedPortId0
eth-0-48:ConfiguredInternalPathCost20000
eth-0-48:ConfiguredCSTExternalPathcost20000
eth-0-48:CSTPriority128-MSTIPriority128
eth-0-48:DesignatedRoot0000000000000000
eth-0-48:DesignatedBridge0000000000000000
eth-0-48:MessageAge0-MaxAge0
eth-0-48:HelloTime2-ForwardDelay15
eth-0-48:ForwardTimer0-MsgAgeTimer0-HelloTimer0
eth-0-1:Port1-Id8001-RoleDisabled-StateDiscarding
eth-0-1:DesignatedInternalPathCost0-DesignatedPortId0
eth-0-1:ConfiguredInternalPathCost20000
eth-0-1:ConfiguredCSTExternalPathcost20000
eth-0-1:CSTPriority128-MSTIPriority128
eth-0-1:DesignatedRoot0000e083bce89601
eth-0-1:DesignatedBridge0000e083bce89601
eth-0-1:MessageAge0-MaxAge0
eth-0-1:HelloTime2-ForwardDelay15
eth-0-1:ForwardTimer0-MsgAgeTimer0-HelloTimer0
RelatedCommands
None
3.9.45showspanning-treemstinterface
CommandPurpose
Usethiscommandtoshowthedetailmstpinformationofaspecificinterface.375CommandSyntax
showspanning-treemstinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacenameyou
wanttodisplaySupport
physical/aggregationports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingthemstpinformationofan
interface:
Switch#showspanning-treemstinterfaceeth-0-1
Bridgeup-SpanningTreeEnabled
Mode-Multiplespanningtreeprotocol
PathCostStandard-dot1t
CISTRootPathCost0-CISTRootPort0-CISTBridgePriority32768
ForwardDelay15-HelloTime2-MaxAge20-Max-hops20
TxHoldCount6
CISTRootId8000be8c722f7f00
CISTRegRootId8000be8c722f7f00
CISTBridgeId8000be8c722f7f00
Edgeportbpdu-filterdisabled
Edgeportbpdu-guarddisabled
Loopguardconfigureddisabled
InstanceInterfaceVLAN
0 1,4-100
1eth-0-12
2eth-0-13376RelatedCommands
None
3.9.46showspanning-treemstbrief
CommandPurpose
Usethiscommandtoshowthebriefmstpinformation.
CommandSyntax
showspanning-treemstbrief(interfaceIFNAME|instanceINSTANCE_ID|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Theinterfacenameyou
wanttodisplay-
instanceINSTANCE_IDInstancenumberyouwant
todisplay1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingisanoutputofthiscommanddisplayingthebriefmstpinformation:
Switch#showspanning-treemstbrief
#####MST0:Vlans:1
MultiplespanningtreeprotocolEnabled
RootIDPriority32768(0x8000)377Addresse083.bce8.9601
HelloTime2secMaxAge20secForwardDelay15sec
BridgeIDPriority32768(0x8000)
Addresse083.bce8.9601
HelloTime2secMaxAge20secForwardDelay15sec
AgingTime300sec
InterfaceRoleStateCostPriority.NumberType
-----------------------------------------------------------------------
#####MST2:Vlans:2
RootIDPriority32770(0x8002)
Addresse083.bce8.9601
BridgeIDPriority32770(0x8002)
Addresse083.bce8.9601
InterfaceRoleStateInt-CostPriority.NumberType
-----------------------------------------------------------------------
eth-0-48DisabledDiscarding20000128.48P2p
eth-0-1DisabledDiscarding20000128.1P2p
#####MST15:Vlans:15
RootIDPriority32783(0x800f)
Addresse083.bce8.9601
BridgeIDPriority32783(0x800f)
Addresse083.bce8.9601
InterfaceRoleStateInt-CostPriority.NumberType
-----------------------------------------------------------------------
eth-0-48DisabledDiscarding20000128.48P2p
eth-0-1DisabledDiscarding20000128.1P2p
RelatedCommands
None
3.9.47spanning-treeinstanceforward
CommandPurpose
UsethiscommandtosetSTPstateisforwardforinstanceandkeepforward.
CommandSyntax
spanning-treeinstanceINSTANCE_IDforward
nospanning-treeinstanceINSTANCE_IDforward
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Specifytheidentifier 1-4094378CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtosetSTPstateisforwardforinstanceandkeepforward:
Switch#configureterminal
Switch(config)#spanning-treemodemstp
Switch(config)#spanning-treemstconfiguration
Switch(config-mst)#instance1vlan2
Switch(config)#interfaceeth-0-1
Switch(config-if)#spanning-treeinstance1forward
Switch#configureterminal
Switch(config)#interfaceeth-0-1
RelatedCommands
None
3.10FlowControlCommands
3.10.1flowcontrolsend
CommandPurpose
Usethiscommandtoenableordisableflowcontrolsendfunction.
CommandSyntax
flowcontrolsend(on|off)
Parameter ParameterDescriptionParameterValue379on Setsendflowcontrol
enable-
off Setsendflowcontrol
disable-
CommandMode
InterfaceConfiguration
Default
Off
Usage
UsetheflowcontrolInterfaceConfigurationcommandtosettheinterfacesabilityto
sendpauseframestoonoroff.
Examples
Thisexampleshowshowtoenableflowcontroloninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#flowcontrolsendon
RelatedCommands
flowcontrolreceiveon
3.10.2flowcontrolreceive
CommandPurpose
Usethiscommandtoenableordisableflowcontrolreceivefunction.
CommandSyntax
flowcontrolreceive(on|off)380Parameter ParameterDescriptionParameterValue
on Setreceiveflowcontrol
enable-
off Setreceiveflowcontrol
disable-
CommandMode
InterfaceConfiguration
Default
Off
Usage
Usetheflowcontrolinterfaceconfigurationcommandtosettheinterfacesabilityto
receivepauseframestoonoroff.
Examples
Thisexampleshowshowtoenableflowcontroloninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#flowcontrolreceiveon
RelatedCommands
flowcontrolsendon
3.10.3showflowcontrol
CommandPurpose
Usethiscommandtodisplayflowcontrolinformation.
CommandSyntax
showflowcontrol(IFNAME|)381Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethecommandtodisplayflowcontrolabilityandthepauseframeinformationof
eachport.
Examples
Thisexampleshowshowtodisplayflowcontrolinformation:
Switch#showflowcontrol
PortReceiveFlowControlSendFlowControlRxPauseTxPause
adminoperadminoper
------------------------------------------------------------------
eth-0-1offoffoffoff00
eth-0-2offoffoffoff00
eth-0-3offoffoffoff00
eth-0-4offoffoffoff00
eth-0-5offoffoffoff00
eth-0-6offoffoffoff00
eth-0-7offoffoffoff00
eth-0-8offoffoffoff00
eth-0-9offoffoffoff00
eth-0-10offoffoffoff00
eth-0-11offoffoffoff00
eth-0-12offoffoffoff00
eth-0-13offoffoffoff00
eth-0-14offoffoffoff00
eth-0-15offoffoffoff00
eth-0-16offoffoffoff00
eth-0-17offoffoffoff00
eth-0-18offoffoffoff00
eth-0-19offoffoffoff00
eth-0-20offoffoffoff00
eth-0-21offoffoffoff00
eth-0-22offoffoffoff00382eth-0-23offoffoffoff00
eth-0-24offoffoffoff00
RelatedCommands
None
3.11Priority-basedflowcontrolCommands
3.11.1priority-flow-controlenablepriority
CommandPurpose
Usethiscommandtoenableordisablepriority-basedflowcontrolfunctiononwhich
priority.
CommandSyntax
priority-flow-controlenablepriority{0|1|2|3|4|5|6|7}
nopriority-flow-controlenablepriority{0|1|2|3|4|5|6|7}
CommandMode
InterfaceConfiguration
Default
Enablepriority-basedflowcontrolonpriority3
Usage
Usethepriority-flow-controlenablepriorityinterfaceConfigurationcommandtoset
theinterfacesabilitytosendpauseframestoonoroffonwhichpriorities.
Examples
Thisexampleshowshowtoenablepriority-basedflowcontrolonwhichpriorities:
Switch#configureterminal
Switch(config-if)#Priority-flow-controlenablepriority2357383RelatedCommands
priority-flow-controlmode(on|auto)
lldptlv8021-org-specificdcbx
3.11.2showpriority-flow-control
CommandPurpose
Usethiscommandtodisplaypriority-basedflowcontrolinformation.
CommandSyntax
showpriority-flow-control(INTERFACE|)
Parameter ParameterDescriptionParameterValue
INTERFACE Interfacename Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethecommandtodisplaypriority-basedflowcontroladmin-configandoperation-
configinformationofeachport.
Examples
Thisexampleshowshowtodisplaypriority-basedflowcontrolinformation:
Switch#showpriority-flow-controlinterfaceeth-0-1
Switch#showpriority-flow-control
PortPFC-enablePFC-enableonpriority
adminoperadminoper
---------------------------------------------------------------
eth-0-1offoffoffoff384RelatedCommands
None
3.11.3showpriority-flow-controlstatistics
CommandPurpose
Usethiscommandtodisplaypriority-basedflowcontrolstatistics.
CommandSyntax
showpriority-flow-controlstatistics(INTERFACE|)
Parameter ParameterDescriptionParameterValue
INTERFACE Interfacename Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethecommandtodisplaypriority-basedflowcontrolstatisticsofeachport.
Examples
Thisexampleshowshowtodisplaypriority-basedflowcontrolstatistics:
Switch#showpriority-flow-controlstatisticsinterfaceeth-0-1
Switch#showpriority-flow-controlstatistics
PortRxPauseTxPause
--------------------------------------------------
eth-0-10 0385RelatedCommands
None
3.12Layer2ProtocolsTunnelingCommands
3.12.1l2protocolenable
CommandPurpose
Usethiscommandtoenablel2protocolfunctionglobally.
CommandSyntax
l2protocolenable
nol2protocolenable
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoenablel2protocolfunctionglobally.
Examples
Thisexampleshowshowtoenablel2protocolfunctionglobally:
Switch#configureterminal
Switch(config)#l2protocolenable
RelatedCommands
showl2protocol3863.12.2l2protocoltunnel-dmac
CommandPurpose
Usethiscommandtoconfigurel2protocoltunneldestinationMACaddress.
CommandSyntax
l2protocoltunnel-dmacMAC
nol2protocoltunnel-dmac
Parameter ParameterDescriptionParameterValue
MAC l2protocoltunnels
destinationMACaddress0100.0CCD.CDD0-D2or
010F.E200.0003
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocoltunneldmac.Systemdefaulttunnel-dmac
is0100.0ccd.cdd0.
Examples
Followingisasamplethatconfiguring010FE2000003asl2protocoltunneldmac:
Switch#configureterminal
Switch(config)#l2protocoltunnel-dmac010F.E200.0003
RelatedCommands
showl2protocol3873.12.3l2protocolmac1
CommandPurpose
Usethiscommandtoconfigurel2protocolmacaddressglobally.
CommandSyntax
l2protocolmac1MACmaskMASK
nol2protocolmac1
Parameter ParameterDescriptionParameterValue
MAC L2ProtocolMACaddress.
0180.C200.0000~0180.C2
00.003Fisusedbyother
protocol,sothisrangeis
outofL2ProtocolMAC
addresscontrol.0180.C200.0000~
0180.C2FF.FFFF
MASK L2ProtocolMACMASKFFFF.FF00.0000~
FFFF.FFFF.FFFF
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocolmacaddressglobally.
Examples
Thisexampleshowshowtoconfigurel2protocolmacaddress:
Switch#configureterminal
Switch(config)#l2protocolmac10180.c222.0000maskffff.ffff.0000388RelatedCommands
l2protocolfull-mac
3.12.4l2protocolmac<2-6>
CommandPurpose
Usethiscommandtoconfigurel2protocolmacaddressglobally.
CommandSyntax
l2protocolmacMAC_NUMMAC
nol2protocolmacMAC_NUM
Parameter ParameterDescriptionParameterValue
MAC_NUM TheIDofl2protocolMAC2-6
MAC TheMACaddressofl2
protocolMAC0180.C200.0000~
0180.C2FF.FFFF
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocolmacaddressglobally.Shouldnotoverlap
eachother.
Examples
Thisexampleshowshowtoconfigurel2protocolmacaddress:
Switch#configureterminal
Switch(config)#l2protocolmac30180.c200.0000389RelatedCommands
l2protocolfull-mac
3.12.5l2protocol
CommandPurpose
Usethiscommandtoconfigurel2protocolpdu-mac-addresstodiscard,peerortunnel.
CommandSyntax
l2protocol(stp|slow-proto|dot1x|cfm|macMAC_NUM|full-mac)(discard|peer
|tunnel(evcWORD|)|forward
l2protocol(cdp|vtp|lldp|all)(discard|peer|forward)
nol2protocol(stp|slow-proto|dot1x|cfm|lldp|cdp|vtp|all|macMAC_NUM|
full-mac)
Parameter ParameterDescriptionParameterValue
stp MAC:0180.c200.0000-
slow-proto MAC:0180.c200.0002,
ethertype:0x8809-
dot1x MAC:0180.c200.0003,
ethertype:0x888e-
cfm ethertype:0x8902 -
cdp CiscoDiscoveryProtocol-
vtp VlanTrunkingProtocol-
lldp LinkLayerDiscovery
Protocol-
all includestp,sflow-proto,
dot1x,cfm,lldp,cdp,vtp-
macMAC_NUM Globallyconfiguredmac1-
21-2390discard Discardtheprotocoldata
unit-
peer Actaspeertothe
customerdeviceinstance
oftheprotocol,peeris
defaultoption-
tunnel Tunneltheprotocoldata
unitintotheSVLAN-
forward Forwardtheprotocoldata
unit-
full-mac Globallyconfiguredfull-
mac-
WORD Theevcname Upto15characters
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocoltodiscard,peerortunnel.
Examples
Thisexampleshowshowtoconfigurel2protocoltodiscard:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#l2protocolstpdiscard
Thisexampleshowshowtoconfigurel2protocoltotunnel:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#l2protocolslow-prototunnelevcevc1391RelatedCommands
None
3.12.6l2protocoluplinkenable
CommandPurpose
Usethiscommandtoconfigurel2protocoluplinkport.
CommandSyntax
l2protocoluplinkenable
nol2protocoluplinkenable
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocoluplinkport.
Examples
Thisexampleshowshowtoconfigurel2protocoluplinkport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#l2protocoluplinkenable
RelatedCommands
None3923.12.7showl2protocol
CommandPurpose
Usethisdisplaycurrentl2protocoltunnelconfiguration.
CommandSyntax
showl2protocol(interfaceIFNAME|tunnel-dmac|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Interfacename Supportaggregationand
physicalports
tunnel-dmac Layer2protocolstunnel
destinationMACaddress-
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethisdisplaycurrentl2protocoltunnelconfigurationoronspecifiedinterface.
Examples
Thisexampleshowshowtodisplaycurrentl2protocoltunnelconfigurationon
interfaceeth-0-1:
Switch#showl2protocolinterfaceeth-0-1
InterfacePDUAddressMASK StatusEVC
=============================================================
eth-0-1stp ffff.ffff.ffffPeerN/A
eth-0-1slow-protoffff.ffff.ffffPeerN/A
eth-0-1dot1xffff.ffff.ffffPeerN/A
Switch#showl2protocoltunnel-dmac
Layer2protocolstunneldestinationMACaddressis0100.0ccd.cdd0393Thisexampleshowshowtodisplaycurrentl2protocoltunnelconfigurationontunnel-
mac:
Switch#showl2protocoltunnel-dmac
Layer2protocolstunneldestinationMACaddressis0100.0ccd.cdd0
RelatedCommands
None
3.12.8l2protocolcos
CommandPurpose
Usethiscommandtoconfigurel2protocolcosglobally.
CommandSyntax
l2protocolcosCOS_VALUE
nol2protocolcos
Parameter ParameterDescriptionParameterValue
COS_VALUE vlantagpriority 0-7
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoconfigurel2protocolcosglobally,thedefaultvalueis0.
Examples
Thisexampleshowshowtoconfigurel2protocolcos7:394Switch#configureterminal
Switch(config)#l2protocolcos7
RelatedCommands
None
3.12.9l2protocolfull-mac
CommandPurpose
Usethiscommandtoconfigurel2protocolmacaddressglobally.
CommandSyntax
l2protocolfull-macMAC
nol2protocolfull-mac
Parameter ParameterDescriptionParameterValue
MAC DestinationMACaddress,
includingallMAC
addresses0000.0000.0000~
FFFF.FFFF.FFFF
CommandMode
GlobalConfiguration
Default
None
Usage
IftheL2protocolfull-macaddresscoincideswithBPDU,Slowproto,EAPOLor
MAC<1-4>,thetunneloperationpriorityisorderly:BPDU,Slowproto,EAPOL,full-
mac,mac<1-4>.
IftheL2protocolfull-macaddresscoincideswithL2ProtocoltunneldestinationMAC
address,thecrossedL2protocolmacaddresswonttakeeffectwhentunnelL2
Protocol395Examples
Thisexampleshowshowtoconfigurel2protocolfull-macaddress:
Switch#configureterminal
Switch(config)#l2protocolfull-mac0100.0CCC.CCCC
RelatedCommands
l2protocolmac
3.13StormControlCommands
3.13.1portstorm-control
CommandPurpose
Usethestorm-controlinterfaceconfigurationcommandtoenablebroadcast,
multicast,orunicaststormcontrolandtosetthresholdlevelsonaninterface.Usethe
noformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
storm-control(broadcast|multicast|unicast)(levelLEVEL|ppsPPS)
nostorm-control(broadcast|multicast|unicast)
Parameter ParameterDescriptionParameterValue
broadcast Enablebroadcaststorm
controlontheinterface-
multicast Enablemulticaststorm
controlontheinterface-
unicast Enableunicaststorm
controlontheinterface-
levelLEVEL Specifytherisingand
fallingsuppressionlevels
asapercentageoftotal
bandwidthoftheport.0.00-100.00396ppsPPS Specifytherisingand
fallingsuppressionlevels
asarateinpacketsper
secondatwhichtrafficis
receivedontheport.0-1000000000
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
Thiscommandcanonlybeconfiguredonswitchport.
Examples
Thisexampleshowshowtoconfigurestorm-controlbroadcastoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#storm-controlbroadcastlevel30
Thisexampleshowshowtodisablestorm-controlbroadcastoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nostorm-controlbroadcast
RelatedCommands
showstorm-control
3.13.2vlanstorm-control
CommandPurpose
Usethestorm-controlvlanconfigurationcommandtoenablebroadcast,multicast,or
unicaststormcontrolandtosetthresholdlevelsonaninterface.Usethenoformof
thiscommandtoreturntothedefaultsetting.397CommandSyntax
storm-control(broadcast|multicast|unicast)(bandwidth<1-100000000>|pps<0-
1000000000>)
nostorm-control(broadcast|multicast|unicast)
Parameter ParameterDescriptionParameterValue
broadcast Enablebroadcaststorm
controlonthevlan-
multicast Enablemulticaststorm
controlonthevlan-
unicast Enableunicaststorm
controlonthevlan-
bandwidth<1-100000000>Specifytherisingand
fallingsuppressionlevels
asarateinbitspersecond
atwhichtrafficisreceived
onthevlan.1-100000000
pps<0-1000000000> Specifytherisingand
fallingsuppressionlevels
asarateinpacketsper
secondatwhichtrafficis
receivedonthevlan.0-1000000000
CommandMode
VLANConfiguration
Default
Disabled
Usage
Thiscommandcanonlybeconfiguredonvlan.398Examples
Thisexampleshowshowtoconfigurestorm-controlbroadcastonvlan:
Switch#configureterminal
Switch(config)#vlan10
Switch(config-vlan)#storm-controlbroadcastbandwidth3000
Thisexampleshowshowtodisablestorm-controlbroadcastonvlan:
Switch#configureterminal
Switch(config)#vlan10
Switch(config-vlan)#nostorm-controlbroadcast
RelatedCommands
showstorm-control
3.13.3ipgstorm-controlenable
CommandPurpose
Usetheipgstorm-controlenabletoletstormcontrolcalculateIPGbytes.Usetheno
formofthiscommandtoreturntothedefaultsetting.
CommandSyntax
ipgstorm-controlenable
noipgstorm-controlenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
Thiscommandcanbeconfiguredonglobalconfiguremode.399Examples
Thisexampleshowshowtoconfigurestorm-controltocalculateIPGbytes:
Switch#configureterminal
Switch(config)#ipgstorm-controlenable
Thisexampleshowshowtodisablestorm-controltocalculateIPGbytes:
Switch#configureterminal
Switch(config)#noipgstorm-controlenable
RelatedCommands
None
3.13.4showstorm-control
CommandPurpose
Usethiscommandtoshowstorm-controlconfigurations.
CommandSyntax
showstorm-control(interfaceINTERFACE|vlan<1-4094>|)
Parameter ParameterDescriptionParameterValue
interfaceINTERFACE Interfacename Supportphysicalports
vlan<1-4094> VLANID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommanddisplaysthestorm-controlconfigurations.400Examples
Thisexampleshowsstorm-controlconfigurations:
Switch#showstorm-control
Thisexampleshowsstorm-controlconfigurationsoninterfaceeth-0-1:
Switch#showstorm-controlinterfaceeth-0-1
RelatedCommands
storm-control
3.13.5showstorm-controlresource
CommandPurpose
Usethiscommandtoshowstorm-controlresources.
CommandSyntax
showresourcestorm-control
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommanddisplaysthestorm-controlresources.
Examples
Thisexampleshowstheoverallresourcesandusageofstormcontrol.:
Switch#showresourcestorm-control401RelatedCommands
None
3.14LoopbackDetectionCommands
3.14.1loopback-detectenable
CommandPurpose
Usingtheloopback-detectenablecommand,youcanenableloopbackdetectionon
aninterface.
Usingthenoloopback-detectenablecommand,youcandisableloopbackdetection
onaninterface.Bydefault,loopbackdetectionisdisabledonaninterface.
CommandSyntax
loopback-detectenable
noloopback-detectenable
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Theloopback-detectenablecommandenablesloopbackdetectiononaninterface.
Thisfunctionenablesthesystemtodetectaloopbackontheinterfacequicklyand
minimizesimpactoftheloopbackontheentirenetwork.Afterloopbackdetectionis
enabledonaninterface,theinterfacesendsloopbackdetectionpacketsatintervals.
LoopbackdetectionoccupiesCPUresources;therefore,disablethisfunctionwhenit
isnotrequired.402Examples
Thisexampleshowshowtoenableloopbackdetectonporteth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopback-detectenable
RelatedCommands
showloopback-detect
3.14.2loopback-detectpacket-interval
CommandPurpose
Usingtheloopback-detectpacket-intervalcommand,youcansettheintervalfor
sendingloopbackdetectionpacketsonallinterfaces.
Usingthenoloopback-detectpacket-intervalcommand,youcanrestorethedefault
intervalforsendingloopbackdetectionpacketsonallinterfaces.
Bydefault,theintervalforsendingloopbackdetectionpacketsis5s
CommandSyntax
loopback-detectpacket-intervalINTERVAL
noloopback-detectpacket-interval
Parameter ParameterDescriptionParameterValue
INTERVAL loopbackdetectpacket
sendinterval1-300,unit:second
CommandMode
GlobalConfiguration
Default
5seconds403Usage
Theloopback-detectpacket-intervalcommandisusedtoadjusttheintervalfor
sendingloopbackdetectionpackets.Afterloopbackdetectionisenabledonan
interface,theinterfacesendsloopbackdetectionpacketsattheintervalspecifiedby
theloopback-detectpacket-intervalcommand.Ifashorterintervalisset,thesystem
sendsmoreloopbackdetectionpacketsinacertainperiod.Thisenablesthesystem
todetectloopbacksmorequicklyandaccurately,butmoresystemsourcesare
consumed.
Examples
Thisexampleshowshowtosettheintervalforsendingloopbackdetectionpacketsto
10s:
Switch#configureterminal
Switch(config)#loopback-detectpacket-interval10
RelatedCommands
showloopback-detect
3.14.3loopback-detectrecovery-time
CommandPurpose
Usingtheloopback-detectrecovery-timecommand,youcansetthetimeforinterface
recoveryfromabnormalstatus.
Usingthenoloopback-detectrecovery-timecommand,youcanrestorethedefault
time.
Bydefault,thevalueforrecoverytimeisthepacket-interval*3
CommandSyntax
loopback-detectrecovery-timeTIME
noloopback-detectrecovery-time
Parameter ParameterDescriptionParameterValue404TIME recoverytimeinseconds1-255,unit:second
CommandMode
InterfaceConfiguration
Default
recovery-timeispacket-interval*3
Usage
Iftheinterfaceisshutdown,thiscommandisuseless.
Examples
Thisexampleshowshowtosetthevalueforrecoveryingtimeto10s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopback-detectrecovery-time10
RelatedCommands
showloopback-detect
3.14.4loopback-detectdelay-time
CommandPurpose
Usingtheloopback-detectdelay-timeoninterfaceforsetaciton.
Usingthenoloopback-detectdelay-timetosetnotdelay.
CommandSyntax
loopback-detectdelay-timeTIME
noloopback-detectdelay-time
Parameter ParameterDescriptionParameterValue
TIME delaytime 1-255,unit:second405CommandMode
InterfaceConfiguration
Default
None
Usage
Thenoloopback-detectdelay-timecommandisusedtosetontheinterface,if
receivedloopback-detectpacket,thensetactionthatsetontheinterface.
Examples
Thisexampleshowshowtosetthevaluefordelaytimesetactionto5s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopback-detectdelay-time5
RelatedCommands
showloopback-detect
3.14.5loopback-detectaction
CommandPurpose
Usingtheloopback-detectactioncommand,youcanconfigureanactiontoperform
whenaloopbackisdetectedonaninterface.
Usingthenoloopback-detectactioncommand,youcanrestorethedefaultaction.
Bydefault,aninterfaceisblockedwhenaloopbackisdetectedontheinterface.
CommandSyntax
loopback-detectaction{shutdown|trap|block}
noloopback-detectaction
Parameter ParameterDescriptionParameterValue406shutdown Shutsdownaninterface
whenaloopbackis
detectedontheinterface.-
Trap Onlysendsatrap
messagewhenaloopback
isdetected.-
block Blocktheinterfaceand
continuetosendloopback-
detectpackets-
CommandMode
InterfaceConfiguration
Default
Trap
Usage
Afterloopbackdetectionisenabledonaninterface,theinterfacesendsloopback
detectionpacketsatintervals.Whenaloopbackisdetectedontheinterface,the
systemperformsanactiontominimizetheimpactontheentirenetwork.The
loopback-detectactioncommandconfigurestheaction.
Examples
Thisexampleshowshowtoconfigurethesystemactiontoshutdowninterfaceeth-0-
1whenaloopbackoccurs:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopback-detectactionshutdown
RelatedCommands
showloopback-detect
loopback-detectenable4073.14.6loopback-detectpacketvlan
CommandPurpose
Usingtheloopback-detectpacketvlancommand,youcanspecifytheVLANIDsof
loopbackdetectionpacketsonaninterface.
Usingthenoloopback-detectpacketvlancommand,youcancancelthe
configuration.
Bydefault,detectionpacketsdonothaveaVLANID.
CommandSyntax
loopback-detectpacketvlanVID
noloopback-detectpacketvlanVID
Parameter ParameterDescriptionParameterValue
VID VLANID 1-4094
CommandMode
InterfaceConfiguration
Default
Novlanid.
Usage
Bydefault,loopbackdetectionpacketsdonotcontainVLANIDs.Aftertheloopback-
detectpacketvlancommandisexecutedonaninterface,theinterfacesendsan
untaggedloopbackdetectionpacketandtheloopbackdetectionpacketswiththe
specifiedVLANtags.ThespecifiedVLANsexistandtheinterfacehasbeenaddedto
theVLANsintaggedmode.Ifyouruntheloopback-detectpacketvlancommand
multipletimesinthesameinterfaceview,multipleVLANIDsarespecified.
YoucanspecifyamaximumofeightVLANIDs408Examples
ThisexampleshowshowtosettheVLANIDofloopbackdetectionpacketssentby
interfaceeth-0-1to30:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopback-detectpacketvlan30
RelatedCommands
showrunning-config
3.14.7showloopback-detect
CommandPurpose
Usingtheshowloopback-detectcommand,youcanviewtheloopbackdetection
configurationandstatusofloopbackdetectionenabledinterfaces.
CommandSyntax
showloopback-detect{interfaceIFNAME|packet-interval}
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Showloopbackdetection
statusandconfigurationon
interface.Supportphysicalports
packet-interval Showloopabckdetect
packetinterval.-
CommandMode
PrivilegedEXEC
Default
None409Usage
Thiscommandisusedtochecktheloopbackdetectionconfigurationandstatusof
eachinterfaceonwhichloopbackdetectionisenabled.
Examples
Displaytheloopbackdetectionconfigurationandstatusofloopbackdetection
enabledinterfaces:
Switch#showloopback-detect
Loopbackdetectionpacketinterval(second)5
InterfaceActionStatusDelay(s)DLeft(s)Recovery(s)RLeft(s)Send Recv Count
eth-0-47trapNORMAL30-15-N/A N/A 0
eth-0-48trapNORMAL--15-2001-01-05034721N/A 0
RelatedCommands
loopback-detectaction
loopback-detectenable
3.14.8loopback-detectin-loop-enable
CommandPurpose
Usingtheloopback-detectin-loopenable,youcanenablein-loopmode.
Usingthenoloopback-detectin-loop-enable,youcandisablein-loopmode.
CommandSyntax
loopback-detectin-loop-enable
noloopback-detectin-loop-enable
CommandMode
GlobalConfiguration
Default
Disable410Usage
Usingthiscommandcanswitchloopback-detecttothein-loopmodeinglobal
configurationmode.Inthismode,aloopalarmistriggeredwhentheportreceivesthe
packetsfromthesameport,andwhentheportreceivesthepacketsfromotherports
onthesameboard,theloopalarmistriggered.
Examples
Thisexampleshowshowtoenablein-loopmodeinglobalconfigration:
Switch#configureterminal
Switch(config)#loopback-detectin-loop-enable
RelatedCommands
None
3.15MLAGCommands
3.15.1mlagconfiguration
CommandPurpose
ThemlagconfigurationcommandentersMLAGconfigurationmodetoconfigure
MultichassisLinkAggregation(MLAG)features.
ThenomlagconfigurationcommandremovesallMLAGconfigurationcommandfrom
running-config.
CommandSyntax
mlagconfiguration
nomlagconfiguration
CommandMode
GlobalConfiguration411Default
None
Usage
ThemlagconfigurationcommandentersMLAGconfigurationmodetoconfigure
MultichassisLinkAggregation(MLAG)features.Theexitcommanddoesnotaffect
theconfiguration.ThenomlagconfigurationcommandremovesallMLAG
configurationcommandfromrunning-config.
Examples
ThisexampleshowshowtoenterMLAGconfigurationmode:
Switch#configureterminal
Switch(config)#mlagconfiguration
RelatedCommands
showmlag
3.15.2peer-address
CommandPurpose
Thepeer-addresscommandspecifiesthepeerIPv4addressforaMLAGdomain.
Thenopeer-addresscommandremovestheMLAGpeersIPv4addressassignment
bydeletingthepeer-addresscommandfromrunning-config.
CommandSyntax
peer-addressIP_ADDR
nopeer-address
Parameter ParameterDescriptionParameterValue
IP_ADDR MLAGpeerIPv4addressIPv4Address412CommandMode
MLAGConfiguration
Default
None
Usage
Thepeer-addresscommandspecifiesthepeerIPv4addressforaMLAGdomain.
MLAGcontroltrafficissenttothepeerIPv4address.
Thenopeer-addresscommandremovestheMLAGpeersIPv4addressassignment
bydeletingthepeer-addresscommandfromrunning-config.
Examples
ThisexampleshowshowtospecifythepeerIPv4addressforaMLAGdomain:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#peer-address12.1.1.2
Switch(config-mlag)#
RelatedCommands
showmlagpeer
3.15.3peer-link
CommandPurpose
Thepeer-linkcommandspecifiestheinterfacethatconnectsMLAGpeers.
Thenopeer-linkcommandremovesthepeerlinkbydeletingthepeer-linkcommand
fromrunning-config
CommandSyntax
peer-linkIFNAME
nopeer-link413Parameter ParameterDescriptionParameterValue
IFNAME Interfaceforpeerlink.Onlysupportphyportor
aggport
CommandMode
MLAGConfiguration
Default
None
Usage
Thepeer-linkcommandspecifiestheinterfacethatconnectsMLAGpeers.Toform
anMLAG,twoswitchesareconnectedthroughaninterfacecalledaapeerlink.The
peerlinkcarriescontrolanddatatrafficbetweenthetwoswitches.
Thenopeer-linkcommandremovesthepeerlinkbydeletingthepeer-linkcommand
fromrunning-config.
Examples
ThisexampleshowshowtospecifytheinterfacethatconnectsMLAGpeers:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#peer-linketh-0-9
Switch(config-mlag)#
RelatedCommands
showmlag
3.15.4timersmlag
CommandPurpose
Thetimersmlagcommandspecifiesthekeepaliveintervalandholdtimetimers.
Thenotimersmlagcommandremovesthespecifiedtimerandreturnsittodefault
value.414CommandSyntax
timersmlagkeepaliveholdtime
notimersmlag
Parameter ParameterDescriptionParameterValue
keepalive keepalivetimeinterval1-65535,unit:second
holdtime holdtimetimeinterval4-65535,unit:second
CommandMode
MLAGConfiguration
Default
Defaultkeepaliveintervalis1secondsanddefaultholdtimeis5seconds.
Usage
Thetimersmlagcommandspecifiesthekeepaliveintervalandholdtimetimers.Itwill
betakeeffectivebynexttimewhenthepeergoestoestablished.Betweenthelocally
configuredkeepalivetimerandthecalculatedvaluebytheremoteholdtime/4carried
inopenmessage,systemusesthesmalleroneinactualcalculation.
Thenotimersmlagcommandremovesthespecifiedtimerandreturnsittodefault
value.
Examples
Thisexampleshowshowtospecifythekeeepaliveintervalandholdtimetimers:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#timersmlag10100
Switch(config-mlag)#
RelatedCommands
showmlagpeer4153.15.5reload-delay
CommandPurpose
Thereload-delaycommandspecifiestheperiodthatnon-peerlinksaredisabledafter
anMLAGpeerreboots.
Thenoreload-delaycommandrestoresthedefaultvalueof300bydeletingthe
reload-delaymlagstatementfromrunning-config.
CommandSyntax
reload-delay(auto|period)
noreload-delay
Parameter ParameterDescriptionParameterValue
period Disablelinkinterval.The
number0meansthat
interfacenotenterinto
errdisable0-86400,unit:second
auto Autorecoveryfrom
errdisableafterMLAG
peerbuildsuccessful.-
CommandMode
MLAGConfiguration
Default
300seconds.
Usage
WhenanMLAGpeerreboots,allportsexceptthoseinpeer-linkport-channelremain
inerrdisabledstateforaspecifiedperiod.Thisperiodallowsalltopologystatesto
stabilizebeforetheswitchbeginsforwardingtraffic.Thespecifiedperiodis
configuredbythiscommand.416Examples
Thisexampleshowshowtospecifythedealyinterval:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#reload-delay100
Switch(config-mlag)#
RelatedCommands
showmlag
3.15.6sync-orphan
CommandPurpose
Thesync-orphancommandspecifiesthemlagpeerstosyncMACentriesonorphan
port.
Thenosync-orphancommanddisablethefunction.
CommandSyntax
sync-orphan
nosync-orphan
CommandMode
MLAGConfiguration
Default
Enable
Usage
IfthisfunctionisdisabledMLAGpeerswillonlysyncthoseMACentriesinMLAG
group.417Examples
ThisexampleshowshowtospecifythemlagpeerstosyncMACentriesonorphan
port:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#sync-orphan
Switch(config-mlag)#
RelatedCommands
showmlag
3.15.7sync-overlay
CommandPurpose
Thesync-overlaycommandspecifiesthemlagpeerstosyncMACentriesonoverlay
logicport.
Thenosync-overlaycommanddisablethefunction.
CommandSyntax
sync-overlay
nosync-overlay
CommandMode
MLAGConfiguration
Default
Enable
Usage
IfthisfunctionisdisabledMLAGpeerswillonlysyncthoseMACentriesinMLAG
group.418Examples
ThisexampleshowshowtospecifythemlagpeerstosyncMACentriesonoverlay
logicports:
Switch#configureterminal
Switch(config)#mlagconfiguration
Switch(config-mlag)#sync-overlay
Switch(config-mlag)#
RelatedCommands
showmlag
3.15.8mlag
CommandPurpose
ThemlagcommandassignsanMLAGIDtoaport-channel.
ThenomlagcommandremovestheMLAGIDassignmentfromtheconfiguration
modeinterfacebydeletingthecorrespondingmlagcommandfromrunning-config.
CommandSyntax
mlagMLAGID
nomlag
Parameter ParameterDescriptionParameterValue
MLAGID NumberusedasMLAGID.1-63
CommandMode
InterfaceConfiguration
Default
None419Usage
ThemlagcommandassignsanMLAGIDtoaport-channel.MLAGpeerswitches
formanMLAGwheneachswitchconfiguresthesameMLAGIDtoaport-channel
interface.OnlyoneMLAGIDcanbeassignedtoaninterface.AnindividualMLAG
numbercannotbeassignedtomorethanoneinterface.
ThenomlagcommandremovestheMLAGIDassignmentfromtheconfiguration
modeinterfacebydeletingthecorrespondingmlagcommandfromrunning-config.
Examples
ThisexampleshowshowtoassignsanMLAGIDtoaport-channel:
Switch#configureterminal
Switch(config)#interfaceagg1
Switch(config-if)#mlag1
RelatedCommands
showmlaginterface
3.15.9clearmlagcount
CommandPurpose
Theclearmlagcountcommandclearsmlagcountinformation.
CommandSyntax
clearmlagcount
CommandMode
PrivilegedEXEC
Default
None420Usage
Usethiscommandtoclearmlagcountinformationwhichcanbedisplayedbyshow
mlagpeercommand.
Examples
Thisexampleshowshowtoclearmlagcountinformationanddisplayinformation
abouttheMLAGpeer:
Switch#clearmlagcount
Switch#showmlagpeer
MLAGneighboris12112,MLAGversion1
MLAGstate=Established,upfor000039
Lastread000015,holdtimeis240,keepaliveintervalis60seconds
Received0messages,Sent0messages
Openreceived0,sent0
KAlivereceived0,sent0
Fdbsyncreceived0,sent0
Failoverreceived0,sent0
Confreceived0,sent0
Sysprireceived0,sent0
Peerfdbreceived0,sent0
STPTotalreceived0,sent0
Globalreceived0,sent0
Packetreceived0,sent0
Instancereceived0,sent0
Statereceived0,sent0
Connectionsestablished1;dropped0
Localhost12111,Localport61000
Foreignhost12112,Foreignport37335
remote_sysid0ecb30301100
RelatedCommands
showmlagpeer
3.15.10showmlag
CommandPurpose
TheshowmlagcommanddisplaysinformationabouttheMLAGconfiguration.
CommandSyntax
showmlag421CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplayinformationabouttheMLAGconfiguration.
Examples
ThisexampleshowshowtodisplayinformationabouttheMLAGconfiguration:
Switch#showmlag
MLAGconfiguration
-----------------
roleMaster
local_sysid001e080a6fca
remote_sysid000000000000
mlag_sysid001e080a6fca
local_syspri32768
remote_syspri0
mlag_syspri32768
peer-link-
peerconfNo
reload-delay300
RelatedCommands
mlagconfiguration
3.15.11showmlagpeer
CommandPurpose
TheshowmlagpeercommanddisplaysinformationabouttheMLAGpeer.
CommandSyntax
showmlagpeer(vlan-if|)422Parameter ParameterDescriptionParameterValue
vlan-if Vlaninterfaceinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplayinformationabouttheMLAGpeer.
Examples
ThisexampleshowshowtodisplayinformationabouttheMLAGpeer:
Switch#showmlagpeer
MLAGneighboris12112,MLAGversion1
MLAGstate=Established,upfor4d02h14m
Lastread000029,holdtimeis240,keepaliveintervalis60seconds
Received6835messages,Sent7185messages
Openreceived1,sent2
KAlivereceived6831,sent6830
Fdbsyncreceived0,sent0
Failoverreceived0,sent87
Confreceived1,sent1
STPTotalreceived2,sent265
Globalreceived2,sent3
Packetreceived0,sent0
Instancereceived0,sent0
Statereceived0,sent262
Connectionsestablished1;dropped0
Localhost12111,Localport61000
Foreignhost12112,Foreignport34283
remote_sysid5e266a03d400
RelatedCommands
peer-address4233.15.12showmlaginterface
CommandPurpose
TheshowmlaginterfacecommanddisplaysinformationabouttheMLAGinterface.
CommandSyntax
showmlaginterface(MLAGID|)
Parameter ParameterDescriptionParameterValue
MLAGID NumberusedasMLAGID.1-63
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplayinformationabouttheMLAGinterface.
Examples
ThisexampleshowshowtodisplayinformationabouttheMLAGinterface:
Switch#showmlaginterface
mlagidlocal-iflocal-stateremote-state
1agg1upup
2agg2upup
RelatedCommands
mlagMLAGID4243.16Hashload-banlanceCommands
3.16.1hashfield
CommandPurpose
Usethiscommandtosethashfieldorcreateanewhashfield,andenterhashfield
configureview;usethenocommandtodeleteuser-definedhashfield.
CommandSyntax
hash-field(port-channel|ecmp|NAME)
nohash-fieldNAME
Parameter ParameterDescriptionParameterValue
port-channel Port-channelofsystem
defaulthashfield-
ecmp Ecmpofsystemdefault
hashfield-
NAME HashfieldnamestringTheinitialcharacterof
nameshouldbea-z,A-Z,
or0-9,characteronlycan
be0-9A-Za-z.-_andthe
maxlengthis64
CommandMode
GlobalConfiguration
Default
port-channelecmp425Usage
Thesystemsupportthemaxnumberofhashfieldis8,including2systemdefault
hashfieldsnamedport-channelandecmpand6user-definedhashfields.when
appliedtothehashvalue,itcantbedeleted.
Examples
Thefollowingexampleshowshowtocreateanewhashfieldnameduser:
Switch#configureterminal
Switch(config)#hash-fielduser
Switch(config-hash-field)#
Thefollowingexampleshowshowtodeletetheuser-definedhashfieldnameduser:
Switch#configureterminal
Switch(config)#nohash-fielduser
RelatedCommands
showhash-field
3.16.2l2
CommandPurpose
Usethiscommandtosetl2packethashfield;usethenocommandtosetthel2
packetfieldtodefault.
CommandSyntax
l2(macda|macsa|vlan|eth-type|src-interface)
nol2
Parameter ParameterDescriptionParameterValue
macda MACDestinationAddress-
macsa MACSourceAddress -
vlan Vlan -
eth-type EthernetType -426src-interface SourceInterface -
CommandMode
Config-hash-field
Default
l2macsamacda
Usage
None
Examples
Thefollowingexampleshowshowtoselectmacsaforl2packetloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#l2macsa
Thefollowingexampleshowshowtoselectdefaultl2packetloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#nol2
RelatedCommands
showhash-field
3.16.3ip
CommandPurpose
Usethiscommandtosetippackethashfield;usethenocommandtosettheip
packetfieldtodefault.427CommandSyntax
ip(ipda|ipsa|ip-protocol|sourceport|destport|src-interface)
noip
Parameter ParameterDescriptionParameterValue
ipda IPDestinationAddress-
ipsa IPSourceAddress -
ip-protocol IPHeaderprotocol -
sourceport Layer4SourcePort -
destport Layer4DestinationPort-
src-interface SourceInterface -
CommandMode
Config-hash-field
Default
ipipsaipdasourceportdestportip-protocol
Usage
None
Examples
Thefollowingexampleshowshowtoselectipsaforippacketloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#ipipsa
Thefollowingexampleshowshowtoselectdefaultippacketloadbalanceinport-
channel:428Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#noip
RelatedCommands
showhash-field
3.16.4ipv6
CommandPurpose
Usethiscommandtosetipv6packethashfield;usethenocommandtosettheipv6
fieldtodefault.
CommandSyntax
ipv6(ipda|ipsa|ip-protocol|sourceport|destport|src-interface)
noipv6
Parameter ParameterDescriptionParameterValue
ipda IPDestinationAddress-
ipsa IPSourceAddress -
ip-protocol IPHeaderprotocol -
sourceport Layer4SourcePort -
destport Layer4DestinationPort-
src-interface SourceInterface -
CommandMode
Config-hash-field
Default
ipv6ipsaipdasourceportdestportip-protocol429Usage
Onlywhenthesystemisinipv6mode,theipv6packethashfieldcanworknormally.
Examples
Thefollowingexampleshowshowtoselectipsaforipv6packetloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#ipv6ipsa
Thefollowingexampleshowshowtoselectdefaultipv6packetloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#noipv6
RelatedCommands
showhash-field
3.16.5vxlan
CommandPurpose
Usethiscommandtosetvxlanpackethashfield.
Toreturntheconfigurationtodefaultvalueusethenoformofthiscommand.
CommandSyntax
vxlan{vni|src-interface}
vxlan({vni|src-interface}|)outer{ipsa|ipda|sourceport|destport|vlan}
vxlan({vni|src-interface}|)inner-layer2{macsa|macda|eth-type}
vxlan({vni|src-interface}|)inner-layer3{ipsa|ipda|sourceport|destport|ip-
protocol}
novxlan430Parameter ParameterDescriptionParameterValue
vni VXLANVNI -
src-interface SourceInterface -
outeripsa OuterheadersIPSource
Address-
outeripda OuterheadersIP
DestinationAddress-
outersourceport OuterheadersLayer4
SourcePort-
outerdestport OuterheadersLayer4
DestinationPort-
outervlan OuterheadersVlanID-
innermacsa InnerheadersMAC
SourceAddress-
innermacda InnerheadersMAC
DestinationAddress-
innereth-type InnerheadersEthernet
Type-
inneripsa InnerheadersIPSource
Address-
inneripda InnerheadersIP
DestinationAddress-
innersourceport InnerheadersLayer4
SourcePort-
innerdestport InnerheadersLayer4
DestinationPort-
innerip-protocol InnerheadersIPHeader
protocol-431CommandMode
Config-hash-field
Default
vxlanvniouteripsaipdasourceport
Usage
Outerconfigurationandinnerconfigurationcannottakeeffectatthesametime.
Examples
Thefollowingexampleshowshowtoselectouteripsaandvniforvxlanpacketload
balanceinport-channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#vxlanvniouteripda
Thefollowingexampleshowshowtoselectdefaultvxlanpacketloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#novxlan
RelatedCommands
showhash-field
3.16.6nvgre
CommandPurpose
Usethiscommandtosetnvgrepackethashfield.
Toreturntheconfigurationtodefaultvalueusethenoformofthiscommand.
CommandSyntax
nvgre{vsid|src-interface}
nvgre({vsid|src-interface}|)outer{ipsa|ipda}432nvgre({vsid|src-interface}|)inner-layer2{macsa|macda|eth-type}
nvgre({vsid|src-interface}|)inner-layer3{ipsa|ipda|sourceport|destport|ip-
protocol}
nonvgre
Parameter ParameterDescriptionParameterValue
vsid NVGREVSID -
src-interface SourceInterface -
outeripsa OuterheadersIPSource
Address-
outeripda OuterheadersIP
DestinationAddress-
innermacsa InnerheadersMAC
SourceAddress-
innermacda InnerheadersMAC
DestinationAddress-
innereth-type InnerheadersEthernet
Type-
inneripsa InnerheadersIPSource
Address-
inneripda InnerheadersIP
DestinationAddress-
innersourceport InnerheadersLayer4
SourcePort-
innerdestport InnerheadersLayer4
DestinationPort-
innerip-protocol InnerheadersIPHeader
protocol-
top-label MplsTopLable -433CommandMode
Config-hash-field
Default
nvgrevsidouteripsaipda
Usage
Outerconfigurationandinnerconfigurationcannottakeeffectatthesametime.
Examples
Thefollowingexampleshowshowtoselectouteripsaandvsidfornvgrepacketload
balanceinport-channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#nvgrevsidouteripda
Thefollowingexampleshowshowtoselectdefaultnvgrepacketloadbalanceinport-
channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#nonvgre
Thefollowingexampleshowshowtoselectinneripsaandtop-labelformplspacket
loadbalanceinport-channel:
Switch#configureterminal
Switch(config)#hash-fieldport-channel
Switch(config-hash-field)#mplstop-labelinneripsa
RelatedCommands
showhash-field
3.16.7showhash-value
CommandPurpose
Usethiscommandtodisplaytheconfigurationsofahashvalueorallhashvalue.434CommandSyntax
showhash-value(NAME|)
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaytherelationshipbetweenhashvalue
paorfileandinterface:
Switch#showhash-valueinterface-applied
eth-0-1
hash-valueaaainput
RelatedCommands
None
3.16.8showhash-valueinterface-applied
CommandPurpose
Usethiscommandtodisplaytherelationshipbetweenhashvalueandinterface.
CommandSyntax
showhash-valueinterface-applied
Parameter ParameterDescriptionParameterValue435NAME Hashvaluename -
CommandMode
InterfaceConfiguration
Default
None
Usage
Physicalportonlycanselectinputdirectionlinkaggportcanselectinputdirection
andoutputdirection.Aggmemberportcantconfigurethecommand.
Examples
Thefollowingexampleshowshowtoapplyahashvaluetoeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#load-balancehash-valueaaainput
RelatedCommands
showhash-valueinterface-applied
3.16.9hash-valueglobal
CommandPurpose
Usethiscommandtoenterhashvalueglobalconfigureview.
CommandSyntax
hash-valueglobal
Parameter ParameterDescriptionParameterValue
NAME Hashfieldnamestring-436CommandMode
Config-hash-value-global
Default
port-channel
Usage
Comparedwithhashvalueconfiguration,thiscommandhaslowerpriority
Examples
Thefollowingexampleshowshowtoselecthashfieldforlinkagginhashvalue
global:
Switch#configureterminal
Switch(config)#hash-valueglobal
Switch(config-hash-value-global)#port-channelselectuser
RelatedCommands
showhash-valueglobal
3.16.10showhash-valueglobal
CommandPurpose
Usethiscommandtodisplaytheconfigurationsofhashvalueglobal.
CommandSyntax
showhash-valueglobal
CommandMode
Config-pmap-c
Default
None437Usage
None
Examples
Thefollowingexampleshowshowtodisableecmpround-robinasaaclaction:
Switch#configureterminal
Switch(config)#policy-mapmap1
Switch(config-pmap)#classclass-default
Switch(config-pmap-c)#ecmpload-balanceround-robindisable
RelatedCommands
None4384IPServiceCommands
4.1ARPCommands
4.1.1arp
CommandPurpose
ToaddapermanententryintheAddressResolutionProtocol(ARP)cache,usethe
arpcommandinglobalconfigurationmode.
ToremoveanentryfromtheARPcache,usethenoformofthiscommand.
CommandSyntax
arp(vrfVRF-NAME|)IP-ADDRESSHARDWARE-ADDRESS
noarp(vrfVRF-NAME|)IP-ADDRESS
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME VirtualRoutingand
Forwarding(VRF)
instance.Thevrf-name
argumentisthenameof
theVRFtableStringwithupto15
characters
IP-ADDRESS IPaddressinfour-part
dotteddecimalformat
correspondingtothelocal
data-linkaddressIPv4Address
HARDWARE-ADDRESSLocaldata-linkaddress(a
48-bitaddress)MACAddress439CommandMode
GlobalConfiguration
Default
NoentriesarepermanentlyinstalledintheARPcache.
Usage
Becausemosthostssupportdynamicresolution,yougenerallyneednotspecify
staticARPcacheentries.
ToremoveallnonestaticentriesfromtheARPcache,usethecleararp-cache
privilegedEXECcommand.
Examples
ThefollowingisanexampleofaddastaticARPentryforatypicalEthernethost:
Switch#configureterminal
Switch(config)#arp10.31.7.190800.0900.1834
RelatedCommands
cleararp-cache
4.1.2arpretry-interval
CommandPurpose
Whenaninterfacerequestsamappingforanaddressnotinthecache,systemwill
sendARPrequestmessageontheassociatednetworkrequestingtheaddress
mapping.Usually,3requestmessageswillbesentuntilthesystemgotaresponse.
ToconfiguretheARPrequestdelayintervalbetween2messages,usearpretry-
intervalcommandininterfaceconfigurationmode.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
arpretry-intervalSECONDS440noarpretry-interval
Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)thatan
ARPrequestdelayto
interface0-3seconds
CommandMode
InterfaceConfiguration
Default
1second
Usage
ThiscommandisignoredwhenissuedoninterfacesthatdonotuseARP.Theshow
interfaceEXECcommanddisplaystheARPretryintervalvalue.Thevalueasseenin
thefollowingexamplefromtheshowinterfacecommand:
ARPtimeout01:00:00,ARPretryinterval1s
Examples
ThefollowingexamplesetstheARPretryintervalto3seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#arpretry-interval3
RelatedCommands
showinterface
4.1.3arptimeout
CommandPurpose
Usethiscommandtosetthearptimeoutvalue.Usethenoformofthiscommandto
restorethedefaultvalue.441CommandSyntax
arptimeoutSECONDS
noarptimeout
Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)thatan
entryremainsintheARP
cache.<1-2147483>1-2147483seconds
CommandMode
InterfaceConfiguration
Default
3600seconds(1hour)
Usage
ThiscommandisignoredwhenissuedoninterfacesthatdonotuseARP.Theshow
interfaceEXECcommanddisplaystheARPtimeoutvalue.Thevalueasseeninthe
followingexamplefromtheshowinterfacecommand:
ARPtimeout01:00:00,ARPretryinterval1s
Examples
ThefollowingexamplesetstheARPtimeoutto1200secondstoallowentriestotime
outmorequicklythanthedefault:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#arptimeout1200
RelatedCommands
showinterface4424.1.4arpas-layer-3enable
CommandPurpose
Tosetthatdealwiththearppacketaslayer3packet.Todisablearpas-layer-3,use
thenoformofthiscommand.
CommandSyntax
arpas-layer-3enable
noarpas-layer-3enable
CommandMode
GlobalConfiguration
Default
Disable
Usage
vlanclassifierandIGMPSnoopingaffectedbytheCLI.
Enable,vlanclassifieractivatebaseip,thearppacketmatchedsourceipaddresswill
classifiertospecifiedvlan.Otherwise,notclassifiertospecifiedvlan.
Enable,ipsourceguardenabletheipcheckontheport,thearppacketmatched
sourceipaddresswillnotfilter.Ohterwise,willfilter.
Examples
Thefollowingexampleshowhowtoenablearpas-layer-3:
Switch#configureterminal
Switch(config)#arpas-layer-3enable
RelatedCommands
N/A4434.1.5arpfakeglobalenable
CommandPurpose
Toenablefakearpglobal,usethenoformofthiscommand.Todisablearpfake
global,usethenoformofthiscommand.
CommandSyntax
arpfakeglobalenable
noarpfakeglobalenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
Noteffectuntilbothenableglobalandinterfacearpfake.
Examples
Thefollowingexampleshowhowtoenableglobalfakearp:
Switch#configureterminal
Switch(config)#arpfakeglobalenable
RelatedCommands
arpfakeenable
4.1.6arpfakeenable
CommandPurpose
Toenablefakearponinterface,usethenoformofthiscommand.444CommandSyntax
arpfakeenable
noarpfakeenable
CommandMode
InterfaceConfiguration
Default
Enable
Usage
Ifenable,theinterfacereceiveIPpacketsthatnotmatchanyARPentrywillcreatean
fakeARPentry.BeforeinterfacereceivedARPreply,theIPpacketsmatchedthefake
ARPentrywillbedropped.AfterinterfacereceivedARPreply,willcreateactiveARP
entryinsteadoffakeARPentry.
Examples
Thefollowingexampleshowhowtoenablefakearp:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#arpfakeenable
RelatedCommands
arpfakeglobalenable
4.1.7arpfaketimeout
CommandPurpose
ToconfigurehowlongafakeentryremainsintheARPcache,usethearpfake
timeoutcommandininterfaceconfigurationmode.Torestorethedefaultvalue,use
thenoformofthiscommand.445CommandSyntax
arpfaketimeoutSECONDS
noarpfaketimeout
Parameter ParameterDescriptionParameterValue
SECONDS Timethatafakeentry
remainsintheARPcache.1-36000,unit:second
CommandMode
InterfaceConfiguration
Default
5seconds
Usage
Whenswitchwasattached,canletthefakeARPentrytotimeoutlater.
Examples
ThefollowingexamplesetstheARPfaketimeoutto100secondstoallowentriesto
timeout:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#arpfaketimeout100
RelatedCommands
N/A
4.1.8cleararp-cache
CommandPurpose
TorefreshdynamicallycreatedentriesfromtheAddressResolutionProtocol(ARP)
cache,usethecleararp-cachecommandinprivilegedEXECmode.446CommandSyntax
cleararp-cache((vrfVRF-NAME|)interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)Refreshesonly
theARPtableentriesfor
thespecifiedVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instanceStringwithupto15
characters
IFNAME (Optional)Refreshesonly
theARPtableentries
associatedwiththis
interfaceSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
Nodefaultbehaviororvalues.
Usage
ThiscommandupdatesthedynamicallylearnedIPaddressandMACaddress
mappinginformationintheARPtabletoensurethevalidityofthoseentries.Ifthe
refreshoperationencountersanystaleentries(dynamicARPentriesthathave
expiredbuthavenotyetbeenagedoutbyaninternal,timer-drivenprocess),those
entriesareagedoutoftheARPtableimmediatelyasopposedtoatthenextrefresh
interval.
UsethiscommandwithoutanyargumentsorkeywordstorefreshallARPcache
entriesforallenabledinterfaces.447Examples
ThefollowingexampleshowshowtorefreshalldynamicallylearnedARPcache
entriesforallenabledinterfaces:
Switch#cleararp-cache
RelatedCommands
showiparp
4.1.9cleariparp
CommandPurpose
TorefreshthespecificdynamicallycreatedentryfromtheAddressResolution
Protocol(ARP)cache,usethecleariparpcommandinprivilegedEXECmode.
CommandSyntax
cleariparp(vrfVRF-NAME|)IP-ADDRESS
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)Refreshesonly
theARPtableentriesfor
thespecifiedVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instanceStringwithupto15
characters
IP-ADDRESS (Optional)Refreshesonly
theARPtableentries
associatedwiththisIP
address-
CommandMode
PrivilegedEXEC448Default
Nodefaultbehaviororvalues.
Usage
ThiscommandupdatesthespecificdynamicallylearnedIPaddressandMAC
addressmappinginformationintheARPtable.Iftherefreshoperationencounters
anystaleentries(dynamicARPentriesthathaveexpiredbuthavenotyetbeenaged
outbyaninternal,timer-drivenprocess),theentryisagedoutoftheARPtable
immediatelyasopposedtoatthenextrefreshinterval.
Examples
ThefollowingexampleshowshowtorefreshthedynamicallylearnedARPentries
10.10.10.10:
Switch#cleariparp10.10.10.10
RelatedCommands
showiparp
4.1.10cleariparpstatistics
CommandPurpose
ToclearARPpacketsstatisticsprocessedbysystem,usethecleariparpstatistics
commandinprivilegedEXECmode.
CommandSyntax
cleariparp(vrfVRF-NAME|)statistics
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)ClearARP
statisticsforthespecified
VirtualPrivateNetwork
(VPN)routingand
forwarding(VRF)instanceStringwithupto15
characters449CommandMode
PrivilegedEXEC
Default
Nodefaultbehaviororvalues.
Usage
ThiscommandusetoclearARPpacketsstatistics.
Examples
ThefollowingexampleshowshowtoclearARPpacketsstatistcs:
Switch#cleariparpstatistics
RelatedCommands
showiparpsummary
4.1.11showiparp
CommandPurpose
TodisplaytheentriesintheAddressResolutionProtocol(ARP)table,usetheshow
iparpcommandinprivilegedEXECmode.
CommandSyntax
showiparp((vrfVRF-NAME|)interfaceINTERFACE-NAME|)
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME| (Optional)Displaysthe
entriesundertheVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instancespecified
bythevrf-nameargumentStringwithupto15
characters450INTERFACE-NAME (Optional)Refreshesonly
theARPtableentries
associatedwiththis
interface-
CommandMode
PrivilegedEXEC
Default
None
Usage
TodisplayallentriesintheARPcache,usethiscommandwithoutanyargumentsor
keywords.
Examples
Thefollowingissampleoutputfromtheshowiparpcommand:
Switch#showiparp
ProtocolAddressAge(min)HardwareAddrInterface
Internet1.1.1.1 -7cb5.0157.0c00eth-0-1
Internet2.2.2.1 -7cb5.0157.0c00eth-0-2
Internet3.3.3.1 -7cb5.0157.0c00eth-0-3
Internet10.0.20.1 -7cb5.0157.0c00eth-0-10
Internet10.0.20254-0000.5e00.0101eth-0-10
RelatedCommands
cleariparp
4.1.12showiparpsummary
CommandPurpose
TodisplaythetotalnumberofAddressResolutionProtocol(ARP)tableentries,the
numberofARPtableentriesforeachARPentrymode,andthenumberofARPtable451entriesforeachinterfaceontherouter,usetheshowiparpsummarycommandin
privilegedEXECmode.
CommandSyntax
showiparp(vrfVRF-NAME|)summary
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)Displaysthe
entriesundertheVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instancespecified
bythevrf-nameargumentStringwithupto15
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtodisplayhigh-levelstatisticsabouttheARPtableentries:
Examples
Thefollowingissampleoutputfromtheshowiparpsummarycommand:
Switch#showiparpsummary
GratuitousARPlearningisdisabled
2IPARPentries,with0ofthemincomplete
(Static:1,Dyamic:0,Interface:1)
ARPPktReceivedis:0
ARPPktSendnumberis:1
ARPPktDicardnumberis:0452RelatedCommands
cleariparpstatistics
4.1.13debugarp
CommandPurpose
ToturnontheARPdebug,usedebugsarpcommandinEXECmode.Toturnoffthe
ARPdebug,usethenoformofthiscommand.
CommandSyntax
debugarp(vrfVRF-NAME|)
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)Displaysthe
entriesundertheVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instancespecified
bythevrf-nameargumentStringwithupto15
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodebugARPpacketsreceivedandsend;alsofordebugARP
entrycreating,updatinganddeleting.
Examples
Thefollowingissampleoutputfromthedebugarpcommand:453Switch#debugarp
Sep703:34:08SWITCHARP-7:IPARP:creatingentryforIPaddress:7.7.7.7,hw:e64d0445df00
Sep703:34:08SWITCHARP-7:IPARP:sendreqsrc7.7.7.7e64d0445df00,dst7.7.7.7eth-0-1
RelatedCommands
showdebuggingarp
4.1.14showdebuggingarp
CommandPurpose
TodisplaythedebuggingstatusofARP,usetheshowdebuggingarpcommandin
EXECmode.
CommandSyntax
showdebuggingarp(vrfVRF-NAME|)
Parameter ParameterDescriptionParameterValue
vrfVRF-NAME (Optional)Displaysthe
entriesundertheVirtual
PrivateNetwork(VPN)
routingandforwarding
(VRF)instancespecified
bythevrf-nameargumentStringwithupto15
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplaythedebuggingstatusofARP.454Examples
Thefollowingissampleoutputfromtheshowdebuggingarpcommand:
Switch#showdebuggingarp
ARPdebuggingstatus:
ARPpacketdebuggingison
RelatedCommands
debugarp
4.1.15proxy-arpenable
CommandPurpose
TheswitchusesproxyARPtohelphostsdetermineMACaddressesofhostson
othernetworksorsubnets.
ToenableproxyAddressResolutionProtocol(ARP)onaninterface,usetheproxy-
arpenablecommandininterfaceconfigurationmode.TodisableproxyARPonthe
interface,usethenoformofthiscommand.
CommandSyntax
proxy-arpenable
CommandMode
InterfaceConfiguration
Default
ProxyARPisdisabledbydefault.
Usage
WhenproxyARPisdisabled,adevicewillrespondtoARPrequestsreceivedonits
interfaceonlyifthetargetIPaddressisthesameasitsIPaddress.455Examples
ThefollowingexampleenablesproxyARPoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#noshutdown
Switch(config-if)#ipaddress1.1.1.1/24
Switch(config-if)#proxy-arpenable
RelatedCommands
local-proxy-arpenable
4.1.16local-proxy-arpenable
CommandPurpose
ThelocalproxyARPfeatureallowtheL3DevicetoresponseARPrequestwhose
ARPTargetaddressisinthesamesubnettheastheARPrequestcomesfrom(No
Routingisrequired).
ToenablelocalproxyAddressResolutionProtocol(ARP)onaninterface,usethe
local-proxy-arpenablecommandininterfaceconfigurationmode.
TodisableproxyARPontheinterface,usethenoformofthiscommand.
CommandSyntax
local-proxy-arpenable
nolocal-proxy-arpenable
CommandMode
InterfaceConfiguration
Default
LocalproxyARPisdisabledbydefault.456Usage
InternetControlMessageProtocol(ICMP)redirectsaredisabledoninterfaceswhen
thelocalproxyARPfeatureisenabled.Themainconditionweneedtoenablelocal
ARPproxyisthattheswitchenablesportisolate.
Examples
ThefollowingexampleenableslocalproxyARPoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#noshutdown
Switch(config-if)#ipaddress1.1.1.1/24
Switch(config-if)#local-proxy-arpenable
RelatedCommands
proxy-arpenable
4.1.17gratuitous-arp-learningenable
CommandPurpose
ToenablethegratuitousAddressResolutionProtocol(ARP)controlontherouter,
usethegratuitous-arp-learningenablecommandinglobalconfigurationmode.To
disabletheARPcontrol,usethenoformofthiscommand.
CommandSyntax
gratuitous-arp-learningenable
nogratuitous-arp-learningenable
CommandMode
GlobalConfiguration
Default
GratuitousARPlearningisdisabledbydefault.457Usage
None
Examples
ThefollowingexampleenablesgratuitousARPlearningoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#gratuitous-arp-learningenable
RelatedCommands
showiparpsummary
4.1.18gratuitous-arpsendinterval
CommandPurpose
ToconfigthegratuitousARPsendinterval,usethenoformofthiscommandto
recovertodefault.
CommandSyntax
arpgratuitous-arpsendintervalSECONDS
noarpgratuitous-arpsendinterval
Parameter ParameterDescriptionParameterValue
SECONDS Theintervalinsecondsto
sendgratuitousARP1-86400seconds
CommandMode
InterfaceConfiguration
Default
60seconds458Usage
None
Examples
ThefollowingexampleconfiggratuitousARPsendintervaloninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#noshutdown
Switch(config-if)#ipaddress1.1.1.1/24
Switch(config-if)#arpgratuitous-arpsendinterval80
RelatedCommands
arpgratuitous-arpsendenable
4.1.19gratuitous-arpsendenable
CommandPurpose
ToenablethegratuitousARPsendontheinterface.
CommandSyntax
arpgratuitous-arpsendenable
noarpgratuitous-arpsendenable
CommandMode
InterfaceConfiguration
Default
disbale
Usage
None459Examples
ThefollowingexampleenablegratuitousARPoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#noshutdown
Switch(config-if)#ipaddress1.1.1.1/24
Switch(config-if)#arpgratuitous-arpsendenable
RelatedCommands
arpgratuitous-arpsendinterval
4.2DHCPClientCommands
4.2.1ipaddressdhcp
CommandPurpose
ToacquireanIPaddressfromDynamicHostConfigurationProtocol(DHCP),usethe
ipaddressdhcpcommandininterfaceconfigurationmode.
Todisablethefunction,usethenoformofthiscommand.
CommandSyntax
ipaddressdhcp
noipaddressdhcp
CommandMode
InterfaceConfiguration
Default
DHCPClientisnotenabledoninterface.460Usage
OncethiscommandwasenabledonanUPinterface,itwillacquireIPaddress
immediately,otherwisetheDHCPfunctionoftheinterfacewillbeinSUSPENDstatus.
ThenoipaddressdhcpcommandwillsendaDHCPRELEASEmessagetoserver
andremoveanyIPaddress.
Examples
Thefollowingexampleshowshowtoenabledhcpclientfunction:
Switch#configureterminal
Switch(config-if)#ipaddressdhcp
Thefollowingexampleshowshowtodisabledhcpclientfunction:
Switch#configureterminal
Switch(config-if)#noipaddressdhcp
RelatedCommands
dhcpclientrequest
dhcpclientclient-id
dhcpclientclass-id
dhcpclientlease
dhcpclienthostname
managementipaddressdhcp
showdhcpclient
4.2.2managementipaddressdhcp
CommandPurpose
ToacquireanIPaddressformanagementinterfacefrombyDHCP,usethe
managementIPaddressdhcpcommandinglobalconfigurationmode.
Todisablethefunction,usethenoformofthiscommand.461CommandSyntax
managementipaddressdhcp
nomanagementipaddressdhcp
CommandMode
GlobalConfiguration
Default
DHCPClientisnotenabledonmanagementinterface.
Usage
UsethiscommandlikeIPaddressdhcp.
Examples
Thefollowingexampleshowshowtoenabledhcpclientfunctiononmanagement
interface:
Switch#configureterminal
Switch(config)#managementipaddressdhcp
Thefollowingexampleshowshowtodisabledhcpclientfunctiononmanagement
interface:
Switch#configureterminal
Switch(config)#nomanagementipaddressdhcp
RelatedCommands
showdhcpclient
4.2.3dhcpclientrequest
CommandPurpose
TorequestconfigurationparametersbyDHCP,usethedhcpclientrequestcommand
ininterfaceconfigurationmode.Tocanceltherequest,usethenoformofthis
command.462CommandSyntax
dhcpclientrequest(router|static-route|classless-static-route|classless-static-
route-ms|tftp-server-address|dns-nameserver|domain-name|netbios-nameserver
|vendor-specific)
nodhcpclientrequest(router|static-route|classless-static-route|classless-static-
route-ms|tftp-server-address|dns-nameserver|domain-name|netbios-nameserver
|vendor-specific)
Parameter ParameterDescriptionParameterValue
router Defaultrouteroption(3)-
static-route Staticrouteoption(33)-
classless-static-route Classlessstaticroute
option(121)-
classless-static-route-msMicrosoftclasslessstatic
routeoption(249)-
tftp-server-address TFTPserveripaddress
option(150)-
dns-nameserver DNSnameserveroption
(6)-
domain-name Domainnameoption(15)-
netbios-nameserver NetBIOSnameserver
option(44)-
vendor-specific Vendorspecificoption(43)-
CommandMode
InterfaceConfiguration
Default
static-route,classless-static-route,classless-static-route-ms,tftp-server-addressand
routerisrequestedasdefault.463Usage
UsethiscommandtorequestconfigurationformDHCPserver.Itcanbetypedmany
timeswitheachoptionoronetimewithalloptionswanted.NotethatwhenOption
249coexistwithoption121thentheoption121shouldhavehighpriorityandoption
249shouldbeignored.whenoption121oroption249coexistwithoption33thenthe
option33shouldbeignored.Thiscommandshouldbeissuedbeforeipaddressdhcp
command.Ifyouissuedipaddressdhcpbefore,thiscommandwilltakeeffectafter
nextipaddressdhcpcommand.
Examples
Thefollowingexampleshowshowtorequestdhcpoptionstatic-routeandtftp-server-
address:
Switch#configureterminal
Switch(config-if)#nomanagementipaddressdhcp
Thefollowingexampleshowshowtorequestdhcpoptionrouter:
Switch#configureterminal
Switch(config-if)#dhcpclientrequestrouter
Thefollowingexampleshowshowtocancelrequestofdhcpoptionrouter:
Switch#configureterminal
Switch(config-if)#nodhcpclientrequestrouter
Thefollowingexampleshowshowtorequesttftpserveraddress:
Switch#configureterminal
Switch(config-if)#dhcpclientrequeststatic-routetftp-server-address
RelatedCommands
ipaddressdhcp
4.2.4dhcpclientclient-id
CommandPurpose
Tospecifyaclient-idusedbyDHCPserverandclientforidentifyingaclient,usethe
dhcpclientclient-idcommandininterfaceconfigurationmode.
Toremovethisconfiguration,usethenoformofthiscommand.464CommandSyntax
dhcpclientclient-id(asciiWORD|hexHEX-STRING|IFVLAN|IFAGG|
IFPHYSICAL)
nodhcpclientclient-id
Parameter ParameterDescriptionParameterValue
ascii ASCIItype -
WORD Client-IDasasciistringStringwithupto64
characters
hex Hextype -
HEX-STRING Class-IDinhexstring Stringwithupto64
characters
IFVLAN Vlaninterfacesname 1-4094
IFAGG Aggregationinterfaces
name-
IFPHYSICAL Physicalinterfacesname-
CommandMode
InterfaceConfiguration
Default
Thedefaultclient-id,formatofwhichislikeswitch-HWADDR-IFNAME,willbeused.
Usage
ThiscommandshouldbeissuedbeforeIPaddressdhcpcommand.IfyouissuedIP
addressdhcpbefore,thiscommandwilltakeeffectafternextIPaddressdhcp
command.
Examples
Thefollowingexampleshowshowtospecifyaclient-idforaninterface:465Switch#configureterminal
Switch(config-if)#dhcpclientclient-idasciiswitch-client
Thefollowingexampleshowshowtodeleteclient-idsetbefore:
Switch#configureterminal
Switch(config-if)#nodhcpclientclient-id
RelatedCommands
ipaddressdhcp
4.2.5dhcpclientclass-id
CommandPurpose
Tospecifyaclass-idforDHCPserverandclient,usethedhcpclientclass-id
commandininterfaceconfigurationmode.Toremovethisconfiguration,usetheno
formofthiscommand.
CommandSyntax
dhcpclientclass-id(WORD|hexHEX-STRING)
nodhcpclientclass-id
Parameter ParameterDescriptionParameterValue
WORD Client-IDasasciistring-
hex Hextype -
HEX-STRING Class-IDinhexstring -
CommandMode
InterfaceConfiguration
Default
Noclass-idisset.466Usage
Class-idusedbyDHCPclientstooptionallyidentifythetypeandconfigurationofa
DHCPclient.Vendorsandsitesmaychoosetodefinespecificclassidentifiersto
conveyparticularconfigurationorotheridentificationinformationaboutaclient.This
commandshouldbeissuedbeforeipaddressdhcpcommand.Ifyouissuedip
addressdhcpbefore,thiscommandwilltakeeffectafternextipaddressdhcp
command.
Examples
Thefollowingexampleshowshowtospecifyclass-idforaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpclientclass-idacsiiswitch
Thefollowingexampleshowshowtodeleteclass-idsetbefore:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nodhcpclientclass-id
RelatedCommands
ipaddressdhcp
4.2.6dhcpclientlease
CommandPurpose
ToconfigurethedurationoftheleaseforanIPaddressrequestbyDHCPclient,use
thedhcpclientleasecommandininterfaceconfigurationmode.
Toremovetheconfiguration,usethenoformofthiscommand.
CommandSyntax
dhcpclientleaseDAYS(HOURS(MINUTES|)|)|infinite)
nodhcpclientlease
Parameter ParameterDescriptionParameterValue467DAYS Thenumberofdaysin
lease0-365
HOURS Thenumberofhoursinthe
lease.0-23
MINUTES Thenumberofminutesin
thelease0-59
infinite infinitelease -
CommandMode
InterfaceConfiguration
Default
Noleaseisrequestedbyclient.
Usage
Usethiscommandtospecifytheleasewantedbyclient,DHCPservermayaccept
thisrequestorignoreit.Thiscommandshouldbeissuedbeforeipaddressdhcp
command.Ifyouissuedipaddressdhcpbefore,thiscommandwilltakeeffectafter
nextipaddressdhcpcommand.
Examples
Thefollowingexampleshowshowtospecifylease20minutesfordhcpclient:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpclientlease0020
Thefollowingexampleshowshowtoremovetheleasesetbefore:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nodhcpclientlease
RelatedCommands
ipaddressdhcp4684.2.7dhcpclienthostname
CommandPurpose
TospecifyormodifythehostnamesentintheDHCPmessage;usethedhcpclient
hostnamecommandininterfaceconfigurationmode.
Toremovethehostname,usethenoformofthiscommand.
CommandSyntax
dhcpclienthostnameWORD
nodhcpclienthostname
Parameter ParameterDescriptionParameterValue
WORD Hostname Stringwithupto256
characters
CommandMode
InterfaceConfiguration
Default
Thehostnameinsystemwillbeused.
Usage
Thiscommandshouldbeissuedbeforeipaddressdhcpcommand.IfyouissuedIP
addressdhcpbefore,thiscommandwilltakeeffectafternextIPaddressdhcp
command.
Examples
Thefollowingexampleshowshowtospecifynameofthehost:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpclienthostnameswitch
Thefollowingexampleshowshowtoremovethelastset:469Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nodhcpclienthostname
RelatedCommands
ipaddressdhcp
4.2.8dhcpclientdefault-routerdistance
CommandPurpose
TospecifythedefaultrouterdistancefortheroutesleasedfromDHCPserver,use
thedhcpclientdefault-routerdistancecommandinglobalconfigurationmode.To
removetheconfiguration,usethenoformofthiscommand.
CommandSyntax
dhcpclientdefault-routerdistanceMETRIC
nodhcpclientdefault-routerdistance
Parameter ParameterDescriptionParameterValue
METRIC Thedefaultmetricof
routes1-255
CommandMode
GlobalConfiguration
Default
Thedefaultvalueforthedefaultmetricis254.
Usage
None
Examples
Thefollowingexampleshowshowtosetdhcpclientdefaultroutemetricas233:470Switch#configureterminal
Switch(config)#dhcpclientdefault-routerdistance233
Thefollowingexampleshowshowtousethedefaultvalueofdefaultroutemetric:
Switch#configureterminal
Switch(config)#nodhcpclientdefault-routerdistance
RelatedCommands
ipaddressdhcp
4.2.9dhcpclientbroadcast-flag
CommandPurpose
Tospecifythebroadcast-flagintheDHCPmessage,usethedhcpclientbroadcast-
flagcommandinglobalconfigurationmode.
Toremovethisconfiguration,usethenoformofthiscommand.
CommandSyntax
dhcpclientbroadcast-flag
nodhcpclientbroadcast-flag
CommandMode
GlobalConfiguration
Default
Broadcast-flagwillbesetinDHCPmessagesentbyclientforrequestIPaddress.
Usage
ThisflagtellDHCPserverthatclientcantreceiveunicastIPdatagramsuntilbeen
configuredwithanIPaddress.Thusserverorrelayagentwillbroadcastany
messagestotheclientontheclientssubnet.
Examples
Thefollowingexampleshowshowtosetbroadcast-flag:471Switch#configureterminal
Switch(config)#dhcpclientbroadcast-flag
Thefollowingexampleshowshowtodeletebroadcast-flag:
Switch#configureterminal
Switch(config)#nodhcpclientbroadcast-flag
RelatedCommands
ipaddressdhcp
4.2.10debugdhcpclient
CommandPurpose
Usethiscommandtoturnonthedebugswitchesofdhcpclientmodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debugdhcpclient(events|error|dump|packet|all)
nodebugdhcpclient(events|error|dump|packet|all)
Parameter ParameterDescriptionParameterValue
events Clientevents -
error ErrorDHCPmessage -
packet DHCPmessagefields-
dump Dumpmessageinhex
format-
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC
Default
None472Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopendhcpclientdebugswitches:
Switch#debugdhcpclientall
RelatedCommands
terminalmonitor
showloggingbuffer
4.2.11showdhcpclient
CommandPurpose
Toshowinformationofdhcpclientononeorallinterfaces,usetheshowdhcpclient
commandinprivilegedEXECmode.
CommandSyntax
showdhcpclient(management|IFVLAN|IFAGG|IFPHYSICAL|)(verbose|)
Parameter ParameterDescriptionParameterValue
management Managementinterface-
IFVLAN Vlaninterfacesname 1-4094
IFAGG Aggregationinterfaces
name-
IFPHYSICAL Physicalinterfacesname-473verbose DHCPclientverbose
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
Toseemoredetailinformation,addverboseatthelastofcommand
Examples
ThefollowingexampleshowshowtodisplayDHCPclientinformationonall
interfaces:
Switch#showdhcpclientverbose
DHCPclientinformations:
============================================================
vlan1DHCPclientinformation:
Currentstate:SELECT
TransactionID:0x3ac1c1c7
============================================================
eth-0-1DHCPclientinformation:
Currentstate:SELECT
TransactionID:0x2fd3f55b
RelatedCommands
ipaddressdhcp
4.2.12showdhcpclientstatistics
CommandPurpose
ToshowstatisticsofDHCPclient,usetheshowdhcpclientstatisticscommandin
privilegedEXECmode.474CommandSyntax
showdhcpclientstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtoshowthestatusofDHCPclient,likeDHCPpacketscounter.
Examples
ThefollowingexampleshowshowtodisplayDHCPpacketsstatistics:
Switch#showdhcpclientstatistics
DHCPclientpacketstatistics:
============================================================
DHCPOFFERSreceived:0
DHCPACKsreceived:0
DHCPNAKsreceived:0
DHCPOthersreceived:0
DHCPDISCOVERsent:0
DHCPDECLINEsent:0
DHCPRELEASEsent:0
DHCPREQUESTsent:0
DHCPpacketsendfailed:0
RelatedCommands
ipaddressdhcp
4.2.13cleardhcpclientstatistics
CommandPurpose
Toclearstatisticsofdhcpclient,usethecleardhcpclientstatisticscommandin
privilegedEXECmode.475CommandSyntax
cleardhcpclientstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandwillclearDHCPpacketcounter.
Examples
Thefollowingexampleshowshowtoclearstatistics:
Switch#cleardhcpclientstatistics
RelatedCommands
ipaddressdhcp
showdhcpclientstatistics
4.3DHCPRelayCommands
4.3.1dhcprelay
CommandPurpose
ToenabletheDHCPrelayservice,usethedhcprelaycommandinglobal
configurationmode.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
dhcprelay476nodhcprelay
CommandMode
GlobalConfiguration
Default
DHCPrelayisdisabled.
Usage
TheDHCPservicemustbeenabledwiththedhcpservicecommandbeforeDHCP
relayservicecanbeused.
Examples
ThefollowingexampleshowshowtoenableDHCPrelayagent:
Switch#configureterminal
Switch(config)#dhcprelay
RelatedCommands
servicedhcp
4.3.2dhcp-server(global)
CommandPurpose
TocreateaDHCPservergroup,usethedhcp-servercommandinglobal
configurationmode.
ToremoveaDHCPservergroup,usethenoformofthiscommand.
CommandSyntax
dhcp-serverNUMBERSERVER-LIST
nodhcp-serverNUMBER(SERVER-LIST|)
Parameter ParameterDescriptionParameterValue477NUMBER NumberoftheDHCP
servergroup.1-16
SERVER-LIST TheIPaddresslistofthe
DHCPserver.1-16
CommandMode
GlobalConfiguration
Default
NoDHCPservergroupisdefined.
Usage
ThiscommandisusedtospecifytheremoteDHCPserver.
Examples
Thefollowingexampleshowshowtoconfiguredhcp-servergroupglobally:
Switch#configureterminal
Switch(config)#dhcp-server11.1.1.12.2.2.23.3.3.3
RelatedCommands
servicedhcp
dhcp-server(interface)
4.3.3dhcp-server(interface)
CommandPurpose
ToaddaninterfaceintoaDHCPservergroup,usethedhcp-servercommandin
interfaceconfigurationmode.
ToremovethisinterfacefromtheDHCPservergroup,usethenoformofthis
command.478CommandSyntax
dhcp-serverNUMBER
nodhcp-server
Parameter ParameterDescriptionParameterValue
NUMBER NumberoftheDHCP
servergroup.1-16
CommandMode
InterfaceConfiguration
Default
NoDHCPservergroupisconfiguredfortheinterface.
Usage
ThiscommandisusedtospecifyDHCPservergroupwhichisconfiguredbythe
commanddhcp-serveringlobalmode.
Examples
Thefollowingexampleshowshowtoconfiguredhcp-servergroupforinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcp-server1
RelatedCommands
servicedhcp
4.3.4dhcprelayinformationcheck
CommandPurpose
Toenablevalidationofrelayagentinformationoptioninforwardedreplymessages,
usethedhcprelayinformationcheckcommandinglobalconfigurationmode.479Todisableaninformationcheck,usethenoformofthiscommand.
CommandSyntax
dhcprelayinformationcheck
nodhcprelayinformationcheck
CommandMode
GlobalConfiguration
Default
Thevalidationofrelayagentinformationisenabled.Invalidmessagesaredropped.
Usage
None
Examples
Thefollowingexampleshowshowtoenablevalidationofrelayagentinformation:
Switch#configureterminal
Switch(config)#dhcprelayinformationcheck
RelatedCommands
dhcprelayinformationoption
4.3.5dhcprelayinformationoption
CommandPurpose
ToenablethesystemtoinsertaDHCPrelayagentinformationoptioninforwarded
requestmessagestoaDHCPserver,usethedhcprelayinformationoption
commandinglobalconfigurationmode.Todisableinsertingrelayinformation,usethe
noformofthiscommand.480CommandSyntax
dhcprelayinformationoption
nodhcprelayinformationoption
CommandMode
GlobalConfiguration
Default
Norelayagentinformationisinserted.
Usage
Thedhcprelayinformationoptioncommandautomaticallyaddsthecircuitidentifier
suboptionandtheremoteIDsuboptiontotheDHCPrelayagentinformationoption
(alsocalledoption82).
Examples
Thefollowingexampleshowshowtoenableinsertingofdhcprelayinformation
option:
Switch#configureterminal
Switch(config)#dhcprelayinformationoption
RelatedCommands
dhcprelayinformationcheck
dhcprelayinformationpolicy
4.3.6dhcprelayinformationpolicy
CommandPurpose
Toconfiguretheinformationre-forwardingpolicyforaDHCPrelayagent(whata
relayagentshoulddoifamessagealreadycontainsrelayinformation),usethedhcp
relayinformationpolicycommandinglobalconfiguration.
Torestorethedefaultrelayinformationpolicy,usethenoformofthiscommand.481CommandSyntax
dhcprelayinformationpolicy(drop|keep|replace)
nodhcprelayinformationpolicy
Parameter ParameterDescriptionParameterValue
drop DirectstheDHCPrelay
agenttodiscardmessages
withexistingrelay
informationiftherelay
informationoptionis
alreadypresent-
keep Indicatesthatexisting
informationisleft
unchangedontheDHCP
relayagent-
replace Indicatesthatexisting
informationisoverwritten
ontheDHCPrelayagent-
CommandMode
GlobalConfiguration
Default
TheDHCPrelaywontchangeexistingrelayinformation.
Usage
ADHCPrelayagentmayreceiveamessagefromanotherDHCPrelayagentthat
alreadycontainsrelayinformation.Bydefault,thismessagewillbeforwardedwith
therelayinformationfromthepreviousrelayagentuntouched.
Examples
Thefollowingexampleshowshowtoconfigurepolicyofdhcprelayinformation:482Switch#configureterminal
Switch(config)#dhcprelayinformationpolicydrop
RelatedCommands
dhcprelayinformationoption
dhcprelayinformationpolicy
4.3.7dhcprelayinformationpolicy(interface)
CommandPurpose
IfOption82policyisconfiguredoninterface,thecontentofoption82inpacketwill
beprocessedaccordingtotheinterfacepolicy,ohterwiseitwillbeprocessed
accordingtoglobalpolicy.
CommandSyntax
dhcprelayinformationpolicy(drop|keep|replace)
nodhcprelayinformationpolicy
Parameter ParameterDescriptionParameterValue
drop DirectstheDHCPrelay
agenttodiscardmessages
withexistingrelay
informationiftherelay
informationoptionis
alreadypresent-
keep Indicatesthatexisting
informationisleft
unchangedontheDHCP
relayagent-
replace Indicatesthatexisting
informationisoverwritten
ontheDHCPrelayagent-483CommandMode
InterfaceConfiguration
Default
NoOption82policyisconfiguredoninteface.
Usage
ADHCPrelayagentmayreceiveamessagefromanotherDHCPrelayagentthat
alreadycontainsrelayinformation.Bydefault,thismessagewillbeforwardedwith
therelayinformationfromthepreviousrelayagentuntouched.
Examples
Thefollowingexampleshowshowtoconfigurepolicyofdhcprelayinformation:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcprelayinformationpolicydrop
RelatedCommands
dhcprelayinformationoption
4.3.8dhcprelayinformationtrust-all
CommandPurpose
ToconfigureallinterfacesastrustedsourcesoftheDHCPrelayagentinformation
option,usethedhcprelayinformationtrust-allcommandinglobalconfigurationmode.
Torestoretheseinterfacestotheirdefaultbehavior,usethenoformofthiscommand.
CommandSyntax
dhcprelayinformationtrust-all
nodhcprelayinformationtrust-all484CommandMode
GlobalConfiguration
Default
Allinterfacesontheswitchareconsideredentrusted.
Usage
Bydefault,ifthegatewayaddressissettoallzerosintheDHCPpacketandthe
relayinformationoptionisalreadypresentinthepacket,theDHCPrelayagentwill
discardthepacket.Ifthedhcprelayinformationtrust-allcommandisconfigured
globally,theDHCPrelayagentwillnotdiscardthepacketevenifthegateway
addressissettoallzeros.Instead,thereceivedDHCPDISCOVERor
DHCPREQUESTmessageswillbeforwardedtotheaddressesconfiguredbythe
dhcp-servercommandasinnormalDHCPrelayoperation.
Examples
Thefollowingexampleshowshowtoconfiguredhcprelayinformationtrustglobally:
Switch#configureterminal
Switch(config)#dhcprelayinformationtrust-all
RelatedCommands
dhcprelayinformationtrusted
4.3.9dhcprelayinformationtrusted
CommandPurpose
ToconfigureaninterfaceasatrustedsourceofDHCPrelayagentinformationoption,
usethedhcprelayinformationtrustedcommandininterfaceconfigurationmode.To
restoretheinterfacetothedefaultbehavior,usethenoformofthecommand.
CommandSyntax
dhcprelayinformationtrusted
nodhcprelayinformationtrusted485CommandMode
InterfaceConfiguration
Default
Allinterfacesontherouterareconsideredentrusted.
Usage
Bydefault,ifthegatewayaddressissettoallzerosintheDHCPpacketandthe
relayinformationoptionisalreadypresentinthepacket,theDHCPrelayagentwill
discardthepacket.Ifthedhcprelayinformationtrustedcommandisconfigured
globally,theDHCPrelayagentwillnotdiscardthepacketevenifthegateway
addressissettoallzeros.Instead,thereceivedDHCPDISCOVERor
DHCPREQUESTmessageswillbeforwardedtotheaddressesconfiguredbythe
dhcp-servercommandasinnormalDHCPrelayoperation.
Examples
Thefollowingexampleshowshowtoconfigureaninterfaceastrustedsourceofdhcp
relayinformation:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcprelayinformationtrusted
RelatedCommands
dhcprelayinformationtrust-all
4.3.10dhcprelaygateway
CommandPurpose
ToconfiguretheDHCPrelayagentaddressofDHCPpackets,usethiscommandin
interfaceconfigurationmode.
Torestoretheinterfacetothedefaultbehavior,usethenoformofthecommand.486CommandSyntax
dhcprelaygatewayA.B.C.D
nodhcprelaygateway
CommandMode
InterfaceConfiguration
Default
DefaultrelayagentaddressisusedinDHCPpacket.
Usage
None
Examples
ThefollowingexampleshowshowtoconfigureDHCPrelayagentaddressofDHCP
packets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcprelaygateway10.10.10.1
RelatedCommands
dhcp-server(interface)
4.3.11dhcprelayaddresscycle
CommandPurpose
UsedhcprelayaddresscyclecommandtoenableDHCPrelaycyclefeature.
Usenodhcprelayaddresscycletodisablethefeature.
CommandSyntax
dhcprelayaddresscycle
nodhcprelayaddresscycle487CommandMode
GlobalConfiguration
Default
DHCPrelaycycleisdisabledbydefault.
Usage
ThiscommandisusedforDHCPrelay.WhenmorethanoneDHCPserversare
configuredonaDHCPrelaydevice,relaydeviceshouldsendDHCPDISCOVER
packetstoallserversbydefault.Inthisway,theserversshoulddealwithtoomuch
packetandmightbeoverload.Toresolvethisproblemusethiscommandtoenable
DHCPrelaycycle.Afterconfigurethiscommand,DHCPrelaydevicesendtoonly
oneserverwhenitreceivetheDHCPDISCOVERpacket,anditwillchangeaserver
tosendpacketeverytimeafteritsentone.Usethismethodtomakeallserversto
achieveloadbalance.
Examples
EnableDHCPrelaycyclefeature:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcprelayaddresscycle
RelatedCommands
None
4.3.12servicedhcp
CommandPurpose
ToenabletheDynamicHostConfigurationProtocol(DHCP)snoopingandrelay
agentfeaturesonyourrouter,usetheservicedhcpcommandinglobalconfiguration
mode.
TodisabletheDHCPsnoopingandrelayagentfeatures,usethenoformofthis
command.488CommandSyntax
servicedhcpenable
servicedhcpdisable
CommandMode
GlobalConfiguration
Default
DHCPserviceisdisabledglobally.
Usage
OnlythemainDHCPserviceisenabledbytheservicedhcpcommand,canother
DHCPservicesbeused,suchasdhcprelayordhcpsnooping.
Examples
ThefollowingexampleshowshowtoenableDHCPserviceglobally:
Switch#configureterminal
Switch(config)#servicedhcpenable
ThefollowingexampleshowshowtodisableDHCPserviceglobally:
Switch#configureterminal
Switch(config)#servicedhcpdisable
RelatedCommands
dhcprelay
dhcpsnooping
4.3.13debugdhcprelay
CommandPurpose
Usethiscommandtoturnonthedebugswitchesofdhcprelaymodule.
Torestorethedefault,usethenoformofthiscommand489CommandSyntax
debugdhcprelay(events|error|dump|packet|all)
nodebugdhcprelay(events|error|dump|packet|all)
Parameter ParameterDescriptionParameterValue
events Relayevents -
error ErrorDHCPmessage -
packet DHCPmessagefields-
dump Dumpmessageinhex
format-
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC
Default
None
Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopendhcprelaydebugswitches:
Switch#debugdhcprelayall
RelatedCommands
terminalmonitor490showloggingbuffer
4.3.14showdhcp-server
CommandPurpose
TodisplaytheDHCPservergroups,usetheshowdhcp-servercommandin
privilegedEXECmode.
CommandSyntax
showdhcp-server
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplayalltheDHCPservergroupsconfiguredwith
commanddhcp-serveringlobalmode.
Examples
Thefollowingexampleshowshowtodisplaydhcp-servergroupinformation:
Switch#showdhcp-server
DHCPservergroupinformation:
============================================================
group1ipaddresslist:
[1]1.1.1.1
[2]2.2.2.2
[3]3.3.3.3
[4]4.4.4.4
[5]5.5.5.5
[6]6.6.6.6
[7]7.7.7.7
[8]8.8.8.8491RelatedCommands
dhcp-server(global)
4.3.15showdhcprelayinterfaces
CommandPurpose
Todisplaytowhichdhcp-servergrouptheinterfacebelongs,usetheshowdhcprelay
interfacescommandinprivilegedEXECmode.
CommandSyntax
showdhcprelayinterfaces
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheinterfacewhichisconfinedDHCPrelay.
Examples
Thefollowingexampleshowshowtodisplaydhcprelayinterfacesinformation:
Switch#showdhcprelayinterfaces
ListofDHCPrelayenabledinterface(s):
DHCPrelayservicestatus:enabled
InterfaceNameDHCPservergroup
============================================================
eth-0-1 1
RelatedCommands
showdhcp-server4924.3.16showdhcprelayinformationconfig
CommandPurpose
TodisplaytheDHCPrelayinformationconfigurations,usetheshowdhcprelay
informationconfigcommandinprivilegedEXECmode.
CommandSyntax
showdhcprelayinformationconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheconfigurationofDHCPrelay.
Examples
Thefollowingexampleshowshowtodisplaydhcprelayconfiguration:
Switch#showdhcprelayinformationconfig
DHCPrelayagentinformationconfiguration:
============================================================
nodhcprelayinformationoption
dhcprelayinformationcheck
dhcprelayinformationpolicykeep
RelatedCommands
dhcprelayinformationoption4934.3.17showdhcprelayinformationtrusted-sources
CommandPurpose
TodisplayallinterfacesconfiguredtobeatrustedsourcefortheDHCPrelay
informationoption,usetheshowdhcprelayinformationtrusted-sourcescommandin
privilegedEXECmode.
CommandSyntax
showdhcprelayinformationtrusted-sources
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplayallinterfacesconfiguredtobeatrustedsourcefor
DHCPrelay.
Examples
Thefollowingexampleshowshowtodisplaydhcprelayinformationtrusted-sources:
Switch#showdhcprelayinformationtrusted-sources
Listoftrustedsourcesofrelayagentinformationoption:
============================================================
Allinterfacesaretrustedsourceofrelayagentinformationoption
RelatedCommands
dhcprelayinformationtrusted4944.3.18showdhcprelaystatistics
CommandPurpose
TodisplaythestatisticsofDHCPpacketsrelayedbytheswitch,usetheshowdhcp
relaystatisticscommandinprivilegedEXECmode.
CommandSyntax
showdhcprelaystatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaydetailDHCPstatisticswhichdealtbytheswitch.
Examples
Thefollowingexampleshowshowtodisplaydhcprelaystatistics:
Switch#showdhcprelaystatistics
DHCPrelaypacketstatistics:
============================================================
Clientrelayedpackets:101
Serverrelayedpackets:88
Clienterrorpackets:0
Servererrorpackets:0
BogusGIADDRdrops:15
BadcircuitIDpackets:0
Corruptedagentoptions:0
Missingagentoptions:0
MissingcircuitIDs:0
RelatedCommands
cleardhcprelaystatistics4954.3.19cleardhcprelaystatistics
CommandPurpose
ToclearthestatisticsofDHCPpacketsrelayedbytheswitch,usethecleardhcp
relaystatisticscommandinprivilegedEXECmode.
CommandSyntax
cleardhcprelaystatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtocleardetailDHCPstatisticswhichdealtbytheswitch.
Examples
Thefollowingexampleshowshowtocleardhcprelaystatistics:
Switch#cleardhcprelaystatistics
RelatedCommands
showdhcprelaystatistics
4.4DHCPServerCommands
4.4.1servicedhcp
CommandPurpose
ToenableordisabletheDHCPsnooping,serverandrelayagentfeaturesonyour
router,usetheservicedhcpcommandinglobalconfigurationmode.496Todisablethesefunctionsusethenoformofthiscommand.
CommandSyntax
servicedhcpenable
servicedhcpdisable
CommandMode
GlobalConfiguration
Default
DHCPserviceisdisabled.
Usage
OnlythemainDHCPserviceisenabledbytheservicedhcpcommand,canother
DHCPservicesbeused,suchasdhcprelay,dhcpserveranddhcpsnooping.
Examples
Thefollowingexampleenablesdhcpservice:
Switch#configureterminal
Switch(config)#servicedhcpenable
Thefollowingexampledisablesdhcpservice:
Switch#configureterminal
Switch(config)#servicedhcpdisable
RelatedCommands
dhcpserver
dhcprelay
dhcpsnooping4974.4.2dhcp-server(global)
CommandPurpose
ToenabletheDHCPserverservice,usethedhcpservercommandinglobal
configurationmode.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
dhcpserver
nodhcpserver
CommandMode
GlobalConfiguration
Default
DHCPserverisdisabled.
Usage
TheDHCPservicemustbeenabledwiththedhcpservercommandbeforeDHCP
serverservicecanbeused.
Examples
Thefollowingissampleoutputfromthedhcpservercommand:
Switch#configureterminal
Switch(config)#dhcpserver
RelatedCommands
servicedhcp
dhcp-server(interface)4984.4.3dhcp-server(interface)
CommandPurpose
TospecifyaL3interfacetoactasaDHCPServer,usethedhcpservercommandin
interfaceconfigurationmode.Toremovethespecification,usethenoformofthis
command.
CommandSyntax
dhcpserverenable
dhcpserverdisable
Parameter ParameterDescriptionParameterValue
enable SpecifyaL3interfaceto
actasaDHCPserver-
disable RemoveDHCPserveron
aL3interface-
CommandMode
InterfaceConfiguration
Default
NeitherDHCPservernorDHCPrelayisspecified.
Usage
ThiscommandisusedtospecifyaL3interfacetoactasaDHCPServer.
Examples
Thefollowingissampleoutputfromthedhcpservercommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpserverenable499RelatedCommands
servicedhcp
dhcpserver(global)
4.4.4dhcppingpackets
CommandPurpose
Toconfigurehowmanypingpacketsthataresentbeforeassigningtheaddresstoa
requestingclient,usethedhcppingpacketscommandininterfaceconfiguration
mode.Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
dhcppingpacketsNUMBER
nodhcppingpackets
Parameter ParameterDescriptionParameterValue
NUMBER Specifythenumberofping
packetsthataresent
beforeassigningthe
addresstoarequesting
client0-10
CommandMode
GlobalConfiguration
Default
Thedefaultvalueisonepacket.
Usage
TheDHCPserverpingsapooladdressbeforeassigningtheaddresstoarequesting
client.Ifthepingisunanswered,theDHCPserverassumes(withahighprobability)
thattheaddressisnotinuseandassignstheaddresstotherequestingclient.500Examples
Thefollowingissampleoutputfromthedhcppingpacketscommand:
Switch#configureterminal
Switch(config)#dhcppingpackets10
RelatedCommands
servicedhcp
dhcppingtimeout
4.4.5dhcppingtimeout
CommandPurpose
ToconfigurehowlongaDHCPserverwaitsforapingreplyfromanaddresspool;
usethedhcppingtimeoutcommandininterfaceconfigurationmode.
Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
dhcppingtimeoutNUMBER
nodhcppingtimeout
Parameter ParameterDescriptionParameterValue
NUMBER Specifieshowlongtowait
forapingreplyinseconds.1-10seconds
CommandMode
GlobalConfiguration
Default
Thedefaultvalueiswaitingforonesecond.501Usage
TheDHCPserverpingsapooladdressbeforeassigningtheaddresstoarequesting
client.Ifthepingisunanswered,theDHCPserverassumes(withahighprobability)
thattheaddressisnotinuseandassignstheaddresstotherequestingclient.
Examples
Thefollowingissampleoutputfromthedhcppingtimeoutcommand:
Switch#configureterminal
Switch(config)#dhcppingtimeout3
RelatedCommands
servicedhcp
dhcppingpackets
4.4.6dhcppool
CommandPurpose
ToconfiguretheinformationreforwardingpolicyforaDHCPrelayagent(whatarelay
agentshoulddoifamessagealreadycontainsrelayinformation),usethedhcprelay
informationpolicycommandinglobalconfiguration.
Torestorethedefaultrelayinformationpolicy,usethenoformofthiscommand.
CommandSyntax
dhcppoolWORD
nodhcppoolWORD
Parameter ParameterDescriptionParameterValue502WORD WORD:Thenameofa
DHCPpool1)thelengthrangeshould
be[1,32)
2)Thecharacterscanonly
include[0-9a-zA-Z.-_]
3)Thestringmuststarting
withalphabetic,ending
withalphanumericordigit
CommandMode
GlobalConfiguration
Default
ThedefaultvalueisDHCPaddresspoolsarenotconfigured.
Usage
Duringexecution,theconfigurationmodechangestoDHCPpoolconfigurationmode,
identifiedbythe(config-dhcp)#prompt.Inthismode,theadministratorcanconfigure
poolparameters,liketheIPsubnetnumberanddefaultrouterlist.
Examples
Thefollowingissampleoutputfromthedhcppoolcommand:
Switch#configureterminal
Switch(config)#dhcppoolpool1
RelatedCommands
servicedhcp
dhcpselect
static-bind
dhcpexcluded-address
network(DHCP)5034.4.7static-bind
CommandPurpose
TospecifyanaddressbindingmappingbetweentheIPaddressandMACaddressof
aclient,usethestatic-bindpoolconfigurationcommand.Toremovetheaddress
bindingmapping,usethenoformofthiscommand.
CommandSyntax
static-bindip-addressIP_ADDR/IP_MASK_LEN(mac-addressMAC_ADDR|client-
identifier(asciiWORD|hexHEX_STRING))
static-bindip-addressIP_ADDRIP_ADDR_MASK(mac-addressMAC_ADDR|
client-identifier(asciiWORD|hexHEX_STRING))
nostatic-bind
Parameter ParameterDescriptionParameterValue
IP_ADDR IPaddress. IPv4Address
IP_ADDR_MASK IP-address-typemaskIPv4Address
IP_MASK_LEN Prefixlengthfortheip
address.1-32
mac-addressMAC_ADDRthehardwareaddressofa
DHCPclient.MACAddress
asciiWORD theclientidasasciistringStringwithupto63
characters
hexHEX_STRING theclientidashexstringStringwithupto126
characters
CommandMode
DHCPpoolConfiguration
Default
Thedefaultvalueisnoneaddressbindingmappingspecified.504Usage
Youcanonlyconfigureonemanualbindingperhostpool.
Examples
Thefollowingissampleoutputfromthestatic-bindcommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#static-bindip10.10.10.10/24mac-address0012.2222.2222
RelatedCommands
dhcppool
4.4.8dns-serveraddress
CommandPurpose
TospecifytheDNSIPserversavailabletoaDHCPclient,usethedns-serverDHCP
poolconfigurationcommand.ToremovetheDNSserverlist,usethenoformofthis
command.
CommandSyntax
dns-serverA.B.C.D(A.B.C.DA.B.C.D)
nodns-server
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
aDNSserver.OneIP
addressisrequired,
althoughyoucanspecify
uptoeightaddressesin
onecommandline.IPv4Address
A.B.C.DA.B.C.D
(Optional)Specifiesuptoeight
addressesinthecommand
line.IPv4Address505CommandMode
DHCPpoolConfiguration
Default
ThedefaultvalueisnoneDNSIPserversspecified.
Usage
Youcanspecifyuptoeightserversinthelist,Serversarelistedinorderof
preference(address1isthemostpreferredserver,address2isthenextmost
preferredserver,andsoon).
Examples
Thefollowingissampleoutputfromthedns-servercommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#dns-server1.1.1.12.2.2.2
RelatedCommands
dhcppool
4.4.9domain-name
CommandPurpose
TospecifythedomainnameforaDHCPclient,usethedomain-nameDHCPpool
configurationcommand.Toremovethedomainname,usethenoformofthis
command.
CommandSyntax
domain-nameWORD
nodomain-name
Parameter ParameterDescriptionParameterValue506WORD specifyadomainname
suffixineachDHCP
addresspoolontheDHCP
serverfortheclients.1)Thelengthrangeshould
be[1,64)
2)Thecharacterscanonly
include[0-9a-zA-Z.-_],
specifyadomainname
suffixineachDHCP
addresspoolontheDHCP
serverfortheclients.
1)Thelengthrangeshould
be[1,64)
2)Thecharacterscanonly
include[0-9a-zA-Z.-_],
3)Thestringmuststarting
withalphabetic,ending
withalphanumericordigit
CommandMode
DHCPpoolConfiguration
Default
Thedefaultvalueisnonedomain-namespecified.
Usage
YoucanspecifyadomainnamesuffixineachDHCPaddresspoolontheDHCP
serverfortheclients.Withthissuffixassigned,theclientneedsonlyinputpartofa
domainname,andthesystemwilladdthedomainnamesuffixfornameresolution.
Examples
Thefollowingissampleoutputfromthedomain-namecommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#domain-nameswitch.org507RelatedCommands
dhcppool
4.4.10bootfile-name
CommandPurpose
TospecifythenameofthedefaultbootimageforaDHCPclient,usethebootfile-
nameDHCPpoolconfigurationcommand.Todeletethebootimagename,usethe
noformofthiscommand.
CommandSyntax
bootfile-nameWORD
nobootfile-name
Parameter ParameterDescriptionParameterValue
WORD Specifiesthenameofthe
filethatisusedasaboot
image.1)Thelengthrangeshould
be[1,64)
2)Thecharacterscanonly
include[0-9a-zA-Z.-_],
Specifiesthenameofthe
filethatisusedasaboot
image.
1)Thelengthrangeshould
be[1,64)
2)Thecharacterscanonly
include[0-9a-zA-Z.-_],
3)Thestringmuststarting
withalphabetic,ending
withalphanumericordigit
CommandMode
DHCPpoolConfiguration508Default
Thedefaultvalueisnonebootfilespecified.
Usage
ThistaskistospecifytheIPaddressandnameofaTFTPserverandthebootfile
nameintheDHCPaddresspool.TheDHCPclientsusetheseparameterstocontact
theTFTPserver,requestingtheconfigurationfileusedforsysteminitialization,which
iscalledautoconfiguration.
Examples
Thefollowingexamplespecifiesdhclient_startup_configasthenameofthebootfile:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#bootfiledhclient_startup_config
RelatedCommands
dhcppool
tftp-server-address
4.4.11tftp-server-address
CommandPurpose
ToconfigurethetftpserverinthebootprocessofaDHCPclient,usethetftp-server-
addressDHCPpoolconfigurationcommand.Toremovethebootserverlist,usethe
noformofthiscommand.
CommandSyntax
tftp-server-addressA.B.C.D(A.B.C.DA.B.C.D)
notftp-server-address
Parameter ParameterDescriptionParameterValue509A.B.C.D Specifiestheaddressof
thetftpserveraddressin
thebootprocess,whichis
typicallyaTrivialFile
TransferProtocol(TFTP)
server.Oneaddressis
required,althoughyoucan
specifyuptoeight
addressesinone
commandline.IPv4Address
A.B.C.DA.B.C.D
(Optional)Specifiesuptoeight
addressinthecommand
line.IPv4Address
CommandMode
DHCPpoolConfiguration
Default
Thedefaultvalueisnonetftp-server-addressspecified.
Usage
Youcanspecifyuptoeightserversinthelist,Serversarelistedinorderof
preference(address1isthemostpreferredserver,address2isthenextmost
preferredserver,andsoon).
Examples
Thefollowingissampleoutputfromthetftp-server-addresscommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#tftp-server-address1.1.1.12.2.2.2
RelatedCommands
dhcppool510bootfile-name
4.4.12gatewayaddress
CommandPurpose
TospecifythedefaultrouterlistforaDHCPclient,usethegatewayDHCPpool
configurationcommand.Toremovethedefaultrouterlist,usethenoformofthis
command.
CommandSyntax
gatewayA.B.C.D(A.B.C.DA.B.C.D)
nogateway
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
aDNSserver.OneIP
addressisrequired,
althoughyoucanspecify
uptoeightaddressesin
onecommandline.IPv4Address
A.B.C.DA.B.C.D
(Optional)Specifiesuptoeight
addressesinthecommand
line.IPv4Address
CommandMode
DHCPpoolConfiguration
Default
Thedefaultvalueisnonegatewayserversspecified.
Usage
TheIPaddressoftheroutershouldbeonthesamesubnetastheclientsubnet.You
canspecifyuptoeightroutersinthelist.Routersarelistedinorderofpreference511(address1isthemostpreferredrouter,address2isthenextmostpreferredrouter,
andsoon).
Examples
Thefollowingissampleoutputfromthegatewaycommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#gateway1.1.1.12.2.2.2
RelatedCommands
dhcppool
4.4.13netbios-name-server
CommandPurpose
TospecifythedefaultrouterlistforaDHCPclient,usethenetbios-name-server
DHCPpoolconfigurationcommand.Toremovethedefaultrouterlist,usethenoform
ofthiscommand.
CommandSyntax
netbios-name-serverA.B.C.D(A.B.C.DA.B.C.D)
nonetbios-name-server
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
aDNSserver.OneIP
addressisrequired,
althoughyoucanspecify
uptoeightaddressesin
onecommandline.IPv4Address
A.B.C.DA.B.C.D
(Optional)Specifiesuptoeight
addressesinthecommand
line.IPv4Address512CommandMode
DHCPpoolConfiguration
Default
ThedefaultvalueisnoneNetBIOSWINSnameserversspecified.
Usage
YoucanspecifyuptoeightNetBIOSWINSnameserversinthelist.NetBIOSWINS
nameserversarelistedinorderofpreference(address1isthemostpreferredserver,
address2isthenextmostpreferredserver,andsoon).
Examples
Thefollowingissampleoutputfromthenetbios-name-servercommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#netbios-name-server1.1.1.12.2.2.2
RelatedCommands
dhcppool
4.4.14netbios-node-type
CommandPurpose
ToconfiguretheNetBIOSnodetypeforDHCPclients,usethenetbios-node-type
DHCPpoolconfigurationcommand.
ToremovetheNetBIOSnodetype,usethenoformofthiscommand.
CommandSyntax
netbios-node-type[b-node|p-node|m-node|h-node]
nonetbios-node-type
Parameter ParameterDescriptionParameterValue513b-node Broadcast -
p-node Peer-to-peer -
m-node Mixed -
h-node Hybrid(recommended)-
CommandMode
DHCPpoolConfiguration
Default
ThedefaultvalueisnoneNetBIOSnodetypespecified.
Usage
YoucanspecifytheNetBIOSnodetypeforaDHCPaddresspoolwhichisusedto
specifytheNetBIOSnodetypeforaDHCPClient.
Examples
Thefollowingissampleoutputfromthenetbios-node-typecommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#netbios-node-typeh-node
RelatedCommands
dhcppool
4.4.15network
CommandPurpose
ToconfigurethesubnetnumberandmaskforaDHCPaddresspoolonaDHCP
Server,usethenetworkDHCPpoolconfigurationcommand.
Toremovethesubnetnumberandmask,usethenoformofthiscommand.514CommandSyntax
network[ip-addresswildcard-mask|ip-address/prefix-length]
nonetwork
Parameter ParameterDescriptionParameterValue
ip-address IPaddress. IPv4Address
wildcard-mask IP-address-typemaskthat
includesdontcarebits.IPv4Address
prefix-length Prefixlengthforthe
network.0-32
CommandMode
DHCPpoolConfiguration
Default
Thedefaultvalueisnonesubnetnumberandmaskspecified.
Usage
ThiscommandisvalidforDHCPsubnetworkaddresspoolsonly.TheDHCPserver
assumesthatallhostaddressesareavailable.Thesystemadministratorcanexclude
subsetsoftheaddressspacebyusingtheipdhcpexcluded-address
command.Networkforonepoolcanntthesamewithotherpoolsnetworkandcant
configuremanualbindingswithinthesamepoolthatisconfiguredwiththenetwork
command.
Examples
Thefollowingissampleoutputfromthenetbios-node-typecommand:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#network1.1.1.0/24515RelatedCommands
dhcppool
4.4.16lease
CommandPurpose
ToconfigurethedurationoftheleaseforanIPaddressthatisassignedfromaDHCP
ServertoaDHCPclient,usetheleaseDHCPpoolconfigurationcommand.To
restorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
leaseDAYS(HOURS(MINUTES|)|)
nolease
Parameter ParameterDescriptionParameterValue
DAYS Specifiesthedurationof
theleaseinnumbersof
days.0-365days
HOURS(Optional) Specifiesthenumberof
hoursinthelease.Adays
valuemustbesupplied
beforeyoucanconfigure
anhoursvalue.0-23hours
MINUTES(Optional) Specifiesthenumberof
minutesinthelease.A
daysvalueandanhours
valuemustbesupplied
beforeyoucanconfigurea
minutesvalue.0-59minutes
CommandMode
DHCPpoolConfiguration516Default
Thedefaultvalueisoneday.
Usage
N/A
Examples
Thefollowingexampleshowsatwo-daylease:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#lease2
Thefollowingexampleshowsaone-dayandtwo-hourlease:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#lease12
Thefollowingexampleshowsathirty-minutelease:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#lease0030
RelatedCommands
dhcppool
4.4.17option
CommandPurpose
ToconfigureDHCPServeroptions,usetheoptionDHCPpoolconfiguration
command.
Toremovetheoptions,usethenoformofthiscommand.
CommandSyntax
option{code[asciiascii-string|hexhex-string|ip-addressip-address]}
nooption[code]517Parameter ParameterDescriptionParameterValue
code SpecifiestheDHCPoption
code.2-254
ascii-string SpecifiesanNVTASCII
characterstring.ASCII
characterstringsthat
containwhitespacemust
bedelaminatedby
quotationmarks.Stringwithupto63
characters
hex-string Specifiesdotted-
hexadecimaldata.Each
byteinhexadecimal
characterstringsistwo
hexadecimaldigitse.Stringwithupto126
characters
ip-address SpecifiesanIPaddress.IPv4Address
CommandMode
DHCPpoolConfiguration
Default
ThedefaultvalueisnoneDHCPoptionspecified.
Usage
DHCPprovidesaframeworkforpassingconfigurationinformationtohostsona
TCP/IPnetwork.Configurationparametersandothercontrolinformationarecarried
intaggeddataitemsthatarestoredintheoptionsfieldoftheDHCPmessage.The
dataitemsthemselvesarealsocalledoptions.ThecurrentsetofDHCPoptionsare
documentedinRFC2131,DynamicHostConfigurationProtocol.
Examples
Thefollowingissampleoutputfromtheoptioncommand:518Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#option72ip-address10.10.10.1011.11.11.11
RelatedCommands
dhcppool
4.4.18dhcpexcluded-address
CommandPurpose
TospecifyasingleIPaddressorarangeofIPaddresseswhichtheDHCPServeris
notassigntoDHCPclients,usetheexcluded-addressDHCPpoolconfiguration
command.ToremovetheIPaddresses,usethenoformofthiscommand.
CommandSyntax
dhcpexcluded-addressA.B.C.D[A.B.C.D]
nodhcpexcluded-addressA.B.C.D[A.B.C.D]
Parameter ParameterDescriptionParameterValue
A.B.C.D TheexcludedIPaddress,
orlowIPaddressinan
excludedaddressrange.IPv4Address
A.B.C.D(Optional) ThehighIPaddressinthe
excludedaddressrange.IPv4Address
CommandMode
GlobalConfiguration
Default
AllIPpooladdressesareassignable.519Usage
TheDHCPserverassumesthatallpooladdressesmaybeassignedtoclients.Use
thiscommandtoexcludeasingleIPaddressorarangeofIPaddresses.
Examples
ThefollowingexampleshowshowtodisallowDHCPserverdistributetheaddressin
therangeof10.10.1.100-10.10.1.199:
Switch#configureterminal
Switch(config)#dhcppooltest
Switch(config-dhcp)#ipdhcpexcluded-address10.10.1.10010.10.1.199
RelatedCommands
dhcppool
4.4.19showdhcpserverconflict
CommandPurpose
TodisplayaddressconflictsfoundbyaDHCPServerwhenaddressesareofferedto
theclient,usetheshowdhcpserverconflictinprivilegedEXECmode.
CommandSyntax
showdhcpserverconflict[ipA.B.C.D|all]
Parameter ParameterDescriptionParameterValue
ipA.B.C.D SpecifiestheIPaddressof
theconflictfound.IPv4Address
all SpecifiesallIPaddressof
theconflictfound.-
CommandMode
PrivilegedEXEC520Default
None
Usage
Theserverdetectsconflictsusingping.Theclientdetectsconflictsusinggratuitous
AddressResolutionProtocol(ARP).Ifanaddressconflictisdetected,theaddressis
removedfromthepoolandtheaddresswillnotbeassigneduntilanadministrator
resolvestheconflict.
Examples
ThefollowingexampledisplaysthedetectionmethodanddetectiontimeforallIP
addressestheDHCPserverhasofferedthathaveconflictswithotherdevices:
Switch#showipdhcpconflictall
RelatedCommands
cleardhcpserverconflict
dhcppingpackets
dhcppingtimeout
4.4.20showdhcpserverbinding
CommandPurpose
TodisplayaddressbindingsonaDHCPServer,usetheshowdhcpserverbindingin
privilegedEXECcommand.
CommandSyntax
showdhcpserverbinding[ipA.B.C.D|poolWORD|all]
Parameter ParameterDescriptionParameterValue
ipA.B.C.D SpecifiestheIPaddressof
theconflictfound.IPv4Address521poolWORD Specifiesthepoolname
wheretheIPaddressof
theconflictfound.Stringwithupto31
characters
all SpecifiesallconflictIP
address.-
CommandMode
PrivilegedEXEC
Default
None
Usage
ThebindingaddressparametersincludinganIPaddress,anassociatedMAC
address,aleaseexpirationdate,andthetypeofaddressassignmentthathave
occurred.
Examples
ThefollowingexamplesshowtheDHCPbindingaddressparameters:
Switch#showipdhcpbinding1.1.1.1
RelatedCommands
cleardhcpserverbinding
4.4.21showdhcpserverstatistics
CommandPurpose
TodisplayDHCPServerstatistics,usetheshowdhcpserverstatisticsinprivileged
EXECcommand.
CommandSyntax
showdhcpserverstatistics522CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
ThefollowingexampledisplaysDHCPserverstatistics:
Switch#showdhcpserverstatistics
DHCPserverpacketstatistics:
============================================================
MessageReceived
BOOTREQUEST12
DHCPDISCOVER200
DHCPREQUEST178
DHCPDECLINE0
DHCPRELEASE0
DHCPINFORM0
MessageSent
BOOTREPLY12
DHCPOFFER190
DHCPACK172
DHCPNAK6
RelatedCommands
cleardhcpserverstatistics
4.4.22showdhcpserverconfig
CommandPurpose
TodisplaytheDHCPserverconfigurations,usetheshowdhcpserverconfig
privilegedEXECcommand.523CommandSyntax
showdhcpserverconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheconfigurationofDHCPserver.
Examples
Thefollowingissampleoutputfromtheshowdhcpserverconfigcommand:
Switch#showdhcpserverconfig
DHCPserverconfiguration:
============================================================
Poolname:pool10
network10.1.1.0mask255.255.255.0
gateway10.1.1.1
RelatedCommands
N/A
4.4.23cleardhcpserverconflict
CommandPurpose
ToclearanaddressconflictfromtheDHCPserverdatabase,usethecleardhcp
serverconflictprivilegedEXECcommand.
CommandSyntax
cleardhcpserverconflict[ipA.B.C.D|all]524Parameter ParameterDescriptionParameterValue
ipA.B.C.D TheIPaddressofthehost
thatcontainsthe
conflictingaddressyou
wanttoclear.IPv4Address
all Clearallconflicting
address.-
CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
Thefollowingexampleshowsanaddressconflictof1.1.1.99beingdeletedfromthe
DHCPserverdatabase:
Switch#clearipdhcpconflict1.1.1.99
RelatedCommands
showdhcpserverconflict
4.4.24cleardhcpserverbinding
CommandPurpose
TodeleteanautomaticaddressbindingfromtheDHCPServerdatabase,usethe
cleardhcpserverbindinginprivilegedEXECcommand.525CommandSyntax
cleardhcpserverbinding[ipA.B.C.D|poolWORD|all]
Parameter ParameterDescriptionParameterValue
ipA.B.C.D Theaddressofthebinding
youwanttoclear.IPv4Address
poolWORD Specifiesthepoolname
wheretheIPaddressof
theconflictfound.Stringwithupto31
characters
all Clearsallautomatic
bindings.-
CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
Thefollowingexampledeletestheaddressbinding1.1.1.99fromaDHCPserver
database:
Switch#clearipdhcpbinding1.1.1.99
RelatedCommands
showdhcpserverbinding5264.4.25cleardhcpserverstatistics
CommandPurpose
ToresetallDHCPservercounters,usethecleardhcpserverstatisticsprivileged
EXECcommand.
CommandSyntax
cleardhcpserverstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
ThefollowingexampleresetsallDHCPcounterstozero:
Switch#cleardhcpserverstatistics
RelatedCommands
cleardhcpserverstatistics
4.4.26showdhcpserverpool
CommandPurpose
Todisplayutilizationofpoolresources,usetheshowdhcpserverpoolinprivileged
EXECmode.527CommandSyntax
showdhcpserverpool(WORD|)
Parameter ParameterDescriptionParameterValue
WORD Specifiesthepoolnameto
displaypoolutilization.Stringwithupto31
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
Thefollowingexampleshowsresourceutilizationofadhcppool.:
Switch#showdhcpserverpoolpool1
Pool :pool1
Type :Dynamic
Lease :0Days0Hours5Minutes
Totaladdresses :254
Leasedaddresses :1
Excludedaddresses:1
Freeaddresses :252
Conflictaddresses:0
CurrentindexIPaddressrange Leased/Excluded/Total
2.1.1.52.1.1.1-2.1.1.2541/1/254
============================================================
RelatedCommands
None5284.5DNSCommands
4.5.1iphost
CommandPurpose
Todefinestatichostname-to-addressmappingsintheDomainNameSystem(DNS)
hostnamecacheforaDNSview,usetheiphostcommandinglobalconfiguration
mode.Ifthehostnamecachedoesnotexistyet,itisautomaticallycreated.
Toremoveahostname-to-addressmapping,usethenoformofthiscommand.
CommandSyntax
iphostHOSTNAMEIP_ADDR
noiphosthostname
Parameter ParameterDescriptionParameterValue
HOSTNAME Nameofthehost Stringwithupto63
characters
IP_ADDR AssociatedhostIP
addressIPv4Address
CommandMode
GlobalConfiguration
Default
Nostatichostname-to-addressmappingisaddedtotheDNShostnamecachefora
DNSview.
Usage
None529Examples
Thefollowingexampleshowshowtoaddamappingentrytotheglobalhostname
cacheandthenremoveoneofthoseentriesfromtheglobalhostnamecache:
Switch#configureterminal
Switch(config)#iphostwww.example1.com192.0.2.141
RelatedCommands
showiphost
4.5.2dnsdomain
CommandPurpose
TospecifythedefaultdomainforaDomainNameSystem(DNS)viewtouseto
completeunqualifiedhostnames(nameswithoutadotted-decimaldomainname),
usethednsdomaincommandinglobalconfigurationmode.
ToremovethespecificationofthedefaultdomainnameforaDNSview,usetheno
formofthiscommand.
CommandSyntax
dnsdomainDOMAIN-NAME
nodnsdomainDOMAIN-NAME
Parameter ParameterDescriptionParameterValue
DOMAIN-NAME Nameofthedomain Stringwithupto63
characters
CommandMode
GlobalConfiguration
Default
NodefaultdomainnameisdefinedfortheDNSview.530Usage
None
Examples
ThefollowingexampleshowshowtospecifythedefaultdomainforDNS:
Switch#configureterminal
Switch(config)#dnsdomainwww.example1.com
RelatedCommands
showdnsdomain
4.5.3dnsserver
CommandPurpose
ToaddanameservertothelistofDomainNameSystem(DNS)nameservers,use
thednsservercommandinglobalconfigurationmode.ToremoveaDNSname
serverfromthelist,usethenoformofthiscommand.
CommandSyntax
dnsserverIP_ADDR(source-interfaceIFNAME|source-ipA.B.C.D|)
nodnsserverIP_ADDR
Parameter ParameterDescriptionParameterValue
IP_ADDR IPaddressofaDNSname
serverSupportIPv4/IPv6Address
IFNAME NameofsourceinterfaceSupport
physical/aggregation/loopb
ack/tunnel/vlanports
A.B.C.D SourceIPaddress IPv4Address
CommandMode
GlobalConfiguration531Default
NoIPaddressisexplicitlyaddedtothelistofresolvingnameserversforthisview.
Usage
Thiscommandcanbeenteredmultipletimestospecifyamaximumofthreeresolving
nameservers.Afterthreeresolvingnameservershavebeenspecified,additional
resolvingnameserverscannotbespecifiedunlessanexistingentryisremoved.
IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
ThefollowingexampleshowshowtospecifytheDNSserverlist:
Switch#configureterminal
Switch(config)#dnsserver10.10.1.1
Switch(config)#dnsserver20.20.2.2
RelatedCommands
showdnsserver
4.5.4showdns
CommandPurpose
TodisplayconfigurationinformationaboutaDomainNameSystem(DNS)view,use
theshowdnscommandinprivilegedEXECmode.
CommandSyntax
showdns{domain|server}
Parameter ParameterDescriptionParameterValue
domain DisplayDNSdomainlist-
server DisplayDNSserverlist-532CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowdnsdomaincommand:
Switch#showdnsdomain
CurrentDNSdomainconfiguration:
Domain Suffix
----------------------------------------
1domain domain.com
2domain aa.com
RelatedCommands
dnsserver
dnsdomain
4.5.5showiphost
CommandPurpose
Todisplayconfigurationinformationaboutaniphostview,usetheshowiphost
commandinprivilegedEXECmode.
CommandSyntax
showiphost
CommandMode
PrivilegedEXEC533Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowiphostcommand:
Switch#showiphost
CurrentIPhostconfiguration:
Host Address
--------------------------------------------------------------
1www.sampledomain.com1.1.1.1
RelatedCommands
iphost5345IPv6ServiceCommands
5.1TunnelCommands
5.1.1interface
CommandPurpose
Usethiscommandtocreateanewtunnelinterface.
Usethenoformofthiscommandtodestroythetunnelinterface.
CommandSyntax
interfacetunnelTUNNEL-ID
nointerfacetunnelTUNNEL-ID
Parameter ParameterDescriptionParameterValue
TUNNEL-ID Thetunnelid 0-1023
CommandMode
GlobalConfiguration
Default
None
Usage
Beforeconnect2IPv6networksbyanIPv4network,atunnelinterfaceisrequired.
Thetunnelisavailableaftersetsomeattributes.AfterIPv6isenabledthetunnel
interfacecanforwardIPv6packets.535Examples
Thisexampleshowshowtocreateatunnelinterface:
Switch#configureterminal
Switch(config)#interfacetunnel1
RelatedCommands
showinterfacetunnel
5.1.2tunnelmode
CommandPurpose
UsethiscommandtospecifytheIPv6transitiontunnelprotocol.
Usethenoformofthiscommandtounsetthetunnelprotocol.
CommandSyntax
tunnelmodetunnelmode(erspan(ecmp-dst-gre|)|gre|ipv6ip)(6to4|isatap|)
notunnelmode
Parameter ParameterDescriptionParameterValue
6to4 Setthetunnelas
automatictunnel6to4,
whichuse2002::/16asits
prefix-
isatap Setthetunnelas
automatictunnelISATAP,
whichuse::5efe:a.b.c.das
itssuffix-
gre Whenthedestinationof
tunnelissingle,themode
ofthetunnel-536ecmp-dst-gre Whenthedestinationsof
tunnelaremulti,themode
ofthetunnel-
CommandMode
InterfaceConfiguration
Default
None
Usage
ThiscommandspecifiesatunnelencapsulationmodeforIPv6inIPv4.Whenthe
keywords6to4orisatapisnotspecified,thenitisamanualtunnel.Tunnelmodeis
notallowedtochangefrom6to4toISATAPwhen6to4relayroutesareconfigured.
Usersshouldunsetthetunneldestinationbeforechangefrommanualtunnelto
automatictunnel.
Examples
Thisexampleshowshowtocreatea6to4Tunnel:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelmodeipv6ip6to4
RelatedCommands
tunnelsource
tunneldestination
5.1.3tunnelsource
CommandPurpose
Usethiscommandtospecifythetunnelsource.Usethenoformofthiscommandto
unsetthetunnelsource.537CommandSyntax
tunnelsource(IP_ADDR|IFNAME)
notunnelsource
Parameter ParameterDescriptionParameterValue
IP_ADDR Specifyatunnelsourcein
theIPv4addressformatIPv4Address
IFNAME Specifyatunnelsourcein
theIFNAMEformat,the
IFNAMEshouldbelayer3
interfaceSupport
physical/aggregation/loopb
ack/vlan/ports
CommandMode
InterfaceConfiguration
Default
None
Usage
Everytunnelmusthaveatunnelsource.IfusersspecifytheIFNAMEformat,system
willchoosetheprimaryaddressastunnelsource.
Examples
Thisexampleshowshowtosetthetunnelsource:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelsource3.3.3.3
RelatedCommands
tunnelmodeipv6ip
tunneldestination5385.1.4tunneldestination
CommandPurpose
UsethiscommandtospecifyatunneldestinationaddressinanIPv4portion.
Usethenoparametertoun-specifytheaddress.
CommandSyntax
tunneldestinationIP_ADDR
notunneldestination
Parameter ParameterDescriptionParameterValue
IP_ADDR Specifythetunnel
destinationIPv4addressIPv4Address
CommandMode
InterfaceConfiguration
Default
None
Usage
Automatictunnelsuchas6to4andISATAPmustnotconfiguretunneldestination.
Examples
Thisexampleshowshowtosetthetunneldestination:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunneldestination4.4.4.4
RelatedCommands
tunnelsource
tunnelmodeipv6ip5395.1.5tunnelenable
CommandPurpose
Usethiscommandtoenabletunneldecapsulationforinterfaces.Usetheformofthis
commandtorestorethedefaultconfiguration.
CommandSyntax
tunnel(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enabletunnel
decapsulation-
disable Disabletunnel
decapsulation-
CommandMode
InterfaceConfiguration
Default
Bydefault,tunneldecapsulationisdisabledonallinterfaces.
Usage
None
Examples
Thisexampleshowshowtoenabletunneldecapsulationoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#tunnelenable
RelatedCommands
interface5405.1.6tunnelecmp-destination
CommandPurpose
UsethiscommandtoconfiguretunnelECMPdestinationsIPaddress.
Usetheformofthiscommandtounsetthisconfiguration.
CommandSyntax
tunnelecmp-destinationIP_ADDR
notunnelecmp-destinationIP_ADDR
Parameter ParameterDescriptionParameterValue
IP_ADDR ECMPdestinationsIP
addressIPv4Address
CommandMode
InterfaceConfiguration
Default
None
Usage
Automatictunnelsuchas6to4andISATAPmustnotconfiguretunneldestination
(multidestination).
Examples
Thisexampleshowshowtoenabletunneldecapsulationoninterfacetunnel1:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelecmp-destination1.1.1.1
Switch(config-if)#tunnelecmp-destination2.2.2.2541RelatedCommands
tunnelsource
tunnelmode(ecmp-dst-gre|)|gre)
5.1.7tunnelgrekey
CommandPurpose
Usethiscommandtoconfigurethetunnelgrekeyvalue.
Usetheformofthiscommandtounsetthisconfiguration
CommandSyntax
tunnelgrekeyKEY_VALUE
notunnelgrekey
Parameter ParameterDescriptionParameterValue
KEY_VALUE grekeyvalue 1-4294967295
CommandMode
InterfaceConfiguration
Default
None
Usage
Improvethesecurityofthegretunnel,configurethegrekeytodothecheckoutof
pointtopoint.
Examples
Thisexampleshowshowtoenabletunneldecapsulationoninterfacetunnel1:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelgrekey100542RelatedCommands
showrunning-configinterfacetunnel
5.1.8tunnelextend-header
CommandPurpose
Beforethemirrortrafficpassesthroughthetunnel,encapsulatethetrafficwiththe
extendheader.
Usenotheformofthiscommandtounsetthisconfiguration.
CommandSyntax
tunnelextend-header
notunnelextend-header
CommandMode
InterfaceConfiguration
Default
None
Usage
spanExtendHeaderCopyHash,usingthenewhashornot;
PacketInfo.skipTimeInfoUpdate,fixedwith1;
ifspanExtendHeaderCopyHashis1,thefiledconsistwithhash(8bit)and0(8bit);if
spanExtendHeaderCopyHashis0,thefiledconsistwithsourceportofthemirror(16bit).
Withoutdst-load-balanceparameter,spanExtendHeaderCopyHashwillbe0,and
extend-headerfielddoesnotcontainthehashvalue;
withdst-load-balanceparameter,spanExtendHeaderCopyHashwillbe1,andextend-
headerfieldcontainthehashvalue.543Examples
Thisexampleshowshowtoenableextend-headerhashforloadbalance:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelextend-header
Switch(config-if)#tunnelextend-headerdst-load-balance
RelatedCommands
showrunning-configinterfacetunnel
5.1.9tunnelextend-headerid
CommandPurpose
Usethiscommandtoconfiguretheextendheaderid.
Usethenoformofthiscommandtounsetthisconfiguration.
CommandSyntax
tunnelextend-headeridID_VALUE
notunnelextend-headeridID_VALUE
Parameter ParameterDescriptionParameterValue
ID_VALUE Theextendheaderid
value1-1023
CommandMode
InterfaceConfiguration
Default
0
Usage
None544Examples
Thisexampleshowshowtoenabletunneldecapsulationoninterfacetunnel1:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelextend-headerid30
RelatedCommands
showrunning-configinterfacetunne
5.1.10tunneldscp
CommandPurpose
UsethiscommandtospecifyavalueofDifferentiatedServicesCodePoint(DSCP)in
thetunnelIPv4encapsulationheader.
Usethenoparametertoinheritingtheunderlyingphysicalinterfacevaluebydefault.
CommandSyntax
tunneldscpDSCP
notunneldscp
Parameter ParameterDescriptionParameterValue
DSCP TheouterIPv4header
DSCPvalue0-63
CommandMode
InterfaceConfiguration
Default
Bydefault,theDSCPvalueisinheritedfromoriginalIPv6packet.
Usage
None545Examples
ThisexampleshowshowtosettheouterIPv4headerDSCPvalueas40:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunneldscp40
RelatedCommands
interface
5.1.11tunnelttl
CommandPurpose
Usethiscommandtospecifyavalueoftimetolive(TTL)inthetunnelIPv4
encapsulationheader.
Usethenoparametertoinheritingtheunderlyingphysicalinterfacevaluebydefault.
CommandSyntax
tunnelttlTTL
notunnelTTL
Parameter ParameterDescriptionParameterValue
TTL TheouterIPv4headerTTL
value1-254
CommandMode
InterfaceConfiguration
Default
Bydefault,theTTLvalueisinheritedfromoriginalIPv6packet.
Usage
None546Examples
ThisexampleshowshowtosettheouterIPv4headerTTLvalueas254:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelttl254
RelatedCommands
interface
5.1.12ipv6mtu
CommandPurpose
UsethiscommandtospecifytheTunnelinterfaceMTU.
Usethenoformofthiscommandtorestoretothedefaultvalue.
CommandSyntax
ipv6mtuMTU
noipv6mtu
Parameter ParameterDescriptionParameterValue
MTU Setthetunnelinterface
MTU1280-9500
CommandMode
InterfaceConfiguration
Default
1480
Usage
SystemdoesnotsupportPathMTUDiscoveryontunnelinterface.Thiscommandis
onlyallowedontunnelinterface.547Examples
ThisexamplesetsthetunnelinterfaceMTUto1280:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#ipv6mtu1280
RelatedCommands
tunnelttl
5.1.13showinterfacetunnel
CommandPurpose
Usethiscommandtodisplaythetunnelinformation.
CommandSyntax
showinterfacetunnelTUNNEL-ID
Parameter ParameterDescriptionParameterValue
TUNNEL-ID Thetunnelid 0-1023
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampledisplaysthetunnelinformation:548Switch#showinterfacetunnel1
Interfacetunnel1
Interfacecurrentstate:UP
HardwareisTunnel
Index8193,Metric1,EncapsulationTUNNEL
VRFbinding:notbound
Tunnelprotocol/transportIPv6/IP,StatusValid
Tunnelsource1.1.1.1(eth-0-1),destination2.2.2.2
TunnelDSCPinherit,TunnelTTL64
TunneltransportMTU1480bytes
RelatedCommands
showipv6interfacetunnel
5.1.14showresourcetunnel
CommandPurpose
Usethiscommandtodisplaythetunnelpeersresourceinformation.
CommandSyntax
showresourcetunnel
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampledisplaysthetunnelpeersresourceinformation:
Switch#showresourcetunnel
Tunnel549Resource UsedCapability
=============================================================
Peers 18
RelatedCommands
None
5.2NDPCommands
5.2.1ipv6neighbor
CommandPurpose
Usethiscommandtoconfigureastaticneighborentry.
Todeletethestaticneighborentry,userthenoformofthiscommand.
CommandSyntax
ipv6neighbor(vrfNAME|)IPV6_ADDRMAC(IFNAME|)
noipv6neighbor(vrfNAME|)IPV6_ADDR(IFNAME|)
Parameter ParameterDescriptionParameterValue
vrfNAME vrfinstancename Stringwithupto15
characters
IPV6_ADDR IPv6addressinX:X::X:X
formatIPv6Address
MAC MACaddressin
HHHH.HHHH.HHHH
formatMACAddress
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
GlobalConfiguration550Default
Bydefault,thereisnotanystaticipv6neighborentryexist.
Usage
Usethiscommandtoconfigureastaticneighborentry.IftheIPv6addressislink-
local,theinterfacenamemustbespecified.
Usingthenoformofthiscommandshouldnotremoveanydynamicneighborentries.
Examples
Thisexampleshowshowtoaddastaticneighborentry:
Switch#configureterminal
Switch(config)#ipv6neighbor2001::10000.0000.0001
Switch(config)#ipv6neighborvrfafe80::10000.0000.0002eth-0-1
RelatedCommands
showipv6neighbors
5.2.2clearipv6neighbors
CommandPurpose
Usethiscommandtoclearthedynamicneighborentries.
CommandSyntax
clearipv6neighbors(vrfNAME|)(interfaceIFNAME|)
clearipv6neighbors(vrfNAME|)IPV6_ADDR(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
vrfNAME vrfinstancename Stringwithupto15
characters
interfaceIFNAME Clearneighborcacheon
theinterfaceSupport
physical/aggregation/loopb
ack/vlan/tunnelports551IPV6_ADDR IPv6addressinX:X::X:X
format.ClearIPv6
neighborcachebyaddressIPv6Address
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoclearthedynamicneighborentries.
Usercancleardynamicipv6addressbyinterfaceoraddress.Ifthespecifiedaddress
islink-local,theinterfaceisrequired.
Examples
Thisexampleshowshowtocleartheneighborentries:
Switch#clearipv6neighbors
RelatedCommands
showipv6neighbors
5.2.3ipv6hop-limit
CommandPurpose
Usethiscommandtosettheipv6hoplimitofthepackets.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6hop-limitHOP_LIMIT
noipv6hop-limit552Parameter ParameterDescriptionParameterValue
hop-limitHOP_LIMIT Hoplimit. 1-255
CommandMode
GlobalConfiguration
Default
Bydefault,thevalueis64.
Usage
ThehoplimitsettingshouldaffectallIPv6packetssendfromthisdevice,unlessthe
hop-limitisoverwrittenbyuplayerapplication,forexample,OSPF,etc.
Examples
Thisexampleshowshowtosetthehoplimit:
Switch#configureterminal
Switch(config)#ipv6hop-limit255
RelatedCommands
None
5.2.4ipv6ndrahop-limit
CommandPurpose
UsethiscommandtosettheCurrenthoplimitinRApackets.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndrahop-limitHOP_LIMIT
noipv6ndrahop-limit553Parameter ParameterDescriptionParameterValue
hop-limitHOP_LIMIT Setcurhoplimit. 0-255
CommandMode
InterfaceConfiguration
Default
Bydefault,thevalueis0.
Usage
None
Examples
ThisexampleshowshowtosettheCurrenthoplimitinRApackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndrahop-limit255
RelatedCommands
None
5.2.5ipv6nddadattempts
CommandPurpose
UsethiscommandtosettheattempttimesofDAD(DuplicateAddressDetect).
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6nddadattemptsDAD_ATTEMPTS
noipv6nddadattempts
Parameter ParameterDescriptionParameterValue554DAD_ATTEMPTS Setattemptsnumber.0-600
CommandMode
InterfaceConfiguration
Default
Bydefault,thevalueis1.
Usage
UsethiscommandtosettheattempttimesofDAD(DuplicateAddressDetect).0
meansDADfeatureisdisabled
Examples
Thisexampleshowshowtosetthedadattempt:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6nddadattempts3
RelatedCommands
None
5.2.6ipv6ndns-interval
CommandPurpose
UsethiscommandtosettheintervalofNSpackets.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndns-intervalNS_INTERVAL
noipv6ndns-interval
Parameter ParameterDescriptionParameterValue555NS_INTERVAL SetIPv6neighbor
solicitationinterval.1000-3600000
milliseconds
CommandMode
InterfaceConfiguration
Default
Bydefault,thevalueis1000
Usage
ThisconfigurationshouldaffecttheintervalofNSpacketduringtheDADperiodor
neighbordiscoveryperiod.
Examples
Thisexampleshowshowtosetthensinterval:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndns-interval2000
RelatedCommands
None
5.2.7ipv6ndrasuppress
CommandPurpose
UsethiscommandtoenabletheRAsuppressfunction.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
ipv6ndrasuppress
noipv6ndrasuppress556CommandMode
InterfaceConfiguration
Default
Bydefault,RAsuppressisenabled.
Usage
WhenRAsuppressfunctionisenabled,noRA/RSpacketshouldbesentfromthis
interfaceevenaRSpacketisreceived.
Examples
ThisexampleshowshowtoenabletheRAsuppressfunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndrasuppress
ThisexampleshowshowtodisabletheRAsuppressfunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6ndrasuppress
RelatedCommands
ipv6ndrainterval
ipv6ndralifetime
5.2.8ipv6ndramtusuppress
CommandPurpose
UsethiscommandtoenabletheRAMTUsuppressfunction.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
ipv6ndramtusuppress557noipv6ndramtusuppress
CommandMode
InterfaceConfiguration
Default
Bydefault,RAMTUsuppressisdisabled.
Usage
WhenRAMTUsuppressfunctionisenabled,noMTUoptionshouldbesentinthe
RApacketsfromthisinterface.
Examples
ThisexampleshowshowtoenabletheRAMTUsuppressfunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndramtusuppress
ThisexampleshowshowtodisabletheRAMTUsuppressfunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6ndramtusuppress
RelatedCommands
None
5.2.9ipv6ndrainterval
CommandPurpose
UsethiscommandtosettheintervaloftheRApackets.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndraintervalMAX(MIN|)558noipv6ndrainterval
Parameter ParameterDescriptionParameterValue
MAX RAmaxinterval(sec).4-1800seconds
MIN RAmininterval(sec).3-1350seconds
CommandMode
InterfaceConfiguration
Default
Bydefault,MAXintervalshouldbe600second;MINintervalshouldbe0.33*MAX.
Usage
Thevalidrangeshouldbebetween4and1800secondforthemaxvalue.Thevalid
rangeshouldbebetween3and0.75*MAXfortheminimumvalue.
Iftheminimumvalueisnotspecified,itshouldbe0.33*MAXwhenMAX>=9,andit
shouldbeequaltotheMAXwhenMAX<9.
Examples
ThisexampleshowshowtosettheRAinterval:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndrainterval300
RelatedCommands
ipv6ndrasuppress
ipv6ndralifetime
5.2.10ipv6ndralifetime
CommandPurpose
UsethiscommandtosetthelifetimeoftheRApackets.559Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndralifetimeLIFE_TIME
noipv6ndralifetime
Parameter ParameterDescriptionParameterValue
LIFE_TIME SetIPv6router
advertisementlifetime.0-9000seconds
CommandMode
InterfaceConfiguration
Default
Bydefault,RAlifetimeis3*MAXRAinterval.
Usage
None
Examples
Thisexampleshowshowtosettheralifetime:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndralifetime1000
RelatedCommands
ipv6ndrasuppress
ipv6ndrainterval5605.2.11ipv6ndreachable-time
CommandPurpose
Usethiscommandtosetreachabletimeoftheneighborentries.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndreachable-timeREACHABLE_TIME
noipv6ndreachable-time
Parameter ParameterDescriptionParameterValue
REACHABLE_TIME Reachablitytimein
milliseconds.0-3600000milliseconds
CommandMode
InterfaceConfiguration
Default
Bydefault,thevalueis30000ms
Usage
Areachabletime0meanstorestorethedefaultvalue30000.
Afterthereachabletimeexpired,theneighborentrieswhichstateisREACHshould
changetoSTALE.
Examples
Thisexampleshowshowtosetthereachabletime:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndreachable-time3600000561RelatedCommands
None
5.2.12ipv6ndmanaged-config-flag
CommandPurpose
UsethiscommandtosetManagedaddressconfigurationflag.
Tounsetthisconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndmanaged-config-flag
noipv6ndmanaged-config-flag
CommandMode
InterfaceConfiguration
Default
Bydefault,theManagedaddressconfigurationisnotset.
Usage
None
Examples
ThisexampleshowshowtosettheManagedaddressconfigurationflag:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndmanaged-config-flag
RelatedCommands
ipv6ndother-config-flag5625.2.13ipv6ndother-config-flag
CommandPurpose
UsethiscommandtosettheOtherconfigurationflag.
Tounsetthisconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6ndother-config-flag
noipv6ndother-config-flag
CommandMode
InterfaceConfiguration
Default
Bydefault,theOtherconfigurationflagisnotset.
Usage
None
Examples
ThisexampleshowshowtosettheOtherconfigurationflag:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndother-config-flag
RelatedCommands
ipv6ndmanaged-config-flag
5.2.14ipv6ndprefix
CommandPurpose
Usethiscommandtosetprefixforrouteadvertise(RA).563Tounsetaprefixtoadvertise,usethenoformofthiscommand.
CommandSyntax
ipv6ndprefixIPv6_PREFIX(VALID_TIME|infinite)(PERFERRED_TIME|infinite)
({off-link|no-autoconfig}|)
noipv6ndprefixIPv6_PREFIX
ipv6ndprefixdefault(VALID_TIME|infinite)(PERFERRED_TIME|infinite)({off-
link|no-autoconfig}|)
noipv6ndprefixdefault
Parameter ParameterDescriptionParameterValue
IPv6_PREFIX ConfigureIPv6routing
prefixadvertisement.IPv6
prefixinX:X::X:X/MformatIPv6Addressandmask
length
VALID_TIME Validlifetime. 0-4294967295second
PERFERRED_TIME Preferredlifetime. 0-4294967295second
CommandMode
InterfaceConfiguration
Default
Thevalidrangeofvalidlifetimeshouldbebetween0and4294967295seconds.
Usercanalsousethekeywordinfinitetoindicatethevalue
4294967295(0xFFFFFFFF.Thedefaultvalueshouldbe2592000seconds(30
days).
Thevalidrangeofpreferredlifetimeshouldbebetween0and4294967295seconds.
Usercanalsousethekeywordinfinitetoindicatethevalue4294967295
0xFFFFFFFF.Thedefaultvalueshouldbe604800seconds(7days).
Usage
None564Examples
Thisexampleshowshowtosettheprefix:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ndprefix2001::1/6430003000
RelatedCommands
showipv6interfaceIFNAMEprefix
5.2.15showipv6interfaceIFNAMEprefix
CommandPurpose
Usethiscommandtoshowtheprefixforrouteadvertise(RA)onthespecified
interface.
CommandSyntax
showipv6interfaceIFNAMEprefix
Parameter ParameterDescriptionParameterValue
IFNAME Nameoftheinterfaceto
showSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None565Examples
Thisexampleshowstheresultofthiscommand:
Switch#showipv6interfaceeth-0-1prefix
RelatedCommands
ipv6ndprefix
5.2.16showipv6neighbors
CommandPurpose
Usethiscommandtoshowallipv6neighborentries.
CommandSyntax
showipv6neighbors(dynamic|static|interfaceIFNAME|IPV6_ADDR|statistics|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Nameoftheinterfaceto
showSupport
physical/aggregation/loopb
ack/vlan/tunnelports
IPV6_ADDR IPv6addressinX:X::X:X
formatIPv6Address
CommandMode
PrivilegedEXEC
Default
None
Usage
Neighborentriesshouldbeabletoshowglobally,byinterface,orbyprefix.Dynamic
andstaticentriescanbedisplayedseparately.566Examples
Thisexampleshowstheresultofthiscommand:
Switch#showipv6neighbors
IPv6address AgeLink-LayerAddrStateInterface
2001::2 740f2.fd60.ac00REACHeth-0-9
fe80::42f2:fdff:fe60:ac00 640f2.fd60.ac00STALEeth-0-9
RelatedCommands
ipv6neighbor
5.2.17debugipv6nd
CommandPurpose
Usethiscommandtoopenthedebugofipv6NDfeature.
Toclosethedebugofipv6NDfeature,usethenoformofthiscommand.
CommandSyntax
debugipv6nd(packet|events|error|dump|info|all)
nodebugipv6nd(packet|events|error|dump|info|all)
Parameter ParameterDescriptionParameterValue
packet IPv6NDpacket -
events IPv6NDevents -
error IPv6NDErrormessage-
dump Dumpmessageinhex
format-
info IPv6NDinformation -
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC567Default
Bydefault,theipv6nddebugisclosed.
Usage
None
Examples
Thisexampleshowshowtoopentheipv6NDdebug:
Switch#debugipv6ndall
Switch#terminalmonitor
RelatedCommands
None
5.3DHCPv6RelayCommands
5.3.1dhcpv6relay
CommandPurpose
ToenabletheDHCPv6relayservice,usethedhcpv6relaycommandinglobal
configurationmode.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
dhcpv6relay
nodhcpv6relay
CommandMode
GlobalConfiguration568Default
DHCPv6relayisdisabled.
Usage
TheDHCPv6servicemustbeenabledwiththedhcpv6servicecommandbefore
DHCPv6relayservicecanbeused.
Examples
ThefollowingexampleshowshowtoenableDHCPv6relayagent:
Switch#configureterminal
Switch(config)#dhcpv6relay
RelatedCommands
servicedhcpv6
5.3.2dhcpv6-server(global)
CommandPurpose
TocreateaDHCPv6servergroup,usethedhcpv6-servercommandinglobal
configurationmode.
ToremoveaDHCPv6servergroup,usethenoformofthiscommand.
CommandSyntax
dhcpv6-serverNUMBERIPV6_ADDRinterfaceIFNAME
nodhcpv6-serverNUMBER(IPV6_ADDR(interfaceIFNAME|)|)
Parameter ParameterDescriptionParameterValue
NUMBER NumberoftheDHCPv6
servergroup.Therangeis
from1to161-16569IPV6_ADDR TheIPv6addresslistof
theDHCPv6server.The
rangeinnumberofthe
serversinalistis1to8IPv6address
IFNAME Thenameofsupported
interfaceSupport
physical/aggregation/vlan
ports
CommandMode
GlobalConfiguration
Default
NoDHCPv6servergroupisdefined.
Usage
ThiscommandisusedtospecifytheremoteDHCPv6server.
Examples
Thefollowingexampleshowshowtoconfiguredhcpv6-servergroupglobally:
Switch#configureterminal
Switch(config)#dhcpv6-server12001:1::1
Switch(config)#dhcpv6-server1fe80::1interfacevlan1
RelatedCommands
servicedhcpv6
dhcpv6-server(interface)
5.3.3dhcpv6-server(interface)
CommandPurpose
ToaddaninterfaceintoaDHCPv6servergroup,usethedhcpv6-servercommandin
interfaceconfigurationmode.570ToremovethisinterfacefromtheDHCPv6servergroup,usethenoformofthis
command.
CommandSyntax
dhcpv6-serverNUMBER
nodhcpv6-server
Parameter ParameterDescriptionParameterValue
NUMBER NumberoftheDHCPv6
servergroup.1-16
CommandMode
InterfaceConfiguration
Default
NoDHCPv6servergroupisconfiguredfortheinterface.
Usage
ThiscommandisusedtospecifyDHCPv6servergroupwhichisconfigedbythe
commanddhcpv6-serveringlobalmode.
Examples
Thefollowingexampleshowshowtoconfiguredhcpv6-servergroupforinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpv6-server1
RelatedCommands
servicedhcpv65715.3.4dhcpv6relayremote-idoption
CommandPurpose
Toenableremote-idoption,usethedhcpv6relayremote-idoptioncommandinglobal
configurationmode.
Todisableremote-idoption,usethenoformofthiscommand.
CommandSyntax
dhcpv6relayremote-idoption
nodhcpv6relayremote-idoption
CommandMode
GlobalConfiguration
Default
Remote-idoptionisnotaddedintoDHCPv6RELAY_FORWpacketsentbyrelay.
Usage
None
Examples
Thefollowingexampleshowshowtoenableremote-idoption:
Switch#configureterminal
Switch(config)#dhcpv6relayremote-idoption
RelatedCommands
dhcpv6relayremote-idformat5725.3.5dhcpv6relayremote-idformat
CommandPurpose
Tospecifytheformatofremote-id,usethedhcpv6relayremote-idformatcommand
inglobalconfigurationmode.Torestorethedefaultformat,usethenoformofthis
command.
CommandSyntax
dhcpv6relayremote-idformat{vlan|ifname|duid}
nodhcpv6relayremote-idformat
Parameter ParameterDescriptionParameterValue
vlan TheIDofthevlanattached
byclient-
ifname Thenameoftheinterface
receivedpacketfromclient-
duid Theduidofrelay -
CommandMode
GlobalConfiguration
Default
Theremote-idformatisduid:ifname:.
Usage
Theformatofremote-idcanbeacombinationofvlan,interfacename,DUID.This
commandspecifiestheexistingkeywordsinthecombination.
Examples
Thefollowingexampleshowshowtospecifytheformatofremote-id:573Switch#configureterminal
Switch(config)#dhcpv6relayremote-idformatvlan
RelatedCommands
dhcpv6relayremote-idoption
5.3.6dhcpv6relaypdroute
CommandPurpose
Toenablelearningroutefromprefix-delegationoption,usethedhcpv6relaypdroute
commandinglobalconfiguration.
Todisablethefunction,usethenoformofthiscommand.
CommandSyntax
dhcpv6relaypdroute
nodhcpv6relaypdroute
CommandMode
GlobalConfiguration
Default
TheDHCPv6relaywontlearnprefix-delegationroute.
Usage
TheDHCPv6relaycanlearnroutefromprefixdelegatedbyservertoclient.Thiskind
ofrouteshouldnotreplacestaticone.Usethiscommandtoenablethisfunction.
Examples
Thefollowingexampleshowshowtoenablelearningroutefromprefix-delegation
option:
Switch#configureterminal
Switch(config)#dhcpv6relaypdroute574RelatedCommands
cleardhcpv6relaypdroute
dhcpv6relaypdroutedistance
5.3.7dhcpv6relaypdroutedistance
CommandPurpose
Toconfigurethedefaultdistanceforroutelearnedbyrelay,usethedhcpv6relaypd
routedistancecommandinglobalconfiguration.
Torestorethedefaultvalue,usethenoformofthiscommand..
CommandSyntax
dhcpv6relaypdroutedistanceDISTANCE
nodhcpv6relaypdroutedistance
Parameter ParameterDescriptionParameterValue
DISTANCE Thedefaultdistancefor
routelearnedbyrelay1-255
CommandMode
GlobalConfiguration
Default
Thedefaultvalueofdistanceis254.
Usage
Usethiscommandtoconfigurethedistanceoftheroutelearnedbyrelayfromprefix-
delegation.575Examples
Thefollowingexampleshowshowtoconfigurethedistanceofrouteaddedby
DHCPv6relay:
Switch#configureterminal
Switch(config)#dhcpv6relaypdroutedistance233
RelatedCommands
dhcpv6relaypdroute
5.3.8servicedhcpv6
CommandPurpose
ToenabletheDynamicHostConfigurationProtocol(DHCP)V6relayagentfeatures
onyourrouter,usetheservicedhcpv6commandinglobalconfigurationmode.
TodisabletheDHCPv6relayagentfeatures,usethenoformofthiscommand.
CommandSyntax
servicedhcpv6enable
servicedhcpv6disable
CommandMode
GlobalConfiguration
Default
DHCPv6serviceisdisabledglobally.
Usage
OnlythemainDHCPv6serviceisenabledbytheservicedhcpv6command,other
DHCPv6servicescouldbeused,suchasdhcpv6relay.
Examples
ThefollowingexampleshowshowtoenableDHCPv6serviceglobally:576Switch#configureterminal
Switch(config)#servicedhcpv6enable
RelatedCommands
dhcpv6relay
5.3.9debugdhcpv6relay
CommandPurpose
UsethiscommandtoturnonthedebugswitchesofDHCPv6relaymodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debugdhcpv6relay(events|error|dump|packet|all)
nodebugdhcpv6relay(events|error|dump|packet|all)
Parameter ParameterDescriptionParameterValue
events Relayevents -
error ErrorDHCPmessage -
packet DHCPmessagefields-
dump Dumpmessageinhex
format-
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC
Default
None577Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopendhcpv6relaydebugswitches:
Switch#debugdhcpv6relayall
RelatedCommands
terminalmonitor
showloggingbuffer
5.3.10showdhcpv6-server
CommandPurpose
TodisplaytheDHCPv6servergroups,usetheshowdhcpv6-servercommandin
privilegedEXECmode.
CommandSyntax
showdhcpv6-server
CommandMode
PrivilegedEXEC
Default
None578Usage
ThiscommandisusedtodisplayalltheDHCPv6servergroupsconfiguredwith
commanddhcpv6-serveringlobalmode.
Examples
Thefollowingexampleshowshowtodisplaydhcpv6-servergroupinformation:
Switch#showdhcpv6-server
DHCPv6servergroupinformation:
============================================================
group1ipv6addresslist:
[1]2001:1::1
RelatedCommands
dhcpv6-server(global)
5.3.11showdhcpv6relayinterfaces
CommandPurpose
Todisplaytowhichdhcpv6-servergrouptheinterfacebelongs,usetheshowdhcpv6
relayinterfacescommandinprivilegedEXECmode.
CommandSyntax
showdhcpv6relayinterfaces
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheinterfacewhichisconfinedDHCPv6relay.579Examples
Thefollowingexampleshowshowtodisplaydhcpv6relayinterfacesinformation:
Switch#showdhcpv6relayinterfaces
ListofDHCPv6relayenabledinterface(s):
DHCPv6relayservicestatus:enabled
InterfaceNameDHCPv6servergroup
============================================================
eth-0-1 1
RelatedCommands
showdhcpv6-server
5.3.12showdhcpv6relaypdclient
CommandPurpose
TodisplaytheresultofDHCPv6relaysprefix-delegationroutefunction,usetheshow
dhcpv6relaypdclientcommandinprivilegedEXECmode.
CommandSyntax
showdhcpv6relaypdclient
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayinformationofprefix-delegationroute:580Switch#showdhcpv6relaypdclient
DHCPv6prefix-delegationclientinformation:
============================================================
Interface:vlan2
ClientDUID:0001000117e9357b606da182030
ClientIPv6address:fe80::626d:a1ff:fe82:300
IAID:a18230
IAPrefix:2002:2:10::/64
prefered/maxlifetime:280/300
expiredtime:2012-09-1711:43:59
============================================================
RelatedCommands
dhcpv6relaypdroute
dhcpv6relaypdroutedistance
5.3.13showdhcpv6relaystatistics
CommandPurpose
TodisplaythestatisticsofDHCPv6packetsrelayedbytheswitch,usetheshow
dhcpv6relaystatisticscommandinprivilegedEXECmode.
CommandSyntax
showdhcpv6relaystatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaydetailDHCPv6statisticswhichprocessedbythe
switch.581Examples
ThefollowingexampleshowshowtodisplayDHCPv6relaystatistics:
Switch#showdhcpv6relaystatistics
DHCPv6relaypacketstatistics:
============================================================
Clientrelayedpackets:48
Serverrelayedpackets:48
Clienterrorpackets:0
Servererrorpackets:0
RelatedCommands
cleardhcpv6relaystatistics
5.3.14cleardhcpv6relaystatistics
CommandPurpose
ToresetthestatisticsofDHCPv6packetsrelayedbytheswitch,usethecleardhcpv6
relaystatisticscommandinprivilegedEXECmode.
CommandSyntax
cleardhcpv6relaystatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtoresetDHCPv6statistics.
Examples
ThefollowingexampleshowshowtoclearDHCPv6relaystatistics:582Switch#cleardhcpv6relaystatistics
RelatedCommands
showdhcpv6relaystatistics
5.3.15cleardhcpv6relaypdroute
CommandPurpose
TocleartheroutelearnedbyDHCPv6relayfromprefix-delegation,usetheclear
dhcpv6relaypdroutecommandinprivilegedEXECmode.
CommandSyntax
cleardhcpv6relaypdroute(prefixPREFIX|)(interfaceIFNAME|)(IPV6_ADDR|)
Parameter ParameterDescriptionParameterValue
PREFIX Theprefixdelegatedto
clientIPv6Addressandmask
lengthinX:X::X:X/M
format
IPV6_ADDR TheIPv6addressofPD
clientIPv6Address
IFNAME Thenameofsupported
interfaceSupport
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnoparameterisspecified,allroutewillbecleared.583Examples
ThefollowingexampleshowshowtoclearroutelearnedbyDHCPv6relay:
Switch#cleardhcpv6relaypdrouteinterfaceeth-0-1
RelatedCommands
dhcpv6relaypdroute
showdhcpv6relaypdclient5846IPRoutingCommands
6.1IPUnicast-RoutingCommands
6.1.1ipaddress
CommandPurpose
TosetaprimaryorsecondaryIPaddressforaninterface,usetheipaddress
commandininterfaceconfigurationmode.ToremoveanIPaddressordisableIP
processing,usethenoformofthiscommand.
CommandSyntax
ipaddress(ADDRESSWILDCARD-MASK|ADDRESS/PREFIX-LENGTH)
(secondary|)
Parameter ParameterDescriptionParameterValue
ADDRESS IPv4addressofthe
interfaceIPv4address
WILDCARD-MASK MaskfortheassociatedIP
subnetMaskinIPv4address
format
PREFIX-LENGTH Prefixlengthofthe
address1-32
secondary (Optional)Specifiesthat
theconfiguredaddressisa
secondaryIPaddress.If
thiskeywordisomitted,
theconfiguredaddressis
theprimaryIPaddress-585CommandMode
InterfaceConfiguration
Default
NoIPaddressisdefinedfortheinterface.
Usage
AninterfacecanhaveoneprimaryIPaddressandmultiplesecondaryIPaddresses.
PacketsgeneratedbytheswitchalwaysusetheprimaryIPaddress.Therefore,all
switchesandaccessserversonasegmentshouldsharethesameprimarynetwork
number.
HostscandeterminesubnetmasksusingtheInternetControlMessageProtocol
(ICMP)maskrequestmessage.SwitchrespondtothisrequestwithanICMPmask
replymessage.
YoucandisableIPprocessingonaparticularinterfacebyremovingitsIPaddress
withthenoipaddresscommand.Ifthesoftwaredetectsanotherhostusingoneofits
IPaddresses,itwillprintanerrormessageontheconsole.
Theoptionalsecondarykeywordallowsyoutospecifyupto8secondaryaddresses.
Secondaryaddressesaretreatedlikeprimaryaddresses,exceptthesystemnever
generatesdatagramsotherthanroutingupdateswithsecondarysourceaddresses.
IPbroadcastsandAddressResolutionProtocol(ARP)requestsarehandledproperly,
asareinterfaceroutesintheIProutingtable.
SecondaryIPaddressescanbeusedinavarietyofsituations.Thefollowingarethe
mostcommonapplications:
Theremaynotbeenoughhostaddressesforaparticularnetworksegment.For
example,yoursubnetallowsupto254hostsperlogicalsubnet,butononephysical
subnetyouneed300hostaddresses.UsingsecondaryIPaddressesontheswitches
oraccessserversallowsyoutohavetwologicalsubnetsusingonephysicalsubnet.
ManyoldernetworkswerebuiltusingLevel2bridges.Thejudicioususeof
secondaryaddressescanaidinthetransitiontoasubnetandrouter-basednetwork.
Switchesonanolder,bridgedsegmentcanbeeasilymadeawarethatmanysubnets
areonthatsegment.586Twosubnetsofasinglenetworkmightotherwisebeseparatedbyanothernetwork.
Thissituationisnotpermittedwhensubnetsareinuse.Intheseinstances,thefirst
networkisextended,orlayeredontopofthesecondnetworkusingsecondary
addresses.
Examples
Inthefollowingexample,10.108.1.27istheprimaryaddressand192.31.7.17and
192.31.8.17aresecondaryaddressesforeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipaddress10.108.1.27255.255.255.0
Switch(config-if)#ipaddress192.31.7.17/24secondary
Switch(config-if)#ipaddress192.31.8.17255.255.255.0secondary
RelatedCommands
None
6.1.2ipicmperror-interval
CommandPurpose
TosettheintervalofICMPerrormessagesgeneratedbytheswitch,usetheipicmp
error-intervalcommandinglobalconfigurationmode.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
ipicmperror-intervalINTERVAL
noipicmperror-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Theintervalin
milliseconds.0-2147483647
milliseconds
CommandMode
GlobalConfiguration587Default
Defaultis1000milliseconds.
Usage
None
Examples
Inthefollowingexample,usersetstheerrorintervalto10seconds,whichmeans
onlyoneICMPerrormessagewasgeneratedper10seconds:
Switch#configureterminal
Switch(config)#ipicmperror-interval10000
RelatedCommands
ipredirects
ipunreachables
6.1.3ipredirects
CommandPurpose
ToenablesendtheICMPredirectmessagesgeneratedbytheswitch,usetheip
redirectscommandininterfaceconfigurationmode.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ipredirects
noipredirects
CommandMode
InterfaceConfiguration
Default
IPredirectisenabledbydefault.588Usage
None
Examples
Inthefollowingexample,usersdisabletosendtheICMPredirectmessage:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.10.10.1/24
Switch(config-if)#noipredirects
RelatedCommands
ipunreachables
ipicmperror-interval
6.1.4ipunreachables
CommandPurpose
ToenablesendtheICMPunreachablemessagesgeneratedbytheswitch,usetheip
unreachablescommandininterfaceconfigurationmode.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
ipunreachables
noipunreachables
CommandMode
InterfaceConfiguration
Default
IPunreachableisenabledbydefault.589Usage
None
Examples
Inthefollowingexample,usersdisabletosendtheICMPunreachablemessage:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.10.10.1/24
Switch(config-if)#noipunreachables
RelatedCommands
ipredirects
ipicmperror-interval
6.1.5ipverifyunicastreverse-path
CommandPurpose
ToenableRPFchecktotheinterface,usethecommandipverifyunicastreverse-
pathininterfaceconfigurationmode.Torestorethedefaultvalue,usethenoformof
thiscommand.
CommandSyntax
ipverifyunicastreverse-path
noipverifyunicastreverse-path
CommandMode
InterfaceConfiguration
Default
RPFcheckisdisabledbydefault.590Usage
None
Examples
Inthefollowingexample,usersenableRPFcheckininterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.10.10.1/24
Switch(config)#ipverifyunicastreverse-path
RelatedCommands
ipredirects
ipicmperror-interval
6.1.6unicastreverse-pathcheck-type(strict|loose(allow-
default-route|))
CommandPurpose
UsethiscommandtoconfigureRPFchecktypetotheinterfaceininterface
configurationmode.Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
unicastreverse-pathcheck-type(strict|loose(allow-default-route|))
nounicastreverse-pathcheck-type
CommandMode
InterfaceConfiguration
Default
RPFcheck-typeisstrictbydefault.591Usage
RPFcheck-typetakeseffortforbothipv4andipv6.
Examples
Inthefollowingexample,usersconfigureRPFcheck-typelooseininterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config)#unicastreverse-pathcheck-typeloose
RelatedCommands
None
6.1.7router-id(global)
CommandPurpose
TouseafixedrouterIDforallroutingprotocols,usetherouter-idcommandinglobal
configurationmode.ToletswitchselecttherouterIDautomatically,usethenoform
ofthiscommand.
CommandSyntax
router-idIP-ADDRESS
norouter-id
Parameter ParameterDescriptionParameterValue
IP-ADDRESS RouterIDinIPaddress
formatIPv4address
CommandMode
GlobalConfiguration
Default
NorouterIDisdefined.592Usage
YoucanconfigureanarbitraryvalueintheIPaddressformatforeachswitch.
However,eachrouterIDmustbeunique.
Examples
Thefollowingexamplespecifiesafixedrouter-id:
Switch#configureterminal
Switch(config)#router-id1.1.1.1
RelatedCommands
router-id(router)
6.1.8iproute
CommandPurpose
Toestablishstaticroutes,usetheiproutecommandinglobalconfigurationmode.To
removestaticroutes,usethenoformofthiscommand.
CommandSyntax
iproute(PREFIXMASK|PREFIX/PREFIX-LENGTH)(NH-ADDRESS|vrfVRF-
NAMENH-ADDRESS|IFNAME|REMOTE-VTEP)(DISTANCE|)(bindbfdBFD-
NAME|trackNUMBER|)
noiproute(PREFIXMASK|PREFIX/PREFIX-LENGTH)((vrfVRF-NAME|)NH-
ADDRESS|IFNULL|)(bindbfd|track|)
noiproute(PREFIXMASK|PREFIX/PREFIX-LENGTH)(IFTUNNEL|REMOTE-
VTEP)
Parameter ParameterDescriptionParameterValue
VRF-NAME VRFinstancename Astringupto16
characters
PREFIX IProuteprefixforthe
destinationIPv4address593MASK Prefixmaskforthe
destinationMaskinIPv4address
format
PREFIX-LENGTH Prefixlengthforthe
destination1-32
NH-ADDRESS IPaddressofthenexthop
thatcanbeusedtoreach
thatnetworkIPv4address
IFNAME Interfacenameofthenext
hopthatcanbeusedto
reachthatnetwork-
IFTUNNEL tunnelport -
IFNULL NULL0port -
REMOTE-VTEP Overlaytunnelofthenext
hopthatcanbeusedto
reachthatnetwork.remote-vtepindex
DISTANCE (Optional)An
administrativedistance.
Thedefaultadministrative
distanceforastaticroute
is11-255
BFD-NAME SpecifythenameofbfdAstringupto16
characters
trackNUMBER SpecifytheIDoftrack
object1-500
CommandMode
GlobalConfiguration
Default
Nostaticroutesareestablished.594Usage
Theestablishmentofastaticrouteisappropriatewhentheswitchcannotdynamically
buildaroutetothedestination.
Examples
Thefollowingexampleestablishesastaticroute:
Switch#configureterminal
Switch(config)#iproute172.31.0.0255.255.0.0172.31.6.6
Thefollowingexampleestablishesastaticroutewhichnexthopisblackhole:
Switch#configureterminal
Switch(config)#iproute10.1.1.1/32null0
RelatedCommands
showiproute
6.1.9showiproute
CommandPurpose
Todisplaythecurrentstateoftheroutingtable,usetheshowiproutecommandin
userEXECorprivilegedEXECmode.
CommandSyntax
showiproute(VRFNAME|)(IP-ADDRESS|PREFIX/PREFIX-LENGTH|
PROTOCOL|)
Parameter ParameterDescriptionParameterValue
VRFNAME VRFinstancename Astringupto15
characters
IP-ADDRESS (Optional)Addressabout
whichroutinginformation
shouldbedisplayedIPv4address
PREFIX IProuteprefix IPv4address595PREFIX-LENGTH Prefixlengthfortheroute1-32
PROTOCOL (Optional)Thenameofa
routingprotocol,orthe
keywordconnected,static,
orsummary.Ifyouspecify
aroutingprotocol,useone
ofthefollowingkeywords:
bgp,ospf,andrip.bgp/connected/isis/ospf/rip
/static
CommandMode
PrivilegedEXEC
Default
None
Usage
Youcandisplayallactivedynamicandstaticrouteswithboththeshowiprouteand
showiproutestaticcommandsaftertheseactiveroutesareaddedinthemain
routingtable.
Examples
Thefollowingissampleoutputfromtheshowiproutecommandwhenentered
withoutanaddress:
Switch#showiproute
Codes:K-kernel,C-connected,S-static,R-RIP,B-BGP
O-OSPF,IA-OSPFinterarea
N1-OSPFNSSAexternaltype1,N2-OSPFNSSAexternaltype2
E1-OSPFexternaltype1,E2-OSPFexternaltype2
[*]-[AD/Metric]
*-candidatedefault
O1.1.1.0/24[110/2]via10.10.1.1,eth-0-23,00:34:17
O2.2.2.0/24[110/3]via10.10.1.1,eth-0-23,00:17:26
C10.10.1.0/24isdirectlyconnected,eth-0-23
C10.10.1.23/32isinlocalloopback,eth-0-23
O10.10.2.0/24[110/2]via10.10.1.1,eth-0-23,00:17:26
O10.10.3.0/24[110/3]via10.10.1.1,eth-0-23,00:17:26596RelatedCommands
iproute
showiproutedatabase
6.1.10showiproutedatabase
CommandPurpose
TodisplaytheRoutingInformationBase(RIB),usetheshowiproutedatabase
commandinuserEXECorprivilegedEXECmode.
CommandSyntax
showiproutedatabase(VRFNAME|)(PROTOCOL|)
Parameter ParameterDescriptionParameterValue
VRFNAME VRFinstancename Astringupto15
characters
PROTOCOL (Optional)Thenameofa
routingprotocol,orthe
keywordconnected,static,
orsummary.Ifyouspecify
aroutingprotocol,useone
ofthefollowingkeywords:
bgp,ospf,andrip.bgp/connected/isis/ospf/rip
/static
CommandMode
PrivilegedEXEC
Default
None597Usage
Youcandisplayallactivedynamicandstaticrouteswithboththeshowiproute
databaseandshowiproutedatabasestaticcommandsaftertheseactiveroutesare
addedintheRoutingInformationBase(RIB).
Examples
Thefollowingissampleoutputfromtheshowiproutedatabasecommand:
Switch#showiproutedatabase
Codes:K-kernel,C-connected,S-static,R-RIP,B-BGP
O-OSPF,IA-OSPFinterarea
N1-OSPFNSSAexternaltype1,N2-OSPFNSSAexternaltype2
E1-OSPFexternaltype1,E2-OSPFexternaltype2
[*]-[AD/Metric]
>-selectedroute,*-FIBroute,p-staleinfo
O*>1.1.1.0/24[110/2]via10.10.1.1,eth-0-23,00:48:58
O*>2.2.2.0/24[110/3]via10.10.1.1,eth-0-23,00:32:07
S6.6.6.0/24[1/0]via3.3.3.3inactive
C*>10.10.1.0/24isdirectlyconnected,eth-0-23
C*>10.10.1.23/32isinlocalloopback,eth-0-23
O*>10.10.2.0/24[110/2]via10.10.1.1,eth-0-23,00:32:07
O*>10.10.3.0/24[110/3]via10.10.1.1,eth-0-23,00:32:07
RelatedCommands
iproute
showiproute
6.1.11showipprotocols
CommandPurpose
Todisplaytheparametersandcurrentstateoftheactiveroutingprotocolprocess,
usetheshowipprotocolscommandinprivilegedEXECmode.
CommandSyntax
showipprotocols(vrfNAME|)(PROTOCOL|)
Parameter ParameterDescriptionParameterValue598VRFNAME VRFinstancename Astringupto15
characters
PROTOCOL (Optional)Thenameofa
routingprotocol.Ifyou
specifyaroutingprotocol,
useoneofthefollowing
keywords:bgp,ospf,isis
andrip.bgp/ospf/rip/isis
CommandMode
PrivilegedEXEC
Default
None
Usage
Theinformationdisplayedbytheshowipprotocolscommandisusefulindebugging
routingoperations.InformationintheRoutingInformationSourcesfieldoftheshowip
protocolsoutputcanhelpyouidentifyaswitchsuspectedofdeliveringbadrouting
information.
Examples
Thefollowingissampleoutputfromtheshowipprotocolscommand:
Switch#showipprotocols
RoutingProtocolis"ospf0"
Redistributing:
RoutingforNetworks:
3.3.3.0/24
10.10.1.0/24
10.10.4.0/24
Distance:(defaultis110)
RelatedCommands
showiproute5996.1.12showiproutesummary
CommandPurpose
Todisplaythetotalroutecountanddifferenttypesofroutecount,usetheshowip
routesummarycommandinprivilegedEXECmode.
CommandSyntax
showiproute(vrfNAME|)summary
Parameter ParameterDescriptionParameterValue
VRFNAME VRFinstancename Astringupto15
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowiproutesummarycommand:
Switch#showiproutesummary
IProutingtablenameisDefault-IP-Routing-Table(0)
IProutingtablemaximum-pathsis8
Routesourcenetworks
connected2
static1
Total3
RelatedCommands
showiproute6006.1.13showiprouteadd-fib-fail
CommandPurpose
Usethiscommandtodisplaytherouteswhichcannotforwardpacketbecauseof
TCAMresourcefull.Usetheshowiprouteadd-fib-failcommandinprivilegedEXEC
mode.
CommandSyntax
showiprouteadd-fib-fail(count|)
Parameter ParameterDescriptionParameterValue
count numberofadd-fib-failroute
entries-
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifbothofthecommandlineshowiprouteandshowiprouteadd-fib-filecould
showthesameroute.Itrepresentsthattherouteisnotabletoinsetintothe
ForwardingInformationTable(FIB)duetotheharewareresourcelimit,thisrouteis
notabletoforwardanypackets.Youcoulddeleteandreconfigurethisroutingwhen
somehardwareresourceisfree.
Examples
Thefollowingissampleoutputfromtheshowiprouteadd-fib-failcommand:
Switch#showiprouteadd-fib-fail
======================================
VRF Route
default1.1.1.1/32601default1.1.1.0/24
test 2.2.2.2/32
test 2.2.2.0/24
RelatedCommands
showiproute
6.1.14max-static-routes
CommandPurpose
Toconfigurethemaximumstaticroutesinsystem,usethemax-static-routes
commandinglobalconfigurationmode.Toconfigurethemaximumstaticroutesto
defaultvalue,usethenoformofthiscommand.
CommandSyntax
max-static-routesCOUNT
nomax-static-routesCOUNT
Parameter ParameterDescriptionParameterValue
COUNT maximumstaticroutesin
systemTherangeis<1-65535>,
defaultvalueis1024
CommandMode
GlobalConfiguration
Default
1024
Usage
Usersshouldnotconfigurethemaximumstaticroutesmorethansystemprofileof
FIB.Also,usersshouldnotconfigurethemaximumstaticrouteslessthanthecurrent
staticroutescount.602Examples
Thefollowingexampledisplayshowtochangemaximumstaticroutesto10:
Switch#confiterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#max-static-routes10
RelatedCommands
showiproutesummary
6.1.15showresourcefib
CommandPurpose
Usethiscommandtodisplaytheresourcesusedbyroutes.
CommandSyntax
showresourcefib
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcefibcommand:
Switch#showresourcefib
RIBFIB
Resource UsedCapability
=============================================================
IndirectRoutes 38192
HostRoutes 14096603StaticRoutes 01024
IPv6Indirectroutes01536
IPv6Hostroutes 04096
IPv6Staticroutes 01024
L3Vlaninterfaces 0256
RelatedCommands
showiproutesummary
6.1.16ecmpload-balance-modedynamic
CommandPurpose
Usethiscommandtoconfigureecmpdynamicloadbalance.
CommandSyntax
ecmpload-balance-modedynamic
noecmpload-balance-modedynamic
CommandMode
GlobalConfiguration
Default
Staticloadbalancemode
Usage
Whenconfigureorcancelecmploadbalance,therouteinformationmustbeempty.
Examples
Thefollowingexampledisplayshowtoconfigureecmpdynamicloadbalance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpload-balance-modedynamic604RelatedCommands
None
6.1.17ecmpload-balance-modedynamic(efd-only|tcp-only)
CommandPurpose
Usethiscommandtoconfigureonlytcpflowsdoecmpdynamicloadoronlyefd
flowsdoecmpdynamicload.
CommandSyntax
ecmpload-balance-modedynamic(efd-only|tcp-only)
noecmpload-balance-modedynamic
CommandMode
GlobalConfiguration
Default
Flowsofeverytypecandoecmpdynamicload.
Usage
None
Examples
Thefollowingexampledisplayshowtoconfigureonlytcpflowsdoecmpdynamic
load:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpload-balance-modedynamictcp-only
RelatedCommands
None6056.1.18ecmpload-balance-modestatic
CommandPurpose
Usethiscommandtoconfigureecmpstaticloadbalance.
CommandSyntax
ecmpload-balance-modestatic
CommandMode
GlobalConfiguration
Default
None
Usage
Whenconfigureecmploadbalance,therouteinformationmustbeempty.
Examples
Thefollowingexampledisplayshowtoconfigureecmpstaticloadbalance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpload-balance-modestatic
RelatedCommands
None
6.1.19ecmpload-balance-modestaticself-healing
CommandPurpose
Usethiscommandtoconfigureecmpself-healingloadbalance.606CommandSyntax
ecmpload-balance-modestaticself-healing
noecmpload-balance-modestaticself-healing
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampledisplayshowtoconfigureecmpself-healingloadbalance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpload-balance-modestaticself-healing
RelatedCommands
None
6.1.20ecmpload-balance-moderound-robin
CommandPurpose
Usethiscommandtoconfigureecmproundrobinloadbalance.
CommandSyntax
ecmpload-balance-moderound-robin(vrfNAME|)A.B.C.D/M
noecmpload-balance-moderound-robin(vrfNAME|)A.B.C.D/M
Parameter ParameterDescriptionParameterValue607VRFNAME VRFinstancename Astringupto15
characters
A.B.C.D/M IPdestinationprefix
(e.g.10.0.0.0/8)IPv4addressandmask
lengthinA.B.C.D/Mformat
CommandMode
GlobalConfiguration
Default
None
Usage
Whenconfigureorcancelecmploadbalance,therouteinformationmustbeempty.
Allvrfsprefixcannotadduptomorethan15.
Examples
Thefollowingexampledisplayshowtoconfigureecmproundrobinloadbalance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpload-balance-moderound-robin1.1.1.0/24
RelatedCommands
None
6.1.21ecmpbandwidth-based-load-balance
CommandPurpose
Usethiscommandtoconfigureecmpbandwidth-based-load-balance.
CommandSyntax
ecmpbandwidth-based-load-balanceenable
noecmpbandwidth-based-load-balanceenable608CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampledisplayshowtoconfigureecmpbandwidth-based-load-
balance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#ecmpbandwidth-based-load-balanceenable
RelatedCommands
None
6.1.22showecmpinformation
CommandPurpose
Usethiscommandtodisplayecmpconfigureinformation.
CommandSyntax
showecmpinformation
CommandMode
PrivilegedEXEC
Default
None609Usage
None
Examples
Thefollowingexampleshowstheoutputofthecommand:
Switch#showecmpinformation
ECMPloadbalanceenablemode:Static
RelatedCommands
None
6.2RIPCommands
6.2.1default-informationoriginate(RIP)
CommandPurpose
TogenerateadefaultrouteintoRoutingInformationProtocol(RIP),usethedefault-
informationoriginatecommandinrouterconfigurationmode.Todisablethisfeature,
usethenoformofthiscommand.
CommandSyntax
default-informationoriginate(route-map|)
nodefault-informationoriginate(route-map|)
Parameter ParameterDescriptionParameterValue
route-map Routemapreference -
CommandMode
RouterConfiguration
Default
None610Usage
TherouteorginatedwillonlybelearnedbyRIPneighbor,andthisrouteisnot
configuredinFIB.
Examples
Thefollowingexampleoriginatesadefaultroute:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#version2
Switch(config-router)#network192.168.16.0/24
Switch(config-router)#default-informationoriginate
RelatedCommands
None
6.2.2default-metric(RIP)
CommandPurpose
TosetdefaultmetricvaluesforRoutingInformationProtocol(RIP),usethedefault-
metriccommandinrouterconfigurationmode.Toreturntothedefaultstate,usethe
noformofthiscommand.
CommandSyntax
default-metricNUMBER-VALUE
nodefault-metric
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Defaultmetricvalue 1-16
CommandMode
RouterConfiguration611Default
Bydefault,themetricissetto1.
Usage
Thedefault-metriccommandisusedinconjunctionwiththeredistributerouter
configurationcommandtocausethecurrentroutingprotocoltousethesamemetric
valueforallredistributedroutes.Adefaultmetrichelpssolvetheproblemof
redistributingrouteswithincompatiblemetrics.Whenevermetricsdonotconvert,
usingadefaultmetricprovidesareasonablesubstituteandenablestheredistribution
toproceed.
Examples
ThefollowingexampleshowsaswitchusingboththeRIPandtheOpenShortest
PathFirst(OSPF)routingprotocols.TheexampleadvertisesOSPF-derivedroutes
usingRIPandassignstheOSPF-derivedroutesaRIPmetricof10:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#default-metric10
Switch(config-router)#redistributeospf
RelatedCommands
redistribute(RIP)
6.2.3distance(RIP)
CommandPurpose
Todefineanadministrativedistanceforroutesthatareinsertedintotheroutingtable,
usethedistancecommandinrouterconfigurationmode.Toreturntheadministrative
distancetoitsdefaultdistancedefinition,usethenoformofthiscommand.
CommandSyntax
distanceDISTANCEPREFIX/PREFIX-LENGTH(ACCESSS-LIST-NAME|)
nodistance612Parameter ParameterDescriptionParameterValue
DISTANCE AdministrativedistanceAdministrativedistance,an
integerfrom1to255
(routeswithadistance
valueof255arenot
installedintherouting
table)
PREFIX IPprefixfortheoriginator
oftheimcomingrouting
updatesIPv4Address
PREFIX-LENGTH Prefixlengthforthe
originator1-32
ACCESSS-LIST-NAME(Optional)Namedaccess
listtobeappliedto
incomingroutingupdatesUpto40characters
CommandMode
RouterConfiguration
Default
Bydefault,thedistanceis120.
Usage
Anadministrativedistanceisaratingofthetrustworthinessofaroutinginformation
source,suchasanindividualswitchoragroupofswitches.Numerically,an
administrativedistanceisanintegerfrom0to255.Ingeneral,thehigherthevalue,
thelowerthetrustrating.Anadministrativedistanceof255meanstherouting
informationsourcecannotbetrustedatallandshouldbeignored.
Whenthiscommandisconfigured,itisappliedwhenanetworkisbeinginsertedinto
theroutingtable.ItfiltersroutingupdatesaccordingtotheIPaddressoftheswitch
thatsuppliestheroutinginformation.Itcouldbeused,forexample,tofilterpossibly613incorrectroutinginformationfromswitchesthatarenotunderyouradministrative
control.Theoptionalaccesslistnameisusedtofilterrouterentriesinroutingupdate.
Examples
Thefollowingexamplesetadministrativedistance200forroutesthatareinserted
from20.20.0.0networksegment:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#network10.10.0.0/24
Switch(config-router)#network20.20.0.0/24
Switch(config-router)#distance20020.20.0.0/24
RelatedCommands
distance(OSPF)
6.2.4ipripauthentication
CommandPurpose
ToenableauthenticationforRoutingInformationProtocol(RIP)Version2packets
andtospecifythesetofkeysthatcanbeusedonaninterface,usetheiprip
authenticationcommandininterfaceconfigurationmode.Topreventauthentication,
usethenoformofthiscommand.
CommandSyntax
ipripauthentication(key-chainNAME-OF-CHAIN|stringSTRING)
noipripauthentication(key-chain|string)
Parameter ParameterDescriptionParameterValue
key-chainNAME-OF-
CHAINEnablesauthentication
andspecifiesthegroupof
keysthatarevalidAStringofkeychainname
stringSTRING Enablesauthentication
andspecifiesthe
authenticationstringUpto16characters614CommandMode
InterfaceConfiguration
Default
NoauthenticationisprovidedforRIPpackets.
Usage
Ifneitherkeychainisconfiguredwiththekey-chaincommandnorstringisconfigured
withtheauthenticationstringcommand,noauthenticationisperformedonthe
interface(noteventhedefaultauthentication).Keychainandauthenticationstring
cannotbeconfiguredonthesameinterface.Ifyouwantconfigureone,makesure
theotherisnotconfigured.
Examples
Thefollowingexampleconfigurestheinterfacetoacceptandsendanykeybelonging
tothekeychainnamedtrees:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripauthenticationkey-chaintrees
RelatedCommands
ipripauthenticationmode
6.2.5ipripauthenticationmode
CommandPurpose
TospecifythetypeofauthenticationusedinRoutingInformationProtocol(RIP)
Version2packets,usetheipripauthenticationmodecommandininterface
configurationmode.Torestorecleartextauthentication,usethenoformofthis
command.
CommandSyntax
ipripauthenticationmode(text|md5)615noipripauthenticationmode
Parameter ParameterDescriptionParameterValue
text Normaltextauthentication-
md5 KeyedMessageDigest5
(MD5)authentication-
CommandMode
InterfaceConfiguration
Default
CleartextauthenticationisprovidedforRIPpackets.
Usage
RIPVersion1doesnotsupportauthentication.
Examples
ThefollowingexampleconfigurestheinterfacetouseMD5authentication:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripauthenticationmodemd5
RelatedCommands
ipripauthenticationkey-chain
6.2.6ipripreceiveversion
CommandPurpose
TospecifyaRoutingInformationProtocol(RIP)versiontoreceiveonaninterface
basis,usetheipripreceiveversioncommandininterfaceconfigurationmode.To
followtheglobalversionrules,usethenoformofthiscommand.616CommandSyntax
ipripreceiveversion[1|2]
noipripreceiveversion
Parameter ParameterDescriptionParameterValue
1 (Optional)Acceptsonly
RIPVersion1packetson
theinterface-
2 (Optional)Acceptsonly
RIPVersion2packetson
theinterface-
CommandMode
InterfaceConfiguration
Default
OnlyRIPv2packetshouldbereceived.
Usage
UsethiscommandtooverridethedefaultbehaviorofRIPasspecifiedbytheversion
command.Thiscommandappliesonlytotheinterfacebeingconfigured.Youcan
configuretheinterfacetoacceptbothRIPversions.
Examples
ThefollowingexampleconfigurestheinterfacetoreceivebothRIPVersion1and
Version2packets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripreceiveversion12
RelatedCommands
version(RIP)6176.2.7ipripreceive-packet
CommandPurpose
ToenabletheinterfacetoreceiveRoutingInformationProtocol(RIP)packets,use
theipripreceive-packetcommandininterfaceconfigurationmode.Todisableto
receiveRIPpackets,usethenoformofthiscommand.
CommandSyntax
ipripreceive-packet
noipripreceive-packet
CommandMode
InterfaceConfiguration
Default
Receivepacketisenabledbydefault.
Usage
UsethiscommandtoenableordisablethecapabilityofreceivingRIPpackets,
whetherthenetworkofthisinterfaceisaddedintoRIPornot.
Examples
ThefollowingexampleenablesthereceptionofRIPpackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripreceive-packet
RelatedCommands
ipripreceiveversion6186.2.8ipripsendversion
CommandPurpose
TospecifyaRoutingInformationProtocol(RIP)versiontosendonaninterfacebasis,
usetheipripsendversioncommandininterfaceconfigurationmode.Tofollowthe
globalversionrules,usethenoformofthiscommand.
CommandSyntax
ipripsendversion(([1|2])|1-compatible)
noipripsendversion
Parameter ParameterDescriptionParameterValue
1 (Optional)SendsonlyRIP
Version1packetsoutthe
interface-
2 (Optional)SendsonlyRIP
Version2packetsoutthe
interface-
1-compatible (Optional)SendsRIP
Version2packetsoutthe
interfacewithbroadcastIP
address-
CommandMode
InterfaceConfiguration
Default
OnlyRIPv2packetshouldbesend.619Usage
UsethiscommandtooverridethedefaultbehaviorofRIPasspecifiedbytheversion
command.Thiscommandappliesonlytotheinterfacebeingconfigured.Youcan
configuretheinterfacetosendbothRIPversions.
Examples
ThefollowingexampleconfigurestheinterfacetosendbothRIPVersion1and
Version2packets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripsendversion12
RelatedCommands
ipripreceiveversion
6.2.9ipripsend-packet
CommandPurpose
ToenabletheinterfacetosendRoutingInformationProtocol(RIP)packets,usethe
ipripsend-packetcommandininterfaceconfigurationmode.TodisabletosendRIP
packets,usethenoformofthiscommand.
CommandSyntax
ipripsend-packet
noipripsend-packet
CommandMode
InterfaceConfiguration
Default
Sendpacketisenabledbydefault.620Usage
UsethiscommandtoenableordisablethecapabilityofsendingRIPpackets,
whetherthenetworkofthisinterfaceisaddedintoRIPornot.
Examples
ThefollowingexampleenablesthetransmissionofRIPpackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripsend-packet
RelatedCommands
ipripsendversion
6.2.10ipripsplit-horizon
CommandPurpose
ToenablethesplithorizonmechanismforRoutingInformationProtocol(RIP),use
theipripsplit-horizoncommandininterfaceconfigurationmode.Todisablethesplit
horizonmechanism,usethenoformofthiscommand.
CommandSyntax
ipripsplit-horizon(poisoned|)
noipripsplit-horizon
Parameter ParameterDescriptionParameterValue
poisoned Splithorizonwithpoisoned
reverse-
CommandMode
InterfaceConfiguration621Default
Thiscommandisenabledwithpoisonedreversebydefault.
Usage
Ingeneral,changingthestateofthedefaultfortheipripsplit-horizoncommandisnot
recommended,unlessyouarecertainthatyourapplicationrequiresachangein
ordertoproperlyadvertiseroutes.
Examples
Thefollowingexampleenablessplithorizonwithoutpoisonedreverse:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipripsplit-horizon
RelatedCommands
None
6.2.11network(RIP)
CommandPurpose
TospecifyalistofnetworksfortheRoutingInformationProtocol(RIP)routing
process,usethenetworkcommandinrouterconfigurationmode.Toremoveanentry,
usethenoformofthiscommand.
CommandSyntax
network(PREFIX/PREFIX-LENGTH)
nonetwork(PREFIX/PREFIX-LENGTH)
Parameter ParameterDescriptionParameterValue
PREFIX IProuteprefixforthe
networkIPv4Address622PREFIX-LENGTH Prefixlengthforthe
network1-32
CommandMode
RouterConfiguration
Default
Nonetworksarespecified.
Usage
Thereisnolimittothenumberofnetworkcommandsyoucanuseontheswitch.RIP
routingupdateswillbesentandreceivedonlythroughinterfacesonthisnetwork.
RIPsendsupdatestotheinterfacesinthespecifiednetworks.Also,ifthenetworkof
aninterfaceisnotspecified,theinterfacewillnotbeadvertisedinanyRIPupdate.
Examples
ThefollowingexampledefinesRIPastheroutingprotocoltobeusedonallinterfaces
connectedtonetworks10.99.0.0/16and192.168.7.0/24:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#network10.99.0.0/16
Switch(config-router)#network192.168.7.0/24
RelatedCommands
routerrip
6.2.12neighbor(RIP)
CommandPurpose
Todefineaneighboringswitchwithwhichtoexchangeroutinginformation,usethe
neighborcommandinrouterconfigurationmode.Toremoveanentry,usetheno
formofthiscommand.623CommandSyntax
neighborIP-ADDRESS
noneighborIP-ADDRESS
Parameter ParameterDescriptionParameterValue
IP-ADDRESS IPaddressofapeerswitch
withwhichrouting
informationwillbe
exchangedIPv4Address
CommandMode
RouterConfiguration
Default
Noneighboringswitchesaredefined.
Usage
Thiscommandpermitsthepoint-to-point(non-broadcast)exchangeofrouting
information.Whenitisusedincombinationwiththepassive-interfacerouter
configurationcommand,routinginformationcanbeexchangedbetweenasubsetof
switchesandaccessserversonaLAN.
Multipleneighborcommandscanbeusedtospecifyadditionalneighborsorpeers.
Examples
Inthefollowingexample,RIPupdatesaresenttoallinterfacesonnetwork
10.108.0.0excepteth-0-1.However,inthiscaseaneighborswitchconfiguration
commandisincluded.Thiscommandpermitsthesendingofroutingupdatesto
specificneighbors.Onecopyoftheroutingupdateisgeneratedperneighbor:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#network10.108.0.0/16
Switch(config-router)#passive-interfaceeth-0-1
Switch(config-router)#neighbor10.108.20.4624RelatedCommands
routerrip
6.2.13offset-list(RIP)
CommandPurpose
ToaddanoffsettoincomingandoutgoingmetricstorouteslearnedviaRouting
InformationProtocol(RIP),usetheoffset-listcommandinrouterconfigurationmode.
Toremoveanoffsetlist,usethenoformofthiscommand.
CommandSyntax
offset-listACCESSS-LIST-NAME(in|out)METRIC-OFFSET(IFNAME|)
nooffset-list(in|out)(IFNAME|)
Parameter ParameterDescriptionParameterValue
ACCESSS-LIST-NAMENamedaccesslisttobe
appliedUpto40characters
in Appliestheaccesslistto
incomingmetrics-
out Appliestheaccesslistto
outgoingmetrics-
METRIC-OFFSET Positiveoffsettobe
appliedtometricsfor
networksmatchingthe
accesslist.Iftheoffsetis
0,noactionistaken0-16
IFNAME Interfacenametowhich
theoffsetlistisappliedSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration625Default
Thiscommandisdisabledbydefault.
Usage
Theoffsetvalueisaddedtotheroutingmetric.Anoffsetlistwithaninterfaceis
consideredextendedandtakesprecedenceoveranoffsetlistthatisnotextended.
Therefore,ifanentrypassestheextendedoffsetlistandthenormaloffsetlist,the
offsetoftheextendedoffsetlistisaddedtothemetric.
Examples
Inthefollowingexample,theswitchappliesanoffsettothedelaycomponentofa
switchonlytoaccesslist21:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#offset-list21out10
RelatedCommands
None
6.2.14passive-interface(RIP)
CommandPurpose
TodisablesendingroutingupdatesfortheRoutingInformationProtocol(RIP)onan
interface,usethepassive-interfacecommandinrouterconfigurationmode.Tore-
enablethesendingofroutingupdates,usethenoformofthiscommand.
CommandSyntax
passive-interfaceIFNAME
nopassive-interfaceIFNAME
Parameter ParameterDescriptionParameterValue626IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
Routingupdatesaresentontheinterface.
Usage
Ifyoudisablethesendingofroutingupdatesonaninterface,theparticularsubnet
willcontinuetobeadvertisedtootherinterfaces,andupdatesfromotherswitcheson
thatinterfacecontinuetobereceivedandprocessed.
Examples
Thefollowingexamplesetstheinterfaceeth-0-1aspassive:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#network10.108.0.0/16
Switch(config-router)#passive-interfaceeth-0-1
RelatedCommands
routerrip
6.2.15redistribute(RIP)
CommandPurpose
ToredistributeroutesfromoneroutingdomainintoRIProutingdomain,usethe
redistributecommandinrouterconfigurationmode.Todisableredistribution,usethe
noformofthiscommand.
CommandSyntax
redistributePROTOCOL{[metricVALUE]|route-mapWORD}627noredistributePROTOCOL
Parameter ParameterDescriptionParameterValue
PROTOCOL (Optional)Thenameofa
routingprotocol,orthe
keywordconnected,or
static.Ifyouspecifya
routingprotocol,useone
ofthefollowingkeywords:
bgp,andospf
connected,isisbgp/ospf/connected/isis/st
atic/isis
metricVALUE (Optional)When
redistributingotherrouting
processtotheRIP
process,thedefaultmetric
is1ifnometricvalueis
specified1-16
route-map Routemapreference -
WORD Pointertoroute-map
entriesUpto20characters
CommandMode
RouterConfiguration
Default
Routeredistributionisdisabled.
Metricmetric-value:1
Usage
Themetricvaluespecifiedintheredistributecommandsupersedesthemetricvalue
specifiedusingthedefault-metriccommand.628Examples
ThefollowingexamplesredistributethestaticroutesintoRIPwithmetric10:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#network10.108.0.0/16
Switch(config-router)#redistributestaticmetric10
RelatedCommands
default-metric
6.2.16routerrip
CommandPurpose
ToconfiguretheRoutingInformationProtocol(RIP)routingprocess,usetherouter
ripcommandinglobalconfigurationmode.ToturnofftheRIProutingprocess,use
thenoformofthiscommand.
CommandSyntax
routerrip
norouterrip
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoentertheRIProutingconfiguration:629Switch#configureterminal
Switch(config)#routerrip
RelatedCommands
network(RIP)
6.2.17timersbasic(RIP)
CommandPurpose
ToadjustRoutingInformationProtocol(RIP)networktimers,usethetimersbasic
commandinrouterconfigurationmode.Torestorethedefaulttimers,usethenoform
ofthiscommand.
CommandSyntax
timersbasicUPDATETIMEOUTINVALID
notimersbasic
Parameter ParameterDescriptionParameterValue
UPDATE Rate(inseconds)atwhich
updatesaresent.Thisis
thefundamentaltiming
parameteroftherouting
protocol.<5-2147483647>,default
30s
TIMEOUT Time(inseconds)after
whicharouteisdeclared
invalidwithoutupdates
thatrefreshtheroute.The
routethenentersintoan
invalidstateandisnot
usedforforwarding
packets.Itismarkedinaccessible
andadvertisedas
unreachable.<5-
2147483647>,default
180s
INVALID Timeafterwhichaninvalid
routeisremovedfromRIP
routingdatabase.<5-2147483647>,default
120s630CommandMode
RouterConfiguration
Default
update:30seconds
timeout:180seconds
invalid:120seconds
Usage
ThebasictimingparametersforRIPareadjustable.BecauseRIPisexecutinga
distributed,asynchronousroutingalgorithm,thesetimersmustbethesameforall
switchesandaccessserversinthenetwork.
Inaddition,anaddressfamilycanhaveexplicitlyspecifiedtimersthatapplytothat
address-familyonly.Thetimersbasiccommandmustbespecifiedforanaddress
familyorthesystemDefaultforthetimersbasiccommandareusedregardlessof
whatisconfiguredforRIProuting.
Examples
Thefollowingexamplesetsupdatestobebroadcastevery5seconds.Ifaswitchis
notheardfromin15seconds,therouteisdeclaredunusable.Andafter15seconds
theinvalidroutewillberemovedfromRIProutingdatabase:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#timersbasic51515
RelatedCommands
None
6.2.18showipripdatabase
CommandPurpose
UsethiscommandtodisplayRIPinformationdatabase.631CommandSyntax
showipripdatabase(vrfWORD|)
Parameter ParameterDescriptionParameterValue
vrfWORD VPNRouting/Forwarding
instanceUpto15characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripdatabasecommand:
Switch#showipripdatabase
Codes:R-RIP,Rc-RIPconnected,Rs-RIPstatic,K-Kernel,
C-Connected,S-Static,O-OSPF,I-IS-IS,B-BGP
NetworkNextHopMetricFromIfTime
Rc1.1.1.0/24 1eth-0-1
Rc2.2.2.0/24 1eth-0-2
Rc10.0.0.0/24 1vlan10
RelatedCommands
showipripinterface
6.2.19showipripinterface
CommandPurpose
TodisplaysummaryinformationofRoutingInformationProtocol(RIP)foraspecific
interface,usetheshowipripinterfacecommandinprivilegedEXECmode.632CommandSyntax
showipripinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/tunnel/vlaninterfaces
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripinterfacecommand:
Switch#showipripinterfaceeth-0-1
eth-0-1isup,lineprotocolisup
RoutingProtocol:RIP
ReceiveRIPpackets
SendRIPpackets
Passiveinterface:Disabled
Splithorizon:EnabledwithPoisonedReversed
IPinterfaceaddress:
1.1.1.1/24
RelatedCommands
showipripdatabase6336.2.20version(RIP)
CommandPurpose
TospecifyaRoutingInformationProtocol(RIP)versionusedgloballybytherouter,
usetheversioncommandinrouterconfigurationmode.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
version(1|2)
noversion
Parameter ParameterDescriptionParameterValue
1 SpecifiesRIPVersion1-
2 SpecifiesRIPVersion2-
CommandMode
RouterConfiguration
Default
SystemreceivesonlyRIPVersion2packets,andsendsonlyVersion2packets.
Usage
TospecifyRIPversionsusedonaninterfacebasis,usetheipripreceiveversionand
ipripsendversioncommands.
Examples
ThefollowingexampleenablesthesoftwaretosendandreceiveRIPVersion2
packets:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#version2634RelatedCommands
ipripreceiveversion
ipripsendversion
6.2.21distribute-list
CommandPurpose
ToFilternetworksinroutingupdates,usethedistribute-listcommandinrouter
configurationmode.Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
distribute-list(prefix|)WORD(in|out)
nodistribute-list(prefix|)WORD(in|out)
Parameter ParameterDescriptionParameterValue
prefix Filterprefixesinrouting
update-
WORD Access-listname Upto40characters
in Filterincomingrouting
updates-
out Filteroutgoingrouting
updates-
CommandMode
RouterConfiguration
Default
None
Usage
None635Examples
ThefollowingexamplefiltersallroutesfromRIP:
Switch#configureterminal
Switch(config)#routerrip
Switch(config-router)#distribute-listprefix1in
RelatedCommands
ipprefix-list
6.2.22address-family
CommandPurpose
UsethecommandenterAddressFamilycommandmodeinrouterconfiguration
mode.
CommandSyntax
address-familyipv4vrfWORD
Parameter ParameterDescriptionParameterValue
WORD VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
RouterConfiguration
Default
N/A
Usage
None636Examples
ThefollowingexampleshowshowtoenterAddressFamilycommandmode:
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)address-familyipv4
RelatedCommands
None
6.2.23showipprotocolrip
CommandPurpose
ToshowRoutingInformationProtocol(RIP),usetheshowipprotocolripcommandin
inprivilegedEXECmode.
CommandSyntax
showipprotocolrip
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripinterfacecommand:
Switch#showipprotocolrip
Routingprotocolis"rip"
Sendingupdatesevery30secondswith+/-5seconds
Timeoutafter180seconds,Garbagecollectafter120seconds637Outgoingupdatefilterlistforallinterfaceisnotset
Incomingupdatefilterlistforallinterfaceisnotset
Defaultredistributionmetricis1
Redistributing:
connectedmetricdefault
Defaultversioncontrol:sendversion2,receiveversion2
InterfaceSendRecvKey-chain
RoutingforNetworks:
10.10.11.0/24
RoutingInformationSources:
GatewayDistanceLastUpdateBadPacketsBadRoutes
Numberofroutes(includingconnected):0
Distance:(defaultis120)
RelatedCommands
None
6.2.24debugrip
CommandPurpose
Usethiscommandtospecifytheoptionsforthedisplayeddebugginginformationfor
RIPevents,RIPpackets.Usethenoparameterwiththiscommandtodisableall
debugging.
CommandSyntax
debugrip(all|events|PACKET|)
nodebugrip(all|events|PACKET|)
nodebugall(rip|)
Parameter ParameterDescriptionParameterValue
all AllRIPdebuginformation-
events RIPeventsdebug
informationisdisplayed-
PACKET packet(recv|send)(detail)
SpecifiesRIPpacketsonly-638recv Specifiesthatinformation
forreceivedpacketsbe
displayed-
send Specifiesthatinformation
forsentpacketsbe
displayed-
detail Displaysdetailed
informationforthesentor
receivedpacket-
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
Thefollowingexampledisplaysinformationabouttherippacketsthatarereceived
andsentoutfromtheconnectedrouter:
Switch#debugrippacket
RelatedCommands
showdebuggingrip
6.2.25showdebuggingrip
CommandPurpose
UsethiscommandtodisplaytheRIPdebuggingstatusforthesedebuggingoptions:
nsmdebugging,RIPeventdebugging,RIPpacketdebugging.639CommandSyntax
showdebuggingrip
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowdebuggingripcommand:
Switch#showdebugingrip
RIPdebuggingstatus:
RIPpacketdebuggingison
RelatedCommands
debugrip
6.2.26showipripdatabasedatabase-summary
CommandPurpose
UsethiscommandtodisplaythestatisticsforRIProutes.
CommandSyntax
showipripdatabasedatabase-summary(vrfNAME|)
Parameter ParameterDescriptionParameterValue640vrfNAME VPNRouting/Forwarding
instanceUpto15characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripdatabasedatabase-summary
command:
Switch#showipripdatabasedatabase-summary
Type Count
RIPconnected1
RIP 1
Total 2
RelatedCommands
showipripdatabase
6.2.27showresourcerip
CommandPurpose
UsethiscommandtodisplaytherouteresourcesusedbyRIPprotocol.
CommandSyntax
showresourcerip641CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourceripcommand:
Switch#showresourcerip
RIP
Resource UsedCapability
================================================
Routes 26144
RelatedCommands
showipripdatabase
6.3OSPFCommands
6.3.1areaauthentication
CommandPurpose
ToenableauthenticationforanOpenShortestPathFirst(OSPF)area,usethearea
authenticationcommandinrouterconfigurationmode.Toremoveanauthentication
specificationofanareaoraspecifiedareafromtheconfiguration,usethenoformof
thiscommand.
CommandSyntax
areaAREA-IDauthentication(message-digest|)
noareaAREA-IDauthentication642Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
message-digest (Optional)Enables
MessageDigest5(MD5)
authenticationonthearea
specifiedbythearea-id
argument-
CommandMode
RouterConfiguration
Default
Type0authentication(noauthentication)
Usage
SpecifyingauthenticationforanareasetstheauthenticationtoType1(simple
password)asspecifiedinRFC1247.Ifthiscommandisnotincludedinthe
configurationfile,authenticationofType0(noauthentication)isassumed.
Theauthenticationtypemustbethesameforallroutersandaccessserversinan
area.TheauthenticationpasswordforallOSPFroutersonanetworkmustbethe
sameiftheyaretocommunicatewitheachotherviaOSPF.Usetheipospf
authentication-keyinterfacecommandtospecifythispassword.
IfyouenableMD5authenticationwiththemessage-digestkeyword,youmust
configureapasswordwiththeipospfmessage-digest-keyinterfacecommand.
Toremovetheauthenticationspecificationforanarea,usethenoformofthis
commandwiththeauthenticationkeyword.643Examples
Thefollowingexamplemandatesauthenticationforareas0and10.0.0.0ofOSPF
routingprocess201.Authenticationkeysarealsoprovided:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress192.168.251.201/24
Switch(config-if)#ipospfauthentication-keyadcdefgh
Switch(config)#interfaceeth-0-2
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.56.0.201/16
Switch(config-if)#ipospfauthentication-keyijklmnop
Switch(config)#routerospf201
Switch(config-router)#network10.0.0.00.255.255.255area10.0.0.0
Switch(config-router)#network192.168.0.0/16area0
Switch(config-router)#area10.0.0.0authentication
Switch(config-router)#area0authentication
RelatedCommands
ipospfauthentication-key
6.3.2areadefault-cost
CommandPurpose
Tospecifyacostforthedefaultsummaryroutesentintoastub,usetheareadefault-
costcommandinrouterconfigurationmode.Toremovetheassigneddefaultroute
cost,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDdefault-costCOST
noareaAREA-IDdefault-cost
Parameter ParameterDescriptionParameterValue644AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
COST defaultcostvalue 0-16777214
CommandMode
RouterConfiguration
Default
COST:1
Usage
ThecommandisusedonlyonanAreaBorderRouter(ABR)attachedtoastub.
Therearetwostubarearouterconfigurationcommands:thestubanddefault-cost
optionsoftheareacommand.Inallroutersandaccessserversattachedtothestub
area,theareashouldbeconfiguredasastubareausingthestuboptionofthearea
command.Usethedefault-costoptiononlyonanABRattachedtothestubarea.The
default-costoptionprovidesthemetricforthesummarydefaultroutegeneratedby
theABRintothestubarea.
Examples
ThefollowingexampleshowshowtoconfigureastubareaandsetitsCOSTvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.56.0.201/16
Switch(config)#routerospf201
Switch(config-router)#network10.0.0.0/8area10.0.0.0
Switch(config-router)#area10.0.0.0stub
Switch(config-router)#area10.0.0.0default-cost20645RelatedCommands
None
6.3.3areafilter-list
CommandPurpose
Tofilterprefixesadvertisedintype3link-stateadvertisements(LSAs)betweenOpen
ShortestPathFirst(OSPF)areasofanAreaBorderRouter(ABR),usetheareafilter-
listcommandinrouterconfigurationmode.Tochangeorcancelthefilter,usetheno
formofthiscommand.
CommandSyntax
areaAREA-IDfilter-list(accessACCESSS-LIST-NAME|prefixPREFIX-LIST-NAME)
(in|out)
noareaAREA-IDfilter-list(accessACCESSS-LIST-NAME|prefixPREFIX-LIST-
NAME)(in|out)
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
access Indicatesthatanaccesslist
isused-
ACCESSS-LIST-NAMENameofanaccesslistAstringwith1-20
characters
prefix Indicatesthataprefixlistis
used-
PREFIX-LIST-NAME Nameofaprefixlist Astringwith1-20
characters646in Accesslistorprefixlist
appliedtoprefixes
advertisedtothespecified
areafromotherareas-
out Accesslistorprefixlist
appliedtoprefixes
advertisedoutofthe
specifiedareatoother
areas-
CommandMode
RouterConfiguration
Default
Thiscommandhasnodefaultbehavior.
Usage
Withthisfeatureenabledintheindirection,alltype3LSAsoriginatedbytheABR
tothisarea,basedoninformationfromallotherareas,arefilteredbytheprefixlist.
Type3LSAsthatwereoriginatedasaresultofthearearangecommandinanother
areaaretreatedlikeanyothertype3LSAthatwasoriginatedindividually.Anyprefix
thatdoesnotmatchanentryintheprefixlistisimplicitlydenied.
Withthisfeatureenabledintheoutdirection,alltype3LSAsadvertisedbytheABR,
basedoninformationfromthisareatoallotherareas,arefilteredbytheprefixlist.If
thearearangecommandhasbeenconfiguredforthisarea,type3LSAsthat
correspondtothearearangearesenttoallotherareas,onlyifatleastoneprefixin
thearearangematchesanentryintheprefixlist.
Ifallspecificprefixesaredeniedbytheprefixlist,type3LSAsthatcorrespondtothe
arearangecommandwillnotbesenttoanyotherarea.Prefixesthatarenot
permittedbytheprefixlistareimplicitlydenied.
Examples
Thefollowingexamplefiltersprefixesthataresentfromallotherareastoarea1:647Switch#configureterminal
Switch(config)#routerospf201
Switch(config-router)#area1filter-listprefixAREA_1in
RelatedCommands
arearange
6.3.4arearange
CommandPurpose
Toconsolidateandsummarizeroutesatanareaboundary,usethearearange
commandinrouterconfigurationmode.Todisablethisfunction,usethenoformof
thiscommand.
CommandSyntax
areaAREA-IDrange(ADDRESSMASK|ADDRESS/PREFIX-LENGTH)
(advertise|not-advertise|)
noareaAREA-IDrange(ADDRESSMASK|ADDRESS/PREFIX-LENGTH}
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
ADDRESS IPv4address IPv4Address
PREFIX-LENGTH Prefixlengthofthe
address1-32
advertise Advertisethisrange
(default)-
not-advertise Donotadvertisethisrange-648CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
ThearearangecommandisusedonlywithAreaBorderRouters(ABRs).Itisusedto
consolidateorsummarizeroutesforanarea.Theresultisthatasinglesummary
routeisadvertisedtootherareasbytheABR.Routinginformationiscondensedat
areaboundaries.Externaltothearea,asinglerouteisadvertisedforeachaddress
range.Thisbehavioriscalledroutesummarization.
Multiplearearouterconfigurationcommandsspecifyingtherangeoptioncanbe
configured.Thus,OSPFcansummarizeaddressesformanydifferentsetsofaddress
ranges.
Examples
ThefollowingexamplespecifiesonesummaryroutetobeadvertisedbytheABRto
otherareasforallsubnetsonnetwork10.0.0.0andforallhostsonnetwork
192.168.110.0:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress192.168.110.201/24
Switch(config)#interfaceeth-0-2
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress192.168.120.201/24
Switch(config)#interfaceeth-0-3
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.0.0.0/8
Switch(config)#routerospf201
Switch(config-router)#network192.168.110.0/24area0
Switch(config-router)#area10.0.0.0range10.0.0.0/8
Switch(config-router)#area0range192.168.110.0255.255.0.0
RelatedCommands
None6496.3.5areastub
CommandPurpose
Todefineanareaasastubarea,usetheareastubcommandinrouterconfiguration
mode.Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDstub(no-summary|)
noareaAREA-IDstub(no-summary|)
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
no-summary (Optional)Preventsan
AreaBorderRouter(ABR)
fromsendingsummarylink
advertisementsintothe
stubarea-
CommandMode
RouterConfiguration
Default
Nostubareaisdefined.
Usage
Youmustconfiguretheareastubcommandonallroutersandaccessserversinthe
stubarea.Usethearearouterconfigurationcommandwiththedefault-costkeyword
tospecifythecostofadefaultinternalroutersentintoastubareabyanABR.650Therearetwostubarearouterconfigurationcommands:thestubanddefault-cost
optionsofthearearouterconfigurationcommand.Inallroutersattachedtothestub
area,theareashouldbeconfiguredasastubareausingthestubkeywordofthe
areacommand.Usethedefault-costkeywordonlyonanABRattachedtothestub
area.Thedefault-costkeywordprovidesthemetricforthesummarydefaultroute
generatedbytheABRintothestubarea.
Tofurtherreducethenumberoflink-stateadvertisements(LSAs)sentintoastub
area,youcanconfiguretheno-summarykeywordontheABRtopreventitfrom
sendingsummaryLSAs(LSAtype3)intothestubarea.
Examples
ThefollowingexampleshowshowtoconfigureastubareaandsetitsCOSTvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.56.0.201/16
Switch(config)#routerospf201
Switch(config-router)#network10.0.0.0/8area10.0.0.0
Switch(config-router)#area10.0.0.0stub
Switch(config-router)#area10.0.0.0default-cost20
RelatedCommands
None
6.3.6areanssa
CommandPurpose
TodefineanareaasaNSSAarea,usetheareanssacommandinrouter
configurationmode.Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDnssa(translator-role(candidate|never|always)|)(no-summary|)
(no-redistribution|)(default-information-originate{metricMETRIC_VALUE|metric-
typeTYPE-VALUE|}|)
noareaAREA-IDnssa(translator-role|)(no-summary|)(no-redistribution|)
(default-information-originate|)651Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
candidate (Optional)Configurethe
roleforABRinNSSAarea
ascandidateforthe
translatorrouter-
never (Optional)Configurethe
roleforABRinNSSAarea
asnon-translatorrouter-
always (Optional)Configurethe
roleforABRinNSSAarea
asthespecifiedtranslator
router-
no-summary (Optional)Preventsan
AreaBorderRouter(ABR)
fromsendingSummary
LSAsintotheNSSAarea-
no-redistribution (Optional)Preventsan
AreaBorderRouter(ABR)
fromimportingroutesinto
theNSSAarea-
default-information-
originate(Optional)Configurean
ASBRtosenddefaulttype
7LSAintotheNSSAarea-
metricMETRIC_VALUE(Optional)Configuremetric
forthedefaultoriginate
route0-16777214652metric-typeTYPE-VALUE(Optional)Configuremetric
typeforthedefault
originateroute1-2
CommandMode
RouterConfiguration
Default
NoNSSAareaisdefined.
Usage
NoNSSAareaisconfiguredasdefault.Youmustconfiguretheareanssacommand
onallroutersandaccessserversintheNSSAarea.
TherearemanysimilaritiesbetweenNSSAandstubarea,neitherofwhich
propagatesexternalroutesfromotherarea.ThedifferenceisthatNSSAareacan
introduceandpropagateexternalroutestotheOSPFautonomousdomain,while
STUBareacannotintroduceexternalroutes.
Examples
ThefollowingexampleshowshowtoconfigureaNSSAarea:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.56.0.201/16
Switch(config)#routerospf201
Switch(config-router)#network10.0.0.0/8area10.0.0.0
Switch(config-router)#area10.0.0.0nssa
RelatedCommands
None6536.3.7auto-cost
CommandPurpose
TocontrolhowOpenShortestPathFirst(OSPF)calculatesdefaultmetricsforthe
interface,usetheauto-costcommandinrouterconfigurationmode.Toassigncost
basedonlyontheinterfacetype,usethenoformofthiscommand.
CommandSyntax
auto-costreference-bandwidthRATE
noauto-costreference-bandwidth
Parameter ParameterDescriptionParameterValue
RATE RateinMbps(bandwidth).1-4294967
CommandMode
RouterConfiguration
Default
100Mbps
Usage
Thevaluesetbytheipospfcostcommandoverridesthecostresultingfromtheauto-
costcommand.Bandwidthdividingportrateiscost.
Examples
Thefollowingexamplechangesthecostofthecostlinkto1GBps:
Switch#configureterminal
Switch(config)#routerospf1
Switch(config-router)#auto-costreference-bandwidth1000
RelatedCommands
ipospfcost6546.3.8clearipospf
CommandPurpose
ToclearredistributionbasedontheOpenShortestPathFirst(OSPF)routingprocess
ID,usetheclearipospfcommandinprivilegedEXECmode.
CommandSyntax
clearipospf(PID|)process
Parameter ParameterDescriptionParameterValue
PID (Optional)ProcessID 0-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethePIDargumenttoclearonlyoneOSPFprocess.IfthePIDargumentisnot
specified,allOSPFprocessesarecleared.
Examples
ThefollowingexampleclearsallOSPFprocesses:
Switch#clearipospfprocess
RelatedCommands
None6556.3.9compatiblerfc1583
CommandPurpose
TorestorethemethodusedtocalculatesummaryroutecostsperRFC1583,usethe
compatiblerfc1583commandinrouterconfigurationmode.TodisableRFC1583
compatibility,usethenoformofthiscommand.
CommandSyntax
compatiblerfc1583
nocompatiblerfc1583
CommandMode
RouterConfiguration
Default
NotcompatiblewithRFC1583.
Usage
Tominimizethechanceofroutingloops,allOpenShortestPathFirst(OSPF)routers
inanOSPFroutingdomainshouldhaveRFCcompatibilitysetidentically.
BecauseoftheintroductionofRFC2328,OSPFVersion2,themethodusedto
calculatesummaryroutecostshaschanged.Usethenocompatiblerfc1583
commandtoenablethecalculationmethodusedperRFC2328.
Examples
ThefollowingexamplespecifiesthattherouterprocessiscompatiblewithRFC1583:
Switch#configureterminal
Switch(config)#routerospf1
Switch(config-router)#compatiblerfc1583
RelatedCommands
None6566.3.10default-informationoriginate(OSPF)
CommandPurpose
TogenerateadefaultexternalrouteintoanOpenShortestPathFirst(OSPF)routing
domain,usethedefault-informationoriginatecommandinrouterconfigurationmode.
Todisablethisfeature,usethenoformofthiscommand.
CommandSyntax
default-informationoriginate(route-mapWORD|always|metricMETRIC-VALUE|
metric-typeTYPE-VALUE|)
nodefault-informationoriginate(route-mapWORD|always|metric|metric-type|)
Parameter ParameterDescriptionParameterValue
always (Optional)Always
advertisesthedefault
routeregardlessof
whetherthesystemhasa
defaultroute-
metricMETRIC-VALUEmetric-value(Optional)
Metricusedforgenerating
thedefaultroute.Ifyou
omitavalueanddonot
specifyavalueusingthe
default-metricrouter
configurationcommand,
thedefaultmetricvalueis
1.0-16777214
metric-typeTYPE-VALUE(Optional)Externallink
typeassociatedwiththe
defaultrouteadvertised
intotheOSPFrouting
domain.Itcanbetype1or
type2LSA1-2657route-mapWORD Routemapreference Astringwith1-20
characters
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
Wheneveryouusetheredistributeorthedefault-informationrouterconfiguration
commandtoredistributeroutesintoanOSPFroutingdomain,theswitch
automaticallybecomesanautonomousSystemBoundaryRouter(ASBR).However,
anASBRdoesnot,bydefault,generateadefaultrouteintotheOSPFroutingdomain.
Thesystemstillmusthaveadefaultrouteforitselfbeforeitgeneratesone,except
whenyouhavespecifiedthealwayskeyword.
Examples
Thefollowingexamplespecifiesametricforthedefaultrouteredistributedintothe
OSPFroutingdomainandanexternalmetrictype:
Switch#configureterminal
Switch(config)#routerospf109
Switch(config-router)#redistributeripmetric100
Switch(config-router)#default-informationoriginatemetric100metric-type1
RelatedCommands
redistribute(OSPF)
6.3.11default-metric(OSPF)
CommandPurpose
TosetdefaultmetricvaluesfortheOpenShortestPathFirst(OSPF)routingprotocol,
usethedefault-metriccommandinrouterconfigurationmode.Toreturntothedefault
state,usethenoformofthiscommand.658CommandSyntax
default-metricMETRIC-VALUE
nodefault-metric
Parameter ParameterDescriptionParameterValue
METRIC-VALUE Defaultmetricvalue
appropriateforthe
specifiedroutingprotocol.0-16777214
CommandMode
RouterConfiguration
Default
1forBGProutes
20forothers
Usage
Thedefault-metriccommandisusedinconjunctionwiththeredistributerouter
configurationcommandtocausethecurrentroutingprotocoltousethesamemetric
valueforallredistributedroutes.
Examples
TheexampleadvertisesOSPF-derivedroutesusingRIPandassignstheInternal
GatewayProtocol(IGP)-derivedroutesaRIPmetricof10.:
Switch#configureterminal
Switch(config)#routerospf
Switch(config-router)#default-metric10
Switch(config-router)#redistributerip
RelatedCommands
redistribute(OSPF)6596.3.12distance(OSPF)
CommandPurpose
TodefineOpenShortestPathFirst(OSPF)routeadministrativedistancesbasedon
routetype,usethedistancecommandinrouterconfigurationmode.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
distance{DISTANCE|ospf[externalDIST1][inter-areaDIST2]|[intra-area
DIST3]}
nodistance{DISTANCE|ospf}
Parameter ParameterDescriptionParameterValue
DISTANCE Administrativedistance.An
integerfrom1to255.
(Routeswithadistance
valueof255arenot
installedintherouting
table.)1-255
externalDIST1 (Optional)Setsthe
distanceforroutesfrom
otherroutingdomains,
learnedbyredistribution.
Rangeis1to255.1-255
inter-areaDIST2 (Optional)Setsthe
distanceforallroutesfrom
oneareatoanotherarea.
Rangeis1to255.1-255
intra-areaDIST3 (Optional)Setsthe
distanceforallroutes
withinanarea.Rangeis1
to255.1-255660CommandMode
RouterConfiguration
Default
DIST1:110
DIST2:110
DIST3:110
Usage
Youmayspecifyoneofthekeywordsorusedistanceonlytoapplytoalltypesof
routes.
Thedistancecommandallowsyoutosetadistanceforanentiregroupofroutes,
ratherthanaspecificroutethatpassesanaccesslist.
AcommonreasontousethedistancecommandiswhenyouhavemultipleOSPF
processeswithmutualredistribution,andyouwanttopreferinternalroutesfromone
overexternalroutesfromtheother.
Examples
TheexampleadvertisesOSPF-derivedroutesusingRIPandassignstheInternal
GatewayProtocol(IGP)-derivedroutesaRIPdistanceof90:
Switch#configureterminal
Switch(config)#routerospf
Switch(config-router)#distance90
Switch(config-router)#redistributerip
RelatedCommands
None6616.3.13distribute-list(OSPF)
CommandPurpose
Tofilternetworksreceivedinupdatesorsuppressnetworksfrombeingadvertisedin
updates,usethedistribute-listcommandinrouterconfigurationmode.Tocancelthis
function,usethenoformofthiscommand.
CommandSyntax
distribute-listprefixPREIFX-LIST-NAME(in|out)
Parameter ParameterDescriptionParameterValue
PREFIX-LIST-NAME Nameofaprefixlisttobe
appliedAstringwith1-20
characters
CommandMode
RouterConfiguration
Default
None
Usage
Thiscommandmustspecifyanaccesslist.
Examples
Inthefollowingexample,OSPFprocess1isconfiguredtoacceptnetwork20.0.0.0/8.:
Switch#configureterminal
Switch(config)#ipprefix-listplistpermit20.0.0.0/8
Switch(config)#routerospf
Switch(config-router)#network20.0.0.0/8area0
Switch(config-router)#distribute-listprefixplistin662RelatedCommands
None
6.3.14distribute-list(OSPF)
CommandPurpose
Tofilternetworksreceivedinupdatesorsuppressnetworksfrombeingadvertisedin
updates,usethedistribute-listcommandinrouterconfigurationmode.Tocancelthis
function,usethenoformofthiscommand.
CommandSyntax
distribute-listACCESSS-LIST-NAME(in|out)
nodistribute-listACCESSS-LIST-NAME(in|out)
Parameter ParameterDescriptionParameterValue
ACCESSS-LIST-NAMENameofanaccesslistto
beappliedAstringwith1-20
characters
in Filternetworksreceivedin
updates-
out Suppressnetworksfrom
beingadvertisedin
updates-
CommandMode
RouterConfiguration
Default
None
Usage
Thiscommandmustspecifyanaccesslist.663Examples
Inthefollowingexample,OSPFprocess1isconfiguredtoaccepttwonetworks,
network20.0.0.0andnetwork10.108.0.0:
Switch#configureterminal
Switch(config)#ipaccess-listacl1
Switch(config-ip-acl)#permitany20.0.0.00.0.255.255any
Switch(config-ip-acl)#permitany10.108.0.00.0.255.255any
Switch(config-ip-acl)#denyanyanyany
Switch(config)#routerospf1
Switch(config-router)#network10.108.0.0/16area1
Switch(config-router)#distribute-listacl1in
RelatedCommands
ipaccess-list
6.3.15ipospfauthentication
CommandPurpose
Tospecifytheauthenticationtypeforaninterface,usetheipospfauthentication
commandininterfaceconfigurationmode.Toremovetheauthenticationtypeforan
interface,usethenoformofthiscommand.
CommandSyntax
ipospfauthentication(message-digest|null|)
noipospfauthentication
Parameter ParameterDescriptionParameterValue
message-digest (Optional)Specifiesthat
message-digest
authenticationwillbeused-664null (Optional)No
authenticationisused.
Usefulforoverriding
passwordormessage-
digestauthenticationif
configuredforanarea-
CommandMode
InterfaceConfiguration
Default
Theareadefaultisnoauthentication(nullauthentication).
Usage
Beforeusingtheipospfauthenticationcommand,configureapasswordforthe
interfaceusingtheipospfauthentication-keycommand.Ifyouusetheipospf
authenticationmessage-digestcommand,configurethemessage-digestkeyforthe
interfacewiththeipospfmessage-digest-keycommand.
Examples
Thefollowingexampleenablesmessage-digestauthentication:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipospfauthenticationmessage-digest
RelatedCommands
areaauthentication
ipospfauthentication-key
ipospfmessage-digest-key6656.3.16ipospfauthentication-key
CommandPurpose
ToassignapasswordtobeusedbyneighboringroutersthatareusingtheOpen
ShortestPathFirst(OSPF)simplepasswordauthentication,usetheipospf
authentication-keycommandininterfaceconfigurationmode.Toremoveapreviously
assignedOSPFpassword,usethenoformofthiscommand.
CommandSyntax
ipospfauthentication-key(8|)PASSWORD
noipospfauthentication-key
Parameter ParameterDescriptionParameterValue
PASSWORD Anycontinuousprintable
stringofcharactersthat
canbeenteredfromthe
keyboardupto8bytesin
lengthAstringwith8characters
(8|) Specifiesahidden
passwordwillfollow-
CommandMode
InterfaceConfiguration
Default
Nopasswordisspecified.
Usage
Thepasswordcreatedbythiscommandisusedasakeythatisinserteddirectly
intotheOSPFheaderwhentheswitchoriginatesroutingprotocolpackets.A
separatepasswordcanbeassignedtoeachnetworkonaper-interfacebasis.All
neighboringroutersonthesamenetworkmusthavethesamepasswordtobeableto
exchangeOSPFinformation.666Examples
Thefollowingexampleenablestheauthenticationkeywiththestringyourpass:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfauthentication-keyyourpass
Thefollowingexampleenablestheauthenticationkeywiththeencryptpassword
91c38996a1aa5699:
Switch#configureterminal
Switch(config)#interfaceeth-0-2
Switch(config-if)#noswitchport
Switch(config-if)#ipospfauthentication-key891c38996a1aa5699
RelatedCommands
areaauthentication
ipospfauthentication
6.3.17ipospfcost
CommandPurpose
Toexplicitlyspecifythecostofsendingapacketonaninterface,usetheipospfcost
commandininterfaceconfigurationmode.Toresetthepathcosttothedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
ipospfcostINTERFACE-COST
noipospfcost
Parameter ParameterDescriptionParameterValue
INTERFACE-COST Thecostofsendinga
packetonaninterface1-65535
CommandMode
InterfaceConfiguration667Default
Differentportratehasdifferentdefaultcost.
Usage
Youcansetthemetricmanuallyusingthiscommand,ifyouneedtochangethe
default.Usingthebandwidthcommandchangesthelinkcostaslongasthis
commandisnotused.
Examples
Thefollowingexamplesetstheinterfacecostvalueto65:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfcost65
RelatedCommands
auto-costreferencebandwidth
6.3.18ipospfdatabase-filterallout
CommandPurpose
Tofilteroutgoinglink-stateadvertisements(LSAs)toanOpenShortestPathFirst
(OSPF)interface,usetheipospfdatabase-filteralloutcommandininterface
configurationmode.TorestoretheforwardingofLSAstotheinterface,usetheno
formofthiscommand.
CommandSyntax
ipospfdatabase-filterallout
noipospfdatabase-filter
CommandMode
InterfaceConfiguration668Default
Thiscommandisdisabledbydefault.AlloutgoingLSAsarefloodedtotheinterface.
Usage
OSPFfloodsnewLSAsoverallinterfacesinanarea,excepttheinterfaceonwhich
theLSAarrives.Thisredundancyensuresrobustflooding.However,toomuch
redundancycanwastebandwidthandmightleadtoexcessivelinkandCPUusagein
certaintopologies,resultingindestabilizingthenetwork.Toavoidthis,usethe
database-filtercommandtoblockfloodingofLSAsoverspecifiedinterfaces.
Examples
ThefollowingexamplepreventsfloodingofOSPFLSAstobroadcast,nonbroadcast,
orpoint-to-pointnetworksreachablethroughtheinterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfdatabase-filterallout
RelatedCommands
None
6.3.19ipospfdead-interval
CommandPurpose
Tosettheintervalduringwhichatleastonehellopacketmustbereceivedfroma
neighborbeforetherouterdeclaresthatneighbordown,usetheipospfdead-interval
commandininterfaceconfigurationmode.Torestorethedefaultvalue,usetheno
formofthiscommand.
CommandSyntax
ipospfdead-intervalSECONDS
noipospfdead-interval
Parameter ParameterDescriptionParameterValue669SECONDS Theintervalduringwhich
atleastonehellopacket
mustbereceivedfroma
neighborbeforetherouter
declaresthatneighbor
down.Thevaluemustbe
thesameforallnodeson
thenetwork1-65535
CommandMode
InterfaceConfiguration
Default
SECONDS:Theneighborisbeenconsideredasdeadin40sbydefault.
Usage
ThedeadintervalisadvertisedinOSPFhellopackets.Thisvaluemustbethesame
forallnetworkingdevicesonaspecificnetwork.
Specifyingasmallerdeadinterval(seconds)willgivefasterdetectionofaneighbor
beingdownandimproveconvergence,butmightcausemoreroutinginstability.
Examples
ThefollowingexamplesetstheOSPFdeadintervalto20seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfdead-interval20
RelatedCommands
ipospfhello-interval
showipospfinterface6706.3.20ipospfhello-interval
CommandPurpose
Tospecifytheintervalbetweenhellopacketsthattheswitchsendsontheinterface,
usetheipospfhello-intervalcommandininterfaceconfigurationmode.Toreturnto
thedefaulttime,usethenoformofthiscommand.
CommandSyntax
ipospfhello-intervalSECONDS
noipospfhello-interval
Parameter ParameterDescriptionParameterValue
SECONDS Interval(inseconds)
duringwhichtherouter
mustreceiveatleastone
hellopacketfroma
neighbororelsethat
neighborisremovedfrom
thepeerlistanddoesnot
participateinrouting.The
rangeis1to65535.The
valuemustbethesame
forallnodesonthe
network1-65535
CommandMode
InterfaceConfiguration
Default
10seconds(Ethernet)
30seconds(non-broadcast)671Usage
Thisvalueisadvertisedinthehellopackets.Thesmallerthehellointerval,thefaster
topologicalchangeswillbedetected,butmoreroutingtrafficwillensue.Thisvalue
mustbethesameforallroutersandaccessserversonaspecificnetwork.
Examples
Thefollowingexamplesetstheintervalbetweenhellopacketsto15seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfhello-interval15
RelatedCommands
ipospfdead-interval
6.3.21ipospfmessage-digest-keymd5
CommandPurpose
ToenableOpenShortestPathFirst(OSPF)MessageDigest5(MD5)authentication,
usetheipospfmessage-digest-keycommandininterfaceconfigurationmode.To
removeanoldMD5key,usethenoformofthiscommand.
CommandSyntax
ipospfmessage-digest-keyKEY-IDmd5(8|)KEY
noipospfmessage-digest-keyKEY-ID
Parameter ParameterDescriptionParameterValue
KEY-ID Anidentifierintherange
from1to2551-255
(8|) Specifiesahidden
passwordwillfollow-
KEY Alphanumericpasswordof
upto16bytesAstringwith1-16
characters672CommandMode
InterfaceConfiguration
Default
OSPFMD5authenticationisdisabled.
Usage
Allroutersaccessthesamenetwork/subnetworksharethesamepasswordwhen
usingthistypeofauthentication.ForeveryOSPFpacket,thepasswordisusedfor
generating/examiningthemessagedigestwhichisatthetailoftheOSPFpacket.
ThismessagedigestisprocessedbyOSPFpacketandpassword.Theremay
multiplepasswordbeactivatedonthesameinterface,thiscommandlinealways
usedtotransitsmoothlytothenewpasswordfromtheoldone.
Examples
Thefollowingexamplesetsanewkey19withthepassword8ry4222:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfmessage-digest-key10md5xvv560qle
Switch(config-if)#ipospfmessage-digest-key19md58ry4222
Thefollowingexamplesetsanewkey2withtheencryptpassword
91c38996a1aa5699:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfmessage-digest-key2md5891c38996a1aa5699
RelatedCommands
areaauthentication
servicepassword-encryption
ipospfauthentication6736.3.22ipospfmtu
CommandPurpose
TosettheMTUvaluewhensendingDatabaseDescriptor(DD)packets,usetheip
ospfmtucommandininterfaceconfigurationmode.Torestoreadefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ipospfmtuMTU-VALUE
noipospfmtu
Parameter ParameterDescriptionParameterValue
MTU-VALUE MTUvalue 576-65535
CommandMode
InterfaceConfiguration
Default
Decidedbyinterfacemtu
Usage
WheneverOSPFconstructspackets,itusesinterfaceMTUsizeasMaximumIP
packetsize.ThiscommandforcesOSPFtousethespecifiedvalueoverridingthe
actualinterfaceMTUsize.
ThiscommandallowsanadministratortoconfiguretheMTUsizerecognizedbythe
OSPFprotocol.ItdoesnotconfiguretheMTUsettingsonthekernel.OSPFwillnot
recognizeMTUsizeconfigurationchangesmadetothekerneluntiltheMTUsizeis
updatedthroughtheCLI.
Examples
ThefollowingexamplesetsanewMTUvaluewhensendingOSPFDDpackets:674Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfmtu1280
RelatedCommands
ipospfmtu-ignore
6.3.23ipospfmtu-ignore
CommandPurpose
TodisableOpenShortestPathFirst(OSPF)maximumtransmissionunit(MTU)
mismatchdetectiononreceivingDatabaseDescriptor(DD)packets,usetheipospf
mtu-ignorecommandininterfaceconfigurationmode.Toresettodefault,usetheno
formofthiscommand.
CommandSyntax
ipospfmtu-ignore
noipospfmtu-ignore
CommandMode
InterfaceConfiguration
Default
OSPFMTUmismatchdetectionisenabled.
Usage
OSPFcheckswhetherneighborsareusingthesameMTUonacommoninterface.
ThischeckisperformedwhenneighborsexchangeDDpackets.IfthereceivingMTU
intheDDpacketishigherthantheIPMTUconfiguredontheincominginterface,
OSPFadjacencywillnotbeestablished.
Examples
ThefollowingexampledisablesMTUmismatchdetectiononreceivingDDpackets:675Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfmtu-ignore
RelatedCommands
ipospfmtu
6.3.24ipospfpriority
CommandPurpose
Tosettherouterpriority,whichhelpsdeterminethedesignatedrouterforthisnetwork,
usetheipospfprioritycommandininterfaceconfigurationmode.Toreturntothe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
ipospfpriorityNUMBER-VALUE
noipospfpriority
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Anumbervaluethat
specifiesthepriorityofthe
router.0-255
CommandMode
InterfaceConfiguration
Default
Priorityof1
Usage
Whentworoutersattachedtoanetworkbothattempttobecomethedesignated
router,theonewiththehigherrouterprioritytakesprecedence.Ifthereisatie,the
routerwiththehigherrouterIDtakesprecedence.Arouterwitharouterprioritysetto676zeroisineligibletobecomethedesignatedrouterorbackupdesignatedrouter.
Routerpriorityisconfiguredonlyforinterfacestomulti-accessnetworks(inother
words,nottopoint-to-pointnetworks).
ThispriorityvalueisusedwhenyouconfigureOpenShortestPathFirst(OSPF)for
non-broadcastnetworksusingtheneighborrouterconfigurationcommandforOSPF.
Examples
Thefollowingexamplesetstherouterpriorityvalueto4:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfpriority4
RelatedCommands
ipospfnetwork
neighbor(OSPF)
6.3.25ipospfretransmit-interval
CommandPurpose
Tospecifythetimebetweenlink-stateadvertisement(LSA)retransmissionsfor
adjacenciesbelongingtotheinterface,usetheipospfretransmit-intervalcommand
ininterfaceconfigurationmode.Toreturntothedefaultvalue,usethenoformofthis
command.
CommandSyntax
ipospfretransmit-intervalSECONDS
noipospfretransmit-interval
Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)between
retransmissions.The
defaultis5seconds1-65535seconds677CommandMode
InterfaceConfiguration
Default
5seconds
Usage
WhenaroutersendsanLSAtoitsneighbor,itkeepstheLSAuntilitreceivesback
theacknowledgmentmessage.Iftherouterreceivesnoacknowledgment,itwill
resendtheLSA.Thesettingofthisparametershouldbeconservative,orneedless
retransmissionwillresult.Thevalueshouldbelargerforseriallinesandvirtuallinks.
Examples
Thefollowingexamplesetstheretransmitintervalvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospfretransmit-interval8
RelatedCommands
None
6.3.26ipospftransmit-delay
CommandPurpose
Tosettheestimatedtimerequiredtosendalink-stateupdatepacketontheinterface,
usetheipospftransmit-delaycommandininterfaceconfigurationmode.Toreturnto
thedefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipospftransmit-delaySECONDS
noipospftransmit-delay678Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)oflink
statetransmitdelay.The
defaultis1seconds1-65535
CommandMode
InterfaceConfiguration
Default
1second
Usage
Link-stateadvertisements(LSAs)intheupdatepacketmusthavetheirages
incrementedbytheamountspecifiedinthesecondsargumentbeforetransmission.
Thevalueassignedshouldtakeintoaccountthetransmissionandpropagation
delaysfortheinterface.
Ifthedelayisnotaddedbeforetransmissionoveralink,thetimeinwhichtheLSA
propagatesoverthelinkisnotconsidered.Thissettinghasmoresignificanceonvery
low-speedlinks.
Examples
Thefollowingexamplesetstheretransmitdelayvalueto3seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipospftransmit-delay3
RelatedCommands
None6796.3.27ipospfnetwork
CommandPurpose
ToconfiguretheOpenShortestPathFirst(OSPF)networktypetoatypeotherthan
thedefaultforagivenmedium,usetheipospfnetworkcommandininterface
configurationmode.Toreturntothedefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipospfnetwork(broadcast|non-broadcast|point-to-multipoint[non-broadcast]|
point-to-point)
noipospfnetwork
Parameter ParameterDescriptionParameterValue
broadcast Setsthenetworktypeto
broadcast.(Suchas
Ethernet,FDDI)-
non-broadcast Setsthenetworktypeto
non-broadcastmulti-
access(NBMA)-
point-to-multipoint Setsthenetworktypeto
point-to-multipoint.-
point-to-point Setsthenetworktypeto
point-to-point-
CommandMode
InterfaceConfiguration
Default
Dependsonthenetworktype.680Usage
Usingthisfeature,youcanconfigurebroadcastnetworksasNBMAnetworkswhen,
forexample,routersinyournetworkdonotsupportmulticastaddressing.Youcan
alsoconfigurenon-broadcastmulti-accessnetworksasbroadcastnetworks.This
featuresavesyoufromneedingtoconfigureneighbors.
ConfiguringNBMAnetworksaseitherbroadcastornon-broadcastassumesthat
therearevirtualcircuitsfromeveryroutertoeveryrouterorfullymeshednetworks.
However,thereareotherconfigurationswherethisassumptionisnottrue.For
example,apartiallymeshednetwork.Inthesecases,youcanconfiguretheOSPF
networktypeasapoint-to-multipointnetwork.Routingbetweentworoutersthatare
notdirectlyconnectedwillgothroughtherouterthathasvirtualcircuitstoboth
routers.Youneednotconfigureneighborswhenusingthisfeature.
Ifthiscommandisissuedonaninterfacethatdoesnotallowit,thiscommandwillbe
ignored.
OSPFhastwofeaturesrelatedtopoint-to-multipointnetworks.Onefeatureappliesto
broadcastnetworks;theotherfeatureappliestonon-broadcastnetworks:
Onpoint-to-multipoint,broadcastnetworks,youcanusetheneighborcommand,and
youmustspecifyacosttothatneighbor.
Onpoint-to-multipoint,non-broadcastnetworks,youmustusetheneighborcommand
toidentifyneighbors.Assigningacosttoaneighborisoptional.
Examples
ThefollowingexamplesetsyourOSPFnetworkasanon-broadcastnetwork:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress192.168.77.17/24
Switch(config-if)#ipospfnetworknon-bradcast
RelatedCommands
Neighbor(OSPF)6816.3.28neighbor(OSPF)
CommandPurpose
ToconfigureOpenShortestPathFirst(OSPF)routersinterconnectingtonon-
broadcastnetworks,usetheneighborcommandinrouterconfigurationmode.To
removeaconfiguration,usethenoformofthiscommand.
CommandSyntax
neighborIP_ADDR{priorityNUMBER|poll-intervalSECONDS}
neighborIP_ADDR(costCOST|)
noneighborIP_ADDR{priority|poll-interval}
noneighborIP_ADDR(cost|)
Parameter ParameterDescriptionParameterValue
IP_ADDR InterfaceIPaddressofthe
neighborIPv4Address
priorityNUMBER (Optional)Anumberthat
indicatestherouterpriority
valueofthenon-broadcast
neighborassociatedwith
theIPaddressspecified.
Thedefaultis0.This
keyworddoesnotapplyto
point-to-multipoint
interfaces0-255
poll-interval -
cost -
CommandMode
RouterConfiguration682Default
Noconfigurationisspecified.
Usage
Oneneighborentrymustbeincludedintheswitchconfigurationforeachknownnon-
broadcastnetworkneighbor.Theneighboraddressmustbethetheprimaryaddress
oftheinterface.
Ifaneighboringrouterhasbecomeinactive(hellopacketshavenotbeenreceivedfor
theRouterDeadIntervalperiod),itmaystillbenecessarytosendhellopacketsto
thedeadneighbor.ThesehellopacketswillbesentatareducedratecalledPoll
Interval.
Whentherouterfirststartsup,itsendsonlyhellopacketstothoserouterswith
nonzeropriority,thatis,routersthatareeligibletobecomedesignatedrouters(DRs)
andbackupdesignatedrouters(BDRs).AftertheDRandBDRareselected,DRand
BDRwillthenstartsendinghellopacketstoallneighborsinordertoformadjacencies.
Examples
Thefollowingexampledeclaresarouterataddress192.168.3.4onanon-broadcast
network,withapriorityof1andapollintervalof180seconds:
Switch#configureterminal
Switch(config)#routerospf
Switch(config-router)#neighbor192.168.3.4priority1poll-interval180
RelatedCommands
ipospfpriority
6.3.29networkarea(OSPF)
CommandPurpose
TodefinetheinterfacesonwhichOpenShortestPathFirst(OSPF)runsandtodefine
theareaIDforthoseinterfaces,usethenetworkareacommandinrouter
configurationmode.TodisableOSPFroutingforinterfacesdefinedwiththeaddress
wildcard-maskpair,usethenoformofthiscommand.683CommandSyntax
network{IP_ADDRWILDCARD-MASK|IP-ADDRESS/PREFIX-LENGTH}area
AREA-ID
nonetwork{IP-ADDRESSWILDCARD-MASK|IP-ADDRESS/PREFIX-LENGTH}
areaAREA-ID
Parameter ParameterDescriptionParameterValue
IP_ADDR InterfaceIPaddressofthe
neighborIPv4Address
WILDCARD-MASK IP-address-typemaskthat
includesdontcarebitsIPv4mask
PREFIX-LENGTH Prefixlengthforthe
network1-32
AREA-ID Areathatistobe
associatedwiththeOSPF
addressrange.Itcanbe
specifiedaseithera
decimalvalueorasanIP
addressIPaddressornumberin
therangeof0-
4294967295
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
TheIP-ADDRESSandWILDCARD-MASKargumentstogetherallowyoutodefine
oneormultipleinterfacestobeassociatedwithaspecificOSPFareausingasingle
command.684Examples
ThefollowingpartialexampleinitializesOSPFroutingprocess109,anddefinesfour
OSPFareas10.9.50.0,2,3,and0.Areas10.9.50.0,2,and3maskspecificaddress
ranges,andarea0enablesOSPFforallothernetworks:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.108.20.1/24
Switch(config)#routerospf109
Switch(config-router)#network10.108.20.0/24area10.9.50.0
Switch(config-router)#network10.108.0.0/16area2
Switch(config-router)#network10.109.10.0/24area3
Switch(config-router)#network0.0.0.0/0area0
RelatedCommands
routerospf
6.3.30overflowdatabaseexternal
CommandPurpose
Usethiscommandtoconfigurethesizeoftheexternaldatabaseandthetimethe
routerwaitsbeforeitsentriestoexittheoverflowstate.
Usethenoparameterwiththiscommandtoreverttodefault.
CommandSyntax
overflowdatabaseexternalMAXLSASRECOVERTIME
nooverflowdatabaseexternal
Parameter ParameterDescriptionParameterValue
MAXLSAS Themaximumnumberof
LSAs.Notethatthisvalue
shouldbethesame0-2147483647
RECOVERTIME Thenumberofseconds
therouterwaitsbefore
tryingtoexitthedatabase0-65535685CommandMode
RouterConfiguration
Default
None.
Usage
UsethiscommandtolimitthenumberofAS-external-LSAsaroutercanreceive,
onceitisinthewaitstate.Ittakesthenumberofsecondsspecifiedasthe
RECOVERTIMEtorecoverfromthisstate.
Examples
ThefollowingexampleshowssettingthemaximumnumberofLSAsandthetimeto
recoverfromoverflowstate:
Switch#configureterminal
Switch(config)#routerospf200
Switch(config-router)#network10.108.0.0/16area0
Switch(config-router)#overflowdatabaseexternal53
RelatedCommands
routerospf
6.3.31passive-interface(OSPF)
CommandPurpose
TodisablesendingroutingupdatesfortheOpenShortestPathFirst(OSPF)onan
interface,usethepassive-interfacecommandinrouterconfigurationmode.Tore-
enablethesendingofroutingupdates,usethenoformofthiscommand.
CommandSyntax
passive-interfaceIFNAME
nopassive-interfaceIFNAME686Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/tunnel/vlaninterfaces
CommandMode
RouterConfiguration
Default
Routingupdatesaresentontheinterface.
Usage
Ifyoudisablethesendingofroutingupdatesonaninterface,theparticularsubnet
willcontinuetobeadvertisedtootherinterfaces,andupdatesfromotherswitcheson
thatinterfacecontinuetobereceivedandprocessed.
Examples
Thefollowingexamplesetstheinterfaceeth-0-1aspassive:
Switch#configureterminal
Switch(config)#routerospf200
Switch(config-router)#network10.108.0.0/16area0
Switch(config-router)#passive-interfaceeth-0-1
RelatedCommands
routerospf
6.3.32redistribute(OSPF)
CommandPurpose
ToredistributeroutesfromoneroutingdomainintoOpenShortestPathFirst(OSPF)
routingdomain,usetheredistributecommandinrouterconfigurationmode.To
disableredistribution,usethenoformofthiscommand.687CommandSyntax
redistributePROTOCOL[route-mapWORD][tagTAG-VALUE][metricMETRIC-
VALUE][metric-typeTYPE-VALUE]
noredistributePROTOCOL[metricMETRIC-VALUE][metric-typeTYPE-VALUE]
Parameter ParameterDescriptionParameterValue
route-mapWORD Routemapreference.Astringwith1-20
characters
PROTOCOL (Optional)Thenameofa
routingprotocol,orthe
keywordconnected,or
static.Ifyouspecifya
routingprotocoluseoneofthefollowing
keywords:static
connectedbgp,andrip
tagTAG-VALUE Settagforroutes
redistributedintoOSPF0-4294967295
metricMETRIC-VALUE(Optional)When
redistributingother
processestoanOSPF
process,thedefaultmetric
is20whennometricvalue
isspecified0-16777214
metric-typeTYPE-VALUEForOSPF,theexternallink
typeassociatedwiththe
defaultrouteadvertised
intotheOSPFrouting
domain.Itcanbeoneof
twovalues1-2
CommandMode
RouterConfiguration688Default
Routeredistributionisdisabled.
metricmetric-value:20
metric-typeTYPE-VALUE:Type2externalroute
Usage
Themetricvaluespecifiedintheredistributecommandsupersedesthemetricvalue
specifiedusingthedefault-metriccommand.
Examples
ThefollowingexampleredistributethestaticroutesintoOSPFwithmetric10:
Switch#configureterminal
Switch(config)#routerospf119
Switch(config-router)#network10.108.0.0/16area100
Switch(config-router)#redistributestaticmetric10
RelatedCommands
default-metric
6.3.33router-id(OSPF)
CommandPurpose
TouseafixedrouterID,usetherouter-idcommandinrouterconfigurationmode.To
forceOpenShortestPathFirst(OSPF)tousethepreviousOSPFrouterIDbehavior,
usethenoformofthiscommand.
CommandSyntax
router-idIP_ADDR
norouter-id
Parameter ParameterDescriptionParameterValue689IP_ADDR RouterIDinIPaddress
formatIPv4Address
CommandMode
RouterConfiguration
Default
NoOSPFroutingprocessisdefined.
Usage
YoucanconfigureanarbitraryvalueintheIPaddressformatforeachrouter.
However,eachrouterIDmustbeunique.
IfthiscommandisusedonanOSPFrouterprocesswhichisalreadyactive(has
neighbors),thenewrouter-IDisusedatthenextreloadoratamanualOSPF
processrestart.TomanuallyrestarttheOSPFprocess,usetheclearipospf
command.
Examples
Thefollowingexamplespecifiesafixedrouter-id:
Switch#configureterminal
Switch(config)#routerospf119
Switch(config-router)#router-id10.1.1.1
RelatedCommands
clearipospf
routerospf
6.3.34routerospf
CommandPurpose
ToconfigureanOpenShortestPathFirst(OSPF)routingprocess,usetherouterospf
commandinglobalconfigurationmode.ToterminateanOSPFroutingprocess,use
thenoformofthiscommand.690CommandSyntax
routerospf[PROCESS-ID[vrfVPN-NAME]]
norouterospf[PROCESS-ID]
Parameter ParameterDescriptionParameterValue
PROCESS-ID Internallyused
identificationparameterfor
anOSPFrouting
process.Ifyoudontassign
aPROCESS-ID,itenter
processID0.ProcessID0
willbeclosedifyouuse
thenoformofthis
commandanddontassign
PORCESS-ID.1-65535
vrfVPN-NAME (Optional)Specifiesthe
nameoftheVPNrouting
andforwarding(VRF)
instancetoassociatewith
OSPFVRFprocessesAstringwith1-15
characters
CommandMode
GlobalConfiguration
Default
NoOSPFroutingprocessisdefined.
Usage
YoucanspecifymultipleOSPFroutingprocessesineachrouter.Ifyoudonotspecify
theprocess-id,theprocess-idwillbethedefault0.691Examples
ThefollowingexampleconfiguresanOSPFroutingprocessandassignaprocess
numberof109:
Switch#configureterminal
Switch(config)#routerospf109
Switch(config-router)#
RelatedCommands
networkarea
6.3.35ospfrestart
CommandPurpose
Toenableospfgracefulrestartfunction,usethecommandinglobalconfiguration
mode.TodisabletheospfGR,usethenoformofthiscommand.
CommandSyntax
ospfrestartietf
noospfrestartietf
CommandMode
GlobalConfiguration
Default
DisableGR
Usage
Itonlysupportsietfgraceful-restartandonlydoesnotsupportplannedoutage.
Examples
ThefollowingexampleenablesospfGRfunction.:692Switch#configureterminal
Switch(config)#ospfrestartietf
RelatedCommands
None
6.3.36ospfrestarthelper
CommandPurpose
Toenableospfgracefulrestarthelperfunction,usethecommandinglobal
configurationmode.Todisablethis,usethenoformofthiscommand.
CommandSyntax
ospfrestarthelperenable
noospfrestarthelperenable
CommandMode
GlobalConfiguration
Default
DisableGRHelper
Usage
Itonlysupportsietfgraceful-restart.
Examples
ThefollowingexampleenablesospfGRHelperfunction.:
Switch#configureterminal
Switch(config)#ospfrestarthelperenable
RelatedCommands
None6936.3.37ospfrestartperiod
CommandPurpose
Tosetospfgracefulrestartperiod,usethecommandinglobalconfigurationmode.To
recoverdefaultvalue,usethenoformofthiscommand.
CommandSyntax
ospfrestartgrace-periodSECONDS
noospfrestartgrace-period
Parameter ParameterDescriptionParameterValue
SECONDS Themaximumperiod(in
seconds)ofarouterinGR
state.1-1800
CommandMode
GlobalConfiguration
Default
120seconds
Usage
None
Examples
ThefollowingexamplesetsospfGRperiod:
Switch#configureterminal
Switch(config)#ospfrestartgrace-period200
RelatedCommands
None6946.3.38summary-address(OSPF)
CommandPurpose
TocreateaggregateaddressesforOpenShortestPathFirst(OSPF),usethe
summary-addresscommandinrouterconfigurationmode.Torestorethedefault,use
thenoformofthiscommand.
CommandSyntax
summary-addressPREFIX/PREFIX-LENGTH(not-advertise|tagTAG-VALUE|)
nosummary-addressPREFIX/PREFIX-LENGTH(not-advertise|tagTAG-VALUE|)
Parameter ParameterDescriptionParameterValue
PREFIX IProuteprefixforthe
destinationIPv4Address
PREFIX-LENGTH Prefixlengthforthe
network1-32
not-advertise (Optional)Suppressroutes
thatmatchthespecified
prefix/maskpair.This
keywordappliestoOSPF
only-
tagTAG-VALUE Routetagvalue.The
defaulttagis0.0-4294967295
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.695Usage
Routeslearnedfromotherroutingprotocolscanbesummarized.Themetricusedto
advertisethesummaryisthelargestmetricofallthemorespecificroutes.This
commandhelpsreducethesizeoftheroutingtable.
UsingthiscommandforOSPFcausesanOSPFAutonomousSystemBoundary
Router(ASBR)toadvertiseoneexternalrouteasanaggregateforallredistributed
routesthatarecoveredbytheaddress.ForOSPF,thiscommandsummarizesonly
routesfromotherroutingprotocolsthatarebeingredistributedintoOSPF.Usethe
arearangecommandforroutesummarizationbetweenOSPFareas.
OSPFdoesnotsupportthesummary-address0.0.0.0/0command.
Examples
Inthefollowingexample,thesummaryaddress10.1.0.0includesaddress10.1.1.0,
10.1.2.0,10.1.3.0,andsoon.Onlytheaddress10.1.0.0isadvertisedinanexternal
link-stateadvertisement:
Switch#configureterminal
Switch(config)#routerospf
Switch(config-router)#summary-address10.1.0.0/16
RelatedCommands
arearange
6.3.39showipospf
CommandPurpose
TodisplaygeneralinformationaboutOpenShortestPathFirst(OSPF)routing
processes,usetheshowipospfcommandinuserEXECorprivilegedEXECmode.
CommandSyntax
showipospf(PROCESS-ID|)
Parameter ParameterDescriptionParameterValue696PROCESS-ID Internallyused
identificationparameterfor
anOSPFroutingprocess.
Itislocallyassignedand
canbeanypositive
integer.Auniquevalueis
assignedforeachOSPF
routingprocess0-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipospfcommand:
Switch#showipospf
RoutingProcess"ospf100"withID11.11.11.11
Processuptimeis0minute
ProcessboundtoVRFdefault
ConformstoRFC2328,andRFC1583Compatibilityflagisdisabled
SupportsonlysingleTOS(TOS0)routes
SupportsopaqueLSA
SPFscheduledelay5secs,HoldtimebetweentwoSPFs10secs
Refreshtimer10secs
NumberofincommingcurrentDDexchangeneighbors0/5
NumberofoutgoingcurrentDDexchangeneighbors0/5
NumberofexternalLSA0.Checksum0x000000
NumberofopaqueASLSA0.Checksum0x000000
Numberofnon-defaultexternalLSA0
ExternalLSAdatabaseisunlimited.
NumberofLSAoriginated1
NumberofLSAreceived3
Numberofareasattachedtothisrouter:1
Area1697Numberofinterfacesinthisareais1(1)
Numberoffullyadjacentneighborsinthisareais1
Numberoffullyadjacentvirtualneighborsthroughthisareais0
Areahasnoauthentication
SPFalgorithmlastexecuted00:00:38.995ago
SPFalgorithmexecuted1times
NumberofLSA4.Checksum0x0235ff
RelatedCommands
None
6.3.40showipospfborder-routers
CommandPurpose
TodisplaytheinternalOpenShortestPathFirst(OSPF)routingtableentriestoan
AreaBorderRouter(ABR)andAutonomousSystemBoundaryRouter(ASBR),use
theshowipospfborder-routerscommandinprivilegedEXECmode.
CommandSyntax
showipospfborder-routers
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipospfborder-routerscommand:
Switch#showipospfborder-routers
OSPFprocess100internalRoutingTable698Codes:i-Intra-arearoute,I-Inter-arearoute
i22.22.22.22[1]via172.10.1.2,eth-0-10,ABR,Area1
RelatedCommands
None
6.3.41showipospfdatabase
CommandPurpose
TodisplaylistsofinformationrelatedtotheOpenShortestPathFirst(OSPF)
databaseforaspecificrouter,usetheshowipospfdatabasecommandinEXEC
mode.
CommandSyntax
showipospf(PROCESS-ID|)databasedatabase-summary
showipospf(PROCESS-ID|)database(self-originate|max-age|adv-router
IP_ADDR|)
showipospf(PROCESS-ID|)database(asbr-summary|external|network|router
|summary|nssa-external|opaque-link|opaque-area|opaque-as)(self-originate|
adv-routerIP_ADDR|)
showipospf(PROCESS-ID|)database(asbr-summary|external|network|router
|summary|nssa-external|opaque-link|opaque-area|opaque-as)LINK-STATE-ID
(self-originate|adv-routerA.B.C.D|)]
Parameter ParameterDescriptionParameterValue
PROCESS-ID Internallyused
identificationparameterfor
anOSPFroutingprocess.
Itislocallyassignedand
canbeanypositive
integer.Auniquevalueis
assignedforeachOSPF
routingprocess1-65535699adv-routerIP_ADDR (Optional)Displaysallthe
LSAsofthespecified
router.IfnoIPaddressis
included,theinformationis
aboutthelocalrouteritself
(inthiscase,thesameas
self-originate)IPv4Address
LINK-STATE-ID (Optional)Portionofthe
Internetenvironmentthat
isbeingdescribedbythe
advertisement.Thevalue
entereddependsonthe
advertisementsLStype.It
mustbeenteredinthe
formofanIPaddressIPv4Address
asbr-summary (Optional)Displays
informationonlyaboutthe
autonomoussystem
boundaryroutersummary
LSAs-
external (Optional)Displays
informationonlyaboutthe
externalLSAs-
network (Optional)Displays
informationonlyaboutthe
networkLSAs-
router (Optional)Displays
informationonlyaboutthe
routerLSAs-
self-originate (Optional)Displaysonly
self-originatedLSAsfrom
thelocalrouter-700summary (Optional)Displays
informationonlyaboutthe
summaryLSAs-
nssa-external (Optional)Displays
informationonlyaboutthe
nssa-externalLSAs-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipospfdatabasecommandwhenno
argumentsorkeywordsareused:
Switch#showipospfdatabase
RouterLinkStates(Area3[Stub])
LinkIDADVRouterAgeSeq#CkSumLinkcount
10.0.0.110.0.0.15460x800000890x45671
RelatedCommands
None
6.3.42showipospfinterface
CommandPurpose
TodisplayOpenShortestPathFirst(OSPF)-relatedinterfaceinformation,usethe
showipospfinterfacecommandinEXECmode.701CommandSyntax
showipospfinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME (Optional)Interfacename.
Iftheinterface-name
argumentisincluded,only
informationforthe
specifiedinterfaceis
includedSupport
physical/aggregation/loopb
ack/tunnel/vlaninterfaces
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputoftheshowipospfinterfacecommandwheneth-0-3
isspecified:
Switch#showipospfinterfaceeth-0-3
eth-0-3isup,lineprotocolisup
InternetAddress3.3.3.1/24,Area3[Stub],MTU1500
ProcessID0,RouterID10.0.0.1,NetworkTypeNBMA,Cost:1
TransmitDelayis1sec,StateDR,Priority1
DesignatedRouter(ID)10.0.0.1,InterfaceAddress3.3.3.1
Nobackupdesignatedrouteronthisnetwork
Timerintervalsconfigured,Hello30,Dead120,Wait120,Retransmit5
Helloduein00:00:17
NeighborCountis1,Adjacentneighborcountis0
CryptSequenceNumberis1218176990
Helloreceived0sent80,DDreceived0sent0
LS-Reqreceived0sent0,LS-Updreceived0sent0
LS-Ackreceived0sent0,Discarded0702RelatedCommands
None
6.3.43showipospfneighbor
CommandPurpose
TodisplayOpenShortestPathFirst(OSPF)-neighborinformationonaper-interface
basis,usetheshowipospfneighborcommandinprivilegedEXECmode.
CommandSyntax
showipospfneighbor[IFNAME][NEIGHBOR-ID][detail][all]
Parameter ParameterDescriptionParameterValue
IFNAME (Optional)Interfacename.
Iftheinterface-name
argumentisincluded,only
informationforthe
specifiedinterfaceis
included-
NEIGHBOR-ID (Optional)NeighborID-
detail (Optional)Displaysall
neighborsgivenindetail
(listsallneighbors)-
CommandMode
PrivilegedEXEC
Default
None
Usage
None703Examples
Thefollowingissampleoutputfromtheshowipospfneighborcommandshowinga
singlelineofsummaryinformationforeachneighbor:
Switch#showipospfneighbor
NeighborIDPriStateDeadTimeAddressInterface
10.199.199.1371FULL/DR0:00:31192.168.80.37eth-0-1
172.16.48.11FULL/DROTHER0:00:33172.16.48.1vlan1
172.16.48.2001FULL/DROTHER0:00:33172.16.48.200vlan2
10.199.199.1375FULL/DR0:00:33172.16.48.189eth-0-2
RelatedCommands
None
6.3.44showipospfsummary-address
CommandPurpose
TodisplaythesummaryaddressesredistributionInformationusedbyOSPF,usethe
showipospfsummary-addresscommandinprivilegedEXECmode.
CommandSyntax
showipospfsummary-address
CommandMode
PrivilegedEXEC
Default
None
Usage
Metricequalsto16777215meansnotadvertise.
Examples
Thefollowingexampleshowshowtouseshowipospfsummary-addresscommand:704Switch#showipospfsummary-address
OSPFprocess0:
10.0.0.0/8Metric20,Type2,Tag0
20.0.0.0/8Metric16777215,Type0,Tag0
RelatedCommands
None
6.3.45showipospfroutesummary
CommandPurpose
TodisplaythesummaryofroutesusedbyOSPF,usetheshowipospfroute
summarycommandinprivilegedEXECmode.
CommandSyntax
showipospf(PROCESS-ID|)routesummary
Parameter ParameterDescriptionParameterValue
PROCESS-ID (Optional)Internal
identification.Itislocally
assignedandcanbeany
positiveinteger.The
numberusedhereisthe
numberassigned
administrativelywhen
enablingtheOSPFrouting
process0-65535
CommandMode
PrivilegedEXEC
Default
None705Usage
None
Examples
Thefollowingexampleshowshowtouseshowipospfroutesummarycommand:
Switch#showipospfroutesummary
OSPFRouterwithID(10.10.10.10)(ProcessID0)
RouteType Count
(C)Connected 1
(D)Discard 1
(O)Intraarea 0
(IA)Interarea 0
(E1)Exttype1 0
(E2)Exttype2 0
(N1)NSSAExttype1 0
(N2)NSSAExttype2 0
Total 2
RelatedCommands
None
6.3.46showipprotocolsospf
CommandPurpose
TodisplayIProutingprotocolprocessparametersandstatisticsofOpenShortest
PathFirst(OSPF).usetheshowipospfprotocolsospfcommandinprivilegedEXEC
mode.
CommandSyntax
showipprotocolsospf(vrfWORD)
Parameter ParameterDescriptionParameterValue
vrf VPNRouting/Forwarding
instance-
WORD VPNRouting/Forwarding
instancenameAstringwith1-15
characters706CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtouseshowipprotocolsospfcommand:
Switch#showipprotocolsospf
RoutingProtocolis"ospf0"
Redistributing:
RoutingforNetworks:
Distance:(defaultis110)
RelatedCommands
None
6.3.47showipospfprocesses-count
CommandPurpose
Todisplaythecurrentnumberandmaxnumberofrouterospfprocesses.usethe
showipospfprotocolsospfcommandinprivilegedEXECmode.
CommandSyntax
showipospfprocesses-count
CommandMode
PrivilegedEXEC707Default
None
Usage
None
Examples
Thefollowingexampleshowshowtouseshowipospfprocesscount:
DUT1#showipospfprocesses-count
OSPFprocessescurrentcount0
OSPFprocessesmaxcount200
RelatedCommands
None
6.3.48timersspf
CommandPurpose
TosetthetimeofOpenShortestPathFirst(OSPF)calculatingshortestpathfirst
(SPF).Torestorethedefault,usethenoformofthiscommand.
CommandSyntax
timersspfSPF-STARTSPF-HOLD
notimersspf
Parameter ParameterDescriptionParameterValue
SPF-START IndicatestheinitialSPF
scheduledelayinseconds.0-2147483647708SPF-HOLD Indicatestheminimum
holdtimebetweentwo
consecutiveSPF
calculations.0-2147483647
CommandMode
RouterConfiguration
Default
spf-start:5seconds
spf-hold:10seconds.
Usage
None
Examples
Thefollowingexampleshowsarouterconfiguredwiththestart,andholdvaluesfor
thetimersspfcommandsetat5,and10seconds,respectively:
Switch#configureterminal
Switch(config)#routerospf1
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#timersspf510
Switch(config-router)#redistributestatic
Switch(config-router)#network10.21.21.0/24area0
Switch(config-router)#network10.22.22.0/24area00
RelatedCommands
None
6.3.49max-concurrent-dd
CommandPurpose
TospecifyMaximumnumberallowedtoprocessDDconcurrently,usethemax-
concurrent-ddcommandinrouterconfigurationmode.Torestoredefaultvalue,use
thenoformofthiscommand709CommandSyntax
max-concurrent-ddNUMBER-VALUE
nomax-concurrent-dd
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE NumberofDDprocess1-65535
CommandMode
RouterConfiguration
Default
5
Usage
None
Examples
Thefollowingexampleshowshowtousemax-concurrent-ddcommand:
Switch#configureterminal
Switch(config)#routerospf100
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#max-concurrent-dd10
RelatedCommands
None
6.3.50maximum-area
CommandPurpose
TospecifyMaximumnumberofospfarea,usethemaximum-areacommandinrouter
configurationmode.Torestoredefaultvalue,usethenoformofthiscommand710CommandSyntax
maximum-areaNUMBER-VALUE
nomaximum-area
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Numberofmax-area 1-4294967294
CommandMode
RouterConfiguration
Default
3000
Usage
ThiscommandusedtospecifyMaximumnumberofospfarea.
Examples
Thefollowingexampleshowshowtousemaximum-areacommand:
Switch#configureterminal
Switch(config)#routerospf100
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#maximum-area100
RelatedCommands
None
6.3.51refreshtimer
CommandPurpose
ToSetrefreshtimeroflinkstatedatabase,usetherefreshtimercommandinrouter
configurationmode.Torestoredefaultvalue,usethenoformofthiscommand711CommandSyntax
refreshtimerNUMBER-VALUE
norefreshtimer
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE NumberofDDprocess10-1800
CommandMode
RouterConfiguration
Default
10seconds.
Usage
Usersarenotadvisedtomodifytheconfiguration
Examples
Thefollowingexampleshowshowtouserefreshtimercommand:
Switch#configureterminal
Switch(config)#routerospf100
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#refreshtimer100
RelatedCommands
None
6.3.52ipospfbfd
CommandPurpose
UsethiscommandtoenableIPBFDforospfonaninterface.
UsethenoformofthiscommandtodisableIPBFDforospfonaninterface.712CommandSyntax
ipospfbfd
noipospfbfd
CommandMode
InterfaceConfiguration
Default
BydefaultIPBFDforospfisdisabledontheinterface.
Usage
UsethiscommandtoenableIPBFDforospfonaninterface.
TheIPBFDsessionshouldbecreatedwhenospfneighboriscreatedandthe
neighborsstateislargethantwo-way.
TheIPBFDsessionshouldbedestroyedwhenospfneighborisdeleteorthe
neighborsstateisnotlargethantwo-way.
Examples
Inthefollowingexample,IPBFDforospfisenabledonthisinterface:
Switch#configureterminal
Switch(config-if)#ipospfbfd
RelatedCommands
None
6.3.53debugospf
CommandPurpose
UsethiscommandtospecifyalldebuggingoptionsforOSPF.Usethenoparameter
withthiscommandtodisablethisfunction.713CommandSyntax
debugospf(all|)
nodebugospf(all|)
Parameter ParameterDescriptionParameterValue
all enablealldebugging -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfall
RelatedCommands
None
6.3.54debugospfbfd
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFbfd.Usethenoparameter
withthiscommandtodisablethisfunction.
CommandSyntax
debugospfbfd
nodebugospfbfd714CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfbfd
RelatedCommands
None
6.3.55debugospfevents
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFeventtroubleshooting.
Usethiscommandwithoutparameterstoturnonalltheoptions.Usetheno
parameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugospfevents(abr|asbr|lsa|os|router|vlink|)
nodebugospfevents(abr|asbr|lsa|os|router|vlink|)
Parameter ParameterDescriptionParameterValue
abr DisplaysABRevents -
asbr DisplaysASBRevents-
lsa DisplaysLSAevents -715os DisplaysOSinteraction
events-
router Displaysothersrouter
events-
vlink Displaysvirtuallinkevents-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfeventslsa
RelatedCommands
None
6.3.56debugospfifsm
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFInterfaceFiniteState
Machine(IFSM)troubleshooting.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugospfifsm(status|events|timers|)
nodebugospfifsm(status|events|timers|)716Parameter ParameterDescriptionParameterValue
status DisplaysIFSMstatus
information-
events DisplaysIFSMevent
information-
timers DisplaysIFSMTIMER
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfifsmtimers
RelatedCommands
None
6.3.57debugospfnfsm
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFNeighborFiniteState
Machine(NFSM)troubleshooting.
Usethenoparameterwiththiscommandtodisablethisfunction.717CommandSyntax
debugospfnfsm(status|events|timers|)
nodebugospfnfsm(status|events|timers|)
Parameter ParameterDescriptionParameterValue
status DisplaysNFSMstatus
information-
events DisplaysNFSMevent
information-
timers DisplaysNFSMTIMER
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfnfsmtimers
RelatedCommands
None
6.3.58debugospflsa
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFLinkStateAdvertisements
(LSA)troubleshooting.718Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugospflsa(flooding|generate|install|maxage|refresh|)
nodebugospflsa(flooding|generate|install|maxage|refresh|)
Parameter ParameterDescriptionParameterValue
flooding DisplaysLSAflooding -
generate DisplaysLSAgenerate-
install DisplaysLSAinstallation-
maxage Displaysthemaximumage
ofLSAinseconds-
refresh DisplaysLSArefresh -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospflsainstall
RelatedCommands
None7196.3.59debugospfpacket
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFpackets.
Usethenoparameterwiththiscommandtodisablethisfunction..
CommandSyntax
debugospfpacketPARAMETERS
nodebugospfpacketPARAMETERS
PARAMETERS=dd|detail|hello|ls-ack|ls-request|ls-update|recv|send
Parameter ParameterDescriptionParameterValue
dd Specifiesdebuggingfor
OSPFdatabase
descriptions-
detail Setsthedebugoptionto
detailedinformation-
hello Specifiesdebuggingfor
OSPFhellopackets-
ls-ack Specifiesdebuggingfor
OSPFlinkstate
acknowledgments-
ls-request Specifiesdebuggingfor
OSPFlinkstaterequests-
ls-update Specifiesdebuggingfor
OSPFlinkstateupdates-
recv Specifiesthedebugoption
setforreceivedpackets-
send Specifiesthedebugoption
setforsentpackets-720CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfpacketddsenddetail
RelatedCommands
None
6.3.60debugospfroute
CommandPurpose
Usethiscommandtospecifywhichroutecalculationtodebug.Usethiscommand
withoutparameterstoturnonalltheoptions.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugospfroute(ase|ia|install|spf|)
nodebugospfroute(ase|ia|install|spf|)
Parameter ParameterDescriptionParameterValue
ase Specifiesthedebuggingof
externalroutecalculation-
ia Specifiesthedebuggingof
Inter-Arearoutecalculation-721install Specifiesthedebuggingof
routeinstallation-
spf Specifiesthedebuggingof
SPFcalculation-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugospfrouteinstall
RelatedCommands
None
6.3.61showdebuggingospf
CommandPurpose
UsethiscommandtodisplaythesetOSPFdebuggingoption..
CommandSyntax
showdebuggingospf
CommandMode
PrivilegedEXEC722Default
None
Usage
None
Examples
Thisisasampleoutputfromtheshowdebuggingospfcommand:
Switch#showdebuggingospf
OSPFdebuggingstatus:
OSPFpacketHellosenddebuggingison
OSPFpacketDatabaseDescriptionsenddebuggingison
OSPFpacketLinkStateRequestsenddebuggingison
OSPFpacketLinkStateUpdatesenddebuggingison
OSPFpacketLinkStateAcknowledgmentsenddebuggingison
OSPFrouteinstallationdebuggingison
RelatedCommands
None
6.3.62showresourceospf
CommandPurpose
UsethiscommandtodisplaytherouteresourcesusedbyOSPFprotocol.
CommandSyntax
showresourceospf
CommandMode
PrivilegedEXEC
Default
None723Usage
IfyoudonotuseOSPF,valueofcapabilityis0.
Examples
Thefollowingissampleoutputfromtheshowresourceospfcommand:
Switch#showresourceospf
OSPF
Resource UsedCapability
================================================
Routes 16144
RelatedCommands
showipospfroutesummary
6.3.63min-lsa-interval
CommandPurpose
Configurethe
minimumintervalbetweenthesameLSAs
CommandSyntax
min-lsa-intervalSECONDS
nomin-lsa-interval
Parameter ParameterDescriptionParameterValue
SECONDS Theminimuminterval
betweenthesameLSAs0-10
CommandMode
RouterConfiguration724Default
Thedefaultintervalis5
Usage
OnlyifyouuseOSPF,
youcanconfigurethevaluerangefrom0to10second
Examples
ThefollowingisasampletoconfiguretheMinLSInteval:
Switch#configureterminal
Switch(config)#routerospf
Switch(config-router)#min-lsa-interval3
RelatedCommands
None
6.4RouteMapCommands
6.4.1route-map
CommandPurpose
Todefinetheconditionsforredistributingroutesfromoneroutingprotocolinto
another,ortoenablepolicyroutinginbgp,usetheroute-mapcommandinglobal
configurationmodeandthematchandsetcommandinroute-mapconfiguration
modes.Todeleteanentry,usethenoformofthiscommand.
CommandSyntax
route-mapMAP_TAG(deny|permit|)(SEQUENCE-NUMBER|)
noroute-mapMAP_TAG(deny|permit|)(SEQUENCE-NUMBER|)
Parameter ParameterDescriptionParameterValue725MAP_TAG Ameaningfulnameforthe
routemap.Theredistribute
routerconfiguration
commandusesthisname
toreferencethisroute
map.Multipleroutemaps
maysharethesamemap
tagname.Thelengthof
route-mapnameshould
notgreaterthan20and
thefirstcharactershould
bea-z,A-Zor0-9-
permit (Optional)Ifthematch
criteriaaremetforthis
routemap,andthepermit
keywordisspecified,the
routeisredistributedas
controlledbytheset
actions.
(Optional)Ifthematch
criteriaaremetforthis
routemap,andthepermit
keywordisspecified,the
routeisredistributedas
controlledbytheset
actions.
Ifthematchcriteriaarenot
met,andthepermit
keywordisspecified,the
nextroutemapwiththe
samemaptagistested.If
aroutepassesnoneofthe
matchcriteriaforthesetof
routemapssharingthe
samename,itisnot
redistributedbythatset.-726deny (Optional)Ifthematch
criteriaaremetforthe
routemapandthedeny
keywordisspecified,the
routeisnotredistributed-
SEQUENCE-NUMBER(Optional)Numberthat
indicatesthepositiona
newroutemapwillhavein
thelistofroutemaps
alreadyconfiguredwiththe
samename.Ifgivenwith
thenoformofthis
command,thepositionof
theroutemapshouldbe
deleted1-65535
CommandMode
GlobalConfiguration
Default
Thepermitkeywordisthedefault.
Usage
None
Examples
Thefollowingexampleshowshowtocreatearoute-mapandenterroute-map
configurationmode:
Switch#configureterminal
Switch(config)#route-maprip-to-ospfpermit
Switch(config-route-map)#matchmetric1
Switch(config-route-map)#setmetric2727RelatedCommands
matchas-path
matchcommunity
matchinterface
matchipaddress
matchlocal-preference
matchmetric
matchorigin
matchroute-type
matchtag
setaggregator
setas-path
setatomic-aggregate
setcomm-list
setcommunity
setdampening
setextcommunity
setipaddress
setlocal-preference
setmetric
setmetric-type
setorigin
setoriginator-id
settag
setvpnv4
setweight7286.4.2matchas-path
CommandPurpose
Usethiscommandtomatchanautonomoussystempathaccesslist.
Usethenoparameterwiththiscommandtoremoveapathlistentry.
Thematchas-pathcommandspecifiestheautonomoussystempathtobematched.
IfthereisamatchforthespecifiedASpath,andpermitisspecified,therouteis
redistributedorcontrolled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,
anddenyisspecified,therouteisnotredistributedorcontrolled.Ifthematchcriteria
arenotmetthentherouteisneitheracceptednorforwarded,irrespectiveofpermitor
denyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutes,dependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchas-pathLISTNAME
nomatchas-path
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiesasautonomous
systempathaccesslist
nameUpto40characters
CommandMode
Route-mapConfiguration
Default
Nomatchas-pathisspecifiedbydefault.729Usage
ThiscommandisvalidonlyforBGP.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutedeny34
Switch(config-route-map)#matchas-pathmyaccesslist
RelatedCommands
matchmetric
matchipaddress
matchcommunity
setas-path
setcommunity
6.4.3matchcommunity
CommandPurpose
Usethiscommandtospecifythecommunitytobematched.
Usethenoparameterwiththiscommandtoremovethecommunitylistentry.
Communitiesareusedtogroupandfilterroutes.Theyaredesignedtoprovidethe
abilitytoapplypoliciestolargenumbersofroutesbyusingmatchandsetcommands.
Communitylistsareusedtoidentifyandfilterroutesbytheircommonattributes.
Usethematchcommunitycommandtoallowmatchingbasedoncommunitylists.
Thevaluessetbythematchcommunitycommandoverridestheglobalvalues.The
routethatdoesnotmatchatleastonematchclauseisignored.
CommandSyntax
matchcommunityWORD
nomatchcommunity730Parameter ParameterDescriptionParameterValue
WORD SpecifiestheCommunity-
listnameUpto20characters
CommandMode
Route-mapConfiguration
Default
Nomatchcommunityisspecifiedbydefault.
Usage
ThiscommandisvalidonlyforBGP.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#matchcommunitymylist
RelatedCommands
matchipaddress
matchas-path
setas-path
setcommunity
matchmetric
6.4.4matchinterface
CommandPurpose
Usethiscommandtodefinetheinterfacematchcriterion.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion..731Thematchinterfacecommandspecifiesthenext-hopinterfacenameofaroutetobe
matched.
CommandSyntax
matchinterfaceIFNAME
nomatchinterface
Parameter ParameterDescriptionParameterValue
IFNAME Astringthatspecifiesthe
interfaceformatchingSupport
physical/aggregation/loopb
ack/tunnel/vlaninterfaces
CommandMode
Route-mapConfiguration
Default
Nomatchinterfaceisspecifiedbydefault.
Usage
ThiscommandisvalidonlyforOSPF.
Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchinterfaceeth-0-1
RelatedCommands
matchtag
matchroute-typeexternal7326.4.5matchipaddress
CommandPurpose
Usethiscommandtospecifythematchaddressofroute.
Usethenoparameterwiththiscommandtoremovethematchipaddressentry.
ThematchipaddresscommandspecifiestheIPaddresstobematched.Ifthereisa
matchforthespecifiedIPaddress,andpermitisspecified,therouteisredistributed
orcontrolled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,anddenyis
specifiedthentherouteisnotredistributedorcontrolled.Ifthematchcriteriaarenot
met,therouteisneitheracceptednorforwarded,irrespectiveofpermitordeny
specifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutes,dependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipaddressACCESSSLISTID
nomatchipaddress
Parameter ParameterDescriptionParameterValue
ACCESSSLISTID SpecifyaIPv4access-list
name,upto20characters-
CommandMode
Route-mapConfiguration
Default
Nomatchipaddressisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.733Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#matchipaddressList1
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchmetric
6.4.6matchipaddressprefix-list
CommandPurpose
Usethiscommandtomatchentriesofprefix-lists.
Usethenoparameterwiththiscommandtodisablethisfunction
Thiscommandspecifiestheentriesofprefix-liststobematched.Ifthereisamatch
forthespecifiedprefix-listentries,andpermitisspecified,therouteisredistributedor
controlled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,anddenyis
specified,therouteisnotredistributedorcontrolled.Ifthematchcriteriaarenotmet,
therouteisneitheracceptednorforwarded,irrespectiveofpermitordeny
specifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipaddressprefix-listLISTNAME
nomatchipaddressprefix-list[LISTNAME]734Parameter ParameterDescriptionParameterValue
LISTNAME SpecifiestheIPprefixlist
nameUpto40characters
CommandMode
Route-mapConfiguration
Default
Nomatchipaddressprefix-listisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#matchipaddressprefix-listmylist
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchmetric
6.4.7matchipnext-hop
CommandPurpose
Usethiscommandtospecifyanext-hopaddresstobematchedinaroute-map.
Usethenoparameterwiththiscommandtodisablethisfunction.735Thematchipnext-hopcommandspecifiesthenext-hopaddresstobematched.If
thereisamatchforthespecifiednext-hopaddress,andpermitisspecified,theroute
isredistributedorcontrolledasspecifiedbythesetaction.Ifthematchcriteriaare
met,anddenyisspecified,therouteisnotredistributedorcontrolled.Ifthematch
criteriaarenotmet,therouteisneitheracceptednorforwarded,irrespectiveofpermit
ordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipnext-hopACCESSSLISTID
nomatchipnext-hop[ACCESSSLISTID]
Parameter ParameterDescriptionParameterValue
ACCESSSLISTID SpecifyaIPv4access-list
name,upto20charactersUpto40characters
CommandMode
Route-mapConfiguration
Default
Nomatchipnext-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#matchipnext-hopmylist736RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchmetric
6.4.8matchipnext-hopprefix-list
CommandPurpose
Usethiscommandtospecifythenext-hopIPaddressmatchcriterion,usingthe
prefix-list.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion.
CommandSyntax
matchipnext-hopprefix-listLISTNAME
nomatchipnext-hopprefix-list[LISTNAME]
Parameter ParameterDescriptionParameterValue
LISTNAME Astringspecifyingthe
prefix-listname-
CommandMode
Route-mapConfiguration
Default
Nomatchipnext-hopprefix-listisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.737Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#matchipnext-hopprefix-listlist1
RelatedCommands
matchmetric
matchinterface
matchipnext-hop
6.4.9matchlocal-preference
CommandPurpose
Usethiscommandtospecifythelocal-preferencematchcriterion.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion.
Usethematchlocal-preferencecommandtomatchthelocalpreferenceofaroute.
CommandSyntax
matchlocal-preferenceLOCAL-PREFERENCE
nomatchlocal-preference
Parameter ParameterDescriptionParameterValue
LOCAL-PREFERENCESpeciesthepreference
value0-4294967295
CommandMode
Route-mapConfiguration
Default
Nomatchlocal-preferenceisspecifiedbydefault.738Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#matchlocal-preference100
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchipnext-hop
6.4.10matchmetric
CommandPurpose
Usethiscommandtomatchametricofaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.
Thematchmetriccommandspecifiesthemetrictobematched.Ifthereisamatchfor
thespecifiedmetric,andpermitisspecified,therouteisredistributedorcontrolledas
specifiedbythesetaction.Ifthematchcriteriaaremet,anddenyisspecified,the
routeisnotredistributedorcontrolled.Ifthematchcriteriaarenotmet,therouteis
neitheracceptednorforwarded,irrespectiveofpermitordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchmetricMETRICVAL739nomatchmetric
Parameter ParameterDescriptionParameterValue
METRICVAL Themetricvalue 0-4294967295
CommandMode
Route-mapConfiguration
Default
Nomatchmetricisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#matchmetric2
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchipnext-hop
6.4.11matchorigin
CommandPurpose
Usethiscommandtomatchorigincode.
Usethenoparameterwiththiscommandtodisablethismatching.740Theoriginattributedefinestheoriginofthepathinformation.Theegpparameteris
indicatedasaneintheroutingtable,anditindicatesthattheoriginoftheinformation
islearnedviaExteriorGatewayProtocol.Theigpparameterisindicatedasiinthe
routingtable,anditindicatestheoriginofthepathinformationisinteriortothe
originatingAS.
Theincompleteparameterisindicatedasa?intheroutingtable,andindicatesthat
theoriginofthepathinformationisunknownorlearnedthroughothermeans.Ifa
staticrouteisredistributedintoBGP,theoriginoftherouteisincomplete.
Thematchorigincommandspecifiestheorigintobematched.Ifthereisamatchfor
thespecifiedorigin,andpermitisspecified,therouteisredistributedorcontrolledas
specifiedbythesetaction.Ifthematchcriteriaaremet,anddenyisspecified,the
routeisnotredistributedorcontrolled.Ifthematchcriteriaarenotmet,therouteis
neitheracceptednorforwarded,irrespectiveofpermitordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchorigin{egp|igp|incomplete}
nomatchorigin
Parameter ParameterDescriptionParameterValue
egp learnedfromEGP -
igp LocalIGP -
incomplete Unknownheritage -
CommandMode
Route-mapConfiguration
Default
Nomatchoriginisspecifiedbydefault.741Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutedeny34
Switch(config-route-map)#matchoriginegp
RelatedCommands
None
6.4.12matchroute-typeexternal
CommandPurpose
Usethiscommandtomatchspecifiedexternalroutetype.
Usethenoparameterwiththiscommandtoturnoffthematching.
Usethematchroute-typeexternalcommandtomatchspecificexternalroutetypes.
AS-externalLSAiseitherType-1orType-2.Externaltype-1matchesonlyType1
externalroutes,andexternaltype-2matchesonlyType2externalroutes.
CommandSyntax
matchroute-typeexternal{type-1|type-2}
nomatchroute-typeexternal
Parameter ParameterDescriptionParameterValue
type-1 MatchOSPFExternal
Type1metrics-
type-2 MatchOSPFExternal
Type1metrics-
CommandMode
Route-mapConfiguration742Default
Nomatchroute-typeisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchroute-typeexternaltype-1
RelatedCommands
matchtag
6.4.13matchtag
CommandPurpose
Usethiscommandtomatchthespecifiedtagvalue.
Usethenoparameterwiththiscommandtoturnoffthedeclaration.
Usethematchtagcommandtomatchthespecifiedtagvalue.
CommandSyntax
matchtagTAG
nomatchtag
Parameter ParameterDescriptionParameterValue
TAG Specifiesthetagvalue0-4294967295
CommandMode
Route-mapConfiguration743Default
Nomatchtagisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchtag100
RelatedCommands
matchmetric
matchroute-typeexternal
6.4.14setaggregator
CommandPurpose
UsethiscommandtosettheASnumberfortheroutemapandrouterID.
Usethenoparameterwiththiscommandtodisablethisfunction.
AnAutonomousSystem(AS)isacollectionofnetworksunderacommon
administrationsharingacommonroutingstrategy.Itissubdividedbyareas,andis
assignedaunique16-bitnumber.Usethesetaggregatorcommandto
assignanASnumberfortheaggregator.
Tousethesetaggregatorcommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.744CommandSyntax
setaggregatorasASNUMIPADDRESS
nosetaggregator
Parameter ParameterDescriptionParameterValue
ASNUM SpecifiestheASnumber
ofaggregator1-65535
IPADDRESS SpecifiestheIPaddressof
aggregator-
CommandMode
Route-mapConfiguration
Default
Nosetaggregatorisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#setaggregatoras4310.10.0.3
RelatedCommands
None
6.4.15setas-path
CommandPurpose
Usethiscommandtomodifyanautonomoussystempathforaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.745Usethesetas-pathcommandtospecifyanautonomoussystempath.Byspecifying
thelengthoftheAS-Path,therouterinfluencesthebestpathselectionbyaneighbor.
thiscommandtoprependanASpathstringtoroutesincreasingtheASpathlength.
Tousethesetas-pathcommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setas-pathprependASN[ASN]
nosetas-path
Parameter ParameterDescriptionParameterValue
ASN Systemprependsthis
numbertotheASpathor
overwritetheASpath1-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetas-pathisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#setas-pathprepend824746RelatedCommands
None
6.4.16setatomic-aggregate
CommandPurpose
Usethiscommandtosetanatomicaggregateattribute.
Usethenoparameterwiththiscommandtodisablethisfunction
Tousethesetatomicaggregatecommand,youmustfirsthaveamatchclause.
Matchandsetcommandssettheconditionsforredistributingroutesfromonerouting
protocoltoanother.Thematchcommandspecifiesthematchcriteriaunderwhich
redistributionisallowedforthecurrentroute-map.Thesetcommandspecifiestheset
redistributionactionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setatomic-aggregate
nosetatomic-aggregate
CommandMode
Route-mapConfiguration
Default
Nosetatomic-aggregateisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.747Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setatomic-aggregate
RelatedCommands
None
6.4.17setcomm-listdelete
CommandPurpose
Usethiscommandtodeletethematchedcommunitiesfromthecommunityattribute
ofaninboundoroutboundupdatewhenapplyingroute-map.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
setcomm-list{STANDARD_ID|EXPANDED_ID|WORD}delete
nosetcomm-list
Parameter ParameterDescriptionParameterValue
STANDARD_ID Standardcommunity-list
number1-99
EXPANDED_ID Expandedcommunity-list
number100-199
WORD NameoftheCommunity-
listAstringwith1-20
characters,thefirst
charactershouldbe
among[a-zA-Z0-9]
delete Deletematching
communities-
CommandMode
Route-mapConfiguration748Default
Nosetcomm-listisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcomm-list34delete
RelatedCommands
None
6.4.18setcommunity
CommandPurpose
Usethiscommandtosetthecommunitiesattribute.
Usethenoparameterwiththiscommandtodeletetheentry.
Usethiscommandtosetthecommunityattributeandgroupdestinationsinacertain
community,aswellas,applyroutingdecisionsaccordingtothosecommunities.
Tousethesetcommunitycommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setcommunity[AA:NN|internet|local-AS|no-advertise|no-export]
setcommunitynone749nosetcommunity
Parameter ParameterDescriptionParameterValue
AA:NN AA:NN:Specifiesthe
communitynumberinthis
format
AA=TheASnumber
NN=Thenumber
assignedtocommunityAAisintherange1-65535
NNisintherangeof1-
65535
internet SpecifiestheInternet
(well-knowncommunity)-
local-AS Specifiesnosending
outsidethelocalAS(well-
knowncommunity)-
no-advertise Specifiesnoadvertisement
ofthisroutetoanypeer
(well-knowncommunity)-
no-export Specifiesnoadvertisement
ofthisroutetonextAS
(well-knowncommunity)-
none Removesthecommunity
attributefromtheprefixes
thatpasstheroute-map-
CommandMode
Route-mapConfiguration
Default
Nosetcommunityisspecifiedbydefault.750Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunityno-exportno-advertise
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunityno-advertise
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunity10:0123:3412:14no-export
RelatedCommands
None
6.4.19setdampening
CommandPurpose
Usethiscommandtoenableroute-flapdampeningandsetparameters.
Usethenoparameterwiththiscommandtodisableit.
Settheunreachabilityhalf-lifetimetobeequalto,orgreaterthan,reachabilityhalf-
lifetime.Thesuppress-limitvaluemustbegreaterthanorequaltothereuselimit
value.
CommandSyntax
setdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
[UNREACHTIME]
nosetdampening
Parameter ParameterDescriptionParameterValue751REACHTIME Specifiesthereachability
half-lifetimeinminutes.
Thetimeforthepenaltyto
decreasetoone-halfofits
currentvalue.Thedefault
is15minutes1-45
REUSE Specifiesthereuse-limit
value.Whenthepenalty
forasuppressedroute
decaysbelowthereuse
value,theroutesbecome
unsuppressed.Thedefault
reuselimitis7501-20000
SUPPRESS Specifiesthesuppress-
limitvalue.Whenthe
penaltyforaroute
exceedsthesuppress
value,therouteis
suppressed.Thedefault
suppresslimitis20001-20000
MAXSUPPRESS Specifiesthemax-
suppress-time.Maximum
timethatadampened
routeissuppressed.The
defaultmax-suppress
valueis4timesthehalf-
lifetime(60minutes)1-255
UNREACHTIME Specifiestheun-
reachabilityhalf-lifetime
forpenalty,inminutes.The
defaultvalueis15minutes1-45
CommandMode
Route-mapConfiguration752Default
Referencetothesyntaxdescriptionabove.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapR1permit24
Switch(config-route-map)#setdampening2033353430
RelatedCommands
None
6.4.20setextcommunity
CommandPurpose
Usethiscommandtosetanextendedcommunityattribute.
Usethenoparameterwiththiscommandtodisablethisfunction
Tousethesetextcommunitycommand,youmustfirsthaveamatchclause.Match
andsetcommandssettheconditionsforredistributingroutesfromonerouting
protocoltoanother.Thematchcommandspecifiesthematchcriteriaunderwhich
redistributionisallowedforthecurrentroute-map.Thesetcommandspecifiestheset
redistributionactionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setextcommunity{rt|soo}EXTCOMMNUMBER[EXTCOMMNUMBER]
nosetextcommunity{rt|soo}
Parameter ParameterDescriptionParameterValue753rt Specifiestheroutetarget
oftheextendedcommunity-
soo Specifiesthesite-of-origin
oftheextendedcommunity-
EXTCOMMNUMBER ASN:NNorIP-address
nnVPNextended
community-
ASN:NN theASnumber ASNisintherange1-
65535
NNisintherangeof1-
65535
IPADDRESS theASnumberinIP
addressformIPv4AddressinA.B.C.D
format
CommandMode
Route-mapConfiguration
Default
Nosetextcommunityisspecifiedbydefault.
Usage
None
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunityrt06:01
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunityrt0.0.0.6:01
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunitysoo06:01
Switch#configureterminal
Switch(config-route-map)#route-maprmap1permit3
Switch(config-route-map)#setextcommunitysoo0.0.0.6:01754RelatedCommands
None
6.4.21setipnext-hopip-group
CommandPurpose
Usethiscommandtosetthespecifiednext-hopip-groupvalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthenext-hopIPaddresstotheroutes.
CommandSyntax
setipnext-hopip-groupNAME
nosetipnext-hopip-group
Parameter ParameterDescriptionParameterValue
NAME SpecifiestheIPaddressof
thenext-hopip-groupUpto32characters
CommandMode
Route-mapConfiguration
Default
Nosetipnext-hopip-groupisspecifiedbydefault.
Usage
ThiscommandisvalidforPBRonly.Configuringthesetipnext-hopip-group
commandcausesthesystemtousepolicy-basedroutingfirstandthenusethe
routingtable.
Examples
Thefollowingexampleshowshowtosetthenext-hopip-group:755Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipnext-hopip-groupaaa
RelatedCommands
None
6.4.22setipdefaultnext-hopip-group
CommandPurpose
Usethiscommandtosetthespecifieddefaultnext-hopip-groupvalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthenext-hopIPaddresstotheroutes.
CommandSyntax
setipdefaultnext-hopip-groupNAME
nosetipdefaultnext-hopip-group
Parameter ParameterDescriptionParameterValue
NAME SpecifiestheIPaddressof
thenext-hopip-groupUpto32characters
CommandMode
Route-mapConfiguration
Default
Nosetipdefaultnext-hopip-groupisspecifiedbydefault.
Usage
ThiscommandisvalidforPBRonly.Configuringthesetipdefaultnext-hopcommand
causesthesystemtousetheroutingtablefirstandthenthepolicyroutetothe
specifiednexthop.756Examples
Thefollowingexampleshowshowtosetthedefaultnext-hopip-group:
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipdefaultnext-hopip-groupaaa
RelatedCommands
None
6.4.23setipnext-hop
CommandPurpose
Usethiscommandtosetthespecifiednext-hopvalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthenext-hopIPaddresstotheroutes.
CommandSyntax
setipnext-hopA.B.C.D(trackobject_id|)
nosetipnext-hop(track|)
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
thenext-hopIPv4AddressinA.B.C.D
format
object_id Objectidentityisusedto
identifytrackobject1-500
CommandMode
Route-mapConfiguration
Default
Nosetipnext-hopisspecifiedbydefault.757Usage
ThiscommandisvalidforBGP,OSPF,RIPandPBRonly.Configuringthesetipnext-
hopcommandcausesthesystemtousepolicy-basedroutingfirstandthenusethe
routingtable.Configuredwithtrackcommandwillbindnexthopwithtrack,whentrack
down,thenexthopwillbeinvalided.Usethenocommandwithtrackwillunbind
nexthopwithtrack.
Examples
Thefollowingexampleshowshowtosetthenext-hopIPaddress:
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipnext-hop10.10.0.67
Thefollowingexampleshowshowtosetthenext-hopIPaddressandbindwithtrack:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#quit
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipnext-hop10.10.0.67track1
RelatedCommands
None
6.4.24setipvrfnext-hop
CommandPurpose
Usethiscommandtosetthespecifiedvrfandnext-hopvalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthevrfandnext-hopIPaddresstotheroutes.
CommandSyntax
setipvrfWORDnext-hopA.B.C.D(trackobject_id|)
nosetipnext-hop(track|)
Parameter ParameterDescriptionParameterValue758A.B.C.D SpecifiestheIPaddressof
thenext-hopIPv4AddressinA.B.C.D
format
object_id Objectidentityisusedto
identifytrackobject1-500
WORD VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
Route-mapConfiguration
Default
Nosetipnext-hopisspecifiedbydefault.
Usage
ThiscommandisvalidPBRonly.Configuringthesetipvrfnext-hopcommandcauses
thesystemtousepolicy-basedroutingfirstandthenusetheroutingtable.
Configuredwithtrackcommandwillbindnexthopwithtrack,whentrackdown,the
nexthopwillbeinvalided.Usethenocommandwithtrackwillunbindnexthopwith
track.
Examples
Thefollowingexampleshowshowtosetthenext-hopIPaddressandvrf.:
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipvrftestnext-hop10.10.0.67
RelatedCommands
None
6.4.25setipdefaultnext-hop
CommandPurpose
Usethiscommandtosetthespecifieddefaultnext-hopvalue.759Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthedefaultnext-hopIPaddresstotheroutes.
CommandSyntax
setipdefaultnext-hopA.B.C.D(trackobject_id|)
nosetipdefaultnext-hop(track|)
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
thedefaultnext-hopIPv4AddressinA.B.C.D
format
object_id Objectidentityisusedto
identifytrackobject1-500
CommandMode
Route-mapConfiguration
Default
Nosetipdefaultnext-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforPBRonly.Configuringthesetipdefaultnext-hopcommand
causesthesystemtousetheroutingtablefirstandthenthepolicyroutetothe
specifiednexthop.Configuredwithtrackcommandwillbindnexthopwithtrack,when
trackdown,thenexthopwillbeinvalided.Usethenocommandwithtrackwillunbind
nexthopwithtrack.
Examples
Thefollowingexampleshowshowtosetthedefaultnext-hopIPaddressandbind
withtrack:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#quit760Switch(config)#route-mapmymappermit4
Switch(config-route-map)#setipdefaultnext-hop10.10.0.68track1
Thefollowingexampleshowshowtounbindtrackwithnext-hopIPaddress:
Switch#configureterminal
Switch(config)#route-mapmymappermit4
Switch(config-route-map)#nosetipdefaultnext-hoptrack
RelatedCommands
None
6.4.26setipdefaultvrfnext-hop
CommandPurpose
Usethiscommandtosetthespecifieddefaultnext-hopvalueandthevrf.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthedefaultnext-hopIPaddressandvrftotheroutes.
CommandSyntax
setipdefaultvrfWORDnext-hopA.B.C.D(trackobject_id|)
nosetipdefaultnext-hop(track|)
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPaddressof
thedefaultnext-hopIPv4AddressinA.B.C.D
format
object_id Objectidentityisusedto
identifytrackobject1-500
WORD VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
Route-mapConfiguration761Default
Nosetipdefaultvrfnext-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforPBRonly.Configuringthesetipdefaultvrfnext-hop
commandcausesthesystemtousetheroutingtablefirstandthenthepolicyrouteto
thespecifiednexthopandvrf.Configuredwithtrackcommandwillbindnexthopwith
track,whentrackdown,thenexthopwillbeinvalided.Usethenocommandwith
trackwillunbindnexthopwithtrack.
Examples
Thefollowingexampleshowshowtosetthedefaultnext-hopvrfIPaddressandbind
withtrack:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#quit
Switch(config)#route-mapmymappermit4
Switch(config-route-map)#setipdefaultvrftestnext-hop10.10.0.68track1
RelatedCommands
None
6.4.27setlocal-preference
CommandPurpose
Usethiscommandtosetthespecifiedlocal-preferencevalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthelocal-preferencevalueoftheroutes
CommandSyntax
setlocal-preferenceLOCAL-PREFERENCE
nosetlocal-preference762Parameter ParameterDescriptionParameterValue
LOCAL-PREFERENCESpeciesthepreference
value0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetlocal-preferenceisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setlocal-preference100
RelatedCommands
None
6.4.28setmetric
CommandPurpose
Usethiscommandtosetametricvalueforaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.
Thiscommandsetsthemetricvalueforaroute,andinfluencesexternalneighbors
aboutthepreferredpathintoanAutonomousSystem(AS).Thepreferredpathisthe
onewithalowermetricvalue.Aroutercomparesmetricsforpathsfromneighborsin
thesameASs.TocomparemetricsfromneighborscomingfromdifferentASs,use
thebgpalways-compare-medcommand.
Tousethesetmetriccommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto763another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setmetricMETRICVAL
nosetmetric
Parameter ParameterDescriptionParameterValue
METRICVAL Themetricvalue 0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetmetricisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIP.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setmetric600
RelatedCommands
None7646.4.29setmetric-type
CommandPurpose
Usethiscommandtosetthemetrictypeforthedestinationroutingprotocol.
Usethenoparameterwiththiscommandtoreturntothedefault.
ThiscommandsetsthetypetoeitherType-1orType-2intheAS-external-LSAwhen
theroute-mapmatchesthecondition.
CommandSyntax
setmetric-type{type1|type2}
nosetmetric-type
Parameter ParameterDescriptionParameterValue
type1 Selecttosetexternaltype
1metric-
type2 Selecttosetexternaltype
2metric-
CommandMode
Route-mapConfiguration
Default
Nosetmetric-typeisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setmetric-type1765RelatedCommands
None
6.4.30setorigin
CommandPurpose
UsethiscommandtosettheBGPorigincode.
Usethenoparameterwiththiscommandtodeleteanentry.
Theoriginattributedefinestheoriginofthepathinformation.Thethreeparameters
withthiscommandindicatethreedifferentvalues.IGPisinteriortotheoriginatingAS.
ThishappensifIGPisredistributedintotheBGP.EGPislearnedthroughanExterior
GatewayProtocol.Incompleteisunknownorlearnedthroughsomeothermeans.
ThishappenswhenstaticrouteisredistributedinBGPandtheoriginoftherouteis
incomplete.
CommandSyntax
setorigin{egp|igp|incomplete}
nosetorigin
Parameter ParameterDescriptionParameterValue
egp SpecifiesaremoteEGP
system-
igp AlocalIGPsystem -
incomplete Specifiesasystemof
unknownheritage-
CommandMode
Route-mapConfiguration
Default
Nosetoriginisspecifiedbydefault.766Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setoriginegp
RelatedCommands
None
6.4.31setoriginator-id
CommandPurpose
UsethiscommandtosettheoriginatorIDattribute.
Usethenoparameterwiththiscommandtodisablethisfunction.
Tousethesetoriginator-idcommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setoriginator-idIPADDRESS
nosetoriginator-id
Parameter ParameterDescriptionParameterValue
IPADDRESS SpecifiestheIPaddressof
originatorIPv4AddressinA.B.C.D
format767CommandMode
Route-mapConfiguration
Default
Nosetoriginator-idisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setoriginator-id1.1.1.1
RelatedCommands
None
6.4.32settag
CommandPurpose
Usethiscommandtosetaspecifiedtagvalue.
Usethenoparameterwiththiscommandtoreturntothedefault.
Taginthiscommandistheroutetagwhichislabeledbyanotherroutingprotocol
(BGPorotherIGPwhenredistributing),becauseAS-external-LSAhasaroute-tag
fieldinitsLSAs.Also,withusingroute-map,ZebOScantagtheLSAswiththe
appropriatetagvalue.Sometimes,thetagmatcheswithusingroute-map,and
sometimes,thevalue
maybeusedbyanotherapplication.
CommandSyntax
settagTAGVALUE
nosettag768Parameter ParameterDescriptionParameterValue
TAGVALUE Tagvaluefordestination
routingprotocol.0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosettagisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#settag6
RelatedCommands
redistribute
default-information
6.4.33setvpnv4next-hop
CommandPurpose
UsethiscommandtosetaVPNv4next-hopaddress.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
setvpnv4next-hopIPADDRESS
nosetvpnv4next-hop769Parameter ParameterDescriptionParameterValue
IPADDRESS SpecifiestheIPaddressof
next-hopIPv4AddressinA.B.C.D
format
CommandMode
Route-mapConfiguration
Default
Nosetvpnv4next-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setvpnv4next-hop6.6.6.6
RelatedCommands
None
6.4.34setweight
CommandPurpose
Usethiscommandtosetweightsfortheroutingtable.
Usethenoparameterwiththiscommandtodeleteanentry.
Theweightvalueisusedtoassistinbestpathselection.Itisassignedlocallytoa
router.Whenthereareseveralrouteswithacommondestination,therouteswitha
higherweightvaluearepreferred.
CommandSyntax
setweightWEIGHT770nosetweight
Parameter ParameterDescriptionParameterValue
WEIGHT Specifiestheweightvalue0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetweightisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setweight60
RelatedCommands
matchas-path
6.4.35showroute-map
CommandPurpose
Usethiscommandtodisplayuserreadableroute-mapinformation.
CommandSyntax
showroute-map(NAME|)
Parameter ParameterDescriptionParameterValue
NAME route-mapname Upto20characters771CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch1#showroute-map
route-mapabc,permit,sequence10
Matchclauses:
ipaddressacl1
Setclauses:
local-preference200
route-mapabc,permit,sequence20
Matchclauses:
Setclauses:
RelatedCommands
route-map
6.5Prefix-listCommands
6.5.1ipprefix-list
CommandPurpose
Tocreateaprefixlistoraddaprefix-listentry,usetheipprefix-listcommandinglobal
configurationmode.Todeleteaprefix-listoranentry,usethenoformofthis
command.
CommandSyntax
ipprefix-listWORD(seqSEQUENCE-NUMBER|)(deny|permit)(any|
A.B.C.D/M(geGE-LENGTH|)(leLE-LENGTH|))772(any|A.B.C.D/M(geGE-LENGTH|)(leLE-LENGTH|))
noipprefix-listWORD(seqSEQUENCE-NUMBER|)(deny|permit)(any|
A.B.C.D/M(geGE-LENGTH|)(leLE-LENGTH|))
noipprefix-listWORD(seqSEQUENCE-NUMBER|)
Parameter ParameterDescriptionParameterValue
WORD Configanametoidentify
theprefixlistUpto40characters
seqSEQUENCE-
NUMBERAppliesasequence
numbertoaprefix-list
entry.Ifasequence
numberisnotentered
whenconfiguringthis
command,adefault
sequencenumberingis
appliedtotheprefixlist.
Thenumber5isappliedto
thefirstprefixentry,and
subsequentunnumbered
entriesareincrementedby
51-65535
deny Deniesaccessfora
matchingcondition-
permit Permitsaccessfora
matchingcondition-
A.B.C.D/M Configuresthenetwork
address,andthelengthof
thenetworkmaskinbits.
Thenetworknumbercan
beanyvalidIPaddressor
prefix.Thebitmaskcanbe
anumberfrom0to32IPv4Addressandmask
lengthinA.B.C.D/Mformat773geGE-LENGTH (Optional)Specifiesthe
lesservalueofarange
(thefromportionofthe
rangedescription)by
applyingthege-length
argumenttotherange
specified.Thege-length
argumentrepresentsthe
minimumprefixlengthto
bematched1-32
leLE-LENGTH (Optional)Specifiesthe
greatervalueofarange
(thetoportionofthe
rangedescription)by
applyingthele-length
argumenttotherange
specified.Thele-length
argumentrepresentsthe
maximumprefixlengthto
bematched1-32
CommandMode
GlobalConfiguration
Default
Noprefixlistsarecreated.
Usage
Theipprefix-listcommandisusedtoconfigureIPprefixfiltering.Prefixlistsare
configuredwithpermitordenykeywordstoeitherpermitordenytheprefixbasedon
thematchingcondition.AprefixlistconsistsofanIPaddressandabitmask.TheIP
addresscanbeaclassfulnetwork,asubnet,orasinglehostroute.Thebitmaskis
enteredasanumberfrom1to32.Animplicitdenyisappliedtotrafficthatdoesnot
matchanyprefix-listentry.Prefixlistsareconfiguredtomatchanexactprefixlength774oraprefixrange.Thegeandlekeywordsareusedtospecifyarangeoftheprefix
lengthstomatch,providingmoreflexibleconfigurationthancanbeconfiguredwith
justthenetwork/lengthargument.Theprefixlistisprocessedusinganexactmatch
whenneitherthegenorlekeywordisentered.Ifonlythegevalueisentered,the
rangeisthevalueenteredforthegege-lengthargumenttoafull32-bitlength.Ifonly
thelevalueisentered,therangeisfromvalueenteredforthenetwork/length
argumenttothelele-lengthargument.Ifboththegege-lengthandlele-length
keywordsandargumentsareentered,therangefallsbetweenthevaluesusedfor
thege-lengthandle-lengtharguments.Thefollowingformulashowsthisbehavior:
Network/length<gege-length<lele-length<=32.
Aprefixlistisconfiguredwithanameand/orsequencenumber.Oneortheother
mustbeenteredwhenconfiguringthiscommand.Ifasequencenumberisnot
entered,adefaultsequencenumberof5isappliedtotheprefixlist.Andsubsequent
prefixlistentrieswillbeincrementby5(forexample,5,10,15,andonwards).Ifa
sequencenumberisenteredforthefirstprefixlistentrybutnotsubsequententries,
thenthesubsequententrieswillalsobeincrementedby5(Forexample,ifthefirst
configuredsequencenumberis3,thensubsequententrieswillbe8,13,18,and
onwards).Defaultsequencenumberscanbesuppressedbyenteringthenoformof
thiscommandwiththeseqkeyword.Prefixlistsareevaluatedstartingwiththelowest
sequencenumberandcontinuesdownthelistuntilamatchismade.Onceamatch
ismadethatcoversthenetworkthepermitordenystatementisappliedtothat
networkandtherestofthelistisnotevaluated.
Examples
Todenythedefaultroute0.0.0.0/0:
Switch#configureterminal
Switch(config)#ipprefix-listabcdeny0.0.0.0/0
Topermittheprefix10.0.0.0/8:
Switch#configureterminal
Switch(config)#ipprefix-listabcpermit10.0.0.0/8
Toacceptamasklengthofupto24bitsinrouteswiththeprefix192/16:
Switch#configureterminal
Switch(config)#ipprefix-listabcpermit192.168.0.0/16le24
Todenymasklengthsgreaterthan25bitsinrouteswiththeprefix192/16:775Switch#configureterminal
Switch(config)#ipprefix-listabcdeny192.168.0.0/16ge25
RelatedCommands
ipprefix-listdescription
ipprefix-listsequence
showipprefix-list
clearipprefix-list
6.5.2ipprefix-listdescription
CommandPurpose
Toaddatextdescriptionofaprefixlist,usetheipprefix-listdescriptioncommandin
global
configurationmode.Toremovethetextdescription,usethenoformofthiscommand
CommandSyntax
ipprefix-listWORDdescriptionLINE
noipprefix-listWORDdescription
Parameter ParameterDescriptionParameterValue
WORD Nameofprefixlist Upto40characters
CommandMode
GlobalConfiguration
Default
Thereisnodescriptionforprefix-list.
Usage
Theprefixlistwillbecreatedautomaticallyifitdidntexist.776Examples
Thefollowingexampleshowshowtoadddescription:
Switch#configureterminal
Switch(config)#ipprefix-listabcdescriptionDenyroutesfromrouterA
RelatedCommands
ipprefix-list
ipprefix-listsequence
showipprefix-list
clearipprefix-list
6.5.3ipprefix-listsequence-number
CommandPurpose
Toenablethegenerationofsequencenumbersforentriesinaprefixlist,usetheip
prefix-listsequence-numbercommandinglobalconfigurationmode.Todisablethis
function,usethenoformofthiscommand.
CommandSyntax
ipprefix-listsequence-number
noipprefix-listsequence-numbe
CommandMode
GlobalConfiguration
Default
Thiscommandhasnodefaultbehavior.
Usage
Thiscommandisusedtoenablesequence-numberdisplay.777Examples
Thefollowingexampleshowshowtoenableipprefix-listsequence-number:
Switch#configureterminal
Switch(config)#ipprefix-listsequence-number
RelatedCommands
ipprefix-list
showipprefix-list
clearipprefix-list
6.5.4showipprefix-list
CommandPurpose
Toshowprefixlistinformation,usetheshowipprefix-listcommand.
CommandSyntax
showipprefix-list(summary|detail|)(WORD|)
showipprefix-listWORD(seqSEQUENCE-NUMBER|A.B.C.D/M(longer|first-
match|)|)
Parameter ParameterDescriptionParameterValue
summary Summaryofprefixlists-
detail Detailofprefixlists -
WORD NameoftheprefixlistUpto40characters
seqSEQUENCE-
NUMBERsequencenumberofthe
entryintheprefixlist1-65535
A.B.C.D/M IPprefix
<network>/<length>,e.g.,
35.0.0.0/8IPv4Addressandmask
lengthinA.B.C.D/Mformat
longer Lookupthemaskofprefix
longerthanM-778first-match Firstmatchedprefix -
CommandMode
PrivilegedEXEC
Default
Thiscommandhasnodefaultbehavior.
Usage
None
Examples
Thefollowingexampleshowshowtodisplayipprefix-list:
Switch#showipprefix-list
ipprefix-listaa:2entries
permit1.1.1.0/24
permit1.2.3.0/24
RelatedCommands
ipprefix-list
clearipprefix-list
6.5.5clearipprefix-list
CommandPurpose
ToResetsthehitcountoftheprefixlistentries,usetheclearipprefix-listcommand.
CommandSyntax
clearipprefix-list(WORD(A.B.C.D/M|)|)
Parameter ParameterDescriptionParameterValue
WORD NameoftheprefixlistUpto40characters779A.B.C.D/M IPprefix
<network>/<length>,e.g.,
35.0.0.0/8IPv4Addressandmask
lengthinA.B.C.D/Mformat
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoclearipprefix-list:
Switch#clearipprefix-listabc
RelatedCommands
ipprefix-list
6.6Policy-BasedRoutingCommands
6.6.1ippolicyroute-map
CommandPurpose
Bydefault,PBRisdisabledontheswitch.ToenablePBR,youmustcreatearoute
mapthatspecifiesthematchcriteriaandtheresultingactionifallofthematch
clausesaremet.Then,youmustenablePBRonalayer3interface.Allpackets
arrivingonthespecifiedinterfacematchingthematchclausesaresubjecttoPBR.
CommandSyntax
ippolicyroute-mapMAP_NAME780noippolicyroute-map
Parameter ParameterDescriptionParameterValue
MAP_NAME policyroute-mapnameUpto20characters
CommandMode
InterfaceConfiguration
Default
disabled
Usage
Thiscommandcanonlybeconfiguredonroutedport,vlaninterfaceandroutedagg
port.
Examples
Thefollowingexampleshowshowtoconfigurepbronaninterface:
Switch#configureterminal
switch(config)#ipaccess-list1extend
switch(config-ex-ip-acl)#10permitanyanyany
switch(config-route-map)#exit
switch(config)#route-maprichardpermit10
switch(config-route-map)#matchipaddress1
switch(config-route-map)#setipnext-hop10.1.1.1
switch(config-route-map)#exit
switch(config)#interfaceeth-0-1
switch(config-if)#noswitchport
switch(config-if)#noshutdown
switch(config-if)#ippolicyroute-maprichrad
RelatedCommands
route-map
6.6.2ip-group
CommandPurpose
Usethiscommandtosettheip-group.781CommandSyntax
ip-groupNAME(vrfWORD|)(load-share|)
noip-groupNAME
Parameter ParameterDescriptionParameterValue
MAP_NAME ip-groupname Upto32characters
WORD vrfname Upto15characters
load-share load-sharemode -
CommandMode
GlobalConfiguration
Default
Nosetip-groupisspecifiedbydefault.
Usage
Usethiscommandtoconfigureip-groupwhichisuesdbypbr.
Examples
Thefollowingexampleshowshowtoconfigureip-group:
Switch#configureterminal
switch(config)#ip-groupaaa
RelatedCommands
route-map
6.6.3ip-member
CommandPurpose
Usethiscommandtosettheip-member.782CommandSyntax
memberipA.B.C.D(priorityPRIORITY)(trackobject_id|)
nomemberipA.B.C.D(track|)
Parameter ParameterDescriptionParameterValue
A.B.C.D ip-memberaddress IPv4AddressinA.B.C.D
format
PRIORITY memberpriority 0-65535
object_id Objectidentityisusedto
identifytrackobject1-500
CommandMode
Ip-groupConfiguration
Default
Nosetip-memberisspecifiedbydefault.
Usage
Usethiscommandtoconfigureip-memberinip-group.
Examples
Thefollowingexampleshowshowtoconfigureip-member:
Switch#configureterminal
switch(config)#ip-groupaaa
switch(config-ip-group)#memberip1.1.1.1
RelatedCommands
route-map7836.6.4showip-group
CommandPurpose
Usethiscommandtodisplayuserreadableip-groupinformation
CommandSyntax
showip-group(NAME|)
Parameter ParameterDescriptionParameterValue
NAME ip-groupname Upto20characters
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
SWITCH#showip-group
Switch#showip-group
Groupname:aaaVRF:-Mode:-
----------------------------------------------------------------------
MemberipPriorityTrackidTrackstate
----------------------------------------------------------------------
2.2.2.2 20 - Disable
RelatedCommands
None7846.6.5showippolicyroute-map
CommandPurpose
Usethiscommandtodisplayuserreadablepolicyroute-mapinformation
CommandSyntax
showippolicyroute-map
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
IfsomeofthePBRentriesarenotsuccessfullyinsertedintotcam,anerrortipwillbe
displayed.
Examples
SWITCH#showippolicyroute-map
Route-map interface
richard eth-0-1
eth-0-3
Failedentry:no
sally eth-0-2
Failedentry:yes
PleaseusePolicyBased-RoutingCLI:showpbrfailedentrytogainmoredetail
RelatedCommands
route-map7856.6.6showresourcepbr
CommandPurpose
Usethiscommandtodisplaytheresourceusageoverthepolicybasedrouting
module.
CommandSyntax
showresourcepbr
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
SWITCH#showresourcepbr
PolicyBasedRouting
Resource UsedCapability
=============================================================
PolicyRouteMap 032
PolicyBasedRoutingACE064
RelatedCommands
route-map
showippolicyroute-map7866.7BGPCommands
6.7.1address-family
CommandPurpose
UsethiscommandtoentertheIPv4,VPNv4address-familycommandmode.
CommandSyntax
address-familyipv4(unicast|vrfNAME|)
address-familyvpnv4(unicast)
Parameter ParameterDescriptionParameterValue
vpnv4 Configuressessionsfor
VPN-IPv4prefixes.This
parametertakesanIPv4
styleaddress:A.B.C.D.-
unicast Specifiesunicastprefixes-
vrf VPNrouting/forwarding
instance-
NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
RouterConfiguration
Default
None
Usage
Usetheaddressfamilycommandtoentertheaddressfamilymodeallowing
configurationofaddress-familyspecificparameters.787ToleavetheaddressfamilymodeandreturntotheConfiguremodeusetheexit-
address-familycommand.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)address-familyipv4
RelatedCommands
exit-address-family
exit
6.7.2aggregate-address
CommandPurpose
UsethiscommandtoconfigureBGPaggregateentries.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
(no)aggregate-addressIP_PREFIX{summary-only|as-set}
Parameter ParameterDescriptionParameterValue
IP_PREFIX A.B.C.D/MSpecifiesthe
aggregateprefixIPv4Addressandmask
lengthinA.B.C.D/Mformat
summary-only Filtersmorespecificroutes
fromupdates.-
as-set GeneratesASsetpath
information-
CommandMode
RouterConfiguration788Default
Disabled
Usage
Aggregatesareusedtominimizethesizeofroutingtables.Aggregationcombines
thecharacteristicsofseveraldifferentroutesandadvertisesasingleroute.The
aggregate-addresscommandcreatesanaggregateentryintheBGProutingtableif
anymore-specificBGProutesareavailableinthespecifiedrange.Usingthe
summary-onlyparameteradvertisestheprefixonly,suppressingthemore-specific
routestoallneighbors.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#aggregate-address10.0.0.0/8as-setsummary-only
RelatedCommands
N/A
6.7.3bgpalways-compare-med
CommandPurpose
UsethiscommandtocomparetheMultiExitDiscriminator(MED)forpathsfrom
neighborsindifferentautonomoussystems.
Usethenoparameterwiththiscommandtodisallowthecomparison.
CommandSyntax
(no)bgpalways-compare-med
CommandMode
RouterConfiguration789Default
Disabled
Usage
MultiExitDiscriminator(MED)isusedinbestpathselectionbyBGP.MEDis
comparedafterBGPattributesweight,localpreference,AS-pathandoriginhave
beencomparedandareequal.
MEDcomparisonisdoneonlyamongpathsfromthesameautonomoussystem(AS).
Usebgpalways-comparemedcommandtoallowcomparisonofMEDsfromdifferent
ASs.TheMEDparameterisusedtoselectthebestpath.ApathwithlowerMEDis
preferred.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpalways-compare-med
RelatedCommands
bgpbestpathmed
bgpbestpathas-pathignore
6.7.4bgpbestpathas-pathignore
CommandPurpose
Usethiscommandtopreventtherouterfromconsideringas-pathasafactorinthe
algorithmforchoosingaroute.
Usethenoparameterwiththiscommandtoallowtheroutertoconsideras-pathin
choosingaroute.
CommandSyntax
(no)bgpbestpathas-pathignore790CommandMode
RouterConfiguration
Default
Disabled
Usage
None
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathas-pathignore
RelatedCommands
bgpalways-compare-med,bgpbestpathmed,bgpbestpathcompare-routerid
6.7.5bgpbestpathcompare-confed-aspath
CommandPurpose
UsethiscommandtoallowcomparingoftheconfederationASpathlength.
UsethenoparameterwiththiscommandtoreverttheselectionandignoreAS
confederationpathlengthintheBGPbestpathselection.
CommandSyntax
(no)bgpbestpathcompare-confed-aspath
CommandMode
RouterConfiguration
Default
BGPreceivesrouteswithidenticaleBGPpathsfromeBGPpeersandselectsthefirst
routereceivedasthebestpath.791Usage
ThiscommandspecifiesthattheASconfederationpathlengthmustbeused,when
available,intheBGPbestpathdecisionprocess.Itiseffectiveonlywhenbgp
bestpathas-pathignorecommandhasnotbeenspecified.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathcompare-confed-aspath
RelatedCommands
bgpbestpathas-pathignore
6.7.6bgpbestpathcompare-routerid
CommandPurpose
Usethiscommandtocomparerouter-idforidenticaleBGPpaths.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
(no)bgpbestpathcompare-routerid
CommandMode
RouterConfiguration
Default
BGPreceivesrouteswithidenticaleBGPpathsfromeBGPpeersandselectsthefirst
routereceivedasthebestpath.
Usage
WhencomparingsimilarroutesfrompeerstheBGProuterdoesnotconsiderrouter
IDoftheroutes.Bydefault,itselectsthefirstreceivedroute.Usethiscommandto
includerouterIDintheselectionprocess;similarroutesarecomparedandtheroute792withlowestrouterIDisselected.Therouter-idisthehighestIPaddressontherouter,
withpreferencegiventoloopbackaddresses.Router-idcanbemanuallysetbyusing
thebgprouter-idcommand.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathcompare-routerid
RelatedCommands
showipbgp
showipbgpneighbors
6.7.7bgpbestpathmed
CommandPurpose
UsethiscommandtospecifyMultiExitDiscriminator(MED)attributecomparison.
UsethenoparameterwiththiscommandtopreventBGPfromconsideringtheMED
attributeincomparingpaths.
CommandSyntax
bgpbestpathmedconfed[missing-as-worst]
bgpbestpathmedmissing-as-worst[confed]
nobgpbestpathmedconfed[missing-as-worst]
nobgpbestpathmedmissing-as-worst[confed]
Parameter ParameterDescriptionParameterValue
confed ComparesMEDamong
confederationpaths-
missing-as-worst TreatsmissingMEDasthe
leastpreferredone-793CommandMode
RouterConfiguration
Default
MEDvalueiszero.
Usage
UsethiscommandtospecifytwoMEDattributesconfedandmissing-as-worst.The
confedattributeenablesMEDcomparisonamongpathslearnedfromconfederation
peers.TheMEDsarecomparedonlyifthereisnoexternalautonomoussystem(an
ASnotwithintheconfederation)inthepath.Ifthereisanexternalautonomous
systeminthepath,theMEDcomparisonisnotmade.
Themissing-as-worstattributetoconsideramissingMEDattributeinapathas
havingavalueofinfinity,makingthepathwithoutaMEDvaluetheleastdesirable
path.Ifmissing-as-worstisdisabled,themissingMEDisassignedthevalueof0,
makingthepathwiththemissingMEDattributethebestpath.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathmedmissing-as-worst
RelatedCommands
bgp-always-compare-med,bgpbestpathas-pathignore,bgpdeterministic-med
6.7.8bgpclient-to-clientreflection
CommandPurpose
UsethiscommandtorestoreroutereflectionfromaBGProutereflectortoclients.
Usethenoparameterwiththiscommandtoturnoffclient-to-clientreflection.
CommandSyntax
bgpclient-to-clientreflection794nobgpclient-to-clientreflection
Parameter ParameterDescriptionParameterValue
reflection Allowsreflectionofroutes-
CommandMode
RouterConfiguration
Default
Whenarouterisconfiguredasaroutereflector,client-to-clientreflectionisenabled
bydefault.
Usage
Thebgpclient-to-clientreflectioncommandisusedtoconfigureroutersasroute
reflectors.RoutereflectorsareusedwhenallInteriorBorderGatewayProtocol(iBGP)
speakersarenotfullymeshed.Iftheclientsarefullymeshedtheroutereflectorisnot
required,usenobgpclient-to-clientreflectioncommandtodisabletheclient-to-client
routereflection.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)nobgpclient-to-clientreflection
RelatedCommands
bgpcluster-id
neighborroute-reflector-client
showipbgp
6.7.9bgpcluster-id
CommandPurpose
UsethiscommandtoconfiguretheclusterIDiftheBGPclusterhasmorethanone
routereflector.795UsethenoparameterwiththiscommandtoremovetheclusterID.
CommandSyntax
bgpcluster-idCLUSTERID
nobgpcluster-id
Parameter ParameterDescriptionParameterValue
CLUSTERID SpecifiestheclusterIDof
thisrouteractingasa
route
reflector,eitherasIP
addressorasamaximum
of4bytes.IPv4AddressinA.B.C.D
formatornumberinrange
1-4294967295
A.B.C.D A.B.C.DRouteReflector
Cluster-idinIPaddress
formatIPv4Address
1-4294967295 RouteReflectorcluster-id
asa32bitquantity1-4294967295
CommandMode
RouterConfiguration
Default
N/A
Usage
Aclusterincludesroutereflectorsanditsclients.Usually,eachclusterisidentifiedby
therouterIDofitssingleroutereflectorbuttoincreaseredundancysometimesa
clustermayhavemorethanoneroutereflector.Allrouterreflectorsinsuchacluster
arethenidentifiedbyaclusterID.Thebgpcluster-idcommandisusedtoconfigure
the4byteclusterIDforclusterswithmorethanoneroutereflectors.796Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpcluster-id1.1.1.1
RelatedCommands
bgpclient-to-clientreflection,neighborroute-reflector-client,showipbgp
6.7.10bgpconfederationidentifier
CommandPurpose
UsethiscommandtospecifyaBgpconfederationidentifier.
UsethenoparameterwiththiscommandtoremovetheBgpconfederationidentifier.
CommandSyntax
bgpconfederationidentifierID
nobgpconfederationidentifier
Parameter ParameterDescriptionParameterValue
ID Setroutingdomain
confederationASnumber1-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
N/A797Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpconfederationidentifier1
RelatedCommands
bgpconfederationpeer
6.7.11bgpconfederationpeers
CommandPurpose
UsethiscommandtoconfiguretheAutonomousSystems(AS)thatbelongtothe
confederation.
Usethenoparameterwiththiscommandtoremoveanautonomoussystemfromthe
confederation.
CommandSyntax
bgpconfederationpeers.ASN
nobgpconfederationpeers(.ASN|)
Parameter ParameterDescriptionParameterValue
ASN ASnumbersofeBGP
peersthatareundersame
confederationbutina
differentsub-AS1-65535
CommandMode
RouterConfiguration
Default
N/A798Usage
AconfederationallowsanAStobedividedintoseveralASs.TheASisgivena
confederationidentifier.Externalroutersviewonlythewholeconfederationasone
AS.EachASisfullymeshedwithinitselfandisvisibleinternallytotheconfederation.
Usethebgpconfederationpeercommandtodefinethelistofconfederationpeers.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpconfederationpeers123421345
RelatedCommands
bgpconfederationidentifier
6.7.12bgpdampening
CommandPurpose
Usethiscommandtosetbgpdampeningparameters.
Usethenoparameterwiththiscommandtounsetthebgpdampeningparameters.
CommandSyntax
bgpdampeningREACHTIME
bgpdampeningREACHTIMEREUSE
bgpdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
(UNREACHTIME|)
bgpdampeningroute-mapROUTEMAP
nobgpdampeningREACHTIME
nobgpdampeningREACHTIMEREUSE
nobgpdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
(UNREACHTIME|)
nobgpdampeningroute-map(ROUTEMAP|)799Parameter ParameterDescriptionParameterValue
REACHTIME Specifiesthereachability
half-lifetimeinminutes.
Thetimeforthepenaltyto
decreasetoone-halfofits
currentvalue.Thedefault
is15minutes.1-45
REUSE Specifiesthereuselimit
value.Whenthepenalty
forasuppressedroute
decaysbelowthereuse
value,theroutesbecome
unsuppressed.Thedefault
reuselimitis750
SUPPRESS<1-20000>
Specifiesthesuppress
limitvalue.Whenthe
penaltyforaroute
exceedsthesuppress
value,therouteis
suppressed.Thedefault
suppresslimitis2000.1-20000
SUPPRESS Specifiessuppress-time.A
routedampeningmore
thanthisvaluewillbe
suppressd.Thedefault
valueis2000.1-20000
MAXSUPPRESS Specifiesthemax-
suppress-time.Maximum
timethatadampened
routeissuppressed.The
defaultmax-suppress
valueis4timesthehalf-
lifetime(60minutes).1-255800UNREACHTIME Specifiestheun-
reachabilityhalf-lifetime
forpenalty,inminutes.1-45
ROUTEMAP route-mapWORDRoute-
maptospecifycriteriafor
dampening.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Routedampeningminimizestheinstabilitycausedbyrouteflapping.Apenaltyis
addedforeveryflapinaflappingroute.Assoonasthetotalpenaltyreachesthe
suppresslimittheadvertisementoftherouteissuppressed.Thispenaltyisdecayed
accordingtotheconfiguredhalftimevalue.Oncethepenaltyislowerthanthereuse
limit,therouteadvertisementisun-suppressed.
Thedampeninginformationispurgedfromtherouteroncethepenaltybecomesless
thanhalfofthereuselimit.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpdampening2080025008025
RelatedCommands
N/A8016.7.13bgpdefaultipv4-unicast
CommandPurpose
UsethiscommandtoconfigureBGPdefaultsandactivateipv4-unicastforapeerby
default.ThisaffectstheBGPglobalconfiguration.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
bgpdefaultipv4-unicast
nobgpdefaultipv4-unicast
CommandMode
RouterConfiguration
Default
Thebgpdefaultipv4unicastisthedefaultbehavior.
Usage
Thenobgpdefaultipv4-unicastcommandisusedtodisablethedefaultbehaviorof
theBGProutingprocessofexchangingIPv4addressinginformationwithBGP
neighborrouters.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpdefaultipv4-unicast
RelatedCommands
N/A8026.7.14bgpdefaultlocal-preference
CommandPurpose
Usethiscommandtochangethedefaultlocalpreferencevalue.
Usethenoparameterwiththiscommandtoreverttothedefaultsetting.
CommandSyntax
bgpdefaultlocal-preferencePREF_VALUE
nodefaultlocal-preference
Parameter ParameterDescriptionParameterValue
PREF_VALUE Configuredefaultlocal
preferencevalue.
Thedefaultlocal
preferencevalueis100.0-4294967295
CommandMode
RouterConfiguration
Default
Thedefaultlocalpreferencevalueis100.
Usage
Localpreferenceindicatesthepreferredpathwhentherearemultiplepathstothe
samedestination.Thepathhavingahigherpreferenceispreferred.Usebgpdefault
local-preferencecommandtodefinepreferenceofaparticularpath.Thepreference
issenttoallroutersandaccessserversinthelocalautonomoussystem.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpdefaultlocal-preference2345555803RelatedCommands
N/A
6.7.15bgpdeterministic-med
CommandPurpose
UsethiscommandtocomparetheMultiExitDiscriminator(MED)variablewhen
choosingamongroutesadvertisedbydifferentpeersinthesameautonomous
system.
Usethenoparameterwiththiscommandtodisallowthissetting.
CommandSyntax
bgpdeterministic-med
nobgpdeterministic-med
CommandMode
RouterConfiguration
Default
Disabled
Usage
"MultiExitDiscriminator(MED)isusedinbestpathselectionbyBGP.MEDis
comparedafterBGPattributesweight,localpreference,AS-pathandoriginhave
beencomparedandareequal.Enablebgpdeterministicmedcommandonallrouters
inthelocalAS,foracorrectcomparisonresult.Afterenablingthiscommand,all
pathsforthesameprefixaregroupedtogetherandarrangedaccordingtotheirMED
value.
Basedonthiscomparison,thebestpathisthenchosen.
ThiscommandcomparesMEDvariablewhenchoosingroutesadvertisedbydifferent
peersinthesameAS,tocompareMED,whenchoosingroutesfromneighborsin
differentASsusethebgpalways-compare-medcommand."804Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpdeterministic-med
RelatedCommands
showipbgp,showipbgpneighbors
6.7.16bgpenforce-first-as
CommandPurpose
Usethiscommandtospecifiesthatanyupdatesreceivedfromanexternalneighbor
thatdonothavetheneighborsconfiguredAutonomousSystem(AS)atthe
beginningoftheAS_PATHinthereceivedupdatemustbedenied.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgpenforce-first-as
nobgpenforce-first-as
CommandMode
RouterConfiguration
Default
Disabled
Usage
EnablingthisfeatureaddstothesecurityoftheBGPnetworkbynotallowingtraffic
fromunauthorizedsystems.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpenforce-first-as805RelatedCommands
N/A
6.7.17bgpfast-external-failover
CommandPurpose
UsethiscommandtoresetaBGPsessionimmediately,iftheinterfaceusedforBGP
connectiongoesdown.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgpfast-external-failover
nobgpfast-external-failover
CommandMode
RouterConfiguration
Default
Enabled
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpfast-external-failover
RelatedCommands
N/A8066.7.18bgplog-neighbor-changes
CommandPurpose
Usethiscommandtoenableloggingofstatuschangemessageswithoutturningon
debugbgpcommands.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgplog-neighbor-changes
nobgplog-neighbor-changes
CommandMode
RouterConfiguration
Default
Disabled
Usage
Systemimplementationprovidesotherkindsofloggingservicesforneighborstatus,
forexample,debugbgpfsm,debugbgpevents,etc.However,thesecommands
createasignificanthitintheloggingperformance.
Thebgplog-neighbor-changescommand,logsthefollowingevents:
(1)BGPNotificationReceived
(2)ErroneousBGPUpdateReceived
(3)Userresetrequest
Peertime-out
(5)PeerClosingdownthesession
6.Interfaceflap
7.RouterIDchanged8078.Neighbordeleted
9.Memberaddedtopeergroup
10.Administrativeshutdown
11.RemoteASchanged
12.RRclientconfigurationmodification
(13)Softreconfigurationmodification
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgplog-neighbor-changes
RelatedCommands
N/A
6.7.19bgprouter-id
CommandPurpose
Usethiscommandtoconfiguretherouteridentifier.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
bgprouter-idROUTERID
nobgprouter-id(ROUTERID|)
Parameter ParameterDescriptionParameterValue
ROUTERID A.B.C.DManually
configuredrouterID.IPv4AddressinA.B.C.D
format
CommandMode
RouterConfiguration
AddressFamilyConfiguration808Default
Incasetheloopbackinterfaceisconfiguredtherouter-idissettotheIPaddressofa
loopbackinterface.Ifnot,thehighestIPaddressistherouter-id.
Usage
Usebgprouter-idcommandtomanuallyconfigureafixedrouterIDasaBGProuter
identifier.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgprouter-id1.1.2.3
RelatedCommands
N/A
6.7.20bgpscan-time
CommandPurpose
UsethiscommandtosettheintervalforBGProutenext-hopscanning.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
bgpscan-timeTIME
nobgpscan-time
Parameter ParameterDescriptionParameterValue
TIME Scanningintervalin
seconds.Thedefault
scanningintervalis60
seconds.0-60809CommandMode
RouterConfiguration
Default
N/A
Usage
UsethiscommandtoconfigurescanningintervalsofBGProuters.Thisintervalisthe
periodafterwhichrouterchecksthevalidityoftheroutesinitsdatabase.
TodisableBGPscanning,setthescantimeintervalto0seconds.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpscan-time10
RelatedCommands
N/A
6.7.21clearipbgp*
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallpeers.
CommandSyntax
clearipbgp*(IN|out|SOFT|)
clearipbgp*ipv4PREFIXROUTES
clearipbgp*vpnv4unicastROUTES
clearipbgp*vrfNAMEROUTES
Parameter ParameterDescriptionParameterValue
* clearsallbgppeers -810ipv4 clearsallIPv4address
familypeers-
vpnv4 clearsallvpnv4address
familypeers-
ROUTES (IN|out|SOFT) -
IN in(prefix-filter|) -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
prefix-filter Pushesoutprefix-listORF
anddoesinboundsoft
reconfiguration-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
vrf VPNrouting/forwarding
instance-
NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
PrivilegedEXEC811Default
N/A
Usage
TherearetwokindsBGPreset,hardresetwillclearBGPpeersandestablishagain.
Softresetonlyrefreshroutingtable.
Examples
Switch#clearipbgp*
Switch#clearipbgp*ipv4unicastinprefix-filter
Switch#clearipbgp*vpnv4unicastin
RelatedCommands
N/A
6.7.22clearipbgpA.B.C.D
CommandPurpose
UsethiscommandtoresetaIPv4BGPconnectionforaspecificIPaddress.
CommandSyntax
clearipbgpA.B.C.D(in|out|SOFT)
clearipbgpA.B.C.Dipv4PREFIXROUTES
clearipbgpA.B.C.Dvpnv4unicastROUTES
clearipbgpA.B.C.DvrfNAMEROUTES
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPv4address
oftheBGProutetobe
clearedIPv4AddressinA.B.C.D
format
ipv4 clearsallIPv4address
familypeers-812vpnv4 clearsallVPNv4address
familypeers-
ROUTES (IN|out|SOFT) -
IN inprefix-filter -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
prefix-filter Pushesoutprefix-listORF
anddoesinboundsoft
reconfiguration-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
vrf VPNrouting/forwarding
instance-
NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
PrivilegedEXEC
Default
N/A813Usage
N/A
Examples
Switch#clearipbgp10.10.0.12soft
Switch#clearipbgp10.10.0.10vpnv4unicastout
Switch#clearipbgp11.11.11.11ipv4multicastinprefix-filter
RelatedCommands
N/A
6.7.23clearipbgpdampening
CommandPurpose
UsethiscommandtoresetalldampenedBGProutesunderthespecifiedaddress
family.
CommandSyntax
clearipbgpdampening(A.B.C.D|A.B.C.D/M|)
clearipbgpipv4PREFIXdampening(A.B.C.D|A.B.C.D/M|)
Parameter ParameterDescriptionParameterValue
A.B.C.D SpecifiestheIPv4address
forwhichBgpdampening
istobecleared.IPv4AddressinA.B.C.D
format
A.B.C.D/M SpecifiestheIPv4address
withmaskforwhichBgp
dampeningistobe
cleared.IPv4Addressandmask
lengthinA.B.C.D/Mformat
ipv4 clearsallIPv4address
familypeers-
PREFIX (unicast|multicast) -814unicast addressfamilymodifier-
multicast addressfamilymodifier-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearipbgpdampening10.10.0.121
Switch#clearipbgpipv4unicastdampening
RelatedCommands
N/A
6.7.24clearipbgpflap-statistics
CommandPurpose
Usethiscommandtocleartheflapcountandhistorydurationforalltheprefixes
underthespecifiedaddressfamily.
CommandSyntax
clearipbgpflap-statistics(A.B.C.D|A.B.C.D/M|)
clearipbgpipv4PREFIXflap-statistics(A.B.C.D|A.B.C.D/M|)
Parameter ParameterDescriptionParameterValue815A.B.C.D SpecifiestheIPv4address
forwhichBgpdampening
istobecleared.IPv4AddressinA.B.C.D
format
A.B.C.D/M SpecifiestheIPv4address
withmaskforwhichBgp
dampeningistobe
cleared.IPv4Addressandmask
lengthinA.B.C.D/Mformat
ipv4 clearsallIPv4address
familypeers-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearipbgpflap-statistics10.10.0.121
Switch#clearipbgpipv4unicastflap-statistics
RelatedCommands
N/A8166.7.25clearipbgpASN
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallpeersinaspecifiedAutonomous
System.
CommandSyntax
clearipbgpASN(IN|out|SOFT|)
clearipbgpASNipv4PREFIXROUTES
clearipbgpASNvpnv4unicastROUTES
Parameter ParameterDescriptionParameterValue
ASN SpecifiestheASNumber
forwhichallrouteswillbe
cleared1-65535
ipv4 clearsallIPv4address
familypeers-
vpnv4 clearsallVPNv4address
familypeers-
ROUTES (IN|out|SOFT) -
IN inprefix-filter -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
prefix-filter Pushesoutprefix-listORF
anddoesinboundsoft
reconfiguration-817SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearipbgp100
Switch#clearipbgp200ipv4unicastinprefix-filter
Switch#clearipbgp500vpnv4unicastin
RelatedCommands
N/A
6.7.26clearipbgpexternal
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallexternalpeers.
CommandSyntax
clearipbgpexternal(In|out|SOFT|)818clearipbgpexternalipv4PREFIXROUTES
Parameter ParameterDescriptionParameterValue
external Clearsallexternalpeers-
ROUTES (IN|out|SOFT) -
IN inprefix-filter -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
ipv4 clearsallIPv4address
familypeers-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A819Examples
Switch#clearipbgpexternalout
Switch#clearipbgpexternalipv4unicastinprefix-filter
RelatedCommands
N/A
6.7.27clearipbgppeer-group
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallmembersofapeergroup.
CommandSyntax
clearipbgppeer-groupWORD(In|out|SOFT|)
clearipbgppeer-groupWORDipv4PREFIXROUTES
Parameter ParameterDescriptionParameterValue
peer-group Clearsallmembersofa
peergroup-
WORD Specifiesthenameofthe
peergroupforwhichall
memberswillbecleared.Upto20characters
ipv4 clearsallIPv4address
familypeers-
ROUTES (IN|out|SOFT) -
prefix-filter Pushesoutprefix-listORF
anddoesinboundsoft
reconfiguration-
IN inprefix-filter -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-820out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
PREFIX (unicast|multicast) -
unicast addressfamilymodifier-
multicast addressfamilymodifier-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
None
Examples
Switch#clearipbgppeer-groupPeer1out
Switch#clearipbgppeer-groupmypeeripv4unicastinprefix-filter
RelatedCommands
N/A
6.7.28clearipbgpvrf
CommandPurpose
UsethiscommandtoresetthespecifiedVPNRouting/ForwardingInstanceforBGP
connections.821CommandSyntax
clearipbgp(A.B.C.D)|*)vrfWORD(out|in|SOFT)
Parameter ParameterDescriptionParameterValue
WORD Specifiesthenameofthe
VRFUpto15characters
A.B.C.D SpecifiestheIPv4address
oftheBGProutetobe
clearedIPv4AddressinA.B.C.D
format
* Clearsallpeers -
out Performssoft
reconfigurationout-
SOFT soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
in Performssoft
reconfigurationin-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Iftheneighboraddressisspecifiedwiththiscommanditclearsthespecified
connection.IfnoaddressisspecifiedthiscommandclearsalltheBGProutes.
Examples
Switch#clearipbgp3.3.3.3vrfVRF1softin822RelatedCommands
N/A
6.7.29debugbgp
CommandPurpose
UsethiscommandtospecifyalldebuggingoptionsforBGP.Usethenoparameter
withthiscommandtodisablethisfunction.
CommandSyntax
debugbgp(all|dampening|events|filters|fsm|keepalives|mpls|updates)
nodebugbgp(all|dampening|events|filters|fsm|keepalives|mpls|nsm|
updates)
Parameter ParameterDescriptionParameterValue
all Usedwiththenoform
exclusively;turnsoffall
debuggingforBGP-
dampening Specifiesdebuggingfor
Bgpdampening.-
events Specifiesdebuggingfor
BGPevents.-
filters Specifiesdebuggingfor
BGPfilters.-
fsm Specifiesdebuggingfor
BGPFiniteStateMachine
(FSM).-
mpls Specifiesdebugginfor
BGPMultiprotocolLabel
Switching.-823keepalives Specifiesdebuggingfor
BGPkeepalives.-
updates updatesSpecifies
debuggingforBGP
updates.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Thiscommandwithoutanyparametersturnsonnormalbgpdebuginformation.
Examples
Switch#debugbgp
Switch#debugbgpevents
RelatedCommands
N/A
6.7.30distance
CommandPurpose
Usethiscommandtodefineanadministrativedistance.
Usethenoparameterwiththiscommandtoremoveanadministrativedistance.
CommandSyntax
distanceADMINDISTANCEIP_ADDR/IP_MASK_LEN
nodistanceADMINDISTANCEIP_ADDR/IP_MASK_LEN824Parameter ParameterDescriptionParameterValue
ADMINDISTANCE Specifiesthe
administrativedistance.1-255
IP_ADDR theIPsourceprefix IPv4Address
IP_MASK_LEN theIPsourceprefixmask
length1-32
CommandMode
RouterConfiguration
Default
N/A
Usage
UsethiscommandtosettheadministrativedistanceforBGP.Thisdistanceisa
ratingoftrustworthinessofarouter.
Thehigherthedistancethelowerthetrustrating.
Theadministrativedistancecanbesetforexternal,internalandlocalroutes.External
pathsarerouteslearnedfromaneighboroutoftheAS.Theinternalroutesareroutes
learnedfromanotherrouterwithinthesameAS.Localroutesarefortherouterthatis
beingredistributedfromanotherprocess.
Iftheadministrativedistanceischanged,itcouldcreateinconsistencyintherouting
tableandobstructrouting.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)distance3410.10.0.0/24mylist
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)distancebgp342315825RelatedCommands
N/A
6.7.31exit-address-family
CommandPurpose
Usethiscommandtoexittheaddressfamilymode.
CommandSyntax
exit-address-family
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
N/A
Examples
Thefollowingexampleshowstheuseofexit-address-familycommandandthe
changeinthepromptafterusingthiscommand:
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyipv4unicast
Switch(config-router-af)#exit-address-family
Switch(config-router)#
RelatedCommands
address-family8266.7.32ipas-pathaccess-list
CommandPurpose
UsethiscommandtodefineaBGPAutonomousSystem(AS)pathaccesslist.
Usethenoparameterwiththiscommandtodisableuseoftheaccesslist.
CommandSyntax
ipas-pathaccess-listLISTNAME(deny|permit)LINE
noipas-pathaccess-listLISTNAME(deny|permit)LINE
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiesthenameofthe
accesslist.Upto40charactersthe
firstcharactermustbe
among[a-zA-Z0-9]
deny (Optional)Deniesaccess
tomatchingconditions.-
permit (Optional)Permitsaccess
tomatchingconditions.-
LINE Specifiesaregular
expressiontomatchthe
BGPASpaths.Aregularexpressionto
matchtheBGPASpaths
CommandMode
GlobalConfiguration
Default
N/A
Usage
Namedcommunitylistisafilterbasedonregularexpressions.Iftheregular
expressionmatchesthespecifiedstringrepresentingtheASpathoftheroute,then827thepermitordenyconditionapplies.UsethiscommandtodefinetheBGPaccesslist
globally,usetheneighborrouterconfigurationcommandtoapplyaspecificaccess
list.
Examples
Switch#configureterminal
Switch(config)#ipas-pathaccess-listmylistdeny^65535$
RelatedCommands
N/A
6.7.33ipcommunity-list
CommandPurpose
Usethiscommandtoaddacommunitylistentry.
Usethenoparameterwiththiscommandtodeletethecommunitylistentry.
CommandSyntax
ipcommunity-listLISTNUM(deny|permit)COMMUNITY
noipcommunity-listLISTNUM(deny|permit)COMMUNITY
Parameter ParameterDescriptionParameterValue
LISTNUM Specifiesthecommunity
ID.
1-99:Standardlist
100-199:Expandeslist1-199
deny Specifiesthecommunityto
reject.-
permit Specifiesthecommunityto
accept.-
COMMUNITY (AA:NN|internet|local-
AS|no-advertise|no-export)-828AA:NN Specifiesthevalidvalue
forthecommunitynumber.
Thisformatrepresentsthe
32bitcommunitiesvalue,
whereASisthehighorder
16bitsandVAListhelow
order16bitsindigit
format.AAisintherange1-65535
NNisintherangeof1-
65535
internet Specifiesroutesnottobe
advertisedtotheInternet.-
local-AS Specifiesroutesnottobe
advertisedtoexternalBGP
peers.-
no-advertise Specifiesroutesnottobe
advertisedtootherBGP
peers.-
no-export Specifiesroutesnottobe
advertisedoutsideof
AutonomousSystem
boundary.-
CommandMode
GlobalConfiguration
Default
N/A
Usage
Usethecommunity-liststospecifyBGPcommunityattributes.Thecommunity
attributeisusedforimplementingpolicyrouting.Itisanoptional,transitiveattribute
andfacilitatestransferoflocalpoliciesthroughdifferentautonomoussystems.It
includescommunityvaluesthatare32bitslong.829Therearetwokindsofcommunity-lists:theexpandedandstandard.Thestandard
community-listdefinesthecommunityattributesinaspecifiedformatandnotwith
regularexpressions.Theexpandedcommunity-listdefinesthecommunitiesattributes
withregularexpressions.
Examples
Switch#configureterminal
Switch(config)#ipcommunity-list20permit7675:807675:90
RelatedCommands
ipcommunity-liststandard
ipcommunity-listexpanded
6.7.34ipcommunity-listexpanded
CommandPurpose
Usethiscommandtoaddacommunitylistentry.
Usethenoparameterwiththiscommandtodeletethecommunitylistentry.
CommandSyntax
ipcommunity-listexpandedWORD(deny|permit)LINE
noipcommunity-listexpandedWORD(deny|permit)LINE
Parameter ParameterDescriptionParameterValue
expanded Addanexpanded
community-listentry.-
WORD Expandedcommunitylist
nameUpto20characters
deny Specifiescommunityto
reject.-
permit Specifiescommunityto
accept.-830LINE Specifiesaregular
expressiontomatchthe
BGPASpaths.Aregularexpression
CommandMode
GlobalConfiguration
Default
N/A
Usage
Usethecommunity-liststospecifyBGPcommunityattributes.Thecommunity
attributeisusedforimplementingpolicyrouting.Itisanoptional,transitiveattribute
andfacilitatestransferoflocalpoliciesthroughdifferentautonomoussystems.It
includescommunityvaluesthatare32bitslong.
Therearetwokindsofcommunity-liststheexpandedandstandard.Thestandard
community-listdefinesthecommunityattributesinaspecifiedformatandnotwith
regularexpressions.Theexpandedcommunity-listdefinesthecommunitiesattributes
withregularexpressions.
Examples
Switch#configureterminal
Switch(config)#ipcommunity-listexpandedCLISTpermit.*
RelatedCommands
ipcommunity-list
ipcommunity-liststandard
6.7.35ipcommunity-liststandard
CommandPurpose
Usethiscommandtoaddastandardcommunity-listentry.
Usethenoparameterwiththiscommandtodeletethestandardcommunity-listentry.831CommandSyntax
ipcommunity-liststandardWORD(deny|permit)COMMUNITY
noipcommunity-liststandardWORD(deny|permit)COMMUNITY
Parameter ParameterDescriptionParameterValue
standard Specifiesastandard
communitylist.-
WORD Standardcommunitylist
nameUpto20characters
deny Specifiescommunityto
reject.-
permit Specifiescommunityto
accept.-
COMMUNITY (AA:NN|internet|local-
AS|no-advertise|no-export)-
AA:NN Specifiesthevalidvalue
forthecommunitynumber.
Thisformatrepresentsthe
32bit
communitiesvalue,where
ASisthehighorder16bits
andVAListheloworder
16bitsindigit
Specifiesthevalidvalue
forthecommunitynumber.
Thisformatrepresentsthe
32bit
communitiesvalue,where
ASisthehighorder16bits
andVAListheloworder
16bitsindigit
format.AAisintherange1-65535
NNisintherangeof1-
65535832internet Specifiesroutesnottobe
advertisedtotheInternet.-
local-AS Specifiesroutesnottobe
advertisedtoexternalBGP
peers.-
no-advertise Specifiesroutesnottobe
advertisedtootherBGP
peers.-
no-export Specifiesroutesnottobe
advertisedoutsideofthe
AutonomousSystem
boundary.-
CommandMode
GlobalConfiguration
Default
N/A
Usage
Usethecommunity-liststospecifyBGPcommunityattributes.Thecommunity
attributeisusedforimplementingpolicyrouting.Itisanoptional,transitiveattribute
andfacilitatestransferoflocalpoliciesthroughdifferentautonomoussystems.It
includescommunityvaluesthatare32bitslong.
Therearetwokindsofcommunity-liststheexpandedandstandard.Thestandard
community-listdefinesthecommunityattributesinaspecifiedformatwithoutregular
expressions.Theexpandedcommunity-listdefinesthecommunitiesattributeswith
regularexpressions.
Usetheipcommunity-liststandardcommandtoaddastandardcommunity-listentry.
Thestandardcommunity-listiscompiledintobinaryformatandisdirectlycompared
withtheBGPcommunitiesattributeintheBGPupdates.Thecomparisonisfaster833thantheexpandedcommunity-list.Anycommunityvaluethatdoesnotmatchthe
standardcommunityvalueisautomaticallytreatedasexpanded.
Examples
Switch#configureterminal
Switch(config)#ipcommunity-liststandardCLISTpermit7675:807675:90no-export
RelatedCommands
ipcommunity-list
ipcommunity-listexpanded
6.7.36neighboractivate
CommandPurpose
UsethiscommandtoenabletheexchangeofthespecifiedAFrouteswitha
neighboringrouter.
Usethenoparameterwiththiscommandtodisableexchangeofinformationwitha
neighbor.
CommandSyntax
neighborNEIGHBORIDactivate
noneighborNEIGHBORIDactivate
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format834TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
AftertheTCPconnectionisopenedwiththeneighbor,thiscommandisusedto
enableordisabletheexchangeofthespecifiedAFinformationwithaneighboring
router.
ToenabletheexchangeofmulticastandVPNv4addressprefixtypes,neighborsare
activatedusingtheneighboractivatecommandinaddressfamilymode.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor1.2.3.4activate
RelatedCommands
neighborremote-as8356.7.37neighboradvertisement-interval
CommandPurpose
UsethiscommandtosettheminimumintervalbetweensendingtheBGProuting
updates.
Usethenoparameterwiththiscommandtosettheintervaltimetodefault.
CommandSyntax
neighborNEIGHBORIDadvertisement-intervalTIME
noneighborNEIGHBORIDadvertisement-interval
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
TIME Advertise-intervalvaluein
seconds0-600
CommandMode
RouterConfiguration836Default
N/A
Usage
UsethiscommandtosettheminimumintervalbetweenthesendingofBGProuting
updates.Toreducetheflappingofroutestointernet,aminimumadvertisement
intervalisset,sothattheBGProutingupdatesaresentonlyperintervalseconds.
bgpdampeningcanalsobeusedtocontroltheeffectsofflappingroutes.Forthe
originatedbgproutestheywouldbesentoutwhenas-origination-intervaland
advertisement-intervalexpiredatthesametime.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.3advertisement-interval45
RelatedCommands
N/A
6.7.38neighboras-origination-interval
CommandPurpose
Usethiscommandtosettheminimumintervalbetweenreadytosendtheoriginated
BGProutingupdates.
Usethenoparameterwiththiscommandtosettheintervaltimetodefault.
CommandSyntax
neighborNEIGHBORIDas-origination-intervalTIME
noneighborNEIGHBORIDas-origination-intervalTIME
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -837A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
TIME Advertise-intervalvaluein
seconds0-600
CommandMode
RouterConfiguration
Default
N/A
Usage
Usethiscommandtosettheminimumintervalbetweenthereadytosendof
originatedBGProutingupdates.Fortheoriginatedbgproutestheywouldbesent
outwhenas-origination-intervalandadvertisement-intervalexpiredatthesametime.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.3advertisement-interval45838RelatedCommands
N/A
6.7.39neighborallowas-in
CommandPurpose
UsethiscommandtoconfigurePErouterstoallowre-advertisementofallprefixes
containingduplicateAutonomousSystemNumbers(ASNs).
UsethenoparameterwiththiscommandtodisablethereadvertisementofaPE
routersASN.
CommandSyntax
neighborNEIGHBORallowas-in[NUMBER]
noneighborNEIGHBORallowas-in
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters839NUMBER Numberofoccurancesof
ASnumber.Defaultvalue
is11-10
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Disabled
Usage
Inahubandspokeconfiguration,aPErouterre-advertisesallprefixescontaining
duplicateASNs.Usetheneighborallowas-incommandtoconfiguretwoVRFson
eachPEroutertoreceiveandre-advertiseprefixes.OneoftheVRFsreceives
prefixeswithASNsfromallPEroutersandthenadvertisesthemtoneighboringPE
routers.TheotherVRFreceivesprefixeswithASNsfromtheCErouterandre-
advertisesthemtoallPEroutersinthehubandspokeconfiguration.
ControlthenumberoftimesanASNisadvertised,byspecifyinganumberfrom1to
10.
Examples
Switch#configureterminal
Switch(config-router)#address-familyipv4vrfVRF_A
Switch(config-router-af)#neighbor10.10.0.1allowas-in3
RelatedCommands
N/A
6.7.40neighborattribute-unchanged
CommandPurpose
UsethiscommandtoadvertiseunchangedBGPattributestothespecifiedneighbor.840Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDattribute-unchanged{as-path|next-hop|med}
noneighborNEIGHBORIDattribute-unchanged{as-path|next-hop|med}
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
as-path ASpathattribute -
next-hop Nexthopattribute -
med MultiExitDiscriminator-
CommandMode
RouterConfiguration
AddressFamilyConfiguration841Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.75attribute-unchangedas-pathmed
RelatedCommands
N/A
6.7.41neighborcapabilitydynamic
CommandPurpose
Usethiscommandtoenablethedynamiccapabilityforaspecificpeer.
Usethenoparameterwiththiscommandtodisablethedynamiccapability.
CommandSyntax
neighborNEIGHBORIDcapabilitydynamic
noneighborNEIGHBORIDcapabilitydynamic
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format842TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
Disabled
Usage
ThiscommandallowsaBGPspeakertoadvertiseorwithdrawanaddressfamily
capabilitytoapeerinanon-disruptivemanner.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.10.1capabilitydynamic
RelatedCommands
N/A
6.7.42neighborcapabilityorfprefix-list
CommandPurpose
UsethiscommandtoadvertiseORFcapabilitytoneighbors.843Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDcapabilityorfprefix-list(both|receive|send)
noneighborNEIGHBORIDcapabilityorfprefix-list(both|receive|send)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
orf AdvertisesORFcapability
toitsneighbors-
both Indicatesthatthelocal
routercansendORF
entriestoitspeeraswell
asreceiveORFentries
fromitspeer.-
receive Indicatesthatthelocal
routeriswillingtoreceive
ORFentriesfromitspeer-844send Indicatesthatthelocal
routeriswillingtosend
ORFentriestoitspeer-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
OutboundRouteFilters(ORFs)sendandreceivecapabilitiestolessenthenumberof
updatesexchangedbetweenneighbors.Byfilteringupdates,thisoptionminimizes
generatingandprocessingofupdates.
ThelocalrouteradvertisestheORFcapabilityinsendmodeandtheremoterouter
receivestheORFcapabilityinreceivemodeapplyingthefilterasoutboundpolicy.
ThetworoutersexchangeupdatestomaintaintheORFforeach
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor1.1.1.1capabilityorfprefix-listboth
RelatedCommands
N/A
6.7.43neighborcapabilityroute-refresh
CommandPurpose
Usethiscommandtoadvertiseroute-refreshcapabilitytothespecifiedneighbors.
Usethenoparameterwiththiscommandtodisablethisfunction845CommandSyntax
neighborNEIGHBORIDcapabilityroute-refresh
noneighborNEIGHBORIDcapabilityroute-refresh
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
Usethiscommandtoadvertisetopeeraboutrouterefreshcapabilitysupport.Ifroute
refreshcapabilityissupported,thenroutercandynamicallyrequestthatthepeer
readvertisesitsAdj-RIB-Out.846Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.10.1capabilityroute-refresh
RelatedCommands
N/A
6.7.44neighbordefault-originate
CommandPurpose
UsethiscommandtoallowaBGPlocalroutertosendthedefaultroute0.0.0.0toa
neighborforuseasadefaultroute.
Usethenoparameterwiththiscommandtosendnorouteasadefault.
CommandSyntax
neighborNEIGHBORIDdefault-originate(ROUTEMAP|)
noneighborNEIGHBORIDdefault-originate(ROUTEMAP|)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format847TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
ROUTEMAP route-mapWORD -
route-map Theroute-maptospecify
criteriatooriginatedefault
routes-
WORD Route-mapname Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Everyroutershouldhaveadefaultroute,itisusedtosenddatastothenetwork
whichisnotexistentinlocalRIB.Tosetadefaultrouteoneachroutercanmake
everyrouterhaveadefaultroute,ortocreateadefaultrouteandbroadcastittoBGP
peerbythiscommand.848Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.10.1default-originateroute-mapmyroute
RelatedCommands
N/A
6.7.45neighbordescription
CommandPurpose
Usethiscommandtoassociateadescriptionwithaneighbor.
Usethenoparameterwiththiscommandtoremovethedescription.
CommandSyntax
neighborNEIGHBORIDdescriptionLINE
noneighborNEIGHBORIDdescription
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format849TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
LINE Astringtodescribingthe
neighbor.Upto80characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor1.2.3.4descriptionBackuprouterforsales.
RelatedCommands
N/A8506.7.46neighbordistribute-list
CommandPurpose
UsethiscommandtofilterrouteupdatefromaparticularBGPneighbor.
Usethenoparameterwiththiscommandtoremoveanentry.
CommandSyntax
neighborNEIGHBORIDdistribute-listWORD(in|out)
noneighborNEIGHBORIDdistribute-listWORD(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WORD ThenameofIPaccess-listUpto40characters
in Indicatesthatincoming
advertisedrouteswillbe
filtered.-851out Indicatesthatoutgoing
advertisedrouteswillbe
filtered.-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Useonlyonedistribute-listperBGPneighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor1.2.3.4distribute-listmylistout
RelatedCommands
N/A
6.7.47neighborebgp-multihop
CommandPurpose
UsethiscommandtoacceptandattemptBGPconnectionstoexternalpeerson
indirectlyconnectednetworks.
Usethenoparameterwiththiscommandtoreturntothedefault.
CommandSyntax
neighborNEIGHBORIDebgp-multihop(COUNT|)
noneighborNEIGHBORIDebgp-multihop852Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
COUNT Maximumhopcount.Ifthe
maximumhopcountisnot
setthehopcountis255.1-255
CommandMode
RouterConfiguration
Default
N/A
Usage
Multihopisnotestablishediftheonlyroutetothemultihoppeerisadefaultroute.
Thisavoidsloopformation.
Examples
Switch#configureterminal
Switch(config)#routerbgp10853Switch(config-router)#neighbor10.10.10.34remote-as20
Switch(config-router)#neighbor10.10.10.34ebgp-multihop5
RelatedCommands
N/A
6.7.48neighborfilter-list
CommandPurpose
UsethiscommandtosetupaBGPfilter.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDfilter-listLISTNAME(in|out)
noneighborNEIGHBORIDfilter-listLISTNAME(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters854in Indicatesthatincoming
advertisedrouteswillbe
filtered.-
out Indicatesthatoutgoing
advertisedrouteswillbe
filtered.-
LISTNAME Thenameofan
autonomoussystempath
accesslist.Upto40characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
ThiscommandspecifiesanaccesslistfilteronupdatesbasedontheBGP
autonomoussystempaths.Eachfilterisanaccesslistbasedonregularexpressions.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.34filter-listlistnameout
RelatedCommands
N/A8556.7.49neighbormaximum-prefix
CommandPurpose
Usethiscommandtocontrolthenumberofprefixesthatcanbereceivedfroma
neighbor.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDmaximum-prefixMAXIMUM
noneighborNEIGHBORIDmaximum-prefix
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
MAXIMUM MAXPREFIX
(THRESHOLD|)(warning-
only|)-856MAXPREFIX Specifiesthemaximum
numberofprefixes
permitted.1-4294967295
THRESHOLD <1-100>Specifiesthe
thresholdvalue,1to100
percent.1-100
warning-only Onlygivesawarning
messagewhenthelimitis
exceeded.-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Theneighbormaximum-prefixcommandallowstheconfigurationofaspecified
numberofprefixesthataBGProuterisallowedtoreceivefromaneighbor.Whenthe
warning-onlyoptionisnotused,ifanyextraprefixesarereceived,therouterendsthe
peering.Aterminatedpeer,staysdownuntiltheclearipbgpcommandisused.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72maximum-prefix1244warning-only
RelatedCommands
N/A8576.7.50neighbornext-hop-self
CommandPurpose
UsethiscommandtoconfiguretherouterasthenexthopforaBGP-speaking
neighbororpeergroup.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
neighborNEIGHBORIDnext-hop-self
noneighborNEIGHBORIDnext-hop-self
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration858Default
N/A
Usage
ThiscommandallowsaBGProutertochangethenexthopinformationthatissentto
theiBGPpeer.ThenexthopinformationissettotheIPaddressoftheinterfaceused
tocommunicatewiththeneighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72remote-as100
Switch(config-router)#neighbor10.10.0.72next-hop-self
RelatedCommands
N/A
6.7.51neighboroverride-capability
CommandPurpose
Usethiscommandtooverrideacapabilitynegotiationresult.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborNEIGHBORIDoverride-capability
noneighborNEIGHBORIDoverride-capability
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format859TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10override-capability
RelatedCommands
N/A
6.7.52neighborpassive
CommandPurpose
UsethiscommandtosetaBGPneighboraspassive.
Usethenoparameterwiththiscommandtodisablethisfunction860CommandSyntax
(no)neighborNEIGHBORIDpassive
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10passive861RelatedCommands
N/A
6.7.53neighborpeer-group(addinganeighbor)
CommandPurpose
Usethiscommandtoaddaneighbortoanexistingpeer-group.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborIPADDRESSpeer-groupTAG
noneighborIPADDRESSpeer-group
Parameter ParameterDescriptionParameterValue
IPADDRESS A.B.C.DSpecifiesthe
addressoftheBGP
neighborinIPv4format.
A.B.C.DSpecifiesthe
addressoftheBGP
neighborinIPv4format.
TAGNameofthepeer-
groupIPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters862CommandMode
RouterConfiguration
Default
N/A
Usage
UsethiscommandtoNeighborswiththesameupdatepoliciesaregroupedintopeer
groups.Thisfacilitatestheupdatesofvariouspolicies,suchas,distributeandfilter
lists.Thepeer-groupisthenconfiguredeasilywithanyoftheneighborcommands.
Anychangesmadetothepeergroupaffectallmembers.
Tocreateapeer-groupusetheneighborpeer-groupcreatecommandandthenuse
thiscommandtoaddneighborstothegroup.
Examples
Thisexampleshowsanewpeer-groupgroup1andtheaddingofaneighbor
10.10.0.63tothegroup:
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighborgroup1peer-group
Switch(config-router)#neighbor10.10.0.63peer-groupgroup1
RelatedCommands
N/A
6.7.54neighborpeer-group(creatingapeer-group)
CommandPurpose
Usethiscommandtocreateapeer-group.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborTAGpeer-group863noneighborTAGpeer-group
Parameter ParameterDescriptionParameterValue
TAG Nameofthepeer-group-
CommandMode
RouterConfiguration
Default
N/A
Usage
Neighborswiththesameupdatepoliciesaregroupedintopeergroups.This
facilitatestheupdatesofvariouspolicies,suchas,distributeandfilterlists.Thepeer-
groupisthenconfiguredeasilywithanyoftheneighborcommands.Anychanges
madetothepeergroupaffectallmembers.Usethiscommandtocreateapeer-
group.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighborgroup1peer-group
RelatedCommands
N/A
6.7.55neighborprefix-list
CommandPurpose
UsethiscommandtodistributeBGPneighborinformationasspecifiedinaprefixlist.
Usethenoparameterwiththiscommandtoremoveanentry.
CommandSyntax
neighborNEIGHBORIDprefix-listLISTNAME(in|out)864noneighborNEIGHBORIDprefix-listLISTNAME(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
LISTNAME ThenumberofanAS-path
accesslist.Upto40characters
in Specifiesthattheaccess
listappliestoincoming
advertisements.-
out Specifiesthattheaccess
listappliestooutgoing
advertisements.-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A865Usage
UsethiscommandtospecifyaprefixlistforfilteringBGPadvertisements.Filteringby
prefixlistmatchestheprefixesofrouteswiththoselistedintheprefixlist.Ifthereisa
match,therouteisused.Anemptyprefixlistpermitsallprefixes.Ifagivenprefix
doesnotmatchanyentriesofaprefixlist,therouteisdeniedaccess.Whenmultiple
entriesofaprefixlistmatchaprefix,theentrywiththesmallestsequencenumberis
consideredtobearealmatch.
Therouterbeginsthesearchatthetopoftheprefixlist,withthesequencenumber1.
Onceamatchordenyoccurs,therouterdoesnotneedtogothroughtherestofthe
prefixlist.Forefficiencythemostcommonmatchesordeniesarelistedatthetop.
Theneighbordistribute-listcommandisanalternativetotheneighborprefix-list
commandandonly
oneofthemcanbeusedforfilteringtothesameneighborinanydirection.
Examples
Switch#configureterminal
Switch(config)#ipprefix-listlist1deny30.0.0.0/24
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10prefix-listlist1in
RelatedCommands
ipprefix-list
6.7.56neighborremote-as
CommandPurpose
UsethiscommandtoconfigureaninternalorexternalBGP(iBGPoreBGP)TCP
sessionwithanotherrouter.
CommandSyntax
neighborNEIGHBORIDremote-asASNUM
noneighborNEIGHBORIDremote-asASNUM
Parameter ParameterDescriptionParameterValue866NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
ASNUM Neighborsautonomous
systemnumber1-4294967295
CommandMode
RouterConfiguration
Default
N/A
Usage
ThiscommandisusedtoconfigureiBGPandeBGPsessionswithotherneighbors.A
peer-groupsupportofthiscommandisconfiguredonlyaftercreatingaspecificpeer-
group.
Examples
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config-router)#neighbor10.10.0.73remote-as345867RelatedCommands
N/A
6.7.57neighborremove-private-AS
CommandPurpose
UsethiscommandtoremovetheprivateAutonomousSystem(AS)numberfrom
outboundupdates.
Usethenoparameterwiththiscommandtooreverttodefault.
CommandSyntax
neighborNEIGHBORIDremove-private-AS
noneighborNEIGHBORIDremove-private-AS
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration868AddressFamilyConfiguration
Default
Disabled
Usage
TheprivateASnumbersrangefrom<64512-65535>.PrivateASnumbersarenot
advertisedtotheInternet.ThiscommandisusedwithexternalBGPpeersonly.The
routerremovestheASnumbersonlyiftheupdateincludesprivateASnumbers.Ifthe
updateincludesbothprivateandpublicASnumbers,thesystemtreatsitasanerror.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.63remove-private-AS
RelatedCommands
N/A
6.7.58neighborroute-reflector-client
CommandPurpose
UsethiscommandtoconfiguretherouterasaBGProutereflectorandconfigurethe
specifiedneighborasitsclient.
Usethenoparameterwiththiscommandtoindicatethattheneighborisnotaclient.
CommandSyntax
neighborNEIGHBORIDroute-reflector-client
noneighborNEIGHBORIDroute-reflector-client
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -869A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
RoutereflectorsareasolutionfortheexplosionofiBGPpeeringwithinan
autonomoussystem.ByroutereflectionthenumberofiBGPpeerswithinanASis
reduced.Usetheneighborroute-reflector-clientcommandtoconfigurethelocal
routerastheroutereflectorandspecifyneighborsasitsclient.
AnAScanhavemorethanoneroutereflector.Oneroutereflectortreatstheother
routereflectorasanotheriBGPspeaker.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72route-reflector-client870RelatedCommands
N/A
6.7.59neighborsend-community
CommandPurpose
UsethiscommandtospecifythatacommunityattributeshouldbesenttoaBGP
neighbor.
Usethenoparameterwiththiscommandtoremovetheentry.Usetheextendedand
noparameterstoremoveextendedcommunities.Specifyingnootherparameter
meansstandardcommunitiesonly.
CommandSyntax
neighborNEIGHBORIDsend-community(both|extended|standard|)
noneighborNEIGHBORIDsend-community(both|extended|standard|)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters871both SendsStandardand
ExtendedCommunity
attributes-
extended SendsExtended
Communityattributes-
standard SendsStandard
Communityattributes-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
None
Usage
Bydefault,communityattributesarenotsenttoaneighbor.Tousethiscommandto
enablethiscommand.Route-mapcanbebasedonneighboraddress,peergroup
nameorASpathinformation.
Examples
Switch#configureterminal
Switch(config)#bgpconfig-typestandard
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72send-communityextended
RelatedCommands
N/A
6.7.60neighborshutdown
CommandPurpose
Usethiscommandtodisableaneighbor.872Usethenoparameterwiththiscommandtore-enabletheneighbor.
CommandSyntax
neighborNEIGHBORIDshutdown
noneighborNEIGHBORIDshutdown
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
Thiscommandshutsdownanyactivesessionforthespecifiedneighborandclears
allrelatedroutingdata.873Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72shutdown
RelatedCommands
N/A
6.7.61neighborsoft-reconfigurationinbound
CommandPurpose
Usethiscommandtoconfiguretostartstoringupdates.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDsoft-reconfigurationinbound
boneighborNEIGHBORIDsoft-reconfigurationinbound
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format874TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Usethiscommandtostoreupdatesforinboundsoftreconfiguration.Soft-
reconfigurationmaybeusedinlieuofBGProuterefreshcapability.Usingthis
commandenableslocalstorageofallthereceivedroutesandtheirattributes.This
requiresadditionalmemory.Whenasoftreset(inbound)isdoneonthisneighbor,the
locallystoredroutesarereprocessedaccordingtotheinboundpolicy.TheBGP
neighborconnectionisnotaffected.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10soft-reconfigurationinbound
RelatedCommands
N/A8756.7.62neighborstrict-capability-match
CommandPurpose
UsethiscommandtoclosetheBGPconnectionifcapabilityvaluedoesnot
completelymatchtoremotepeer.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborNEIGHBORIDstrict-capability-match
noneighborNEIGHBORIDstrict-capability-match
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration876Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10strict-capability-match
RelatedCommands
N/A
6.7.63neighbortimers
CommandPurpose
UsethiscommandtosetthetimersforaspecificBGPneighbor.
UsethenoparameterwiththiscommandtoclearthetimersforaspecificBGP
neighbor
CommandSyntax
neighborNEIGHBORIDtimersKEEPALIVEHOLDTIME
noneighborNEIGHBORIDtimers
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format877TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
KEEPALIVE Frequency(inseconds)at
whicharoutersends
keepalivemessagestoits
neighbor.Thedefaultis60
seconds.1-65535
HOLDTIME Interval(inseconds)after
which,onnotreceivinga
keepalivemessage,the
routerdeclaresaneighbor
dead.Thedefaultis180
seconds.3-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
KeepalivemessagesaresentbyaroutertoinformanotherrouterthattheBGP
connectionbetweenthetwoisstillactive.Thekeepaliveintervalistheperiodoftime
betweeneachkeepalivemessagesentbytherouter.Theholdtimeintervalisthetime878therouterwaitstoreceiveakeepalivemessageandifitdoesnotreceiveamessage
forthisperioditdeclarestheneighbordead.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10timers60120
RelatedCommands
N/A
6.7.64neighborunsuppress-map
CommandPurpose
Usethiscommandtoselectivelyleakmore-specificroutestoaparticularneighbor.
CommandSyntax
neighborNEIGHBORIDunsuppress-mapWORD
noneighborNEIGHBORIDunsuppress-mapWORD
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format879TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WORD Nameofroutemap -
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Whentheaggregate-addresscommandisusedwiththesummary-onlyoption,the
more-specificroutesoftheaggregatearesuppressedtoallneighbors.Usethe
unsuppress-mapcommandtoselectivelyleakmore-specificroutestoaparticular
neighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)neighbor10.10.0.73unsuppress-mapmymap
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)address-familyipv4unicast
Switch(config-router-af)neighbor10.10.0.70unsuppress-mapmymap880RelatedCommands
N/A
6.7.65neighborupdate-source
CommandPurpose
UsethiscommandtoallowinternalBGPsessionstouseanyoperationalinterfacefor
TCPconnections.
Usethenoparameterwiththiscommandtorestoretheinterfaceassignmenttothe
closestinterface.
CommandSyntax
neighborNEIGHBORIDupdate-sourceIFNAME
noneighborNEIGHBORIDupdate-source
Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters881IFNAME Specifiestheloopback
interface.Support
physical/aggregation/loopb
ack/tunnel/vlaninterfaces
CommandMode
RouterConfiguration
Default
N/A
Usage
Usethiscommandinconjunctionwithanyspecifiedinterfaceontherouter.The
loopbackinterfaceistheinterfacethatismostcommonlyusedwiththiscommand.
TheuseofloopbackinterfaceeliminatesadependencyandBGPdoesnothaveto
relyontheavailabilityofaparticularinterfaceformakingTCPconnections.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor10.10.0.72update-sourceeth-0-1
RelatedCommands
N/A
6.7.66neighborweight
CommandPurpose
Usethiscommandtosetdefaultweightsforroutesfromthisneighbor.
Usethenoparameterwiththiscommandtoremoveaweightassignment.
CommandSyntax
neighborNEIGHBORIDweightWEIGHT
noneighborNEIGHBORIDweight882Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WEIGHT Specifiestheweightthis
commandassignstothe
route.0-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
Usethiscommandtospecifyaweightvaluetoallrouteslearnedfromaneighbor.
Theroutewiththehighestweightgetspreferencewhenthereareotherroutesonthe
network.
Unlikethelocal-preferenceattribute,theweightattributeisrelevantonlytothelocal
router.883Theweightsassignedusingthesetweightcommandoverridestheweightsassigned
usingthiscommand.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10weight60
RelatedCommands
N/A
6.7.67neighborfall-overbfd
CommandPurpose
UsethiscommandtoestablishBFDsessiononBGPneighbour.
UsethenoparameterwiththiscommandtodeleteBFDsessiononBGPneighbour.
CommandSyntax
neighborA.B.C.Dfall-overbfd
noneighborA.B.C.Dfall-overbfd
Parameter ParameterDescriptionParameterValue
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4AddressinA.B.C.D
format
CommandMode
RouterConfiguration
Default
N/A884Usage
Enablingbfdonbgpneighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor10.10.10.10fall-overbfd
RelatedCommands
None
6.7.68network
CommandPurpose
UsethiscommandtospecifythenetworkstobeadvertisedbytheBGProuting
process.Aunicastnetworkaddresswithoutamaskisacceptedifitfallsintothe
naturalboundaryofitsclass.Aclass-boundarymaskisderivediftheaddress
matchesitsnaturalclass-boundary.
Usethenoformofthiscommandtoremoveanetworkrouteentry.
CommandSyntax
networkA.B.C.D
networkA.B.C.Droute-mapWORD
nonetworkA.B.C.D
nonetworkA.B.C.Droute-mapWORD
Parameter ParameterDescriptionParameterValue
A.B.C.D IPprefix<network>,e.g.,
35.0.0.0IPv4AddressinA.B.C.D
format
WORD NameoftheroutemapUpto20characters885CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
N/A
Examples
ThefollowingexampleillustratesaClass-Aaddressconfiguredasanetworkroute.
ThenaturalClass-Anetworkprefixmasklengthof8willbeinternallyderived,thatis,
2.0.0.0/8:
Switch#configureterminal
Switch(config)#routerbgp1
Switch(config-router)#network2.0.0.0
!
routerbgp1
nosynchronization
network2.0.0.0
!
RelatedCommands
N/A
6.7.69networksynchronization
CommandPurpose
Usethiscommandtoensuretheexactsamestaticnetworkprefix,specifiedthrough
anyofthenetworkcommands,islocalorhasIGPreachability(intheNSMRIB)
beforebeingintroducedintotheBGPRIB.
Usethenoparameterwiththiscommandtodisablethisfunction.886CommandSyntax
networksynchronization
nonetworksynchronization
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Networksynchronizationisdisabledbydefault.
Usage
N/A
Examples
ThefollowingexampleenablesIGPsynchronizationofBGPstaticnetworkroutesin
therouterconfigurationmode:
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config-router)#networksynchronization
RelatedCommands
N/A
6.7.70synchronization
CommandPurpose
UsethiscommandtoenableIGPsynchronizationofInternalBGP(iBGP)learned
routeswiththeInternalGatewayProtocol(IGP)systemintherouterconfiguration
modeorintheaddress-familyconfigurationmode.
Usethenoparameterwiththiscommandtodisablethisfunction.887CommandSyntax
synchronization
nosynchronization
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
IGPsynchronizationisdisabled.
Usage
SynchronizationisusedwhenaBGProutershouldnotadvertiserouteslearnedfrom
iBGPneighbors,unlessthoseroutesarealsopresentinanIGP(forexample,OSPF).
Synchronizationmaybeenabledwhenalltheroutersinanautonomoussystemdo
notspeakBGP,andtheautonomoussystemisatransitforotherautonomous
systems.ThenosynchronizationcommandisusedwhenBGProutercanadvertise
routeslearnedfromitsiBGPneighborswithoutwaitingfortheIGPreachabilitytobe
present.
Examples
ThefollowingexampleenablesIGPsynchronizationofBGPstaticnetworkroutesin
theIPv4-Unicastaddressfamily:
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config)#address-familyipv4unicast
Switch(config-af)#networksynchronization
RelatedCommands
N/A8886.7.71routerbgp
CommandPurpose
UsethiscommandtoconfigureaBGProutingprocess.
Usethenoparameterwiththiscommandtodisablearoutingprocess.
CommandSyntax
routerbgpASN
norouterbgpASN
Parameter ParameterDescriptionParameterValue
ASN SpecifiestheAutonomous
System(AS)number1-4294967295
CommandMode
GlobalConfiguration
Default
N/A
Usage
TherouterbgpcommandenablesaBGProutingprocess.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#
RelatedCommands
N/A8896.7.72showdebuggingbgp
CommandPurpose
UsethiscommandtodisplaytheBGPdebuggingoptionset.
CommandSyntax
showdebuggingbgp
CommandMode
PrivilegedEXEC
Default
N/A
Usage
None
Examples
Switch#showdebuggingbgp
RelatedCommands
N/A
6.7.73showipbgp
CommandPurpose
UsethiscommandtodisplayBGPnetworkinformation.
CommandSyntax
showipbgp(IPADDRESS|)
showipbgpipv4PREFIX(IPADDRESS|)890Parameter ParameterDescriptionParameterValue
IPADDRESS A.B.C.D|A.B.C.D/M
Specifiestheaddressand
length.IPv4AddressinA.B.C.D
formatorIPv4Address
andmasklengthin
A.B.C.D/Mformat
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgp10.10.1.34/24891RelatedCommands
N/A
6.7.74showipbgpattribute-info
CommandPurpose
Usethiscommandtoshowbgpattributeinformation.
CommandSyntax
showipbgpattribute-info
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpattribute-infocommanddisplaying
internalattributeinformation:
Switch#showipbgpattribute-info
RelatedCommands
N/A
6.7.75showipbgpcidr-only
CommandPurpose
Usethiscommandtodisplayrouteswithnon-naturalnetworkmasks.892CommandSyntax
showipbgpcidr-only
showipbgpipv4PREFIXcidr-only
Parameter ParameterDescriptionParameterValue
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpcidr-onlycommand:
Switch#showipbgpcidr-only893RelatedCommands
N/A
6.7.76showipbgpcommunity
CommandPurpose
Usethiscommandtodisplayroutesmatchingthecommunities.
CommandSyntax
showipbgpcommunityTYPE(exact-match|)
showipbgpipv4PREFIXcommunityTYPE(exact-match|)
Parameter ParameterDescriptionParameterValue
TYPE AA:NN|local-AS|no-
advertise|no-export-
AA:NN Specifiesthevalidvalue
forthecommunitynumber.
Thisformatrepresentsthe
32bitcommunitiesvalue,
whereASisthehighorder
16bitsandVAListhelow
order16bitsindigit
format.AAisintherange1-65535
NNisintherangeof1-
65535
local-AS Donotsendoutsidelocal
AS(well-known
community).-
no-advertise Donotadvertisetoany
peer(well-known
community).-
no-export DonotexporttonextAS
(well-knowncommunity).-894exact-match Specifiesthatdisplaythe
exactmatchofthe
communities.-
PREFIX (multicast|unicast) -
multicast SpecifiesaIPv4multicast
addressfamily.-
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpcommunity10:23exact-match
Switch#showipbgpipv4multicastcommunity10:23exact-match
RelatedCommands
N/A
6.7.77showipbgpcommunity-info
CommandPurpose
UsethiscommandtolistallBGPcommunityinformation.895CommandSyntax
showipbgpcommunity-info
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpcommunity-info
RelatedCommands
N/A
6.7.78showipbgpcommunity-list
CommandPurpose
Usethiscommandtodisplayroutesthatmatchthecommunity-list.
CommandSyntax
showipbgpcommunity-listLISTNAME(exact-match|)
showipbgpipv4PREFIXcommunity-listLISTNAME(exact-match|)
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiesthecommunity
listname.Upto20characters896exact-match Displaysonlyroutesthat
haveexactlythesame
specifiedcommunities.-
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpcommunity-listmylistexact-match
Switch#showipbgpipv4unicastcommunity-listmylist897RelatedCommands
N/A
6.7.79showipbgpdampening
CommandPurpose
Usethiscommandtodisplaydetailedinformationaboutdampening.
CommandSyntax
showipbgpdampening(dampened-paths|flap-statistics|parameters)
showipbgpipv4PREFIXdampening(dampened-paths|flap-statistics|parameters)
Parameter ParameterDescriptionParameterValue
dampened-paths Displaypathssuppressed
duetodampening.-
flap-statistics Displayflapstatisticsof
routes.-
parameters Displaydetailsof
configureddampening
parameters.-
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-898CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Enablebgpdampeningtomaintaindampened-pathinformationinmemory.The
followingisasampleoutputdisplayingallthedampeningparameters:
Switch#showipbgpdampeningparameters
RelatedCommands
N/A
6.7.80showipbgpfilter-list
CommandPurpose
Usethiscommandtodisplayroutesconformingtothefilter-list.
CommandSyntax
showipbgpfilter-listLISTNAME
showipbgpipv4PREFIXfilter-listLISTNAME
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiestheregular-
expressionaccesslist
name.Upto20characters899ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpfilter-listmylist
Switch#showipbgpipv4unicastfilter-listSwitch
RelatedCommands
N/A9006.7.81showipbgpinconsistent-as
CommandPurpose
UsethiscommandtodisplayrouteswithinconsistentASPaths.
CommandSyntax
showipbgpinconsistent-as
showipbgpipv4PREFIXinconsistent-as
Parameter ParameterDescriptionParameterValue
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A901Examples
Switch#showipbgpinconsistent-as
Switch#showipbgpipv4unicastinconsistent-as
RelatedCommands
N/A
6.7.82showipbgpneighbors
CommandPurpose
UsethiscommandtodisplaydetailedinformationonTCPandBGPneighbor
connections.
CommandSyntax
showipbgpneighbors(IPADDRESS(advertised-routes|RECEIVED|received-
routes|routes)|)
showipbgpipv4PREFIXneighbors(IPADDRESS(advertised-routes|received|
received-routes|routes)|)
Parameter ParameterDescriptionParameterValue
IPADDRESS SpecifiesanIPv4address.IPv4AddressinA.B.C.D
format
advertised-routes Displaystheroutes
advertisedtoaBGP
neighbor.-
received receivedprefix-filter
Displaysallreceived
routes,bothacceptedand
rejected.-
prefix-filter Displaystheprefix-list
filter.-902received-routes Displaysthereceived
routesfromneighbor.To
displayallthereceived
routesfromtheneighbor,
configuretheBGPsoft
reconfigurefirst.routes
Displaysallaccepted
routeslearnedfrom
neighbors.-
routes Displayrouteslearned
fromneighbor-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A903Examples
Thisisasampleoutputfromtheshowipbgpneighborscommanddisplaying
informationaboutthespecifiedneighbor:
Switch#showipbgpneighbors
RelatedCommands
N/A
6.7.83showipbgppaths
CommandPurpose
UsethiscommandtodisplayBGPpathinformation.
CommandSyntax
showipbgppaths
showipbgpipv4PREFIXpaths
Parameter ParameterDescriptionParameterValue
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC904Default
N/A
Usage
N/A
Examples
Switch#showipbgppaths
RelatedCommands
N/A
6.7.84showipbgpprefix-list
CommandPurpose
Usethiscommandtodisplayroutesmatchingtheprefix-list.
CommandSyntax
showipbgpprefix-listLIST
showipbgpipv4PREFIXprefix-listLIST
Parameter ParameterDescriptionParameterValue
LIST Specifiesthenameofthe
IPprefixlist.Upto40characters
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -905unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpprefix-listmylist
RelatedCommands
N/A
6.7.85showipbgpquote-regexp
CommandPurpose
UsethiscommandtodisplayroutesmatchingtheASpathregularexpressionin
quotes.
CommandSyntax
showipbgpquote-regexpLINE
showipbgpipv4PREFIXquote-regexpLINE
Parameter ParameterDescriptionParameterValue906LINE Specifiesaregular-
expressiontomatchthe
BGPASpathsAregular-expressionin
quote
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpquote-regexpSwitch
RelatedCommands
N/A9076.7.86showipbgpregexp
CommandPurpose
UsethiscommandtodisplayroutesmatchingtheASpathregularexpression.
CommandSyntax
showipbgpregexpLINE
showipbgpipv4PREFIXregexpLINE
Parameter ParameterDescriptionParameterValue
regexp Displaysroutesmatching
theASpathregular
expression.-
LINE Specifiesaregular
expressiontomatchthe
BGPASpaths.Aregular-expression
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC908Default
N/A
Usage
N/A
Examples
Switch#showipbgpregexpmyexpression
RelatedCommands
N/A
6.7.87showipbgpscan
CommandPurpose
UsethiscommandtodisplayBGPscanstatus.
CommandSyntax
showipbgpscan
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showipbgpscan909RelatedCommands
N/A
6.7.88showipbgpsummary
CommandPurpose
UsethiscommandtodisplayasummaryofBGPneighborstatus.
CommandSyntax
showipbgpsummary
showipbgpipv4PREFIXsummary
Parameter ParameterDescriptionParameterValue
ipv4 Specifiestheaddress
family.Thetypeofaddress
familydeterminesthe
routingtablethatis
displayed.-
PREFIX (multicast|unicast) -
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
multicast SpecifiesaIPv4multicast
addressfamily.-
CommandMode
PrivilegedEXEC
Default
N/A910Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpsummarycommanddisplayinga
summaryofBGPneighborstatus:
Switch#showipbgpsummary
RelatedCommands
N/A
6.7.89showipbgpvpnv4all
CommandPurpose
UsethiscommandtodisplayVPNv4NLRIspecificinformation.
CommandSyntax
showipbgpvpnv4allTYPE
Parameter ParameterDescriptionParameterValue
all Displaysinformationabout
allVPNv4NLRIs-
TYPE (A.B.C.D|neighbors|summ
ary|)-
neighbors Displaysinformationabout
BGPneighbors.-
summary Displayssummaryofthe
BGPneighborstatus.-911A.B.C.D Networkforwhich
informationwillbe
displayedintheBGP
routingtable.IPv4AddressinA.B.C.D
format
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpvpnv4allcommanddisplayingVPNv4
specificinformation:
Switch#showipbgpvpnv4all
RelatedCommands
N/A
6.7.90showipbgpvpnv4rd
CommandPurpose
UsethiscommandtodisplayVPNv4NLRIspecificinformation.
CommandSyntax
showipbgpvpnv4rdWORDTYPE
Parameter ParameterDescriptionParameterValue912rd Displayinformationfora
routedistinguisher-
WORD VPNRouteDistinguisherUpto15characters
TYPE (A.B.C.D|neighbors|summ
ary|)-
neighbors Displaysinformationabout
BGPneighbors.-
summary Displayssummaryofthe
BGPneighborstatus.-
A.B.C.D Networkforwhich
informationwillbe
displayedintheBGP
routingtable.IPv4AddressinA.B.C.D
format
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpvpnv4rdcommanddisplayingVPNv4
specificinformation:
Switch#showipbgpvpnv4rd123
RelatedCommands
N/A9136.7.91showipbgpvpnv4vrf
CommandPurpose
UsethiscommandtodisplayVPNv4NLRIspecificinformation.
CommandSyntax
showipbgpvpnv4vrfWORDTYPE
Parameter ParameterDescriptionParameterValue
vrf VPNRouting/Forwarding
instance-
WORD VPNRouting/Forwarding
instancenameUpto15characters
TYPE (A.B.C.D|neighbors|summ
ary|)-
neighbors Displaysinformationabout
BGPneighbors.-
summary Displayssummaryofthe
BGPneighborstatus.-
A.B.C.D Networkforwhich
informationwillbe
displayedintheBGP
routingtable.IPv4AddressinA.B.C.D
format
CommandMode
PrivilegedEXEC
Default
N/A914Usage
N/A
Examples
Thisisasampleoutputfromtheshowipbgpvpnv4rdcommanddisplayingVPNv4
specificinformation:
Switch#showipbgpvpnv4vrf123
RelatedCommands
N/A
6.7.92timers
CommandPurpose
UsethiscommandsetstheBGPkeepalivetimerandholdtimetimervalues.
Usethenoparameterwiththiscommandtoresettimerstodefaultvalue.
CommandSyntax
timersbgpKEEPALIVEHOLDTIME
notimersbgp
Parameter ParameterDescriptionParameterValue
KEEPALIVE <0-65535>Thefrequency
withwhichthekeepalive
messagesaresenttothe
neighbors.
Thedefaultvalueis60
seconds.0-65535915HOLDTIME Theintervalafterwhichthe
neighborisconsidered
deadifkeepalive
messages
arenotreceived.The
defaultholdtimevalueis
180seconds.3-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
Thiscommandisusedgloballytosetorunsetthekeepaliveandholdtimevaluesfor
alltheneighbors.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#timersbgp40120
RelatedCommands
N/A
6.8ISISCommands
6.8.1accept-lifetime
CommandPurpose
Usethiscommandtospecifythetimeperiodduringwhichtheauthenticationonakey
chainisreceivedasvalid.
Usethenoparameterwiththiscommandtonegatethiscommand.916CommandSyntax
accept-lifetimeHH:MM:SSDAYMONTHYEARHH1:MM1:SS1DAY1MONTH1
YEAR1
accept-lifetimeHH:MM:SSMONTHDAYYEARinfinite
accept-lifetimeHH:MM:SSMONTHDAYYEARduration<1-2147483646>
noaccept-lifetime
Parameter ParameterDescriptionParameterValue
HH:MM:SS Specifytheendtimeof
accept-lifetimeinhours,
minutesandseconds.0-23:0-59:0-59
DAY Specifythedayofthe
monthtoend.1-31
MONTH Specifythemonthofthe
yeartoendasthefirst
threelettersofthemonth,
forexample,december.january,february,march,
april,may,june,july,
august,september,
october,november,
december
YEAR Specifytheyeartoend.1993-2035
HH1:MM1:SS1 0-23:0-59:0-59
DAY1 1-31
MONTH1 january,february,march,
april,may,june,july,
august,september,
october,november,
december
YEAR1 1993-2035917<1-2147483646> Specifytheactualendtime
durationofakeyin
seconds.1-2147483646
CommandMode
KeyChainConfiguration
Default
None
Usage
None
Examples
Thefollowexampleshowshowtospecifythetimeperiodduringwhichthe
authenticationonakeychainisreceivedasvalid.:
Switch#configureterminal
Switch(config)#keychainmychain
Switch(config-keychain)#key1
Switch(config-keychain-key)#accept-lifetime03:03:01Dec3200404:04:02Oct62006
RelatedCommands
None
6.8.2address-familyipv6
CommandPurpose
Usethiscommandtoenteraddress-familyipv6mode,whereuserscanconfigure
IPv6routingspecificconfiguration.
Usethenoparameterwiththiscommandtoremoveallconfigurationunderaddress-
familyipv6.918CommandSyntax
address-familyipv6(unicast|)
noaddress-familyipv6(unicast|)
Parameter ParameterDescriptionParameterValue
unicast Specifyunicastroutingfor
IPv6.-
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtotoenteraddress-familyipv6mode:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#address-familyipv6unicast
Switch(config-router-af)#
RelatedCommands
None
6.8.3adjacency-check
CommandPurpose
Usethiscommandtoconfigurethepolicyofadjacencybasedontheprotocolrelated
TLVsintheHellopacket.CheckadjacencywithprotocolrelatedTLVsincluding919ProtocolsSupportedTLVorIPInterfaceAddressTLVbydefault.Thecommandwith
noparameterdisablesthischeck.
Usethenoparameterwiththiscommandtodisabletheadjacencycheck.
CommandSyntax
adjacency-check
noadjacency-check
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Enabled
Usage
None
Examples
Thefollowingexampleshowshowtotoenableadjacencycheck:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router-af)#adjacency-check
RelatedCommands
None
6.8.4area-password
CommandPurpose
UsethiscommandtosettheauthenticationpasswordfortheLevel-1areaandtoset
authenticationonLevel-1SNPPDUs.Thiscommandenablesauthenticationwhen920receivingandsendingLSPandSNPPDUinLevel-1areas.Areapasswordmustbe
thesameforalltheroutersinthesamearea.
Usethenoparameterwiththiscommandtocleartheareapassword.
CommandSyntax
area-passwordPASSWORD
area-passwordWORDauthenticatesnp(send-only|validate)
noarea-password
Parameter ParameterDescriptionParameterValue
PASSWORD Specifythepassword
string.Upto254characters
authenticate Specifytoinsertthe
passwordintoLevel-1SNP
PDUs.-
snp Specifythesequence
numberPDU(SNP).-
send-only Specifytoonlyinsertthe
passwordintotheLevel-1
SNPPDUs,butnotcheck
thepasswordinSNP
PDUsthatitreceives.Use
thiskeyswordduringa
softwareupgradetoease
thetransition.-
validate Specifytoinsertthe
passwordintotheLevel-1
SNPPDUsandcheckthe
passwordinSNPsthatit
receives.-921CommandMode
RouterConfiguration
Default
Notconfigured
Usage
None
Examples
ThefollowingexampleshowshowtosettheauthenticationpasswordfortheLevel-1
area:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#area-passwordcode1234
Switch(config-router)#noarea-password
RelatedCommands
None
6.8.5authenticationkey-chain
CommandPurpose
Usethiscommandtosetthekeychaintobeusedforauthenticationattheinstance
level.Authenticationmodemustbesettomd5toconfigurethekeychain.Ifnokey
chainisconfiguredwiththekey-chaincommand,nokey-chainauthenticationis
performed.
Onlyoneauthenticationkey-chainisappliedtoaninterfaceatatime.Thatis,issuing
asecondisisauthenticationkey-chaincommandoverridesthefirstisisauthentication
key-chaincommand.Authenticationcanbespecifiedforanindividualinterfaceusing
theisisauthenticationkey-chaincommand.
Usethenoparameterwiththiscommandtounsetthekeychainusedfor
authentication.922CommandSyntax
authenticationkey-chainWORD(level-1|level-2|)
noauthenticationkey-chainPASSWORD(level-1|level-2|)
noauthenticationkey-chain(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
WORD Specifythechainname
(validauthenticationkeys).AStringofkeychainname
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-
level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
RouterConfiguration
Default
Disabled
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
Thefollowingexampleshowshowtosetthekeychaintobeusedforauthentication
atthelevel-1:
Switch#configureterminal
Switch(config)#routerisis1
Switch(config-router)#authenticationkey-chaincode1234level-1923RelatedCommands
None
6.8.6authenticationmodemd5
CommandPurpose
UsethiscommandtosettheMD5authenticationmodeattheinstancelevel.
Ifclear-textauthenticationwasconfiguredusingthearea-passwordordomain-
passwordcommands,theauthenticationmodecommandoverridesbothofthose
commands(basedonthelevelatwhichMD5isconfigured).Iftheauthentication
modecommandwasusedfirst,andsubsequentlyanattemptismadetousethe
area-passwordordomain-passwordcommands,theattemptfails.Toconfigureclear-
textauthenticationusingthearea-passwordordomain-passwordcommands,first
usethenoauthenticationmodecommand.
Thetypeofauthenticationandtheleveltowhichitappliescanbespecifiedfora
singleinterface,ratherthanperinstance,usingtheisisauthenticationmode
command.
UsethenoparameterwiththiscommandtounsettheMD5authenticationmode.
CommandSyntax
authenticationmode(md5|text)(level-1|level-2|)
noauthenticationmode(md5|text)(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
md5 Keyedmessagedigest-
text Textmode -
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-924level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
RouterConfiguration
Default
Disabled
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
ThefollowingexampleshowshowtosettheMD5authenticationmodeatthelevel-1:
Switch#configureterminal
Switch(config)#routerisis1
Switch(config-router)#authenticationmodemd5level-1
Switch(config-router)#noauthenticationmodemd5level-1
RelatedCommands
None
6.8.7authenticationsend-only
CommandPurpose
Usethiscommandtosetthesend-onlyoptionattheinstancelevel.
Usethiscommandbeforeconfiguringtheauthenticationmodeandauthentication
key-chain,sothattheimplementationofauthenticationgoessmoothly.
Afterallroutersthatmustcommunicateareconfiguredwiththiscommand,enable
theauthenticationmodeandkeychainoneachrouter.Then,specifytheno
authenticationsend-onlycommandtodisablethesend-onlyfeature.925Ifneitherthelevel-1norlevel-2keyswordisconfigured,thesend-onlyfeatureapplies
tobothlevels.Thesend-onlyoptionappliestobothlevelsifnolevelisspecified.
Usethenoparameterwiththiscommandtounsetthesend-onlyoption.
CommandSyntax
authenticationsend-only(level-1|level-2|)
noauthenticationsend-only(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-
level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
RouterConfiguration
Default
Disabled
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
Thefollowingexampleshowshowtosetthesend-onlyoptionatthelevel-1.:
Switch#configureterminal
Switch(config)#routerisis1
Switch(config-router)#authenticationsend-onlylevel-1
Switch(config-router)#noauthenticationsend-onlylevel-1926RelatedCommands
None
6.8.8bfdall-interfaces
CommandPurpose
UsethiscommandtoenabletheBidirectionalForwardingDetection(BFD)featureon
theinterfacesenabledwiththisISISinstance.
ThiscommandsetsBFDfall-overcheckforalltheneighborsunderspecifiedprocess.
TodisableBFDcheckingonparticularinterfaceuseisisbfddisablecommandat
interfacemode.
UsethenoparameterwiththiscommandtodisableBFDfunctionalityforaninstance.
CommandSyntax
bfdall-interfaces
nobfdall-interfaces
CommandMode
RouterConfiguration
Default
Disabled
Usage
None
Examples
ThefollowingexampleshowshowtoenabletheBFDfeatureontheinterfaces
enabledwiththisISISinstance.:
Switch#configureterminal
Switch(config)#routerisis
Switch(config-router)#bfdall-interfaces927RelatedCommands
None
6.8.9clearclnsneighbors
CommandPurpose
UsethiscommandtoclearCLNSneighboradjacencies.
CommandSyntax
clearclnsneighbors
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
TheexampleshowshowtoclearCLNSneighboradjacencies.:
Switch#clearclnsneighbors
RelatedCommands
None
6.8.10clearclnsis-neighbors
CommandPurpose
UsethiscommandtoclearISneighboradjacencies.928CommandSyntax
clearclnsis-neighborsSystem-ID
Parameter ParameterDescriptionParameterValue
System-ID NeighborsystemIDin
XXXX.XXXX.XXXXformat.hexadecimal
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
TheexampleshowshowtoclearISneighboradjacencies.:
Switch#clearclnsis-neighbors1234.789A.BCDF
RelatedCommands
None
6.8.11clearipisisroute
CommandPurpose
UsethiscommandtoclearIPv4routes.
CommandSyntax
clearipisis(INSTANCE|)route(redistribution|all)
Parameter ParameterDescriptionParameterValue929INSTANCE Routingareatag. Upto20characters
redistribution ClearISISlocal
redistributionroutes.-
all ClearalloftheISISrouting
table.s-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
TheexampleshowshowtoclearISISIPv4routes.:
Switch#clearipisisrouteall
RelatedCommands
None
6.8.12clearisiscounter
CommandPurpose
Usethiscommandtoclearsystem-wideIS-IScounters
CommandSyntax
clearisiscounter930CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Theexampleshowshowtoclearsystem-wideIS-IScounters.:
Switch#clearisiscounter
RelatedCommands
None
6.8.13clearisisinterfacecounter
CommandPurpose
Usethiscommandtoclearinterfacecounters.
CommandSyntax
clearisisinterfacecounter(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC931Default
None
Usage
Ifyoudonotspecifyaparameter,thencountersforallinterfacesarecleared.
Examples
Theexampleshowshowtoclearclearinterfacecounters.:
Switch#clearisisinterfacecounter
RelatedCommands
None
6.8.14clearisisprocess
CommandPurpose
UsethiscommandtorestartISISprocesses.
CommandSyntax
clearisis(INSTANCE|)process
Parameter ParameterDescriptionParameterValue
INSTANCE Routingareatag. Upto20characters
CommandMode
PrivilegedEXEC
Default
None932Usage
Ifyoudonotspecifyaparameter,thenallISISprocessesarerestarted.
Examples
TheexampleshowshowtorestartISISprocesses.:
Switch#clearisisprocess
RelatedCommands
None
6.8.15debugisis
CommandPurpose
Usethiscommandtoturnondebuggingforspecifiedcriteria.Debugcommands
enabletoshowsomedebugginginformationaboutspecifiedcriteriaintofileor
terminal.
Usethenoparametertoturnoffdebuggingforspecifiedcriteria.
CommandSyntax
debugisis(all|)
debugisis(authentication|bfd|checksum|events|hello(interfaceIFNAME|
System-ID|)|ifsm|local-updates|lsp|nfsm|nsm|pdu|protocol-errors|spf)
nodebugisis(all|)
nodebugall
nodebugallisis
undebugall
undebugisis(all|)
undebugallisis
nodebugisis(authentication|bfd|checksum|events|hello(interfaceIFNAME|
System-ID|)|ifsm|local-updates|lsp|nfsm|nsm|pdu|protocol-errors|spf)933undebugisis(authentication|bfd|checksum|events|hello(interfaceIFNAME|
System-ID|)|ifsm|local-updates|lsp|nfsm|nsm|pdu|protocol-errors|spf)
Parameter ParameterDescriptionParameterValue
all Enablesalldebugging.-
authentication Debuggingfor
authentication.-
checksum Debuggingforchecksums.-
bfd Debuggingforbidirectional
forwardingdetection.-
events Debuggingforinternal
events.-
hello Debuggingforhello
processing.-
interface Interface. -
IFNAME Interfacename. Support
physical/aggregation/loopb
ack/vlan/tunnelports
System-ID Systemidentifier. -
ifsm Debuggingforinterface
finitestatemachine.-
local-updates Debuggingforlocal
updates.-
lsp Debuggingforlabel
switchedpath.-
nfsm Debuggingforneighbor
finitestatemachine.-
nsm DebuggingforNSM
messages.-934pdu Debuggingforprotocol
dataunit.-
protocol-errors Debuggingforprotocol
errors.-
spf Debuggingforshortest
pathfirstroutecalculation.-
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
Theexampleshowshowtoenableallisisdebugging.:
Switch#debugisisall
RelatedCommands
None
6.8.16default-informationoriginate
CommandPurpose
UsethiscommandtooriginatereachabilityinformationtoDefaultdestinationinto
LSP.ThereisnodefaultinformationinLevel-2domainbydefault,whileLevel-1router
calculatesdefaulttoL1L2routeSPFcalculation.Thiscommandenablestooriginate
defaultrouteintoLevel-2domain.
Usethenoparameterwiththiscommandtowithdrawreachabilityinformationto
defaultdestinationfromLSP.935CommandSyntax
default-informationoriginate
nodefault-informationoriginate
Parameter ParameterDescriptionParameterValue
originate Specifytodistributea
defaultroute-
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Disabled
Usage
None
Examples
ThefollowingexampleshowshowtooriginatereachabilityinformationtoDefault
destinationintoLSPbothipv4andipv6:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#default-informationoriginate
Switch(config-router)#address-familyipv6
Switch(config-router-af)#default-informationoriginate
RelatedCommands
None9366.8.17distance
CommandPurpose
UsethiscommandinroutermodetosettheadministrativedistanceforallIPv4
routes.
Usethenoparameterwiththiscommandtoremoveanadministrativedistance.
CommandSyntax
distanceDISTANCE(System-ID(ACL|)|)
nodistance((System-ID|System-IDACL)|)
Parameter ParameterDescriptionParameterValue
DISTANCE Distancerange. 1-255
System-ID SourceIDin
XXXX.XXXX.XXXXformat.hexadecimal
ACL Access-listname. Upto40characters
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtosettheadministrativedistanceforallISISIPv4
routes:937Switch#configureterminal
Switch(config)#routerisis
Switch(config-router)#distance40
RelatedCommands
None
6.8.18domain-password
CommandPurpose
UsethiscommandtosettheauthenticationpasswordfortheLevel-2domain,and
optionally,theauthenticationpasswordonLevel-2SNPPDUs.Configuringthis
commandtoenableauthenticationwhenreceivingandsendingLSPandSNPPDU
inLevel-2domain.DomainpasswordmustbethesameinLevel-2domain.
Usethenoparameterwiththiscommandtoclearthedomainpassword.
CommandSyntax
domain-passwordPASSWORD
domain-passwordPASSWORDauthenticatesnp(send-only|validate)
nodomain-password
Parameter ParameterDescriptionParameterValue
PASSWORD Thepasswordstring. Upto254characters
authenticate Insertsthepasswordinto
Level-2SNPPDUs.-
snp SNPPDUs. -938send-only Onlyinsertsthepassword
intotheLevel-2SNP
PDUs,butdoesnotcheck
thepasswordinSNP
PDUsthatitreceives.Use
thiskeyswordduringa
softwareupgradetoease
thetransition.-
validate Insertsthepasswordinto
theLevel-2SNPPDUs,
andchecksthepassword
inSNPPDUsthatit
receives.-
CommandMode
RouterConfiguration
Default
Bydefault,thereisnodomainpassword.
Usage
None
Examples
ThefollowingexampleshowshowtosettheauthenticationpasswordfortheLevel-2
domain:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#domain-passwordmypasswd
Switch(config-router)#nodomain-password
RelatedCommands
None9396.8.19ignore-lsp-errors
CommandPurpose
UsethiscommandtoignoreLSPswithchecksumerrors.Bydefault,validates
checksumforLSPwheneveritreceivesLSPsandifthechecksumhasanerror,the
LSPwillbedropped.ConfiguringthiscommandtoignoretheLSPchecksumerror
andtreatitasifchecksumispassed.
Usethenoparametertoturnoffthisfunction.
CommandSyntax
ignore-lsp-errors
noignore-lsp-errors
CommandMode
RouterConfiguration
Default
Disabled
Usage
None
Examples
ThefollowingexampleshowshowtoignoreLSPswithchecksumerrors:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#ignore-lsp-errors
RelatedCommands
None9406.8.20iproutehigh-prioritytag
CommandPurpose
Usethiscommandtosetahighprioritytagvalue.
Usethenoparametertoturnoffthisfunction.
CommandSyntax
iproutehigh-prioritytagTAG
noiproutehigh-prioritytag
Parameter ParameterDescriptionParameterValue
TAG Tagvalue 1-4294967295
CommandMode
RouterConfiguration
Default
Disabled
Usage
None
Examples
Thefollowingexampleshowshowtosetahighprioritytagvalue.:
Switch#configureterminal
Switch(config)#routerisisA
Switch(config-router)#iproutehigh-prioritytag500
RelatedCommands
None9416.8.21iprouterisis
CommandPurpose
UsethiscommandtoenableIPv4routingontheinterface.Thiscommandis
mandatorytoconfiguration.Matchtheinstancetagtooneofexistinginstancestags,
oranewinstancewiththetagnameshouldbeinitiated,otherwiseroutingwillnotrun
onthisinterface.
Configuringthiscommand,theroutersendsHellowithIPaddressTLVonthis
interface,andIPreachabilityinformationTLVintheLSPwillbeupdated.
UsethenoparameterwiththiscommandtodisableIPv4routingontheinterface.
Thisactiondoesnotclearthedatabase.Toclearthedatabase,unconfigurethe
routinginstance.
CommandSyntax
iprouterisis(INSTANCE|)
noiprouterisis(INSTANCE|)
Parameter ParameterDescriptionParameterValue
INSTANCE instancename. Upto20characters
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
None
Examples
ThefollowingexampleshowshowtoenableISISIPv4routingontheinterface:942Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#iprouterisisbb
RelatedCommands
None
6.8.22ipv6routerisis
CommandPurpose
UsethiscommandtoenableIPv6routingontheinterface.Thiscommandis
mandatorytoIPv6configuration.Matchtheinstancetagtooneofexistinginstances
tags,oranewinstancewiththetagnameshouldbeinitiated,otherwiseroutingwill
notrunonthisinterface.
Configuringthiscommand,theroutersendsHellowithIPv6addressTLVonthis
interface,andIPv6reachabilityinformationTLVintheLSPwillbeupdated.
UsethenoparameterwiththiscommandtodisableIPv6routingontheinterface.
CommandSyntax
ipv6routerisis(INSTANCE|)
noipv6routerisis(INSTANCE|)
Parameter ParameterDescriptionParameterValue
INSTANCE instancename. Upto20characters
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
None943Examples
ThefollowingexampleshowshowtoenableISISIPv6routingontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6routerisisbb
RelatedCommands
None
6.8.23isisauthenticationkey-chain
CommandPurpose
Usethiscommandtosetthekeychaintobeusedforauthenticationontheinterface-
relatedpackets.
Authenticationmodemustbesettomd5ortexttoconfigurethekeychain.Ifnokey
chainisconfiguredwiththekey-chaincommand,nokey-chainauthenticationis
performed.Onlyoneauthenticationkey-chainisappliedtoaninterfaceatatime.
Thatis,issuingasecondisisauthenticationkey-chaincommandoverridesthefirst
isisauthenticationkey-chaincommand.
Ifneitherthelevel-1norlevel-2keyswordisconfigured,thekeychainappliestothe
level(s)onwhichtheauthenticationmodeisconfiguredasmd5.Authenticationcan
bespecifiedforanentire,insteadofattheinterfacelevel,byusingtheauthentication
key-chaincommand.
Usethenoparameterwiththiscommandtounsetthekeychainusedfor
authenticationontheinterface-relatedpackets.
CommandSyntax
isisauthenticationkey-chainKEY_NAME(level-1|level-2|)
noisisauthenticationkey-chain(level-1|level-2|)
noisisauthenticationkey-chainKEY_NAME(level-1|level-2|)
Parameter ParameterDescriptionParameterValue944KEY_NAME Chainname-valid
authenticationkeys.AStringofkeychainname
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-
level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
Thekeychainappliestothelevel(s)onwhichauthenticationmodeisconfiguredas
MD5ifnolevelisspecified.
Examples
Thefollowingexampleshowshowtosetthekeychaintobeusedforauthentication
ontheinterface-relatedpackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisauthenticationkey-chaincode1234level-1
RelatedCommands
None9456.8.24isisauthenticationmodemd5
CommandPurpose
UsethiscommandtosettheMD5authenticationmode.Ifcleartextauthentication
wasconfiguredusingtheisispasswordcommand,theisisauthenticationmode
commandoverridestheisispasswordcommand.Iftheisisauthenticationmode
commandwasused,thensubsequentlyanattemptismadetousetheisispassword
command,theattemptfails.
Toconfigurecleartextauthenticationusingtheisispasswordcommand,firstusethe
noisisauthenticationmodecommand.Thetypeofauthenticationandthelevelto
whichitappliescanbespecifiedfortheentireinstance,ratherthanperinterface,
usingtheauthenticationmodecommand.
UsethenoparameterwiththiscommandtounsettheMD5authenticationmode.
CommandSyntax
isisauthenticationmode(md5|text)(level-1|level-2|)
noisisauthenticationmode(md5|text)(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
md5 Keyedmessagedigest-
text Textmode -
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-
level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
InterfaceConfiguration946Default
Disabled
Usage
Thesend-onlyoptionappliestobothlevelsifnolevelisspecified.
Examples
ThefollowingexampleshowshowtosettheMD5authenticationmode.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisauthenticationmodemd5
RelatedCommands
None
6.8.25isisauthenticationsend-only
CommandPurpose
Usethiscommandtosetthesend-onlyoptiontotheinterface-relatedpackets.
UsethiscommandbeforeconfiguringtheISISauthenticationmodeandISIS
authenticationkey-chain,sothattheimplementationofauthenticationgoessmoothly.
Thatis,therouterswillhavemoretimeforthekeystobeconfiguredoneachrouterif
authenticationisinsertedonlyonthepacketsbeingsent,notcheckedonpackets
beingreceived.
Afterallroutersthatmustcommunicateareconfiguredwiththiscommand,enable
theauthenticationmodeandkeychainoneachrouter.
Usethenoparameterwiththiscommandtounsetthesend-onlyoptiontothe
interface-relatedpackets.
CommandSyntax
isisauthenticationsend-only(level-1|level-2|)
noisisauthenticationsend-only(level-1|level-2|)947Parameter ParameterDescriptionParameterValue
level-1 Specifyanauthentication
key-chainforlevel-1
PDUs.-
level-2 Specifyanauthentication
key-chainforlevel-2
PDUs.-
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
Thesend-onlyoptionappliestobothlevelsifnolevelisspecified.
Examples
Thefollowingexampleshowshowtosetthesend-onlyoptiontotheinterface-related
packets.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisauthenticationsend-only
RelatedCommands
None
6.8.26isisbfd
CommandPurpose
Usethiscommandtoenable/disabletheBFDcheckoninterface.948TheisisbfdcommandallowsausertoenableBFDonaninterface.Theisisbfd
disablecommanddisablesBFDcheckingonaninterface.However,thenoisisbfd
andnoisisbfddisablecommandsbothremovetheenable/disableconfiguration,but
donotdisable/enableBFD.
Thebfdall-interfacescommandenablesBFDonallinterfacesattachedtoan
instancethenconfiguring.ThiscommanddisablesBFDconfigurationonaparticular
interface.
CommandSyntax
isisbfd(disable|)
noisisbfd(disable|)
Parameter ParameterDescriptionParameterValue
disable SpecifytodisableBFD.-
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
None
Examples
ThefollowingexampleshowshowtodisablebfdonISISinterface.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisbfddisable
RelatedCommands
None9496.8.27isiscircuit-type
CommandPurpose
Usethiscommandtosetthecircuittypefortheinterface.
Iflevel-1orlevel-2-onlyisspecifiedinthiscommand,sendsonlythespecifiedlevelof
PDUs.
Usethenoparametertoresetcircuittypetothedefault.
CommandSyntax
isiscircuit-type(level-1|level-1-2|level-2-only)
noisiscircuit-type
Parameter ParameterDescriptionParameterValue
level-1 SpecifythatonlyLevel-1
adjacenciesareformed.-
level-1-2 SpecifythatLevel-1-2
adjacenciesareformed.-
level-2-only SpecifythatonlyLevel-2
adjacenciesareformed.-
CommandMode
InterfaceConfiguration
Default
Eabledlevel-1andlevel-2.
Usage
None
Examples
Thefollowingexampleshowshowtosetthecircuittypefortheinterface:950Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isiscircuit-typelevel-2-only
RelatedCommands
None
6.8.28isiscsnp-interval
CommandPurpose
UsethiscommandtosetCSNP(CompletesequencenumberPDU)intervalin
seconds.
ConfiguringthiscommandchangestheintervalbetweentwoconsecutiveCSNP
transmission.Bydefault,CSNPissentevery10secondsonlybyLANDIS.This
parameterisonlyvalidonbroadcastinterface,sinceperiodicCSNPisonlysenton
broadcastinterface,whileCSNPonPoint-to-Pointinterfaceissentonlywhen
adjacencyisinitiated.
UsethenoparameterwiththiscommandtoresetCSNPintervaltothedefaultvalue.
CommandSyntax
isiscsnp-intervalINTERVAL(level-1|level-2|)
noisiscsnp-interval(level-1|level-2|)
noisiscsnp-interval<1-65535>(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
INTERVAL SpecifytheCSNPinterval
inseconds.1-65535
level-1 SpecifyLevel-1CSNP.-
level-2 SpecifyLevel-2CSNP.-
CommandMode
InterfaceConfiguration951Default
10secondslevel-1andlevel-2.
Usage
None
Examples
ThefollowingexampleshowshowtosetCSNP(CompletesequencenumberPDU)
interval.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isiscsnp-interval20
RelatedCommands
None
6.8.29isishello
CommandPurpose
UsethiscommandtoconfigurethepaddingoftheHellopacket.padstheHello
packetbydefaulttonotifyneighborsofthesupportedMTUsize.
Usethenoparameterwiththiscommandtodisablethepadding.
CommandSyntax
isishellopadding
noisishellopadding
Parameter ParameterDescriptionParameterValue
padding Specifypadhellopackets-
CommandMode
InterfaceConfiguration952Default
Bydefault,padstheHellopacket.
Usage
None
Examples
ThefollowingexampleshowshowtoconfigurethepaddingoftheHellopacket.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isishellopadding
RelatedCommands
None
6.8.30isishello-interval
CommandPurpose
UsethiscommandtosettheHellointervalinseconds.TheHello-intervalissetwith
thehello-multiplier(seeisishello-multipliercommand).
ConfiguringthiscommandchangesthetimeintervalbetweentwoconsecutiveHello
transmissions.IfadevicereceivesitsownLSPwithamaximumsequencenumber,
thenitsuspendsfortheholdinterval.DISsendsHellotransmissionsatthreetimes
theratethannon-DIS.IfiselectedasDISonthisinterface,sendsHelloevery3.3
seconds.
Ifminimalkeyswordisspecified,HoldingtimerinHelloPDUissetto1secondand
Hellointervaliscalculatedbydividingbythehello-multiplier.Forexample,ifthehello-
multiplierisconfiguredas4andhello-intervalminimalisthecommandused,anHello
PDUissentevery250milliseconds.
UsethenoparametertosettheHellointervaltothedefault.
CommandSyntax
isishello-intervalINTERVAL(level-1|level-2|)953isishello-intervalminimal(level-1|level-2|)
noisishello-interval(level-1|level-2|)
noisishello-interval<1-65535>(level-1|level-2|)
noisishello-intervalminimal(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
INTERVAL Specifythehellointervalin
seconds.1-65535
minimal Specifytheholding-timeas
1second.-
level-1 SpecifyLevel-1CSNP.-
level-2 SpecifyLevel-2CSNP.-
CommandMode
InterfaceConfiguration
Default
Bydefault,uses10secondsfortheintervalandtheintervalisappliedtobothlevel-1
andlevel-2.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
ThefollowingexampleshowshowtosettheHellointerval.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isishello-interval5level-1
RelatedCommands
isishello-multiplier9546.8.31isishello-multiplier
CommandPurpose
UsethiscommandtosetmultiplierforHelloholdingtime.
ChangesHoldingTimerinHelloPDU.HoldingtimeriscalculatedbyHello-Interval
multipliedbythisvalue.IfminimalkeyswordisspecifiedwiththeHello-Interval,the
holdingtimerissetto1secondandthehello-intervaliscalculatedbydividing1by
thisvalue.
Usethenoparameterwiththiscommandtosetmultipliertothedefault.
CommandSyntax
isishello-MULTIPLIER<2-100>(level-1|level-2|)
noisishello-multiplier(level-1|level-2|)
noisishello-multiplier<2-100>(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
MULTIPLIER Specifyahellomultiplier
value.2-100
level-1 SpecifyLevel-1hello.-
level-2 SpecifyLevel-2hello.-
CommandMode
InterfaceConfiguration
Default
Bydefault,uses3secondsforthemultipliervalueandthemultiplierisappliedtoboth
level-1andlevel-2.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.955Examples
ThefollowingexampleshowshowtosetmultiplierforHelloholdingtime:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isishello-multiplier4
RelatedCommands
None
6.8.32isislsp-interval
CommandPurpose
UsethiscommandtosettheLinkStatePacket(LSP)transmissioninterval.
Configuringthiscommandchangestheminimumintervalbetweentwoconsecutive
LSPtransmission.WhenfloodingorsomeothereventtriggersLSPtotransmit,the
LSPisputontheinterfacequeueandscheduledtotransmitaccordingtothisinterval.
TwoconsecutiveLSPtransmissionsarescheduledtohaveatleastthisinterval.
UsethenoparameterwiththiscommandtosetLSPtransmissionintervaltothe
default.
CommandSyntax
isislsp-intervalINTERVAL
noisislsp-interval
Parameter ParameterDescriptionParameterValue
INTERVAL SpecifyanLSP
transmissionintervalin
milliseconds.1-4294967295
CommandMode
InterfaceConfiguration956Default
Bydefault,33millisecondsfortheinterval.
Usage
None
Examples
ThefollowingexampleshowshowtosettheLinkStatePacket(LSP)transmission
interval:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isislsp-interval100
RelatedCommands
None
6.8.33isismesh-group
CommandPurpose
UsethiscommandtosetMeshGroupIDonthecurrentinterface.
Usethenoparametertounsetmeshgrouponthecurrentinterface.
CommandSyntax
isismesh-groupMESH_GROUP
isismesh-groupblocked
noisismesh-group
Parameter ParameterDescriptionParameterValue
MESH_GROUP Specifyameshgroup
number1-4294967295957blocked SpecifytoblockLSPson
thecurrentinterface.Ifan
interfaceisconfiguredas
meshgroupblocked,the
standardLSPdatabase
synchronizationprocessis
appliediftheinterface
receivesCSNPorPSNP.-
CommandMode
InterfaceConfiguration
Default
Bydefault,meshgroupsarenotenabledonthisinterface.
Usage
None
Examples
ThefollowingexampleshowshowtosetMeshGroupIDonthecurrentinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isismesh-group20
RelatedCommands
None
6.8.34isismetric
CommandPurpose
Usethiscommandtosetdefaultmetricfortheinterface.Theinterfacedefaultmetric
isputintoIPreachabilityinformationTLVs,ISreachabilityinformationTLVsandIPv6
reachabilityTLVsinLSPs.ThevalueisusedforSPFcalculation.958Usethenoparameterwiththiscommandtosetdefaultmetrictothedefault.
CommandSyntax
isismetricMETRIC(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
METRIC Specifyadefaultmetric.1-16777214
level-1 Specifydefaultmetricfor
level-1circuit.-
level-2 Specifydefaultmetricfor
level-2circuit.-
CommandMode
InterfaceConfiguration
Default
Bydefault,uses10forthemetricvalueandthevalueisappliedtobothlevel-1and
level-2.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
Thefollowingexampleshowshowtosetdefaultmetricfortheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isismetric20
RelatedCommands
None9596.8.35isisnetwork
CommandPurpose
Usethiscommandtochangeabroadcastinterfacenetworktypetoapoint-to-point
networktype.
Usethenoparameterwiththiscommandtoreverttothedefaultsettingofa
broadcastinterfacenetworktype.
CommandSyntax
isisnetworkpoint-to-point
noisisnetwork(point-to-point|)
Parameter ParameterDescriptionParameterValue
point-to-point Specifyapoint-to-point
network.-
CommandMode
InterfaceConfiguration
Default
Thisoptionisdisabledbydefault.
Usage
None
Examples
Thefollowingexampleshowshowtochangeabroadcastinterfacenetworktypetoa
point-to-pointnetworktype:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisnetworkpoint-to-point960RelatedCommands
None
6.8.36isispassword
CommandPurpose
UsethiscommandtosettheauthenticationpasswordofHelloPDUontheinterface.
Usethenoparametertoclearthepassword.
CommandSyntax
isispasswordPASSWORD(level-1|level-2|)
noisispassword(level-1|level-2|)
noisispasswordPASSWORD(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
PASSWORD Specifyapasswordstring.Upto254characters
level-1 Specifyapasswordfor
Level-1helloPDUs.-
level-2 Specifyapasswordfor
Level-2helloPDUs.-
CommandMode
InterfaceConfiguration
Default
Bydefault,nopasswordisconfigured;thisappliestobothlevel-1andlevel-2.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.961Examples
ThefollowingexampleshowshowtosettheauthenticationpasswordofHelloPDU
ontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isispasswordmypassWORDlevel-1
RelatedCommands
None
6.8.37isisprefix-sid
CommandPurpose
UsethiscommandtosettheIS-ISprefixsid.
CommandSyntax
isisprefix-sidindexINDEX(n-flag-clear|)(explicit-null|)
noisisprefix-sid
Parameter ParameterDescriptionParameterValue
INDEX Specifyavalueforprefix
sid.0-1048575
n-flag-clear CleartheNode-SIDflag.-
explicit-null SettheExplicit-Nullflagto
informtheupstream
neighbortousetheexplicit
nullinsteadofprefixsid.-
CommandMode
InterfaceConfiguration962Default
Theprefixsidisnotconfiguredbydefault.
Usage
Theindexvaluecannotexceedtherangeofthesrgb.
Examples
Thefollowingexampleshowshowtosettheprefixsid.:
Switch#configureterminal
Switch(config)#interfaceloopback0
Switch(config-if)#isisprefix-sidindex10
RelatedCommands
None
6.8.38isispriority
CommandPurpose
UsethiscommandtosetthepriorityforLANDISelection.Thiscommandchanges
thepriorityvalueinLANHelloPDUs.AlowerpriorityvalueislesspreferredinDIS
election,andahigherpriorityvalueismorepreferred.
CommandSyntax
isispriorityPRIORITY(level-1|level-2|)
noisispriority(level-1|level-2|)
noisispriority<0-127>(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
PRIORITY Priorityvalue 0-127
level-1 SpecifyapriorityforLevel-
1helloPDUs.-963level-2 SpecifyapriorityforLevel-
2helloPDUs.-
CommandMode
InterfaceConfiguration
Default
Bydefault,uses64forthepriorityvalue,andthepriorityisappliedtobothlevel-1and
level-2.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
ThefollowingexampleshowshowtosetthepriorityforLANDISelection:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isispriority127
RelatedCommands
None
6.8.39isisretransmit-interval
CommandPurpose
UsethiscommandtosetLSPretransmissioninterval.
Usethenoparametertosettheintervaltothedefault.
CommandSyntax
isisretransmit-intervalINTERVAL
noisisretransmit-interval964Parameter ParameterDescriptionParameterValue
INTERVAL Specifyanintervalfor
retransmissionofthesame
LSPinseconds.0-65535
CommandMode
InterfaceConfiguration
Default
5seconds.
Usage
None
Examples
ThefollowingexampleshowshowtosetLSPretransmissioninterval:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isisretransmit-interval10
Switch(config-if)#noisisretransmit-interval
RelatedCommands
None
6.8.40isistag
CommandPurpose
Usethiscommandtosetthetagforlink-statepackets(LSPs)sentoutadvertising
routesfornetworksdirectlyconnectedtoaninterface.
Ifyoudonotspecifyaparameter,thenthetagvalueissetforlevel-1-2boundary.
Usethenoparametertounsetthetag.965CommandSyntax
isistagTAG(level-1|level-2|)
noisistag
Parameter ParameterDescriptionParameterValue
TAG Tagvalue. 1-4294967295
level-1 Specifythetagvaluefor
thelevel-1boundary.-
level-2 Specifythetagvaluefor
thelevel-2boundary.-
CommandMode
InterfaceConfiguration
Default
Thisoptionisdisabledbydefault.
Usage
None
Examples
Thefollowingexampleshowshowtothetagforlink-statepackets(LSPs)sentout
advertisingroutesfornetworksdirectlyconnectedtoaninterface.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#isistag500level-1
RelatedCommands
None9666.8.41ispf
CommandPurpose
UsethiscommandtoenableincrementalSPFforaroutingprocess.
UsethenoparametertodisableincrementalSPFfromaroutingprocess.
CommandSyntax
ispf
ispf(level-1|level-1-2|level-2-only)
noispf
Parameter ParameterDescriptionParameterValue
level-1 Actaslevel-1onlyIS.-
level-1-2 Actaslevel-1-2IS. -
level-2-only Actaslevel-2onlyIS.-
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoenableincrementalSPFforaroutingprocess:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#ispflevel-1967RelatedCommands
None
6.8.42is-type
CommandPurpose
ToconfiguretheroutinglevelforaninstanceoftheIntermediateSystem-to-
IntermediateSystem(IS-IS)routingprocess,usetheis-typecommandinrouter
configurationmode.
UsethenoparametertosettheIStothedefault.
CommandSyntax
is-type(level-1|level-1-2|level-2-only)
nois-type
Parameter ParameterDescriptionParameterValue
level-1 Actaslevel-1onlyIS.-
level-1-2 Actaslevel-1-2IS. -
level-2-only Actaslevel-2onlyIS.-
CommandMode
RouterConfiguration
Default
Bydefault,useslevel-1-2ifthereisnoLevel-2instancenoraLevel-1-2instance.
Otherwise,ituseslevel-1.
Usage
None968Examples
ThefollowingexampleshowshowtoconfiguretheroutinglevelforanISISinstance:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#is-typelevel-1
RelatedCommands
None
6.8.43lsp-gen-interval
CommandPurpose
UsethiscommandtosetminimumintervalbeforeregeneratingthesameLSP.The
smallertheinterval,thefastertheconvergence.However,thissettingmightcause
morefrequentflooding.
Usethenoparameterwiththiscommandtosettheintervaltothedefault.
CommandSyntax
lsp-gen-intervalINTERVAL
lsp-gen-interval(level-1|level-2)<1-120>
nolsp-gen-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Specifyaminimuminterval
inseconds.1-120
level-1 Specifyanintervalfor
Level-1IS.-
level-2 Specifyanintervalfor
Level-2IS.-
CommandMode
RouterConfiguration969Default
30secondsfortheintervalandtheintervalisappliedtobothlevel-1andlevel-2.
Usage
None
Examples
Thefollowingexampleshowshowtosetminimumintervalbeforeregeneratingthe
sameLSP:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#lsp-gen-interval5
RelatedCommands
None
6.8.44lsp-mtu
CommandPurpose
UsethiscommandtosetLSPMTUinbytes.
UsethenoparameterwiththiscommandtosettheMTUtothedefault.
CommandSyntax
lsp-mtu(level-1|level-2|)MTU
nolsp-mtu(level-1|level-2|)
Parameter ParameterDescriptionParameterValue
MTU SpecifyanMTUsize 512-1492
level-1 Specifyanintervalfor
Level-1IS.-
level-2 Specifyanintervalfor
Level-2IS.-970CommandMode
RouterConfiguration
Default
None
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestobothlevels.
Examples
ThefollowingexampleshowshowtosetLSPMTUinbytes:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#lsp-mtu555
RelatedCommands
None
6.8.45lsp-refresh-interval
CommandPurpose
UsethiscommandtosettheLSPrefreshinterval.
IPInfusionrecommendsmakingthelsp-refresh-intervalsmallerthanmax-lsp-lifetime
value.
Usethenoparametertosettheintervaltothedefaultvalue.
CommandSyntax
lsp-refresh-intervalINTERVAL
nolsp-refresh-interval
Parameter ParameterDescriptionParameterValue971INTERVAL SpecifyanLSPrefresh
intervalinseconds.1-65535
CommandMode
RouterConfiguration
Default
900seconds.
Usage
None
Examples
ThefollowingexampleshowshowtosettheLSPrefreshinterval:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#lsp-refresh-interval600
Switch(config-router)#nolsp-refresh-interval
RelatedCommands
None
6.8.46max-area-addresses
CommandPurpose
UsethiscommandtoconfigureadditionalmanualaddressesforanIS-ISarea.
Usethenoparametertodisablethemanualaddresses.
CommandSyntax
max-area-addressesNUMBER
nomax-area-addresses972Parameter ParameterDescriptionParameterValue
NUMBER Specifythemaximumarea
addressthatcanbe
supported3-127
CommandMode
RouterConfiguration
Default
3
Usage
None
Examples
Thefollowingexampleshowshowtoconfigureadditionalmanualaddressesforan
IS-ISarea:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#max-area-address4
RelatedCommands
None
6.8.47max-lsp-lifetime
CommandPurpose
UsethiscommandtosetthemaximumLSPlifetime.Youmustsetmax-lsp-lifetime
greaterthanlsp-refreshinterval.
Usethenoparametertosetthelifetimetothedefault.973CommandSyntax
max-lsp-lifetimeLIFETIME
nomax-lsp-lifetime
Parameter ParameterDescriptionParameterValue
LIFETIME SpecifyanmaximumLSP
lifetimeinseconds.350-65535
CommandMode
RouterConfiguration
Default
1200seconds.
Usage
None
Examples
ThefollowingexampleshowshowtosetthemaximumLSPlifetime:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#max-lsp-lifetime1500
RelatedCommands
None
6.8.48metric-style
CommandPurpose
Usethiscommandtoconfigurethemetricstyle.
Usethenoparametertosetthestyletothedefaultstyle,narrow.974CommandSyntax
metric-style(narrow|wide|transition)(level-1|level-1-2|level-2|)
metric-style(narrow|wide)transition(level-1|level-1-2|level-2|)
nometric-style(narrow|wide|transition)(level-1|level-1-2|level-2|)
Parameter ParameterDescriptionParameterValue
narrow Specifytheoldstyleof
TLVswithnarrowmetric.-
wide Specifythenewstyleof
TLVstocarrywidermetric.-
transition AcceptbothstylesofTLVs
duringtransition-
level-1 Specifythelevel-1metric
style.-
level-2 Specifythelevel-2metric
style.-
level-1-2 Specifythelevel-1-2
metricstyle.-
CommandMode
RouterConfiguration
Default
Bydefault,usesnarrowmetricstyleforlevel1and2.
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurethemetricstyle:975Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#metric-stylewide
RelatedCommands
None
6.8.49net
CommandPurpose
UsethiscommandtoconfigureanIntermediateSystem-to-IntermediateSystem(IS-
IS)networkentitytitle(NET)fortheroutingprocess,usethenetcommandinrouter
configurationmode.ToremoveaNET,usethenoformofthiscommand.
UsethenoparametertoremovetheNET.
CommandSyntax
netNET
nonetNET
Parameter ParameterDescriptionParameterValue
NET Specifyanetworkentity
title(NET)in1to13octetsInXX.XXXX..XXXX.XX
format
CommandMode
RouterConfiguration
Default
Bydefault,doesnotconfigureaNETandroutingisnotenabledfortheinterface.
Usage
None976Examples
ThefollowingexampleshowshowtoconfigureanIntermediateSystem-to-
IntermediateSystem(IS-IS)networkentitytitle(NET)fortheroutingprocess:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#net49.0000.0001.0002.0003.00
RelatedCommands
None
6.8.50passive-interface
CommandPurpose
Usethiscommandtosuppressroutingupdatesonallinterfacesoronaspecified
interface,whichputstheinterfacesintopassivemode.Toadvertisepassiveprefixes
inLSP,thereisnoneedtohaveataninterfaceconfiguredwithiprouterisis.
EnablingpassiveinterfaceonanISISenabledinterfacedisablesISISonthe
interfaceandmakestheinterfacepassive.
Usethenoparameterwiththiscommandtoremoveinterfacesfrompassivemode
CommandSyntax
passive-interface(IFNAME|)
nopassive-interface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Indicatesaninterface
name.Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration977Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosuppressroutingupdatesonaspecified
interface:
Switch#configureterminal
Switch(config)#routerisis100
Switch(config-router)#passive-interfaceeth-0-1
RelatedCommands
None
6.8.51prc-interval-exp
CommandPurpose
Usethiscommandtoconfigureexponentialback-offdelaybetweenPRCcalculations.
Usethenoparametertodisableanysetexponentialback-offdelaybetweenPRC
calculations.
CommandSyntax
prc-interval-exp
prc-interval-expEXP_MINEXP_MAX
noprc-interval-exp
Parameter ParameterDescriptionParameterValue978EXP_MIN Settheminimumdelay
betweenreceivinga
changetoPRCcalculation
inmilliseconds.0-2147483647
EXP_MAX Setthemaximumdelay
betweenreceivinga
changetoPRCcalculation
inmilliseconds.0-2147483647
CommandMode
RouterConfiguration
Default
MinimumDelay500msMaximumDelay50000ms
Usage
None
Examples
Thefollowingexampleshowshowtoconfigureexponentialback-offdelaybetween
PRCcalculations:
Switch#configureterminal
Switch(config)#routerisis
Switch(config-router)#prc-interval-exp10010000
RelatedCommands
None
6.8.52redistribute
CommandPurpose
UsethiscommandtoredistributeroutesfromanotherprotocolintotheISISrouting
table.979Usethenoparametertodisablethisfunction.
CommandSyntax
redistribute(connected|static|rip|ospf|bgp){metricMETRIC|metrictype
(internal|external)|level-1|level-2|level-1-2|route-mapROUTE_MAP}
noredistribute(connected|static|rip|ospf|bgp)
Parameter ParameterDescriptionParameterValue
connected Redistributeconnected
routes.-
static Redistributestaticroutes.-
rip RedistributeRIProutes.-
ospf RedistributeOSPFroutes.-
bgp RedistributeBGProutes.-
metric Specifythemetricfor
redistributedroutes.-
METRIC SpecifytheIS-ISdefault
metric.0-4261412864
metric-type SpecifytheIS-ISexterior
metrictypefor
redistributedroutes:-
internal SetIS-ISinternalmetric
type.-
external SetIS-ISexternalmetric
type.-
level-1 IS-ISLevel-1routes. -
level-2 IS-ISLevel-2routes. -
level-1-2 IS-ISLevel-1andLevel-2
routes.-980route-map SpecifyaRoutemap
reference.-
ROUTE_MAP Specifynameoftheroute-
map.Upto20characters
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoredistributeroutesfromanotherprotocolinto
theISISroutingtable:
Switch#configureterminal
Switch(config)#routerisisA
Switch(config-router)#redistributebgpmetric12
RelatedCommands
None
6.8.53redistributeisis
CommandPurpose
Usethiscommandtoredistributereachabilityinformationfromoneleveltotheother
level.Ifandistribute-listnameisgivenwiththiscommandforanaccesslistthatdoes
notexist,theroutesarestillredistributed.
Usethenoparameterwiththiscommandtostopredistribution.981CommandSyntax
redistributeisislevel-1intolevel-2
redistributeisislevel-2intolevel-1
redistributeisislevel-1intolevel-2distribute-listACL
redistributeisislevel-2intolevel-1distribute-listACL
noredistributeisislevel-1intolevel-2
noredistributeisislevel-2intolevel-1
Parameter ParameterDescriptionParameterValue
level-1 Specifyaninter-arearoute
level-1.-
level-2 Specifyaninter-area
routeslevel-2.-
into Specifyafromlevel-nlevel
intolevel-m.-
distribute-list Indicatethedistributed-list
parameter.-
ACL Access-listname Upto40characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Bydefault,redistributesselectedlevel-1routesintolevel-2
Usage
None982Examples
Thefollowingexampleshowshowtoredistributeslevel-2routesintolevel-1:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#redistributeisislevel-2intolevel-1
RelatedCommands
None
6.8.54routerisis
CommandPurpose
UsethiscommandinglobalconfigurationmodetoenabletheIntermediateSystem-
to-IntermediateSystem(IS-IS)routingprotocolandtospecifyanIS-ISprocess.To
disableIS-ISrouting,usethenoformofthiscommand.
UsethenoparameterwiththiscommandtodisableIS-ISrouting.
CommandSyntax
routerisis(INSTANCE|)
norouterisis(INSTANCE|)
Parameter ParameterDescriptionParameterValue
INSTANCE SpecifyanISOrouting
instancetag.Upto20characters
CommandMode
GlobalConfiguration
Default
None983Usage
None
Examples
ThefollowingexampleshowshowtosetISISinstancenameandcreateit:
Switch#configureterminal
Switch(config)#routerisisNew
RelatedCommands
None
6.8.55segment-routingmpls
CommandPurpose
UsethiscommandinroutermodetoenablesegmentroutinginIS-IS.Usetheno
parameterwiththiscommandtodisableIS-ISsegmentrouting.
CommandSyntax
segment-routingmpls
nosegment-routingmpls
CommandMode
RouterConfiguration
Default
Bydefault,segmentroutingisdisabledinIS-IS.
Usage
None
Examples
ThefollowingexampleshowshowtoenablesegmentroutinginIS-IS:984Switch#configureterminal
Switch(config)#routerisis
Switch(config-router)#segment-routingmpls
RelatedCommands
None
6.8.56segment-routingglobal-block
CommandPurpose
Usethiscommandinroutermodetosettherangeforsegmentroutingglobalblock.
CommandSyntax
segment-routingglobal-blockMIN_VALMAX_VAL
nosegment-routingglobal-block
Parameter ParameterDescriptionParameterValue
MIN_VAL Specifytheminimumvalue
forthesrgb.16000-23999
MAX_VAL Specifythemaximum
valueforthesrgb.16000-23999
CommandMode
RouterConfiguration
Default
Bydefault,use16000to23999fortheSRGBrange.
Usage
None
Examples
ThefollowingexampleshowshowtosettheSRGBrange:985Switch#configureterminal
Switch(config)#routerisis
Switch(config-router)#segment-routingglobal-block1800019000
RelatedCommands
None
6.8.57set-overload-bit
CommandPurpose
Toconfiguretheroutertosignalotherroutersnottouseitasanintermediatehopin
theirshortestpathfirst
(SPF)calculations,usetheset-overload-bitcommandinrouterconfigurationmode.
Toremovethedesignation,
usethenoformofthiscommand.
CommandSyntax
set-overload-bit({suppress(external|interlevel|externalinterlevel|interlevel
external)|on-startup(TIME|wait-for-bgp)}|)
noset-overload-bit
Parameter ParameterDescriptionParameterValue
suppress Specifytosuppress
specifictypesofIP
prefixes.-
external Specifytoredistribute
externalreachability(to
preventtheIPprefixes
learnedfromother
protocolsfrombeing
advertised).-
interlevel Specifytoredistribute
interlevelreachability.-986on-startup Specifyanintervalin
secondsafterwhichthe
overloadstateisexited.-
TIME Specifythetimein
secondstoadvertiseone
selfasoverloadedafter
reboot.5-86400
wait-for-bgp SpecifythatBGP
determineswhentounset
theoverloadbit.-
CommandMode
RouterConfiguration
Default
Bydefault,nooverload-bitisset.
Usage
None
Examples
Thefollowingexampleshowshowtosetoverloadbit:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#set-overload-bit
RelatedCommands
None9876.8.58spf-interval-exp
CommandPurpose
UsethiscommandtosettheminimumandmaximumholdintervalsbetweenShortest
PathFirst(SPF)calculations.
Thespf-interval-expcommandconfigurestheminimumandmaximumintervaltime
betweenthereceiptofatopologychangeandthecalculationoftheSPF.
Usethenoparameterwiththiscommandtosettheminimumandmaximumhold
intervalstothedefault.
CommandSyntax
spf-interval-expEXP_MINEXP_MAX
spf-interval-exp(level-1|level-2)<0-2147483647><0-2147483647>
nospf-interval-exp
Parameter ParameterDescriptionParameterValue
EXP_MIN Specifytheminimumdelay
betweenreceivinga
changetotheSPF
calculationinmilliseconds.0-2147483647
EXP_MAX Specifythemaximum
delaybetweenreceivinga
changetotheSPF
calculationinmilliseconds.0-2147483647
level-1 Specifyanintervalfor
Level-1IS.-
level-2 Specifyanintervalfor
Level-2IS.-
CommandMode
RouterConfiguration988Default
Bydefault,uses500millisecondsand50,000millisecondsfortheminimumand
maximumholdintervals,respectively.Thevaluesareappliedtobothlevel-1and
level-2ifthelevelparameterisomitted.
Usage
None
Examples
Thefollowingexampleshowshowtosettheminimumandmaximumholdintervals
betweenShortestPathFirst(SPF)calculations:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#spf-interval-explevel-160060000
Switch(config-router)#nospf-interval-explevel-1
RelatedCommands
None
6.8.59summary-address
CommandPurpose
UsethiscommandtoconfigureSummaryAddresstosummarizeIPv4reachability
information.
Usethenoparameterwiththiscommandtounconfigurethesummary.
CommandSyntax
summary-addressIP_ADDR/IP_MASK_LEN(level-1|level-1-2|level-2|)(metric)
(METRIC|)
nosummary-addressIP_ADDR/IP_MASK_LEN
Parameter ParameterDescriptionParameterValue989IP_ADDR/IP_MASK_LENSpecifytheIPv4prefixto
beannounced.IPv4Addressandmask
lengthinA.B.C.D/Mformat
level-1 Specifythereachability
informationonlyforLevel-
1.-
level-1-2 Specifythereachability
informationforbothLevel-
1andLevel-2.-
level-2 Specifythereachability
informationonlyforLevel-
2.-
metric Specifythemetricforthe
summarizedaddress.-
METRIC Specifythemetric.The
defaultis0.1-4294967295
CommandMode
RouterConfiguration
Default
Bydefault,doesnotconfigurethesummary-address.Summary-addressisappliedto
Level-2ISiflevelparameterisomitted.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestolevel-2
Examples
Thefollowingexampleshowshowtoconfigureipv4SummaryAddress:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#summary-address10.10.0.0/16990RelatedCommands
None
6.8.60summary-prefix
CommandPurpose
UsethiscommandtoconfigurethesummaryprefixtosummarizeIPv6reachability
information.
Usethenoparametertounconfigurethesummary.
CommandSyntax
summary-prefixGLOBAL_PREFIX/IPV6_MASK_LEN(level-1|level-1-2|level-2|)
(metricMETRIC)
nosummary-prefixGLOBAL_PREFIX/IPV6_MASK_LEN
Parameter ParameterDescriptionParameterValue
GLOBAL_PREFIX/IPV6_M
ASK_LENSpecifytheIPv6prefixto
beannounced.IPv4Addressandmask
lengthinX:X::X:X/M
format
level-1 Specifythereachability
informationonlyforLevel-
1.-
level-1-2 Specifythereachability
informationforbothLevel-
1andLevel-2.-
level-2 Specifythereachability
informationonlyforLevel-
2.-
metric Specifythemetricforthe
summarizedaddress.-991METRIC Specifythemetric.The
defaultis0.1-4294967295
CommandMode
AddressFamilyConfiguration
Default
Bydefault,doesnotconfigurethesummary-prefix.Summary-prefixisappliedto
Level-2ISiflevelparameterisomitted.
Usage
Ifneitherthelevel-1northelevel-2keyswordisconfigured,itappliestolevel-2
Examples
Thefollowingexampleshowshowtoconfigureipv6SummaryPrefix:
Switch#configureterminal
Switch(config)#routerisisbb
Switch(config-router)#address-familyipv6
Switch(config-router-af)#summary-prefix3ffe:1234::/32
RelatedCommands
None
6.8.61showclnsis-neighbors
CommandPurpose
UsethiscommandtodisplayallISneighboradjacencies.
CommandSyntax
showclnsis-neighbors(detail|)
showclnsINSTANCEis-neighbors(detail|)
showclnsis-neighborsIFNAME(detail|)992showclnsINSTANCEis-neighborsIFNAME(detail|)
Parameter ParameterDescriptionParameterValue
INSTANCE Displayinformationfor
specifiedinstance.Upto20characters
IFNAME Displayinformationabout
asingleinterface.Support
physical/aggregation/loopb
ack/vlan/tunnelports
detail Displaydetailed
informationforall
interfaces.-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayallISneighboradjacencies:
Switch#showclnsis-neighbors
Area100:
SystemIdInterfaceStateTypePriorityCircuitId
0000.0000.0002vlan100UpL2640000.0000.0001.01
0000.0000.0002vlan200UpL2640000.0000.0001.02
RelatedCommands
None9936.8.62showdebuggingisis
CommandPurpose
UsethiscommandtodisplaythestatusofthedebuggingoftheISISsystem.
CommandSyntax
showdebuggingisis
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaythestatusofthedebuggingoftheISIS
system:
Switch#showdebuggingisis
IS-ISdebuggingstatus:
IS-ISspfdebuggingison
RelatedCommands
None
6.8.63showipisisroute
CommandPurpose
UsethiscommandtodisplayIS-ISroutingtableforIPv4.994CommandSyntax
showipisis(INSTANCE|)route
Parameter ParameterDescriptionParameterValue
INSTANCE Displayinformationfor
specifiedinstance.Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayIS-ISroutingtableforIPv4.:
Switch#showipisisroute
RelatedCommands
None
6.8.64showipv6isisroute
CommandPurpose
UsethiscommandtodisplaytheIS-ISroutingtableforIPv6.
CommandSyntax
showipv6isis(INSTANCE|)route995Parameter ParameterDescriptionParameterValue
INSTANCE Displayinformationfor
specifiedinstance.Upto20characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayIS-ISroutingtableforIPv6.:
Switch#showipv6isisroute
RelatedCommands
None
6.8.65showipv6isistopology
CommandPurpose
UsethiscommandtodisplaytheIS-IStopologyforIPv6.
CommandSyntax
showipv6isistopology(l1|l2|level-1|level-2|)
showipv6isisINSTANCEtopology(l1|l2|level-1|level-2|)
Parameter ParameterDescriptionParameterValue996INSTANCE Displayinformationfor
specifiedinstance.Upto20characters
l1 IS-ISlevel-1SPFtopology.-
l2 IS-ISlevel-2SPFtopology.-
level-1 IS-ISlevel-1SPFtopology.-
level-2 IS-ISlevel-2SPFtopology.-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaytheIS-IStopologyforIPv6:
Switch#showipv6isistopology
RelatedCommands
None
6.8.66showipv6protocolsisis
CommandPurpose
UsethiscommandtodisplayIPv6processparametersandstatistics.
CommandSyntax
showipv6protocolsisis997CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayIPv6processparametersandstatistics.:
Switch#showipv6protocolsisis
RoutingProtocolis"isis2"
Redistributing:
AreaAddress(es):
Distance:(defaultis115)
RoutingProtocolis"isis1"
Redistributing:
AreaAddress(es):
Distance:(defaultis115)
RelatedCommands
None
6.8.67showisiscounter
CommandPurpose
UsethiscommandtodisplaytheIS-ISsystemcounterentryMIBs.
CommandSyntax
showisiscounter
CommandMode
PrivilegedEXEC998Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaytheIS-ISsystemcounterentryMIBs.:
Switch#showisiscounter
Areab:
IS-ISLevel-1isisSystemCounterEntry:
isisSysStatCorrLSPs:0
isisSysStatAuthTypeFails:0
isisSysStatAuthFails:0
isisSysStatLSPDbaseOloads:0
isisSysStatManAddrDropFromAreas:0
isisSysStatAttmptToExMaxSeqNums:0
isisSysStatSeqNumSkips:0
isisSysStatOwnLSPPurges:0
isisSysStatIDFieldLenMismatches:0
isisSysStatMaxAreaAddrMismatches:0
isisSysStatPartChanges:0
isisSysStatSPFRuns:0
isisSysStatPRCRuns:0
Areabb:
IS-ISLevel-1isisSystemCounterEntry:
isisSysStatCorrLSPs:0
isisSysStatAuthTypeFails:0
isisSysStatAuthFails:0
isisSysStatLSPDbaseOloads:0
isisSysStatManAddrDropFromAreas:0
isisSysStatAttmptToExMaxSeqNums:0
isisSysStatSeqNumSkips:0
isisSysStatOwnLSPPurges:0
isisSysStatIDFieldLenMismatches:0
isisSysStatMaxAreaAddrMismatches:0
isisSysStatPartChanges:0
isisSysStatSPFRuns:0
isisSysStatPRCRuns:0
IS-ISLevel-2isisSystemCounterEntry:
isisSysStatCorrLSPs:0
isisSysStatAuthTypeFails:0
isisSysStatAuthFails:0
isisSysStatLSPDbaseOloads:0
isisSysStatManAddrDropFromAreas:0
isisSysStatAttmptToExMaxSeqNums:0
isisSysStatSeqNumSkips:0999isisSysStatOwnLSPPurges:0
isisSysStatIDFieldLenMismatches:0
isisSysStatMaxAreaAddrMismatches:0
isisSysStatPartChanges:0
isisSysStatSPFRuns:0
isisSysStatPRCRuns:0
RelatedCommands
None
6.8.68showisisdatabase
CommandPurpose
Usethiscommandtodisplaydetailedlinkstatedatabaseinformation.
CommandSyntax
showisisdatabase
showisisdatabase(l1|l2|level-1|level-2)LSPID(detail|verbose)
Parameter ParameterDescriptionParameterValue
detail IS-ISlinkstatedatabase
detailedinformation.-
verbose IS-ISlinkstatedatabase
detailedinformation.-
LSPID LSPIDintheformof
XXXX.XXXX.XXXX.XX-
XX.-
l1 IS-ISlevel-1linkstate
database.-
l2 IS-ISlevel-2linkstate
database.-
level-1 IS-ISlevel-1linkstate
database.-1000level-2 IS-ISlevel-2linkstate
database.-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaydetailedlinkstatedatabaseinformation.:
Switch#showisisdatabaseverbose
Area(null):
IS-ISLevel-1LinkStateDatabase:
LSPID LSPSeqNumLSPChecksumLSPHoldtimeATT/P/OL
0000.0000.0001.00-00*0x000000020x9E5011400/0/0
IS-ISLevel-2LinkStateDatabase:
LSPID LSPSeqNumLSPChecksumLSPHoldtimeATT/P/OL
0000.0000.0001.00-00*0x000000030x9C5111760/0/0
RelatedCommands
None
6.8.69showisisinterface
CommandPurpose
Usethiscommandtodisplaydetailedinterfaceinformation.
CommandSyntax
showisisinterface1001showisisinterfaceIFNAME
showisisinterfacecounter
Parameter ParameterDescriptionParameterValue
IFNAME Displaythenameof
interface.Support
physical/aggregation/loopb
ack/vlan/tunnelports
counter Displaytheinterface
counters.-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaydetailedinterfaceinformationaboutISIS:
Switch#showisisinterfaceeth-0-1
eth-0-1isup,lineprotocolisup
RoutingProtocol:IS-IS((null))
NetworkType:Broadcast
CircuitType:level-1-2
LocalcircuitID:0x01
ExtendedLocalcircuitID:0x00000001
LocalSNPA:e6f5.41de.3200
IPinterfaceaddress:
1.1.1.1/24
IPv6interfaceaddress:
Level-1Metric:10/10,Priority:64,CircuitID:0000.0000.0001.01
Numberofactivelevel-1adjacencies:0
Level-1LSPMTU:1492
Level-2Metric:10/10,Priority:64,CircuitID:0000.0000.0001.01
Numberofactivelevel-2adjacencies:0
Level-2LSPMTU:14921002NextIS-ISLANLevel-1Helloin238milliseconds
NextIS-ISLANLevel-2Helloin238milliseconds
RelatedCommands
None
6.8.70showisistopology
CommandPurpose
UsethiscommandtodisplaydataaboutIS-IStopology.
CommandSyntax
showisistopology(l1|l2|level-1|level-2|)
showisisINSTANCEtopology(l1|l2|level-1|level-2|)
Parameter ParameterDescriptionParameterValue
INSTANCE Displayinformationfor
specifiedinstance.Upto20characters
l1 Displaythepathtoall
level-1routersinthearea.-
l2 Displaythepathtoall
level-2routersinthe
domain.-
level-1 Displaythepathtoall
level-1routersinthearea.-
level-2 Displaythepathtoall
level-2routersinthe
domain.-
CommandMode
PrivilegedEXEC1003Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaydataaboutIS-IStopology.:
Switch#showisistopology
RelatedCommands
None
6.8.71showrunning-configinterfaceisis
CommandPurpose
UsethiscommandtodisplaytheISISinterfaceconfigurations.
CommandSyntax
showrunning-configinterfaceIFNAMEisis
Parameter ParameterDescriptionParameterValue
IFNAME Displaythenameof
interface.Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None1004Usage
None
Examples
ThefollowingexampleshowshowtodisplaytheISISinterfaceconfigurations.:
Switch#showrunning-configinterfaceeth-0-1isis
Buildingconfiguration...
!
interfaceeth-0-1
iprouterisis
!
RelatedCommands

6.8.72showrunning-configrouterisis
CommandPurpose
UsethiscommandtodisplayrouterISISconfigurations.
CommandSyntax
showrunning-configrouterisis
CommandMode
PrivilegedEXEC
Default
None
Usage
None1005Examples
ThefollowingexampleshowshowtodisplayrouterISISconfigurations.:
Switch#showrunning-configrouterisis
Buildingconfiguration...
!
routerisis
net10.0000.0000.0001.00
!
RelatedCommands
None10067IPv6RoutingCommands
7.1OSPFv3Commands
7.1.1areadefault-cost
CommandPurpose
Tospecifyacostforthedefaultsummaryroutesentintoastub,usetheareadefault-
costcommandinrouterconfigurationmode.
Toremovetheassigneddefaultroutecost,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDdefault-costCOST
noareaAREA-IDdefault-cost
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
COST Costforthedefault
summaryrouteusedfora
stub.0-16777215
CommandMode
RouterConfiguration1007Default
Thecostvalueis1bydefault.
Usage
ThecommandisusedonlyonanAreaBorderRouter(ABR)attachedtoastub.
Therearetwostubarearouterconfigurationcommands:thestubanddefault-cost
optionsoftheareacommand.Inallroutersandaccessserversattachedtothestub
area,theareashouldbeconfiguredasastubareausingthestuboptionofthearea
command.Usethedefault-costoptiononlyonanABRattachedtothestubarea.The
default-costoptionprovidesthemetricforthesummarydefaultroutegeneratedby
theABRintothestubarea.
Examples
Thefollowingexampleassignsadefaultcostof20tostubnetwork10.0.0.0:
Switch#configureterminal
Switch(config)#routeripv6ospf201
Switch(config-router)#area10.0.0.0stub
Switch(config-router)#area10.0.0.0default-cost20
RelatedCommands
None
7.1.2arearange
CommandPurpose
Toconsolidateandsummarizeroutesatanareaboundary,usethearearange
commandinrouterconfigurationmode.Todisablethisfunction,usethenoformof
thiscommand.
CommandSyntax
areaAREA-IDrangeADDRESS/PREFIX-LENGTH(advertise|not-advertise|)
noareaAREA-IDrangeADDRESS/PREFIX-LENGTH1008Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
ADDRESS IPv6address IPv6Address
PREFIX-LENGTH Prefixlengthofthe
address1-128
advertise Advertisethisrange
(default)-
not-advertise DoNotAdvertisethis
range-
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
ThearearangecommandisusedonlywithAreaBorderRouters(ABRs).Itisusedto
consolidateorsummarizeroutesforanarea.Theresultisthatasinglesummary
routeisadvertisedtootherareasbytheABR.Routinginformationiscondensedat
areaboundaries.Externaltothearea,asinglerouteisadvertisedforeachaddress
range.Thisbehavioriscalledroutesummarization.
Multiplearearouterconfigurationcommandsspecifyingtherangeoptioncanbe
configured.Thus,OSPFcansummarizeaddressesformanydifferentsetsofaddress
ranges.1009Examples
ThefollowingexamplespecifiesonesummaryroutetobeadvertisedbytheABRto
otherareasforallsubnetsonarea10:
Switch#configureterminal
Switch(config)#routeripv6ospf201
Switch(config-router)#area10range2004::1/16
RelatedCommands
None
7.1.3areastub
CommandPurpose
Todefineanareaasastubarea,usetheareastubcommandinrouterconfiguration
mode.
Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDstub(no-summary|)
noareaAREA-IDstub(no-summary|)
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
4294967295
no-summary (Optional)Preventsan
AreaBorderRouter(ABR)
fromsendingsummarylink
advertisementsintothe
stubarea-1010CommandMode
RouterConfiguration
Default
Nostubareaisdefined.
Usage
Youmustconfiguretheareastubcommandonallroutersandaccessserversinthe
stubarea.Usethearearouterconfigurationcommandwiththedefault-costkeyword
tospecifythecostofadefaultinternalroutersentintoastubareabyanABR.
Therearetwostubarearouterconfigurationcommands:thestubanddefault-cost
optionsofthearearouterconfigurationcommand.Inallroutersattachedtothestub
area,theareashouldbeconfiguredasastubareausingthestubkeywordofthe
areacommand.Usethedefault-costkeywordonlyonanABRattachedtothestub
area.Thedefault-costkeywordprovidesthemetricforthesummarydefaultroute
generatedbytheABRintothestubarea.
Tofurtherreducethenumberoflink-stateadvertisements(LSAs)sentintoastub
area,youcanconfiguretheno-summarykeywordontheABRtopreventitfrom
sendingsummaryLSAs(LSAtype3)intothestubarea.
Examples
Thefollowingexampleassignsadefaultcostof20tostubnetwork10.0.0.0:
Switch#configureterminal
Switch(config)#routeripv6ospf201
Switch(config-router)#area10.0.0.0stub
Switch(config-router)#area10.0.0.0default-cost20
RelatedCommands
None10117.1.4auto-cost
CommandPurpose
TocontrolhowOpenShortestPathFirstVersion3(OSPFv3)calculatesdefault
metricsfortheinterface;usetheauto-costcommandinrouterconfigurationmode.
Toassigncostbasedonlyontheinterfacetype,usethenoformofthiscommand.
CommandSyntax
auto-costreference-bandwidthRATE
noauto-costreference-bandwidth
Parameter ParameterDescriptionParameterValue
RATE RateinMbps(bandwidth).
Thedefaultis1001-4294967Mbps
CommandMode
RouterConfiguration
Default
100Mbps
Usage
Thevaluesetbytheipv6ospfcostcommandoverridesthecostresultingfromthe
auto-costcommand.
Examples
Thefollowingexamplechangesthecostofthecostlinkto1GBps:
Switch#configureterminal
Switch(config)#routeripv6ospf1
Switch(config-router)#auto-costreference-bandwidth10001012RelatedCommands
ipv6ospfcost
7.1.5clearipv6ospf
CommandPurpose
ToclearroutinginformationbasedontheOpenShortestPathFirst(OSPF)routing
processID,usetheclearipv6ospfcommandinprivilegedEXECmode.
CommandSyntax
clearipv6ospf(PID|)process
Parameter ParameterDescriptionParameterValue
PID (Optional)ProcessID 0-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethePIDargumenttoclearonlyoneOSPFv3process.IfthePIDargumentisnot
specified,allOSPFv3processesarecleared.
Examples
ThefollowingexampleclearsallOSPFv3processes:
Switch#clearipv6ospfprocess
RelatedCommands
None10137.1.6default-informationoriginate(OSPFv3)
CommandPurpose
TogenerateadefaultexternalrouteintoanOpenShortestPathFirstVersion3
(OSPFv3)routingdomain,usethedefault-informationoriginatecommandinrouter
configurationmode.
Todisablethisfeature,usethenoformofthiscommand.
CommandSyntax
default-informationoriginate
default-informationoriginate{metricMETRIC|metric-typeTYPE)|route-map
ROUTE_MAP|always}
nodefault-informationoriginate
nodefault-informationoriginate{metric|metric-type|route-map|always}
Parameter ParameterDescriptionParameterValue
always (Optional)Always
advertisesthedefault
routeregardlessof
whetherthesystemhasa
defaultrouteUpto20characters
METRIC metric-value(Optional)
Metricusedforgenerating
thedefaultroute.Ifyou
omitavalueanddonot
specifyavalueusingthe
default-metricrouter
configurationcommand,
thedefaultmetricvalueis
10.Thevalueusedis
specifictotheprotocol0-167772141014TYPE (Optional)Externallink
typeassociatedwiththe
defaultrouteadvertised
intotheOSPFrouting
domain.Itcanbeoneof
thefollowingvalues1,2
ROUTE_MAP Routemapreference -
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
Wheneveryouusetheredistributeorthedefault-informationrouterconfiguration
commandtoredistributeroutesintoanOSPFv3routingdomain,theswitch
automaticallybecomesanautonomousSystemBoundaryRouter(ASBR).However,
anASBRdoesnot,bydefault,generateadefaultrouteintotheOSPFv3routing
domain.Thesystemstillmusthaveadefaultrouteforitselfbeforeitgeneratesone,
exceptwhenyouhavespecifiedthealwayskeyword.
Examples
Thefollowingexamplespecifiesametricof100forthedefaultrouteredistributedinto
theOSPFv3routingdomainandanexternalmetrictypeofType1:
Switch#configureterminal
Switch(config)#routeripv6ospf109
Switch(config-router)#redistributeripmetric100
Switch(config-router)#default-informationoriginatemetric100metric-type1
RelatedCommands
redistribute(OSPFv3)10157.1.7default-metric(OSPFv3)
CommandPurpose
TosetdefaultmetricvaluesfortheOpenShortestPathFirstVersion3(OSPFv3)
routingprotocol,usethedefault-metriccommandinrouterconfigurationmode.
Toreturntothedefaultstate,usethenoformofthiscommand.
CommandSyntax
default-metricMETRIC-VALUE
nodefault-metric(METRIC-VALUE)
Parameter ParameterDescriptionParameterValue
METRIC-VALUE Defaultmetricvalue
appropriateforthe
specifiedroutingprotocol.
Defaultmetricvalue
appropriateforthe
specifiedroutingprotocol.
Built-in,automaticmetric
translations,as
appropriateforeach
routingprotocol.The
metricofredistributed
connectedandstatic
routesissetto00-16777214
CommandMode
RouterConfiguration
Default
1forBGProutes
20forothers1016Usage
Thedefault-metriccommandisusedinconjunctionwiththeredistributerouter
configurationcommandtocausethecurrentroutingprotocoltousethesamemetric
valueforallredistributedroutes.Adefaultmetrichelpssolvetheproblemof
redistributingrouteswithincompatiblemetrics.Whenevermetricsdonotconvert,
usingadefaultmetricprovidesareasonablesubstituteandenablestheredistribution
toproceed.
Examples
ThefollowingexampleshowsarouterinautonomoussystemusingboththeRouting
InformationProtocol(RIPng)andtheOSPFv3routingprotocols.Theexample
advertisesOSPFv3-derivedroutesusingRIPngandassignstheInternalGateway
Protocol(IGP)-derivedroutesaRIPngmetricof10:
Switch#configureterminal
Switch(config)#routeripv6ospf
Switch(config-router)#default-metric10
Switch(config-router)#redistributeripng
RelatedCommands
redistribute(OSPFv3)
7.1.8distance(OSPFv3)
CommandPurpose
TodefineOpenShortestPathFirstVersion3(OSPFv3)routeadministrativedistances
basedonroutetype,usethedistancecommandinrouterconfigurationmode.
Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
distance{DISTANCE|ospfv3[externalDIST1][inter-areaDIST2]|[intra-area
DIST3]}
nodistance{DISTANCE|ospfv3}
Parameter ParameterDescriptionParameterValue1017DISTANCE Administrativedistance.1-254.(routeswitha
distancevalueof255are
notinstalledintherouting
table)
externalDIST1 (Optional)Setsthe
distanceforroutesfrom
otherroutingdomains,
learnedbyredistribution.
Rangeis1to255.The
defaultvalueis1101-254
inter-areaDIST2 (Optional)Setsthe
distanceforallroutesfrom
oneareatoanotherarea.
Rangeis1to255.The
defaultvalueis1101-254
intra-areaDIST3 (Optional)Setsthe
distanceforallroutes
withinanarea.Rangeis1
to255.Thedefaultvalueis
1101-254
CommandMode
RouterConfiguration
Default
DIST1:110
DIST2:110
DIST3:110
Usage
Youmayspecifyoneofthekeywordsorusedistanceonlytoapplytoalltypesof
routes.1018Thedistancecommandallowsyoutosetadistanceforanentiregroupofroutes,
ratherthanaspecificroutethatpassesanaccesslist.
AcommonreasontousethedistancecommandiswhenyouhavemultipleOSPFv3
processeswithmutualredistribution,andyouwanttopreferinternalroutesfromone
overexternalroutesfromtheother.
Examples
ThefollowingexampleshowsarouterinautonomoussystemusingboththeRouting
InformationProtocol(RIPng)andtheOSPFv3routingprotocols.Theexample
advertisesOSPFv3-derivedroutesusingRIPngandassignstheInternalGateway
Protocol(IGP)-derivedroutesaRIPngdistanceof90:
Switch#configureterminal
Switch(config)#routeripv6ospf
Switch(config-router)#distance90
Switch(config-router)#redistributeripng
RelatedCommands
None
7.1.9distribute-list(OSPFv3)
CommandPurpose
Tofilternetworksreceivedinupdatesorsuppressnetworksfrombeingadvertisedin
updates,usethedistribute-listcommandinrouterconfigurationmode.
Tocancelthisfunction,usethenoformofthiscommand.
CommandSyntax
distribute-listACCESSS-LIST-NAME(in|out(bgp|connected|ospfv3|ripng|
static))
nodistribute-listACCESSS-LIST-NAME(in|out(bgp|connected|ospfv3|ripng|
static))
Parameter ParameterDescriptionParameterValue1019ACCESSS-LIST-NAMENameofanaccesslistto
beappliedUpto20characters
in Filternetworksreceivedin
updates-
out Suppressnetworksfrom
beingadvertisedin
updates-
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
Thiscommandmustspecifyanaccesslist.
Examples
Inthefollowingexample,OSPFv3process1isconfiguredtoaccepttwoprefixes,
prefix2001:1:1::1/32andprefix3001:1:1::1/32:
Switch#configureterminal
Switch(config)#ipv6access-listfiter-as-router
Switch(config-ip-acl)#permitany2001:1:1::1/32any
Switch(config-ip-acl)#permitany3001:1:1::1/32any
Switch(config-ip-acl)#denyanyanyany
Switch(config)#routeripv6ospf1
Switch(config-router)#distribute-listacl1in
RelatedCommands
ipv6access-list10207.1.10enabledb-summary-opt
CommandPurpose
Usethiscommandtoenableoptimizetheprocesswhenbuildingospfv3neighbor
ship.
CommandSyntax
enabledb-summary-opt
noenabledb-summary-opt
CommandMode
RouterConfiguration
Default
Disable
Usage
Afterthisfunctionenabled,iftherouterreceivesaDDpacketwhichhasnewerLSA,
theroutershoulddeletetheLSAinthedatabasesummarylist,andshouldnotsend
thisLSAtoitsneighbor.
Examples
Thefollowingexampleenablesthisoptimization:
Switch#configureterminal
Switch(config)#routeripv6ospf1
Switch(config-if)#enabledb-summary-opt
Switch#configureterminal
Switch(config)#routeripv6ospf1
Switch(config-router)#enabledb-summary-opt
RelatedCommands
None10217.1.11ipv6ospfcost
CommandPurpose
Toexplicitlyspecifythecostofsendingapacketonaninterface,usetheipv6ospf
costcommandininterfaceconfigurationmode.Toresetthepathcosttothedefault
value,usethenoformofthiscommand.
CommandSyntax
ipv6ospfcostINTERFACE-COST(instanceID|)
noipv6ospfcost(instanceID|)
Parameter ParameterDescriptionParameterValue
INTERFACE-COST Unsignedintegervalue
expressedasthelink-state
metric.1-65535
CommandMode
InterfaceConfiguration
Default
Nodefaultcostispredefined.
Usage
Youcansetthemetricmanuallyusingthiscommand,ifyouneedtochangethe
default.Usingthebandwidthcommandchangesthelinkcostaslongasthis
commandisnotused.
Thelink-statemetricisadvertisedasthelinkcostintherouterlinkadvertisement.
Ingeneral,thepathcostiscalculatedusingthefollowingformula:
ReferenceBandwidth/bandwidth1022Examples
Thefollowingexamplesetstheinterfacecostvalueto65:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfcost65
RelatedCommands
auto-costreferencebandwidth
7.1.12ipv6ospfdead-interval
CommandPurpose
Tosettheintervalduringwhichatleastonehellopacketmustbereceivedfroma
neighborbeforetherouterdeclaresthatneighbordown,usetheipv6ospfdead-
intervalcommandininterfaceconfigurationmode.Torestorethedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
ipv6ospfdead-intervalSECONDS(instanceID|)
noipv6ospfdead-interval(instanceID|)
Parameter ParameterDescriptionParameterValue
SECONDS Interval(inseconds)
duringwhichtherouter
mustreceiveatleastone
hellopacketfroma
neighbororelsethat
neighborisremovedfrom
thepeerlistanddoesnot
participateinrouting.The
valuemustbethesame
forallnodesonthe
network1-655351023ID InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
Theneighborisconsideredasdeadin40sbydefault.
Usage
ThedeadintervalisadvertisedinOSPFv3hellopackets.Thisvaluemustbethe
sameforallnetworkingdevicesonaspecificnetwork.
Specifyingasmallerdeadinterval(seconds)willgivefasterdetectionofaneighbor
beingdownandimproveconvergence,butmightcausemoreroutinginstability.
Examples
ThefollowingexamplesetstheOSPFv3deadintervalto20seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfdead-interval20
RelatedCommands
ipv6ospfhello-interval
showipv6sospfinterface
7.1.13ipv6ospfhello-interval
CommandPurpose
Tospecifytheintervalbetweenhellopacketsthattheswitchsendsontheinterface,
usetheipospfhello-intervalcommandininterfaceconfigurationmode.
Toreturntothedefaulttime,usethenoformofthiscommand.1024CommandSyntax
ipospfhello-intervalSECONDS(instanceID|)
noipospfhello-interval(instanceID|)
Parameter ParameterDescriptionParameterValue
SECONDS Interval(inseconds)
duringwhichtherouter
mustreceiveatleastone
hellopacketfroma
neighbororelsethat
neighborisremovedfrom
thepeerlistanddoesnot
participateinrouting.The
valuemustbethesame
forallnodesonthe
network1-65535
ID InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
10seconds(Ethernet)
30seconds(non-broadcast)
Usage
Thisvalueisadvertisedinthehellopackets.Thesmallerthehellointerval,thefaster
topologicalchangeswillbedetected,butmoreroutingtrafficwillensue.Thisvalue
mustbethesameforallroutersandaccessserversonaspecificnetwork.1025Examples
Thefollowingexamplesetstheintervalbetweenhellopacketsto15seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfhello-interval15
RelatedCommands
ipv6ospfdead-interval
7.1.14ipv6ospfmtu-ignore
CommandPurpose
TodisableOpenShortestPathFirstVersion3(OSPFv3)maximumtransmissionunit
(MTU)mismatchdetectiononreceivingDatabaseDescriptor(DBD)packets,usethe
ipv6ospfmtu-ignorecommandininterfaceconfigurationmode.
Toresettodefault,usethenoformofthiscommand.
CommandSyntax
ipv6ospfmtu-ignore(instanceID|)
noipv6ospfmtu-ignore(instanceID|)
Parameter ParameterDescriptionParameterValue
ID InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
OSPFv3MTUmismatchdetectionisenabled.1026Usage
OSPFv3checkswhetherneighborsareusingthesameMTUonacommoninterface.
ThischeckisperformedwhenneighborsexchangeDBDpackets.Ifthereceiving
MTUintheDBDpacketishigherthantheIPMTUconfiguredontheincoming
interface,OSPFv3adjacencywillnotbeestablished.
Examples
ThefollowingexampledisablesMTUmismatchdetectiononreceivingDBDpackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfmtu-ignore
RelatedCommands
None
7.1.15ipv6ospfpriority
CommandPurpose
Tosettherouterpriority,whichhelpsdeterminethedesignatedrouterforthisnetwork,
usetheipospfprioritycommandininterfaceconfigurationmode.
Toreturntothedefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6ospfpriorityNUMBER-VALUE(instanceID|)
noipv6ospfpriority(instanceID|)
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Anumbervaluethat
specifiesthepriorityofthe
router.0-255
ID InstanceID,thedefault
valueis0.0-2551027CommandMode
InterfaceConfiguration
Default
Priorityof1
Usage
Whentworoutersattachedtoanetworkbothattempttobecomethedesignated
router,theonewiththehigherrouterprioritytakesprecedence.Ifthereisatie,the
routerwiththehigherrouterIDtakesprecedence.Arouterwitharouterprioritysetto
zeroisineligibletobecomethedesignatedrouterorbackupdesignatedrouter.
Routerpriorityisconfiguredonlyforinterfacestomulti-accessnetworks(inother
words,nottopoint-to-pointnetworks).
ThispriorityvalueisusedwhenyouconfigureOpenShortestPathFirstVersion3
(OSPFv3)fornon-broadcastnetworksusingtheneighborrouterconfiguration
commandforOSPFv3.
Examples
Thefollowingexamplesetstherouterpriorityvalueto4:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfpriority4
RelatedCommands
None
7.1.16ipv6ospfretransmit-interval
CommandPurpose
Tospecifythetimebetweenlink-stateadvertisement(LSA)retransmissionsfor
adjacenciesbelongingtotheinterface,usetheipv6ospfretransmit-interval
commandininterfaceconfigurationmode.
Toreturntothedefaultvalue,usethenoformofthiscommand.1028CommandSyntax
ipv6ospfretransmit-intervalSECONDS(instanceID|)
noipv6ospfretransmit-interval(instanceID|)
Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)between
retransmissions.Itmustbe
greaterthantheexpected
round-tripdelaybetween
anytworoutersonthe
attachednetwork.1-65535seconds
ID InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
5seconds
Usage
WhenaroutersendsanLSAtoitsneighbor,itkeepstheLSAuntilitreceivesback
theacknowledgmentmessage.Iftherouterreceivesnoacknowledgment,itwill
resendtheLSA.Thesettingofthisparametershouldbeconservative,orneedless
retransmissionwillresult.Thevalueshouldbelargerforseriallinesandvirtuallinks.
Examples
Thefollowingexamplesetstheretransmitintervalvalueto8seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfretransmit-interval81029RelatedCommands
None
7.1.17ipv6ospftransmit-delay
CommandPurpose
Tosettheestimatedtimerequiredtosendalink-stateupdatepacketontheinterface,
usetheipv6ospftransmit-delaycommandininterfaceconfigurationmode.Toreturn
tothedefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6ospftransmit-delaySECONDS(instanceID|)
noipv6ospftransmit-delay(instanceID|)
Parameter ParameterDescriptionParameterValue
SECONDS Time(inseconds)between
retransmissions.Itmustbe
greaterthantheexpected
round-tripdelaybetween
anytworoutersonthe
attachednetwork.1-65535seconds
ID InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
1second1030Usage
Link-stateadvertisements(LSAs)intheupdatepacketmusthavetheirages
incrementedbytheamountspecifiedinthesecondsargumentbeforetransmission.
Thevalueassignedshouldtakeintoaccountthetransmissionandpropagation
delaysfortheinterface.
Ifthedelayisnotaddedbeforetransmissionoveralink,thetimeinwhichtheLSA
propagatesoverthelinkisnotconsidered.Thissettinghasmoresignificanceonvery
low-speedlinks.
Examples
Thefollowingexamplesetstheretransmitdelayvalueto3seconds:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospftransmit-delay3
RelatedCommands
None
7.1.18ipv6ospfnetwork
CommandPurpose
Tosetnetworktypeoftheinterface,usetheipv6ospfnetworkcommandininterface
configurationmode.Toreturntothedefaultvalue,usethenoformatofthiscommand.
CommandSyntax
ipv6ospfnetwork(broadcast|non-broadcast|point-to-multipoint(non-broadcast|)
|point-to-point|)(instance<0-255>|)
noipv6ospfnetwork(instance<0-255>|)
Parameter ParameterDescriptionParameterValue
broadcast Specifybroadcastmulti-
accessnetwork-1031non-broadcast SpecifyNBMAnetwork-
point-to-multipoint Specifypoint-to-multipoint
networknon-broadcast
point-to-point Specifypoint-to-point
network-
instance InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
broadcast
Usage
None
Examples
Thefollowingexamplesetsthenetwoktypeofinterfacetopoint-to-point:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfnetworkpoint-to-point
RelatedCommands
None
7.1.19ipv6ospfneighbor
CommandPurpose
ToconfigureIPv6ospfneighbor,usetheipv6ospfneighborcommandininterface
configurationmode.Toreturntothedefaultvalue,usethenoformatofthiscommand.1032CommandSyntax
ipv6ospfneighborADDRESS({poll-interval<1-65535>|priority<0-255>}|)(cost
<1-65535>|)(instance<0-255>|)
noipv6ospfneighbor(instance<0-255>|)
Parameter ParameterDescriptionParameterValue
ADDRESS IPv6addresskofneighborIPv6Address
poll-interval Dead-routerpollinginterval
forNBMAneighbor1-65535
priority Priorityofnon-broadcast
neighbor0-255
cost Costforpoint-to-multipoint
neighbor1-65535
instance InstanceID,thedefault
valueis0.0-255
CommandMode
InterfaceConfiguration
Default
Noneighborisconfigured.
Usage
None
Examples
ThefollowingexampleconfigureIPv6ospfneighborontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6ospfneighborfe80::11033RelatedCommands
None
7.1.20passive-interface(OSPF)
CommandPurpose
TodisablesendingroutingupdatesfortheOpenShortestPathFirstVersion3
(OSPFv3)onaninterface,usethepassive-interfacecommandinrouterconfiguration
mode.Tore-enablethesendingofroutingupdates,usethenoformofthiscommand.
CommandSyntax
passive-interfaceIFNAME
nopassive-interfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
Routingupdatesaresentontheinterface.
Usage
Ifyoudisablethesendingofroutingupdatesonaninterface,theparticularsubnet
willcontinuetobeadvertisedtootherinterfaces,andupdatesfromotherswitcheson
thatinterfacecontinuetobereceivedandprocessed.
Examples
Thefollowingexamplesetstheinterfaceeth-0-1aspassive:1034Switch#configureterminal
Switch(config)#routeripv6ospf200
Switch(config-router)#passive-interfaceeth-0-1
RelatedCommands
routeripv6ospf
7.1.21redistribute(OSPFv3)
CommandPurpose
ToredistributeroutesfromoneroutingdomainintoOpenShortestPathFirstVersion3
(OSPFv3)routingdomain,usetheredistributecommandinrouterconfigurationmode.
Todisableredistribution,usethenoformofthiscommand.
CommandSyntax
redistributePROTOCOL[route-mapWORD][tagTAG-VALUE][metricMETRIC-
VALUE][metric-typeTYPE-VALUE]
noredistributePROTOCOL[metricMETRIC-VALUE][metric-typeTYPE-VALUE]
Parameter ParameterDescriptionParameterValue
route-mapWORD Routemapname Upto20characters
PROTOCOL (Optional)Thenameofa
routingprotocol,orthe
keywordconnected,or
static.Ifyouspecifya
routingprotocol,useone
ofthefollowingkeywords:
bgp,andripngconnected/static/bgp/ripng
tagTAG-VALUE Settagforroutes
redistributedintoOSPF0-42949672951035metricMETRIC-VALUE(Optional)When
redistributingother
processestoanOSPF
process,thedefaultmetric
is20whennometricvalue
isspecified0-16777214
metric-typeTYPE-VALUEForOSPF,theexternallink
typeassociatedwiththe
defaultrouteadvertised
intotheOSPFrouting
domain.Itcanbeoneof
twovalues1-2
CommandMode
RouterConfiguration
Default
Routeredistributionisdisabled.
metricmetric-value:20
metric-typeTYPE-VALUE:Type2externalroute
Usage
Themetricvaluespecifiedintheredistributecommandsupersedesthemetricvalue
specifiedusingthedefault-metriccommand.
Examples
ThefollowingexampleredistributethestaticroutesintoOSPFv3withmetric10:
Switch#configureterminal
Switch(config)#routerospf119
Switch(config-router)#redistributestaticmetric10
RelatedCommands
default-metric10367.1.22router-id(OSPF)
CommandPurpose
TouseafixedrouterID,usetherouter-idcommandinrouterconfigurationmode.
ToforceOpenShortestPathFirstVersion3(OSPFv3)usethepreviousOSPFrouter
IDbehavior,usethenoformofthiscommand.
CommandSyntax
router-idIP-ADDRESS
norouter-id
Parameter ParameterDescriptionParameterValue
IP-ADDRESS RouterIDinIPaddress
formatIPv6Address
CommandMode
RouterConfiguration
Default
NoOSPFroutingprocessisdefined.
Usage
YoucanconfigureanarbitraryvalueintheIPaddressformatforeachrouter.
However,eachrouterIDmustbeunique.
IfthiscommandisusedonanOSPFv3routerprocesswhichisalreadyactive(has
neighbors),thenewrouter-IDisusedatthenextreloadoratamanualOSPFv3
processrestart.TomanuallyrestarttheOSPFv3process,usetheclearipospf
command.
Examples
Thefollowingexamplespecifiesafixedrouter-id:1037Switch#configureterminal
Switch(config)#routeripv6ospf119
Switch(config-router)#router-id10.1.1.1
RelatedCommands
clearipv6ospf
routeripv6ospf
7.1.23routeripv6ospf
CommandPurpose
ToconfigureanOpenShortestPathFirstVersion3(OSPFv3)routingprocess,use
therouteripv6ospfcommandinglobalconfigurationmode.Toterminatean
OSPFv3sroutingprocess,usethenoformofthiscommand.
CommandSyntax
routeripv6ospf[PROCESS-ID[vrfVPN-NAME]]
norouteripv6ospf[PROCESS-ID]
Parameter ParameterDescriptionParameterValue
PROCESS-ID Internallyused
identificationparameterfor
anOSPFroutingprocess.
Itislocallyassignedand
canbeanypositive
integer.Auniquevalueis
assignedforeachOSPF
routingprocess1-65535
vrfVPN-NAME (Optional)Specifiesthe
nameoftheVPNrouting
andforwarding(VRF)
instancetoassociatewith
OSPFv3VRFprocessesAstringwith1-15
characters1038CommandMode
GlobalConfiguration
Default
NoOSPFroutingprocessisdefined.
Usage
YoucanspecifymultipleOSPFv3routingprocessesineachrouter.Ifyoudonot
specifytheprocess-id,theprocess-idwillbethedefault0.
Examples
ThefollowingexampleconfiguresanOSPFv3routingprocessandassignsaprocess
numberof109:
Switch#configureterminal
Switch(config)#routeripv6ospf109
RelatedCommands
None
7.1.24summary-address(OSPFv3)
CommandPurpose
TocreateaggregateaddressesforOpenShortestPathFirstVersion3(OSPFv3),use
thesummary-addresscommandinrouterconfigurationmode.Torestorethedefault,
usethenoformofthiscommand.
CommandSyntax
summary-addressPREFIX/PREFIX-LENGTH[not-advertise][tagTAG-VALUE]
nosummary-addressPREFIX/PREFIX-LENGTH[not-advertise][tagTAG-VALUE]
Parameter ParameterDescriptionParameterValue1039PREFIX IProuteprefixforthe
destinationIPv6Address
PREFIX-LENGTH Prefixlengthforthe
network1-128
not-advertise (Optional)Suppressroutes
thatmatchthespecified
prefix/maskpair.This
keywordappliesto
OSPFv3only-
tagTAG-VALUE Routetagvalue 0-4294967295
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
Routeslearnedfromotherroutingprotocolscanbesummarized.Themetricusedto
advertisethesummaryisthelargestmetricofallthemorespecificroutes.This
commandhelpsreducethesizeoftheroutingtable.
UsingthiscommandforOSPFv3causesanOSPFv3AutonomousSystemBoundary
Router(ASBR)toadvertiseoneexternalrouteasanaggregateforallredistributed
routesthatarecoveredbytheaddress.ForOSPFv3,thiscommandsummarizesonly
routesfromotherroutingprotocolsthatarebeingredistributedintoOSPFv3.Usethe
arearangecommandforroutesummarizationbetweenOSPFareas.
OSPFv3doesnotsupportthesummary-address0.0.0.0/0command.
Examples
Inthefollowingexample,thesummaryaddress2001:1:1::/48includesaddress
2001:1:1:1::/64,2001:1:1:2::/64,andsoon.Onlytheaddress2001:1:1::/48is
advertisedinanexternallink-stateadvertisement:1040Switch#configureterminal
Switch(config)#routeripv6ospf
Switch(config-router)#summary-address2001:1:1::/48
RelatedCommands
arearange
7.1.25showipv6ospf
CommandPurpose
TodisplaygeneralinformationaboutOpenShortestPathFirstVersion3(OSPFv3)
routingprocesses,usetheshowipv6ospfcommandinuserEXECorprivileged
EXECmode.
CommandSyntax
showipv6ospf(PROCESS-ID|)
Parameter ParameterDescriptionParameterValue
PROCESS-ID Internallyused
identificationparameterfor
anOSPFv3routing
process.Itislocally
assignedandcanbeany
positiveinteger.Aunique
valueisassignedforeach
OSPFv3routingprocess1-65535
CommandMode
PrivilegedEXEC
Default
None1041Usage
None
Examples
Thefollowingissampleoutputfromtheshowipv6ospfcommandwhenentered
withoutaspecificOSPFv3processID:
Switch#showipv6ospf65535
RoutingProcess"OSPFv3(65535)"withID1.1.1.1
Processuptimeis1hour52minutes
SPFscheduledelaymin0.500secs,SPFscheduledelaymax50.0secs
MinimumLSAinterval5secs,MinimumLSAarrival1secs
NumberofincommingcurrentDDexchangeneighbors0/5
NumberofoutgoingcurrentDDexchangeneighbors0/5
NumberofexternalLSA0.ChecksumSum0x0000
NumberofAS-ScopedUnknownLSA0
NumberofLSAoriginated3
NumberofLSAreceived19
Numberofareasinthisrouteris1
AreaBACKBONE(0)
Numberofinterfacesinthisareais1(1)
SPFalgorithmexecuted6times
NumberofLSA4.ChecksumSum0x16569
NumberofUnknownLSA0
RelatedCommands
None
7.1.26showipv6ospfdatabase
CommandPurpose
TodisplaylistsofinformationrelatedtotheOpenShortestPathFirstVersion3
(OSPFv3)databaseforaspecificrouter,usetheshowipospfdatabasecommandin
EXECmode.
CommandSyntax
showipv6ospf(PROCESS-ID|)database
showipv6ospf(PROCESS-ID|)databaseadv-routerROUTER-ID1042showipv6ospf(PROCESS-ID|)database(external|inter-prefix|inter-router|
intra-prefix|link|network|nssa-external|router)(LINK-STATE-ID|)(adv-router
ROUTER-ID|self-originate)
showipv6ospf(PROCESS-ID|)databasemax-age
showipv6ospf(PROCESS-ID|)databaseself-originate
Parameter ParameterDescriptionParameterValue
PROCESS-ID Internallyused
identificationparameterfor
anOSPFv3routing
process.Itislocally
assignedandcanbeany
positiveinteger.Aunique
valueisassignedforeach
OSPFv3routingprocess1-65535
adv-routerROUTER-ID(Optional)Displaysallthe
LSAsofthespecified
router.IfnoIPaddressis
included,theinformationis
aboutthelocalrouteritself
(inthiscase,thesameas
self-originate)IPv4AddressinA.B.C.D
format
LINK-STATE-ID (Optional)Portionofthe
Internetenvironmentthat
isbeingdescribedbythe
advertisement.Thevalue
entereddependsonthe
advertisementsLStype.It
mustbeenteredinthe
formofanIPaddressIPv4AddressinA.B.C.D
format
CommandMode
PrivilegedEXEC1043Default
None
Usage
ThevariousformsofthiscommanddeliverinformationaboutdifferentOSPFv3link
stateadvertisements.
Examples
Thefollowingissampleoutputfromtheshowipv6ospfdatabasecommandwhenno
argumentsorkeywordsareused:
Switch#showipv6ospf65535database
OSPFv3RouterwithID(1.1.1.1)(Process65535)
Link-LSA(Interfacevlan1000)
LinkStateIDADVRouterAgeSeq#CkSumPrefix
0.0.19.2321.1.1.114920x800000020x27e31
0.0.19.2322.2.2.214880x800000020xcc941
Router-LSA(Area0.0.0.0)
LinkStateIDADVRouterAgeSeq#CkSumLink
0.0.0.01.1.1.114520x800000030x42d61
0.0.0.02.2.2.214490x800000030x24f01
Network-LSA(Area0.0.0.0)
LinkStateIDADVRouterAgeSeq#CkSum
0.0.19.2322.2.2.214530x800000010x7f99
Intra-Area-Prefix-LSA(Area0.0.0.0)
LinkStateIDADVRouterAgeSeq#CkSumPrefixReference
0.0.0.22.2.2.214480x800000010x96fd2Network-LSA
RelatedCommands
None
7.1.27showipv6ospfinterface
CommandPurpose
TodisplayOpenShortestPathFirstVersion3(OSPFv3)-relatedinterfaceinformation;
usetheshowipv6ospfinterfacecommandinEXECmode.
CommandSyntax
showipv6ospfinterface(IFNAME|)1044Parameter ParameterDescriptionParameterValue
IFNAME (Optional)Interfacename.
Iftheinterface-name
argumentisincluded,only
informationforthe
specifiedinterfaceis
includedSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputoftheshowipv6ospfinterfacecommandwhenvlan12
isspecified:
Switch#showipv6ospfinterfacevlan12
vlan12isup,lineprotocolisup
InterfaceID4108
IPv6Prefixes
fe80::8eb5:d5ff:fed9:ff00/10(Link-LocalAddress)
2004:12:0:12::1/96
OSPFv3Process(0),Area0.0.0.0,InstanceID0
RouterID1.1.1.1,NetworkTypeBROADCAST,Cost:1
TransmitDelayis1sec,StateBackup,Priority1
DesignatedRouter(ID)2.2.2.2
InterfaceAddressfe80::188f:beff:fe99:9800
BackupDesignatedRouter(ID)1.1.1.1
InterfaceAddressfe80::8eb5:d5ff:fed9:ff00
Timerintervalconfigured,Hello10,Dead40,Wait40,Retransmit5
Helloduein00:00:06
NeighborCountis1,Adjacentneighborcountis11045RelatedCommands
None
7.1.28showipv6ospfneighbor
CommandPurpose
TodisplayOpenShortestPathFirstVersion3(OSPFv3)-neighborinformationona
per-interfacebasis,usetheshowipv6ospfneighborcommandinprivilegedEXEC
mode.
CommandSyntax
showipv6ospfneighbor(IFNAME|)NEIGHBOR-ID|)(detail|)
Parameter ParameterDescriptionParameterValue
IFNAME (Optional)Interfacename.
Iftheinterface-name
argumentisincluded,only
informationforthe
specifiedinterfaceis
includedSupport
physical/aggregation/loopb
ack/vlan/tunnelports
NEIGHBOR-ID (Optional)NeighborIDIPv4AddressinA.B.C.D
format
detail (Optional)Displaysall
neighborsgivenindetail
(listsallneighbors)-
CommandMode
PrivilegedEXEC
Default
None1046Usage
None
Examples
Thefollowingissampleoutputfromtheshowipv6ospfneighborcommandshowing
asinglelineofsummaryinformationforeachneighbor:
Switch#showipv6ospfneighbor
OSPFv3Process(0)
NeighborIDPriStateDeadTimeInterfaceInstanceID
2.2.2.21Full/DR00:00:31vlan120
2.2.2.21Full/DR00:00:33vlan12120
OSPFv3Process(65535)
NeighborIDPriStateDeadTimeInterfaceInstanceID
2.2.2.21Full/DR00:00:31vlan10000
RelatedCommands
None
7.1.29showipv6ospfdatabasedatabase-summary
CommandPurpose
TodisplaythesummaryofdatabaseusedbyOSPFv3,usetheshowipospf
databasedatabase-summarycommandinprivilegedEXECmode.
CommandSyntax
showipv6ospf(PROCESS-ID|)databasedatabase-summary
Parameter ParameterDescriptionParameterValue1047PROCESS-ID (Optional)Internal
identification.Itislocally
assignedandcanbeany
positiveinteger.The
numberusedhereisthe
numberassigned
administrativelywhen
enablingtheOSPFrouting
process1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtouseshowipv6ospfdatabasedatabase-
summarycommand:
Switch#showipv6ospf65535databasedatabase-summary
OSPFv3RouterwithID(1.1.1.1)(ProcessID65535)
Area(0.0.0.0)databasesummary
LSATypeCountMaxAge
Router 20
Network 10
Inter-Prefix00
Inter-Router00
Intra-Prefix10
Subtotal 40
Process65535databasesummary
LSATypeCountMaxAge
Router 20
Network 10
Inter-Prefix00
Inter-Router001048Type-5Ext00
Link 20
Intra-Prefix10
Total 60
RelatedCommands
None
7.1.30showipv6ospfroute
CommandPurpose
TodisplaythesummaryofroutesusedbyOSPFv3,usetheshowipv6ospfroute
summarycommandinprivilegedEXECmode.
CommandSyntax
showipv6ospf(PROCESS-ID|)route
Parameter ParameterDescriptionParameterValue
PROCESS-ID (Optional)Internal
identification.Itislocally
assignedandcanbeany
positiveinteger.The
numberusedhereisthe
numberassigned
administrativelywhen
enablingtheOSPFv3
routingprocess1-65535
CommandMode
PrivilegedEXEC
Default
None1049Usage
None
Examples
Thefollowingexampleshowshowtouseshowipv6ospfroutecommand:
Switch#showipv6ospfroute
OSPFv3Process(0)
Codes:C-connected,D-Discard,O-OSPF,IA-OSPFinterarea
E1-OSPFexternaltype1,E2-OSPFexternaltype2
Destination Metric
Next-hop
C2004:1:0:10::/96 1
directlyconnected,vlan10,Area0.0.0.0
C2004:1:0:20::/96 1
directlyconnected,vlan20,Area0.0.0.14
C2004:1:0:100::/96 1
directlyconnected,vlan100,Area0.0.0.0
C2004:1:0:200::/96 1
directlyconnected,vlan200,Area0.0.0.14
O2004:2:0:10::/96 2
viafe80::188f:beff:fe99:9800,vlan1212,Area0.0.0.0
viafe80::188f:beff:fe99:9800,vlan12,Area0.0.0.0
IA2004:2:0:20::/96 2
viafe80::188f:beff:fe99:9800,vlan1212,Area0.0.0.0
viafe80::188f:beff:fe99:9800,vlan12,Area0.0.0.0
RelatedCommands
None
7.1.31showipv6ospfroutesummary
CommandPurpose
TodisplaythesummaryofroutesusedbyOSPFv3,usetheshowipv6ospfroute
summarycommandinprivilegedEXECmode.
CommandSyntax
showipv6ospf(PROCESS-ID|)routesummary
Parameter ParameterDescriptionParameterValue1050PROCESS-ID (Optional)Internal
identification.Itislocally
assignedandcanbeany
positiveinteger.The
numberusedhereisthe
numberassigned
administrativelywhen
enablingtheOSPFv3
routingprocess1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtouseshowipv6ospfroutesummarycommand:
Switch#showipv6ospfroutesummary
OSPFv3RouterwithID(1.1.1.1)(ProcessID0)
RouteType Count
(C)Connected 8
(D)Discard 0
(O)Intraarea 2
(IA)Interarea 4
(E1)Exttype1 0
(E2)Exttype2 0
(N1)NSSAExttype1 0
(N2)NSSAExttype2 0
Total 14
OSPFv3RouterwithID(1.1.1.1)(ProcessID65535)
RouteType Count
(C)Connected 1
(D)Discard 0
(O)Intraarea 1
(IA)Interarea 01051(E1)Exttype1 0
(E2)Exttype2 0
(N1)NSSAExttype1 0
(N2)NSSAExttype2 0
Total 2
RelatedCommands
None
7.1.32showipv6protocolsospf
CommandPurpose
TodisplayIPv6routingprotocolprocessparametersandstatisticsofOpenShortest
PathFirstVersion3(OSPFv3).usetheshowipv6ospfprotocolsospfcommandin
privilegedEXECmode.
CommandSyntax
showipv6protocolsospf
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtouseshowipv6protocolsospfcommand:
Switch#showipv6protocolsospf
RoutingProtocolis"OSPFv3(0)"withID1.1.1.1
Redistributing:
Distance:(defaultis110)
RoutingProtocolis"OSPFv3(65535)"withID1.1.1.11052Redistributing:
Distance:(defaultis110)
RelatedCommands
None
7.1.33timersspf
CommandPurpose
ToturnonOpenShortestPathFirstVersion3(OSPFv3)shortestpathfirst(SPF)
throttling,usethetimersspfcommandinrouterconfigurationmode.ToturnoffSPF
throttling,usethenoformofthiscommand.
CommandSyntax
timersspfexpSPF-HOLD_MINSPF-HOLD_MAX
notimersspfexp
Parameter ParameterDescriptionParameterValue
SPF-HOLD_MIN Indicatesthemaximum
holdtimebetweentwo
consecutiveSPF
calculations.0-2147483647
milliseconds
SPF-HOLD_MAX Indicatestheminimum
holdtimebetweentwo
consecutiveSPF
calculations.0-2147483647
milliseconds
CommandMode
RouterConfiguration
Default
None1053Usage
None
Examples
ThefollowingexampleshowshowtoconfigureSPFcalculationparameters:
Switch#configureterminal
Switch(config)#routeripv6ospf1
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#timersspfexp2050
RelatedCommands
None
7.1.34max-concurrent-dd
CommandPurpose
TospecifyMaximumnumberallowedtoprocessDDconcurrently,usethemax-
concurrent-ddcommandinrouterconfigurationmode.Torestoredefaultvalue,use
thenoformofthiscommand
CommandSyntax
max-concurrent-ddNUMBER-VALUE
nomax-concurrent-dd
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE NumberofDDprocess1-65535
CommandMode
RouterConfiguration
Default
None1054Usage
ThiscommandusedtospecifyMaximumnumberallowedtoprocessDDconcurrently.
Examples
Thefollowingexampleshowshowtousemax-concurrent-ddcommand.:
Switch#configureterminal
Switch(config)#routeripv6ospf100
Switch(config-router)#router-id10.10.10.2
Switch(config-router)#max-concurrent-dd10
RelatedCommands
None
7.1.35debugipv6ospf
CommandPurpose
UsethiscommandtospecifyalldebuggingoptionsforOSPFv3.Usetheno
parameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugipv6ospf(all|)
nodebugipv6ospf(all|)
Parameter ParameterDescriptionParameterValue
all enablealldebugging -
CommandMode
PrivilegedEXEC
Default
None1055Usage
Thedebugospfallcommandenablesthedisplayofalldebuginformation.
Examples
Switch#debugipv6ospfall
Switch#debugipv6ospf
RelatedCommands
None
7.1.36debugipv6ospfevents
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFv3eventtroubleshooting.
Usethiscommandwithoutparameterstoturnonalltheoptions.Usetheno
parameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugipv6ospfevents(abr|asbr|nssa|os|router|vlink)
nodebugipv6ospfevents(abr|asbr|nssa|os|router|vlink)
Parameter ParameterDescriptionParameterValue
abr showsABRevents -
asbr showsASBRevents -
nssa showsNSSAevents -
os showsOSinteraction
events-
router showsothersrouterevents-
vlink showsvirtuallinkevents-1056CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospfeventcommandenablesthedisplayofdebuginformationrelatedto
OSPFv3internalevents.
Examples
Switch#debugipv6ospfeventsnssa
Switch#debugipv6ospfeventslsa
RelatedCommands
None
7.1.37debugipv6ospfifsm
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFv3InterfaceFiniteState
Machine(IFSM)troubleshooting.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugipv6ospfifsm(status|events|timers)
nodebugipv6ospfifsm(status|events|timers)
Parameter ParameterDescriptionParameterValue
status DisplaysIFSMstatus
information-1057events DisplaysIFSMevent
information-
timers DisplaysIFSMTIMER
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospfifsmcommandenablesthedisplayofdebuginformationrelatedto
theInterfaceFiniteStateMachine(IFSM).
Examples
Switch#debugipv6ospfifsmtimers
RelatedCommands
None
7.1.38debugipv6ospfnfsm
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFv3NeighborFiniteState
Machine(NFSM)troubleshooting.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugipv6ospfnfsm(status|events|timers)
nodebugipv6ospfnfsm(status|events|timers)1058Parameter ParameterDescriptionParameterValue
status DisplaysNFSMstatus
information-
events DisplaysNFSMevent
information-
timers DisplaysNFSMTIMER
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospfnfsmcommandenablesthedisplayofdebuginformationrelatedto
theNeighborFiniteStateMachine(NFSM).
Examples
Switch#debugipv6ospfnfsmtimers
RelatedCommands
None
7.1.39debugipv6ospflsa
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFv3LinkState
Advertisements(LSA)troubleshooting.
Usethenoparameterwiththiscommandtodisablethisfunction.1059CommandSyntax
debugipv6ospflsa(flooding|generate|install|maxage|refresh)
nodebugipv6ospflsa(flooding|generate|install|maxage|refresh)
Parameter ParameterDescriptionParameterValue
flooding DisplaysLSAflooding -
generate DisplaysLSAgenerate-
install DisplaysLSAinstallation-
maxage Displaysthemaximumage
ofLSAinseconds-
refresh DisplaysLSArefresh -
CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospflsacommandenablesthedisplayofdebuginformationrelatedto
internaloperationsofLSAs.
Examples
Switch#debugipv6ospflsainstall
RelatedCommands
None10607.1.40debugipv6ospfpacket
CommandPurpose
UsethiscommandtospecifydebuggingoptionsforOSPFv3packets.
Usethenoparameterwiththiscommandtodisablethisfunction..
CommandSyntax
debugipv6ospfpacketPARAMETERS
nodebugipv6ospfpacketPARAMETERS
PARAMETERS=dd|detail|hello|ls-ack|ls-request|ls-update|recv|send
Parameter ParameterDescriptionParameterValue
dd Specifiesdebuggingfor
OSPFdatabase
descriptions-
detail Setsthedebugoptionto
detailedinformation-
hello Specifiesdebuggingfor
OSPFhellopackets-
ls-ack Specifiesdebuggingfor
OSPFlinkstate
acknowledgments-
ls-request Specifiesdebuggingfor
OSPFlinkstaterequests-
ls-update Specifiesdebuggingfor
OSPFlinkstateupdates-
recv Specifiesthedebugoption
setforreceivedpackets-
send Specifiesthedebugoption
setforsentpackets-1061CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospfpacketcommandenablesthedisplayofdebuginformationrelatedto
thesendingandreceivingofpackets.
Examples
Switch#debugipv6ospfpacketddsenddetail
RelatedCommands
None
7.1.41debugipv6ospfroute
CommandPurpose
Usethiscommandtospecifywhichroutecalculationtodebug.Usethiscommand
withoutparameterstoturnonalltheoptions.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
debugipv6ospfroute(ase|ia|install|spf)
nodebugipv6ospfroute(ase|ia|install|spf)
Parameter ParameterDescriptionParameterValue
ase Specifiesthedebuggingof
externalroutecalculation-1062ia Specifiesthedebuggingof
Inter-Arearoutecalculation-
install Specifiesthedebuggingof
routeinstallation-
spf Specifiesthedebuggingof
SPFcalculation-
CommandMode
PrivilegedEXEC
Default
None
Usage
Thedebugospfroutecommandenablesthedisplayofdebuginformationrelatedto
route-calculation
Examples
Switch#debugipv6ospfrouteinstall
RelatedCommands
None
7.1.42showdebuggingipv6ospf
CommandPurpose
UsethiscommandtodisplaythesetOSPFv3debuggingoption..
CommandSyntax
showdebuggingipv6ospf1063CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisisasampleoutputfromtheshowdebuggingipv6ospfcommand.Somelinesin
thisoutputwraparound,theymightnotwraparoundintheactualdisplay:
Switch#showdebuggingipv6ospf
OSPFv3debuggingstatus:
OSPFv3allpacketdetaildebuggingison
OSPFv3allIFSMdebuggingison
OSPFv3allNFSMdebuggingison
OSPFv3allLSAdebuggingison
OSPFv3allroutecalculationdebuggingison
OSPFv3alleventdebuggingison
RelatedCommands
None
7.1.43showresourceipv6ospf
CommandPurpose
UsethiscommandtodisplaytherouteresourcesusedbyOSPFv3protocol.
CommandSyntax
showresourceipov6ospf
CommandMode
PrivilegedEXEC1064Default
None
Usage
None.
Examples
Thefollowingissampleoutputfromtheshowresourceipv6ospfcommand:
Switch#showresourceipv6ospf
OSPFv3
Resource UsedCapability
=============================================================
Routes 161913
RelatedCommands
showipv6ospfroutesummary
7.1.44showipv6vrfospf
CommandPurpose
Usethiscommandtodisplaytheospfv3interfacebelongtowhichvrf
CommandSyntax
showipv6vrfospf
CommandMode
PrivilegedEXEC
Default
None1065Usage
None.
Examples
Thefollowingissampleoutputfromtheshowipv6vrfospfcommand:
Switch#showipv6vrfospf
NameInterfaces
ccceth-0-9
RelatedCommands
None
7.1.45areanssa
CommandPurpose
TodefineanareaasaNSSAarea,usetheareanssacommandinrouter
configurationmode.Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
areaAREA-IDnssa(translator-role(candidate|never|always)|)(no-summary|)
(no-redistribution|)(default-information-originate{metricMETRIC_VALUE|metric-
typeTYPE-VALUE|}|)
noareaAREA-IDnssa(translator-role|)(no-summary|)(no-redistribution|)
(stability-interval|)(default-information-originate|)
Parameter ParameterDescriptionParameterValue
AREA-ID Identifieroftheareafor
whichauthenticationisto
beenabled.Theidentifier
canbespecifiedaseither
adecimalvalueoranIP
addressIPaddressornumberin
therangeof0-
42949672951066candidate (Optional)Configurethe
roleforABRinNSSAarea
ascandidateforthe
translatorrouter-
always (Optional)Configurethe
roleforABRinNSSAarea
asthespecifiedtranslator
router-
no-summary (Optional)Preventsan
AreaBorderRouter(ABR)
fromsendingSummary
LSAsintotheNSSAarea-
no-redistribution (Optional)Preventsan
AreaBorderRouter(ABR)
fromimportingroutesinto
theNSSAarea-
default-information-
originate(Optional)Configurean
ASBRtosenddefaulttype
7LSAintotheNSSAarea-
metricMETRIC_VALUE(Optional)Configuremetric
forthedefaultoriginate
route0-16777214
metric-typeTYPE-VALUE(Optional)Configuremetric
typeforthedefault
originateroute1-2
stability-interval
INTERVAL-VALUE(Optional)Configure
StabilityInterval0-2147483647seconds
CommandMode
RouterConfiguration1067Default
NoNSSAareaisdefined.
Usage
NoNSSAareaisconfiguredasdefault.Youmustconfiguretheareanssacommand
onallroutersandaccessserversintheNSSAarea.
TherearemanysimilaritiesbetweenNSSAandstubarea,neitherofwhich
propagatesexternalroutesfromotherarea.ThedifferenceisthatNSSAareacan
introduceandpropagateexternalroutestotheOSPFautonomousdomain,while
STUBareacannotintroduceexternalroutes.
Examples
ThefollowingexampleshowshowtoconfigureaNSSAarea:
Switch#configureterminal
Switch(config)#routeripv6ospf201
Switch(config-router)#area10.0.0.0nssa
RelatedCommands
None
7.2RIPngCommands
7.2.1routeripv6rip
CommandPurpose
ToenableorconfiguretheRoutingInformationProtocolnextgeneration(RIPng)
routingprocess,usetherouteripv6ripcommandinglobalconfigurationmode.
TodisabletheRIPngroutingprocess,usethenoformofthiscommand.
CommandSyntax
routeripv6rip
norouteripv6rip1068CommandMode
GlobalConfiguration
Default
NoRIPngroutingprocessisdefined.
Usage
None
Examples
ThefollowingexampleshowshowtoenableRIPngroutingprocess:
Switch#configureterminal
Switch(config)#routeripv6rip
RelatedCommands
None
7.2.2ipv6routerrip
CommandPurpose
ToenableRIPngroutingprocessonspecificalinterface,usethecommandipv6
routerripininterfaceconfigurationmode.
UsethenoparameterwiththiscommandtodisableRIPngroutingprocesson
interface.
CommandSyntax
ipv6routerrip
noipv6routerrip
CommandMode
InterfaceConfiguration1069Default
None.
Usage
None
Examples
ThefollowingexampleshowshowtoenableRIPngontheinterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipv6routerrip
RelatedCommands
None
7.2.3ipv6ripmetric-offset
CommandPurpose
UsethiscommandtosetRIPmetricoffsetininterfacemode.
Torestorethedefaultmetric,usethenoformofthiscommand.
CommandSyntax
ipv6ripmetric-offsetNUMBER-VALUE
noipv6ripmetric-offsetNUMBER-VALUE
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Metricoffsetvalue 1-16
CommandMode
InterfaceConfiguration1070Default
Metricoffsetvalueis1.
Usage
Metricoffsetvalueisusedtoaddthemetricofthenetworkonwhichthemessage
arrived(astheRFCdescribes).
Examples
Thefollowingexampleshowshowtosetmetricoffsetas2:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ripmetric-offset2
RelatedCommands
None
7.2.4ipv6ripsplit-horizon
CommandPurpose
ToenablethesplithorizonmechanismforRoutingInformationProtocolnext
generation(RIPng),usetheipv6ripsplit-horizoncommandininterfaceconfiguration
mode.
Todisablethesplithorizonmechanism,usethenoformofthiscommand.
CommandSyntax
ipv6ripsplit-horizon(poisoned|)
noipv6ripsplit-horizon
Parameter ParameterDescriptionParameterValue
poisoned Splithorizonwithpoisoned
reverse-1071CommandMode
InterfaceConfiguration
Default
Thiscommandisenabledwithpoisonedreversebydefault.
Usage
Ingeneral,changingthedefaultstatefortheipv6ripsplit-horizoncommandisnot
recommended,unlessyouarecertainthatyourapplicationrequiresachangein
ordertoproperlyadvertiseroutes.
Examples
Thefollowingexampleenablessplithorizonwithoutpoisonedreverse:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6ripsplit-horizon
RelatedCommands
None
7.2.5default-informationoriginate(RIPng)
CommandPurpose
TogenerateadefaultrouteintoRoutingInformationProtocolnextgeneration(RIPng),
usethedefault-informationoriginatecommandinrouterconfigurationmode.
Todisablethisfeature,usethenoformofthiscommand.
CommandSyntax
default-informationoriginate(route-mapNAME|)
nodefault-informationoriginate(route-map|)
Parameter ParameterDescriptionParameterValue1072NAME Routemapnameto
referenceUpto20characters
CommandMode
RouterConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
Thedefaultroutecanbelearnedbyneighbor,butcantbestoredinFIB.
Examples
Thefollowingexampleoriginatesadefaultroute(0::0/0)intoRIPng:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#default-informationoriginate
RelatedCommands
None
7.2.6default-metric(RIPng)
CommandPurpose
TospecifythemetricstobeassignedtoredistributedroutersforRoutingInformation
Protocolnextgeneration(RIPng),usethedefault-metriccommandinrouter
configurationmode.
Toreturntothedefaultstate,usethenoformofthiscommand.
CommandSyntax
default-metricNUMBER-VALUE
nodefault-metric1073Parameter ParameterDescriptionParameterValue
NUMBER-VALUE Metricvalue 1-16
CommandMode
RouterConfiguration
Default
Bydefault,themetricissetto1.
Usage
Thedefault-metriccommandisusedinconjunctionwiththeredistributerouter
configurationcommandtocausethecurrentroutingprotocoltousethesamemetric
valueforallredistributedroutes.Adefaultmetrichelpssolvetheproblemof
redistributingrouteswithincompatiblemetrics.Whenevermetricsdonotconvert,
usingadefaultmetricprovidesareasonablesubstituteandenablestheredistribution
toproceed.
Examples
ThefollowingexampleshowsaswitchusingboththeRIPngandtheOpenShortest
PathFirst(OSPFv3)routingprotocols.TheexampleadvertisesOSPFv3-derived
routesusingRIPngandassignstheOSPFv3-derivedroutesaRIPngmetricof10:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#default-metric10
Switch(config-router)#redistributeospfv3
RelatedCommands
redistribute(RIPng)
7.2.7distance(RIPng)
CommandPurpose
Todefineanadministrativedistanceforroutesthatareinsertedintotheroutingtable,
usethedistancecommandinrouterconfigurationmode.1074Toreturntheadministrativedistancetoitsdefaultdistancedefinition,usethenoform
ofthiscommand.
Anadministrativedistanceisaratingofthetrustworthinessofaroutinginformation
source,suchasanindividualswitchoragroupofswitches.Numerically,an
administrativedistanceisanintegerfrom0to255.Ingeneral,thehigherthevalueis,
thelowerthetrustrating.Anadministrativedistanceof255meanstherouting
informationsourcecannotbetrustedatallandshouldbeignored.
CommandSyntax
distanceDISTANCE
nodistance
Parameter ParameterDescriptionParameterValue
DISTANCE Administrativedistance1-255.(routeswitha
distancevalueof255are
notinstalledintherouting
table)
CommandMode
RouterConfiguration
Default
Bydefault,thedistanceis120.
Usage
RouteSource DefaultDistance
Connectedinterface 0
Staticroute 1
ExternalBorderGatewayProtocol
(eBGP)20
OpenShortestPathFirst(OSPF) 1101075RoutingInformationProtocol(RIP)/
RoutingInformationProtocolnext
generation(RIPng)120
InternalBGP 200
Unknown 255
Unknown 255
Examples
ThefollowingexamplesetthedistanceofRIPng200:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#distance200
RelatedCommands
None
7.2.8neighbor(RIPng)
CommandPurpose
Tospecifyaneighboringroutertowhichtonotifyroutingupdatinginformation,use
theneighborcommandinrouterconfigurationmode.
Toremovetheneighbor,usethenoformofthiscommand.
CommandSyntax
neighborIPV6_ADDRIFNAME
noneighborIP-ADDRESSIFNAME
Parameter ParameterDescriptionParameterValue
IPV6_ADDR Link-localIPaddressofa
peerswitchwithwhich
routinginformationwillbe
notifiedIPv6Address1076IFNAME Interfacenametowhich
theneighborisspecifiedSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
Noneighboringswitchesaredefined.
Usage
Especiallyusetheneighborcommandinconjunctionwiththepassive-interface
commandtosendroutingupdatestospecificneighbors.Thiscommandpermitsthe
point-to-point(non-multicast)notificationofroutingupdateinformation.Multiple
neighborscanbeconfigured
Examples
Inthefollowingexample,RIPngupdatesaresenttoallinterfaceswhichhavebeen
enabledRIPngroutingexcepteth-0-1.However,inthiscaseaneighborswitch
configurationcommandisincluded.Thiscommandpermitsthesendingofrouting
updatestospecificneighbors:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#passive-interfaceeth-0-1
Switch(config-router)#neighborfe80:db8::1eth-0-1
RelatedCommands
routerrip10777.2.9offset-list(RIPng)
CommandPurpose
ToaddanoffsettoincomingandoutgoingmetricstoroutesexchangingviaRouting
InformationProtocolnextgeneration(RIPng),usetheoffset-listcommandinrouter
configurationmode.
Toremoveanoffsetlist,usethenoformofthiscommand.
CommandSyntax
offset-listACCESSS-LIST-NAME(in|out)METRIC-OFFSET(IFNAME|)
nooffset-list(in|out)(IFNAME|)
Parameter ParameterDescriptionParameterValue
ACCESSS-LIST-NAMENamedaccesslisttobe
appliedUpto40characters
in Appliestheaccesslistto
incomingmetrics-
out Appliestheaccesslistto
outgoingmetrics-
METRIC-OFFSET Positiveoffsettobe
appliedtometricsfor
networksmatchingthe
accesslist.Themeric-
offsetrangeis0to160-16
IFNAME Interfacenametowhich
theoffsetlistisappliedSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration1078Default
Thiscommandisconfiguredbydefault.
Usage
Especiallyiftheoffsetvalueisaddedtotheroutingmetricbyoffset-list,thedefault
actionwherethemetricupdateswhenRIPngmessagearrives(asRFCdefined)is
ignored,butoutputswillbeadded.
Theoffsetvalueisaddedtotheroutingmetric.Anoffsetlistwithaninterfaceis
consideredextendedandtakesprecedenceoveranoffsetlistthatisnotextended.
Therefore,ifanentrypassestheextendedoffsetlistandthenormaloffsetlist,the
offsetoftheextendedoffsetlistisaddedtothemetric.
Examples
Inthefollowingexample,theswitchappliesanoffsetof10ifaccesslist21permits:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#offset-list21out10
RelatedCommands
None
7.2.10passive-interface(RIPng)
CommandPurpose
TodisablesendingroutingupdatesfortheRoutingInformationProtocolnext
generation(RIPng)onaninterface,usethepassive-interfacecommandinrouter
configurationmode.
Toenablethesendingofroutingupdates,usethenoformofthiscommand.
CommandSyntax
passive-interfaceIFNAME
nopassive-interfaceIFNAME1079Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
Interfaceisactivebydefault.
Usage
Thecommanddisablethesendingofroutingupdatesandignoretherequest
messagefromneighboronaninterface,butupdatesfromotherroutersonthat
interfaceshouldbereceivedandprocessed.
Examples
Thefollowingexamplesetstheinterfaceeth-0-1aspassive:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#passive-interfaceeth-0-1

RelatedCommands
routeripv6rip
7.2.11redistribute(RIPng)
CommandPurpose
ToredistributeroutesfromoneroutingdomainintoRIPngroutingdomain,usethe
redistributecommandinrouterconfigurationmode.
Todisableredistribution,usethenoformofthiscommand.1080CommandSyntax
redistributePROTOCOL{[metricVALUE]|route-mapNAME}
noredistributePROTOCOL
Parameter ParameterDescriptionParameterValue
PROTOCOL Thenameofarouting
protocol,orthekeyword
connected,orstatic.Ifyou
specifyaroutingprotocol,
useoneofthefollowing
keywords:bgp,and
ospfv3,static,
connected,isisconnected/static/bgp/ospf/i
sis
metricVALUE (Optional)When
redistributingotherrouting
processtotheRIP
process,thedefaultmetric
is1ifnometricvalueis
specified1-16
route-mapNAME Routemapreference,
nameofroute-mapentryUpto20characters
CommandMode
RouterConfiguration
Default
Routeredistributionisdisabled.
Metric-value:1
Usage
Themetricvaluespecifiedintheredistributecommandsupersedesthemetricvalue
specifiedusingthedefault-metriccommand.1081Examples
ThefollowingexampleredistributesthestaticroutesintoRIPngwithmetric10:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#redistributestaticmetric10
RelatedCommands
default-metric
7.2.12timersbasic(RIPng)
CommandPurpose
ToadjustRoutingInformationProtocolnextgeneration(RIPng)networktimers,use
thetimersbasiccommandinrouterconfigurationmode.
Torestorethedefaulttimers,usethenoformofthiscommand.
CommandSyntax
timersbasicUPDATETIMEOUTINVALID
notimersbasic
Parameter ParameterDescriptionParameterValue
UPDATE Rate(inseconds)atwhich
updatesaresent.Thisis
thefundamentaltiming
parameteroftherouting
protocol5-2147483647seconds1082TIMEOUT Time(inseconds)after
whicharouteisdeclared
invalidwithoutupdates
thatrefreshtheroute.The
routethenentersintoan
invalidstateandisnot
usedforforwarding
packets.Itismarked
inaccessibleand
advertisedasunreachable5-2147483647seconds
INVALID Timeafterwhichaninvalid
routeisremovedfrom
RIPngroutingdatabase5-2147483647seconds
CommandMode
RouterConfiguration
Default
Updatetimer:30seconds
Timeouttimer:180seconds
Invalidtimer:120seconds
Usage
ThebasictimingparametersforRIPngareadjustable.BecauseRIPngisexecutinga
distributed,asynchronousroutingalgorithm,thesetimersmustbethesameforall
switchesandaccessserversinthenetwork.
Examples
Thefollowingexamplesetsupdatestoevery5seconds.Ifaswitchisnotlearned
fromin15seconds,therouteisdeclaredunusable.Andafter15secondstheinvalid
routewillberemovedfromRIPngroutingdatabase:1083Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#timersbasic51515
RelatedCommands
None
7.2.13distribute-list(RIPng)
CommandPurpose
Tofilternetworksinroutingupdates,usethedistribute-listcommandinrouter
configurationmode.
Torestorethedefaultvalue,usethenoformofthiscommand.
CommandSyntax
distribute-list(prefixNAME|ACCESSS-LIST-NAME)(in|out)(IFNAME|)
nodistribute-list(prefixname|ACCESSS-LIST-NAME)(in|out)(IFNAME|)
Parameter ParameterDescriptionParameterValue
prefixNAME Filterprefixesinrouting
updateUpto40characters
ACCESSS-LIST-NAMEAccess-listname Upto40characters
in Filterincomingrouting
updates-
out Filteroutgoingrouting
updates-
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration1084Default
None
Usage
None
Examples
ThefollowingexamplefiltersthereceivedRIPngroutes:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#distribute-listprefix1in
RelatedCommands
ipv6prefix-list
7.2.14aggregate-address(RIPng)
CommandPurpose
TospecifyanaggregateRIPngrouteannouncement,usetheaggregate-address
commandinrouterconfigurationmode.
Todisablethisfeature,usethenoformofthiscommand.
CommandSyntax
aggregate-addressIPV6_PREFIX(avoid-feedback|)IFNAME
noaggregate-addressIP-ADDRESSIFNAME
Parameter ParameterDescriptionParameterValue
IPV6_PREFIX Specifyanaggregate
network(IPv6address
prefixandlength).IPv6Addressandmask
lengthinX:X::X:X/M
format1085avoid-feedback Forbidtolearntheaddress
whichisthesameto
aggregateaddressfrom
theinterface-
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
Noaggregateaddressisdefined.
Usage
Iftheroutinginfoissuppressedbyaggregate-address,itisstillstoredinRIPng
database,butwillntbenotifiedtoneighbor.Ontheotherhandtheaggregate-
addresswillbenotifiedtoneighbor.
ThecommandonlybeusefulwhentheinterfaceisL3.
Examples
Inthefollowingexample,RIPngspecifyanaggregateaddressintoRIPngdatabase:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#aggregate-address2001:db8::/32
RelatedCommands
None10867.2.15routemap(RIPng)
CommandPurpose
Usethiscommandtosetaroutemapforinputoroutputfilteringonaspecified
interface.Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
route-mapNAME(in|out)IFNAME
noroute-mapname(in|out)IFNAME
Parameter ParameterDescriptionParameterValue
NAME routemapname Upto20characters
in routemapforinputfiltering-
out routemapforoutput
filtering-
IFNAME Specifyaninterfacename
towhichtoassociatethe
routemapSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
RouterConfiguration
Default
None.
Usage
None
Examples
Inthefollowingexample,setaroutemapforinputfilteringinterfaceeth-0-1:1087Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#route-maproutemap10ineth-0-1
RelatedCommands
None
7.2.16maximum-prefix(RIPng)
CommandPurpose
Usethiscommandtoconfigurethemaximumprefix.Usethenoparameterwiththis
commandtodisablethelimitingofthenumberofRIPngroutesintheroutingtable.
CommandSyntax
maximum-prefixNUMBER-VALUE(PERCENTAGE-VALUE|)
nomaximum-prefix
Parameter ParameterDescriptionParameterValue
NUMBER-VALUE maximumnumberof
RIPngroutesallowed1-65535
PERCENTAGE-VALUEPercentageofmaximum
routestogeneratea
warning.Thedefault
thresholdis75%.1-100
CommandMode
RouterConfiguration
Default
None.
Usage
Usethiscommandtoconfigurethemaximumprefix.1088Examples
Inthefollowingexample,setmaximumRIPngprefixis700andwarningpercentage
is70%:
Switch#configureterminal
Switch(config)#routeripv6rip
Switch(config-router)#maximum-prefix70070
:
RelatedCommands
None
7.2.17showipv6ripdatabase
CommandPurpose
UsethiscommandtodisplayRIPnginformationdatabase.
CommandSyntax
showipv6ripdatabase
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripdatabasecommand:
Switch#showipv6ripdatabase
Codes:R-RIP,Rc-RIPconnected,Rs-RIPstatic,Ra-RIPaggregated,1089Rcx-RIPconnectsuppressed,Rsx-RIPstaticsuppressed,
K-Kernel,C-Connected,S-Static,O-OSPF,I-IS-IS,B-BGP
Network NextHop IfMetTagTime
Rc2001:db8:0:6::/64:: eth-0-910
Rc2001:db8:0:49::/64:: eth-0-4810
RelatedCommands
showipv6ripinterface
7.2.18showipv6ripinterface
CommandPurpose
TodisplaysummaryinformationofRoutingInformationProtocolnextgeneration
(RIPng)foraspecificinterface,usetheshowipripinterfacecommandinprivileged
EXECmode.
CommandSyntax
showipv6ripinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None1090Examples
Thefollowingissampleoutputfromtheshowipripinterfacecommand:
Switch#showipv6ripinterfaceeth-0-9
eth-0-9isup,lineprotocolisup
RoutingProtocol:RIPng
Passiveinterface:Disabled
Splithorizon:EnabledwithPoisonedReversed
IPv6interfaceaddress:
2001:db8:0:6::2/64
fe80::b4df:82ff:fe70:ec00/10
RelatedCommands
showipv6ripdatabase
7.2.19showipv6ripdatabasedatabase-summary
CommandPurpose
UsethiscommandtodisplaythesummarystatisticsforRIPngdatabase.
CommandSyntax
showipv6ripdatabasedatabase-summary
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipripdatabasedatabase-summary
command:1091Switch#showipv6ripdatabasedatabase-summary
Type Count
RIPngconnected2
Total 2
RelatedCommands
showipv6ripdatabase
7.2.20showipv6protocolrip
CommandPurpose
ToshowRoutingInformationProtocolnextgeneration(RIPng),usetheshowipv6
protocolripcommandinprivilegedEXECmode.
CommandSyntax
showipv6protocolrip
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowipv6ripinterfacecommand:
Switch#showipv6protocolrip
RoutingProtocolis"ripng"
Sendingupdatesevery30secondswith+/-50%,nextduein2949331570seconds
Timeoutafter180seconds,garbagecollectafter120seconds
Outgoingupdatefilterlistforallinterfaceisnotset
Incomingupdatefilterlistforallinterfaceisnotset
Defaultredistributemetricis11092Redistributing:
Interface
eth-0-9
eth-0-48
RoutingforNetworks:
Numberofroutes(includingconnected):2
Distance:(defaultis120)
RelatedCommands
None
7.2.21debugipv6rip
CommandPurpose
Usethiscommandtospecifytheoptionsforthedisplayeddebugginginformationfor
RIPngevents,RIPngpackets.
Usethenoparameterwiththiscommandtodisablealldebugging.
CommandSyntax
debugipv6rip(all|events|packet|)
nodebugripv6(all|events|packet|)
nodebugallipv6(rip|)
Parameter ParameterDescriptionParameterValue
all AllRIPngdebug
information-
events RIPngeventsdebug
informationisdisplayed-
packet packet(recv|send)(detail)
SpecifiesRIPngpackets
only-
recv -
send -1093detail -
CommandMode
PrivilegedEXEC
Default
Disabled
Usage
None
Examples
Thefollowingexampledisplaysinformationabouttheripngpacketsthatarereceived
andsentoutfromtheconnectedrouter:
Switch#debugipv6rippacket
RelatedCommands
showdebuggingrip
7.2.22showdebuggingipv6rip
CommandPurpose
UsethiscommandtodisplaytheRIPdebuggingstatusforthesedebuggingoptions:
nsmdebugging,RIPeventdebugging,RIPpacketdebugging.
CommandSyntax
showdebuggingipv6rip
CommandMode
PrivilegedEXEC1094Default
None
Usage
UsethiscommandtodisplaythedebugstatusofRIPng.
Examples
Thefollowingissampleoutputfromtheshowdebuggingripngcommand:
Switch#showdebuggingipv6rip
RIPngdebuggingstatus:
RIPngeventdebuggingison
RelatedCommands
debugipv6rip
7.2.23showresourceipv6rip
CommandPurpose
UsethiscommandtodisplaytherouteresourcesusedbyRIPngprotocol.
CommandSyntax
showresourceipv6rip
CommandMode
PrivilegedEXEC
Default
None
Usage
None1095Examples
Thefollowingissampleoutputfromtheshowresourceipv6ripcommand:
Switch#showresourceipv6rip
RIPng
Resource UsedCapability
=============================================================
Routes 2728
RelatedCommands
showipv6ripdatabase
7.2.24clearipv6riproute
CommandPurpose
ToclearthespecificalrouteinRIPngroutingtable,usethecommandclearipv6rip
routerinprivilegedexecmode.
CommandSyntax
clearipv6riproute(IPV6_PREFIX|connected|static|ospfv3|bgp|all)
Parameter ParameterDescriptionParameterValue
IPV6_PREFIX Removesentrieswhich
exactlymatchthis
destinationaddressfrom
theRIPngroutingtable.IPv6Addressandmask
lengthinX:X::X:X/M
format
connected Removesentriesfor
connectedroutesfromthe
RIPngroutingtable.-
static Removesstaticentries
fromtheRIPngrouting
table-1096ospfv3 RemovesonlyOSPF
routesfromtheRIPng
routingtable-
bgp RemovesonlyBGProutes
fromtheRIPngrouting
table-
all RemovestheentireRIPng
routingtable-
CommandMode
PrivilegedEXEC
Default
None.
Usage
UsethiscommandtoclearspecificdatafromtheRIPngroutingtable.
Examples
Inthefollowingexample,cleartheentireRIPngroutingtable:
Switch#clearipv6riprouteall
RelatedCommands
None
7.3IPv6UCCommands
7.3.1ipv6enable
CommandPurpose
Usethiscommandtoenableipv6function.Usethenoformofthiscommandto
disableipv6function.1097CommandSyntax
ipv6enable
noipv6enable
CommandMode
GlobalConfiguration
Default
Ipv6functionisdisabledbydefault.
Usage
Thiscommandisusedtoenabletheipv6functionglobally.Ipv6packetshouldbe
processedasaL2packetwhenipv6functionisdisabled.
Examples
ThefollowingexampleshowshowtoenableIPv6:
Switch#configureterminal
Switch(config)#ipv6enable
RelatedCommands
None
7.3.2max-static-v6routes
CommandPurpose
Toconfigurethemaximumipv6staticroutesinsystem,usethemax-static-v6routes
commandinglobalconfigurationmode.Toconfigurethemaximumstaticroutesto
defaultvalue,usethenoformofthiscommand.
CommandSyntax
max-static-v6routesCOUNT
nomax-static-v6routes1098Parameter ParameterDescriptionParameterValue
COUNT Thecountofmaximum
ipv6staticroutes.1-65535
CommandMode
GlobalConfiguration
Default
PleasereferencethecurrentTCAMprofile.
Usage
Usersshouldnotconfigurethemaximumipv6staticroutesmorethansystemprofile
ofFIB.Also,usersshouldnotconfigurethemaximumipv6staticrouteslessthanthe
currentstaticroutescount.
Examples
Thefollowingexampledisplayshowtochangemaximumipv6staticroutesto10:
Switch#configureterminal
Switch(config)#max-static-v6routes10
RelatedCommands
showipv6route
7.3.3ipv6route
CommandPurpose
Toestablishipv6staticroutes,usetheipv6routecommandinglobalconfiguration
mode.
Toremoveipv6staticroutes,usethenoformofthiscommand.1099CommandSyntax
ipv6routevrfNAMEDEST_PREFIX(GLOBAL_PREFIX|LINK_LOCALIFNAME|
IFNULL)(ADMIN_DISTANCE|)
ipv6routeDEST_PREFIX(GLOBAL_PREFIX|LINK_LOCALIFNAME|IFTUNNEL|
IFNULL)(ADMIN_DISTANCE|)
noipv6routevrfNAMEDEST_PREFIX(GLOBAL_PREFIX|LINK_LOCAL
(IFNAME|)|IFNULL|)
noipv6routeDEST_PREFIX(GLOBAL_PREFIX|LINK_LOCAL(IFNAME|)|
IFTUNNEL|IFNULL|)
Parameter ParameterDescriptionParameterValue
vrfNAME VRFinstancename Upto15characters
DEST_PREFIX IPv6routeprefix(informat
X:X::X:X/M)forthe
destinationIPv6Addressandmask
lengthinX:X::X:X/M
format
GLOBAL_PREFIX IPv6routeglobalunicast
address(informat
X:X::X:X)forthenexthopIPv6AddressinX:X::X:X
format
LINK_LOCAL IPv6routelinklocal
address(FE80::/10)forthe
nexthopIPv6AddressinX:X::X:X
format
IFNAME Outgoinginterfaceforthe
ipv6routeSupport
physical/aggregation/vlan/t
unnelports
IFTUNNEL Tunnelinterfacenamefor
theipv6routetunnel<0-1023>
IFNULL null0interfacefortheipv6
routenull01100ADMIN_DISTANCE (Optional)An
administrativedistance.
Thedefaultadministrative
distanceforastaticroute
is1.Thisconfigurationis
optional.1-255
CommandMode
GlobalConfiguration
Default
ThereisnotanystaticIPv6routeconfiguredbydefault.
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6route3001::1/64fe80::1234eth-0-2
Switch(config)#ipv6routevrfa3002::1/643001::1
RelatedCommands
showipv6route
7.3.4ipv6address
CommandPurpose
TosetanIPv6addressforaninterface,usetheipv6addresscommandininterface
configurationmode.ToremoveanIPv6address,usethenoformofthiscommand.
CommandSyntax
ipv6addressGOLBAL_FREFIX(eui-64|)
noipv6addressGOLBAL_FREFIX(eui-64|)1101ipv6addressLINK-LOCALlink-local
noipv6addressLINK-LOCALlink-local
ipv6addressautolink-local
noipv6addressautolink-local
noipv6address
Parameter ParameterDescriptionParameterValue
GOLBAL_FREFIX GlobalIPv6addressand
prefixlength.InX:X::X:X/M
formatIPv6Addressandmask
lengthinX:X::X:X/M
format
LINK-LOCAL Link-localIPv6address.In
X:X::X:XformatIPv6AddressinX:X::X:X
format
CommandMode
InterfaceConfiguration
Default
Thereisnotanyipv6addressontheinterfacebydefault.
Usage
Usethiscommandtoconfigureipv6addressontheinterface.Usethenoformofthis
commandtoremovetheipv6address.Thisconfigurationshouldnotaffecttheipv4
functionsandotheripv6configurationontheinterface.
ThemaximumcountoftheLink-localaddressis1;themaximumcountoftheglobal
addressaddressis8.
Usethiscommandwiththekeywordautolink-localtoautomaticallygeneratealink-
localaddress,ifthereisnolink-localaddressonthisinterface.Usethenoformof
thiscommandwiththekeywordautolink-localtoremovetheautomatically
generatedlink-localaddress,ifthereisonlythatautomaticallygeneratedlink-local
addressleftonthisinterface.1102Usethiscommandwithaspecifiedipv6address(e.g.3ffe:506::1/48)toconfigurea
globalunicastipv6address.Usethiscommandwiththekeywordeui-64togenerate
interfaceidautomaticallybytheeui-64algorithm.Theglobaladdressshouldnotbe
same.Usethenoformofthiscommandtheremovethespecifiedipv6globalunicast
address.
Ifthereisnolink-localaddressontheinterface,systemshouldautomatically
generateonewhenconfigureaglobalunicastipv6address.
Usethiscommandwithaspecifiedipv6address(e.g.fe80::1)andakeywordlink-
localtoconfigurealink-localaddress.Usethenoformofthiscommandwiththe
specifiedipv6addressandthekeywordlink-localtoremovethespecifiedipv6link-
localaddress.Thespecifiedlink-localaddresshasahigherprioritythanthe
automaticallygeneratedthelink-localaddress,thatcanoverwritetheautomatically
generatedone.
Usethenoformofthiscommandwithoutanyparametersorkeywordstoremoveall
ipv6addressesontheinterface,includeipv6globaladdressesandlink-local
addresses.
Examples
Thefollowingexampleshowshowtoconfigurelinklocaladdressandglobalunicast
address:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6addressfe80::1233link-local
Switch(config-if)#ipv6address3001:1::1234/64
RelatedCommands
showipv6interface
7.3.5showipv6route
CommandPurpose
Usethiscommandtoshowtheipv6routes.
CommandSyntax
showipv6route(vrfNAME|)(database|)1103showipv6route(vrfNAME|)(database|)(bgp|connected|ospf|rip|static)
showipv6route(vrfNAME|)IPV6_ADDRESS
showipv6route(vrfNAME|)IPV6_PREFIX
showipv6route(vrfNAME|)
showipv6route(vrfNAME|)summary
Parameter ParameterDescriptionParameterValue
IPV6_PREFIX IPv6prefixinX:X::X:X/M
formatIPv6Addressandmask
lengthinX:X::X:X/M
format
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoshowtheipv6routes
Examples
Thefollowingexampleshowstheresultofthiscommand:
Switch#showipv6route
IPv6RoutingTable
Codes:C-connected,S-static,R-RIP,O-OSPF,I-IS-IS,B-BGP
[*]-[AD/Metric]
Timers:Uptime
S3001::/64[1/0]
viafe80::1234,eth-0-2,04:09:56
C3001:1::/64
via::,eth-0-1,01:39:07
C3001:1::1234/128
via::1,eth-0-1,01:39:07
S3002::/64[1/0]
via3001::1(recursiveviafe80::1234),eth-0-2,04:09:19
C3ffe:2::/641104via::,eth-0-2,1d19h37m
C3ffe:2::10/128
via::1,eth-0-2,1d19h37m
Cfe80::/10
via::,Null0,1d19h53m
Switch#showipv6routedatabase
IPv6RoutingTable
Codes:C-connected,S-static,R-RIP,O-OSPF,I-IS-IS,B-BGP
[*]-[AD/Metric]
>-selectedroute,*-FIBroute,p-staleinfo
Timers:Uptime
S>3001::/64[1/0]
*viafe80::1234,eth-0-2,04:10:45
C>3001:1::/64
*via::,eth-0-1,01:39:56
C>3001:1::1234/128
*via::1,eth-0-1,01:39:56
S>3002::/64[1/0]
*via3001::1(recursiveviafe80::1234),eth-0-2,04:10:08
C>3ffe:2::/64
*via::,eth-0-2,1d19h37m
C>3ffe:2::10/128
*via::1,eth-0-2,1d19h37m
C>fe80::/10
*via::,Null0,1d19h54m
Switch#showipv6routestatic
IPv6RoutingTable
Codes:C-connected,S-static,R-RIP,O-OSPF,I-IS-IS,B-BGP
[*]-[AD/Metric]
Timers:Uptime
S3001::/64[1/0]
viafe80::1234,eth-0-2,04:11:42
S3002::/64[1/0]
via3001::1(recursiveviafe80::1234),eth-0-2,04:11:05
Switch#showipv6route3001::64
Routingentryfor3001::/64
Knownvia"static",distance1,metric0,best
Lastupdate04:12:32ago
*viafe80::1234,eth-0-2
Switch#showipv6route3001::64/64
Routingentryfor3001::/64
Knownvia"static",distance1,metric0,best
Lastupdate04:13:03ago
*viafe80::1234,eth-0-2
Switch#showipv6routesummary1105IPv6routingtablenameisDefault-IPv6-Routing-Table(0)
IPv6routingtablemaximum-pathsis8
Routesourcenetworks
connected5
static2
Total7
RelatedCommands
ipv6route
7.3.6showipv6interface
CommandPurpose
Usethiscommandtoshowtheipv6ipv6statuesontheinterface.
CommandSyntax
showipv6interface(IFNAME|)(brief|)
Parameter ParameterDescriptionParameterValue
IFNAME IPv6interfacestatusand
configurationSupport
physical/aggregation/loopb
ack/vlan/tunnelports
brief BriefsummaryofIPv6
statusandconfiguration-
CommandMode
PrivilegedEXEC
Default
None
Usage
None1106Examples
Thefollowingexampleshowstheresultofthiscommand:
Switch#showipv6interfaceeth-0-1
Interfaceeth-0-1
Interfacecurrentstate:UP
Themaximumtransmitunitis1500bytes
IPv6isenabled,link-localaddressisfe80::1233
Globalunicastaddress(es):
3001:1::1234,subnetis3001:1::/64
Joinedgroupaddress(es):
ff02::1:ff00:1234
ff02::1:ff00:0
ff02::1:ff00:1233
ff02::2
ff02::1
ICMPerrormessageslimitedtooneevery2000milliseconds
ICMPredirectsarealwayssent
NDDADisenabled,numberofDADattempts:1
NDrouteradvertisementisdisabled
NDreachabletimeis30000milliseconds
NDadvertisedreachabletimeis0milliseconds
NDretransmitintervalis1000milliseconds
NDadvertisedretransmitintervalis0milliseconds
NDrouteradvertisementsmaxinterval:600secs
NDrouteradvertisementsmininterval:198secs
NDrouteradvertisementslivefor1800seconds
NDrouteradvertisementshop-limitis0
Hostsusestatelessautoconfigforaddresses.
Switch#showipv6interfaceeth-0-1brief
*down:administrativelydown
InterfaceStatusProtocolIPv6address
eth-0-1upup3001:1::1234
fe80::1233
Switch#showipv6interfaceeth-0-1brief
*down:administrativelydown
InterfaceStatusProtocolIPv6address
eth-0-1upup3001:1::1234
fe80::1233
RelatedCommands
ipv6enable
ipv6address11077.3.7ipv6verifyunicastreverse-path
CommandPurpose
Usethiscommandtoenableurpf(unicastreversepathforwarding)ontheinterface.
Usethenoformofthiscommandtodisableurpfontheinterface.
CommandSyntax
ipv6verifyunicastreverse-path
noipv6verifyunicastreverse-path
CommandMode
InterfaceConfiguration
Default
Urpfisdisablingontheinterfacebydefault.
Usage
Usethiscommandtoenableurpf(unicastreversepathforwarding)ontheinterface.
Usethenoformofthiscommandtodisableurpfontheinterface.
Examples
ThefollowingexampleshowshowtoenableURPFforIPv6:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6verifyunicastreverse-path
RelatedCommands
showipv6interface11087.3.8ipv6icmperror-interval
CommandPurpose
Usethiscommandtosettheipv6icmperror-interval.Usethenoformofthis
commandtosettheipv6icmperror-intervaltodefault.
CommandSyntax
noipv6icmperror-intervalERROR_INTERVAL
noipv6icmperror-interval
Parameter ParameterDescriptionParameterValue
error-interval ICMPv6Errormessage
interval.02147483647ms
CommandMode
GlobalConfiguration
Default
1000milliseconds.
Usage
None
Examples
ThefollowingexampleshowshowtosettheICMPv6errorinterval:
Switch#configureterminal
Switch(config)#ipv6icmperror-interval2000
RelatedCommands
None11097.3.9clearipv6routestatic
CommandPurpose
Usethiscommandtoclearstaticipv6routes.
CommandSyntax
clearipv6routestatic
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoclearipv6staticroutes:
Switch#clearipv6routestatic
RelatedCommands
None
7.4Ipv6Prefix-listCommands
7.4.1ipv6prefix-list
CommandPurpose
Tocreateaipv6prefixlistoraddaprefix-listentry,usetheipv6prefix-listcommand
inglobalconfigurationmode.
Todeleteaprefix-listoranentry,usethenoformofthiscommand.1110CommandSyntax
ipv6prefix-listWORD[seqSEQUENCE-NUMBER](deny|permit)(any|IPv6-
ADDRESS/M[geGE-LENGTH][leLE-LENGTH])
noipv6prefix-listWORD[seqSEQUENCE-NUMBER](deny|permit)(any|IPv6-
ADDRESS/M[geGE-LENGTH][leLE-LENGTH])
noipv6prefix-listWORD[seqSEQUENCE-NUMBER]
Parameter ParameterDescriptionParameterValue
WORD Configanametoidentify
theprefixlistUpto40characters
seqSEQUENCE-
NUMBERAppliesasequence
numbertoaprefix-list
entry.Therangeof
sequencenumberthatcan
beenteredisfrom1to
65535.Ifasequence
numberisnotentered
whenconfiguringthis
command,adefault
sequencenumberingis
appliedtotheprefixlist.
Thenumber5isappliedto
thefirstprefixentry,and
subsequentunnumbered
entriesareincrementedby
51-65535
deny Deniesaccessfora
matchingcondition-
permit Permitsaccessfora
matchingcondition-1111IPv6-ADDRESS/M Configuresthenetwork
address,andthelengthof
thenetworkmaskinbits.
Thenetworknumbercan
beanyvalidIPv6address
orprefix.Thebitmaskcan
beanumberfrom0to128IPv6addressandmask
lengthbetween1-128
geGE-LENGTH (Optional)Specifiesthe
lesservalueofarange
(thefromportionofthe
rangedescription)by
applyingthege-length
argumenttotherange
specified.Thege-length
argumentrepresentsthe
minimumprefixlengthto
bematched1-128
leLE-LENGTH (Optional)Specifiesthe
greatervalueofarange
(thetoportionofthe
rangedescription)by
applyingthele-length
argumenttotherange
specified.Thele-length
argumentrepresentsthe
maximumprefixlengthto
bematched1-128
CommandMode
GlobalConfiguration
Default
Noprefixlistsarecreated.1112Usage
Theipv6prefix-listcommandisusedtoconfigureIPv6prefixfiltering.Prefixlistsare
configuredwithpermitordenykeywordstoeitherpermitordenytheprefixbasedon
thematchingcondition.AprefixlistconsistsofanIPv6addressandabitmask.The
IPv6addresscanbeglobaladdress,oralink-localaddress.Thebitmaskisentered
asanumberfrom1to128.Animplicitdenyisappliedtotrafficthatdoesnotmatch
anyprefix-listentry.Prefixlistsareconfiguredtomatchanexactprefixlengthora
prefixrange.Thegeandlekeywordsareusedtospecifyarangeoftheprefixlengths
tomatch,providingmoreflexibleconfigurationthancanbeconfiguredwithjustthe
network/lengthargument.Theprefixlistisprocessedusinganexactmatchwhen
neitherthegenorlekeywordisentered.Ifonlythegevalueisentered,therangeis
thevalueenteredforthegege-lengthargumenttoafull128-bitlength.Ifonlythele
valueisentered,therangeisfromvalueenteredforthenetwork/lengthargumentto
thelele-lengthargument.Ifboththegege-lengthandlele-lengthkeywordsand
argumentsareentered,therangefallsbetweenthevaluesusedforthege-length
andle-lengtharguments.Thefollowingformulashowsthisbehavior:
network/length<gege-length<lele-length<=128.
Aprefixlistisconfiguredwithanameand/orsequencenumber.Oneortheother
mustbeenteredwhenconfiguringthiscommand.Ifasequencenumberisnot
entered,adefaultsequencenumberof5isappliedtotheprefixlist.Andsubsequent
prefixlistentrieswillbeincrementby5(forexample,5,10,15,andonwards).Ifa
sequencenumberisenteredforthefirstprefixlistentrybutnotsubsequententries,
thenthesubsequententrieswillalsobeincrementedby5(Forexample,ifthefirst
configuredsequencenumberis3,thensubsequententrieswillbe8,13,18,and
onwards).Defaultsequencenumberscanbesuppressedbyenteringthenoformof
thiscommandwiththeseqkeyword.Prefixlistsareevaluatedstartingwiththelowest
sequencenumberandcontinuesdownthelistuntilamatchismade.Onceamatch
ismadethatcoversthenetworkthepermitordenystatementisappliedtothat
networkandtherestofthelistisnotevaluated.
Examples
Thefollowingexampleshowshowtoconfigureipv6prefix-list:Todenythedefault
route::/0:
Switch#configureterminal
Switch(config)#ipv6prefix-listabcdeny::/01113Topermittheprefix2001:db8::/64:
Switch#configureterminal
Switch(config)#ipv6prefix-listabcpermit2001:db8::/64
Toacceptamasklengthofupto64bitsinrouteswiththeprefix2001:db8::/32:
Switch#configureterminal
Switch(config)#ipv6prefix-listabcpermit2001:db8::/32le64
Todenymasklengthsgreaterthan64bitsinrouteswiththeprefix2001:db8::/32:
Switch#configureterminal
Switch(config)#ipv6prefix-listabcdeny2001:db8::/32ge64
RelatedCommands
ipv6prefix-listdescription
ipv6prefix-listsequence
showipv6prefix-list
clearipv6prefix-list
7.4.2ipv6prefix-listdescription
CommandPurpose
Toaddatextdescriptionofaipv6prefixlist,usetheipv6prefix-listdescription
commandinglobal
configurationmode.Toremovethetextdescription,usethenoformofthiscommand
CommandSyntax
ipv6prefix-listWORDdescriptionLINE
noipv6prefix-listWORDdescription[LINE]
Parameter ParameterDescriptionParameterValue
WORD Nameofprefixlist Upto40characters
LINE Thedescriptionofthis
prefix-listUpto80characters1114CommandMode
GlobalConfiguration
Default
Thereisnodescriptionforprefix-list.
Usage
Theipv6prefixlistwillbecreatedifitdidntexist.
Examples
Thefollowingexampleshowshowtoadddescription:
Switch#configureterminal
Switch(config)#ipv6prefix-listabcdescriptionPermitroutesfromcustomerA
RelatedCommands
ipv6prefix-list
ipv6prefix-listsequence
showipv6prefix-list
clearipv6prefix-list
7.4.3ipv6prefix-listsequence-number
CommandPurpose
Toenablethegenerationofsequencenumbersforentriesinaipv6prefixlist,usethe
ipv6prefix-listsequence-numbercommandinglobalconfigurationmode.Todisable
thisfunction,usethenoformofthiscommand.
CommandSyntax
ipv6prefix-listsequence-number
noipv6prefix-listsequence-number1115CommandMode
GlobalConfiguration
Default
Thiscommandhasnodefaultbehavior.
Usage
Thiscommandisusedtoenablesequence-numberdisplay.
Examples
Thefollowingexampleshowshowtoenableipv6prefix-listsequence-number:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6prefix-listsequence-number
RelatedCommands
ipv6prefix-list
showipv6prefix-list
clearipv6prefix-list
7.4.4showipv6prefix-list
CommandPurpose
Toshowipv6prefixlistinformation,usetheshowipv6prefix-listcommand.
CommandSyntax
showipv6prefix-list(summary|detail|)(WORD|)
showipv6prefix-listWORD(seqSEQUENCE-NUMBER|IPv6-ADDRESS/M
(longer|first-match|)|)
Parameter ParameterDescriptionParameterValue
summary Summaryofprefixlists-1116detail Detailofprefixlists -
WORD NameoftheprefixlistUpto40characters
seqSEQUENCE-
NUMBERsequencenumberofthe
entryintheipv6prefixlist1-65535
IPv6-ADDRESS/M IPv6prefix
<network>/<length>,e.g.,
2001:db8::/32IPv6addressandmask
lengthbetween1-128
longer Lookuplongerprefix -
first-match Firstmatchedprefix -
CommandMode
PrivilegedEXEC
Default
Thiscommandhasnodefaultbehavior.
Usage
None
Examples
Thefollowingexampleshowshowtodisplayipprefix-list:
Switch#showipv6prefix-list
ipv6prefix-listripng_pre:5entries
seq1deny2001:db8:9::/64
seq2deny2001:db8:10::/64
seq3deny2001:db8:11::/64
seq4deny2001:db8:12::/64
seq5permitany
RelatedCommands
ipv6prefix-list
clearipv6prefix-list11177.4.5clearipv6prefix-list
CommandPurpose
ToResetsthehitcountoftheprefixlistentries,usetheclearipv6prefix-listcommand.
CommandSyntax
clearipv6prefix-list(WORD(IPv6-ADDRESS/M|)|)
Parameter ParameterDescriptionParameterValue
WORD NameoftheprefixlistUpto40characters
IPv6-ADDRESS/M IPv6prefix
<network>/<length>,e.g.,
2001:db8::/32IPv6addressandmask
lengthbetween1-128
CommandMode
PrivilegedEXEC
Default
Thiscommandhasnodefaultbehavior.
Usage
None
Examples
Thefollowingexampleshowshowtoclearipv6prefix-list:
Switch(config)#clearipv6prefix-listtest
RelatedCommands
ipv6prefix-list11187.5RouteMapCommands
7.5.1route-map
CommandPurpose
Todefinetheconditionsforredistributingroutesfromoneroutingprotocolinto
another,ortoenablepolicyroutinginbgp,usetheroute-mapcommandinglobal
configurationmodeandthematchandsetcommandinroute-mapconfiguration
modes.
Todeleteanentry,usethenoformofthiscommand.
CommandSyntax
route-mapMAP-TAG[permit|deny][sequence-NUMBER]
noroute-mapMAP-TAG[permit|deny][SEQUENCE_NUMBER]
Parameter ParameterDescriptionParameterValue
MAP-TAG Ameaningfulnameforthe
routemap.Theredistribute
routerconfiguration
commandusesthisname
toreferencethisroute
map.Multipleroutemaps
maysharethesamemap
tagname.Thelengthofroute-map
nameshouldnotgreater
than20andthefirst
charactershouldbea-z,
A-Zor0-9.1119permit (Optional)Ifthematch
criteriaaremetforthis
routemap,andthepermit
keywordisspecified,the
routeisredistributedas
controlledbytheset
actions.
Ifthematchcriteriaarenot
met,andthepermit
keywordisspecified,the
nextroutemapwiththe
samemaptagistested.If
aroutepassesnoneofthe
matchcriteriaforthesetof
routemapssharingthe
samename,itisnot
redistributedbythatset.-
deny (Optional)Ifthematch
criteriaaremetforthe
routemapandthedeny
keywordisspecified,the
routeisnotredistributed-
SEQUENCE_NUMBER(Optional)Numberthat
indicatesthepositiona
newroutemapwillhavein
thelistofroutemaps
alreadyconfiguredwiththe
samename.Ifgivenwith
thenoformofthis
command,thepositionof
theroutemapshouldbe
deleted1-65535
CommandMode
GlobalConfiguration1120Default
Thepermitkeywordisthedefault.
Usage
None
Examples
Thefollowingexampleshowshowtocreatearoute-mapandenterroute-map
configurationmode:
Switch#configureterminal
Switch(config)#route-maprip-to-ospfpermit
Switch(config-route-map)#matchmetric1
Switch(config-route-map)#setmetric2
RelatedCommands
matchas-path
matchcommunity
matchinterface
matchipaddress
matchlocal-preference
matchmetric
matchorigin
matchroute-type
matchtag
setaggregator
setas-path
setatomic-aggregate
setcomm-list
setcommunity1121setdampening
setextcommunity
setipaddress
setlocal-preference
setmetric
setmetric-type
setorigin
setoriginator-id
settag
setvpnv4
setweight
7.5.2matchas-path
CommandPurpose
Usethiscommandtomatchanautonomoussystempathaccesslist.
Usethenoparameterwiththiscommandtoremoveapathlistentry.
Thematchas-pathcommandspecifiestheautonomoussystempathtobematched.
IfthereisamatchforthespecifiedASpath,andpermitisspecified,therouteis
redistributedorcontrolled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,
anddenyisspecified,therouteisnotredistributedorcontrolled.Ifthematchcriteria
arenotmetthentherouteisneitheracceptednorforwarded,irrespectiveofpermitor
denyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutes,dependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchas-pathLISTNAME1122nomatchas-path
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiesasautonomous
systempathaccesslist
nameUpto20characters
CommandMode
Route-mapConfiguration
Default
Nomatchas-pathisspecifiedbydefault.
Usage
ThiscommandisvalidonlyforBGP.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutedeny34
Switch(config-route-map)#matchas-pathmyaccesslist
RelatedCommands
matchmetric
matchipaddress
matchcommunity
setas-path
setcommunity
7.5.3matchcommunity
CommandPurpose
Usethiscommandtospecifythecommunitytobematched.1123Usethenoparameterwiththiscommandtoremovethecommunitylistentry.
Communitiesareusedtogroupandfilterroutes.Theyaredesignedtoprovidethe
abilitytoapplypoliciestolargenumbersofroutesbyusingmatchandsetcommands.
Communitylistsareusedtoidentifyandfilterroutesbytheircommonattributes.
Usethematchcommunitycommandtoallowmatchingbasedoncommunitylists.
Thevaluessetbythematchcommunitycommandoverridestheglobalvalues.The
routethatdoesnotmatchatleastonematchclauseisignored.
CommandSyntax
matchcommunityWORD
nomatchcommunity
Parameter ParameterDescriptionParameterValue
WORD SpecifiestheCommunity-
listnameUpto40characters
CommandMode
Route-mapConfiguration
Default
Nomatchcommunityisspecifiedbydefault.
Usage
ThiscommandisvalidonlyforBGP.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#matchcommunitymylist
RelatedCommands
matchipaddress1124matchas-path
setas-path
setcommunity
matchmetric
7.5.4matchinterface
CommandPurpose
Usethiscommandtodefinetheinterfacematchcriterion.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion..
Thematchinterfacecommandspecifiesthenext-hopinterfacenameofaroutetobe
matched.
CommandSyntax
matchinterfaceIFNAME
nomatchinterface
Parameter ParameterDescriptionParameterValue
IFNAME Astringthatspecifiesthe
interfaceformatchingSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
Route-mapConfiguration
Default
Nomatchinterfaceisspecifiedbydefault.
Usage
None1125Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchinterfaceeth-0-1
RelatedCommands
matchtag
matchroute-typeexternal
7.5.5matchipv6address
CommandPurpose
Usethiscommandtospecifythematchaddressofroute.
Usethenoparameterwiththiscommandtoremovethematchipv6addressentry.
Thematchipv6addresscommandspecifiestheIPv6addresstobematched.Ifthere
isamatchforthespecifiedIPv6address,andpermitisspecified,therouteis
redistributedorcontrolled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,
anddenyisspecifiedthentherouteisnotredistributedorcontrolled.Ifthematch
criteriaarenotmet,therouteisneitheracceptednorforwarded,irrespectiveofpermit
ordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutes,dependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipv6addressACCESSSLISTID
nomatchipv6address
Parameter ParameterDescriptionParameterValue
ACCESSSLISTID SpecifyaIPv6access-list
name,upto20charactersUpto20characters1126CommandMode
Route-mapConfiguration
Default
Nomatchipv6addressisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFv3andRIPngonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#matchipv6addressList1
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchmetric
7.5.6matchipv6addressprefix-list
CommandPurpose
Usethiscommandtomatchentriesofipv6prefix-lists.
Usethenoparameterwiththiscommandtodisablethisfunction
Thiscommandspecifiestheentriesofprefix-liststobematched.Ifthereisamatch
forthespecifiedipv6prefix-listentries,andpermitisspecified,therouteis
redistributedorcontrolled,asspecifiedbythesetaction.Ifthematchcriteriaaremet,
anddenyisspecified,therouteisnotredistributedorcontrolled.Ifthematchcriteria
arenotmet,therouteisneitheracceptednorforwarded,irrespectiveofpermitor
denyspecifications.1127Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipv6addressprefix-listLISTNAME
nomatchipv6addressprefix-listLISTNAME|
Parameter ParameterDescriptionParameterValue
LISTNAME SpecifiestheIPv6prefix
listnameUpto40characters
CommandMode
Route-mapConfiguration
Default
Nomatchipv6addressprefix-listisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFv3andRIPngonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#matchipv6addressprefix-listmylist
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity1128matchmetric
7.5.7matchipv6next-hop
CommandPurpose
Usethiscommandtospecifyaipv6next-hopaddresstobematchedinaroute-map.
Usethenoparameterwiththiscommandtodisablethisfunction.
Thematchipv6next-hopcommandspecifiesthenext-hopaddresstobematched.If
thereisamatchforthespecifiednext-hopaddress,andpermitisspecified,theroute
isredistributedorcontrolledasspecifiedbythesetaction.Ifthematchcriteriaare
met,anddenyisspecified,therouteisnotredistributedorcontrolled.Ifthematch
criteriaarenotmet,therouteisneitheracceptednorforwarded,irrespectiveofpermit
ordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchipv6next-hop(IPV6_ADDR|ACCESSSLISTID)
nomatchipv6next-hop[IPv6-ADDRESS|ACCESSSLISTID]
Parameter ParameterDescriptionParameterValue
IPV6_ADDR SpecifyaIPv6address,
e.g.,2001:db8::1IPv6Address
ACCESSSLISTID SpecifyaIPv6access-list
nameupto20characters
CommandMode
Route-mapConfiguration1129Default
Nomatchipv6next-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFv3andRIPngonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#matchipv6next-hopmylist
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchmetric
7.5.8matchipv6next-hopprefix-list
CommandPurpose
Usethiscommandtospecifythenext-hopIPv6addressmatchcriterion,usingthe
prefix-list.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion.
Usethematchipv6next-hopprefix-listcommandtomatchthenext-hopIPv6address
ofaroute.
CommandSyntax
matchipv6next-hopprefix-listLISTNAME
nomatchipv6next-hopprefix-list[LISTNAME]
Parameter ParameterDescriptionParameterValue1130LISTNAME Astringspecifyingtheipv6
prefix-listname-
CommandMode
Route-mapConfiguration
Default
Nomatchipv6next-hopprefix-listisspecifiedbydefault.
Usage
ThiscommandisvalidforRIPngonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#matchipv6next-hopprefix-listlist1
RelatedCommands
matchmetric
matchinterface
matchipnext-hop
7.5.9matchlocal-preference
CommandPurpose
Usethiscommandtospecifythelocal-preferencematchcriterion.
Usethenoparameterwiththiscommandtoremovethespecifiedmatchcriterion.
Usethematchlocal-preferencecommandtomatchthelocalpreferenceofaroute.
CommandSyntax
matchlocal-preferenceLOCAL-PREFERENCE
nomatchlocal-preference1131Parameter ParameterDescriptionParameterValue
LOCAL-PREFERENCESpeciesthepreference
value0-4294967295
CommandMode
Route-mapConfiguration
Default
Nomatchlocal-preferenceisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#matchlocal-preference100
RelatedCommands
matchcommunity
matchas-path
setas-path
setcommunity
matchipnext-hop
7.5.10matchmetric
CommandPurpose
Usethiscommandtomatchametricofaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.1132Thematchmetriccommandspecifiesthemetrictobematched.Ifthereisamatchfor
thespecifiedmetric,andpermitisspecified,therouteisredistributedorcontrolledas
specifiedbythesetaction.Ifthematchcriteriaaremet,anddenyisspecified,the
routeisnotredistributedorcontrolled.Ifthematchcriteriaarenotmet,therouteis
neitheracceptednorforwarded,irrespectiveofpermitordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchmetricMETRICVAL
nomatchmetric
Parameter ParameterDescriptionParameterValue
METRICVAL metricvalue 0-4294967295
CommandMode
Route-mapConfiguration
Default
Nomatchmetricisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#nomatchmetric
RelatedCommands
matchcommunity1133matchas-path
setas-path
setcommunity
matchipnext-hop
7.5.11matchorigin
CommandPurpose
Usethiscommandtomatchorigincode.
Usethenoparameterwiththiscommandtodisablethismatching.
Theoriginattributedefinestheoriginofthepathinformation.Theegpparameteris
indicatedasaneintheroutingtable,anditindicatesthattheoriginoftheinformation
islearnedviaExteriorGatewayProtocol.Theigpparameterisindicatedasaniinthe
routingtable,anditindicatestheoriginofthepathinformationisinteriortothe
originatingAS.
Theincompleteparameterisindicatedasa?intheroutingtable,andindicatesthat
theoriginofthepathinformationisunknownorlearnedthroughothermeans.Ifa
staticrouteisredistributedintoBGP,theoriginoftherouteisincomplete.
Thematchorigincommandspecifiestheorigintobematched.Ifthereisamatchfor
thespecifiedorigin,andpermitisspecified,therouteisredistributedorcontrolledas
specifiedbythesetaction.Ifthematchcriteriaaremet,anddenyisspecified,the
routeisnotredistributedorcontrolled.Ifthematchcriteriaarenotmet,therouteis
neitheracceptednorforwarded,irrespectiveofpermitordenyspecifications.
Theroutespecifiedbythepoliciesmightnotbethesameasspecifiedbytherouting
protocols.Settingpoliciesenablepacketstotakedifferentroutesdependingontheir
lengthorcontent.Packetforwardingbasedonconfiguredpoliciesoverridespacket
forwardingspecifiedinroutingtables.
CommandSyntax
matchorigin{egp|igp|incomplete}
nomatchorigin1134Parameter ParameterDescriptionParameterValue
egp learnedfromEGP -
igp LocalIGP -
incomplete Unknownheritage -
CommandMode
Route-mapConfiguration
Default
Nomatchoriginisspecifiedbydefault.
Usage
None
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutedeny34
Switch(config-route-map)#matchoriginegp
RelatedCommands
None
7.5.12matchroute-type
CommandPurpose
Usethiscommandtomatchspecifiedexternalroutetype.
Usethenoparameterwiththiscommandtoturnoffthematching.
Usethematchroute-typeexternalcommandtomatchspecificexternalroutetypes.
AS-externalLSAiseitherType-1orType-2.Externaltype-1matchesonlyType1
externalroutes,andexternaltype-2matchesonlyType2externalroutes.1135CommandSyntax
matchroute-typeexternal{type-1|type-2}
nomatchroute-typeexternal
Parameter ParameterDescriptionParameterValue
type-1 MatchOSPFExternal
Type1metrics-
type-2 MatchOSPFExternal
Type1metrics-
CommandMode
Route-mapConfiguration
Default
Nomatchroute-typeisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchroute-typeexternaltype-1
RelatedCommands
matchtag
7.5.13matchtag
CommandPurpose
Usethiscommandtomatchthespecifiedtagvalue.
Usethenoparameterwiththiscommandtoturnoffthedeclaration.1136Usethematchtagcommandtomatchthespecifiedtagvalue.
CommandSyntax
matchtagTAG
nomatchtag
Parameter ParameterDescriptionParameterValue
TAG Specifiesthetagvalue0-4294967295
CommandMode
Route-mapConfiguration
Default
Nomatchtagisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymap1permit10
Switch(config-route-map)#matchtag100
RelatedCommands
matchmetric
matchroute-typeexternal
7.5.14setipv6aggregator
CommandPurpose
UsethiscommandtosettheASnumberfortheroutemapandrouterID.
Usethenoparameterwiththiscommandtodisablethisfunction.1137AnAutonomousSystem(AS)isacollectionofnetworksunderacommon
administrationsharingacommonroutingstrategy.Itissubdividedbyareas,andis
assignedaunique16-bitnumber.Usethesetaggregatorcommandto
assignanASnumberfortheaggregator.
Tousethesetaggregatorcommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setipv6aggregatorasASNUMIPV6_ADDR
nosetipv6aggregator
Parameter ParameterDescriptionParameterValue
ASNUM SpecifiestheASnumber
ofaggregator1-65535
IPV6_ADDR SpecifiestheIPv6address
ofaggregatorIPv6Address
CommandMode
Route-mapConfiguration
Default
Nosetaggregatorisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.1138Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#setaggregatoras432001:db8::1
RelatedCommands
None
7.5.15setas-path
CommandPurpose
Usethiscommandtomodifyanautonomoussystempathforaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.
Usethesetas-pathcommandtospecifyanautonomoussystempath.Byspecifying
thelengthoftheAS-Path,therouterinfluencesthebestpathselectionbyaneighbor.
UsetheprependparameterwiththiscommandtoprependanASpathstringto
routesincreasingtheASpathlength.
Tousethesetas-pathcommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setas-pathprependASN[ASN]
nosetas-path
Parameter ParameterDescriptionParameterValue
ASN Systemprependsthis
numbertotheASpath1-42949672951139prepend Prependstheautonomous
systempath-
CommandMode
Route-mapConfiguration
Default
Nosetas-pathisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmyroutepermit3
Switch(config-route-map)#setas-pathprepend824
RelatedCommands
None
7.5.16setatomic-aggregate
CommandPurpose
Usethiscommandtosetanatomicaggregateattribute.
Usethenoparameterwiththiscommandtodisablethisfunction
Tousethesetatomicaggregatecommand,youmustfirsthaveamatchclause.
Matchandsetcommandssettheconditionsforredistributingroutesfromonerouting
protocoltoanother.Thematchcommandspecifiesthematchcriteriaunderwhich
redistributionisallowedforthecurrentroute-map.Thesetcommandspecifiestheset
redistributionactionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.1140CommandSyntax
setatomic-aggregate
nosetatomic-aggregate
CommandMode
Route-mapConfiguration
Default
Nosetatomic-aggregateisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setatomic-aggregate
RelatedCommands
None
7.5.17setcomm-listdelete
CommandPurpose
Usethiscommandtodeletethematchedcommunitiesfromthecommunityattribute
ofaninboundoroutboundupdatewhenapplyingroute-map.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
setcomm-list{STANDARD|EXPANDED|WORD}delete
nosetcomm-list1141Parameter ParameterDescriptionParameterValue
STANDARD Standardcommunity-list
number1-99
EXPANDED Expandedcommunity-list
number100-199
WORD NameoftheCommunity-
listupto255characters
delete Deletematching
communities-
CommandMode
Route-mapConfiguration
Default
Nosetcomm-listisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcomm-list34delete
RelatedCommands
None
7.5.18setcommunity
CommandPurpose
Usethiscommandtosetthecommunitiesattribute.
Usethenoparameterwiththiscommandtodeletetheentry.1142Usethiscommandtosetthecommunityattributeandgroupdestinationsinacertain
community,aswellas,applyroutingdecisionsaccordingtothosecommunities.
Tousethesetcommunitycommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setcommunity[AA:NN|internet|local-AS|no-advertise|no-export]
setcommunitynone
nosetcommunity
Parameter ParameterDescriptionParameterValue
AA:NN AA:NN:Specifiesthe
communitynumberinthis
format
AA=TheASnumber
NN=Thenumber
assignedtocommunitySupport2bytesAS
numberand4bytes
communityID
internet SpecifiestheInternet
(well-knowncommunity)-
local-AS Specifiesnosending
outsidethelocalAS(well-
knowncommunity)-
no-advertise Specifiesnoadvertisement
ofthisroutetoanypeer
(well-knowncommunity)-1143no-export Specifiesnoadvertisement
ofthisroutetonextAS
(well-knowncommunity)-
none Removesthecommunity
attributefromtheprefixes
thatpasstheroute-map-
CommandMode
Route-mapConfiguration
Default
Nosetcommunityisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Thefollowingexamplesshowtheuseofthesetcommunitycommandwithdifferent
parameters:
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunityno-exportno-advertise
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunityno-advertise
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setcommunity10:0123:3412:14no-export
RelatedCommands
None11447.5.19setdampening
CommandPurpose
Usethiscommandtoenableroute-flapdampeningandsetparameters.
Usethenoparameterwiththiscommandtodisableit.
Settheunreachabilityhalf-lifetimetobeequalto,orgreaterthan,reachabilityhalf-
lifetime.Thesuppress-limitvaluemustbegreaterthanorequaltothereuselimit
value.
CommandSyntax
setdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
[UNREACHTIME]
nosetdampening
Parameter ParameterDescriptionParameterValue
REACHTIME Specifiesthereachability
half-lifetimeinminutes.
Thetimeforthepenaltyto
decreasetoone-halfofits
currentvalue.Thedefault
is15minutes1-45
REUSE Specifiesthereuse-limit
value.Whenthepenalty
forasuppressedroute
decaysbelowthereuse
value,theroutesbecome
unsuppressed.Thedefault
reuselimitis7501-200001145SUPPRESS Specifiesthesuppress-
limitvalue.Whenthe
penaltyforaroute
exceedsthesuppress
value,therouteis
suppressed.Thedefault
suppresslimitis20001-20000
MAXSUPPRESS Specifiesthemax-
suppress-time.Maximum
timethatadampened
routeissuppressed.The
defaultmax-suppress
valueis4timesthehalf-
lifetime(60minutes)1-255
UNREACHTIME Specifiestheun-
reachabilityhalf-lifetime
forpenalty,inminutes.The
defaultvalueis15minutes1-45
CommandMode
Route-mapConfiguration
Default
Referencetothesyntaxdescriptionabove.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapR1permit24
Switch(config-route-map)#setdampening20333534301146RelatedCommands
None
7.5.20setextcommunity
CommandPurpose
Usethiscommandtosetanextendedcommunityattribute.
Usethenoparameterwiththiscommandtodisablethisfunction
Tousethesetextcommunitycommand,youmustfirsthaveamatchclause.Match
andsetcommandssettheconditionsforredistributingroutesfromonerouting
protocoltoanother.Thematchcommandspecifiesthematchcriteriaunderwhich
redistributionisallowedforthecurrentroute-map.Thesetcommandspecifiestheset
redistributionactionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setextcommunity{rt|soo}EXTCOMMNUMBER[EXTCOMMNUMBER]
nosetextcommunity{rt|soo}
Parameter ParameterDescriptionParameterValue
rt Specifiestheroutetarget
oftheextendedcommunity-
soo Specifiesthesite-of-origin
oftheextendedcommunity-
EXTCOMMNUMBER ASN:NN_or_IP-address:nn
VPNextendedcommunity-
ASN:NN theASnumber Support2bytesAS
numberand4bytes
communityID1147IPADDRESS theASnumberinIP
addressformIPv4Address
CommandMode
Route-mapConfiguration
Default
Nosetextcommunityisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunityrt06:01
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunityrt0.0.0.6:01
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setextcommunitysoo06:01
Switch#configureterminal
Switch(config-route-map)#route-maprmap1permit3
Switch(config-route-map)#setextcommunitysoo0.0.0.6:01
RelatedCommands
None
7.5.21setipv6next-hop
CommandPurpose
Usethiscommandtosetthespecifiednext-hopipv6addressvalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthenext-hopIPv6addresstotheroutes.1148CommandSyntax
setipv6next-hop[local]IPV6_ADDR
nosetipv6next-hop[local]
Parameter ParameterDescriptionParameterValue
local Link-localaddress -
IPV6_ADDR SpecifiestheIPv6address
ofthenext-hopIPv6Address
CommandMode
Route-mapConfiguration
Default
Nosetipv6next-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFv3,andRIPngonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setipv6next-hop2001:db8::1
RelatedCommands
None
7.5.22setlocal-preference
CommandPurpose
Usethiscommandtosetthespecifiedlocal-preferencevalue.
Usethenoparameterwiththiscommandtoturnoffthesetting.
Usethiscommandtosetthelocal-preferencevalueoftheroutes1149CommandSyntax
setlocal-preferenceLOCAL-PREFERENCE
nosetlocal-preference
Parameter ParameterDescriptionParameterValue
LOCAL-PREFERENCESpeciesthepreference
value0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetlocal-preferenceisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-mapmymappermit3
Switch(config-route-map)#setlocal-preference100
RelatedCommands
None
7.5.23setmetric
CommandPurpose
Usethiscommandtosetametricvalueforaroute.
Usethenoparameterwiththiscommandtodisablethisfunction.
Thiscommandsetsthemetricvalueforaroute,andinfluencesexternalneighbors
aboutthepreferredpathintoanAutonomousSystem(AS).Thepreferredpathisthe
onewithalowermetricvalue.Aroutercomparesmetricsforpathsfromneighborsin1150thesameASs.TocomparemetricsfromneighborscomingfromdifferentASs,use
thebgpalways-compare-medcommand.
Tousethesetmetriccommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setmetricMETRICVAL
nosetmetric
Parameter ParameterDescriptionParameterValue
METRICVAL metricvalue 0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosetmetricisspecifiedbydefault.
Usage
ThiscommandisvalidforBGP,OSPFandRIP.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setmetric600
RelatedCommands
None11517.5.24setmetric-type
CommandPurpose
Usethiscommandtosetthemetrictypeforthedestinationroutingprotocol.
Usethenoparameterwiththiscommandtoreturntothedefault.
ThiscommandsetsthetypetoeitherType-1orType-2intheAS-external-LSAwhen
theroute-mapmatchesthecondition.
CommandSyntax
setmetric-type{TYPE1|TYPE2}
nosetmetric-type
Parameter ParameterDescriptionParameterValue
type1 Selecttosetexternaltype
1metric-
type2 Selecttosetexternaltype
2metric-
CommandMode
Route-mapConfiguration
Default
Nosetmetric-typeisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setmetric-type11152RelatedCommands
None
7.5.25setorigin
CommandPurpose
UsethiscommandtosettheBGPorigincode.
Usethenoparameterwiththiscommandtodeleteanentry.
Theoriginattributedefinestheoriginofthepathinformation.Thethreeparameters
withthiscommandindicatethreedifferentvalues.IGPisinteriortotheoriginatingAS.
ThishappensifIGPisredistributedintotheBGP.EGPislearnedthroughanExterior
GatewayProtocol.Incompleteisunknownorlearnedthroughsomeothermeans.
ThishappenswhenstaticrouteisredistributedinBGPandtheoriginoftherouteis
incomplete.
Tousethesetorigincommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setorigin{egp|igp|incomplete}
nosetorigin
Parameter ParameterDescriptionParameterValue
egp SpecifiesaremoteEGP
system-
igp AlocalIGPsystem -
incomplete Specifiesasystemof
unknownheritage-1153CommandMode
Route-mapConfiguration
Default
Nosetoriginisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setoriginegp
RelatedCommands
None
7.5.26setipv6originator-id
CommandPurpose
UsethiscommandtosettheoriginatorIDattribute.
Usethenoparameterwiththiscommandtodisablethisfunction
Tousethesetoriginator-idcommand,youmustfirsthaveamatchclause.Matchand
setcommandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setipv6originator-idIPV6_ADDR1154nosetipv6originator-id
Parameter ParameterDescriptionParameterValue
IPV6_ADDR SpecifiestheIPv6address
oforiginatorIPv6Address
CommandMode
Route-mapConfiguration
Default
Nosetoriginator-idisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setipv6originator-id2001:db8::1
RelatedCommands
None
7.5.27settag
CommandPurpose
Usethiscommandtosetaspecifiedtagvalue.
Usethenoparameterwiththiscommandtoreturntothedefault.
Taginthiscommandistheroutetagwhichislabeledbyanotherroutingprotocol
(BGPorotherIGPwhenredistributing),becauseAS-external-LSAhasaroute-tag
fieldinitsLSAs.Also,withusingroute-map,ZebOScantagtheLSAswiththe
appropriatetagvalue.Sometimes,thetagmatcheswithusingroute-map,and
sometimes,thevalue1155maybeusedbyanotherapplication.
CommandSyntax
settagTAGVALUE
nosettag
Parameter ParameterDescriptionParameterValue
TAGVALUE Tagvaluefordestination
routingprotocol.0-4294967295
CommandMode
Route-mapConfiguration
Default
Nosettagisspecifiedbydefault.
Usage
ThiscommandisvalidforOSPFandRIPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#settag6
RelatedCommands
redistribute
default-information
7.5.28setvpnv6next-hop
CommandPurpose
UsethiscommandtosetaVPNv6next-hopaddress.
Usethenoparameterwiththiscommandtodisablethisfunction1156Tousethesetvpn6-hext-hopcommand,youmustfirsthaveamatchclause.Match
andsetcommandssettheconditionsforredistributingroutesfromonerouting
protocoltoanother.Thematchcommandspecifiesthematchcriteriaunderwhich
redistributionisallowedforthecurrentroute-map.Thesetcommandspecifiestheset
redistributionactionstobeperformed,ifthematchcriteriaaremet.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setvpnv6next-hopIPV6_ADDR
nosetvpnv6next-hop
Parameter ParameterDescriptionParameterValue
IPV6_ADDR SpecifiestheIPv6address
oforiginatorIPv6Address
CommandMode
Route-mapConfiguration
Default
Nosetvpnv6next-hopisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setvpnv6next-hop2001:db8::1
RelatedCommands
None11577.5.29setweight
CommandPurpose
Usethiscommandtosetweightsfortheroutingtable.
Usethenoparameterwiththiscommandtodeleteanentry.
Theweightvalueisusedtoassistinbestpathselection.Itisassignedlocallytoa
router.Whenthereareseveralrouteswithacommondestination,therouteswitha
higherweightvaluearepreferred.
Tousethesetweightcommand,youmustfirsthaveamatchclause.Matchandset
commandssettheconditionsforredistributingroutesfromoneroutingprotocolto
another.Thematchcommandspecifiesthematchcriteriaunderwhichredistribution
isallowedforthecurrentroute-map.Thesetcommandspecifiesthesetredistribution
actionstobeperformed,ifthematchcriteriaaremet
matchas-path10
setweight400
Intheaboveconfiguration,allroutesthatapplytoaccess-list10willhavetheweight
setat400.
Ifthepacketsdonotmatchanyofthedefinedcriteria,theyareroutedthroughthe
normalroutingprocess.
CommandSyntax
setweightWEIGHT
nosetweight
Parameter ParameterDescriptionParameterValue
WEIGHT Specifiestheweightvalue0-4294967295
CommandMode
Route-mapConfiguration1158Default
Nosetweightisspecifiedbydefault.
Usage
ThiscommandisvalidforBGPonly.
Examples
Switch#configureterminal
Switch(config)#route-maprmap1permit3
Switch(config-route-map)#setweight60
RelatedCommands
matchas-path
7.5.30showroute-map
CommandPurpose
Usethiscommandtodisplayuserreadableroute-mapinformation.
CommandSyntax
showroute-map[NAME]
Parameter ParameterDescriptionParameterValue
NAME route-mapname Thelengthofroute-map
nameshouldnotgreater
than20andthefirst
charactershouldbea-z,
A-Zor0-9.
CommandMode
PrivilegedEXEC1159Default
None
Usage
None
Examples
Switch1#showroute-map
route-mapabc,permit,sequence10
Matchclauses:
ipaddressacl1
Setclauses:
local-preference200
route-mapabc,permit,sequence20
Matchclauses:
Setclauses:
RelatedCommands
route-map
7.6IPv6BGPCommands
7.6.1address-family
CommandPurpose
UsethiscommandtoentertheIPv6address-familycommandmode.
CommandSyntax
address-familyipv6(unicast|)
Parameter ParameterDescriptionParameterValue
unicast Specifiesunicastprefixes.-
CommandMode
RouterConfiguration1160Default
None
Usage
Usetheaddressfamilycommandtoentertheaddressfamilymodeallowing
configurationofaddress-familyspecificparameters.
ToleavetheaddressfamilymodeandreturntotheConfiguremodeusetheexit-
address-familycommand.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)address-familyipv6
RelatedCommands
exit-address-family
7.6.2aggregate-address
CommandPurpose
UsethiscommandtoconfigureBGPaggregateentries.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
(no)aggregate-addressIPADDRESS{summary-only|as-set}
Parameter ParameterDescriptionParameterValue
IPV6_ADDR X:X::X:X/MSpecifiesthe
aggregateprefixIPv6address
summary-only Filtersmorespecificroutes
fromupdates.-1161as-set GeneratesASsetpath
information-
CommandMode
AddressFamilyConfiguration
Default
Disabled
Usage
Aggregatesareusedtominimizethesizeofroutingtables.Aggregationcombines
thecharacteristicsofseveraldifferentroutesandadvertisesasingleroute.The
aggregate-addresscommandcreatesanaggregateentryintheBGProutingtableif
anymore-specificBGProutesareavailableinthespecifiedrange.Usingthe
summary-onlyparameteradvertisestheprefixonly,suppressingthemore-specific
routestoallneighbors.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#aggregate-address2018::1/64as-setsummary-only
RelatedCommands
N/A
7.6.3bgpalways-compare-med
CommandPurpose
UsethiscommandtocomparetheMultiExitDiscriminator(MED)forpathsfrom
neighborsindifferentautonomoussystems.
Usethenoparameterwiththiscommandtodisallowthecomparison.1162CommandSyntax
(no)bgpalways-compare-med
CommandMode
RouterConfiguration
Default
Disabled
Usage
MultiExitDiscriminator(MED)isusedinbestpathselectionbyBGP.MEDis
comparedafterBGPattributesweight,localpreference,AS-pathandoriginhave
beencomparedandareequal.
MEDcomparisonisdoneonlyamongpathsfromthesameautonomoussystem(AS).
Usebgpalways-comparemedcommandtoallowcomparisonofMEDsfromdifferent
ASs.TheMEDparameterisusedtoselectthebestpath.ApathwithlowerMEDis
preferred.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpalways-compare-med
RelatedCommands
bgpbestpathmed
bgpbestpathas-pathignore
7.6.4bgpbestpathas-pathignore
CommandPurpose
Usethiscommandtopreventtherouterfromconsideringas-pathasafactorinthe
algorithmforchoosingaroute.1163Usethenoparameterwiththiscommandtoallowtheroutertoconsideras-pathin
choosingaroute.
CommandSyntax
(no)bgpbestpathas-pathignore
CommandMode
RouterConfiguration
Default
Disabled
Usage
None
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathas-pathignore
RelatedCommands
bgpalways-compare-med,bgpbestpathmed,bgpbestpathcompare-routerid
7.6.5bgpbestpathcompare-confed-aspath
CommandPurpose
UsethiscommandtoallowcomparingoftheconfederationASpathlength.
UsethenoparameterwiththiscommandtoreverttheselectionandignoreAS
confederationpathlengthintheBGPbestpathselection.
CommandSyntax
(no)bgpbestpathcompare-confed-aspath1164CommandMode
RouterConfiguration
Default
BGPreceivesrouteswithidenticaleBGPpathsfromeBGPpeersandselectsthefirst
routereceivedasthebestpath.
Usage
ThiscommandspecifiesthattheASconfederationpathlengthmustbeused,when
available,intheBGPbestpathdecisionprocess.Itiseffectiveonlywhenbgp
bestpathas-pathignorecommandhasnotbeenspecified.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathcompare-confed-aspath
RelatedCommands
bgpbestpathas-pathignore
7.6.6bgpbestpathcompare-routerid
CommandPurpose
Usethiscommandtocomparerouter-idforidenticaleBGPpaths.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
(no)bgpbestpathcompare-routerid
CommandMode
RouterConfiguration1165Default
BGPreceivesrouteswithidenticaleBGPpathsfromeBGPpeersandselectsthefirst
routereceivedasthebestpath.
Usage
WhencomparingsimilarroutesfrompeerstheBGProuterdoesnotconsiderrouter
IDoftheroutes.Bydefault,itselectsthefirstreceivedroute.Usethiscommandto
includerouterIDintheselectionprocess;similarroutesarecomparedandtheroute
withlowestrouterIDisselected.Therouter-idisthehighestIPaddressontherouter,
withpreferencegiventoloopbackaddresses.Router-idcanbemanuallysetbyusing
thebgprouter-idcommand.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathcompare-routerid
RelatedCommands
showbgpipv6
showipbgpneighbors
7.6.7bgpbestpathmed
CommandPurpose
UsethiscommandtospecifyMultiExitDiscriminator(MED)attributecomparison.
UsethenoparameterwiththiscommandtopreventBGPfromconsideringtheMED
attributeincomparingpaths.
CommandSyntax
bgpbestpathmedconfed[missing-as-worst]
bgpbestpathmedmissing-as-worst[confed]
nobgpbestpathmedconfed[missing-as-worst]
nobgpbestpathmedmissing-as-worst[confed]1166Parameter ParameterDescriptionParameterValue
confed ComparesMEDamong
confederationpaths-
missing-as-worst TreatsmissingMEDasthe
leastpreferredone-
CommandMode
RouterConfiguration
Default
MEDvalueiszero.
Usage
UsethiscommandtospecifytwoMEDattributesconfedandmissing-as-worst.The
confedattributeenablesMEDcomparisonamongpathslearnedfromconfederation
peers.TheMEDsarecomparedonlyifthereisnoexternalautonomoussystem(an
ASnotwithintheconfederation)inthepath.Ifthereisanexternalautonomous
systeminthepath,theMEDcomparisonisnotmade.
Themissing-as-worstattributetoconsideramissingMEDattributeinapathas
havingavalueofinfinity,makingthepathwithoutaMEDvaluetheleastdesirable
path.Ifmissing-as-worstisdisabled,themissingMEDisassignedthevalueof0,
makingthepathwiththemissingMEDattributethebestpath.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpbestpathmedmissing-as-worst
RelatedCommands
bgp-always-compare-med,bgpbestpathas-pathignore,bgpdeterministic-med11677.6.8bgpclient-to-clientreflection
CommandPurpose
UsethiscommandtorestoreroutereflectionfromaBGProutereflectortoclients.
Usethenoparameterwiththiscommandtoturnoffclient-to-clientreflection.
CommandSyntax
bgpclient-to-clientreflection
nobgpclient-to-clientreflection
Parameter ParameterDescriptionParameterValue
reflection Allowsreflectionofroutes-
CommandMode
RouterConfiguration
Default
Whenarouterisconfiguredasaroutereflector,client-to-clientreflectionisenabled
bydefault.
Usage
Thebgpclient-to-clientreflectioncommandisusedtoconfigureroutersasroute
reflectors.RoutereflectorsareusedwhenallInteriorBorderGatewayProtocol(iBGP)
speakersarenotfullymeshed.Iftheclientsarefullymeshedtheroutereflectorisnot
required,usenobgpclient-to-clientreflectioncommandtodisabletheclient-to-client
routereflection.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)nobgpclient-to-clientreflection1168RelatedCommands
bgpcluster-id
neighborroute-reflector-client
showbgpipv6
7.6.9bgpcluster-id
CommandPurpose
UsethiscommandtoconfiguretheclusterIDiftheBGPclusterhasmorethanone
routereflector.
UsethenoparameterwiththiscommandtoremovetheclusterID.
CommandSyntax
bgpcluster-idCLUSTERID
nobgpcluster-id
Parameter ParameterDescriptionParameterValue
CLUSTERID A.B.C.D|<1-4294967295>
SpecifiestheclusterIDof
thisrouteractingasa
route
reflector,eitherasIP
addressorasamaximum
of4bytes.IPv4AddressorNumber
between1-4294967295
A.B.C.D A.B.C.DRouteReflector
Cluster-idinIPaddress
formatIPv4Address
<1-4294967295> RouteReflectorcluster-id
asa32bitquantity1-42949672951169CommandMode
RouterConfiguration
Default
N/A
Usage
Aclusterincludesroutereflectorsanditsclients.Usually,eachclusterisidentifiedby
therouterIDofitssingleroutereflectorbuttoincreaseredundancysometimesa
clustermayhavemorethanoneroutereflector.Allrouterreflectorsinsuchacluster
arethenidentifiedbyaclusterID.Thebgpcluster-idcommandisusedtoconfigure
the4byteclusterIDforclusterswithmorethanoneroutereflectors.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpcluster-id1.1.1.1
RelatedCommands
bgpclient-to-clientreflection,neighborroute-reflector-client,showbgpipv6
7.6.10bgpconfederationidentifier
CommandPurpose
UsethiscommandtospecifyaBgpconfederationidentifier.
UsethenoparameterwiththiscommandtoremovetheBgpconfederationidentifier.
CommandSyntax
bgpconfederationidentifierID
nobgpconfederationidentifier
Parameter ParameterDescriptionParameterValue1170ID Setroutingdomain
confederationASnumber1-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpconfederationidentifier1
RelatedCommands
bgpconfederationpeer
7.6.11bgpconfederationpeers
CommandPurpose
UsethiscommandtoconfiguretheAutonomousSystems(AS)thatbelongtothe
confederation.
Usethenoparameterwiththiscommandtoremoveanautonomoussystemfromthe
confederation.
CommandSyntax
bgpconfederationpeers.ASN
nobgpconfederationpeers(.ASN|)
Parameter ParameterDescriptionParameterValue1171ASN ASnumbersofeBGP
peersthatareundersame
confederationbutina
differentsub-AS1-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
AconfederationallowsanAStobedividedintoseveralASs.TheASisgivena
confederationidentifier.Externalroutersviewonlythewholeconfederationasone
AS.EachASisfullymeshedwithinitselfandisvisibleinternallytotheconfederation.
Usethebgpconfederationpeercommandtodefinethelistofconfederationpeers.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpconfederationpeers123421345
RelatedCommands
bgpconfederationidentifier
7.6.12bgpdampening
CommandPurpose
Usethiscommandtosetbgpdampeningparameters.
Usethenoparameterwiththiscommandtounsetthebgpdampeningparameters.
CommandSyntax
bgpdampeningREACHTIME1172bgpdampeningREACHTIMEREUSE
bgpdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
(UNREACHTIME|)
bgpdampeningroute-mapROUTEMAP
nobgpdampeningREACHTIME
nobgpdampeningREACHTIMEREUSE
nobgpdampeningREACHTIMEREUSESUPPRESSMAXSUPPRESS
(UNREACHTIME|)
nobgpdampeningroute-mapROUTEMAP
Parameter ParameterDescriptionParameterValue
REACHTIME Specifiesthereachability
half-lifetimeinminutes.
Thetimeforthepenaltyto
decreasetoone-halfofits
currentvalue.Thedefault
is15minutes.1-45
REUSE Specifiesthereuselimit
value.Whenthepenalty
forasuppressedroute
decaysbelowthereuse
value,theroutesbecome
unsuppressed.Thedefault
reuselimitis750
SUPPRESS<1-20000>
Specifiesthesuppress
limitvalue.Whenthe
penaltyforaroute
exceedsthesuppress
value,therouteis
suppressed.Thedefault
suppresslimitis2000.1-200001173SUPPRESS Specifiessuppress-time.A
routedampeningmore
thanthisvaluewillbe
suppressd.Thedefault
valueis2000.1-20000
MAXSUPPRESS Specifiesthemax-
suppress-time.Maximum
timethatadampened
routeissuppressed.The
defaultmax-suppress
valueis4timesthehalf-
lifetime(60minutes).1-255
UNREACHTIME Specifiestheun-
reachabilityhalf-lifetime
forpenalty,inminutes.1-45
ROUTEMAP route-mapWORDRoute-
maptospecifycriteriafor
dampening.Thelengthofroute-map
nameshouldnotgreater
than20andthefirst
charactershouldbea-z,
A-Zor0-9.
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Routedampeningminimizestheinstabilitycausedbyrouteflapping.Apenaltyis
addedforeveryflapinaflappingroute.Assoonasthetotalpenaltyreachesthe
suppresslimittheadvertisementoftherouteissuppressed.Thispenaltyisdecayed1174accordingtotheconfiguredhalftimevalue.Oncethepenaltyislowerthanthereuse
limit,therouteadvertisementisun-suppressed.
Thedampeninginformationispurgedfromtherouteroncethepenaltybecomesless
thanhalfofthereuselimit.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpdampening2080025008025
RelatedCommands
N/A
7.6.13bgpdefaultlocal-preference
CommandPurpose
Usethiscommandtochangethedefaultlocalpreferencevalue.
Usethenoparameterwiththiscommandtoreverttothedefaultsetting.
CommandSyntax
bgpdefaultlocal-preferencePREF_VALUE
nodefaultlocal-preference(PREF_VALUE|)
Parameter ParameterDescriptionParameterValue
PREF_VALUE Configuredefaultlocal
preferencevalue.
Thedefaultlocal
preferencevalueis100.0-4294967295
CommandMode
RouterConfiguration1175Default
Thedefaultlocalpreferencevalueis100.
Usage
Localpreferenceindicatesthepreferredpathwhentherearemultiplepathstothe
samedestination.Thepathhavingahigherpreferenceispreferred.Usebgpdefault
local-preferencecommandtodefinepreferenceofaparticularpath.Thepreference
issenttoallroutersandaccessserversinthelocalautonomoussystem.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpdefaultlocal-preference2345555
RelatedCommands
N/A
7.6.14bgpdeterministic-med
CommandPurpose
UsethiscommandtocomparetheMultiExitDiscriminator(MED)variablewhen
choosingamongroutesadvertisedbydifferentpeersinthesameautonomous
system.
Usethenoparameterwiththiscommandtodisallowthissetting.
CommandSyntax
bgpdeterministic-med
nobgpdeterministic-med
CommandMode
RouterConfiguration1176Default
Disabled
Usage
"MultiExitDiscriminator(MED)isusedinbestpathselectionbyBGP.MEDis
comparedafterBGPattributesweight,localpreference,AS-pathandoriginhave
beencomparedandareequal.Enablebgpdeterministicmedcommandonallrouters
inthelocalAS,foracorrectcomparisonresult.Afterenablingthiscommand,all
pathsforthesameprefixaregroupedtogetherandarrangedaccordingtotheirMED
value.
Basedonthiscomparison,thebestpathisthenchosen.
ThiscommandcomparesMEDvariablewhenchoosingroutesadvertisedbydifferent
peersinthesameAS,tocompareMED,whenchoosingroutesfromneighborsin
differentASsusethebgpalways-compare-medcommand."
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpdeterministic-med
RelatedCommands
showbgpipv6,showbgpipv6neighbors
7.6.15bgpenforce-first-as
CommandPurpose
Usethiscommandtospecifiesthatanyupdatesreceivedfromanexternalneighbor
thatdonothavetheneighborsconfiguredAutonomousSystem(AS)atthe
beginningoftheAS_PATHinthereceivedupdatemustbedenied.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgpenforce-first-as1177nobgpenforce-first-as
CommandMode
RouterConfiguration
Default
Disabled
Usage
EnablingthisfeatureaddstothesecurityoftheBGPnetworkbynotallowingtraffic
fromunauthorizedsystems.
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpenforce-first-as
RelatedCommands
N/A
7.6.16bgpfast-external-failover
CommandPurpose
UsethiscommandtoresetaBGPsessionimmediately,iftheinterfaceusedforBGP
connectiongoesdown.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgpfast-external-failover
nobgpfast-external-failover
CommandMode
RouterConfiguration1178Default
Enabled
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgpfast-external-failover
RelatedCommands
N/A
7.6.17bgplog-neighbor-changes
CommandPurpose
Usethiscommandtoenableloggingofstatuschangemessageswithoutturningon
debugbgpcommands.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
bgplog-neighbor-changes
nobgplog-neighbor-changes
CommandMode
RouterConfiguration
Default
Disabled1179Usage
Systemimplementationprovidesotherkindsofloggingservicesforneighborstatus,
forexample,debugbgpfsm,debugbgpevents,etc.However,thesecommands
createasignificanthitintheloggingperformance.
Thebgplog-neighbor-changescommand,logsthefollowingevents:
BGPNotificationReceived
ErroneousBGPUpdateReceived
Userresetrequest
Peertime-out
PeerClosingdownthesession
Interfaceflap
RouterIDchanged
Neighbordeleted
Memberaddedtopeergroup
Administrativeshutdown
RemoteASchanged
RRclientconfigurationmodification
Softreconfigurationmodification
Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#bgplog-neighbor-changes
RelatedCommands
N/A11807.6.18bgprouter-id
CommandPurpose
Usethiscommandtoconfiguretherouteridentifier.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
bgprouter-idROUTERID
nobgprouter-id(ROUTERID|)
Parameter ParameterDescriptionParameterValue
ROUTERID A.B.C.DManually
configuredrouterID.InIPv4Addressformat
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Incasetheloopbackinterfaceisconfiguredtherouter-idissettotheIPaddressofa
loopbackinterface.Ifnot,thehighestIPaddressistherouter-id.
Usage
Usebgprouter-idcommandtomanuallyconfigureafixedrouterIDasaBGProuter
identifier.
Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgprouter-id1.1.2.31181RelatedCommands
N/A
7.6.19bgpscan-time
CommandPurpose
UsethiscommandtosettheintervalforBGProutenext-hopscanning.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
bgpscan-timeTIME
nobgpscan-time(TIME|)
Parameter ParameterDescriptionParameterValue
TIME Scanningintervalin
seconds.Thedefault
scanningintervalis60
seconds.0-60
CommandMode
RouterConfiguration
Default
N/A
Usage
UsethiscommandtoconfigurescanningintervalsofBGProuters.Thisintervalisthe
periodafterwhichrouterchecksthevalidityoftheroutesinitsdatabase.
TodisableBGPscanning,setthescantimeintervalto0seconds.1182Examples
Switch#configureterminal
Switch(config)routerbgp100
Switch(config-router)bgpscan-time10
RelatedCommands
N/A
7.6.20clearbgpipv6*
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallpeers.
CommandSyntax
clearbgpipv6*(in|out|soft|)
clearbgpipv6*vrfNAME
Parameter ParameterDescriptionParameterValue
* clearsallbgppeers -
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
soft soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
vrf VPNrouting/forwarding
instance-1183NAME VPNRouting/Forwarding
instancenameUpto16characters
CommandMode
PrivilegedEXEC
Default
N/A
Usage
TherearetwokindsBGPreset,hardresetwillclearBGPpeersandestablishagain.
Softresetonlyrefreshroutingtable.
Examples
Switch#clearbgpipv6*
Switch#clearbgpipv6*soft
Switch#clearbgpipv6*vrfaa
RelatedCommands
N/A
7.6.21clearbgpipv6X:X::X:X
CommandPurpose
UsethiscommandtoresetaIPv6BGPconnectionforaspecificIPv6address.
CommandSyntax
clearbgpipv6X:X::X:X(in|out|soft)
clearipv6bgpX:X::X:XvrfNAME
Parameter ParameterDescriptionParameterValue1184X:X::X:X SpecifiestheIPv6address
oftheBGProutetobe
clearedIPv6address
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
soft soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
vrf VPNrouting/forwarding
instance-
NAME VPNRouting/Forwarding
instancenameUpto16characters
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearbgpipv62018::1
Switch#clearbgpipv62018::1soft1185RelatedCommands
N/A
7.6.22clearbgpipv6unicastdampening
CommandPurpose
UsethiscommandtoresetalldampenedBGProutesunderthespecifiedaddress
family.
CommandSyntax
clearbgpipv6dampening(X:X::X:X|X:X::X:X/M|)
Parameter ParameterDescriptionParameterValue
X:X::X:X SpecifiestheIPv6address
forwhichBgpdampening
istobecleared.IPv6address
X:X::X:X/M SpecifiestheIPv6address
withmaskforwhichBgp
dampeningistobe
cleared.IPv6addresswithmask
length
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearbgpipv6unicastdampening
Switch#clearbgpipv6unicastdampening2018::11186RelatedCommands
N/A
7.6.23clearbgpipv6unicastflap-statistics
CommandPurpose
Usethiscommandtocleartheflapcountandhistorydurationforalltheprefixes
underthespecifiedaddressfamily.
CommandSyntax
clearbgpipv6unicastflap-statistics(X:X::X:X|X:X::X:X/M|)
Parameter ParameterDescriptionParameterValue
X:X::X:X SpecifiestheIPv6address
forwhichBgpdampening
istobecleared.IPv6address
X:X::X:X/M SpecifiestheIPv6address
withmaskforwhichBgp
dampeningistobe
cleared.IPv6addresswithmask
length
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#clearbgpipv6unicastflap-statistics10.10.0.1211187RelatedCommands
N/A
7.6.24clearbgpipv6ASN
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallpeersinaspecifiedAutonomous
System.
CommandSyntax
clearbgpipv6ASN(in|out|soft|)
Parameter ParameterDescriptionParameterValue
ASN SpecifiestheASNumber
forwhichallrouteswillbe
cleared1-4294967295
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-
soft soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
CommandMode
PrivilegedEXEC
Default
N/A1188Usage
N/A
Examples
Switch#clearbgpipv6100
RelatedCommands
N/A
7.6.25clearbgpipv6external
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallexternalpeers.
CommandSyntax
clearbgpipv6external(in|sotf|)
Parameter ParameterDescriptionParameterValue
external Clearsallexternalpeers-
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
soft soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
CommandMode
PrivilegedEXEC
Default
N/A1189Usage
N/A
Examples
Switch#clearbgpipv6externalin
RelatedCommands
N/A
7.6.26clearbgpipv6peer-group
CommandPurpose
UsethiscommandtoresetaBGPconnectionforallmembersofapeergroup.
CommandSyntax
clearbgpipv6peer-groupWORD(in|out|soft|)
Parameter ParameterDescriptionParameterValue
peer-group Clearsallmembersofa
peergroup-
WORD Specifiesthenameofthe
peergroupforwhichall
memberswillbecleared.Upto20characters
in Indicatesthatincoming
advertisedrouteswillbe
cleared-
out Indicatesthatoutgoing
advertisedrouteswillbe
cleared.-1190soft soft(in|out|)Indicatesthat
bothincomingand
outgoingrouteswillbe
cleared-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
None
Examples
Switch#clearbgpipv6peer-groupPeer1out
RelatedCommands
N/A
7.6.27debugbgp
CommandPurpose
UsethiscommandtospecifyalldebuggingoptionsforBGP.Usethenoparameter
withthiscommandtodisablethisfunction.
CommandSyntax
debugbgp(all|dampening|events|filters|fsm|keepalives|mpls|updates)
nodebugbgp(all|dampening|events|filters|fsm|keepalives|mpls|nsm|
updates)
Parameter ParameterDescriptionParameterValue1191all Usedwiththenoform
exclusively;turnsoffall
debuggingforBGP-
dampening Specifiesdebuggingfor
Bgpdampening.-
events Specifiesdebuggingfor
BGPevents.-
filters Specifiesdebuggingfor
BGPfilters.-
fsm Specifiesdebuggingfor
BGPFiniteStateMachine
(FSM).-
mpls Specifiesdebugginfor
BGPMultiprotocolLabel
Switching.-
keepalives Specifiesdebuggingfor
BGPkeepalives.-
updates updatesSpecifies
debuggingforBGP
updates.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Thiscommandwithoutanyparametersturnsonnormalbgpdebuginformation.1192Examples
Switch#debugbgp
Switch#debugbgpevents
RelatedCommands
N/A
7.6.28exit-address-family
CommandPurpose
Usethiscommandtoexittheaddressfamilymode.
CommandSyntax
exit-address-family
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
N/A
Examples
Thefollowingexampleshowstheuseofexit-address-familycommandandthe
changeinthepromptafterusingthiscommand:
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyipv6
Switch(config-router-af)#exit-address-family
Switch(config-router)#1193RelatedCommands
address-family
7.6.29neighboractivate
CommandPurpose
UsethiscommandtoenabletheexchangeofthespecifiedAFrouteswitha
neighboringrouter.
Usethenoparameterwiththiscommandtodisableexchangeofinformationwitha
neighbor.
CommandSyntax
neighborNEIGHBORIDactivate
noneighborNEIGHBORIDactivate
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.-1194CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
AftertheTCPconnectionisopenedwiththeneighbor,thiscommandisusedto
enableordisabletheexchangeofthespecifiedAFinformationwithaneighboring
router.
ToenabletheexchangeofmulticastandVPNv4addressprefixtypes,neighborsare
activatedusingtheneighboractivatecommandinaddressfamilymode.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1active
RelatedCommands
neighborremote-as
7.6.30neighboradvertisement-interval
CommandPurpose
UsethiscommandtosettheminimumintervalbetweensendingtheBGProuting
updates.
Usethenoparameterwiththiscommandtosettheintervaltimetodefault.
CommandSyntax
neighborNEIGHBORIDadvertisement-intervalTIME
noneighborNEIGHBORIDadvertisement-intervalTIME1195Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.-
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.-
TIME Advertise-intervalvaluein
seconds0-600
CommandMode
RouterConfiguration
Default
N/A
Usage
UsethiscommandtosettheminimumintervalbetweenthesendingofBGProuting
updates.Toreducetheflappingofroutestointernet,aminimumadvertisement
intervalisset,sothattheBGProutingupdatesaresentonlyperintervalseconds.
bgpdampeningcanalsobeusedtocontroltheeffectsofflappingroutes.1196Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor2018::1advertisement-interval45
RelatedCommands
N/A
7.6.31neighborallowas-in
CommandPurpose
UsethiscommandtoconfigurePErouterstoallowre-advertisementofallprefixes
containingduplicateAutonomousSystemNumbers(ASNs).
UsethenoparameterwiththiscommandtodisablethereadvertisementofaPE
routersASN.
CommandSyntax
neighborNEIGHBORallowas-in[NUMBER]
noneighborNEIGHBORallowas-in
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address1197TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
NUMBER Numberofoccurancesof
ASnumber.Defaultvalue
is11-10
CommandMode
AddressFamilyConfiguration
Default
Disabled
Usage
Inahubandspokeconfiguration,aPErouterre-advertisesallprefixescontaining
duplicateASNs.Usetheneighborallowas-incommandtoconfiguretwoVRFson
eachPEroutertoreceiveandre-advertiseprefixes.OneoftheVRFsreceives
prefixeswithASNsfromallPEroutersandthenadvertisesthemtoneighboringPE
routers.TheotherVRFreceivesprefixeswithASNsfromtheCErouterandre-
advertisesthemtoallPEroutersinthehubandspokeconfiguration.
ControlthenumberoftimesanASNisadvertised,byspecifyinganumberfrom1to
10.1198Examples
Switch#configureterminal
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1allowas-in3
RelatedCommands
N/A
7.6.32neighborattribute-unchanged
CommandPurpose
UsethiscommandtoadvertiseunchangedBGPattributestothespecifiedneighbor.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDattribute-unchanged{as-path|next-hop|med}
noneighborNEIGHBORIDattribute-unchanged{as-path|next-hop|med}
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address1199TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
as-path ASpathattribute -
next-hop Nexthopattribute -
med MultiExitDiscriminator-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor23018::1attribute-unchangedas-pathmed
RelatedCommands
N/A12007.6.33neighborcapabilityorfprefix-list
CommandPurpose
UsethiscommandtoadvertiseORFcapabilitytoneighbors.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDcapabilityorfprefix-list(both|receive|send)
noneighborNEIGHBORIDcapabilityorfprefix-list(both|receive|send)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
orf AdvertisesORFcapability
toitsneighbors-1201both Indicatesthatthelocal
routercansendORF
entriestoitspeeraswell
asreceiveORFentries
fromitspeer.-
receive Indicatesthatthelocal
routeriswillingtoreceive
ORFentriesfromitspeer-
send Indicatesthatthelocal
routeriswillingtosend
ORFentriestoitspeer-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
OutboundRouteFilters(ORFs)sendandreceivecapabilitiestolessenthenumberof
updatesexchangedbetweenneighbors.Byfilteringupdates,thisoptionminimizes
generatingandprocessingofupdates.
ThelocalrouteradvertisestheORFcapabilityinsendmodeandtheremoterouter
receivestheORFcapabilityinreceivemodeapplyingthefilterasoutboundpolicy.
ThetworoutersexchangeupdatestomaintaintheORFforeach
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor1.1.1.1capabilityorfprefix-listboth
RelatedCommands
N/A12027.6.34neighbordefault-originate
CommandPurpose
UsethiscommandtoallowaBGPlocalroutertosendthedefaultroute0:0::0:0toa
neighborforuseasadefaultroute.
Usethenoparameterwiththiscommandtosendnorouteasadefault.
CommandSyntax
neighborNEIGHBORIDdefault-originate(ROUTEMAP|)
noneighborNEIGHBORIDdefault-originate(ROUTEMAP|)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
ROUTEMAP route-mapWORD -
route-map Theroute-maptospecify
criteriatooriginatedefault
routes-
WORD Route-mapname -1203CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
Everyroutershouldhaveadefaultroute,itisusedtosenddatastothenetwork
whichisnotexistentinlocalRIB.Tosetadefaultrouteoneachroutercanmake
everyrouterhaveadefaultroute,ortocreateadefaultrouteandbroadcastittoBGP
peerbythiscommand.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1default-originateroute-mapmyroute
RelatedCommands
N/A
7.6.35neighbordescription
CommandPurpose
Usethiscommandtoassociateadescriptionwithaneighbor.
Usethenoparameterwiththiscommandtoremovethedescription.
CommandSyntax
neighborNEIGHBORIDdescriptionLINE
noneighborNEIGHBORIDdescription
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -1204X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
LINE Texttodescribingthe
neighbor.Upto80characters
CommandMode
RouterConfiguration
Default
N/A
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor2018::1descriptionBackuprouterforsales.
RelatedCommands
N/A12057.6.36neighbordistribute-list
CommandPurpose
UsethiscommandtofilterrouteupdatefromaparticularBGPneighbor.
Usethenoparameterwiththiscommandtoremoveanentry.
CommandSyntax
neighborNEIGHBORIDdistribute-listWORD(in|out)
noneighborNEIGHBORIDdistribute-listWORD(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WORD ThenameofIPaccess-listUpto20characters
in Indicatesthatincoming
advertisedrouteswillbe
filtered.-1206out Indicatesthatoutgoing
advertisedrouteswillbe
filtered.-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
Useonlyonedistribute-listperBGPneighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1distribute-listmylistout
RelatedCommands
N/A
7.6.37neighborebgp-multihop
CommandPurpose
UsethiscommandtoacceptandattemptBGPconnectionstoexternalpeerson
indirectlyconnectednetworks.
Usethenoparameterwiththiscommandtoreturntothedefault.
CommandSyntax
neighborNEIGHBORIDebgp-multihop(COUNT|)
noneighborNEIGHBORIDebgp-multihop
X:X::X:XIPv6BGP1207Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
COUNT Maximumhopcount.Ifthe
maximumhopcountisnot
setthehopcountis255.1-255
CommandMode
RouterConfiguration
Default
N/A
Usage
Multihopisnotestablishediftheonlyroutetothemultihoppeerisadefaultroute.
Thisavoidsloopformation.
Examples
Switch#configureterminal
Switch(config)#routerbgp101208Switch(config-router)#neighbor2018::1remote-as20
Switch(config-router)#neighbor2018::1ebgp-multihop5
RelatedCommands
N/A
7.6.38neighborfilter-list
CommandPurpose
UsethiscommandtosetupaBGPfilter.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDfilter-listLISTNAME(in|out)
noneighborNEIGHBORIDfilter-listLISTNAME(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters1209in Indicatesthatincoming
advertisedrouteswillbe
filtered.-
out Indicatesthatoutgoing
advertisedrouteswillbe
filtered.-
LISTNAME Thenameofan
autonomoussystempath
accesslist.Upto20characters
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
ThiscommandspecifiesanaccesslistfilteronupdatesbasedontheBGP
autonomoussystempaths.Eachfilterisanaccesslistbasedonregularexpressions.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1filter-listlistnameout
RelatedCommands
N/A
7.6.39neighbormaximum-prefix
CommandPurpose
Usethiscommandtocontrolthenumberofprefixesthatcanbereceivedfroma
neighbor.1210Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDmaximum-prefixMAXIMUM
noneighborNEIGHBORIDmaximum-prefix
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
MAXIMUM MAXPREFIX
(THRESHOLD|)(warning-
only|)-
MAXPREFIX Specifiesthemaximum
numberofprefixes
permitted.1-4294967295
THRESHOLD <1-100>Specifiesthe
thresholdvalue,1to100
percent.1-1001211warning-only Onlygivesawarning
messagewhenthelimitis
exceeded.-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
Theneighbormaximum-prefixcommandallowstheconfigurationofaspecified
numberofprefixesthataBGProuterisallowedtoreceivefromaneighbor.Whenthe
warning-onlyoptionisnotused,ifanyextraprefixesarereceived,therouterendsthe
peering.Aterminatedpeer,staysdownuntiltheclearipbgpcommandisused.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1maximum-prefix1244warning-only
RelatedCommands
N/A
7.6.40neighbornext-hop-self
CommandPurpose
UsethiscommandtoconfiguretherouterasthenexthopforaBGP-speaking
neighbororpeergroup.
Usethenoparameterwiththiscommandtodisablethisfeature.
CommandSyntax
neighborNEIGHBORIDnext-hop-self1212noneighborNEIGHBORIDnext-hop-self
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
ThiscommandallowsaBGProutertochangethenexthopinformationthatissentto
theiBGPpeer.ThenexthopinformationissettotheIPaddressoftheinterfaceused
tocommunicatewiththeneighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp101213Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor10.10.0.72next-hop-self
RelatedCommands
N/A
7.6.41neighboroverride-capability
CommandPurpose
Usethiscommandtooverrideacapabilitynegotiationresult.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborNEIGHBORIDoverride-capability
noneighborNEIGHBORIDoverride-capability
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters1214CommandMode
RouterConfiguration
Default
N/A
Usage
None
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor2018::1override-capability
RelatedCommands
N/A
7.6.42neighborpassive
CommandPurpose
UsethiscommandtosetaBGPneighboraspassive.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
(no)neighborNEIGHBORIDpassive
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address1215TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#neighbor2018::1passive
RelatedCommands
N/A
7.6.43neighborpeer-group(addinganeighbor)
CommandPurpose
Usethiscommandtoaddaneighbortoanexistingpeer-group.
Usethenoparameterwiththiscommandtodisablethisfunction.1216CommandSyntax
neighborIPADDRESSpeer-groupTAG
noneighborIPADDRESSpeer-group
Parameter ParameterDescriptionParameterValue
IPV6_ADDR X:X::X:XSpecifiesthe
addressoftheBGP
neighborinIPv6format.
X:X::X:XSpecifiesthe
addressoftheBGP
neighborinIPv6format.
TAGNameofthepeer-
groupIPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A1217Usage
UsethiscommandtoNeighborswiththesameupdatepoliciesaregroupedintopeer
groups.Thisfacilitatestheupdatesofvariouspolicies,suchas,distributeandfilter
lists.Thepeer-groupisthenconfiguredeasilywithanyoftheneighborcommands.
Anychangesmadetothepeergroupaffectallmembers.
Tocreateapeer-groupusetheneighborpeer-groupcreatecommandandthenuse
thiscommandtoaddneighborstothegroup.
Examples
Thisexampleshowsanewpeer-groupgroup1andtheaddingofaneighbor2018::1
tothegroup:
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighborgroup1peer-group
Switch(config-router)#neighbor2018::1peer-groupgroup1
RelatedCommands
N/A
7.6.44neighborpeer-group(creatingapeer-group)
CommandPurpose
Usethiscommandtocreateapeer-group.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborTAGpeer-group
noneighborTAGpeer-group
Parameter ParameterDescriptionParameterValue
TAG Nameofthepeer-group-1218CommandMode
RouterConfiguration
Default
N/A
Usage
Neighborswiththesameupdatepoliciesaregroupedintopeergroups.This
facilitatestheupdatesofvariouspolicies,suchas,distributeandfilterlists.Thepeer-
groupisthenconfiguredeasilywithanyoftheneighborcommands.Anychanges
madetothepeergroupaffectallmembers.Usethiscommandtocreateapeer-
group.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighborgroup1peer-group
RelatedCommands
N/A
7.6.45neighborprefix-list
CommandPurpose
UsethiscommandtodistributeBGPneighborinformationasspecifiedinaprefixlist.
Usethenoparameterwiththiscommandtoremoveanentry.
CommandSyntax
neighborNEIGHBORIDprefix-listLISTNAME(in|out)
noneighborNEIGHBORIDprefix-listLISTNAME(in|out)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -1219X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
LISTNAME ThenumberofanAS-path
accesslist.Upto20characters
in Specifiesthattheaccess
listappliestoincoming
advertisements.-
out Specifiesthattheaccess
listappliestooutgoing
advertisements.-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
UsethiscommandtospecifyaprefixlistforfilteringBGPadvertisements.Filteringby
prefixlistmatchestheprefixesofrouteswiththoselistedintheprefixlist.Ifthereisa
match,therouteisused.Anemptyprefixlistpermitsallprefixes.Ifagivenprefix1220doesnotmatchanyentriesofaprefixlist,therouteisdeniedaccess.Whenmultiple
entriesofaprefixlistmatchaprefix,theentrywiththesmallestsequencenumberis
consideredtobearealmatch.
Therouterbeginsthesearchatthetopoftheprefixlist,withthesequencenumber1.
Onceamatchordenyoccurs,therouterdoesnotneedtogothroughtherestofthe
prefixlist.Forefficiencythemostcommonmatchesordeniesarelistedatthetop.
Theneighbordistribute-listcommandisanalternativetotheneighborprefix-list
commandandonly
oneofthemcanbeusedforfilteringtothesameneighborinanydirection.
Examples
Switch#configureterminal
Switch(config)#ipprefix-listlist1deny30.0.0.0/24
Switch(config)#routerbgp12
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor10.10.10.10prefix-listlist1in
RelatedCommands
ipprefix-list
7.6.46neighborremote-as
CommandPurpose
UsethiscommandtoconfigureaninternalorexternalBGP(iBGPoreBGP)TCP
sessionwithanotherrouter.
CommandSyntax
neighborNEIGHBORIDremote-asASNUM
noneighborNEIGHBORIDremote-asASNUM
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -1221X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
ASNUM Neighborsautonomous
systemnumber1-4294967295
CommandMode
RouterConfiguration
Default
N/A
Usage
ThiscommandisusedtoconfigureiBGPandeBGPsessionswithotherneighbors.A
peer-groupsupportofthiscommandisconfiguredonlyaftercreatingaspecificpeer-
group.
Examples
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config-router)#neighbor2018::1remote-as3451222RelatedCommands
N/A
7.6.47neighborremove-private-AS
CommandPurpose
UsethiscommandtoremovetheprivateAutonomousSystem(AS)numberfrom
outboundupdates.
Usethenoparameterwiththiscommandtooreverttodefault.
CommandSyntax
neighborNEIGHBORIDremove-private-AS
noneighborNEIGHBORIDremove-private-AS
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
AddressFamilyConfiguration1223Default
Disabled
Usage
TheprivateASnumbersrangefrom<64512-65535>.PrivateASnumbersarenot
advertisedtotheInternet.ThiscommandisusedwithexternalBGPpeersonly.The
routerremovestheASnumbersonlyiftheupdateincludesprivateASnumbers.Ifthe
updateincludesbothprivateandpublicASnumbers,thesystemtreatsitasanerror.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1remove-private-AS
RelatedCommands
N/A
7.6.48neighborroute-reflector-client
CommandPurpose
UsethiscommandtoconfiguretherouterasaBGProutereflectorandconfigurethe
specifiedneighborasitsclient.
Usethenoparameterwiththiscommandtoindicatethattheneighborisnotaclient.
CommandSyntax
neighborNEIGHBORIDroute-reflector-client
noneighborNEIGHBORIDroute-reflector-client
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -1224X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
RoutereflectorsareasolutionfortheexplosionofiBGPpeeringwithinan
autonomoussystem.ByroutereflectionthenumberofiBGPpeerswithinanASis
reduced.Usetheneighborroute-reflector-clientcommandtoconfigurethelocal
routerastheroutereflectorandspecifyneighborsasitsclient.
AnAScanhavemorethanoneroutereflector.Oneroutereflectortreatstheother
routereflectorasanotheriBGPspeaker.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1route-reflector-client1225RelatedCommands
N/A
7.6.49neighborsend-community
CommandPurpose
UsethiscommandtospecifythatacommunityattributeshouldbesenttoaBGP
neighbor.
Usethenoparameterwiththiscommandtoremovetheentry.Usetheextendedand
noparameterstoremoveextendedcommunities.Specifyingnootherparameter
meansstandardcommunitiesonly.
CommandSyntax
neighborNEIGHBORIDsend-community(both|extended|standard|)
noneighborNEIGHBORIDsend-community(both|extended|standard|)
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters1226both SendsStandardand
ExtendedCommunity
attributes-
extended SendsExtended
Communityattributes-
standard SendsStandard
Communityattributes-
CommandMode
AddressFamilyConfiguration
Default
None
Usage
Bydefault,communityattributesarenotsenttoaneighbor.Tousethiscommandto
enablethiscommand.Route-mapcanbebasedonneighboraddress,peergroup
nameorASpathinformation.
Examples
Switch#configureterminal
Switch(config)#bgpconfig-typestandard
Switch(config)#routerbgp10
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1send-communityextended
RelatedCommands
N/A
7.6.50neighborshutdown
CommandPurpose
Usethiscommandtodisableaneighbor.
Usethenoparameterwiththiscommandtore-enabletheneighbor.1227CommandSyntax
neighborNEIGHBORIDshutdown
noneighborNEIGHBORIDshutdown
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
A.B.C.D Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
Default
N/A
Usage
Thiscommandshutsdownanyactivesessionforthespecifiedneighborandclears
allrelatedroutingdata.1228Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor2018::1shutdown
RelatedCommands
N/A
7.6.51neighborsoft-reconfigurationinbound
CommandPurpose
Usethiscommandtoconfiguretostartstoringupdates.
Usethenoparameterwiththiscommandtodisablethisfunction.
CommandSyntax
neighborNEIGHBORIDsoft-reconfigurationinbound
boneighborNEIGHBORIDsoft-reconfigurationinbound
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv4
format.IPv6Address1229TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
N/A
Usage
Usethiscommandtostoreupdatesforinboundsoftreconfiguration.Soft-
reconfigurationmaybeusedinlieuofBGProuterefreshcapability.Usingthis
commandenableslocalstorageofallthereceivedroutesandtheirattributes.This
requiresadditionalmemory.Whenasoftreset(inbound)isdoneonthisneighbor,the
locallystoredroutesarereprocessedaccordingtotheinboundpolicy.TheBGP
neighborconnectionisnotaffected.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1soft-reconfigurationinbound
RelatedCommands
N/A12307.6.52neighborstrict-capability-match
CommandPurpose
UsethiscommandtoclosetheBGPconnectionifcapabilityvaluedoesnot
completelymatchtoremotepeer.
Usethenoparameterwiththiscommandtodisablethisfunction
CommandSyntax
neighborNEIGHBORIDstrict-capability-match
noneighborNEIGHBORIDstrict-capability-match
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
CommandMode
RouterConfiguration1231Default
N/A
Usage
N/A
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1strict-capability-match
RelatedCommands
N/A
7.6.53neighbortimers
CommandPurpose
UsethiscommandtosetthetimersforaspecificBGPneighbor.
UsethenoparameterwiththiscommandtoclearthetimersforaspecificBGP
neighbor
CommandSyntax
neighborNEIGHBORIDtimersKEEPALIVEHOLDTIME
noneighborNEIGHBORIDtimers
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address1232TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
KEEPALIVE Frequency(inseconds)at
whicharoutersends
keepalivemessagestoits
neighbor.Thedefaultis60
seconds.1-65535
HOLDTIME Interval(inseconds)after
which,onnotreceivinga
keepalivemessage,the
routerdeclaresaneighbor
dead.Thedefaultis180
seconds.3-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
KeepalivemessagesaresentbyaroutertoinformanotherrouterthattheBGP
connectionbetweenthetwoisstillactive.Thekeepaliveintervalistheperiodoftime
betweeneachkeepalivemessagesentbytherouter.Theholdtimeintervalisthetime1233therouterwaitstoreceiveakeepalivemessageandifitdoesnotreceiveamessage
forthisperioditdeclarestheneighbordead.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#address-familyipv6
Switch(config-router-af)#neighbor2018::1timers60120
RelatedCommands
N/A
7.6.54neighborunsuppress-map
CommandPurpose
Usethiscommandtoselectivelyleakmore-specificroutestoaparticularneighbor.
CommandSyntax
neighborNEIGHBORIDunsuppress-mapWORD
noneighborNEIGHBORIDunsuppress-mapWORD
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address1234TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WORD Nameofroutemap -
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
Whentheaggregate-addresscommandisusedwiththesummary-onlyoption,the
more-specificroutesoftheaggregatearesuppressedtoallneighbors.Usethe
unsuppress-mapcommandtoselectivelyleakmore-specificroutestoaparticular
neighbor.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)address-familyipv6
Switch(config-router-af)neighbor2018::1unsuppress-mapmymap
RelatedCommands
N/A12357.6.55neighborupdate-source
CommandPurpose
UsethiscommandtoallowinternalBGPsessionstouseanyoperationalinterfacefor
TCPconnections.
Usethenoparameterwiththiscommandtorestoretheinterfaceassignmenttothe
closestinterface.
CommandSyntax
neighborNEIGHBORIDupdate-sourceIFNAME
noneighborNEIGHBORIDupdate-source
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -
X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
IFNAME Specifiestheloopback
interface.Support
physical/aggregation/loopb
ack/vlan/tunnelports1236CommandMode
RouterConfiguration
Default
N/A
Usage
Usethiscommandinconjunctionwithanyspecifiedinterfaceontherouter.The
loopbackinterfaceistheinterfacethatismostcommonlyusedwiththiscommand.
TheuseofloopbackinterfaceeliminatesadependencyandBGPdoesnothaveto
relyontheavailabilityofaparticularinterfaceformakingTCPconnections.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#neighbor2018::1update-sourceeth-0-1
RelatedCommands
N/A
7.6.56neighborweight
CommandPurpose
Usethiscommandtosetdefaultweightsforroutesfromthisneighbor.
Usethenoparameterwiththiscommandtoremoveaweightassignment.
CommandSyntax
neighborNEIGHBORIDweightWEIGHT
noneighborNEIGHBORIDweight
Parameter ParameterDescriptionParameterValue
NEIGHBORID (X:X::X:X|TAG) -1237X:X::X:X Specifiestheaddressof
theBGPneighborinIPv6
format.IPv6Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.Upto20characters
WEIGHT Specifiestheweightthis
commandassignstothe
route.0-65535
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
Usethiscommandtospecifyaweightvaluetoallrouteslearnedfromaneighbor.
Theroutewiththehighestweightgetspreferencewhenthereareotherroutesonthe
network.
Unlikethelocal-preferenceattribute,theweightattributeisrelevantonlytothelocal
router.
Theweightsassignedusingthesetweightcommandoverridestheweightsassigned
usingthiscommand.1238Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)address-familyipv6
Switch(config-router-af)#neighbor2018::1weight60
RelatedCommands
N/A
7.6.57network
CommandPurpose
UsethiscommandtospecifythenetworkstobeadvertisedbytheBGProuting
process.Aunicastnetworkaddresswithoutamaskisacceptedifitfallsintothe
naturalboundaryofitsclass.Aclass-boundarymaskisderivediftheaddress
matchesitsnaturalclass-boundary.
Usethenoformofthiscommandtoremoveanetworkrouteentry.
CommandSyntax
networkX:X::X:X/M
networkX:X::X:X/Mroute-mapWORD
nonetworkX:X::X:X/M
nonetworkX:X::X:X/Mroute-mapWORD
Parameter ParameterDescriptionParameterValue
X:X::X:X/M IPv6prefix<network>,
e.g.,2018::IPv6addresswithmask
length
WORD NameoftheroutemapThelengthofroute-map
nameshouldnotgreater
than20andthefirst
charactershouldbea-z,
A-Zor0-9.1239CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
N/A
Examples
Thefollowingexampleillustratesaaddressconfiguredasanetworkroute.The
networkprefixmasklengthof64willbeinternallyderived,thatis,2018::/64:
Switch#configureterminal
Switch(config)#routerbgp1
Switch(config-router)address-familyipv6
Switch(config-router-af)#network2018::/64
!
routerbgp1
nosynchronization
network2018::/64
!
RelatedCommands
N/A
7.6.58networksynchronization
CommandPurpose
Usethiscommandtoensuretheexactsamestaticnetworkprefix,specifiedthrough
anyofthenetworkcommands,islocalorhasIGPreachability(intheNSMRIB)
beforebeingintroducedintotheBGPRIB.
Usethenoparameterwiththiscommandtodisablethisfunction.1240CommandSyntax
networksynchronization
nonetworksynchronization
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
Networksynchronizationisdisabledbydefault.
Usage
N/A
Examples
ThefollowingexampleenablesIGPsynchronizationofBGPstaticnetworkroutesin
therouterconfigurationmode:
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config-router)#networksynchronization
RelatedCommands
N/A
7.6.59synchronization
CommandPurpose
UsethiscommandtoenableIGPsynchronizationofInternalBGP(iBGP)learned
routeswiththeInternalGatewayProtocol(IGP)systemintherouterconfiguration
modeorintheaddress-familyconfigurationmode.
Usethenoparameterwiththiscommandtodisablethisfunction.1241CommandSyntax
synchronization
nosynchronization
CommandMode
RouterConfiguration
AddressFamilyConfiguration
Default
IGPsynchronizationisdisabled.
Usage
SynchronizationisusedwhenaBGProutershouldnotadvertiserouteslearnedfrom
iBGPneighbors,unlessthoseroutesarealsopresentinanIGP(forexample,OSPF).
Synchronizationmaybeenabledwhenalltheroutersinanautonomoussystemdo
notspeakBGP,andtheautonomoussystemisatransitforotherautonomous
systems.ThenosynchronizationcommandisusedwhenBGProutercanadvertise
routeslearnedfromitsiBGPneighborswithoutwaitingfortheIGPreachabilitytobe
present.
Examples
ThefollowingexampleenablesIGPsynchronizationofBGPstaticnetworkroutesin
theIPv6-Unicastaddressfamily:
Switch#configureterminal
Switch(config)#routerbgp11
Switch(config)#address-familyipv6
Switch(config-af)#networksynchronization
RelatedCommands
N/A12427.6.60routerbgp
CommandPurpose
UsethiscommandtoconfigureaBGProutingprocess.
Usethenoparameterwiththiscommandtodisablearoutingprocess.
CommandSyntax
routerbgpASN
norouterbgpASN
Parameter ParameterDescriptionParameterValue
ASN SpecifiestheAutonomous
System(AS)number1-4294967295
CommandMode
GlobalConfiguration
Default
N/A
Usage
TherouterbgpcommandenablesaBGProutingprocess.
Examples
Switch#configureterminal
Switch(config)#routerbgp12
Switch(config-router)#
RelatedCommands
N/A12437.6.61showdebuggingbgp
CommandPurpose
UsethiscommandtodisplaytheBGPdebuggingoptionset.
CommandSyntax
showdebuggingbgp
CommandMode
PrivilegedEXEC
Default
N/A
Usage
None
Examples
Switch#showdebuggingbgp
RelatedCommands
N/A
7.6.62showbgpipv6
CommandPurpose
UsethiscommandtodisplayBGPnetworkinformation.
CommandSyntax
showbgpipv6(IPADDRESS|)
Parameter ParameterDescriptionParameterValue1244IPADDRESS X:X::X:X|X:X::X:X/M
Specifiestheaddressand
length.IPv6addresswithmask
length
unicast SpecifiesaIPv4unicast
addressfamily.Thisisthe
defaultoption.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6
RelatedCommands
N/A
7.6.63showbgpipv6community
CommandPurpose
Usethiscommandtodisplayroutesmatchingthecommunities.
CommandSyntax
showbgp(ipv6)community[AA:NN|local-AS|no-advertise|no-export](exact-
match|)
Parameter ParameterDescriptionParameterValue1245local-AS Donotsendoutsidelocal
AS(well-known
community).-
AA:NN Specifiesthevalidvalue
forthecommunitynumber.
Thisformatrepresentsthe
32bitcommunitiesvalue,
whereASisthehighorder
16bitsandVAListhelow
order16bitsindigit
format.Support2bytesAS
numberand2bytes
communityID
no-advertise Donotadvertisetoany
peer(well-known
community).-
no-export DonotexporttonextAS
(well-knowncommunity).-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6community
Switch#showbgpipv6communitylocal-AS100
RelatedCommands
N/A12467.6.64showbgpipv6community-list
CommandPurpose
Usethiscommandtodisplayroutesthatmatchthecommunity-list.
CommandSyntax
showipbgpcommunity-listLISTNAME(exact-match|)
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiesthecommunity
listname.Upto20characters
exact-match Displaysonlyroutesthat
haveexactlythesame
specifiedcommunities.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6community-listmylistexact-match
Switch#showbgpipv6unicastcommunity-listmylist
RelatedCommands
N/A12477.6.65showbgpipv6dampening
CommandPurpose
Usethiscommandtodisplaydetailedinformationaboutdampening.
CommandSyntax
showbgpipv6dampening(dampened-paths|flap-statistics|parameters)
Parameter ParameterDescriptionParameterValue
dampened-paths Displaypathssuppressed
duetodampening.-
flap-statistics Displayflapstatisticsof
routes.-
parameters Displaydetailsof
configureddampening
parameters.-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Enablebgpdampeningtomaintaindampened-pathinformationinmemory.The
followingisasampleoutputdisplayingallthedampeningparameters:
Switch#showbgpipv6dampeningparameters1248RelatedCommands
N/A
7.6.66showbgpipv6filter-list
CommandPurpose
Usethiscommandtodisplayroutesconformingtothefilter-list.
CommandSyntax
showipbgpfilter-listLISTNAME
Parameter ParameterDescriptionParameterValue
LISTNAME Specifiestheaccesslist
name.Upto20characters
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6filter-listmylist
RelatedCommands
N/A12497.6.67showbgpipv6inconsistent-as
CommandPurpose
UsethiscommandtodisplayrouteswithinconsistentASPaths.
CommandSyntax
showbgpipv6inconsistent-as
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6inconsistent-as
RelatedCommands
N/A
7.6.68showbgpipv6neighbors
CommandPurpose
UsethiscommandtodisplaydetailedinformationonTCPandBGPneighbor
connections.
CommandSyntax
showbgpipv6neighbors(IPV6_ADDR|)1250Parameter ParameterDescriptionParameterValue
IPV6_ADDR X:X::X:XSpecifiesthe
IPv6address.IPv6Address
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowbgpipv6neighborscommanddisplaying
informationaboutthespecifiedneighbor:
Switch#showbgpipv6neighbors
RelatedCommands
N/A
7.6.69showbgpipv6paths
CommandPurpose
UsethiscommandtodisplayBGPpathinformation.
CommandSyntax
showbgpipv6paths
CommandMode
PrivilegedEXEC1251Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6paths
RelatedCommands
N/A
7.6.70showbgpipv6prefix-list
CommandPurpose
Usethiscommandtodisplayroutesmatchingtheprefix-list.
CommandSyntax
showbgpipv6prefix-listLIST
Parameter ParameterDescriptionParameterValue
LIST Specifiesthenameofthe
IPv6prefixlist.Upto40characters
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A1252Examples
Switch#showbgpipv6prefix-listmylist
RelatedCommands
N/A
7.6.71showbgpipv6quote-regexp
CommandPurpose
UsethiscommandtodisplayroutesmatchingtheASpathregularexpressionin
quotes.
CommandSyntax
showbgpipv6quote-regexpWORD
Parameter ParameterDescriptionParameterValue
WORD Specifiesaregular-
expressiontomatchthe
BGPASpathsRegularexpressionin
quotes
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6quote-regexpSwitch1253RelatedCommands
N/A
7.6.72showbgpipv6regexp
CommandPurpose
UsethiscommandtodisplayroutesmatchingtheASpathregularexpression.
CommandSyntax
showbgpipv6regexpLINE
Parameter ParameterDescriptionParameterValue
LINE Displaysroutesmatching
theASpathregular
expression.Regularexpression
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Switch#showbgpipv6regexpmyexpression
RelatedCommands
N/A12547.6.73showbgpipv6summary
CommandPurpose
UsethiscommandtodisplayasummaryofBGPneighborstatus.
CommandSyntax
showbgpipv6summary
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
Thisisasampleoutputfromtheshowbgpipv6summarycommanddisplayinga
summaryofBGPneighborstatus:
Switch#showbgpipv6summary
RelatedCommands
N/A
7.6.74timers
CommandPurpose
UsethiscommandsetstheBGPkeepalivetimerandholdtimetimervalues.
Usethenoparameterwiththiscommandtoresettimerstodefaultvalue.1255CommandSyntax
timersbgpKEEPALIVEHOLDTIME
notimersbgp
Parameter ParameterDescriptionParameterValue
KEEPALIVE <0-65535>Thefrequency
withwhichthekeepalive
messagesaresenttothe
neighbors.
Thedefaultvalueis60
seconds.0-65535
HOLDTIME Theintervalafterwhichthe
neighborisconsidered
deadifkeepalive
messages
arenotreceived.The
defaultholdtimevalueis
180seconds.3-65535
CommandMode
RouterConfiguration
Default
N/A
Usage
Thiscommandisusedgloballytosetorunsetthekeepaliveandholdtimevaluesfor
alltheneighbors.
Examples
Switch#configureterminal
Switch(config)#routerbgp10
Switch(config-router)#timersbgp401201256RelatedCommands
N/A12578MulticastCommands
8.1IPMulticast-RoutingCommands
8.1.1ipmulticast-routing
CommandPurpose
Usethiscommandtoenableipmulticastrouting.
Todisableipmulticastrouting,usethenoformofthiscommand.
CommandSyntax
ipmulticast-routing
noipmulticast-routing
CommandMode
GlobalConfiguration
Default
Enable
Usage
None
Examples
Thisexampleshowshowtoenableipmulticastrouting:
Switch#configureterminal
Switch(config)#ipmulticast-routing
Thisexampleshowshowtodisableipmulticastrouting:1258Switch#configureterminal
Switch(config)#noipmulticast-routing
RelatedCommands
None
8.1.2ipmulticastroute-limit
CommandPurpose
Usethiscommandtosetthemaximumnumberofthemulticastroutes.
Toreturnittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipmulticastroute-limitROUTE_NUMBER(THRESHOLD_NUMBER|)
noipmulticastroute-limit
Parameter ParameterDescriptionParameterValue
ROUTE_NUMBER Maxnumberofmulticast
routeentries1-2048
THRESHOLD_NUMBERThresholdatwhichto
generatewarning
message1-2048
CommandMode
GlobalConfiguration
Default
Defaultmaximumnumberofthemulticastroutesis2048.
Defaultthresholdissameasthemaximumnumberofmulticastroutes.
Usage
None1259Examples
Thisexampleshowshowtosetthemaximumnumberofthemulticastroutesto512:
Switch#configureterminal
Switch(config)#ipmulticastroute-limit512
Thisexampleshowshowtoreturnthemaximumnumberofthemulticastroutesto
defaultvalue:
Switch#configureterminal
Switch(config)#noipmulticastroute-limit
RelatedCommands
showipmrouteroute-limit
8.1.3showipmroute
CommandPurpose
Usethiscommandtodisplaytheipmulticastroutingtableinformation.
CommandSyntax
showipmroute(sparse|)(count|summary|)
showipmrouteIP_ADDR(sparse|)(count|summary|)
showipmrouteroute-limit
Parameter ParameterDescriptionParameterValue
sparse Showsparsemulticast
routes-
count Shownumberofmulticast
routeentries-
summary Showabbreviated
multicastrouteinformation-
IP_ADDR Showspecifysourceor
groupaddressmulticast
routeIPv4Address1260route-limit Showmaxroutelimitvalue-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastroutingtable:
Switch#showipmroute
IPMulticastRoutingTable
Flags:I-ImmediateStat,T-TimedStat,F-Forwarderinstalled
Timers:Uptime/StatExpiry
InterfaceState:Interface(TTL)
(10.0.1.20,228.1.1.1),uptime00:35:46,statexpires00:02:19
OwnerPIM-SM,Flags:TF
Incominginterface:eth-0-1
Outgoinginterfacelist:
eth-0-2(1)
Thisexampleshowshowtodisplaymulticastroutingtablesummaryinformation:
Switch#showipmroutesummary
IPMulticastRoutingTable
Flags:I-ImmediateStat,T-TimedStat,F-Forwarderinstalled
Timers:Uptime/StatExpiry
InterfaceState:Interface(TTL)
(10.0.1.20,228.1.1.1),00:36:59/00:02:46,PIM-SM,Flags:TF
RelatedCommands
ipmulticastroute-limit
ipmroute-rpf12618.1.4showipmvif
CommandPurpose
Usethiscommandtodisplaythemulticastinterfaceinformation.
CommandSyntax
showipmvif(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastinterfaceinformation:
Switch#showipmvif
InterfaceVifOwner TTLLocalRemoteUptime
IdxModule AddressAddress
eth-0-10PIM-SM 110.0.1.10.0.0.000:42:56
eth-0-22PIM-SM 110.0.2.10.0.0.000:42:53
RelatedCommands
ippimsparse-mode12628.1.5showipmulticastgroupscount
CommandPurpose
Usethiscommandtodisplaythemulticastgroupcount.
CommandSyntax
showipmulticastgroupscount
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastgroupnumber:
Switch#showipmulticastgroupscount
multicastgrouprecordcount:1
multicastsourcerecordcount:0
multicasttotalrecordcount:1
multicastmaxrecordcount:2048
RelatedCommands
None
8.1.6showresourcemcast
CommandPurpose
Usethiscommandtodisplaymulticastresourceinformation.1263CommandSyntax
showresourcemcast
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastresourceinformation:
Switch#showresourcemcast
MCAST
Resource UsedCapability
=============================================================
McastEntry 01023
McastNormalMember02046
McastVlanMember 01023
RelatedCommands
None
8.1.7clearipmroute
CommandPurpose
Usethiscommandtoclearthemulticastroutingtableinformation.
CommandSyntax
clearipmroute(*|GRP_ADDR(SRC_IP)|)1264Parameter ParameterDescriptionParameterValue
GRP_ADDR Clearspecifygroup
addressmulticastrouteIPv4Address
SRC_ADDR Clearspecifysource
addressmulticastrouteIPv4Address
* Clearallmulticastroutes-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearallmulticastroutingtableinformation:
Switch#clearipmroute*
RelatedCommands
showipmroute
8.2IGMPCommands
8.2.1ipigmpaccess-group
CommandPurpose
Usethiscommandtoapplyanaccess-listtotheigmpinterface.
Toremovethissetting,usethenoformofthiscommand.1265CommandSyntax
ipigmpaccess-groupLIST
noipigmpaccess-group
Parameter ParameterDescriptionParameterValue
LIST Thenameoftheip
access-listtobeapplied.
Theformatofaccess-list
shouldbeipv4.Upto40characters
CommandMode
InterfaceConfiguration
Default
Access-groupisnotconfiguredonanyigmpinterfacebydefault.
Usage
NomatterthesourceiporthedestinationipinACEshouldtakeeffectrespectively.If
ACEsactionisdeny,thenthepacketshouldbeignored;otherwise,ifitmatchesone
whoseactionispermit,thenitshouldbeprocessedregularly.
Examples
Thisexampleshowshowtoapplytheaccess-listacl1totheinterfacevlan1:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpaccess-groupacl1
Thisexampleshowshowtoremovetheaccess-listacl1ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpaccess-group
RelatedCommands
showipigmpinterface12668.2.2ipigmpimmediate-leavegroup-list
CommandPurpose
Usethiscommandtoapplyanaccess-listtoconfigurewhichgroupssupport
immediate-leaveperinterface.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ipigmpimmediate-leavegroup-listLIST
noipigmpimmediate-leave
Parameter ParameterDescriptionParameterValue
LIST Thenameoftheip
access-listtobeapplied.
Theformatofaccess-list
shouldbeipv4.Upto40characters
CommandMode
InterfaceConfiguration
Default
Access-groupisnotconfiguredonanyigmpinterfacebydefault.
Usage
NomatterthesourceiporthedestinationipinACEshouldtakeeffectrespectively.If
ACEsactionisdeny,thenthepacketshouldbeignored;Otherwiseifitmatchesone
whoseactionispermit,thenitshouldbeprocessedregularly.
Examples
Thisexampleshowshowtoapplyanaccess-listtoconfigurewhichgroupssupport
immediately-leaveoninterfacevlan1:1267Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpimmediate-leavegroup-listacl1
Thisexampleshowshowtoremovetheaccess-listacl1ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpimmediate-leavegroup-list
RelatedCommands
showipigmpinterface
8.2.3ipigmplast-member-query-count
CommandPurpose
Usethiscommandtosetthevalueoflastmemberquerycount.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmplast-member-query-countCOUNT
noipigmplast-member-query-count
Parameter ParameterDescriptionParameterValue
COUNT Thevalueoflastmember
querycount2-7
CommandMode
InterfaceConfiguration
Default
2
Usage
None1268Examples
Thisexampleshowshowtosetthevalueoflastmemberquerycountto5:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmplast-member-query-count5
Thisexampleshowshowtoresetthevalueoflastmemberquerycounttodefault
value:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmplast-member-query-count
RelatedCommands
showipigmpinterface
ipigmplast-member-query-interval
8.2.4ipigmplast-member-query-interval
CommandPurpose
Usethiscommandtosetthevalueoflastmemberqueryinterval.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmplast-member-query-intervalINTERVAL
noipigmplast-member-query-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thelastmemberquery
intervalvalue(ms)1000-25500ms
CommandMode
InterfaceConfiguration1269Default
1000ms
Usage
None
Examples
Thisexampleshowshowtosetthelastmemberqueryintervalvalueto10000ms:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmplast-member-query-interval10000
Thisexampleshowshowtoresetthelastmemberqueryintervalvaluetodefault
value:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmplast-member-query-interval
RelatedCommands
showipigmpinterface
ipigmplast-member-query-count
8.2.5ipigmplimit
CommandPurpose
Usethiscommandtosetthemaxnumofgroupsallowed.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmplimitNUMBERexceptLIST
noipigmplimit
Parameter ParameterDescriptionParameterValue1270NUMBER Themaxnumofgroups1-2048
LIST Groupsnottobecounted
CommandMode
GlobalConfiguration&InterfaceConfiguration
Default
2048
Usage
Maxnumberofgroupsis2048bydefault,inglobalconfigurationmode,usethis
commandtosetnumberofgroupsforallports,ininterfaceconfigurationmode,use
thiscommandtosetnumberofgroupsforoneports
Examples
Thisexampleshowshowtosetthemaxnumofgroupsallowedto1000globally:
Switch#configureterminal
Switch(config)#ipigmplimit1000
Thisexampleshowshowtoresetthemaxnumofgroupstodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmplimit
RelatedCommands
showipigmpinterface
8.2.6ipigmpmroute-proxy
CommandPurpose
Usethiscommandtosetthemroute-proxyportonthisinterface.
Toremoveit,usethenoformofthiscommand.1271CommandSyntax
ipigmpmroute-proxyIFNAME
noipigmpmroute-proxy
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacenameofthe
mroute-proxyportSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedtosetthemroute-proxyportontheinterface.Onlyone
mroute-proxyportcanbesetontheinterface.Whensetitagain,thenewsettingwill
overwritetheoldone.
Examples
Thisexampleshowshowtosetthemroute-proxyporttoeth-0-1onthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpmroute-proxyeth-0-1
Thisexampleshowshowtoremovethemroute-proxyportonthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpmroute-proxy
RelatedCommands
ipigmpproxy-service12728.2.7ipigmpproxy-service
CommandPurpose
Usethiscommandtoenableigmpmrouteproxyserviceontheinterface.
Todisableit,usethenoformofthiscommand.
CommandSyntax
ipigmpproxy-service
noipigmpproxy-service
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedwithcommandipigmpmroute-proxyandtosettheupstream
interfaceoftheigmpgroup.
Examples
Thisexampleshowshowtoenableigmpmrouteproxyserviceonthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpproxy-service
Thisexampleshowshowtodisableigmpmrouteproxyservice:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpproxy-service
RelatedCommands
ipigmpmroute-proxy12738.2.8ipigmpquerier-timeout
CommandPurpose
Usethiscommandtosettheigmppreviousqueriertimeoutvalue.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpquerier-timeoutINTERVAL
noipigmpquerier-timeout
Parameter ParameterDescriptionParameterValue
INTERVAL Theigmppreviousquerier
timeoutvalue60-300seconds
CommandMode
InterfaceConfiguration
Default
255s
Usage
None
Examples
Thisexampleshowshowtosettheigmppreviousqueriertimeoutvalueto100
seconds:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpquerier-timeout100
Thisexampleshowshowtoresettheigmppreviousqueriertimeoutvaluetodefault
value:1274Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpquerier-timeout
RelatedCommands
ipigmpquery-interval
ipigmpquery-max-response-time
8.2.9ipigmpquery-interval
CommandPurpose
Usethiscommandtosettheigmpqueryinterval.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpquery-intervalINTERVAL
noipigmpquery-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thevalueofigmpquery
interval2-18000
CommandMode
InterfaceConfiguration
Default
125s
Usage
None1275Examples
Thisexampleshowshowtosettheigmpqueryintervalto300seconds:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpquery-interval300
Thisexampleshowshowtoresettheigmpqueryintervaltodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpquery-interval
RelatedCommands
ipigmpquerier-timeout
ipigmpquery-max-response-time
8.2.10ipigmpquery-max-response-time
CommandPurpose
Usethiscommandtosettheigmpquerymaxresponsetime.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpquery-max-response-timeINTERVAL
noipquery-max-response-time
Parameter ParameterDescriptionParameterValue
INTERVAL Theigmpquerymax
responsetime1-25
CommandMode
InterfaceConfiguration
Default
10seconds1276Usage
Querymaxresponsetimemustbelessthanigmpqueryinterval.
Examples
Thisexampleshowshowtosettheigmpquerymaxresponsetimeto20seconds.:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpquery-max-response-time20
Thisexampleshowshowtoresettheigmpquerymaxresponsetimetodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpquery-max-response-time
RelatedCommands
ipigmpquerier-timeout
ipigmpquery-interval
8.2.11ipigmprobustness-variable
CommandPurpose
Usethiscommandtosettheigmpquerierrobustnessvariablevalue.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmprobustness-variableVALUE
noiprobustness-variable
Parameter ParameterDescriptionParameterValue
VALUE Theigmpquerier
robustnessvariablevalue2-7
CommandMode
InterfaceConfiguration1277Default
2
Usage
None
Examples
Thisexampleshowshowtosettheigmpquerierrobustnessvariablevalueto6:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmprobustness-variable6
Thisexampleshowshowtoresettheigmpquerierrobustnessvariablevalueto
defaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmprobustness-variable
RelatedCommands
showipigmpinterface
8.2.12ipigmpversion
CommandPurpose
Usethiscommandtosettheigmpversiononinterface.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpversionVER
noipigmpversion
Parameter ParameterDescriptionParameterValue
VER Theigmpversiononthe
interface1-31278CommandMode
InterfaceConfiguration
Default
2
Usage
None
Examples
Thisexampleshowshowtosettheigmpversion1ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipigmpversion1
Thisexampleshowshowtoresettheigmpversiontodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipigmpversion
RelatedCommands
showipigmpinterface
8.2.13ipigmpstatic-group
CommandPurpose
Usethiscommandtoconfigurethestaticmulticastgrouponinterface.
Todeletestaticgroup,usethenoformofthiscommand.
CommandSyntax
ipigmpstatic-groupGRP_ADDR(sourceSRC_ADDR|)
noipigmpstatic-groupGRP_ADDR(sourceSRC_ADDR|)
Parameter ParameterDescriptionParameterValue1279GRP_ADDR Themulticastgroup
addressIPv4Address
SRC_ADDR Themulticastsource
addressIPv4Address
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoconfigurethestaticIGMPgrouponinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipigmpstatic-group226.1.2.3
Switch(config-if)#ipigmpstatic-group226.1.2.4source1.2.3.4
Thisexampleshowshowtodeletestaticigmpgrouponinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipigmpstatic-group226.1.2.3
RelatedCommands
showipigmpgroups
8.2.14ipigmpssm-mapenable
CommandPurpose
Usethiscommandtoenableigmpssmmapping.
Todisablessmmapping,usethenoformofthiscommand.1280CommandSyntax
ipigmpssm-mapenable
noipigmpssm-mapenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoenableigmpssmmapping:
Switch#configureterminal
Switch(config)#ipigmpssm-mapenable
Thisexampleshowshowtodisableigmpssmmapping:
Switch#configureterminal
Switch(config)#noipigmpssm-mapenable
RelatedCommands
None
8.2.15ipigmpssm-mapstatic
CommandPurpose
Usethiscommandtosetigmpssmmapping.
Tocancelssmmappingsetting,usethenoformofthiscommand.
CommandSyntax
ipigmpssm-mapstaticLISTSRC_ADDR1281noipigmpssm-mapstaticLISTSRC_ADDR
Parameter ParameterDescriptionParameterValue
LIST Specifymulticastgroup
addressrangeaccesslistUpto40characters
SRC_ADDR MulticastsourceaddressIPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosetigmpssmmapping:
Switch#configureterminal
Switch(config)#ipigmpssm-mapstaticipacl192.168.1.1
Thisexampleshowshowtounsetigmpssmmapping:
Switch#configureterminal
Switch(config)#noipigmpssm-mapstaticipacl192.168.1.1
RelatedCommands
None
8.2.16clearipigmp
CommandPurpose
Usethiscommandtoclearigmpgroups.1282CommandSyntax
clearipigmpgroup(*|GRP_ADDR|)
Parameter ParameterDescriptionParameterValue
* Allmulticastgroupaddress-
GRP_ADDR MulticastgroupaddressIPv4Address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearigmpgroupall:
Switch#clearipigmp
Switch#clearipigmpgroup*
Thisexampleshowshowtoclearigmpspecifiedgroup:
Switch#clearipigmpgroup228.1.1.1
RelatedCommands
showipigmpgroups
8.2.17clearipigmpinterface
CommandPurpose
Usethiscommandtoclearigmpgroupsonspecifiedinterface.1283CommandSyntax
clearipigmpinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearigmpgrouponspecifiedinterface:
Switch#clearipigmpgroupinterfaceeth-0-1
RelatedCommands
showipigmpgroups
8.2.18showipigmpgroups
CommandPurpose
Usethiscommandtoshowtheinformationaboutigmpgroups.
CommandSyntax
showipigmpgroupsGRP_ADDR(detail|)1284Parameter ParameterDescriptionParameterValue
GRP_ADDR Specifymulticastgroup
addressIPv4Address
detail DetailedInformation -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythedetailinformationaboutigmpgroups:
Switch#showipigmpgroupsdetail
Interface:eth-0-1
Group:227.0.0.1
Uptime:00:00:33
Groupmode:Exclude(Expires:00:04:18)
Lastreporter:10.0.1.100
Sourcelistisempty
RelatedCommands
None
8.2.19showipigmpgroupsinterface
CommandPurpose
Usethiscommandtoshowtheinformationaboutigmpgroupsoninterface.1285CommandSyntax
showipigmpgroupsIFNAME(GRP_ADDR|)(detail|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
GRP_ADDR Specifymulticastgroup
addressIPv4Address
detail DetailedInformation -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutigmpgroupsoninterface
eth-0-1:
Switch#showipigmpgroupseth-0-1
IGMPConnectedGroupMembership
GroupAddressInterfaceUptimeExpiresLastReporter
227.0.0.1eth-0-100:01:1100:04:1610.0.1.100
RelatedCommands
None12868.2.20showipigmpgroupscount
CommandPurpose
Usethiscommandtoshowigmpgroupnumber.
CommandSyntax
showipigmpgroups(IFNAME|)count
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheigmpgroupnumberoninterfaceeth-0-1:
Switch#showipigmpgroupseth-0-1count
Dynamicmulticastgroupscount:1
Staticmulticastgroupscount:0
Totalmulticastgroupscount:1
RelatedCommands
None12878.2.21showipigmpinterface
CommandPurpose
Usethiscommandtoshowtheinformationaboutigmponinterface.
CommandSyntax
showipigmpinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutigmponinterfaceeth-0-1:
Switch#showipigmpinterfaceeth-0-1
Interfaceeth-0-1(Index1)
IGMPEnabled,Active,Querier,Version2(default)
Internetaddressis10.0.1.1
IGMPinterfacelimitis8192
IGMPinterfacehas1group-recordstates
IGMPactivity:97joins,0leaves
IGMPqueryintervalis125seconds
IGMPqueriertimeoutis255seconds
IGMPmaxqueryresponsetimeis10seconds
Lastmemberqueryresponseintervalis1000milliseconds1288GroupMembershipintervalis260seconds
Lastmemeberquerycountis2
RobustnessVariableis2
RelatedCommands
None
8.3IGMPSnoopingCommands
8.3.1ipigmpsnooping
CommandPurpose
Usethiscommandtoenableigmpsnooping.
Todisableigmpsnooping,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)
noipigmpsnooping(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Enable
Usage
IgmpSnoopingcanbeenabledgloballyandpervlan.Bydefault,igmpsnoopingis
enabledgloballyandpervlan.1289Examples
Thisexampleshowshowtoenableigmpsnooping:
Switch#configureterminal
Switch(config)#ipigmpsnooping
Thisexampleshowshowtodisableigmpsnooping:
Switch#configureterminal
Switch(config)#noipigmpsnooping
Thisexampleshowshowtoenableigmpsnoopingonvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10
Thisexampleshowshowtodisableigmpsnoopingonvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10
RelatedCommands
showipigmpsnooping
8.3.2ipigmpsnoopingfast-leave
CommandPurpose
Usethiscommandtoenableigmpsnoopingfastleave.
Todisableit,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)fast-leave
noipigmpsnooping(vlanVLAN_ID|)fast-leave
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration1290Default
Disable
Usage
Thiscommandwilloverideimmediate-leavesetting.
Examples
Thisexampleshowshowtoenableigmpsnoopingfast-leave:
Switch#configureterminal
Switch(config)#ipigmpsnoopingfast-leave
Thisexampleshowshowtodisableigmpsnoopingfast-leave:
Switch#configureterminal
Switch(config)#noipigmpsnoopingfast-leave
RelatedCommands
showipigmpsnoopingglobal
8.3.3ipigmpsnoopinglast-member-query-interval
CommandPurpose
Usethiscommandtosetthelastmemberqueryintervalofigmpsnooping.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)last-member-query-intervalINTERVAL
noipigmpsnooping(vlanVLAN_ID|)last-member-query-interval
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Thelastmemberquery
interval1000-25500ms1291CommandMode
GlobalConfiguration
Default
1000ms
Usage
Igmplastmemberqueryintervalcanbeconfiguredpervlan.Thedefaultis1000ms
andtherangeis1000-25500ms.
Examples
Thisexampleshowshowtosetthelastmemberqueryinterval:
Switch#configureterminal
Switch(config)#ipigmpsnoopinglast-member-query-interval2000
Thisexampleshowshowtoresetthelastmemberqueryintervaltodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmpsnoopinglast-member-query-interval
RelatedCommands
showipigmpsnooping
showipigmpsnoopingvlan
8.3.4ipigmpsnoopingglobalsource-address
CommandPurpose
Usethiscommandtosettheglobalsourceaddress.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingglobalsource-addressIP_ADDR
noipigmpsnoopingglobalsource-address1292Parameter ParameterDescriptionParameterValue
IP_ADDR TheIPv4addressof
sourceaddressIPv4Address
CommandMode
GlobalConfiguration
Default
0.0.0.0
Usage
Willuseglobalconfiguredsource-addressifvlanisnotconfiguredotherwiseuse
source-addressconfigfromvlan.
Examples
Thisexampleshowshowtosettheglobalsourceaddressto1.3.4.5:
Switch#configureterminal
Switch(config)#ipigmpsnoopingglobalsource-address1.3.4.5
Thisexampleshowshowtoresettheglobalsourceaddresstodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmpsnoopingglobalsource-address
RelatedCommands
showipigmpsnoopingquerier
8.3.5ipigmpsnoopingmax-member-num
CommandPurpose
Usethiscommandtosetthemaxallowedmembernumber.
Toresetittodefaultvalue,usethenoformofthiscommand.1293CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)max-member-numNUMBER
noipigmpsnooping(vlanVLAN_ID|)max-member-num
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
NUMBER Themaxmembernumber
ofigmpsnooping1-8192
CommandMode
GlobalConfiguration
Default
2048
Usage
None
Examples
Thisexampleshowshowtosetthemaxmembernumberofigmpsnoopingto1024:
Switch#configureterminal
Switch(config)#ipigmpsnoopingmax-member-num1024
Thisexampleshowshowtoresetthemaxmembernumbertodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmpsnoopingmax-member-num
RelatedCommands
showipigmpsnoopingglobal
showipigmpsnoopingvlan12948.3.6ipigmpsnoopingquery-interval
CommandPurpose
Usethiscommandtosettheigmpsnoopingquery-interval.
Toresetthequery-intervaltodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)query-intervalinterval
noipigmpsnooping(vlanVLAN_ID|)query-interval
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Thequery-intervalofigmp
snooping2-18000seconds
CommandMode
GlobalConfiguration
Default
125s
Usage
Queryintervalcannotbelessthanigmpsnoopingquerymaxresponsetime.
Examples
Thisexampleshowshowtosettheigmpsnoopingqueryintervalto64s:
Switch#configureterminal
Switch(config)#ipigmpsnoopingquery-interval64
Thisexampleshowshowtoresetthequery-intervaltodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmpsnoopingquery-interval1295RelatedCommands
showipigmpsnoopingquerier
showipigmpsnoopingqueriervlan
8.3.7ipigmpsnoopingquery-max-response-time
CommandPurpose
Usethiscommandtosettheigmpsnoopingquery-interval.
Toresetthequery-intervaltodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)query-max-response-timeTIME
noipigmpsnooping(vlanVLAN_ID|)query-max-response-time
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
TIME Thequerymaxresponse
timeinseconds1-25
CommandMode
GlobalConfiguration
Default
10s
Usage
Queryintervalcannotbelessthanigmpsnoopingquerymaxresponsetime.
Examples
Thisexampleshowshowtosettheigmpsnoopingquerymaxresponsetimeto15s:1296Switch#configureterminal
Switch(config)#ipigmpsnoopingquery-max-response-time15
Thisexampleshowshowtoresetthequerymaxresponsetimetodefaultvalue:
Switch#configureterminal
Switch(config)#noipigmpsnoopingquery-max-response-time
RelatedCommands
showipigmpsnoopingquerier
showipigmpsnoopingqueriervlan
8.3.8ipigmpsnoopingreport-suppression
CommandPurpose
Usethiscommandtoenablereportsuppression.
Todisablereportsuppression,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)report-suppression
noipigmpsnooping(vlanVLAN_ID|)report-suppression
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Enable
Usage
WillnotdoreportsuppressionwhenIGMPsnoopingworksinv3mode.1297Examples
Thisexampleshowshowtoenablethereportsuppression:
Switch#configureterminal
Switch(config)#ipigmpsnoopingreport-suppression
Thisexampleshowshowtodisablereportsuppression:
Switch#configureterminal
Switch(config)#noipigmpsnoopingreport-suppression
RelatedCommands
showipigmpsnooping
showipigmpsnoopingvlan
8.3.9ipigmpsnoopingversion
CommandPurpose
Usethiscommandtosetigmpsnoopingversion.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)versionVER
noipigmpsnooping(vlanVLAN_ID|)version
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
VER Igmpsnoopingversion1-3
CommandMode
GlobalConfiguration
Default
21298Usage
Thedefaultversionis2.
Examples
Thisexampleshowshowtosettheigmpsnoopingversion1:
Switch#configureterminal
Switch(config)#ipigmpsnoopingversion1
RelatedCommands
showipigmpsnooping
showipigmpsnoopingvlan
8.3.10ipigmpsnoopingdiscard-unknown
CommandPurpose
Usethiscommandtosetdiscardunknownmulticasttraffic.
Todisablediscardunknown,usethenoformofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)discard-unknown
noipigmpsnooping(vlanVLAN_ID|)discard-unknown
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Enabledbydefault,unknownmulticasttrafficwillfloodinvlan.1299Usage
None
Examples
Thisexampleshowshowtoenablediscard-unknownmulticasttraffic:
Switch#configureterminal
Switch(config)#ipigmpsnoopingdiscard-unknown
RelatedCommands
showipigmpsnooping
showipigmpsnoopingvlan
8.3.11ipigmpsnoopinglimit-mrouter-forward
CommandPurpose
Usethiscommandtoenablethereportpacketforwardtomrouterportwhenl2mcast
groupresourceisfull.
Todisableforwadingtomrouterwhenl2mcastgroupresourceisfull,usethenoform
ofthiscommand.
CommandSyntax
ipigmpsnooping(vlanVLAN_ID|)limit-mrouter-forward
noipigmpsnooping(vlanVLAN_ID|)limit-mrouter-forward
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Whenigmpsnoopinggroupisfull,theotherreportwillnotforwardtomrouter.1300Usage
None
Examples
Thisexampleshowshowtoenablethereportforwardtomrouterwhenl2mcisfull:
Switch#configureterminal
Switch(config)#ipigmpsnoopinglimit-mrouter-forward
RelatedCommands
showipigmpsnooping
showipigmpsnoopingvlan
8.3.12ipigmpsnoopingqueriertcn
CommandPurpose
UsethiscommandtosetIGMPsnoopingquerierTCNrelatedparameters.Toresetit
todefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingqueriertcn(enable|query-countCOUNT|query-interval
INTERVAL|query-max-response-timeTIME)
noipigmpsnoopingqueriertcn(enable|query-count|query-interval|query-max-
response-time)
Parameter ParameterDescriptionParameterValue
enable IGMPquerierTCNquery
enable-
COUNT IGMPquerierTCNquery
count,defaultis2.1-10
INTERVAL IGMPquerierTCNquery
interval,defaultis10s.1-255seconds1301TIME IGMPquerierTCNquery
maxresponsetime,default
is5s1-9seconds
CommandMode
GlobalConfiguration
Default
Thisfeatureisenabledbydefault,defaultquerycountis2,defaultqueryintervalis
10s,maximumresponsetimeis5s
Usage
None
Examples
Thisexampleshowshowtouseipigmpsnoopingqueriertcncommand:
Switch#configureterminal
Switch(config)#ipigmpsnoopingqueriertcnquery-count2
RelatedCommands
showipigmpsnoopingquerier
8.3.13ipigmpsnoopingvlanaccess-group
CommandPurpose
Usethiscommandtosetigmpsnoopingaccessgrouponvlan.Toremovethissetting,
usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDaccess-groupLIST
noipigmpsnoopingvlanVLAN_IDaccess-group1302Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
LIST IPNamedStandard
Accesslist.Upto40characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoapplyaccess-grouponvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10access-groupacl
Thisexampleshowshowtoremoveaccess-groupfromvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10access-group
RelatedCommands
showipigmpsnoopingvlan
8.3.14ipigmpsnoopingvlanmrouterinterface
CommandPurpose
Usethiscommandtosetigmpsnoopingmrouterinterfaceonvlan.Toremovethis
setting,usethenoformofthiscommand.1303CommandSyntax
ipigmpsnoopingvlanVLAN_IDmrouterinterfaceIFNAME
noipigmpsnoopingvlanVLAN_IDmrouterinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
IFNAME Mrouterinterfaceonthis
vlanSupport
physical/aggregationports
CommandMode
GlobalConfiguration
Default
None
Usage
Thespecificedinterfacemusthavealreadyjoinedtheconfiguredvlan.
Examples
Thisexampleshowshowtoseteth-0-1asmrouterinterfaceonvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10mrouterinterfaceeth-0-1
Thisexampleshowshowtounseteth-0-1asmrouterinterfaceonvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10mrouterinterfaceeth-0-1
RelatedCommands
showipigmpsnoopingvlan13048.3.15ipigmpsnoopingvlanmrouter-aging-interval
CommandPurpose
Usethiscommandtosetigmpsnoopingmrouterinterfaceagingintervalonvlan.To
resetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDmrouter-aging-intervalINTERVAL
noipigmpsnoopingvlanVLAN_IDmrouter-aging-interval
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Dynamicmrouterinterface
agingintervalonthisvlan
inseconds1-65535seconds
CommandMode
GlobalConfiguration
Default
255s
Usage
None
Examples
Thisexampleshowshowtosetdynamicmrouterinterfaceagingintervalas100
secondsonvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10mrouter-aging-interval100
Thisexampleshowshowtoresetdynamicmrouterinterfaceagingintervalasdefault
onvlan10:1305Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10mrouter-aging-interval
RelatedCommands
showipigmpsnoopingvlan
8.3.16ipigmpsnoopingvlanmrouter-port-discard
CommandPurpose
Usethiscommandtosetigmpsnoopingmrouterportdisacrdonvlan.Toresetitto
defaultvalue,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDmrouter-port-discard
noipigmpsnoopingvlanVLAN_IDmrouter-port-discard
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtosetthemrouterportdiscardonvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10mrouter-port-discard1306Thisexampleshowshowtosetthedefaultmrouterportdiscardactiononvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10mrouter-port-discard
RelatedCommands
showipigmpsnoopingvlan
8.3.17ipigmpsnoopingvlanquerier
CommandPurpose
Usethiscommandtoenableigmpsnoopingquerieronvlan.Toresetittodefault,use
thenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDquerier
noipigmpsnoopingvlanVLAN_IDquerier
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoenablequerieronvlan10:1307Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10querier
Thisexampleshowshowtodisablequerieronvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10querier
RelatedCommands
showipigmpsnoopingqueriervlan
8.3.18ipigmpsnoopingvlanquerieraddress
CommandPurpose
Usethiscommandtosetigmpsnoopingquerieraddressonvlan.Toremovethis
setting,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDquerieraddressIP_ADDR
noipigmpsnoopingvlanVLAN_IDquerieraddressIP_ADDR
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
IP_ADDR Theaddressofquerieron
thisvlanIPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
Willuseglobalconfiguredsource-addressifvlanisnotconfiguredotherwiseuse
source-addressconfigfromvlan.1308Examples
Thisexampleshowshowtosetquerieraddressonvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10querieraddress1.1.1.1
Thisexampleshowshowtounsetquerieraddressonvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10querieraddress
RelatedCommands
showipigmpsnoopingqueriervlan
8.3.19ipigmpsnoopingvlanquerier-timeout
CommandPurpose
Usethiscommandtosetigmppreviousqueriertimeoutintervalonthisvlan.Toreset
ittodefault,usethenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDquerier-timeoutINTERVAL
noipigmpsnoopingvlanVLAN_IDquerier-timeout
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Theigmppreviousquerier
timeoutintervalonthis
vlaninseconds60-300seconds
CommandMode
GlobalConfiguration
Default
255s1309Usage
None
Examples
Thisexampleshowshowtosetpreviousqueriertimeoutintervalas100secondson
vlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10querier-timeout100
Thisexampleshowshowtoresetpreviousqueriertimeoutintervalonvlan10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10querier-timeout
RelatedCommands
showipigmpsnoopingqueriervlan
8.3.20ipigmpsnoopingvlanstatic-group
CommandPurpose
Usethiscommandtoaddstaticigmpgrouponthisvlan.Toremovethissetting,use
thenoformofthiscommand.
CommandSyntax
ipigmpsnoopingvlanVLAN_IDstatic-groupGRP_ADDR(sourceSRC_ADDR|)
interfaceIFNAME
noipigmpsnoopingvlanVLAN_IDstatic-groupGRP_ADDR(sourceSRC_ADDR|)
interfaceIFNAME
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
GRP_ADDR Theaddressofgroup
configuredonthespecified
interface.IPv4Address1310SRC_ADDR Theaddressofsource
configuredonthespecified
interface.IPv4Address
IFNAME Theinterfaceconfigured
asamemberofspecified
grouponthisvlanSupport
physical/aggregationports
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoaddgroup238.1.1.1oninterfaceeth-0-11ofvlan10:
Switch#configureterminal
Switch(config)#ipigmpsnoopingvlan10static-group238.1.1.1interfaceeth-0-11
Thisexampleshowshowtoremovegroup238.1.1.1frominterfaceeth-0-11ofvlan
10:
Switch#configureterminal
Switch(config)#noipigmpsnoopingvlan10static-group238.1.1.1interfaceeth-0-11
RelatedCommands
showipigmpsnoopinggroup
8.3.21clearipigmpsnoopinggroup
CommandPurpose
Usethiscommandtoclearalligmpsnoopinggroups.1311CommandSyntax
clearipigmpsnoopinggroup(*|GRP_ADDR)
Parameter ParameterDescriptionParameterValue
* Allmulticastgroupaddress-
GRP_ADDR MulticastgroupaddressIPv4Address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearigmpsnoopinggroupall:
Switch#clearipigmpsnoopinggroup*
RelatedCommands
None
8.3.22clearipigmpsnoopingvlan
CommandPurpose
Usethiscommandtoclearigmpsnoopinggroupsonvlan.
CommandSyntax
clearipigmpsnoopingvlanVLAN_ID1312Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearigmpsnoopinggrouponvlan10:
Switch#clearipigmpsnoopingvlan10
RelatedCommands
None
8.3.23clearipigmpsnoopingmroutervlan
CommandPurpose
Usethiscommandtoclearigmpsnoopingmrouteronvlan.
CommandSyntax
clearipigmpsnoopingmroutervlanVLAN_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-40941313CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearigmpsnoopingmrouteronvlan10:
Switch#clearipigmpsnoopingmroutervlan10
RelatedCommands
clearipigmpsnoopingmrouter
8.3.24clearipigmpsnoopingmrouter
CommandPurpose
Usethiscommandtoclearigmpsnoopingmrouter.
CommandSyntax
clearipigmpsnoopingmrouter
CommandMode
PrivilegedEXEC
Default
None1314Usage
None
Examples
Thisexampleshowshowtoclearigmpsnoopingmrouterall:
Switch#clearipigmpsnoopingmrouter
RelatedCommands
clearipigmpsnoopingmroutervlan
8.3.25showipigmpsnoopingglobal
CommandPurpose
Usethiscommandtoshowtheglobalconfigurationsofigmpsnooping.
CommandSyntax
showipigmpsnoopingglobal
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayglobalconfigurationsofigmpsnooping:
Switch#showipigmpsnoopingglobal
GlobalIgmpSnoopingConfiguration1315-------------------------------------------------
IgmpSnooping :Enabled
IgmpSnoopingFast-Leave :Disabled
IgmpSnoopingVersion :2
IgmpSnoopingRobustnessVariable:2
IgmpSnoopingMax-Member-Number:2048
IgmpSnoopingUnknownMulticastBehavior:Flood
IgmpSnoopingReport-Suppression:Enabled
RelatedCommands
None
8.3.26showipigmpsnoopinggroups
CommandPurpose
Usethiscommandtoshowtheigmpsnoopinggroups.
CommandSyntax
showipigmpsnoopinggroups
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayigmpsnoopinggroups:
Switch#showipigmpsnoopinggroups
VLANInterfaceGroup-AddressUptimeExpires-time
1eth-0-1227.0.0.100:03:4400:04:181316RelatedCommands
None
8.3.27showipigmpsnoopinggroupsvlan
CommandPurpose
Usethiscommandtoshowtheigmpsnoopinggroupsonvlan.
CommandSyntax
showipigmpsnoopinggroupsvlanVLAN_ID(GRP_ADDR|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
GRP_ADDR Theaddressofgroup IPv4Address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayigmpsnoopinggroupsonvlan1:
Switch#showipigmpsnoopinggroupsvlan1
IGMPSnoopinggroupsforvlan1
Interface:eth-0-1
Group:227.0.0.1
Uptime:00:05:24
Groupmode:Exclude(Expires:00:04:20)1317Lastreporter:10.0.1.100
Sourcelistisempty
RelatedCommands
None
8.3.28showipigmpsnoopinggroupscount
CommandPurpose
Usethiscommandtoshowtheigmpsnoopinggroupsnumber.
CommandSyntax
showipigmpsnoopinggroups(vlanVLAN_ID|)count
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayigmpsnoopinggroupsnumberonvlan1:
Switch#showipigmpsnoopinggroupsvlan1count
Dynamicmulticastgroupscount:1
Staticmulticastgroupscount:0
Totalmulticastgroupscount:11318RelatedCommands
None
8.3.29showipigmpsnoopingquerier
CommandPurpose
Usethiscommandtoshowtheconfigurationsofigmpsnoopingquerierinformation.
CommandSyntax
showipigmpsnoopingquerier(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheconfigurationsofigmpsnoopingquerieron
vlan1:
Switch#showipigmpsnoopingqueriervlan1
GlobalIgmpSnoopingQuerierConfiguration
-------------------------------------------------
Version :2
Last-Member-Query-Interval(msec):1000
Last-Member-Query-Count:2
Max-Query-Response-Time(sec):10
Query-Interval(sec):1251319GlobalSource-Address:0.0.0.0
TCNQueryCount :2
TCNQueryInterval(sec):10
TCNQueryMaxResposeTime(sec):5
Vlan1:IGMPsnoopingquerierstatus
--------------------------------------------
Electedquerieris:0.0.0.0
--------------------------------------------
Adminstate :Disabled
Adminversion :2
Operationalstate :Non-Querier
Querieroperationaladdress:0.0.0.0
Querierconfigureaddress:N/A
Last-Member-Query-Interval(msec):1000
Last-Member-Query-Count:2
Max-Query-Response-Time(sec):10
Query-Interval(sec):125
Querier-Timeout(sec):255
RelatedCommands
None
8.3.30showipigmpsnoopingmrouter
CommandPurpose
Usethiscommandtoshowtheinformationofigmpsnoopingmrouterportonvlan.
CommandSyntax
showipigmpsnoopingmrouter(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None1320Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofigmpsnoopingmrouterporton
vlan1:
Switch#showipigmpsnoopingmroutervlan1
InterfaceModeUptimeExpires-time
eth-0-11static--
RelatedCommands
None
8.3.31showipigmpsnoopingvlan
CommandPurpose
Usethiscommandtoshowtheconfigurationsofigmpsnoopingonvlan.
CommandSyntax
showipigmpsnooping(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None1321Examples
Thisexampleshowshowtodisplaytheconfigurationsofigmpsnoopingonvlan1:
Switch#showipigmpsnoopingvlan1
GlobalIgmpSnoopingConfiguration
-------------------------------------------------
IgmpSnooping :Enabled
IgmpSnoopingFast-Leave :Disabled
IgmpSnoopingVersion :2
IgmpSnoopingRobustnessVariable:2
IgmpSnoopingMax-Member-Number:2048
IgmpSnoopingUnknownMulticastBehavior:Flood
IgmpSnoopingReport-Suppression:Enabled
Vlan1
-----------
IgmpSnooping :Enabled
IgmpSnoopingFast-Leave :Disabled
IgmpSnoopingReport-Suppression:Enabled
IgmpSnoopingVersion :2
IgmpSnoopingRobustnessVariable:2
IgmpSnoopingMax-Member-Number:2048
IgmpSnoopingUnknownMulticastBehavior:Flood
IgmpSnoopingGroupAccess-list:N/A
IgmpSnoopingMrouterPort :
IgmpSnoopingMrouterPortAgingInterval(sec):255
RelatedCommands
None
8.3.32showresourcel2mcast
CommandPurpose
UsethiscommandtodisplaytheresourceusageofL2mcast.
CommandSyntax
showresourcel2mcast
CommandMode
PrivilegedEXEC1322Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcel2mcastcommand:
Switch#showresourcel2mcast
L2MCAST
Resource UsedCapability
=============================================================
L2McastEntry 02048
RelatedCommands
None
8.4PIMCommands
8.4.1ippimaccept-register
CommandPurpose
Usethiscommandtoapplyanaccess-listtolimitthepimregistermessagereceived
byrp.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ippimaccept-registerlistLIST
noippimaccept-register
Parameter ParameterDescriptionParameterValue1323LIST Thenameoftheaccess-
listtobeapplied.Upto40characters
CommandMode
GlobalConfiguration
Default
None
Usage
Thisfeatureisusedtopreventtheunauthorizeduserregisteredtotheswitch.
Whenenablethisfeature,thesystemwillsendbackaregisterstopmessagewhen
theunauthorizedregistermessageisreceived.
Examples
Thisexampleshowshowtoapplytheaccess-listacl1tolimitthepimregister
messagereceivedbyrp:
Switch#configureterminal
Switch(config)#ippimaccept-registerlistacl1
Thisexampleshowshowtoremovethelimits:
Switch#configureterminal
Switch(config)#noippimaccept-register
RelatedCommands
None
8.4.2ippimanycast-rp
CommandPurpose
Usethiscommandtosetanycastrendezvous-point.
Toremovetheconfigurations,usethenoformofthiscommand.1324CommandSyntax
ippimanycast-rpANYCAST_RP_ADDRANYCAST_MEMBER_ADDR
noippimanycast-rpANYCAST_RP_ADDR(ANYCAST_MEMBER_ADDR|)
Parameter ParameterDescriptionParameterValue
ANYCAST_RP_ADDRAnycastrpaddress IPv4Address
ANYCAST_MEMBER_AD
DRAnycastmemberrp
addressIPv4Address
CommandMode
GlobalConfiguration
Default
None.
Usage
Shouldconfigureeveryrouterinthenetwork,andmustconfiguresameRPaddress.
Examples
Thisexampleshowshowtosetanycastrendezvous-point:
Switch#configureterminal
Switch(config)#ippimanycast-rp10.10.10.110.10.10.11
Thisexampleshowshowtoremovethememberinanycastrendezvous-point:
Switch#configureterminal
Switch(config)#noippimanycast-rp10.10.10.110.10.10.11
RelatedCommands
None13258.4.3ippimbsr-candidate
CommandPurpose
Usethiscommandtoconfigurethecandidatebootstraprouter(candidateBSR).
Toremovetheconfigurations,usethenoformofthiscommand.
CommandSyntax
ippimbsr-candidateIFNAME(MASK_LEN(PRIORITY)|)
noippimbsr-candidate
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
MASK_LEN HashmasklengthforRP
selection0-32
PRIORITY Priorityvalueforcandidate
bootstraprouter0-255
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoconfigurethecandidateBSR:1326Switch#configureterminal
Switch(config)#ippimbsr-candidateeth-0-1
ThisexampleshowshowtocancelthecandidateBSRconfigured:
Switch#configureterminal
Switch(config)#noippimbsr-candidate
RelatedCommands
ippimbsr-border
8.4.4ippimbsr-border
CommandPurpose
Usethiscommandtoconfiguretheborderofpimdomain.
Toremovetheconfigurationsoftheborderofpimdomain,usethenoformofthis
command.
CommandSyntax
ippimbsr-border
noippimbsr-border
CommandMode
InterfaceConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoconfiguretheborderofpimdomain:
Switch#configureterminal
Switch(config-if)#ippimbsr-border1327Thisexampleshowshowtoremovetheconfigurationsoftheborderofpimdomain:
Switch#configureterminal
Switch(config-if)#noippimbsr-border
RelatedCommands
ippimbsr-candidate
8.4.5ippimdr-priority
CommandPurpose
UsethiscommandtoconfigureDRpriority.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ippimdr-priorityPRIORITY
noippimdr-priority
Parameter ParameterDescriptionParameterValue
PRIORITY TheDRpriority 0-4294967294
CommandMode
InterfaceConfiguration
Default
1
Usage
WhenahellomessagewithoutDRpriorityisreceived,itwillberegardedtohavethe
maxDRpriorityandtobeelectedasDR.Whenmorethanoneroutershello
messagesdonothaveDRpriority,theonewhichhavethehighestipaddresswillbe
electedasDR.1328Examples
ThisexampleshowshowtosetthepimrouterDRpriorityto1000:
Switch#configureterminal
Switch(config-if)#ippimdr-priority1000
ThisexampleshowshowtosresetthepimrouterDRprioritytodefaultvalue:
Switch#configureterminal
Switch(config-if)#noippimdr-priority
RelatedCommands
None
8.4.6ippimexclude-genid
CommandPurpose
Usethiscommandtoexcludegenerationidoptionfrompimhellopacketsonthis
interface.
Toresettothedefaultsetting,usethenoformofthiscommand.
CommandSyntax
ippimexclude-genid
noippimexclude-genid
CommandMode
InterfaceConfiguration
Default
Disable
Usage
GenerationIDistheIDofaPIMneighbour,itiscarriedinPIMhellomessage,the
receiverdevicewillrecordeveryreceivedGenerationIDinthehellopacketandcheck1329ifGenerationIDhaschanged,ifGenerationIDchanged,willconsiderneighbourstate
changedandrestartstatemachine.
Examples
Thisexampleshowshowtoexcludegenerationidoptionfrompimhellopacketson
thisinterface:
Switch#configureterminal
Switch(config-if)#ippimexclude-genid
Thisexampleshowshowtoresetthegenerationidoptiontothedefaultsetting:
Switch#configureterminal
Switch(config-if)#noippimexclude-genid
RelatedCommands
None
8.4.7ippimhello-interval
CommandPurpose
Usethiscommandtoconfiguretheintervalforpimhellopacketsonthisinterface.
Toresettothedefaultsetting,usethenoformofthiscommand.
CommandSyntax
ippimhello-intervalINTERVAL
noippimhello-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thepimhellomessage
intervalinsecond1-18724
CommandMode
InterfaceConfiguration1330Default
30s
Usage
None
Examples
Thisexampleshowshowtosetthepimhellomessageintervalto100s:
Switch#configureterminal
Switch(config-if)#ippimhello-interval100
Thisexampleshowshowtoresetthepimhellomessageintervaltodefaultvalue:
Switch#configureterminal
Switch(config-if)#noippimhello-interval
RelatedCommands
None
8.4.8ippimignore-rp-set-priority
CommandPurpose
UsethiscommandtoignoreRPsetpriorityvalue.
Tonotignorethepriority,usethenoformofthiscommand.
CommandSyntax
ippimignore-rp-set-priority
noippimignore-rp-set-priority
CommandMode
GlobalConfiguration
Default
NotignoreRPsetpriorityvalue.1331Usage
None
Examples
ThisexampleshowshowtoignoreRPsetpriorityvalue:
Switch#configureterminal
Switch(config)#ippimignore-rp-set-priority
Thisexampleshowshowtoresettheconfigurationstodefaultvalue:
Switch#configureterminal
Switch(config)#noippimignore-rp-set-priority
RelatedCommands
None
8.4.9ippimjp-timer
CommandPurpose
Usethiscommandtosetthejoin/prunetimervalue.
Toresetthetimertodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ippimjp-timerTIMER
noippimjp-timer
Parameter ParameterDescriptionParameterValue
TIMER TheJoin/Prunetimervalue
(second)1-65535
CommandMode
GlobalConfiguration1332Default
60s
Usage
None
Examples
Thisexampleshowshowtosetthejoin/prunetimervalueto100s:
Switch#configureterminal
Switch(config)#ippimjp-timer100
Thisexampleshowshowtoresetthejoin/prunetimervaluetodefaultvalue:
Switch#configureterminal
Switch(config)#noippimjp-timer
RelatedCommands
None
8.4.10ippimneighbor-filter
CommandPurpose
Usethiscommandtoaddanaccess-listtofiltertheneighbor.
Toremovethisfilter,usethenoformofthiscommand.
CommandSyntax
ippimneighbor-filterLIST
noippimneighbor-filter
Parameter ParameterDescriptionParameterValue
LIST Thenameoftheaccess-
listUpto40characters1333CommandMode
InterfaceConfiguration
Default
None
Usage
Neighbourswouldsendhellomessagetoeachothertoestablishconnectionswith
otherneighbouryoucanusethiscommandtofilterwhichneighbourcanbe
connectedornot.
Examples
Thisexampleshowshowtoestablishneighborsbasedonaccess-listacl1:
Switch#configureterminal
Switch(config-if)#ippimneighbor-filteracl1
Thisexampleshowshowtocancelthefilter:
Switch#configureterminal
Switch(config-if)#noippimneighbor-filter
RelatedCommands
None
8.4.11ippimregister-rate-limit
CommandPurpose
Usethiscommandtosettheratelimitforpimregisters.
Toresettheratelimittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ippimregister-rate-limitLIMIT
noippimregister-rate-limit1334Parameter ParameterDescriptionParameterValue
LIMIT Theratelimitforpim
registerssendfromdrtorp1-65535
CommandMode
GlobalConfiguration
Default
Bydefault,willnotlimitPIMregistermessages,ifalimitisset,PIMregister
messageswillbediscardwhenpakcetreachedbythislimit.
Usage
Thereisnoratelimitforpimregistersbydefault.
Whentheratelimitisconfigured,theexceedpimregistermessagewillbedropped
ontherp.
Examples
Thisexampleshowshowtosettheratelimitforpimregistersto100persecond.:
Switch#configureterminal
Switch(config)#ippimregister-rate-limit100
Thisexampleshowshowtocanceltheratelimit:
Switch#configureterminal
Switch(config)#noippimregister-rate-limit
RelatedCommands
ippimregister-rp-reachability
ippimregister-source
ippimregister-suppression13358.4.12ippimregister-source
CommandPurpose
Usethiscommandtosetthesourceaddressforpimregister.
Toresetthesourceaddressforpimregistertodefaultvalue,usethenoformofthis
command.
CommandSyntax
ippimregister-sourceIFNAME
noippimregister-source
Parameter ParameterDescriptionParameterValue
IFNAME Thenameoftheinterface.
Usetheaddressofthis
interfacetobethesource
addressforpimregisterSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
GlobalConfiguration
Default
Thesourceaddressforpimregisteristheinterfaceipofdrbydefault.
Usage
None
Examples
Thisexampleshowshowtosetthesourceaddressforpimregistertotheipaddress
ofinterfaceeth-0-1:
Switch#configureterminal
Switch(config)#ippimregister-sourceeth-0-1
Thisexampleshowshowtoresetthesourceaddressforpimregistertodefaultvalue:1336Switch#configureterminal
Switch(config)#noippimregister-source
RelatedCommands
ippimregister-rate-limit
ippimregister-rp-reachability
ippimregister-suppression
8.4.13ippimregister-rp-reachability
CommandPurpose
Usethiscommandtoenablerpreachabilitycheckforpimregisters.
Todisablethischeck,usethenoformofthiscommand.
CommandSyntax
ippimregister-rp-reachability
noippimregister-rp-reachability
CommandMode
GlobalConfiguration
Default
Disable.
Usage
None
Examples
Thisexampleshowshowtoenablerpreachabilitycheckforpimregisters:
Switch#configureterminal
Switch(config)#ippimregister-rp-reachability
Thisexampleshowshowtodisablerpreachabilitycheckforpimregisters:1337Switch#configureterminal
Switch(config)#noippimregister-rp-reachability
RelatedCommands
ippimregister-rate-limit
ippimregister-source
ippimregister-suppression
8.4.14ippimregister-suppression
CommandPurpose
Usethiscommandtosettheregistersuppressiontime.
Toresetthistimetodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ippimregister-suppressionTIME
noippimregister-suppression
Parameter ParameterDescriptionParameterValue
TIME Theregistersuppression
timeinseconds11-18000seconds
CommandMode
GlobalConfiguration
Default
60s
Usage
None1338Examples
Thisexampleshowshowtosettheregistersuppressiontimeto100s:
Switch#configureterminal
Switch(config)#ippimregister-suppression100
Thisexampleshowshowtoresettheregistersuppressiontimetodefaultvalue:
Switch#configureterminal
Switch(config)#noippimregister-suppression
RelatedCommands
ippimregister-rate-limit
ippimregister-rp-reachability
ippimregister-source
8.4.15ippimrp-address
CommandPurpose
Usethiscommandtosetthepimrp(rendezvouspoint)address.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ippimrp-addressIP_ADDR(LIST|override|)
noippimrp-addressIP_ADDR(LIST|)
Parameter ParameterDescriptionParameterValue
IP_ADDR Therpaddress IPv4Address
LIST Thenameofanaccess-listUpto40characters
override Overridesdynamically
learnedRPmappings-
CommandMode
GlobalConfiguration1339Default
None
Usage
None
Examples
Thisexampleshowshowtosetthepimrpaddressto1.1.1.1:
Switch#configureterminal
Switch(config)#ippimrp-address1.1.1.1
Thisexampleshowshowtoremovetherpaddress1.1.1.1:
Switch#configureterminal
Switch(config)#noippimrp-address1.1.1.1
RelatedCommands
ippimrp-candidate
ippimrp-register-kat
8.4.16ippimrp-candidate
CommandPurpose
Usethiscommandtosetthecandidaterp.
Toremovethecandidaterp,usethenoformofthiscommand.
CommandSyntax
ippimrp-candidateIFNAME({priorityPRIORITY|intervalINTERVAL|group-list
LIST}|)
noippimrp-candidate(IFNAME|)
Parameter ParameterDescriptionParameterValue1340IFNAME Thenameoftheinterface
tobethecandidaterpSupport
physical/aggregation/loopb
ack/vlan/tunnelports
PRIORITY TheCandidate-RPpriority0-255
INTERVAL TheC-RPadvertisement
intervalinseconds1-16383seconds
LIST GrouprangesforthisC-
RP,onlypermitfilters
wouldbecaredUpto40characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosettheinterfaceeth-0-1tobethecandidaterp:
Switch#configureterminal
Switch(config)#ippimrp-candidateeth-0-1
Thisexampleshowshowtocanceltheconfiguredcandidaterp:
Switch#configureterminal
Switch(config)#noippimrp-candidateeth-0-1
RelatedCommands
ippimrp-address13418.4.17ippimrp-register-kat
CommandPurpose
Usethiscommandtosetthekeepalivetimer(KAT)for(S,G)atRPfromPIM
registers.
Toresetthistimertodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ippimrp-register-katTIME
noippimrp-register-kat
Parameter ParameterDescriptionParameterValue
TIME TheKATtimeinseconds1-65535seconds
CommandMode
GlobalConfiguration
Default
None
Usage
Theregistermessagesendfromdrwilladdanentryonrp.Thisentrywillbeaged
whenthekeepalivetimerexpiredwhichcanbeconfiguredbythiscommand.
Examples
Thisexampleshowshowtosetthekeepalivetimerto100satRPfromPIMregisters:
Switch#configureterminal
Switch(config)#ippimrp-register-kat100
Thisexampleshowshowtoresetthistimertodefaultvalue:
Switch#configureterminal
Switch(config)#noippimrp-register-kat1342RelatedCommands
ippimrp-address
ippimrp-candidate
8.4.18ippimspt-switch-thresholdinfinity
CommandPurpose
Usethiscommandtosetthesptswitchthresholdtoinfinity.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ippimspt-switch-thresholdinfinity(group-listLIST|)
noippimspt-switch-thresholdinfinity(group-listLIST|)
Parameter ParameterDescriptionParameterValue
LIST GroupaddressaccesslistUpto40characters
CommandMode
GlobalConfiguration
Default
TheDRwillswitchtosptimmediatelywhenreceivedthefirstmulticastpacketby
default.
Usage
None
Examples
Thisexampleshowshowtosetthesptswitchthresholdtoinfinity:
Switch#configureterminal
Switch(config)#ippimspt-switch-thresholdinfinity1343Thisexampleshowshowtoresetthespt-switch-thresholdtodefault:
Switch#configureterminal
Switch(config)#noippimspt-switch-thresholdinfinity
RelatedCommands
showippimsparse-modespt-threshold
8.4.19ippimcisco-register-checksum
CommandPurpose
Usethiscommandtocalculateregisterchecksumoverwholepacket(cisco
compatibility).
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ippimcisco-register-checksum(group-listLIST|)
noippimcisco-register-checksum(group-listLIST|)
Parameter ParameterDescriptionParameterValue
LIST Groupaddressaccesslist40
CommandMode
GlobalConfiguration
Default
TheregisterchecksumdefinedinRFCisusedbydefault.
Usage
TheregisterchecksumdefinedinRFCisusedbydefault,ifgroup-listisconfigured,
onlypacketsthatverifiedcanbesentinCISCOway.1344Examples
Thisexampleshowshowtosettocalculateregisterchecksumoverwholepacket:
Switch#configureterminal
Switch(config)#ippimcisco-register-checksum
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#noippimcisco-register-checksum
RelatedCommands
None
8.4.20ippimsparse-mode
CommandPurpose
Usethiscommandtoenablepimsparsemodeontheinterface.
Todisablepimsparsemode,usethenoformofthiscommand.
CommandSyntax
ippimsparse-mode(passive|)
noippimsparse-mode(passive|)
Parameter ParameterDescriptionParameterValue
passive Pimpassivemode(local
membersonly)-
CommandMode
InterfaceConfiguration
Default
Disable1345Usage
Thepimhellomessagewillnotbesentoutfromtheinterfacewhenthepassivemode
isconfigured.
Examples
Thisexampleshowshowtoenablepimsparsemodeontheinterface:
Switch#configureterminal
Switch(config-if)#ippimsparse-mode
Thisexampleshowshowtodisablepimsparsemodeontheinterface:
Switch#configureterminal
Switch(config-if)#noippimsparse-mode
Thisexampleshowshowtoenablepimsparsemodepassiveontheinterface:
Switch#configureterminal
Switch(config-if)#ippimsparse-modepassive
RelatedCommands
None
8.4.21ippimdense-mode
CommandPurpose
Usethiscommandtoenablepimdensemodeontheinterface.
Todisablepimdensemode,usethenoformofthiscommand.
CommandSyntax
ippimdense-mode(passive|)
noippimdense-mode
Parameter ParameterDescriptionParameterValue
passive Pimpassivemode(local
membersonly)-1346CommandMode
InterfaceConfiguration
Default
Disable
Usage
Pimspasre-modeanddense-modecannottakeeffectonthesameinterface.The
pimhellomessagewillnotbesentoutfromtheinterfacewhenthepassivemodeis
configured.
Examples
Thisexampleshowshowtoenablepimdensemodeontheinterface:
Switch#configureterminal
Switch(config-if)#ippimdense-mode
Thisexampleshowshowtodisablepimdensemodeontheinterface:
Switch#configureterminal
Switch(config-if)#noippimdense-mode
Thisexampleshowshowtoenablepimdensemodepassiveontheinterface:
Switch#configureterminal
Switch(config-if)#ippimdense-modepassive
RelatedCommands
None
8.4.22ippimpropagation-delay
CommandPurpose
UsethiscommandtosetpropagationdelayonitsLAN.
Tocancelthissetting,usethenoformofthiscommand.1347CommandSyntax
ippimpropagation-delaytimer
noippimpropagation-delay
Parameter ParameterDescriptionParameterValue
timer Propagationdelayvalue100-5000ms
CommandMode
InterfaceConfiguration
Default
1000ms
Usage
IfallroutersonaLANsupporttheLANPruneDelayoption,thenthePIMrouterson
thatLANwillusethevaluesreceivedtoadjusttheirJ/P_Override_Intervalonthat
interfaceandtheinterfaceisLANDelayEnabled
Examples
Thisexampleshowshowtosetpropagationdelay:
Switch#configureterminal
Switch(config-if)#ippimpropagation-delay400
Thisexampleshowshowtounsetthissetting:
Switch#configureterminal
Switch(config-if)#noippimpropagation-delay
RelatedCommands
None13488.4.23ippimstate-refreshorigination-interval
CommandPurpose
Usethiscommandtosettheintervaloforiginatorsendingstaterefreshmessages.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ippimstate-refreshorigination-intervalINTERVAL
noippimstate-refreshorigination-interval
Parameter ParameterDescriptionParameterValue
INTERVAL state-refreshorigination-
interval1-100seconds
CommandMode
InterfaceConfiguration
Default
60s
Usage
StateRefreshMessagesaregeneratedperiodicallybythePIM-DMrouterdirectly
connectedtoasource.Thiscommandcancontroltheintervaloftwomessages
Examples
Thisexampleshowshowtosetstate-refreshorigination-interval:
Switch#configureterminal
Switch(config-if)#ippimstate-refreshorigination-interval50
Thisexampleshowshowtounsetthissetting:
Switch#configureterminal
Switch(config-if)#noippimstate-refreshorigination-interval1349RelatedCommands
None
8.4.24ippimunicast-bsm
CommandPurpose
UsethiscommandtoenablesendingandreceivingofunicastBSMforbackward
compatibility.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ippimunicast-bsm
noippimunicast-bsm
CommandMode
InterfaceConfiguration
Default
Disable
Usage
InterfacewillsendBSMmessagetothewholepimdomainbydefault.
Examples
ThisexampleshowshowtoenablesendingandreceivingofunicastBSMfor
backwardcompatibility:
Switch#configureterminal
Switch(config-if)#ippimunicast-bsm
Thisexampleshowshowtocancelthissetting:
Switch#configureterminal
Switch(config-if)#noippimunicast-bsm1350RelatedCommands
None
8.4.25ippimssm
CommandPurpose
Usethiscommandtoenablepim-ssmandsetssmgrouprange.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ippimssm(default|rangeLIST)
noippimssm
Parameter ParameterDescriptionParameterValue
default Use232.0.0.0/8group
rangeforSSM-
LIST ACLforgrouprangetobe
usedforSSMUpto40characters
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoenablepim-ssmandsetssmgrouprangetodefault:1351Switch#configureterminal
Switch(config-if)#ippimssmdefault
Thisexampleshowshowtocancelthissetting:
Switch#configureterminal
Switch(config-if)#noippimssmdefault
RelatedCommands
None
8.4.26ippimgraceful-restart
CommandPurpose
Usethiscommandtoenablepimgraceful-restartandsettheGRperiodtime.
Todisablepimgraceful-restartorsetdefaultGRperiodtime,usethenoformofthis
command.
CommandSyntax
ippimgraceful-restart(periodTIME|)
noippimgraceful-restart(periodTIME|)
Parameter ParameterDescriptionParameterValue
TIME Pimgraceful-restartperiod
time90-3600seconds
CommandMode
GlobalConfiguration
Default
120seconds
Usage
Thepimgraceful-restartcanbeenabledinstackingsystem.1352Examples
Thisexampleshowshowtoenablepimgraceful-restart:
Switch#configureterminal
Switch(config)#ippimgraceful-restart
Thisexampleshowshowtodisablepimgraceful-restart:
Switch#configureterminal
Switch(config)#noippimgraceful-restart
ThisexampleshowshowtoconfigurepimGRperiodfortheinterface:
Switch#configureterminal
Switch(config)#ippimgraceful-restartperiod100
RelatedCommands
None
8.4.27showippimsparse-modebsr-router
CommandPurpose
Usethiscommandtoshowtheinformationofbootstraprouter.
CommandSyntax
showippimsparse-modebsr-router
CommandMode
PrivilegedEXEC
Default
None
Usage
None1353Examples
Thisexampleshowshowtodisplaytheinformationofbootstraprouter:
Switch#showippimsparse-modebsr-router
PIMv2bootstrapinformation
Thissystemisthebootstraprouter(BSR)
BSRaddress:12.0.9.2
Uptime:00:00:08,BSRPriority:64,Hashmasklength:10
Nextbootstrapmessagein00:00:04
Role:CandidateBSR
State:ElectedBSR
CandidateRP:12.0.9.2(eth-0-9)
Advertisementinterval60seconds
NextC-RPadvertisementin00:00:57
RelatedCommands
None
8.4.28showippimsparse-modeinterface
CommandPurpose
Usethiscommandtoshowtheinformationofpiminterface.
CommandSyntax
showippimsparse-modeinterface(detail|)
Parameter ParameterDescriptionParameterValue
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC
Default
None1354Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofpiminterface:
Switch#showippimsparse-modeinterfacedetail
eth-0-9(vif0):
Address12.0.9.1,DR12.0.9.2
Helloperiod30seconds,NextHelloin26seconds
TriggeredHelloperiod5seconds
Neighbors:
12.0.9.2
RelatedCommands
None
8.4.29showippimsparse-modelocal-member
CommandPurpose
Usethiscommandtoshowthepimlocalmembershipinformation.
CommandSyntax
showippimsparse-modelocal-member(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None1355Usage
None
Examples
Thisexampleshowshowtodisplaypimlocalmembershipinformation:
Switch#showippimsparse-modelocal-members
PIMlocalmembershipinformation
eth-0-3:
(*,229.1.1.1):Include
eth-0-9:
(*,228.1.1.1):Include
RelatedCommands
None
8.4.30showippimsparse-modemroute
CommandPurpose
Usethiscommandtoshowthemrouteinformationofpimsparsemode.
CommandSyntax
showippimsparse-modemroute(SRC_ADDR|GRP_ADDR|)(detail|)
Parameter ParameterDescriptionParameterValue
SRC_ADDR Sourceaddress IPv4Address
GRP_ADDR Groupaddress IPv4Address
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC1356Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaypimmrouteinformation:
Switch#showippimsparse-modemroutedetail
IPMulticastRoutingTable
(*,*,RP)Entries:0
(*,G)Entries:2
(S,G)Entries:0
(S,G,rpt)Entries:0
FCREntries:0
(*,228.1.1.1)Uptime:00:09:55
RP:0.0.0.0,RPFnbr:None,RPFidx:None
Upstream:
State:NOTJOINED,SPTSwitch:Enabled,JT:off
Downstream:
eth-0-9:
State:NOINFO,ET:off,PPT:off
AssertState:NOINFO,AT:off
Winner:0.0.0.0,Metric:4294967295,Pref:4294967295,RPTbit:on
LocalOlist:
eth-0-9
(*,229.1.1.1)Uptime:00:04:22
RP:12.0.9.2,RPFnbr:12.0.9.2,RPFidx:eth-0-9
Upstream:
State:JOINED,SPTSwitch:Enabled,JTExpiry:40secs
Macrostate:JoinDesired,
Downstream:
eth-0-3:
State:NOINFO,ET:off,PPT:off
AssertState:NOINFO,AT:off
Winner:0.0.0.0,Metric:4294967295,Pref:4294967295,RPTbit:on
Macrostate:CouldAssert,AssertTrack
LocalOlist:
eth-0-3
RelatedCommands
None13578.4.31showippimsparse-modeneighbor
CommandPurpose
Usethiscommandtoshowtheneighborinformationofpimsparsemode.
CommandSyntax
showippimsparse-modeneighbor((IFNAME(address|))|detail|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
address Neighboraddress -
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheneighborinformationofpimsparsemode:
Switch#showippimsparse-modeneighbor
NeighborInterfaceUptime/ExpiresVerDR
Address Priority/Mode
12.0.9.2eth-0-900:18:18/00:01:20v21/DR1358RelatedCommands
None
8.4.32showippimsparse-moderpmapping
CommandPurpose
Usethiscommandtoshowgrouptorpmappings.
CommandSyntax
showippimsparse-moderpmapping
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaygrouptorpmappings:
Switch#showippimsparse-moderpmapping
PIMgroup-to-RPmappings
Group(s):224.0.0.0/4
RP:12.0.9.2
Infosource:12.0.9.2,viabootstrap,priority192
Uptime:00:22:56,expires:00:01:34
RelatedCommands
None13598.4.33showippimsparse-moderp-hash
CommandPurpose
Usethiscommandtoshowtheinformationofrptobechosenbasedongroup
selected.
CommandSyntax
showippimsparse-moderp-hashGRP_ADDR
Parameter ParameterDescriptionParameterValue
GRP_ADDR Multicastgroupaddress-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofrptobechosenbasedon
group224.0.0.10:
Switch#showippimsparse-moderp-hash224.0.0.10
RP:12.0.9.2
Infosource:12.0.9.2,viabootstrap
RelatedCommands
None13608.4.34showippimsparse-modespt-threshold
CommandPurpose
Usethiscommandtoshowtherpttosptthresholdofpimsparsemode.
CommandSyntax
showippimsparse-modespt-threshold
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytherpttosptthresholdofpimsparsemode:
Switch#showippimsparse-modespt-threshold
PIMspare-modeimmediatelyswitchesovertoSPTuponreceivingthefirsttraffic
RelatedCommands
None
8.4.35showippimdense-modeinterface
CommandPurpose
Usethiscommandtoshowtheinterfaceinformationofpimsparsemode.1361CommandSyntax
showippimdense-modeinterface(detail|)
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinterfaceinformationofpimdensemode:
Switch#showippimdense-modeinterface
AddressInterfaceVIFIndexVer/Nbr
ModeCount
2.2.2.1eth-0-20v2/D0
3.3.3.1eth-0-32v2/D0
RelatedCommands
None
8.4.36showippimdense-modemroute
CommandPurpose
Usethiscommandtoshowthemrouteinformationofpimdensemode.
CommandSyntax
showippimdense-modemroute1362CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaypimmrouteinformation:
Switch#showippimdense-modemroute
PIM-DMMulticastRoutingTable
(2.2.2.2,225.1.2.3)
Sourcedirectlyconnectedoneth-0-2
State-RefreshOriginatorState:Originator
UpstreamIF:eth-0-2
UpstreamState:Forwarding
AssertState:NoInfo
DownstreamIFList:
eth-0-3,in'olist':
DownstreamState:NoInfo
AssertState:NoInfo
(2.2.2.2,225.1.2.4)
Sourcedirectlyconnectedoneth-0-2
State-RefreshOriginatorState:Originator
UpstreamIF:eth-0-2
UpstreamState:Forwarding
AssertState:NoInfo
DownstreamIFList:
eth-0-3,in'olist':
DownstreamState:NoInfo
AssertState:NoInfo
RelatedCommands
None13638.4.37showippimdense-modeneighbor
CommandPurpose
Usethiscommandtoshowtheneighborinformationofpimdensemode.
CommandSyntax
showippimsparse-modeneighbor(detail|)
Parameter ParameterDescriptionParameterValue
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheneighborinformationofpimdensemode:
Switch#showippimdense-modeneighbor
Neighbor-AddressInterfaceUptime/ExpiresVer
4.4.4.4eth-0-903d19h16m/00:01:29v2
3.3.3.2agg3 03d19h17m/00:01:37v2
RelatedCommands
None13648.4.38showippimdense-modenexthop
CommandPurpose
Usethiscommandtoshowthenexthopinformationofpimdensemode.
CommandSyntax
showippimsparse-modenexthop
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythenexthopinformationofpimdensemode:
Switch#showippimdense-modenexthop
DestinationNexthopNexthopNexthopMetricPref
NumAddrInterface
1.1.1.20-- --
RelatedCommands
None
8.4.39showippimdense-modeinterface
CommandPurpose
Usethiscommandtoshowtheinterfaceinformationofpimsparsemode.1365CommandSyntax
showippimdense-modeinterface(detail|)
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinterfaceinformationofpimdensemode:
Switch#showippimdense-modeinterface
AddressInterfaceVIFIndexVer/Nbr
ModeCount
2.2.2.1eth-0-20v2/D0
3.3.3.1eth-0-32v2/D0
RelatedCommands
None
8.4.40showippimdense-modemroute
CommandPurpose
Usethiscommandtoshowthemrouteinformationofpimdensemode.
CommandSyntax
showippimdense-modemroute1366CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaypimmrouteinformation:
Switch#showippimdense-modemroute
PIM-DMMulticastRoutingTable
(2.2.2.2,225.1.2.3)
Sourcedirectlyconnectedoneth-0-2
State-RefreshOriginatorState:Originator
UpstreamIF:eth-0-2
UpstreamState:Forwarding
AssertState:NoInfo
DownstreamIFList:
eth-0-3,in'olist':
DownstreamState:NoInfo
AssertState:NoInfo
(2.2.2.2,225.1.2.4)
Sourcedirectlyconnectedoneth-0-2
State-RefreshOriginatorState:Originator
UpstreamIF:eth-0-2
UpstreamState:Forwarding
AssertState:NoInfo
DownstreamIFList:
eth-0-3,in'olist':
DownstreamState:NoInfo
AssertState:NoInfo
RelatedCommands
None13678.4.41showippimsparse-modenexthop-virtual-pair
CommandPurpose
Usethiscommandtoshowthepimnexthopvirtualaddressmappinginformation.
CommandSyntax
showippimsparse-modenexthop-virtual-pair
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythepimnexthopvirtualaddressmapping
information:
Switch#showippimsparse-modenexthop-virtual-pair
pimnexthopaddressvirtualaddress
10.1.1.220.1.1.2
RelatedCommands
None
8.4.42ippimnexthop-address
CommandPurpose
Usethiscommandtosetthevirtualaddressofthepimnexthopaddress.
Tocancelthissetting,usethenoformofthiscommand.1368CommandSyntax
ippimnexthop-addressNEXTHOP-ADDRESSvirtual-addressVIRTUAL-ADDRESS
noippimnexthop-address(NEXTHOP-ADDRESS|)
Parameter ParameterDescriptionParameterValue
NEXTHOP-ADDRESSnexthopaddress IPv4Address
VIRTUAL-ADDRESS virtualaddress IPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
WhenPIMusevirtualaddresstoconnectneighbour,Usethiscommandtothevirtual
addressofthepimnexthopaddress.
Examples
Thisexampleshowshowtosetanexthopaddresswithvirtualaddress:
Switch#configureterminal
Switch(config-if)#ippimnexthop-address10.1.1.2virtual-address20.1.1.2
Thisexampleshowshowtounsetthissetting:
Switch#configureterminal
Switch(config-if)#noippimnexthop-address
RelatedCommands
None13698.4.43showippimgraceful-restart
CommandPurpose
Usethiscommandtoshowthepimgracefulrestartstatus.
CommandSyntax
showippimgraceful-restart
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythepimgracefulrestartstatus:
Switch#showippimgraceful-restart
PIMSMGracefulRestartenabledwithGRperiod300seconds
CurrentrunnigstatusisNotatrestartperiod
RelatedCommands
None
8.5MVRCommands
8.5.1mvr
CommandPurpose
UsethiscommandtoenableMVR.TodisableMVR,usethenoformofthiscommand.1370CommandSyntax
mvr
nomvr
CommandMode
GlobalConfiguration
Default
Disable
Usage
EnableMVRintheSwitch,mustdisableipmulticast-routingbeforeenableMVR.
Examples
ThisexampleshowshowtoenableMVR:
Switch#configureterminal
Switch(config)#noipmulticast-routing
Switch(config)#mvr
RelatedCommands
showmvr
8.5.2mvrvlan
CommandPurpose
UsethiscommandtospecifytheMVRsourcevlan.Toremovethissetting,usetheno
formofthiscommand.
CommandSyntax
mvrvlanvlanVLAN_ID
nomvrvlan1371Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
TherelatedvlaninterfaceshouldbecreatedbeforetheconfigurationoftheMVR
sourcevlan.
Examples
ThisexampleshowshowtoconfiguresourcevlanofMVR.configurevlan2as
sourcevlanofMVR:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config)#interfacevlan2
Switch(config-if)#exit
Switch(config)#mvrvlan2
RelatedCommands
interfacevlan
8.5.3mvrgroup
CommandPurpose
UsethiscommandtoconfigureglobalgroupforMVR.Toremovethissetting,usethe
noformofthiscommand.
CommandSyntax
mvrgroupIP_ADDR(COUNT|)1372nomvrgroupaddress(COUNT|)
Parameter ParameterDescriptionParameterValue
IP_ADDR MulticastgroupaddressIPv4Address
COUNT Countofcontiguous
groups1-64
CommandMode
GlobalConfiguration
Default
None
Usage
Thiscommandisusedtocreateordeleteaglobalstaticgroup.
Examples
Thisexampleshowshowtocreateglobalstaticgroupfrom238.255.0.1to
238.255.0.50:
Switch#configureterminal
Switch(config)#mvrgroup238.255.0.150
RelatedCommands
None
8.5.4mvrsource-address
CommandPurpose
Usethiscommandtocreateordeletemvrsourceaddress.Toremovethissetting,
usethenoformofthiscommand.
CommandSyntax
mvrsource-addressIP_ADDR1373nomvrsource-address
Parameter ParameterDescriptionParameterValue
IP_ADDR Sourceipaddress IPv4Address
CommandMode
GlobalConfiguration
Default
10.0.0.1
Usage
None
Examples
Createmvrsourceaddress:
Switch#configureterminal
Switch(config)#mvrsource-address192.168.11.1
ResumemvrsourceaddressasdefaultIPaddress:
Switch#configureterminal
Switch(config)#nomvrsource-address
RelatedCommands
None
8.5.5mvrtype
CommandPurpose
Usethiscommandtoconfigureaswitch-portassourceportorreceiverport.To
removethissetting,usethenoformofthiscommand.
CommandSyntax
mvrtype(source|receivervlanVLAN_ID)1374nomvrtype(receivervlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
source MVRsourceport -
receiver MVRreceiverport -
VLAN_ID MVRreceivervlanID 1-4094
CommandMode
InterfaceConfiguration
Default
None
Usage
Beforeconfiguretheinterfaceassourceportorreceiverport.makesurethesource
portbelongtosourcevlan,andthereceiverportmustnotbelongtosourcevlan.
Examples
Configuretheeth-0-1assourceport,andconfiguretheeth-0-2asreceiverportof
vlan2:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mvrtypesource
Switch(config)#interfaceeth-0-2
Switch(config-if)#mvrtypereceivervlan2
RelatedCommands
None
8.5.6showmvr
CommandPurpose
Usethiscommandtoshowmvrinformation.1375CommandSyntax
showmvr
CommandMode
PrivilegedEXEC
Default
None
Usage
Showmvrinformation.
Examples
ThisexampleshowshowtodisplayMVRinformation:
Switch#showmvr
MVRRunning:TRUE
MVRMulticastVLAN:10
MVRSource-address:1.1.1.1
MVRMaxMulticastGroups:512
MVRHwRtLimit:511
MVRCurrentMulticastGroups:0
RelatedCommands
None
8.5.7showmvrinterface
CommandPurpose
Usethiscommandtoshowmvrinterfaceinformation.
CommandSyntax
showmvrinterface1376CommandMode
PrivilegedEXEC
Default
None
Usage
Showmvrinterfaceinformation.
Examples
ThisexampleshowshowtodisplayMVRinterfaceinformation:
Switch#showmvrinterface
PortTypeVLANStatus
eth-0-2source10ACTIVE
eth-0-1receiver11ACTIVE
RelatedCommands
None
8.5.8showmvrgroup
CommandPurpose
Usethiscommandtoshowmvrgrouplearnedfromreceiverport.
CommandSyntax
showmvrgroupvlanVLAN_ID(GRP_ADDR|)
Parameter ParameterDescriptionParameterValue
VLAN_ID MVRreceivervlanID 1-4094
GRP_ADDR MulticastgroupaddressIPv4Address1377CommandMode
PrivilegedEXEC
Default
None
Usage
Showmvrgroupinformationlearnedfromreceiverport
Examples
Thisexampleshowshowtodisplaymvrgrouplearnedfromreceiverport:
Switch#showmvrgroups
VLANInterfaceGroup-AddressUptimeExpires-time
11eth-0-1227.0.0.100:25:5100:04:19
RelatedCommands
None
8.5.9showmvrgroupstatic
CommandPurpose
Usethiscommandtoshowmvrglobalstaticgroups.
CommandSyntax
showmvrgroupstaticglobal
CommandMode
PrivilegedEXEC
Default
None1378Usage
Showmvrstaticconfiguredgroupinformation.
Examples
Thisexampleshowshowtodisplaymvrglobalstaticgroups:
Switch#showmvrgroupsstaticglobal
MVRStaticGlobalGroup:
227.0.0.1
227.0.0.2
227.0.0.3
227.0.0.4
227.0.0.5
227.0.0.6
227.0.0.7
227.0.0.8
227.0.0.9
227.0.0.10
RelatedCommands
None
8.5.10showresourcemvr
CommandPurpose
UsethiscommandtodisplaytheresourceusageofMVR.
CommandSyntax
showresourcemvr
CommandMode
PrivilegedEXEC
Default
None1379Usage
None
Examples
ThisexampleshowshowtodisplaytheresourceusageofMVR:
Switch#showresourcemvr
MVR
Resource UsedCapability
=============================================================
MVREntry 0511
MVRMember 01022
RelatedCommands
None13809IPv6MulticastCommands
9.1IPv6Multicast-RoutingCommands
9.1.1Ipv6multicast-routing
CommandPurpose
Usethiscommandtoenableipv6multicastrouting.
Todisableipv6multicastrouting,usethenoformofthiscommand.
CommandSyntax
ipv6multicast-routing
noipv6multicast-routing
CommandMode
GlobalConfiguration
Default
Enable
Usage
None
Examples
Thisexampleshowshowtoenableipv6multicastrouting:
Switch#configureterminal
Switch(config)#ipv6multicast-routing
Thisexampleshowshowtodisableipv6multicastrouting:1381Switch#configureterminal
Switch(config)#noipv6multicast-routing
RelatedCommands
None
9.1.2ipv6multicastroute-limit
CommandPurpose
Usethiscommandtosetthemaximumnumberofthemulticastroutes.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6multicastroute-limitLIMIT(THRESHOLD|)
noipv6multicastroute-limit
Parameter ParameterDescriptionParameterValue
LIMIT Maxnumberofmulticast
routeentries1-2048
THRESHOLD Thresholdatwhichto
generatewarning
message1-2048
CommandMode
GlobalConfiguration
Default
Defaultmaximumnumberofthemulticastroutesshouldbe2048.
Defaultthresholdshouldbesameasthemaximumnumberofmulticastroutes.
Usage
None1382Examples
Thisexampleshowshowtosetthemaximumnumberofthemulticastroutesto512:
Switch#configureterminal
Switch(config)#ipv6multicastroute-limit512
Thisexampleshowshowtoresetthemaximumnumberofthemulticastroutesto
defaultvalue:
Switch#configureterminal
Switch(config)#noipv6multicastroute-limit
RelatedCommands
showipv6mrouteroute-limit
9.1.3showipv6mroute
CommandPurpose
Usethiscommandtodisplaytheipv6multicastroutingtableinformation.
CommandSyntax
showipv6mroute(sparse|)(count|summary|)
showipv6mrouteIPV6_ADDR(sparse|)(count|summary|)
showipv6mrouteroute-limit
Parameter ParameterDescriptionParameterValue
sparse Showsparsemulticast
routes-
count Shownumberofmulticast
routeentries-
summary Showabbreviated
multicastrouteinformation-
IPV6_ADDR Showspecifysourceor
groupaddressmulticast
routeIPv6address1383route-limit Showmaxroutelimitvalue-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastroutingtable:
Switch#showipv6mroute
IPv6MulticastRoutingTable
Flags:I-ImmediateStat,T-TimedStat,F-Forwarderinstalled
Timers:Uptime/StatExpiry
InterfaceState:Interface
2001:1::1234,ff0e::1234:5678
uptime00:00:02,statexpires00:03:28
OwnerPIM-SMv6,Flags:TF
Incominginterface:eth-0-1
Outgoinginterfacelist:
Register
eth-0-2
Thisexampleshowshowtodisplaymulticastroutingtablesummaryinformation:
Switch#showipv6mroutesummary
IPv6MulticastRoutingTable
Flags:I-ImmediateStat,T-TimedStat,F-Forwarderinstalled
Timers:Uptime/StatExpiry
InterfaceState:Interface
2001:1::1234,ff0e::1234:5678
00:01:04/00:02:26,PIM-SMv6,Flags:TF
RelatedCommands
ipv6multicastroute-limit
ipv6mroute-rpf13849.1.4showipv6mif
CommandPurpose
Usethiscommandtodisplaythemulticastinterfaceinformation.
CommandSyntax
showipv6mif(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastinterfaceinformation:
Switch#showipv6mif
InterfaceMifOwner Uptime
IdxModule
eth-0-10PIM-SMv600:00:05
Register1PIM-SMv600:00:05
RelatedCommands
ipv6pimsparse-mode13859.1.5showipv6multicastgroupscount
CommandPurpose
Usethiscommandtodisplaythemulticastgroupcount.
CommandSyntax
showipv6multicastgroupscount
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymulticastgroupnumber:
Switch#showipv6multicastgroupscount
multicastgrouprecordcount:1
multicastsourcerecordcount:0
multicasttotalrecordcount:1
multicastmaxrecordcount:2048
RelatedCommands
None
9.1.6showresourcemcast6
CommandPurpose
Usethiscommandtodisplayipv6multicastresourceinformation.1386CommandSyntax
showresourcemcast6
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayipv6multicastresourceinformation:
Switch#showresourcemcast6
MCAST
Resource UsedCapability
=============================================================
McastEntry 0224
McastMember 01792
RelatedCommands
None
9.1.7clearipv6mroute
CommandPurpose
Usethiscommandtocleartheipv6multicastroutingtableinformation.
CommandSyntax
clearipv6mroute(*|GRP_IPV6_ADDR(SRC_IPV6_ADDR)|)
Parameter ParameterDescriptionParameterValue1387GRP_IPV6_ADDR Clearspecifygroup
addressmulticastrouteIPv6address
SRC_IPV6_ADDR Clearspecifysource
addressmulticastrouteIPv6address
* Clearallmulticastroutes-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearallipv6multicastroutingtableinformation:
Switch#clearipv6mroute*
RelatedCommands
showipv6mroute
9.2MLDCommands
9.2.1ipv6mldaccess-group
CommandPurpose
Usethiscommandtoapplyanaccess-listtothemldinterface.
Toremovethissetting,usethenoformofthiscommand.1388CommandSyntax
ipv6mldaccess-groupLISTNAME
noipv6mldaccess-group
Parameter ParameterDescriptionParameterValue
LISTNAME Thenameoftheipv6
access-listtobeapplied.
Theformatofaccess-list
shouldbeipv6.Astringwith1-20
characters
CommandMode
InterfaceConfiguration
Default
Access-groupisnotconfiguredonanymldinterfacebydefault.
Usage
Nomatterthesourceipv6prefixorthedestinationipv6prefixinACEshouldtake
effectrespectively.IfACEsactionisdeny,thenthepacketwillbeignored;Otherwise
ifitmatchesonewhoseactionispermit,thenitwillbeprocessedregularly.
Examples
Thisexampleshowshowtoapplytheaccess-listacl1totheinterfacevlan1:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldaccess-groupacl1
Thisexampleshowshowtoremovetheaccess-listacl1ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldaccess-group
RelatedCommands
showipv6mldinterface13899.2.2ipv6mldimmediate-leavegroup-list
CommandPurpose
Usethiscommandtoapplyanaccess-listtoconfigurewhichgroupssupport
immediately-leaveperinterface.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ipv6mldimmediate-leavegroup-listLISTNAME
noipv6mldimmediate-leave
Parameter ParameterDescriptionParameterValue
LISTNAME Thenameoftheipv6
access-listtobeapplied.
Theformatofaccess-list
shouldbeipv6.-
CommandMode
InterfaceConfiguration
Default
Access-groupisnotconfiguredonanymldinterfacebydefault.
Usage
Nomatterthesourceipv6prefixorthedestinationipv6prefixinACEshouldbetake
effectrespectively.IfACEsactionisdenied,thenthepacketshouldbeignored;
Otherwiseifitmatchesonewhoseactionispermit,thenitshouldbeprocessed
regularly.
Examples
Thisexampleshowshowtoapplyanaccess-listtoconfigurewhichgroupssupport
immediately-leaveoninterfacevlan1:1390Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldimmediate-leavegroup-listacl1
Thisexampleshowshowtoremovetheaccess-listacl1ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldimmediate-leavegroup-list
RelatedCommands
showipv6mldinterface
9.2.3ipv6mldlast-member-query-count
CommandPurpose
Usethiscommandtosetthevalueoflastmemberquerycount.
Toreturnittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldlast-member-query-countCOUNT
noipv6mldlast-member-query-count
Parameter ParameterDescriptionParameterValue
COUNT Thevalueoflastmember
querycount,rangeis2to
72-7
CommandMode
InterfaceConfiguration
Default
2
Usage
None1391Examples
Thisexampleshowshowtosetthevalueoflastmemberquerycountto5:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldlast-member-query-count5
Thisexampleshowshowtoreturnthevalueoflastmemberquerycounttodefault
value:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldlast-member-query-count
RelatedCommands
showipv6mldinterface
ipv6mldlast-member-query-interval
9.2.4ipv6mldlast-member-query-interval
CommandPurpose
Usethiscommandtosetthevalueoflastmemberqueryinterval.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldlast-member-query-intervalINTERVAL
noipv6mldlast-member-query-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thelastmemberquery
intervalvalue(ms)1000-25500
CommandMode
InterfaceConfiguration1392Default
1000
Usage
None
Examples
Thisexampleshowshowtosetthelastmemberqueryintervalvalueto10000ms:
Switch#configureterminal
Switch(config)#ipv6mldsnoopinglast-member-query-interval2000
Thisexampleshowshowtoresetthelastmemberqueryintervalvaluetodefault
value:
Switch#configureterminal
Switch(config)#noipv6mldsnoopinglast-member-query-interval
RelatedCommands
showipv6mldinterface
ipv6mldlast-member-query-count
9.2.5ipv6mldlimit
CommandPurpose
Usethiscommandtosetthemaxnumofgroupsallowed.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldlimitNUMBER(exceptLISTNAME|)
noipv6mldlimit
Parameter ParameterDescriptionParameterValue
NUMBER Themaxnumofgroups,
rangeis1to40961-40961393LISTNAME GroupsnottobecountedAstringwith1-20
characters
CommandMode
GlobalConfiguration&InterfaceConfiguration
Default
4096
Usage
Maxnumberofgroupsis4096bydefault,inglobalconfigurationmode,usethis
commandtosetnumberofgroupsforallports,ininterfaceconfigurationmode,use
thiscommandtosetnumberofgroupsforoneports
Examples
Thisexampleshowshowtosetthemaxnumofgroupsallowedto1000globally:
Switch#configureterminal
Switch(config)#ipv6mldlimit1000
Thisexampleshowshowtoresetthemaxnumofgroupstodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldlimit
RelatedCommands
showipv6mldinterface
9.2.6ipv6mldmroute-proxy
CommandPurpose
Usethiscommandtosetthemroute-proxyportonthisinterface.
Toremoveit,usethenoformofthiscommand.1394CommandSyntax
ipv6mldmroute-proxyIFNAME
noipv6mldmroute-proxyIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacenameofthe
mroute-proxyportSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedtosetthemroute-proxyportontheinterface.Onlyone
mroute-proxyportcanbesetontheinterface.Whensetitagain,thenewsettingwill
overwritetheoldone.
Examples
Thisexampleshowshowtosetthemroute-proxyporttoeth-0-1onthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldmroute-proxyeth-0-1
Thisexampleshowshowtoremovethemroute-proxyportonthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldmroute-proxy
RelatedCommands
ipv6mldproxy-service13959.2.7ipv6mldproxy-service
CommandPurpose
Usethiscommandtoenablemldmrouteproxyserviceontheinterface.
Todisableit,usethenoformofthiscommand.
CommandSyntax
ipv6mldproxy-service
noipv6mldproxy-service
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedwithcommandipv6mldmroute-proxyandtosettheupstream
interfaceofthemldgroup.
Examples
Thisexampleshowshowtoenablemldmrouteproxyserviceonthisinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldproxy-service
Thisexampleshowshowtodisablemldmrouteproxyservice:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldproxy-service
RelatedCommands
ipv6mldmroute-proxy13969.2.8ipv6mldquerier-timeout
CommandPurpose
Usethiscommandtosetthemldpreviousqueriertimeoutvalue.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldquerier-timeoutINTERVAL
noipv6mldquerier-timeout
Parameter ParameterDescriptionParameterValue
INTERVAL Themldpreviousquerier
timeoutvalue,rangeis60
to300s.60-300
CommandMode
InterfaceConfiguration
Default
255s
Usage
None
Examples
Thisexampleshowshowtosetthemldpreviousqueriertimeoutvalueto100
seconds:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldquerier-timeout100
Thisexampleshowshowtoresetthemldpreviousqueriertimeoutvaluetodefault
value:1397Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldquerier-timeout
RelatedCommands
ipv6mldquery-interval
ipv6mldquery-max-response-time
9.2.9ipv6mldquery-interval
CommandPurpose
Usethiscommandtosetthemldqueryinterval.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldquery-intervalINTERVAL
noipv6mldquery-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thevalueofmldquery
interval,rangeis2to
18000s.2-18000
CommandMode
InterfaceConfiguration
Default
125s
Usage
None1398Examples
Thisexampleshowshowtosetthemldqueryintervalto300seconds:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldquery-interval300
Thisexampleshowshowtoreturnthemldqueryintervaltodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldquery-interval
RelatedCommands
ipv6mldquerier-timeout
ipv6mldquery-max-response-time
9.2.10ipv6mldquery-max-response-time
CommandPurpose
Usethiscommandtosetthemldquerymaxresponsetime.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldquery-max-response-timeINTERVAL
noipv6query-max-response-time
Parameter ParameterDescriptionParameterValue
INTERVAL Themldquerymax
responsetime,rangeis1
to25s.1-25
CommandMode
InterfaceConfiguration1399Default
10s
Usage
Querymaxresponsetimemustbelessthanmldqueryinterval.
Examples
Thisexampleshowshowtosetthemldquerymaxresponsetimeto20seconds:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldquery-max-response-time20
Thisexampleshowshowtoreturnthemldquerymaxresponsetimetodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldquery-max-response-time
RelatedCommands
ipv6mldquerier-timeout
ipv6mldquery-interval
9.2.11ipv6mldrobustness-variable
CommandPurpose
Usethiscommandtosetthemldquerierrobustnessvariablevalue.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldrobustness-variableVALUE
noipv6robustness-variable
Parameter ParameterDescriptionParameterValue1400VALUE Themldquerier
robustnessvariablevalue,
rangeis2to7.2-7
CommandMode
InterfaceConfiguration
Default
2
Usage
None
Examples
Thisexampleshowshowtosetthemldquerierrobustnessvariablevalueto6:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldrobustness-variable6
Thisexampleshowshowtoresetthemldquerierrobustnessvariablevaluetodefault
value:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldrobustness-variable
RelatedCommands
showipv6mldinterface
9.2.12ipv6mldversion
CommandPurpose
Usethiscommandtosetthemldversiononinterface.
Toreturnittodefaultvalue,usethenoformofthiscommand.1401CommandSyntax
ipv6mldversionNUMBER
noipv6version
Parameter ParameterDescriptionParameterValue
NUMBER Themldversiononthe
interface1-2
CommandMode
InterfaceConfiguration
Default
1
Usage
None
Examples
Thisexampleshowshowtosetthemldversion2ontheinterface:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#ipv6mldversion2
Thisexampleshowshowtoreturnthemldversiontodefaultvalue:
Switch#configureterminal
Switch(config)#interfacevlan1
Switch(config-if)#noipv6mldversion
RelatedCommands
showipv6mldinterface14029.2.13ipv6mldstatic-group
CommandPurpose
Usethiscommandtoconfigurethestaticmulticastgrouponinterface.
Todeletestaticgroup,usethenoformofthiscommand.
CommandSyntax
ipv6mldstatic-groupGRP_IPV6_ADDR(sourceSRC_IPV6_ADDR|)
noipv6mldstatic-groupGRP_IPV6_ADDR(sourceSRC_IPV6_ADDR|)
Parameter ParameterDescriptionParameterValue
GRP_IPV6_ADDR Themulticastgroup
addressIPv6address
SRC_IPV6_ADDR Themulticastsource
addressIPv6address
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigurethestaticmldgrouponinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6mldstatic-groupff0e::1234
Switch(config-if)#ipv6mldstatic-groupff0e::1234source2001::2
Thisexampleshowshowtodeletestaticmldgrouponinterface:1403Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6mldstatic-groupff02::1234
RelatedCommands
showipv6mldgroups
9.2.14ipv6mldssm-mapenable
CommandPurpose
Usethiscommandtoenablemldssmmapping.
Todisablessmmapping,usethenoformofthiscommand.
CommandSyntax
ipv6mldssm-mapenable
noipv6mldssm-mapenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoenablemldssmmapping:
Switch#configureterminal
Switch(config)#ipv6mldssm-mapenable
Thisexampleshowshowtodisablemldssmmapping:
Switch#configureterminal
Switch(config)#noipv6mldssm-mapenable1404RelatedCommands
None
9.2.15ipv6mldssm-mapstatic
CommandPurpose
Usethiscommandtosetmldssmmapping.
Tocancelssmmappingsetting,usethenoformofthiscommand.
CommandSyntax
ipv6mldssm-mapstaticLISTNAMESRC_IPV6_ADDR
noipv6mldssm-mapstaticLISTNAMESRC_IPV6_ADDR
Parameter ParameterDescriptionParameterValue
LISTNAME Specifymulticastgroup
addressrangeaccesslistAstringwith1-20
characters
SRC_IPV6_ADDR MulticastsourceaddressIPv6address
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtosetmldssmmapping:
Switch#configureterminal
Switch(config)#ipv6mldssm-mapstaticipacl2001::21405Thisexampleshowshowtounsetmldssmmapping:
Switch#configureterminal
Switch(config)#noipv6mldssm-mapstaticipacl2001::2
RelatedCommands
None
9.2.16clearipv6mld
CommandPurpose
Usethiscommandtoclearmldgroups.
CommandSyntax
clearipv6mldgroup(*|IPV6_ADDR)
Parameter ParameterDescriptionParameterValue
* Allmulticastgroupaddress-
IPV6_ADDR Specifymulticastgroup
addressIPv6address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearmldgroupall:1406Switch#clearipv6mld
Switch#clearipv6mldgroup*
Thisexampleshowshowtoclearmldspecifiedgroup:
Switch#clearipv6mldgroupff02::1234
RelatedCommands
showipv6mldgroups
9.2.17clearipv6mldinterface
CommandPurpose
Usethiscommandtoclearmldgroupsonspecifiedinterface.
CommandSyntax
clearipv6mld(groupIPV6_ADDR|interface)IFNAME
Parameter ParameterDescriptionParameterValue
IPV6_ADDR Specifymulticastgroup
addressIPv6address
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None1407Examples
Thisexampleshowshowtoclearmldgrouponspecifiedinterface:
Switch#clearipv6mldgroupinterfaceeth-0-1
RelatedCommands
showipv6mldgroups
9.2.18showipv6mldgroups
CommandPurpose
Usethiscommandtoshowtheinformationaboutmldgroups.
CommandSyntax
showipv6mldgroupsIPV6_ADDR(detail|)
Parameter ParameterDescriptionParameterValue
IPV6_ADDR Specifymulticastgroup
addressIPv6address
detail DetailedInformation -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaythedetailinformationaboutmldgroups:1408Switch#showipv6mldgroupsdetail
MLDConnectedGroupMembershipDetailsforeth-0-2
Interface:eth-0-2
Group:ff0e::1234:5678
Uptime:00:00:10
Groupmode:Exclude(Expires:00:04:10)
Lastreporter:fe80:1111:1111:1111:1111:1111:1111:1111
Sourcelistisempty
RelatedCommands
None
9.2.19showipv6mldgroupsinterface
CommandPurpose
Usethiscommandtoshowtheinformationaboutmldgroupsoninterface.
CommandSyntax
showipv6mldgroupsIFNAME(IPV6_ADDR|)(detail|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
IPV6_ADDR Specifymulticastgroup
addressIPv6address
detail DetailedInformation -
CommandMode
PrivilegedEXEC
Default
None1409Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutmldgroupsoninterface
eth-0-1:
Switch#showipv6mldgroupseth-0-1
MLDConnectedGroupMembership
GroupAddress InterfaceExpires
ff0e::1234:5678 eth-0-200:03:01
RelatedCommands
None
9.2.20showipv6mldgroupscount
CommandPurpose
Usethiscommandtoshowmldgroupnumber.
CommandSyntax
showipv6mldgroups(IFNAME|)count
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None1410Usage
None
Examples
Thisexampleshowshowtodisplaythemldgroupnumberoninterfaceeth-0-1:
Switch#showipv6mldgroupseth-0-1count
Dynamicmulticastgroupscount:1
Staticmulticastgroupscount:0
Totalmulticastgroupscount:1
RelatedCommands
None
9.2.21showipv6mldinterface
CommandPurpose
Usethiscommandtoshowtheinformationaboutmldoninterface.
CommandSyntax
showipv6mldinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None1411Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutmldoninterfaceeth-0-1:
Switch#showipv6mldinterfaceeth-0-1
Interfaceeth-0-1(Index1)
MLDActive,Querier,Version1(default)
Internetaddressisfe80::9c7c:7eff:fe94:8300
MLDinterfacehas0group-recordstates
MLDactivity:0joins,0leaves
MLDqueryintervalis125seconds
MLDqueriertimeoutis255seconds
MLDmaxqueryresponsetimeis10seconds
Lastmemberqueryresponseintervalis1000milliseconds
GroupMembershipintervalis260seconds
RelatedCommands
None
9.3MLDSnoopingCommands
9.3.1ipv6mldsnooping
CommandPurpose
Usethiscommandtoenablemldsnooping.
Todisablemldsnooping,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)
noipv6mldsnooping(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-40941412CommandMode
GlobalConfiguration
Default
Disable
Usage
MldSnoopingcanbeenabledgloballyandpervlan.Bydefault,mldsnoopingshould
bedisabledgloballyandpervlan.
Examples
Thisexampleshowshowtoenablemldsnooping:
Switch#configureterminal
Switch(config)#ipv6mldsnooping
Thisexampleshowshowtodisablemldsnooping:
Switch#configureterminal
Switch(config)#noipv6mldsnooping
Thisexampleshowshowtoenablemldsnoopingonvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10
Thisexampleshowshowtodisablemldsnoopingonvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10
RelatedCommands
showipv6mldsnooping
9.3.2ipv6mldsnoopingfast-leave
CommandPurpose
Usethiscommandtoenablemldsnoopingfastleave.
Todisableit,usethenoformofthiscommand.1413CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)fast-leave
noipv6mldsnooping(vlanVLAN_ID|)fast-leave
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Disable
Usage
Thiscommandwilloverideimmediate-leavesetting.
Examples
Thisexampleshowshowtoenablemldsnoopingfast-leave:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingfast-leave
Thisexampleshowshowtodisablemldsnoopingfast-leave:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingfast-leave
RelatedCommands
showipv6mldsnoopingglobal
9.3.3ipv6mldsnoopinglast-member-query-interval
CommandPurpose
Usethiscommandtosetthelastmemberqueryintervalofmldsnooping.
Toresetittodefaultvalue,usethenoformofthiscommand.1414CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)last-member-query-intervalINTERVAL
noipv6mldsnooping(vlanVLAN_ID|)last-member-query-interval
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Thelastmemberquery
interval1000-25500
CommandMode
GlobalConfiguration
Default
1000ms
Usage
Mldlastmemberqueryintervalcanbeconfiguredpervlan.Thedefaultis1000ms
andtherangeis1000-25500ms.
Examples
Thisexampleshowshowtosetthelastmemberqueryinterval:
Switch#configureterminal
Switch(config)#ipv6mldsnoopinglast-member-query-interval2000
Thisexampleshowshowtoresetthelastmemberqueryintervaltodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldsnoopinglast-member-query-interval
RelatedCommands
showipv6mldsnooping
showipv6mldsnoopingvlan14159.3.4ipv6mldsnoopingglobalsource-address
CommandPurpose
Usethiscommandtosettheglobalsourceaddress.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnoopingglobalsource-addressIPV6_ADDR
noipv6mldsnoopingglobalsource-address
Parameter ParameterDescriptionParameterValue
IPV6_ADDR TheIPv6addressof
sourceaddressIPv6Address
CommandMode
GlobalConfiguration
Default
ThedefaulIPv6addressis::Allzeroin128bitsIPv6address
Usage
Willuseglobalconfiguredsource-addressifvlanisnotconfiguredotherwiseuse
source-addressconfigfromvlan.
Examples
Thisexampleshowshowtosettheglobalsourceaddresstofe80::1:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingglobalsource-addressfe80::1
Thisexampleshowshowtoresettheglobalsourceaddresstodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingglobalsource-address1416RelatedCommands
showipv6mldsnoopingquerier
9.3.5ipv6mldsnoopingmax-member-num
CommandPurpose
Usethiscommandtosetthemaxallowedmembernumber.
Toresetittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)max-member-numNUMBER
noipv6mldsnooping(vlanVLAN_ID|)max-member-num
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
NUMBER Themaxmembernumber
ofmldsnooping1-4096
CommandMode
GlobalConfiguration
Default
4096
Usage
None
Examples
Thisexampleshowshowtosetthemaxmembernumberofmldsnoopingto1024:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingmax-member-num10241417Thisexampleshowshowtoresetthemaxmembernumbertodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingmax-member-num
RelatedCommands
showipv6mldsnoopingglobal
showipv6mldsnoopingvlan
9.3.6ipv6mldsnoopingquery-interval
CommandPurpose
Usethiscommandtosetthemldsnoopingquery-interval.
Toresetthequery-intervaltodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)query-intervalINTERVAL
noipv6mldsnooping(vlanVLAN_ID|)query-interval
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Thequery-intervalofmld
snooping(seconds),range
is2to180002-18000
CommandMode
GlobalConfiguration
Default
125s
Usage
Queryintervalcantlessthanthemldsnoopingquerymaxresponsetime.1418Examples
Thisexampleshowshowtosetthemldsnoopingqueryintervalto64s:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingquery-interval64
Thisexampleshowshowtoresetthequery-intervaltodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingquery-interval
RelatedCommands
showipv6mldsnoopingquerier
showipv6mldsnoopingqueriervlan
9.3.7ipv6mldsnoopingquery-max-response-time
CommandPurpose
Usethiscommandtosetthemldsnoopingquery-interval.
Toreturnthequery-intervaltodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)query-max-response-timeTIME
noipv6mldsnooping(vlanVLAN_ID|)query-max-response-TIME
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
TIME Thequerymaxresponse
time(seconds)1-25
CommandMode
GlobalConfiguration1419Default
10s
Usage
Queryintervalcantlessthanthemldsnoopingquerymaxresponsetime.
Examples
Thisexampleshowshowtosetthemldsnoopingquerymaxresponsetimeto15s:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingquery-max-response-time15
Thisexampleshowshowtoreturnthequerymaxresponsetimetodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingquery-max-response-time
RelatedCommands
showipv6mldsnoopingquerier
showipv6mldsnoopingqueriervlan
9.3.8ipv6mldsnoopingreport-suppression
CommandPurpose
Usethiscommandtoenablereportsuppression.
Todisablereportsuppression,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)report-suppression
noipv6mldsnooping(vlanVLAN_ID|)report-suppression
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-40941420CommandMode
GlobalConfiguration
Default
Enable
Usage
WillnotdoreportsuppressionwhenMLDsnoopingworksinv2mode.
Examples
Thisexampleshowshowtoenablethereportsuppression:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingreport-suppression
Thisexampleshowshowtodisablereportsuppression:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingreport-suppression
RelatedCommands
showipv6mldsnooping
showipv6mldsnoopingvlan
9.3.9ipv6mldsnoopingversion
CommandPurpose
Usethiscommandtosetthemldsnoopingversion.
Toreturnittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)versionVERSION
noipv6mldsnooping(vlanVLAN_ID|)version1421Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
VERSION Mldsnoopingversion,
rangeis1to2.1-2
CommandMode
GlobalConfiguration
Default
1
Usage
Thedefaultversionis1.
Examples
Thisexampleshowshowtosetthemldsnoopingversion2:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingversion2
RelatedCommands
showipv6mldsnooping
showipv6mldsnoopingvlan
9.3.10ipv6mldsnoopingdiscard-unknown
CommandPurpose
Usethiscommandtoenablediscardunknown.
Todisablediscardunknown,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnooping(vlanVLAN_ID|)discard-unknown1422noipv6mldsnooping(vlanVLAN_ID|)discard-unknown
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Enabledbydefault,unknownmulticasttrafficwillfloodinvlan.
Usage
None
Examples
Thisexampleshowshowtoenablediscard-unknownmulticasttraffic:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingdiscard-unknown
RelatedCommands
showipv6mldsnooping
showipv6mldsnoopingvlan
9.3.11ipv6mldsnoopingqueriertcn
CommandPurpose
UsethiscommandtosetMLDsnoopingquerierTCNrelatedparameters.Toresetit
todefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnoopingqueriertcn(enable|query-countCOUNT|query-interval
INTERVAL|query-max-response-timeTIME)1423noipv6mldsnoopingqueriertcn(enable|query-count|query-interval|query-max-
response-time)
Parameter ParameterDescriptionParameterValue
enable MLDquerierTCNquery
enable-
COUNT MLDquerierTCNquery
count,defaultis2.1-10
INTERVAL MLDquerierTCNquery
interval,defaultis10s.1-255seconds
TIME MLDquerierTCNquery
maxresponsetime,default
is5s1-9seconds
CommandMode
GlobalConfiguration
Default
Thisfeatureisenabledbydefault,defaultquerycountis2,defaultqueryintervalis
10s,maximumresponsetimeis5s
Usage
None
Examples
Thisexampleshowshowtouseipv6mldsnoopingqueriertcncommand:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingqueriertcnquery-count2
RelatedCommands
showipv6mldsnoopingquerier14249.3.12ipv6mldsnoopingvlanaccess-group
CommandPurpose
Usethiscommandtosetmldsnoopingaccessgrouponvlan.
CommandSyntax
ipv6mldsnoopingvlanvlan_idaccess-groupacl
noipv6mldsnoopingvlanvlan_idaccess-group
Parameter ParameterDescriptionParameterValue
vlan_id VlanID,rangeis1to
4094.1-4094
acl IPV6NamedStandard
Accesslist.-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtouseapplyaccess-grouponvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10access-groupacl
Thisexampleshowshowtoremoveaccess-groupfromvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10access-group1425RelatedCommands
showipv6mldsnoopingvlan
9.3.13ipv6mldsnoopingvlanmrouterinterface
CommandPurpose
Usethiscommandtosetmldsnoopingmrouterinterfaceonvlan.
CommandSyntax
ipv6mldsnoopingvlanVLAN_IDmrouterinterfaceIFNAME
noipv6mldsnoopingvlanvlan_idmrouterinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
IFNAME Mrouterinterfaceonthis
vlanSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
GlobalConfiguration
Default
None
Usage
Thespecificedinterfacemusthavealreadyjoinedtheconfiguredvlan.
Examples
Thisexampleshowshowtoseteth-0-1asmrouterinterfaceonvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10mrouterinterfaceeth-0-11426Thisexampleshowshowtounseteth-0-1asmrouterinterfaceonvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10mrouterinterfaceeth-0-1
RelatedCommands
showipv6mldsnoopingvlan
9.3.14ipv6mldsnoopingvlanmrouter-aging-interval
CommandPurpose
Usethiscommandtosetmldsnoopingmrouterinterfaceagingintervalonvlan.
CommandSyntax
ipv6mldsnoopingvlanVLAN_IDmrouter-aging-intervalINTERVAL
noipv6mldsnoopingvlanVLAN_IDmrouter-aging-INTERVAL
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
INTERVAL Dynamicmrouterinterface
agingintervalonthis
vlan(seconds)1-65535
CommandMode
GlobalConfiguration
Default
255s
Usage
None1427Examples
Thisexampleshowshowtosetdynamicmrouterinterfaceagingintervalas100
secondsonvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10mrouter-aging-interval100
Thisexampleshowshowtoresetdynamicmrouterinterfaceagingintervalasdefault
onvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10mrouter-aging-interval
RelatedCommands
showipv6mldsnoopingvlan
9.3.15ipv6mldsnoopingvlanquerier
CommandPurpose
Usethiscommandtoenablemldsnoopingquerieronvlan.
CommandSyntax
ipv6mldsnoopingvlanVLAN_IDquerier
noipv6mldsnoopingvlanVLAN_IDquerier
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
Disable1428Usage
None
Examples
Thisexampleshowshowtoenablequerieronvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10querier
Thisexampleshowshowtodisablequerieronvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10querier
RelatedCommands
showipv6mldsnoopingqueriervlan
9.3.16ipv6mldsnoopingvlanquerieraddress
CommandPurpose
Usethiscommandtosetmldsnoopingquerieraddressonvlan.
CommandSyntax
ipv6mldsnoopingvlanVLAN_IDquerieraddressIPV6_ADDR
noipv6mldsnoopingvlanVLAN_IDquerieraddressIPV6_ADDR
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
IPV6_ADDR Theaddressofquerieron
thisvlanIPv6Address
CommandMode
GlobalConfiguration1429Default
None
Usage
Willuseglobalconfiguredsource-addressifvlanisnotconfiguredotherwiseuse
source-addressconfigfromvlan.
Examples
Thisexampleshowshowtosetquerieraddressonvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10querieraddressfe80::1
Thisexampleshowshowtounsetquerieraddressonvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10querieraddress
RelatedCommands
showipv6mldsnoopingqueriervlan
9.3.17ipv6mldsnoopingvlanquerier-timeout
CommandPurpose
Usethiscommandtosetmldpreviousqueriertimeoutintervalonthisvlan.Toresetit
todefault,usethenoformofthiscommand.
CommandSyntax
ipv6mldsnoopingvlanVLAN_IDquerier-timeoutINTERVAL
noipv6mldsnoopingvlanvlan_idquerier-timeout
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-40941430INTERVAL Themldpreviousquerier
timeoutintervalonthis
VLAN(seconds)60-300
CommandMode
GlobalConfiguration
Default
255s
Usage
None
Examples
Thisexampleshowshowtosetpreviousqueriertimeoutintervalas100secondson
vlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10querieraddress2001::2
Thisexampleshowshowtoresetpreviousqueriertimeoutintervalonvlan10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10querier-timeout
RelatedCommands
showipv6mldsnoopingqueriervlan
9.3.18ipv6mldsnoopingvlanstatic-group
CommandPurpose
Usethiscommandtoaddstaticmldgrouponthisvlan.Toremovethissetting,use
thenoformofthiscommand.1431CommandSyntax
ipv6mldsnoopingvlanVLAN_IDstatic-groupGRP_IPV6_ADDR(source
SRC_IPV6_ADDR|)interfaceIFNAME
noipv6mldsnoopingvlanVLAN_IDstatic-groupGRP_IPV6_ADDR(source
SRC_IPV6_ADDR|)interfaceIFNAME
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
GRP_IPV6_ADDR Theaddressofgroup
configuredonthespecified
interface.IPv6Address
SRC_IPV6_ADDR Theaddressofsource
configuredonthespecified
interface.IPv6Address
IFNAME Theinterfaceconfigured
asamemberofspecified
grouponthisvlanSupport
physical/aggregationports
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoaddgroupff0e::1234oninterfaceeth-0-11ofvlan10:
Switch#configureterminal
Switch(config)#ipv6mldsnoopingvlan10querier-timeout1001432Thisexampleshowshowtoremovegroupff0e::1234frominterfaceeth-0-11ofvlan
10:
Switch#configureterminal
Switch(config)#noipv6mldsnoopingvlan10static-groupff0e::1234interfaceeth-0-11
RelatedCommands
showipv6mldsnoopinggroup
9.3.19clearipv6mldsnoopinggroup
CommandPurpose
Usethiscommandtoclearallmldsnoopinggroups.
CommandSyntax
clearipv6mldsnooping(group*|)
Parameter ParameterDescriptionParameterValue
* Allmulticastgroupaddress-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearmldsnoopinggroupall:
Switch#clearipv6mldsnooping1433RelatedCommands
None
9.3.20clearipv6mldsnoopingvlangroup
CommandPurpose
Usethiscommandtoclearmldsnoopinggroupsonvlan.
CommandSyntax
clearipv6mldsnoopingvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearmldsnoopinggrouponvlan10:
Switch#clearipv6mldsnoopingvlan10
RelatedCommands
None14349.3.21showipv6mldsnoopingglobal
CommandPurpose
Usethiscommandtoshowtheglobalconfigurationsofmldsnooping.
CommandSyntax
showipv6mldsnoopingglobal
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheglobalconfigurationsofmldsnooping:
Switch#showipv6mldsnoopingglobal
GlobalMldSnoopingConfiguration
-------------------------------------------------
MldSnooping :Enabled
MldSnoopingFast-Leave :Disabled
MldSnoopingVersion :1
MldSnoopingMax-Member-Number:4096
MldSnoopingUnknownMulticastBehavior:Flood
MldSnoopingReport-Suppression:Enabled
RelatedCommands
None14359.3.22showipv6mldsnoopinggroups
CommandPurpose
Usethiscommandtoshowthemldsnoopinggroups.
CommandSyntax
showipv6mldsnoopinggroups
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymldsnoopinggroups:
Switch#showipv6mldsnoopinggroups
VLANInterfaceGroupAddress UptimeExpire-time
1eth-0-3ff0e:2111:1111:1111:1111:1111:1234:567800:00:0400:04:16
RelatedCommands
None
9.3.23showipv6mldsnoopinggroupsvlan
CommandPurpose
Usethiscommandtoshowthemldsnoopinggroupsonvlan.1436CommandSyntax
showipv6mldsnoopinggroupsvlanVLAN_ID(group_address|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
group-address Theaddressofgroup -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymldsnoopinggroupsonvlan1:
Switch#showipv6mldsnoopinggroupsvlan1
MLDSnoopinggroupsforvlan1
Interface:eth-0-3
Group:ff0e:2111:1111:1111:1111:1111:1234:5678
Uptime:00:00:42
Groupmode:Exclude(Expires:00:03:38)
Lastreporter:fe80:1111:1111:1111:1111:1111:1111:1111
Sourcelistisempty
RelatedCommands
None
9.3.24showipv6mldsnoopinggroupscount
CommandPurpose
Usethiscommandtoshowthemldsnoopinggroupsnumber.1437CommandSyntax
showipv6mldsnoopinggroups(vlanVLAN_ID|)count
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymldsnoopinggroupsnumberonvlan1:
Switch#showipv6mldsnoopinggroupsvlan1count
Dynamicmulticastgroupscount:1
Staticmulticastgroupscount:0
Totalmulticastgroupscount:1
RelatedCommands
None
9.3.25showipv6mldsnoopingquerier
CommandPurpose
Usethiscommandtoshowtheconfigurationsofmldsnoopingquerierinformation.
CommandSyntax
showipv6mldsnoopingquerier(vlanVLAN_ID|)1438Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheconfigurationsofmldsnoopingquerieron
vlan1:
Switch#showipv6mldsnoopingqueriervlan1
GlobalMldSnoopingQuerierConfiguration
-------------------------------------------------
Version :1
Last-Member-Query-Interval(msec):1000
Max-Query-Response-Time(sec):10
Query-Interval(sec):125
GlobalSource-Address:::
TCNQueryCount :2
TCNQueryInterval(sec):10
Vlan1:MLDsnoopingquerierstatus
--------------------------------------------
Electedquerieris:::
--------------------------------------------
Adminstate :Disabled
Adminversion :1
Operationalstate :Non-Querier
Querieroperationaladdress:::
Querierconfigureaddress:N/A
Last-Member-Query-Interval(msec):1000
Max-Query-Response-Time(sec):10
Query-Interval(sec):125
Querier-Timeout(sec):2551439RelatedCommands
None
9.3.26showipv6mldsnoopingmrouter
CommandPurpose
Usethiscommandtoshowtheinformationofmldsnoopingmrouterportonvlan.
CommandSyntax
showipv6mldsnoopingmrouter(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofmldsnoopingmrouterporton
vlan1:
Switch#showipv6mldsnoopingmroutervlan1
VLANInterfaceModeUptimeExpires-time
2eth-0-1static--
RelatedCommands
None14409.3.27showipv6mldsnoopingvlan
CommandPurpose
Usethiscommandtoshowtheconfigurationsofmldsnoopingonvlan.
CommandSyntax
showipv6mldsnooping(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheconfigurationsofmldsnoopingonvlan1:
Switch#showipv6mldsnoopingvlan1
GlobalMldSnoopingConfiguration
-------------------------------------------------
MldSnooping :Enabled
MldSnoopingFast-Leave :Disabled
MldSnoopingVersion :1
MldSnoopingMax-Member-Number:4096
MldSnoopingUnknownMulticastBehavior:Flood
MldSnoopingReport-Suppression:Enabled
Vlan2
-----------
MldSnooping :Enabled
MldSnoopingFast-Leave :Disabled
MldSnoopingReport-Suppression:Enabled1441MldSnoopingVersion :1
MldSnoopingMax-Member-Number:4096
MldSnoopingUnknownMulticastBehavior:Flood
MldSnoopingGroupAccess-list:N/A
MldSnoopingMrouterPort :eth-0-1(static)
MldSnoopingMrouterPortAgingInterval(sec):255
RelatedCommands
None
9.3.28showresourcel2mcast
CommandPurpose
UsethiscommandtodisplaytheresourceusageofL2mcast.
CommandSyntax
showresourcel2mcast
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcel2mcastcommand:
Switch#showresourcel2mcast
L2MCAST
Resource UsedCapability
=============================================================
L2McastEntry 11024
L2McastMember 281921442RelatedCommands
None
9.4PIMv6Commands
9.4.1ipv6pimaccept-register
CommandPurpose
Usethiscommandtoapplyanaccess-listtolimittheipv6pimregistermessage
receivedbyrp.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimaccept-registerlistLISTNAME
noipv6pimaccept-register
Parameter ParameterDescriptionParameterValue
LISTNAME Thenameoftheaccess-
listtobeapplied.Astringwith1-20
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Thisfeatureisusedtopreventtheunauthorizeduserregisteredtotheswitch.
Whenenablethisfeature,thesystemwillsendbackaregisterstopmessagewhen
theunauthorizedregistermessageisreceived.1443Examples
Thisexampleshowshowtoapplytheaccess-listacl1tolimittheipv6pimregister
messagereceivedbyrp:
Switch#configureterminal
Switch(config)#ipv6pimaccept-registerlistacl1
Thisexampleshowshowtoremovethelimits:
Switch#configureterminal
Switch(config)#noipv6pimaccept-register
RelatedCommands
None
9.4.2ipv6pimanycast-rp
CommandPurpose
Usethiscommandtosetanycastrendezvous-point.
Toremovetheconfigurations,usethenoformofthiscommand.
CommandSyntax
ipv6pimanycast-rpANYCAST_RP_ADDRANYCAST_MEMBER_ADDR
noipv6pimanycast-rpANYCAST_RP_ADDR(ANYCAST_MEMBER_ADDR|)
Parameter ParameterDescriptionParameterValue
ANYCAST_RP_ADDRAnycastrpaddress IPv6address
IPv6address IPv6 IPv6address
CommandMode
GlobalConfiguration
Default
None1444Usage
Shouldconfigureeveryrouterinthenetwork,andmustconfiguresameRPaddress.
Examples
Thisexampleshowshowtosetanycastrendezvous-point:
Switch#configureterminal
Switch(config)#ipv6pimanycast-rp2001::22001::10
Thisexampleshowshowtoremovethememberinanycastrendezvous-point:
Switch#configureterminal
Switch(config)#noipv6pimanycast-rp2001::22001::10
RelatedCommands
None
9.4.3ipv6pimbsr-candidate
CommandPurpose
Usethiscommandtoconfigurethecandidatebootstraprouter(candidateBSR).
Toremovetheconfigurations,usethenoformofthiscommand.
CommandSyntax
ipv6pimbsr-candidateIFNAME(HASH_MASK(PRIORITY)|)
noipv6pimbsr-candidate
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
HASH_MASK HashmasklengthforRP
selection0-128
PRIORITY Priorityvalueforcandidate
bootstraprouter0-2551445CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoconfigurethecandidateBSR:
Switch#configureterminal
Switch(config)#ipv6pimbsr-candidateeth-0-1
ThisexampleshowshowtocancelthecandidateBSRconfigured:
Switch#configureterminal
Switch(config)#noipv6pimbsr-candidate
RelatedCommands
ipv6pimbsr-border
9.4.4ipv6pimbsr-border
CommandPurpose
Usethiscommandtoconfiguretheborderofpimdomain.
Toremovetheconfigurationsoftheborderofpimdomain,usethenoformofthis
command.
CommandSyntax
ipv6pimbsr-border
noipv6pimbsr-border1446CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretheborderofpimdomain:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimbsr-border
Thisexampleshowshowtoremovetheconfigurationsoftheborderofpimdomain:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimbsr-border
RelatedCommands
ipv6pimbsr-candidate
9.4.5ipv6pimdr-priority
CommandPurpose
UsethiscommandtoconfiguretheDRpriority.
Toreturnittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6pimdr-priorityPRIORITY
noipv6pimdr-priority
Parameter ParameterDescriptionParameterValue1447PRIORITY TheDRpriority 0-4294967294
CommandMode
InterfaceConfiguration
Default
1
Usage
WhenahellomessagewithoutDRpriorityisreceived,itwillberegardedtohavethe
maxDRpriorityandtobeelectedasDR.Whenmorethanoneroutershello
messagesdonothaveDRpriority,theonewhichhavethehighestipv6addresswill
beelectedasDR.
Examples
ThisexampleshowshowtosetthepimrouterDRpriorityto1000:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimdr-priority1000
ThisexampleshowshowtoreturnthepimrouterDRprioritytodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimdr-priority
RelatedCommands
None
9.4.6ipv6pimexclude-genid
CommandPurpose
Usethiscommandtoexcludegenerationidoptionfrompimhellopacketsonthis
interface.
Toreturntothedefaultsetting,usethenoformofthiscommand.1448CommandSyntax
ipv6pimexclude-genid
noipv6pimexclude-genid
CommandMode
InterfaceConfiguration
Default
Disable
Usage
GenerationIDistheIDofaPIMneighbour,itiscarriedinPIMhellomessage,the
receiverdevicewillrecordeveryreceivedGenerationIDinthehellopacketandcheck
ifGenerationIDhaschanged,ifGenerationIDchanged,willconsiderneighbourstate
changedandrestartstatemachine.
Examples
Thisexampleshowshowtoexcludegenerationidoptionfrompimhellopacketson
thisinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimexclude-genid
Thisexampleshowshowtoreturnthegenerationidoptiontothedefaultsetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimexclude-genid
RelatedCommands
None14499.4.7ipv6pimhello-interval
CommandPurpose
Usethiscommandtoconfiguretheintervalforpimhellopacketsonthisinterface.
Toresettothedefaultsetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimhello-intervalINTERVAL
noipv6pimhello-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Thepimhellomessage
interval(second)1-65535
CommandMode
InterfaceConfiguration
Default
30s
Usage
None
Examples
Thisexampleshowshowtosetthepimhellomessageintervalto100s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimhello-interval100
Thisexampleshowshowtoresetthepimhellomessageintervaltodefaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimhello-interval1450RelatedCommands
None
9.4.8ipv6pimignore-rp-set-priority
CommandPurpose
UsethiscommandtoignoreRPsetpriorityvalue.
Tonotignorethepriority,usethenoformofthiscommand.
CommandSyntax
ipv6pimignore-rp-set-priority
noipv6pimignore-rp-set-priority
CommandMode
GlobalConfiguration
Default
NotignoreRPsetpriorityvalue.
Usage
None
Examples
ThisexampleshowshowtoignoreRPsetpriorityvalue:
Switch#configureterminal
Switch(config)#ipv6pimignore-rp-set-priority
Thisexampleshowshowtoreturntheconfigurationstodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6pimignore-rp-set-priority
RelatedCommands
None14519.4.9ipv6pimjp-timer
CommandPurpose
Usethiscommandtosetthejoin/prunetimervalue.
Toreturnthetimertodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6pimjp-timerSECOND
noipv6pimjp-timer
Parameter ParameterDescriptionParameterValue
SECOND TheJoin/Prunetimervalue
(second)1-65535
CommandMode
GlobalConfiguration
Default
60s
Usage
None
Examples
Thisexampleshowshowtosetthejoin/prunetimervalueto100s:
Switch#configureterminal
Switch(config)#ipv6pimjp-timer100
Thisexampleshowshowtoreturnthejoin/prunetimervaluetodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6pimjp-timer1452RelatedCommands
None
9.4.10ipv6pimneighbor-filter
CommandPurpose
Usethiscommandtoaddanaccess-listtofiltertheneighbor.
Toremovethisfilter,usethenoformofthiscommand.
CommandSyntax
ipv6pimneighbor-filterLISTNAME
noipv6pimneighbor-filter
Parameter ParameterDescriptionParameterValue
LISTNAME Thenameoftheaccess-
listAstringwith1-20
characters
CommandMode
InterfaceConfiguration
Default
None
Usage
Neighbourswouldsendhellomessagetoeachothertoestablishconnectionswith
otherneighbouryoucanusethiscommandtofilterwhichneighbourcanbe
connectedornot.
Examples
Thisexampleshowshowtoestablishneighborsbasedonaccess-listacl1:1453Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimneighbor-filteracl1
Thisexampleshowshowtocancelthefilter:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimneighbor-filter
RelatedCommands
None
9.4.11ipv6pimregister-rate-limit
CommandPurpose
Usethiscommandtosettheratelimitforpimregisters.
Toreturntheratelimittodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6pimregister-rate-limitLIMIT
noipv6pimregister-rate-limit
Parameter ParameterDescriptionParameterValue
LIMIT Theratelimitforpim
registerssendfromDRto
RP1-65535
CommandMode
GlobalConfiguration
Default
Bydefault,willnotlimitPIMregistermessages,ifalimitisset,PIMregister
messageswillbediscardwhenpakcetreachedbythislimit.1454Usage
Thereisnoratelimitforpimregistersbydefault.
Whentheratelimitisconfigured,theexceedpimregistermessagewillbedropped
ontherp.
Examples
Thisexampleshowshowtosettheratelimitforpimregistersto100persecond:
Switch#configureterminal
Switch(config)#ipv6pimregister-rate-limit100
Thisexampleshowshowtocanceltheratelimit:
Switch#configureterminal
Switch(config)#noipv6pimregister-rate-limit
RelatedCommands
ipv6pimregister-rp-reachability
ipv6pimregister-source
ipv6pimregister-suppression
9.4.12ipv6pimregister-source
CommandPurpose
Usethiscommandtosetthesourceaddressforpimregister.
Toreturnthesourceaddressforpimregistertodefaultvalue,usethenoformofthis
command.
CommandSyntax
ipv6pimregister-sourceIFNAME
noipv6pimregister-source
Parameter ParameterDescriptionParameterValue1455IFNAME Thenameoftheinterface.
Usetheaddressofthis
interfacetobethesource
addressforpimregisterSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
GlobalConfiguration
Default
Thesourceaddressforpimregisteristheinterfaceipv6addressofdrbydefault.
Usage
None
Examples
Thisexampleshowshowtosetthesourceaddressforpimregistertotheipv6
addressofinterfaceeth-0-1:
Switch#configureterminal
Switch(config)#ipv6pimregister-sourceeth-0-1
Thisexampleshowshowtoreturnthesourceaddressforpimregistertodefault
value:
Switch#configureterminal
Switch(config)#noipv6pimregister-source
RelatedCommands
ipv6pimregister-rate-limit
ipv6pimregister-rp-reachability
ipv6pimregister-suppression14569.4.13ipv6pimregister-rp-reachability
CommandPurpose
Usethiscommandtoenablerpreachabilitycheckforpimregisters.
Todisablethischeck,usethenoformofthiscommand.
CommandSyntax
ipv6pimregister-rp-reachability
noipv6pimregister-rp-reachability
CommandMode
GlobalConfiguration
Default
Disable.
Usage
None
Examples
Thisexampleshowshowtoenablerpreachabilitycheckforpimregisters:
Switch#configureterminal
Switch(config)#ipv6pimregister-rp-reachability
Thisexampleshowshowtodisablerpreachabilitycheckforpimregisters:
Switch#configureterminal
Switch(config)#noipv6pimregister-rp-reachability
RelatedCommands
ipv6pimregister-rate-limit
ipv6pimregister-source14579.4.14ipv6pimregister-suppression
CommandPurpose
Usethiscommandtosettheregistersuppressiontime.
Toreturnthistimetodefaultvalue,usethenoformofthiscommand.
CommandSyntax
ipv6pimregister-suppressionSECOND
noipv6pimregister-suppression
Parameter ParameterDescriptionParameterValue
SECOND Theregistersuppression
timeinseconds11-65535
CommandMode
GlobalConfiguration
Default
60s
Usage
None
Examples
Thisexampleshowshowtosettheregistersuppressiontimeto100s:
Switch#configureterminal
Switch(config)#ipv6pimregister-suppression100
Thisexampleshowshowtoreturntheregistersuppressiontimetodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6pimregister-suppression1458RelatedCommands
ipv6pimregister-rate-limit
ipv6pimregister-rp-reachability
ipv6pimregister-source
9.4.15ipv6pimrp-address
CommandPurpose
Usethiscommandtosettheipv6pimrp(rendezvouspoint)address.
Toremoveit,usethenoformofthiscommand.
CommandSyntax
ipv6pimrp-addressIPV6_ADDR(LISTNAME|override|)
noipv6pimrp-addressIPV6_ADDR(LISTNAME|)
Parameter ParameterDescriptionParameterValue
IPV6_ADDR Therpaddress IPv6address
LISTNAME Thenameofanaccess-listAstringwith1-20
characters
override Overridesdynamically
learnedRPmappings-
CommandMode
GlobalConfiguration
Default
None
Usage
None1459Examples
Thisexampleshowshowtosetthepimrpaddressto2001::2:
Switch#configureterminal
Switch(config)#ipv6pimrp-address2001::2
Thisexampleshowshowtoremovetherpaddress2001::2:
Switch#configureterminal
Switch(config)#noipv6pimrp-address2001::2
RelatedCommands
ipv6pimrp-candidate
ipv6pimrp-register-kat
9.4.16ipv6pimrp-candidate
CommandPurpose
Usethiscommandtosetthecandidaterp.
Toremovethecandidaterp,usethenoformofthiscommand.
CommandSyntax
ipv6pimrp-candidateIFNAME({priorityPRIORITY|intervalINTERVAL|group-list
LISTNAME}|)
noipv6pimrp-candidate(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Thenameoftheinterface
tobethecandidaterpSupport
physical/aggregation/loopb
ack/vlan/tunnelports
PRIORITY TheCandidate-RPpriority0-255
INTERVAL TheC-RPadvertisement
intervalinseconds1-163831460LISTNAME GrouprangesforthisC-
RP,onlypermitfilters
wouldbecaredAstringwith1-20
characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosettheinterfaceeth-0-1tobethecandidaterp:
Switch#configureterminal
Switch(config)#ipv6pimrp-candidateeth-0-1
Thisexampleshowshowtocanceltheconfiguredcandidaterp:
Switch#configureterminal
Switch(config)#noipv6pimrp-candidateeth-0-1
RelatedCommands
ipv6pimrp-address
9.4.17ipv6pimrp-register-kat
CommandPurpose
Usethiscommandtosetthekeepalivetimer(KAT)for(S,G)atRPfromPIM
registers.
Toreturnthistimertodefaultvalue,usethenoformofthiscommand.1461CommandSyntax
ipv6pimrp-register-katSECOND
noipv6pimrp-register-kat
Parameter ParameterDescriptionParameterValue
SECOND TheKATtimeinseconds1-65535
CommandMode
GlobalConfiguration
Default
185s
Usage
Theregistermessagesendfromdrwilladdanentryonrp.Thisentrywillbeaged
whenthekeepalivetimerexpiredwhichcanbeconfiguredbythiscommand.
Examples
Thisexampleshowshowtosetthekeepalivetimerto100satRPfromPIMregisters:
Switch#configureterminal
Switch(config)#ipv6pimrp-register-kat100
Thisexampleshowshowtoreturnthistimertodefaultvalue:
Switch#configureterminal
Switch(config)#noipv6pimrp-register-kat
RelatedCommands
ipv6pimrp-address
ipv6pimrp-candidate14629.4.18ipv6pimspt-switch-thresholdinfinity
CommandPurpose
Usethiscommandtosetthesptswitchthresholdtoinfinity.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimspt-switch-thresholdinfinity(group-listLISTNAME|)
noipv6pimspt-switch-thresholdinfinity(group-listLISTNAME|)
Parameter ParameterDescriptionParameterValue
LISTNAME GroupaddressaccesslistAstringwith1-20
characters
CommandMode
GlobalConfiguration
Default
TheDRwillswitchtosptimmediatelywhenreceivedthefirstmulticastpacketby
default.
Usage
None
Examples
Thisexampleshowshowtosetthesptswitchthresholdtoinfinity:
Switch#configureterminal
Switch(config)#ipv6pimspt-switch-thresholdinfinity
Thisexampleshowshowtoreturnthespt-switch-thresholdtodefault:
Switch#configureterminal
Switch(config)#noipv6pimspt-switch-thresholdinfinity1463RelatedCommands
showipv6pimsparse-modespt-threshold
9.4.19ipv6pimcisco-register-checksum
CommandPurpose
Usethiscommandtocalculateregisterchecksumoverwholepacket(cisco
compatibility).
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimcisco-register-checksum(group-listLISTNAME|)
noipv6pimcisco-register-checksum(group-listLISTNAME|)
Parameter ParameterDescriptionParameterValue
LISTNAME GroupaddressaccesslistAstringwith1-20
characters
CommandMode
GlobalConfiguration
Default
TheregisterchecksumdefinedinRFCisusedbydefault.
Usage
TheregisterchecksumdefinedinRFCisusedbydefault,ifgroup-listisconfigured,
onlypacketsthatverifiedcanbesentinCISCOway.
Examples
Thisexampleshowshowtosettocalculateregisterchecksumoverwholepacket:
Switch#configureterminal
Switch(config)#ipv6pimcisco-register-checksum1464Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#noipv6pimcisco-register-checksum
RelatedCommands
None
9.4.20ipv6pimsparse-mode
CommandPurpose
Usethiscommandtoenablepimsparsemodeontheinterface.
Todisablepimsparsemode,usethenoformofthiscommand.
CommandSyntax
ipv6pimsparse-mode(passive|)
noipv6pimsparse-mode(passive|)
Parameter ParameterDescriptionParameterValue
passive Pimpassivemode(local
membersonly)-
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thepimhellomessagewillnotbesentoutfromtheinterfacewhenthepassivemode
isconfigured.1465Examples
Thisexampleshowshowtoenablepimsparsemodeontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimsparse-mode
Thisexampleshowshowtodisablepimsparsemodeontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimsparse-mode
Thisexampleshowshowtoenablepimsparsemodepassiveontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimsparse-modepassive
RelatedCommands
None
9.4.21ipv6pimunicast-bsm
CommandPurpose
UsethiscommandtoenablesendingandreceivingofunicastBSMforbackward
compatibility.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimunicast-bsm
noipv6pimunicast-bsm
CommandMode
InterfaceConfiguration
Default
Disable1466Usage
InterfacewillsendBSMmessagetothewholepimdomainbydefault.
Examples
ThisexampleshowshowtoenablesendingandreceivingofunicastBSMfor
backwardcompatibility:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimunicast-bsm
Thisexampleshowshowtocancelthissetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimunicast-bsm
RelatedCommands
None
9.4.22ipv6pimssm
CommandPurpose
Usethiscommandtoenablepim-ssmandsetssmgrouprange.
Tocancelthissetting,usethenoformofthiscommand.
CommandSyntax
ipv6pimssm(default|rangeLISTNAME)
noipv6pimssm
Parameter ParameterDescriptionParameterValue
default UseFF3x::/32grouprange
forSSM-
LISTNAME ACLforgrouprangetobe
usedforSSMAstringwith1-20
characters1467CommandMode
GlobalConfiguration
Default
Disable
Usage
Enablepim-ssmandsetssmgrouprange.
Examples
Thisexampleshowshowtoenablepim-ssmandsetssmgrouprangetodefault:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipv6pimssmdefault
Thisexampleshowshowtocancelthissetting:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noipv6pimssmdefault
RelatedCommands
None
9.4.23showipv6pimsparse-modebsr-router
CommandPurpose
Usethiscommandtoshowtheinformationofbootstraprouter.
CommandSyntax
showipv6pimsparse-modebsr-router
CommandMode
PrivilegedEXEC1468Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofbootstraprouter:
Switch#showipv6pimsparse-modebsr-router
PIM6v2Bootstrapinformation
ThissystemistheBootstrapRouter(BSR)
BSRaddress:2001:2::1(?)
Uptime:00:00:08,BSRPriority:64,Hashmasklength:126
Nextbootstrapmessagein00:00:52
Role:CandidateBSR
State:ElectedBSR
RelatedCommands
None
9.4.24showipv6pimsparse-modeinterface
CommandPurpose
Usethiscommandtoshowtheinformationofpiminterface.
CommandSyntax
showipv6pimsparse-modeinterface(detail|)
Parameter ParameterDescriptionParameterValue
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC1469Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofpiminterface:
Switch#showipv6pimsparse-modeinterfacedetail
eth-0-1(vif0):
Addressfe80::9c7c:7eff:fe94:8300,DRfe80::9c7c:7eff:fe94:8300
Helloperiod30seconds,NextHelloin3seconds
TriggeredHelloperiod5seconds
Secondaryaddresses:
2001:1::1
Neighbors:
RelatedCommands
None
9.4.25showipv6pimsparse-modelocal-member
CommandPurpose
Usethiscommandtoshowthepimlocalmembershipinformation.
CommandSyntax
showipv6pimsparse-modelocal-member(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports1470CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaypimlocalmembershipinformation:
Switch#showipv6pimsparse-modelocal-members
PIMLocalmembershipinformation
eth-0-2:
*,ff0e::1234:5678
info:Include
RelatedCommands
None
9.4.26showipv6pimsparse-modemroute
CommandPurpose
Usethiscommandtoshowthemrouteinformationofpimsparsemode.
CommandSyntax
showipv6pimsparse-modemroute(SRC_IPV6_ADDR|GROUP_IPV6_ADDR|)
(detail|)
Parameter ParameterDescriptionParameterValue
SRC_IPV6_ADDR Sourceaddress IPv6address
GROUP_IPV6_ADDR Groupaddress IPv6address1471detail Detailedinterface
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaypimmrouteinformation:
Switch#showipv6pimsparse-modemroutedetail
IPv6MulticastRoutingTable
(*,*,RP)Entries:0
(*,G)Entries:1
(S,G)Entries:0
(S,G,rpt)Entries:0
FCREntries:0
*,ff0e::1234:5678
Type:(*,G)
Uptime:00:01:49
RP:::,RPFnbr:None,RPFidx:None
Upstream:
State:JOINED,SPTSwitch:Enabled,JT:off
Macrostate:JoinDesired,
Downstream:
eth-0-2:
State:NOINFO,ET:off,PPT:off
AssertState:NOINFO,AT:off
Winner:::,Metric:4294967295,Pref:4294967295,RPTbit:on
Macrostate:CouldAssert,AssertTrack
LocalOlist:
eth-0-2
RelatedCommands
None14729.4.27showipv6pimsparse-modeneighbor
CommandPurpose
Usethiscommandtoshowtheneighborinformationofpimsparsemode.
CommandSyntax
showipv6pimsparse-modeneighbor((IFNAME(IPV6_ADDR|))|detail|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports
IPV6_ADDR Neighboraddress IPv6address
detail Detailedinterface
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheneighborinformationofpimsparsemode:
Switch#showipv6pimsparse-modeneighbor
NeighborAddress InterfaceUptime/ExpiresDR
Pri/Mode
fe80::9c7c:7eff:fe94:8300 eth-0-900:00:40/00:01:441/DR1473RelatedCommands
None
9.4.28showipv6pimsparse-moderpmapping
CommandPurpose
Usethiscommandtoshowgrouptorpmappings.
CommandSyntax
showipv6pimsparse-moderpmapping
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaygrouptorpmappings:
Switch#showipv6pimsparse-moderpmapping
RP:2001:1::1
Infosource:2001:1::1,viabootstrap
RelatedCommands
None14749.4.29showipv6pimsparse-moderp-hash
CommandPurpose
Usethiscommandtoshowtheinformationofrptobechosenbasedongroup
selected.
CommandSyntax
showipv6pimsparse-moderp-hashGROUP_IPV6_ADDR
Parameter ParameterDescriptionParameterValue
GROUP_IPV6_ADDR MulticastgroupaddressIPv6address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationofrptobechosenbasedon
groupff02::1234:
Switch#showipv6pimsparse-moderp-hashff02::1234
RP:2001::2
RelatedCommands
None14759.4.30showipv6pimsparse-modespt-threshold
CommandPurpose
Usethiscommandtoshowtherpttosptthresholdofpimsparsemode.
CommandSyntax
showipv6pimsparse-modespt-threshold
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytherpttosptthresholdofpimsparsemode:
Switch#showipv6pimsparse-modespt-threshold
IPv6PIMspare-modeimmediatelyswitchesovertoSPTuponreceivingthefirsttr
affic
RelatedCommands
None14769.5MVR6Commands
9.5.1mvr6
CommandPurpose
UsethiscommandtoenableordisableMVR6.Todisablemvr6,usethenoformof
thiscommand.
CommandSyntax
mvr6
nomvr6
CommandMode
GlobalConfiguration
Default
Disable
Usage
EnableMVR6intheSwitch,mustdisableipv6multicast-routingbeforeenableMVR6.
Examples
ThisexampleshowshowtoenableMVR6:
Switch#configureterminal
Switch(config)#noipv6multicast-routing
Switch(config)#mvr6
RelatedCommands
showmvr614779.5.2mvr6vlan
CommandPurpose
UsethiscommandtospecifytheMVR6sourcevlan.Toremovethissetting,usethe
noformofthiscommand.
CommandSyntax
mvr6vlanVLAN_ID
nomvr6vlan
Parameter ParameterDescriptionParameterValue
VLAN_ID VlanID 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
TherelatedvlaninterfaceshouldbecreatedbeforetheconfigurationoftheMVR6
sourcevlan.
Examples
ThisexampleshowshowtoconfiguresourcevlanofMVR6.configurevlan2as
sourcevlanofMVR6:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config)#interfacevlan2
Switch(config-if)#exit
Switch(config)#mvr6vlan21478RelatedCommands
interfacevlan
9.5.3mvr6group
CommandPurpose
UsethiscommandtoconfigureglobalgroupforMVR6.Toremovethissetting,use
thenoformofthiscommand.
CommandSyntax
mvr6groupIPV6_ADDR(COUNT|)
nomvr6groupaddress(COUNT|)
Parameter ParameterDescriptionParameterValue
IPV6_ADDR MulticastgroupaddressIPv6Address
COUNT Countofcontiguous
groups1-64
CommandMode
GlobalConfiguration
Default
None
Usage
Thiscommandisusedtocreateordeleteaglobalstaticgroup.
Examples
Thisexampleshowshowtocreateglobalstaticgroupfromff0e::1toff0e::50:
Switch#configureterminal
Switch(config)#mvr6groupff0e::1501479RelatedCommands
None
9.5.4mvr6source-address
CommandPurpose
Usethiscommandtocreatemvr6sourceaddress.Toresetittodefaultvalue,usethe
noformofthiscommand.
CommandSyntax
mvr6source-addressIPv6_ADDR
nomvr6source-address
Parameter ParameterDescriptionParameterValue
IPv6_ADDR Sourceipv6address IPv6Address
CommandMode
GlobalConfiguration
Default
fe80::1
Usage
None
Examples
Thisexampleshowshowtocreatemvr6sourceaddress:
Switch#configureterminal
Switch(config)#mvr6source-address2001::2
Thisexampleshowshowtoresumemvr6sourceaddressasdefaultIPv6address:
Switch#configureterminal
Switch(config)#nomvr6source-address1480RelatedCommands
None
9.5.5mvr6type
CommandPurpose
Usethiscommandtoconfigureaswitch-portassourceportorreceiverport.To
removethissetting,usethenoformofthiscommand.
CommandSyntax
mvr6type(source|receivervlanVLAN_ID)
nomvr6type(receivervlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
source MVR6sourceport -
receiver MVR6receiverport -
VLAN_ID MVR6receivervlan 1-4094
CommandMode
InterfaceConfiguration
Default
None
Usage
Configuretheinterfaceassourceportorreceiverport.Thesourceportmustbelong
tosourcevlan,andthereceiverportmustnotbelongtosourcevlan.
Examples
Thisexampleshowshowtoconfiguretheeth-0-1assourceport,andconfigurethe
eth-0-2asreceiverportofvlan2:1481Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mvr6typesource
Switch(config)#interfaceeth-0-2
Switch(config-if)#mvr6typereceivervlan2
RelatedCommands
None
9.5.6showmvr6
CommandPurpose
Usethiscommandtoshowmvr6information.
CommandSyntax
showmvr6
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymrv6information:
Switch#showmvr6
MVR6Running:TRUE
MVR6MulticastVLAN:2
MVR6Source-address:fe80::1
MVR6MaxMulticastGroups:1024
MVR6HwRtLimit:224
MVR6CurrentMulticastGroups:31482RelatedCommands
None
9.5.7showmvr6interface
CommandPurpose
Usethiscommandtoshowmvr6interfaceinformation.
CommandSyntax
showmvr6interface
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymrv6interfaceinformation:
Switch#showmvr6interface
PortTypeVLANStatus
eth-0-2source10ACTIVE
eth-0-1receiver11ACTIVE
RelatedCommands
None14839.5.8showmvr6group
CommandPurpose
Usethiscommandtoshowmvr6grouplearnedfromreceiverport.
CommandSyntax
showmvr6groupvlanVLAN_ID(IPV6_ADDR|)
Parameter ParameterDescriptionParameterValue
VLAN_ID MVR6receiverVLAN 1-4094
IPV6_ADDR MulticastgroupaddressIPv6Address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymvr6grouplearnedfromreceiverport:
Switch#showmvr6groups
VLANInterfaceGroupAddress UptimeExpire-time
1eth-0-3ff0e:2111:1111:1111:1111:1111:1234:567800:00:1100:04:10
RelatedCommands
None14849.5.9showmvr6groupstatic
CommandPurpose
Usethiscommandtoshowmvr6globalstaticgroups.
CommandSyntax
showmvr6groupstaticglobal
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaymvr6globalstaticgroups:
Switch#showmvr6groupsstaticglobal
MVR6StaticGlobalGroup:
ff0e::1234
ff0e::1235
ff0e::1236
ff0e:2111:1111:1111:1111:1111:1234:5678
RelatedCommands
None
9.5.10showresourcemvr6
CommandPurpose
UsethiscommandtodisplaytheresourceusageofMVR6.1485CommandSyntax
showresourcemvr6
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtodisplaytheresourceusageofMVR6:
Switch#showresourcemvr6
MVR
Resource UsedCapability
=============================================================
MVREntry 4224
L2McastMember 11792
RelatedCommands
None148610TrafficManagementCommands
10.1QOSCommands
10.1.1table-map
CommandPurpose
Tocreateormodifyamutationmapandenterthemutationconfigurationmode,use
themutationcommand.Toremoveamutaitonmap,usethenoformofthiscommand.
CommandSyntax
table-mapNAME
notable-mapNAME
Parameter ParameterDescriptionParameterValue
NAME Nameassignedtothe
mutationmap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
GlobalConfiguration
Default
None1487Usage
Youcandefineamutationmapforeachclassofqostobeusedtosetcosorset
dscp.
Examples
Switch#configureterminal
Switch(config)#table-mapdscp-table
RelatedCommands
setcos
setdscp
showtable-map
10.1.2map
CommandPurpose
Tomapfromonevlauetoanotheroneinamuationmap.
CommandSyntax
mapfromFROM_VALUE[FROM_VALUE][FROM_VALUE][FROM_VALUE]
[FROM_VALUE][FROM_VALUE][FROM_VALUE][FROM_VALUE]to
TO_VALUE
nomapfromFROM_VALUE[FROM_VALUE][FROM_VALUE][FROM_VALUE]
[FROM_VALUE][FROM_VALUE][FROM_VALUE][FROM_VALUE]to
TO_VALUE
Parameter ParameterDescriptionParameterValue
FROM_VALUE Sourcevalue range0-63
TO_VALUE Destinationvalue range0-631488CommandMode
Default
None
Usage
Youcansetthemappingvalueinamuationtable.Set8vaulesatmostbyone
commandandcanbesetrepeatly.
Examples
Switch#configureterminal
Switch(config)#table-mapdscp-table
Switch(config-tmap)#mapfrom01234567to1
RelatedCommands
None
10.1.3default
CommandPurpose
Tosetthedefaultactionforunmappingvalueinamutaionmap.
CommandSyntax
default{VALUE|copy|ignore}
nodefault{VALUE|copy|ignore}
Parameter ParameterDescriptionParameterValue
VALUE Settablemapdefaultvaluerange0-63
copy Setthedefaultbehaviorfor
valuenotfoundinthetable
maptocopy-1489ignore Setthedefaultbehaviorfor
valuenotfoundinthetable
maptoignore-
CommandMode
Default
copy
Usage
Eachmutationtablehasonlyonedefaultaction.
Whenthedefaultactionisnotcopy,itwillbecomecopywhenyousetnocommand.
Whenthedefaultactioniscopy,itwillbecomeignorewhenyousetnocommand.
Examples
Switch#configureterminal
Switch(config)#table-mapdscp-table
Switch(config-tmap)#default1
Switch(config-tmap)#defaultcopy
Switch(config-tmap)#defaultignore
RelatedCommands
None
10.1.4class-maptypeqos
CommandPurpose
Tocreateormodifyaclassmapandentertheclass-mapconfigurationmode,usethe
class-mapcommand.Toremoveaclassmap,usethenoformofthiscommand.
CommandSyntax
class-maptypeqosNAME
noclass-mapNAME1490Parameter ParameterDescriptionParameterValue
NAME Nameassignedtothe
classmap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.Thename
class-defaultisreserved.
CommandMode
GlobalConfiguration
Default
None
Usage
YoucandefineaclassmapforeachclassoftraffictobeusedinQoSpolicies.Ifthe
packetmatchesanyofthecriteriaconfiguredforthisclassmapwiththematch
command,thenthisclassmapisappliedtothepacket.Ifnoexecutionstrategyis
specified(match-anyormatch-all),thenthedefaultvalueofmatch-anyisappliedto
thetrafficclass.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
RelatedCommands
classtypeqos
showclass-map149110.1.5matchaccess-group
CommandPurpose
Usethiscommandtoconfigureamatchcriterionbyreferencinganaccesslistina
class-map.Toremovetheaccess-listfromaclass-map,usethenoformofthis
command.
CommandSyntax
matchaccess-groupNAME
nomatchaccess-groupNAME
Parameter ParameterDescriptionParameterValue
NAME access-listname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
Class-mapConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#class-maptypeqoscmap_qos
Switch(config-cmap-qos)#matchaccess-groupexample1492RelatedCommands
None
10.1.6matchcos
CommandPurpose
Todefinetheclassoftrafficusingtheclassofservice(CoS)valueinclassmap,use
thematchcoscommand.ToremovethematchontheCoSvalue,usethenoformof
thiscommand.
CommandSyntax
matchcos[inner]COS
nomatchcos[inner]COS
Parameter ParameterDescriptionParameterValue
COS SpecifiedCoSvalue 0-7
CommandMode
Class-mapConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#class-maptypeqoscmap_qos
Switch(config-cmap-qos)#matchcos5
RelatedCommands
None149310.1.7matchdscp
CommandPurpose
Toidentifyspecificdifferentiatedservicescodepoint(DSCP)valuesasamatch
criterion,usethematchdscpcommand.ToremovespecifiedDSCPvaluesasa
matchcriterion,usethenoformofthiscommand.
CommandSyntax
matchdscpDSCP_STR
nomatchdscpDSCP_STR
Parameter ParameterDescriptionParameterValue
DSCP_STR SpecifiedDSCPvalue0-63
CommandMode
Class-mapConfiguration
Default
None
Usage
MatchcriteriacanbePHBstring
Examples
Switch#configureterminal
Switch(config)#class-maptypeqoscmap_qos
Switch(config-cmap-qos)#matchdscpaf11
RelatedCommands
None149410.1.8class-maptypetraffic-class
CommandPurpose
Tocreateormodifyaclassmapandentertheclass-mapconfigurationmode,usethe
class-mapcommand.Toremoveaclassmap,usethenoformofthiscommand.
CommandSyntax
class-maptypetraffic-classNAME
noclass-mapNAME
Parameter ParameterDescriptionParameterValue
NAME Nameassignedtothe
classmap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.Thename
class-defaultisreserved.
CommandMode
GlobalConfiguration
Default
None
Usage
Thistypeclass-mapisusedtoidentifytrafficflowswithdifferenttrafficclass.
Examples
Switch#configureterminal
Switch(config)#class-maptypetraffic-classcmap_tc1495RelatedCommands
classtypetraffic-class
showclass-map
10.1.9matchtraffic-class
CommandPurpose
ToconfigureaclassmaptouseaspecificQoStraffic-classvalueasamatchcriterion,
usethematchtraffic-classcommand.Toremovethespecifiedprotocolasmatch
criteria,usethenoformofthiscommand.
CommandSyntax
matchtraffic-classCLASS-ID
nomatchtraffic-classCLASS-ID
Parameter ParameterDescriptionParameterValue
CLASS-ID Specifiedtrafficclass
value.Thevalidvaluesarefrom
1to7.
CommandMode
Class-mapConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#class-maptypetraffic-classcmap_tc
Switch(config-cmap-tc)#matchtraffic-class61496RelatedCommands
class-map
10.1.10policy-maptypeqos
CommandPurpose
Usethiscommandtocreateapolicymap.Toremovethepolicy-map,usetheno
formofthiscommand.
CommandSyntax
policy-maptypeqosNAME
nopolicy-mapNAME
Parameter ParameterDescriptionParameterValue
NAME Nameassignedtothe
policymap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
GlobalConfiguration
Default
None
Usage
Thepolicy-mapcanbeattachedtomultiplephysicalportsatingressdirections.1497Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
RelatedCommands
service-policytypeqos
showpolicy-map
10.1.11classtypeqos
CommandPurpose
Toaddareferencetoanexistingclassmapinapolicymapandentertheclassmode,
usetheclasscommand.Toremoveaclassfromthepolicymap,usethenoformof
thiscommand
CommandSyntax
classtypeqosNAME
noclasstypeqosNAME
Parameter ParameterDescriptionParameterValue
NAME Referencetoaclassmap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
Policy-mapConfiguration
Default
None1498Usage
Policyactionsinthefirstclassthatmatchesthetraffictypeareperformed.
Bydefault,theclass-defaultclassiscreatedundereverypolicymapinthesystem.
Youcannotchangethismapping.
Youcannotremovetheclass-default.Ifyouattempttodeletetheclass-defaultclass,
theswitchreturnsanerrormessage.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap)#classtypeqoscmap1
RelatedCommands
policy-maptypeqos
class-maptypeqos
10.1.12classtypeqosclass-default
CommandPurpose
Toaddareferencetothesystemdefaultclassthatdoesnotmatchanytrafficclass,
usetheclassclass-defaultcommand.Toremovethesystemdefaultclassfromthe
policymap,usethenoformofthiscommand.
CommandSyntax
classtypeqosclass-default
noclasstypeqosclass-default
CommandMode
Policy-mapConfiguration
Default
None1499Usage
Trafficthatfailstomatchanyclassisassignedtoadefaultclassoftrafficcalled
class-default.Youcannotdeletethisclass
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqosclass-default
RelatedCommands
policy-maptypeqos
10.1.13setcos
CommandPurpose
UsethiscommandtoremarkpacketCoSvalue.
CommandSyntax
setcos{[inner]COS|costableNAME|dscptableNAME}
nosetcos[[inner]COS|costableNAME|dscptableNAME]
Parameter ParameterDescriptionParameterValue
COS CoSvalue range0-7
NAME Referencetoamutation
map-
CommandMode
Config-pmap-cConfiguration
Default
Disabled1500Usage
Therearefourwaystosetcos.Eachwaycanonlyberesetbyitsnocommandwhile
nosetcoscommandcanresetallways.
nosetcosCOScommanddonotcareCOSvalue.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#setcos3
RelatedCommands
None
10.1.14setdscp
CommandPurpose
UsethiscommandtomarkDSCPvalue.
CommandSyntax
setdscp{DSCP|PHB_STR|default|dscptableNAME|costableNAME}
nosetdscp[DSCP|PHB_STR|default|dscptableNAME|costableNAME]
Parameter ParameterDescriptionParameterValue
DSCP DSCPvalue range0-63
PHB_STR PHBname af11|af12|af13|af21|af22|af
23|af31|af32|af33|af41|af4
2|af43|ef|df|cs1|cs2|cs3|cs
4|cs5|cs6|cs7
default defaultvalue000000-1501NAME Referencetoamutation
mapThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
Config-pmap-cConfiguration
Default
Disabled
Usage
Therearethreewaystosetdscp.Eachwaycanonlyberesetbyitsnocommand
whilenosetdscpcommandcanresetallways.
nosetdscpDSCPcommanddonotcareDSCPvalue.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#setdscpcs3
RelatedCommands
None
10.1.15settraffic-class
CommandPurpose
UsethiscommandtosettrafficflowsclassID.1502CommandSyntax
settraffic-classCLASS-ID
nosettraffic-class
Parameter ParameterDescriptionParameterValue
CLASS-ID trafficclassID rangeis0-7
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
TrafficflowwithdifferenttrafficclassIDwouldbegivenvarietiesoftreatmentsin
ingressandegress.Thiscommandhashigherprioritywithpolicersettraffic-class
command.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#settraffic-class3
RelatedCommands
None
10.1.16setcolor
CommandPurpose
Usethiscommandtosettrafficflowscolor.1503CommandSyntax
setcolor{red|yellow}
nosetcolor
Parameter ParameterDescriptionParameterValue
red redcolor -
yellow yellowcolor -
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#setcolorred
RelatedCommands
None
10.1.17policer
CommandPurpose
Usethiscommandtorate-limittrafficmatchingthistrafficclassforaspecified
interface.Tocancelratelimit,usethenoformofthiscommand.1504CommandSyntax
policer{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebsEBS]
[conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed{transmit[set-
traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-classCLASS-ID]|
drop}][statistics]
policerpps{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebsEBS]
[conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed{transmit[set-
traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-classCLASS-ID]|
drop}][statistics]
nopolicer
Parameter ParameterDescriptionParameterValue
color-blind Donotcareinputpackets
color-
color-aware Careinputpacketscolor-
pps PPSmode,defaultisBPS
mode-
CIR CIR-CommitInformation
Rate.OnBPSmode,therange
is0-100,000,000kbps;On
PPSmode,therangeis0-
148,809,523kbps.
CBS CBS-CommitBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;OnPPS
mode,therangeis0-7,600
packets,defaultvalueis
4400.
EIR EIR-ExcessInformation
Rate.Wheneirisnotset,
useRFC2697.Wheneiris
set,useRFC4115.OnBPSmode,therange
is0-100,000,000kbps;On
PPSmode,therangeis0-
148,809,523kbps.1505EBS EBS-ExcessBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;OnPPS
mode,therangeis0-7,600
packets,defaultvalueis
4400.
conform Theactionwhenthetraffic
notexceedCbucket.The
defaultactionistransmit-
exceed Onsinglebucketmode,is
theactionwhenthetraffic
exceedCbucket.The
defaultactionisdrop.On
doublebucketmode,isthe
actionwhenthetraffic
exceedCbucketandnot
exceedEbucket,the
defaultactionistransmit-
violate Onsinglebucektmode,
notsupportthisaction.On
doublebucketmode,isthe
actionwhenthetraffic
exceedEbucket,the
defaultactionisdrop.-
transmit transmitthepacket -
drop dropthepacket -
set-traffic-classCLASS-IDsettraffic-classforthe
packetrange0-7
statistics enablepolicerstatistics-
CommandMode
Config-pmap-cConfiguration1506Default
None
Usage
Policerandaggraget-policercannotbesettogetherinthesamepolicymap.This
commandhaslowerprioritywithsettraffic-classcommand.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#policercolor-blindcir50000cbs40000ebs30000conform-actiontransmitexceed-
actiondropstatistics
RelatedCommands
showpolicy-maptypeqosstatisticsinterfacepolicer
showpolicy-maptypeqosstatisticspolicer
10.1.18qosaggregate-policer
CommandPurpose
Usethiscommandtocreateanaggregatepolicerinstance.Theaggregatepolicer
canbesharedbymultipleclassesoftraffic.Toremovetheaggregatepolicerinstance,
usethenoformofthiscommand.
CommandSyntax
qosaggregate-policerNAME{color-blind|color-aware}cirCIR[cbsCBS][eir
EBS][ebsEBS][conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed
{transmit[set-traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-class
CLASS-ID]|drop}][statistics]
qosaggregate-policerNAMEpps{color-blind|color-aware}cirCIR[cbsCBS][eir
EBS][ebsEBS][conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed
{transmit[set-traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-class
CLASS-ID]|drop}][statistics]1507noqosaggregate-policerNAME
Parameter ParameterDescriptionParameterValue
NAME Specifyanaggregate-
policernameThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
color-blind Donotcareinputpackets
color-
color-aware Careinputpacketscolor-
pps PPSmode,defaultisBPS
mode-
CIR CIR-CommitInformation
Rate.OnBPSmode,therange
is0-100,000,000kbps;
OnPPSmode,therange
is0-148,809,523kbps.
CBS CBS-CommitBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;
OnPPSmode,therange
is0-7,600packets,default
valueis4400.
EIR EIR-ExcessInformation
Rate.
Wheneirisnotset,use
RFC2697.
Wheneirisset,useRFC
4115.OnBPSmode,therange
is0-100,000,000kbps;
OnPPSmode,therange
is0-148,809,523kbps.1508EBS EBS-ExcessBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;
OnPPSmode,therange
is0-7,600packets,default
valueis4400.
conform Theactionwhenthetraffic
notexceedCbucket.The
defaultactionistransmit-
exceed Onsinglebucketmode,is
theactionwhenthetraffic
exceedCbucket.The
defaultactionisdrop.
Ondoublebucketmode,is
theactionwhenthetraffic
exceedCbucketandnot
exceedEbucket,the
defaultactionistransmit-
violate Onsinglebucektmode,
notsupportthisaction.
Ondoublebucketmode,is
theactionwhenthetraffic
exceedEbucket,the
defaultactionisdrop.-
transmit transmitthepacket -
drop dropthepacket -
set-traffic-classCLASS-IDsettraffic-classforthe
packetrange0-7
statistics enablepolicerstatistics-
CommandMode
GlobalConfiguration1509Default
None
Usage
Alltheflowwhouseaggreagtepolicerwillsharethesamebandwitdh,itisdifferent
withpolicer.
Examples
Switch#configureterminal
Switch(config)#qosaggregate-policerexamplecolor-awarecir1000cbs2000eir3000ebs4000exceeddrop
statistics
RelatedCommands
aggregate-policer
showqosaggregate-policer
10.1.19aggregate-policer
CommandPurpose
Usethiscommandtorate-limittheaggregatetrafficmatchingthistrafficclassforall
interfacesinthesameslot.Tocancelratelimit,usethenoformofthiscommand.
CommandSyntax
aggregate-policerNAME
noaggregate-policer
Parameter ParameterDescriptionParameterValue1510NAME Aggregatepolicername.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
Config-pmap-cConfiguration
Default
Disabled
Usage
Policerandaggraget-policercannotbesettogetherinthesamepolicymap.This
commandhaslowerprioritywithsettraffic-classcommand.
Examples
Switch#configureterminal
Switch(config)#policy-maptypeqospmap_qos
Switch(config-pmap-qos)#classtypeqoscmap_qos
Switch(config-pmap-qos-c)#aggregate-policertransmit1
RelatedCommands
qosaggregate-policer
showqosaggregatepolicer
10.1.20policy-maptypetraffic-class
CommandPurpose
Usethiscommandtocreateapolicymap.Toremovethepolicy-map,usetheno
formofthiscommand.1511CommandSyntax
policy-maptraffic-classNAME
Parameter ParameterDescriptionParameterValue
NAME Specifyapolicy-mapnameThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
GlobalConfiguration
Default
Disabled
Usage
Thiscommandisusedtocreatepolicymaptoidentifytrafficflowswithdifferenttraffic
class.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
RelatedCommands
service-policytraffic-class151210.1.21classtypetraffic-class
CommandPurpose
Toaddareferencetoanexistingclassmapinapolicymapandentertheclassmode,
usetheclasscommand.Toremoveaclassfromthepolicymap,usethenoformof
thiscommand.
CommandSyntax
classtypetraffic-classNAME
noclasstypetraffic-classNAME
Parameter ParameterDescriptionParameterValue
NAME Referencetoaclassmap.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
Policy-mapConfiguration
Default
None
Usage
Usingthiscommand,trafficclassifiedbytraffic-classcanbespecifiedvarietiesof
properties,suchaspriority,bandwidth,etc.1513Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
RelatedCommands
policy-maptypetraffic-class
class-maptypetraffic-class
10.1.22classtypetraffic-classclass-default
CommandPurpose
Toaddareferencetoanexistingclassmapinapolicymapandentertheclassmode,
usetheclasscommand.Toremoveaclassfromthepolicymap,usethenoformof
thiscommand.
CommandSyntax
classtypetraffic-classclass-default
noclasstypetraffic-classclass-default
CommandMode
Policy-mapConfiguration
Default
None
Usage
Usingthiscommand,trafficclassifiedbytraffic-classcanbespecifiedvarietiesof
properties,suchaspriority,bandwidth,etc.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc1514RelatedCommands
policy-maptypetraffic-class
10.1.23prioritylevel
CommandPurpose
Toassignastrictpriorityleveltoatrafficclassinapolicymap,usetheprioritylevel
command.Toremovethemapping,usethenoformofthiscommand,
CommandSyntax
prioritylevelLEVEL
noprioritylevel
Parameter ParameterDescriptionParameterValue
LEVEL Specifiesthestrict-priority
level.range0-7
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
Whenthelevelisthesame,queueswillbescheduledonWDRRmode,otherwisewill
bescheduledonSPmode.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
Switch(config-pmap-tc-c)#prioritylevel51515RelatedCommands
showqosinterfaceegress
10.1.24bandwidthpercentage
CommandPurpose
Usethiscommandtoallocateapercentageoftheinterfacebandwidthtoaqueue.To
removeconfiguration,usethenoformofthiscommand.
CommandSyntax
bandwidthpercentagePERCENTAGE
nobandwidthpercentage
Parameter ParameterDescriptionParameterValue
PERCENTAGE Specifiesthepercentage
ofbandwidthofthe
underlyinglinkrate.Therangeis1-100.
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
Totalpercentageofallqueuesis100.Unusedbandwidthisallocatedtodefaultclass.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
Switch(config-pmap-tc-c)#bandwidthpercentage201516RelatedCommands
showqosinterfaceegress
10.1.25queue-limit
CommandPurpose
Usethiscommandtospecifyqueuebuffer.
CommandSyntax
queue-limitSIZE[ecn-thresholdTHRESHOLD]
noqueue-limit
Parameter ParameterDescriptionParameterValue
SIZE Queuebuffercellnumber,
288bytespercellrange32-8192or
maximumvalue.
THRESHOLD ECNthreshold,288bytes
percell,range32-8191.
ECNthresholddefault
valueisqueuesizeifno
set.range32-8191or
maximumvalue.
CommandMode
Config-pmap-cConfiguration
Default
64buffercellsforcontroltraffic;
256buffercellsfornon-droptraffic.
Usage
Queue-limitqueue-limitdynamicandrandom-detectareconflict.1517Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
Switch(config-pmap-tc-c)#queue-limit200
RelatedCommands
showqosinterfaceegress
10.1.26queue-limitdynamic
CommandPurpose
Usethiscommandtospecifydynamicbufferforqueue.
CommandSyntax
queue-limitdynamicLEVEL
Parameter ParameterDescriptionParameterValue
LEVEL Queuelevel range0-10
CommandMode
Config-pmap-cConfiguration
Default
10
Usage
Queuebuffercanbecaculatedbythefollowingexpression
threshold=(f/(1+f))*remainCnt(f=1/128~8)
fmapping
levelfactorpercentofremainbuffer
01/128~0.8%151811/64~1.5%
21/32~3%
31/16~6%
41/8~11%
51/420%
61/2~33%
7150%
82~66%
94~80%
108~89%
Queue-limitqueue-limitdynamicandrandom-detectareconflict.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
Switch(config-pmap-tc-c)#queue-limitdynamic2
RelatedCommands
showqosinterfaceegress
10.1.27random-detect
CommandPurpose
Usethiscommandtoconfigurerandomdetectparameters.
CommandSyntax
random-detectmaximum-thresholdMAX[minimum-thresholdMIN][ecn]
norandom-detect
Parameter ParameterDescriptionParameterValue1519MAX maximumvalueinbuffer
cell,288bytespercellrange32-8192.
MIN minimumvalueinbuffer
cell,288bytespercell.
MINdefaultvalueisMAX/
8ifnoset.range32-8192.
ecn enableecn -
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
Queue-limitqueue-limitdynamicandrandom-detectareconflict.
Therealmaximumqueuebufferdependsontheminimumofbufferthresholdand
buffercellresource.
Examples
Switch#configureterminal
Switch(config)#policy-maptypetraffic-classpmap_tc
Switch(config-pmap-tc)#classtypetraffic-classcmap_tc
Switch(config-pmap-tc-c)#random-detectmaximum-threshold200ecn
RelatedCommands
showqosinterfaceegress152010.1.28service-policytypeqos
CommandPurpose
Usethiscommandtoapplyapolicy-maptomemberinterfacesoftheportgroupto
affectthetrafficclassificationrules.Toremovethepolicy-mapfromtheportgroup,
usethenoformofthiscommand.
CommandSyntax
service-policytypeqosinputNAME
noservice-policytypeqosinput
Parameter ParameterDescriptionParameterValue
NAME Policy-mapname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
InterfaceConfiguration
Port-groupConfiguration
Default
None
Usage
None1521Examples
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#service-policytypeqosinputpmap_qos
RelatedCommands
policy-maptypeqos
10.1.29service-policytypetraffic-class
CommandPurpose
Usethiscommandtoapplyapolicy-maptoaninterfacetoaffectthetrafficqueuing
rules.Toremovethepolicy-mapfromtheinterface,usethenoformofthiscommand.
CommandSyntax
service-policytypetraffic-classNAME
noservice-policytypetraffic-class
Parameter ParameterDescriptionParameterValue
NAME Policy-mapname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
InterfaceConfiguration
Configure-qos-global-view
Default
None1522Usage
Thiscommandisusedtoapplyqueuingandpriority-flow-controlparameterson
interface.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#service-policytypetraffic-classpmap_tc
RelatedCommands
policy-maptypeqos
class-maptypetraffic-class
10.1.30qospolicer
CommandPurpose
Usethiscommandtoconfigureaport-policerforaninterfacematchingalltraffic
transmittedorreceivedindifferentdirection.Tocanceltheratelimit,usethenoform
ofthiscommand.
CommandSyntax
qospolicerinput{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebs
EBS][conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed{transmit
[set-traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-classCLASS-ID]
|drop}][statistics]
qospolicerinputpps{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebs
EBS][conform{transmit[set-traffic-classCLASS-ID]|drop}|exceed{transmit
[set-traffic-classCLASS-ID]|drop}|violate{transmit[set-traffic-classCLASS-ID]
|drop}][statistics]
qospoliceroutput{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebs
EBS][conform{transmit|drop}|exceed{transmit|drop}|violate{transmit|
drop}][statistics]1523qospoliceroutputpps{color-blind|color-aware}cirCIR[cbsCBS][eirEBS][ebs
EBS][conform{transmit|drop}|exceed{transmit|drop}|violate{transmit|
drop}][statistics]
noqospolicer{input|output}
Parameter ParameterDescriptionParameterValue
color-blind Donotcareinputpackets
color-
color-aware Careinputpacketscolor-
pps PPSmode,defaultisBPS
mode-
CIR CIR-CommitInformation
Rate.OnBPSmode,therange
is0-100,000,000kbps;
OnPPSmode,therange
is0-148,809,523kbps.
CBS CBS-CommitBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;
OnPPSmode,therange
is0-7,600packets,default
valueis4400.
EIR EIR-ExcessInformation
Rate.
Wheneirisnotset,use
RFC2697.
Wheneirisset,useRFC
4115.OnBPSmode,therange
is0-100,000,000kbps;
OnPPSmode,therange
is0-148,809,523kbps.
EBS EBS-ExcessBurstSize.OnBPSmode,therange
is0-640,000bytes,default
valueis640000;
OnPPSmode,therange
is0-7,600packets,default
valueis4400.1524conform Theactionwhenthetraffic
notexceedCbucket.The
defaultactionistransmit-
exceed Onsinglebucketmode,is
theactionwhenthetraffic
exceedCbucket.The
defaultactionisdrop.
Ondoublebucketmode,is
theactionwhenthetraffic
exceedCbucketandnot
exceedEbucket,the
defaultactionistransmit-
violate Onsinglebucektmode,
notsupportthisaction.
Ondoublebucketmode,is
theactionwhenthetraffic
exceedEbucket,the
defaultactionisdrop.-
transmit transmitthepacket -
drop dropthepacket -
set-traffic-classCLASS-IDsettraffic-classforthe
packetrange0-7
statistics enablepolicerstatistics-
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedtoconfigurepolicingonportlevel.1525Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#qospolicerinputcolor-blindcir50000cbs40000ebs30000exceeddropstatistics
RelatedCommands
showqosinterfacestatisticspolicer
10.1.31qosshaperate
CommandPurpose
Usethiscommandtoconfigureshapingforaphysicalportinabsolutevaluemode.
Toremoveportshaping,usethenoformofthiscommand.
CommandSyntax
qosshaperatepirPIR(ecn-percentagePERCENTAGE|)
noqosshaperate
Parameter ParameterDescriptionParameterValue
RATE Shapingrate range0-100,000,0000.
PERCENTAGE ECNpercentagevalue50%-100%
CommandMode
InterfaceConfiguration
Default
None
Usage
Inportshapingconfiguration,thelargerthePIRvalueis,thebettertheECNmarking
effectis.1526Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#qosshaperate1000
RelatedCommands
None
10.1.32showtable-map
CommandPurpose
Usethiscommandtoshowmutationtableinformation.
CommandSyntax
showtable-mapNAME
Parameter ParameterDescriptionParameterValue
NAME Mutationmapsname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
None1527Examples
Switch#showtable-mapdscp-table
table-mapdscp-table
mapfrom4to3
defaultcopy
RelatedCommands
table-map
10.1.33showclass-map
CommandPurpose
Usethiscommandtoshowclassmapinformation.
CommandSyntax
showclass-map[NAME]
Parameter ParameterDescriptionParameterValue
NAME Classmapsname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None1528Usage
None
Examples
Switch#showclass-mapcos1
CLASS-MAP-NAME:cos1(qos)
matchcos1
RelatedCommands
class-maptypeqos
10.1.34showpolicy-map
CommandPurpose
Usethiscommandtoshowpolicymapinformation.
CommandSyntax
showpolicy-map[NAME]
Parameter ParameterDescriptionParameterValue
NAME Policymapsname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None1529Usage
None
Examples
Switch#showpolicy-mapq1
POLICY-MAP-NAME:q1(qos)
State:attached
CLASS-MAP-NAME:cos0
matchcos0
settraffic-class:7
statistics:enable
policercolor-awarecir10000000cbs640000ebs640000statistics
RelatedCommands
policy-maptypeqos
10.1.35showqosaggregate-policer
CommandPurpose
Usethiscommandtoshowaggregator-policerinformation.
CommandSyntax
showqosaggregator-policerNAME
Parameter ParameterDescriptionParameterValue
NAME aggregatepolicernameThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC1530Default
None
Usage
None
Examples
Switch#showqosaggregate-policerexample
Aggreatepolicer:test
colorblind
CIR1000kbps,CBS640000bytes,EBS640000bytes
dropviolatepackets
RelatedCommands
aggregate-policer
10.1.36showqosinterfaceingress
CommandPurpose
Usethiscommandtoshowinterfaceingressinformation.
CommandSyntax
showqosinterfaceNAMEingress{cos-policy|inner-cos-policy|dscp-policy|acl-
policy}
Parameter ParameterDescriptionParameterValue
NAME interfacename Support
physical/aggregation/vlan
ports
cos-policy showcosmapping
information-
inner-cos-policy showinnercosmapping
information-1531dscp-policy showdscpmapping
information-
acl-policy showaclmapping
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showqosinterfaceeth-0-1ingresscos-policy
CoS TCColorMark-TypeMark-Value
0 0green--
1 1green--
2 2green--
3 3green--
4 4green--
5 5green--
6 6green--
7 7green--
RelatedCommands
service-policytypeqos
service-policytypetraffic-class
10.1.37showqosinterfaceegress
CommandPurpose
Usethiscommandtoshowinterfaceegressinformation.1532CommandSyntax
showqosinterfaceIFNAMEegress
Parameter ParameterDescriptionParameterValue
IFNAME interfacename Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showqosinterfaceeth-0-1egress
TCPriorityBandwidthShaping(kbps)Drop-ModeQueue-Limit(Max/Min)ECN
00Remaining-dynamiclevel0-
11--dynamiclevel0-
22--dynamiclevel0-
33--dynamiclevel0-
44--dynamiclevel0-
55--dynamiclevel0-
66--dynamiclevel0-
77--tail-drop64 -
RelatedCommands
service-policytypeqos153310.1.38showqosaggregate-policerstatistics
CommandPurpose
Usethiscommandtoshowaggregator-policersstatisticsinformation.
CommandSyntax
showqosaggregator-policerNAMEstatistics
Parameter ParameterDescriptionParameterValue
NAME aggregatepolicernameThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showqosaggregate-policerexamplestatistics
Aggreatepolicer:example
rfc2697bpscolor-aware
CIR1000000kbps,CBS640000bytes,EBS640000bytes
Conformpacketstransmit
Exceedpacketstransmit
Violatepacketsdrop
Statistics:1534TypePacketsBytes Action
Conform0 0 Transmit
Exceed0 0 Transmit
Violate0 0 Drop
Total0 0 -
RelatedCommands
service-policytypetraffic-class
10.1.39showpolicy-maptypeqosstatisticsinterfaceace
CommandPurpose
Usethiscommandtoshowtheacestatisticsofpolicy-maponinterface.
CommandSyntax
showpolicy-maptypeqosstatisticsinterfaceNAMEinputace(ace-based|class-
based|)(classCMAP-NAME|)
Parameter ParameterDescriptionParameterValue
NAME interfacename -
input Thestatisticsofinput
directionwillbeshown-
ace-based Thestatisticsofmatching
acewillbeshown-
class-based statisticsofclass-mapwill
beshown-
CMAP-NAME statisticsofthespecified
class-mapcanbeshown-
CommandMode
PrivilegedEXEC
Default
None1535Usage
Usingthiscommand,theflowpolicerstatscanbeshownwhenclass-basedis
specifiedandflowpolicerstatsisenabled.
Thestatisticsoface-basedandclass-basedhaveresultsonlywhenthestatisticsis
enabled.
Examples
Switch#showpolicy-maptypeqosstatisticsinterfaceeth-0-1inputaceclass-based
Interface:eth-0-1
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any(match0bytes0)
Classname:cos1,operator:match-any(match0bytes0)
Switch#showpolicy-maptypeqosstatisticsinterfaceeth-0-1inputaceace-based
Interface:eth-0-1
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
matchcos0(0match0bytes)
total0match0bytes
Classname:cos1,operator:match-any
matchcos1(0match0bytes)
total0match0bytes
RelatedCommands
None
10.1.40showpolicy-maptypeqosstatisticsvlanace
CommandPurpose
Usethiscommandtoshowtheacestatisticsofpolicy-maponvlan.
CommandSyntax
showpolicy-maptypeqosstatisticsvlanVLAN_IDinputace(ace-based|class-
based|)(classCMAP-NAME|)1536Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-4094
input Thestatisticsofinput
directionwillbeshown-
ace-based Thestatisticsofmatching
acewillbeshown-
class-based statisticsofclass-mapwill
beshown-
CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Usingthiscommand,theflowpolicerstatscanbeshownwhenclass-basedis
specifiedandflowpolicerstatsisenabled.
Thestatisticsoface-basedandclass-basedhaveresultsonlywhenthestatisticsis
enabled.
Examples
Switch#showpolicy-maptypeqosstatisticsvlan2inputaceclass-based
Vlan21537Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any(match0bytes0)
Classname:cos1,operator:match-any(match0bytes0)
Switch#showpolicy-maptypeqosstatisticsvlan2inputaceace-based
Vlan2
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
matchcos0(0match0bytes)
total0match0bytes
Classname:cos1,operator:match-any
matchcos1(0match0bytes)
total0match0bytes
RelatedCommands
service-policytypeqos
service-policytypetraffic-class
10.1.41showpolicy-maptypeqosstatisticsport-groupace
CommandPurpose
Usethiscommandtoshowtheacestatisticsofpolicy-maponport-group.
CommandSyntax
showpolicy-maptypeqosstatisticsport-groupPG_NAMEinputace(ace-based|
class-based|)(classCMAP-NAME|)
Parameter ParameterDescriptionParameterValue
PG_NAME port-groupname Upto32characters
input Thestatisticsofinput
directionwillbeshown-
ace-based Thestatisticsofmatching
acewillbeshown-
class-based statisticsofclass-mapwill
beshown-1538CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Usingthiscommand,theflowpolicerstatscanbeshownwhenclass-basedis
specifiedandflowpolicerstatsisenabled.
Thestatisticsoface-basedandclass-basedhaveresultsonlywhenthestatisticsis
enabled.
Examples
Switch#showpolicy-maptypeqosstatisticsport-grouppginputaceclass-based
Port-grouppg
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any(match0bytes0)
Classname:cos1,operator:match-any(match0bytes0)
Switch#showpolicy-maptypeqosstatisticsvlan2inputaceace-based
Vlan2
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
matchcos0(0match0bytes)
total0match0bytes
Classname:cos1,operator:match-any1539matchcos1(0match0bytes)
total0match0bytes
RelatedCommands
service-policytypeqos
service-policytypetraffic-class
10.1.42showpolicy-maptypeqosstatisticsvlan-groupace
CommandPurpose
Usethiscommandtoshowtheacestatisticsofpolicy-maponvlan-group.
CommandSyntax
showpolicy-maptypeqosstatisticsvlan-groupVG_NAMEinputace(ace-based|
class-based|)(classCMAP-NAME|)
Parameter ParameterDescriptionParameterValue
VG_NAME vlan-groupname Upto32characters
input Thestatisticsofinput
directionwillbeshown-
ace-based Thestatisticsofmatching
acewillbeshown-
class-based statisticsofclass-mapwill
beshown-
CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.1540CommandMode
PrivilegedEXEC
Default
None
Usage
Usingthiscommand,theflowpolicerstatscanbeshownwhenclass-basedis
specifiedandflowpolicerstatsisenabled.
Thestatisticsoface-basedandclass-basedhaveresultsonlywhenthestatisticsis
enabled.
Examples
Switch#showpolicy-maptypeqosstatisticsvlan-groupvginputaceclass-based
Vlan-groupvg
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any(match0bytes0)
Classname:cos1,operator:match-any(match0bytes0)
Switch#showpolicy-maptypeqosstatisticsvlan2inputaceace-based
Vlan2
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
matchcos0(0match0bytes)
total0match0bytes
Classname:cos1,operator:match-any
matchcos1(0match0bytes)
total0match0bytes
RelatedCommands
service-policytypeqos
service-policytypetraffic-class154110.1.43showpolicy-maptypeqosstatisticsinterfacepolicer
CommandPurpose
Usethiscommandtoshowthepolicerstatisticsofpolicy-maponinterface.
CommandSyntax
showpolicy-maptypeqosstatisticsinterfaceIFNAMEinputpolicer(classCMAP-
NAME|)
Parameter ParameterDescriptionParameterValue
IFNAME interfacename Support
physical/aggregation/vlan
ports
input Thestatisticsofinput
directionwillbeshown-
CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Thestatisticshaveresultsonlywhenthepolicerstatisticsisenabled.1542Examples
Switch#showpolicy-maptypeqosstatisticsinterfaceeth-0-1inputpolicer
Interface:eth-0-1
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
Classname:cos1,operator:match-any
Policer(moderfc2697,ratemodebps,CIR10000000kbps,CBS640000bytes,EBS640000bytes,colormode
color-aware,conformtransmit,exceedtransmit,violatedrop)
Conformpackets0,bytes0
Exceedpackets0,bytes0
Violatepackets0,bytes0
RelatedCommands
service-policytypeqos
service-policytypetraffic-class
10.1.44showpolicy-maptypeqosstatisticsvlanpolicer
CommandPurpose
Usethiscommandtoshowthepolicerstatisticsofpolicy-maponvlan.
CommandSyntax
showpolicy-maptypeqosstatisticsvlanVLAN_IDinputpolicer(classCMAP-NAME
|)
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-4094
input Thestatisticsofinput
directionwillbeshown-1543CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Thestatisticshaveresultsonlywhenthepolicerstatisticsisenabled.
Examples
Switch#showpolicy-maptypeqosstatisticsvlan2inputpolicer
Vlan2
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
Classname:cos1,operator:match-any
Policer(moderfc2697,ratemodebps,CIR10000000kbps,CBS640000bytes,EBS640000bytes,colormode
color-aware,conformtransmit,exceedtransmit,violatedrop)
Conformpackets0,bytes0
Exceedpackets0,bytes0
Violatepackets0,bytes0
RelatedCommands
service-policytypeqos
service-policytypetraffic-class154410.1.45showpolicy-maptypeqosstatisticsport-grouppolicer
CommandPurpose
Usethiscommandtoshowthepolicerstatisticsofpolicy-maponport-group.
CommandSyntax
showpolicy-maptypeqosstatisticsport-groupPG_NAMEinputpolicer(class
CMAP-NAME|)
Parameter ParameterDescriptionParameterValue
PG_NAME port-groupname Upto32characters
input Thestatisticsofinput
directionwillbeshown-
CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Thestatisticshaveresultsonlywhenthepolicerstatisticsisenabled.1545Examples
Switch#showpolicy-maptypeqosstatisticsport-grouppginputpolicer
Port-group:pg
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
Classname:cos1,operator:match-any
Policer(moderfc2697,ratemodebps,CIR10000000kbps,CBS640000bytes,EBS640000bytes,colormode
color-aware,conformtransmit,exceedtransmit,violatedrop)
Conformpackets0,bytes0
Exceedpackets0,bytes0
Violatepackets0,bytes0
RelatedCommands
service-policytypeqos
service-policytypetraffic-class
10.1.46showpolicy-maptypeqosstatisticsvlan-grouppolicer
CommandPurpose
Usethiscommandtoshowthepolicerstatisticsofpolicy-maponvlan-group.
CommandSyntax
showpolicy-maptypeqosstatisticsvlan-groupVG_NAMEinputpolicer(class
CMAP-NAME|)
Parameter ParameterDescriptionParameterValue
VG_NAME vlan-groupname Upto32characters
input Thestatisticsofinput
directionwillbeshown-1546CMAP-NAME statisticsofthespecified
class-mapcanbeshownThenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
Thestatisticshaveresultsonlywhenthepolicerstatisticsisenabled.
Examples
Switch#showpolicy-maptypeqosstatisticsvlan-groupvginputpolicer
Vlan-group:vg
Inputservicepolicytypeqos:q1
Classname:cos0,operator:match-any
Classname:cos1,operator:match-any
Policer(moderfc2697,ratemodebps,CIR10000000kbps,CBS640000bytes,EBS640000bytes,colormode
color-aware,conformtransmit,exceedtransmit,violatedrop)
Conformpackets0,bytes0
Exceedpackets0,bytes0
Violatepackets0,bytes0
RelatedCommands
service-policytypeqos
service-policytypetraffic-class154710.1.47showqosinterfacestatisticspolicer
CommandPurpose
Usethiscommandtodisplayportstatistics.
CommandSyntax
showqosinterfaceIFNAMEstatisticspolicer(input|output)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showqosinterfaceeth-0-1statisticspolicerinput
Interface:eth-0-1
Inputportpolicer:
rfc2697bpscolor-aware
CIR2000000kbps,CBS640000bytes,EBS640000bytes
Conformpacketstransmit
Exceedpacketstransmit
Violatepacketsdrop
Statistics:
TypePacketsBytes Action
Conform0 0 Transmit
Exceed0 0 Transmit
Violate0 0 Drop
Total0 0 -1548RelatedCommands
service-policytypeqos
10.1.48showqosinterfacestatisticsqueue
CommandPurpose
Usethiscommandtodisplaythestatisticsoftrafficclassperinterface.
CommandSyntax
showqosinterfaceIFNAMEstatisticsqueue
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showqosinterfaceeth-0-1statisticsqueue
QueueTransmit-packetsTransmit-BytesDrop-packetsDrop-Bytes
UC00 0 0 0
UC10 0 0 0
UC20 0 0 0
UC30 0 0 0
UC40 0 0 0
UC50 0 0 0
UC60 0 0 01549UC70 0 0 0
MC00 0 0 0
MC10 0 0 0
MC20 0 0 0
MC30 0 0 0
SPAN00 0 0 0
RelatedCommands
service-policytypetraffic-class
10.1.49clearqosaggregate-policerstatistics
CommandPurpose
Usethiscommandtoclearaggregatepolicingstatistics.
CommandSyntax
clearqosaggregate-policerNAMEstatistics
Parameter ParameterDescriptionParameterValue
NAME Aggregatepolicername.Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
PrivilegedEXEC
Default
None
Usage
None1550Examples
Switch#clearqosaggregate-policerexamplestatistics
RelatedCommands
showqosaggregate-policerstatistics
10.1.50clearpolicy-maptypeqosstatisticsinterfaceace
CommandPurpose
Usethiscommandtocleartheacestatisticsofpolicy-maponinterface.
CommandSyntax
clearpolicy-maptypeqosstatisticsinterfaceIFNAMEinputace
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsinterfaceeth-0-1inputace1551RelatedCommands
showpolicy-maptypeqosstatisticsinterfaceace
10.1.51clearpolicy-maptypeqosstatisticsvlanace
CommandPurpose
Usethiscommandtocleartheacestatisticsofpolicy-maponvlan.
CommandSyntax
clearpolicy-maptypeqosstatisticsvlanVLAN_IDinputace
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsvlan2inputace
RelatedCommands
showpolicy-maptypeqosstatisticsvlanace155210.1.52clearpolicy-maptypeqosstatisticsport-groupace
CommandPurpose
Usethiscommandtocleartheacestatisticsofpolicy-maponport-group.
CommandSyntax
clearpolicy-maptypeqosstatisticsport-groupPG_NAMEinputace
Parameter ParameterDescriptionParameterValue
PG_NAME port-groupname Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsport-grouppginputace
RelatedCommands
showpolicy-maptypeqosstatisticsport-groupace
10.1.53clearpolicy-maptypeqosstatisticsvlan-groupace
CommandPurpose
Usethiscommandtocleartheacestatisticsofpolicy-maponvlan-group.1553CommandSyntax
clearpolicy-maptypeqosstatisticsvlan-groupVG_NAMEinputace
Parameter ParameterDescriptionParameterValue
VG_NAME vlan-groupname Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsvlan-groupvginputace
RelatedCommands
showpolicy-maptypeqosstatisticsvlan-groupace
10.1.54clearpolicy-maptypeqosstatisticsace
CommandPurpose
Usethiscommandtoclearalltheacestatisticsofpolicy-map.
CommandSyntax
showpolicy-maptypeqosstatistics[input]ace
Parameter ParameterDescriptionParameterValue
input Thestatisticsofinput
directionwillbeclear-1554CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsinputace
RelatedCommands
showpolicy-maptypeqosstatisticsace
10.1.55clearpolicy-maptypeqosstatisticsinterfacepolicer
CommandPurpose
Usethiscommandtoclearthepolicerstatisticsofpolicy-maponinterface.
CommandSyntax
clearpolicy-maptypeqosstatisticsinterfaceIFNAMEinputpolicer
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC1555Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsinterfaceeth-0-1inputpolicer
RelatedCommands
showpolicy-maptypeqosstatisticsinterfacepolicer
10.1.56clearpolicy-maptypeqosstatisticsvlanpolicer
CommandPurpose
Usethiscommandtoclearthepolicerstatisticsofpolicy-maponvlan.
CommandSyntax
clearpolicy-maptypeqosstatisticsvlanVLAN_IDinputpolicer
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None1556Examples
Switch#clearpolicy-maptypeqosstatisticsvlan2inputpolicer
RelatedCommands
showpolicy-maptypeqosstatisticsvlanpolicer
10.1.57clearpolicy-maptypeqosstatisticsport-grouppolicer
CommandPurpose
Usethiscommandtoclearthepolicerstatisticsofpolicy-maponport-group.
CommandSyntax
clearpolicy-maptypeqosstatisticsport-groupPG_NAMEinputpolicer
Parameter ParameterDescriptionParameterValue
PG_NAME port-groupname Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsport-grouppginputpolicer
RelatedCommands
showpolicy-maptypeqosstatisticsport-grouppolicer155710.1.58clearpolicy-maptypeqosstatisticsvlan-grouppolicer
CommandPurpose
Usethiscommandtoclearthepolicerstatisticsofpolicy-maponvlan-group.
CommandSyntax
clearpolicy-maptypeqosstatisticsvlan-groupVG_NAMEinputpolicer
Parameter ParameterDescriptionParameterValue
VG_NAME vlan-groupname Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsvlan-groupvginputpolicer
RelatedCommands
showpolicy-maptypeqosstatisticsvlan-grouppolicer
10.1.59clearpolicy-maptypeqosstatisticspolicer
CommandPurpose
Usethiscommandtoclearallthepolicerstatisticsofpolicy-map.1558CommandSyntax
clearpolicy-maptypeqosstatistics[input]policer
Parameter ParameterDescriptionParameterValue
input Thestatisticsofinput
directionwillbeclear-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearpolicy-maptypeqosstatisticsinputpolicer
RelatedCommands
showpolicy-maptypeqosstatisticspolicer
10.1.60clearqosinterfacestatisticspolicer
CommandPurpose
Usethiscommandtoclearportpolicerstatistics.
CommandSyntax
clearqosinterfaceIFNAMEstatisticspolicer(input|output)
Parameter ParameterDescriptionParameterValue1559IFNAME Interfacename. Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearqosinterfaceeth-0-1statisticspolicerinput
RelatedCommands
clearqosinterfacestatisticspolicer
10.1.61clearqosvlanstatisticspolicer
CommandPurpose
Usethiscommandtoclearvlanpolicerstatistics.
CommandSyntax
clearqosvlanVLAN_IDstatisticspolicer(input|output)
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANID 1-4094
CommandMode
PrivilegedEXEC1560Default
None
Usage
None
Examples
Switch#clearqosvlan2statisticspolicerinput
RelatedCommands
showqosvlanstatisticspolicer
10.1.62clearqosinterfacestatisticsqueue
CommandPurpose
Usethiscommandtoclearthequeuestatisticsonspecifiedinterface.
CommandSyntax
clearqosinterfaceIFNAMEstatisticsqueue
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Support
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None1561Usage
None
Examples
Switch#clearqosinterfaceeth-0-1statisticsqueue
RelatedCommands
showqosinterfacestatisticsqueue
10.1.63flow-policernumber
CommandPurpose
Tosetthenumberofpolicersforqos,suchasnormalandextendmode.
CommandSyntax
Flow-policernumber(normal|extend)
Parameter ParameterDescriptionParameterValue
normal Normalmodesupports
576policers-
extend Extendmodesupports
3064policers-
CommandMode
GlobalConfiguration
Default
Normal
Usage
Whenresetthenumberofpolicers,itneedstosavetheconfigurationandrestartthe
switch.1562Examples
Switch#configureterminal
Switch(config)#flow-policernumberextend
%Configurationaboutflow-policernumberhasbeenstored,butcannottakeeffectuntilthenextreload.
%Whensettingtheextendnumberofpolicers,Itonlysupportsthe10Grateofpolicers,pleasechecktherateof
policers.
RelatedCommands
showpolicy-maptypeqosstatisticsinterfaceace
10.1.64ipgshapingenable
CommandPurpose
UsetheipgshapingenabletoletshapingcalculateIPGbytes.Usethenoformof
thiscommandtoreturntothedefaultsetting.
CommandSyntax
ipgshapingenable
noipgshapingenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
Thiscommandcanbeconfiguredonglobalconfiguremode.
Examples
ThisexampleshowshowtoconfigureshapingtocalculateIPGbytes:
Switch#configureterminal
Switch(config)#ipgshapingenable1563ThisexampleshowshowtodisableshapingtocalculateIPGbytes:
Switch#configureterminal
Switch(config)#noipgshapingenable
RelatedCommands
None
10.1.65ipgpolicerenable
CommandPurpose
UsestheipgpolicerenabletoletpolicercalculateIPGbytes.Usethenoformofthis
commandtoreturntothedefaultsetting.
CommandSyntax
ipgpolicerenable
noipgpolicerenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
Thiscommandcanbeconfiguredonglobalconfiguremodeanddonotworkonpps
mode.
Examples
ThisexampleshowshowtoconfigurepolicertocalculateIPGbytes:
Switch#configureterminal
Switch(config)#ipgpolicerenable
ThisexampleshowshowtodisablepolicertocalculateIPGbytes:1564Switch#configureterminal
Switch(config)#noipgpolicerenable
RelatedCommands
None
10.1.66smartbufferenable
CommandPurpose
Usethiscommandtoenablequeuedropsmartbufferglobally.Usethenoformofthis
commandtodisablequeuedropsmartbufferglobally.
CommandSyntax
smart-bufferenable
nosmart-bufferenable
CommandMode
GlobalConfiguration
Default
Enable
Usage
Thiscommandcanbeconfiguredonglobalconfiguremode.
Examples
Thisexampleshowshowtoenablethequeuedropsmartbuffer.:
Switch#configureterminal
Switch(config)#smart-bufferenable
Thisexampleshowshowtodisablethequeuedropsmartbuffer.:
Switch#configureterminal
Switch(config)#nosmart-bufferenable1565RelatedCommands
None
10.1.67service-policy
CommandPurpose
Usethiscommandtoapplyapolicy-maptomemberinterfaces(membervlan)ofthe
portgroup(vlangroup)toaffectthetrafficclassificationrules.Toremovethepolicy-
mapfromtheportgroup(vlangroup),usethenoformofthiscommand.
CommandSyntax
service-policy(input|output)NAME
noservice-policy(input|output)
Parameter ParameterDescriptionParameterValue
NAME thepolicy-mapname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
input applypolicy-maptothe
inboundofmember
interfaces(membervlan)-
output applypolicy-maptothe
outboundofmember
interfaces(membervlan)-
CommandMode
Port-groupConfiguration
Vlan-groupConfiguration1566Default
None
Usage
Usethiscommandtoapplyapolicymapdefinedbythepolicy-mapcommandtothe
inputoroutputofmemberinterfaces(membervlan)oftheportgroup(vlangroup).
Iftheinterface(vlan)hasalreadybeenappliedapolicy-mapitcannotbeaddedto
theportgroup(vlangroup).
Examples
Configureapolicytoingressofmemberinterfacesoftheportgroup:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#service-policyinputplc_map1
Removeapolicyfromingressofmemberinterfacesoftheportgroup:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#noservice-policyinput
RelatedCommands
policy-map
10.1.68access-group
CommandPurpose
Usethiscommandtoapplyapolicy-maptomemberinterfaces(membervlan)ofthe
portgroup(vlangroup)toaffectthetrafficclassificationrules.Toremovethepolicy-
mapfromtheportgroup(vlangroup),usethenoformofthiscommand.
CommandSyntax
access-group(input|output)NAME
noaccess-group(input|output)(NAME|)1567Parameter ParameterDescriptionParameterValue
NAME thepolicy-mapname Thenamecanbea
maximumof40
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
input applyaccess-grouptothe
inboundofmember
interfaces(membervlan)-
output applyaccess-grouptothe
outboundofmember
interfaces(membervlan)-
CommandMode
Port-groupConfiguration
Vlan-groupConfiguration
Default
None
Usage
Usethiscommandtoapplyaaccess-grouptotheinputoroutputofmember
interfaces(membervlan)oftheportgroup(vlangroup).
Iftheinterface(vlan)hasalreadybeenappliedaaccess-groupitcannotbeadded
totheportgroup(vlangroup).
Examples
Configureaaccess-grouptoingressofmemberinterfacesoftheportgroup:1568Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#access-groupinputaccess_group1
Removeaaccess-groupfromingressofmemberinterfacesoftheportgroup:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#noaccess-groupinput
RelatedCommands
None
10.1.69trust
CommandPurpose
Usethiscommandtoconfiguretheporttruststate.Toreturntothedefaultvalue,use
thenoformofthiscommand.
CommandSyntax
trust(dscp|cos(stag-cos|ctag-cos|)|port)
notrust
Parameter ParameterDescriptionParameterValue
dscp TrustDSCPindicatesall
incomingIPpacketswillbe
assignedwiththepriority
andcoloraccordingtothe
packetDSCPfield,andfor
otherpackets,thepriority
andcolorofthatpacket
willbemappedthesame
astrustCoS.-
cos SelectwhichCoSwillbe
specifiedforinterface.The
rangeofCoSisfrom0to
7.-1569ctag-cos Trustctag-cosindicatesall
incomingpacketswillbe
assignedwiththepriority
andcoloraccordingtothe
packetinnerCoSfieldif
thepacketisdouble-
tagged.Ifthatpacketis
carriedwithonlyone
VLANtagoritisuntagged,
thebehaviorshouldbethe
sameasthatoftrustport.-
stag-cos Truststagc-cosindicates
allincomingpacketswill
beassignedwiththe
priorityandcoloraccording
tothepacketouterCoS
fieldifthepacketis
double-tagged.Ifthat
packetiscarriedwithonly
oneVLANtagoritis
untagged,thebehavior
shouldbethesameasthat
oftrustCoS.-
port Trustportindicatesall
incomingpacketswillbe
assignedwiththepriority
andcoloraccordingtothe
portCoSvalue.-
CommandMode
InterfaceConfiguration
Default
TrusttheCoSvalueinpackets.1570Usage
Theporttruststateisthecriteriaforclassifyingincomingpacketsfromtheport.All
classifiedpacketswillbeindentifiedwithapriorityandcoloraccordingtothetrust
state.Thedefaultporttruststateistrustcos.
Examples
Thisexampleshowshowtoconfigurethetruststate:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#trustdscp
RelatedCommands
showqosinterface157111SecurityCommands
11.1PortSecurityCommands
11.1.1clearport-securityaddress-tablestatic
CommandPurpose
Usethiscommandtoclearstaticport-securitymacaddresstable.
CommandSyntax
clearport-securityaddress-tablestatic(interfaceIFNAME|vlanVLAN_ID|address
MAC_ADDR|)
Parameter ParameterDescriptionParameterValue
MAC_ADDR Clearport-securityentries
withspecifiedmacaddressMACaddressin
HHHH.HHHH.HHHH
format
IFNAME Clearport-securityentries
withspecifiedinterface
nameSupport
physical/aggregationports
VLAN_ID Clearport-securityentries
withspecifiedVLANid1-4094
CommandMode
PrivilegedEXEC
Default
None1572Usage
None
Examples
Thisexampleshowshowtoclearallstaticport-securitymacaddress-table:
Switch#clearport-securityaddress-tablestatic
Thisexampleshowshowtoclearstaticport-securitymacaddress-tableoneth-0-1:
Switch#clearport-securityaddress-tablestaticinterfaceeth-0-1
RelatedCommands
showmacaddress-table
11.1.2switchportport-security
CommandPurpose
Toenableportsecurityonaninterface,usetheswitchportport-securitycommand.To
disableportsecurity,usethenoswitchportport-securitycommand.
CommandSyntax
switchportport-security
noswitchportport-security
CommandMode
InterfaceConfiguration
Default
Disabled1573Usage
Whendisableport-security,alltheport-securitymacaddressentrieswhicharelearnt
dynamicallywillbecleared.Thestaticport-securitymacaddresswillbeineffective
butnotbecleared
Examples
Thisexampleshowshowtoenableportsecurityonaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportport-security
Thisexampleshowshowtodisableportsecurityonaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportport-security
RelatedCommands
showport-securityinterface
11.1.3switchportport-securitymac-address
CommandPurpose
Usethiscommandtoaddstaticport-securitymacaddress.
CommandSyntax
switchportport-securitymac-addressMAC_ADDRvlanVLAN_ID
noswitchportport-securitymac-addressMAC_ADDRvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
MAC_ADDR Staticport-securitymac
addressMACaddressin
HHHH.HHHH.HHHH
format
VLAN_ID Staticport-securityVLAN
id1-40941574CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigurestaticport-securitymacaddress:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportport-securitymac-address0.0.1vlan1
Thisexampleshowshowtodeletestaticport-securitymacaddress:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportport-securitymac-address0.0.1vlan1
RelatedCommands
showmacaddress-table
11.1.4switchportport-securitymaximum
CommandPurpose
UsethiscommandtosetthemaximumofsecureMACaddressesonaport.Usethe
noswitchportport-securitymaximumcommandtoreturntothedefaultsettings.
CommandSyntax
switchportport-securitymaximumMAXIMUM
noswitchportport-securitymaximum
Parameter ParameterDescriptionParameterValue1575MAXIMUM Maximumnumberof
secureMACaddressesfor
theinterface0-16384
CommandMode
InterfaceConfiguration
Default
1
Usage
Ifthenewmaximumissmallerthanthecurrentsecureaddressesontheinterface,
theconfigurationisrejected.
OncethesecureMACaddressnumberontheportreachedthemaximumnumber,
nomoreaddresscanbelearntonthatport.
Themaximumnumber0indicatesthatnodynamicsecureMACisallowed,only
staticsecureMACissupported.
Examples
ThisexamplesetsthemaximumnumberofsecureMACaddressesonaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportport-securitymaximum1024
ThisexamplerestoresthemaximumnumberofsecureMACaddressesonaportto
defaultvalue:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchportport-securitymaximum
RelatedCommands
switchportport-securityviolation
showport-securitymaximummac-numinterfaceIFNAME157611.1.5switchportport-securityviolation
CommandPurpose
Usethiscommandtosettheactiontobetakenwhenasecurityviolationisdetected.
Usethenoswitchportport-securityviolationcommandtoreturntothedefaultsettings.
CommandSyntax
switchportport-securityviolation(protect|restrict|errdisable)
noswitchportport-securityviolation
Parameter ParameterDescriptionParameterValue
protect Discardpacketsilently-
restrict Discardpacketandprint
log-
errdisable Discardpacket,logand
settheinterfaceerror-
disabled-
CommandMode
InterfaceConfiguration
Default
Discardpacketsilently
Usage
Tousethiscommand,enableswitchportport-securityfirst
Examples
Thisexamplesetsport-securityviolationtodiscardpacketssilently:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchport-securityviolationprotect1577RelatedCommands
switchportport-security
11.1.6showport-securityaddress-table
CommandPurpose
Usethiscommandtoshowport-securitymacaddress-table.
CommandSyntax
showport-securityaddress-table(static|dynamic|)(interfaceIFNAME|vlan
VLAN_ID|addressMAC_ADDR|)
Parameter ParameterDescriptionParameterValue
dynamic Showthedynamically
learntentries-
static Showthestatically
configuredentries-
MAC_ADDR Showtheentrieswith
specifiedmacaddressMACaddressin
HHHH.HHHH.HHHH
format
IFNAME Showtheentrieswith
specifiedinterfacenameSupportphysicalports
VLAN_ID Showtheentrieswith
specifiedVLANid1-4094
CommandMode
PrivilegedEXEC
Default
None1578Usage
None
Examples
Thisexampleshowsport-securitymacaddress-tableontheSwitch:
Switch#showport-securityaddress-table
SecureMacAddressTable
----------------------------------------------------------------------
VlanMacAddress Type Ports
-----------------------------------------------------------
10001.00ce.ef01 SecureConfiguredeth-0-11
41001a.a02c.a1dc SecureConfiguredeth-0-41
RelatedCommands
None
11.1.7showport-securitycurrentmac-numinterface
CommandPurpose
Usethiscommandtoshowcurrentport-securityMACnumberoninterface.
CommandSyntax
showport-securitycurrentmac-numinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Showtheentrieswith
specifiedinterfacenameSupportphysicalports
CommandMode
PrivilegedEXEC
Default
None1579Usage
None
Examples
Thisexampleshowscurrentport-securitymac-numoninterfaceeth-0-1:
Switch#showport-securitycurrentmac-numinterfaceeth-0-1
CurrentdynamicMACaddresses:0
CurrentstaticMACaddresses:0
CurrenttotalMACaddresses:0
RelatedCommands
switchportport-securitymaximum
showport-securitymaximummac-numinterfaceinterface
11.1.8showport-securityinterface
CommandPurpose
Usethiscommandtoshowtheport-securityinformationonaninterface.
CommandSyntax
showport-securityinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Showtheentrieswith
specifiedinterfacenameSupportphysicalports
CommandMode
PrivilegedEXEC
Default
None1580Usage
None
Examples
Thisexampleshowstheport-securityinformationoninterfaceeth-0-1:
Switch#showport-securityinterfaceeth-0-1
PortSecurity :disabled
Violationmode:discardpacketsilence
MaximumMACAddresses:1
TotalMACAddresses:1
StaticconfiguredMACAddresses1
RelatedCommands
None
11.1.9showport-securitymaximummac-numinterface
CommandPurpose
Usethiscommandtoshowtheport-securitymaximumMACnumberonaninterface.
CommandSyntax
showport-securitymaximummac-numinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Showtheentrieswith
specifiedinterfacenameSupportphysicalports
CommandMode
PrivilegedEXEC
Default
None1581Usage
None
Examples
Thisexampleshowstheport-securitymaximummac-numoninterfaceeth-0-1:
Switch#showport-securitymaximummac-numinterfaceeth-0-1
MaximumdynamicMACaddresses:1
RelatedCommands
switchportport-securitymaximum
showport-securitycurrentmac-numinterface
11.2VlanSecurityCommands
11.2.1vlanmac-limitmaximum
CommandPurpose
Usethiscommandtosetmaximumofmacaddressesinspecifiedvlan.Usetheno
vlanmac-limitmaximumcommandtorestorethedefaultsetting.
CommandSyntax
vlanVLAN_IDmac-limitmaximumMAXINUM
novlanVLAN_IDmac-limitmaximum
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANid 1-4094
MAXINUM maximumofmac
addresses1-65535
CommandMode
VLANConfiguration1582Default
Nomac-limitonallvlans
Usage
Thevlanmustbecreatedbeforethiscommand
Examples
Thisexampleshowshowtoset/unsetmaximumofmacaddressesforspecifiedvlan:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#vlan2mac-limitmaximum1000
Switch(config-vlan)#novlan2mac-limitmaximum
RelatedCommands
showvlan-security
11.2.2vlanmac-limitaction
CommandPurpose
Usethiscommandtosetactionforspecifiedvlan.
Usethenovlanmac-limitactioncommandtorestorethedefaultsetting.
CommandSyntax
vlanVLAN_IDmac-limitaction(discard|warn|forward)
novlanVLAN_IDmac-limitaction
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANid 1-40941583discard Ifthecountofmac
addressesreachesthe
maximum,packetswith
unknownsourcemac
addressfromthisVLAN
willbediscarded-
warn Ifthecountofmac
addressesreachesthe
maximum,packetswith
unknownsourcemac
addressfromthisVLAN
willbediscarded,and
warninglogwillbeprinted
insyslog-
forward Ifthecountofmac
addressesreachesthe
maximum,allpacketsfrom
thisVLANwillbe
forwardedwithoutneither
maclearningnorwarning
log-
CommandMode
VLANConfiguration
Default
Forward
Usage
Thevlanmustbecreatedbeforethiscommand.
Examples
Thisexampleshowshowtoset/unsetactionforspecifiedvlan:1584Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#vlan2mac-limitactionwarn
Switch(config-vlan)#novlan2mac-limitaction
RelatedCommands
showvlan-security
11.2.3vlanmaclearning
CommandPurpose
Usethiscommandtoenable/disablemaclearningforspecifiedvlan.
CommandSyntax
vlanVLAN_IDmaclearning(enable|disable)
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANid 1-4094
enable Enablelearning -
disable Disablelearning -
CommandMode
VLANConfiguration
Default
Enable
Usage
Thevlanmustbecreatedbeforeusingthiscommand.
Examples
Thisexampleshowshowtoenablemaclearningforspecifiedvlan:1585Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#vlan2maclearningenable
RelatedCommands
showvlan-security
11.2.4showvlan-security
CommandPurpose
Usethiscommandtoshowconfigurationaboutvlansecurity.
CommandSyntax
showvlan-security(vlanVLAN_ID)
Parameter ParameterDescriptionParameterValue
VLAN_ID VLANid 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowconfigurationaboutvlansecurity:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#vlan2mac-limitmaximum1000
Switch(config-vlan)#vlan2mac-limitactionwarn1586Switch#showvlan-security
Vlanlearning-enmax-mac-countcur-mac-countaction
-----------------------------------------------------------------------------------
2Enable10000Warn
RelatedCommands
vlanmac-limitmaximum
vlanmac-limitaction
11.3TimeRangeCommands
11.3.1time-range
CommandPurpose
Usethiscommandtocreatetimerangeandentertime-rangeconfiguration
mode.Usethenotime-rangecommandtodeletethetimerange.
CommandSyntax
time-rangeTIME-RANGE-NAME
notime-range
Parameter ParameterDescriptionParameterValue
TIME-RANGE-NAME Thenameofthetime
rangeStringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Atimerangeisusedtodeterminearangeoftimeduringwhichafilteriseffective.1587Examples
Thisexampleshowshowtocreateatimerangewiththenamemy-time-range:
Switch#configureterminal
Switch(config)#time-rangemy-time-range
Switch(config-tm-range)#
RelatedCommands
showtime-range
11.3.2absolute
CommandPurpose
Usethiscommandtodefinetheabsolutetimeanddateintimerange.
CommandSyntax
absolute(startHH:MM:SSMONTHDAYYEAR)(endHH:MM:SSMONTHDAY
YEAR)
Parameter ParameterDescriptionParameterValue
start Startingtimeanddate-
end Endingtimeanddate -
HH:MM:SS StartingtimeorEnding
timeHour,minute,secondin
HH:MM:SSformat
HHis0-23
MONTH Month 1-12
DAY Day 1-31(accordingtothe
month)
YEAR Year 2000-2037
CommandMode
TimeRangeConfiguration1588Default
None
Usage
Comparingwiththeperiodictime,chooseanappropriatetype.
Examples
Thisexampleshowshowtodefineatimerangestartedfrom11:11:00January1
2008andendedby00:00:00May12009:
Switch#configureterminal
Switch(config)#time-rangemy-time-range
Switch(config-tm-range)#absolutestart11:11:00jun12008end00:00:00may12009
RelatedCommands
periodic
11.3.3periodic
CommandPurpose
Usethiscommandtodefinetheperiodictimeanddateintimerange.
CommandSyntax
periodicHH:MMWEEKDAYtoHH:MM(WEEKDAY|)
periodicHH:MM(weekdays|weekend|daily)toHH:MM
Parameter ParameterDescriptionParameterValue
HH:MM StartingtimeorEnding
timeHour,minuteinHH:MM
format
HHis0-23
weekdays MondaythruFriday -
weekend SaturdayandSunday -
daily Everydayoftheweek-1589WEEKDAY Dayoftheweek(Firstthree
lettersoftheweekday)
Acaseinsensitivestringof
Monday-Sunday,atleast
3characterswhenusing
abbreviation.
CommandMode
TimeRangeConfiguration
Default
None
Usage
Comparingwiththeabsolutetime,chooseanappropriatetype.
Examples
Thisexampleshowshowtodefineatimerangestartedfrom00:00Mondayand
endedby18:00Wednesdayinweeklyperiod:
Switch#configureterminal
Switch(config)#time-rangemy-time-range
Switch(config-tm-range)#periodic00:00monto18:00wed
Thisexampleshowshowtodefineatimerangestartedfrom09:00andendedby
17:00everyday:
Switch#configureterminal
Switch(config)#time-rangemy-time-range
Switch(config-tm-range)#periodic09:00dailyto17:00
RelatedCommands
absolute
11.3.4showtime-range
CommandPurpose
Usethiscommandtoshowtheinformationoftime-range.1590CommandSyntax
showtime-range(TIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
TIME-RANGE-NAME thenameofthetime
range.
Showallthetimeranges
whenthenameisnot
specifiedStringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnotimerangeisspecified,alltime-rangesinthesystemshouldbeshown.
Examples
Thisexampleshowshowtodisplaytheinformationofallthetimeranges:
Switch#showtime-range
time-rangerange1
periodic00:01weekdaysto12:01
RelatedCommands
time-range159111.4ACLCommands
11.4.1macaccess-list
CommandPurpose
UsethiscommandtocreateMACACLandthenenterMACACLinglobal
configurationmode.Usenomacaccess-listcommandtodeletetheMACACL.
CommandSyntax
macaccess-listACL_NAME
nomacaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheMACACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasaMACACLwiththesamename,thiscommandwillenter
theMACACLconfigurationmode.However,iftheACLnameisusedbyothertypeof
ACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheMACACL
firstlyandthenentertheMACACLconfigurationmode.
Examples
ThisexampleshowshowtocreateaMACACLnamedlist_mac_1andthenenterthe
MACACLconfigurationmode:1592Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#
ThisexampleshowshowtoremovetheMACACLnamedlist_mac_1:
Switch#configureterminal
Switch(config)#nomacaccess-listlist_mac_1
RelatedCommands
matchaccess-group
11.4.2sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromMACACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
IP/MACfilter1-131071
CommandMode
MACACLConfiguration
IPACLConfiguration
Default
None
Usage
UsercandeleteaACLwhichisalreadyattachedtotheclass-mapandusedbya
interfaceimmediately.1593Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromMAC
ACL:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#nosequence-num10
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ip_1
Switch(config-ip-acl)#nosequence-num10
RelatedCommands
deny
denytcp
denyudp
denyicmp
denyigmp
permit
permittcp
permitudp
permiticmp
permitigmp
11.4.3denysrc-mac
CommandPurpose
UsethiscommandtocreateaMACfilterfordiscardingongoingpacketsmatchingthe
filterrule.
CommandSyntax
(SEQUENCE_NUM|)denysrc-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host1594MAC_ADDR)|)(untag-vlan|((vlanVLAN_ID|)(cosCOS|)(inner-vlan
INNER_VLAN|)(inner-cosINNER_COS|))(protocol(arp(arp-op-code)|rarp|
ETH_TYPEmaskETH_TYPE_MASK)|packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinMACACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan Withoutvlantag -
VLAN_ID VLAN-ID 1-4094
COS CoSValue 0-7
INNER_VLAN InnerVLAN-ID 1-4094
INNER_COS InnerCoSvalue 0-7
protocol Theprotocoltypewhich
includingARP,RARPor
Ethertype-
arp ARPprotocol -
arp-op-code arp-op-code 0-655351595rarp RARPprotocol -
ETH_TYPE Ethertype 0-0xFFFF
ETH_TYPE_MASK Ethertypemask 0-0xFFFF
TIME_RANGE_NAMEThetime-rangeusedby
theMACfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
MACACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMACACL.i.e.whenthe
maximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMACfilteris110.Eth-typeisnotsupportedinegressACL.
Examples
ThisexampleshowshowtocreateafilterinMACACLtodenythepacketswith
sourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#1denysrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinMACACLtodenyallthepackets:1596Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#2denysrc-macany
ThisexampleshowshowtocreateafilterinMACACLtodenythepacketwhose
sourceMACaddressisbetweentherangesspecified:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#3denysrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.4.4permitsrc-mac
CommandPurpose
UsethiscommandtocreateaMACfilterforallowingpacketsmatchingthefilterrule
tobedelivered.
CommandSyntax
(SEQUENCE_NUM|)permitsrc-mac(any|MAC_ADDRMAC_ADDR_MASK|
hostMAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(untag-vlan|(vlanVLAN|)(cosCOS|)(inner-vlan
INNER_VLAN|)(inner-cosINNER_COS|))(protocol(arp(arp-op-code)|rarp|
ETH_TYPEmaskETH_TYPE_MASK)|packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinMACACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
any Anyhost -1597MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan Withoutvlantag -
VLAN VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
protocol Theprotocoltypewhich
includingARP,RARPor
Ethertype-
arp ARPprotocol -
arp-op-code arpopcode 0-65535
rarp RARPprotocol -
ETH_TYPE Ethertype 0-0xFFFF
ETH_TYPE_MASK Ethertypemask 0-0xFFFF
TIME_RANGE_NAMESpecifythenameoftime-
rangeusedbytheMAC
filterStringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-163821598CommandMode
MACACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMACACL.i.e.whenthe
maximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdMACfilteris115.Eth-typeisnotsupportedinegressACL.
Examples
ThisexampleshowshowtocreateafilterinMACACLtopermitthepacketswith
sourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#1permitsrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinMACACLtopermitallthepackets:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#2permitsrc-macany
ThisexampleshowshowtocreateafilterinMACACLtopermitthepacketswith
sourceMACaddressbetweentherangesspecified:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#3permitsrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num159911.4.5remark
CommandPurpose
UsethiscommandtoaddremarksfortheMACACL.
ToremoveremarksoftheMACACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheMAC
ACLStringwithupto100
characters
CommandMode
MACACLConfiguration
IPACLConfiguration
Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheMACACL:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#remarkremarkofListformac
ThisexampleshowshowtoremovetheremarkoftheMACACL:1600Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#noremark
RelatedCommands
macaccess-list
11.4.6showaccess-listmac
CommandPurpose
UsethiscommandtoshowtheMACACLinformation.
CommandSyntax
showaccess-listmac(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheMACACLStringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnomacaclarespecified,allmacaccess-listsinthesystemshouldbeshown.
Examples
ThisexampleshowshowtoshowtheMACACLinformation:
Switch#showaccess-listmac
macaccess-listlist_mac_1
10denysrc-machost0000.0001.0002
20permitsrc-macany1601RelatedCommands
macaccess-list
11.4.7ipaccess-list
CommandPurpose
UsethiscommandtocreateIPACLandthenenterIPACLconfigurationmode.
ToremovethisACL,usethenoformofthiscommand.
CommandSyntax
ipaccess-listACL_NAME
noipaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameofanIPACLStringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanIPACLwiththesamename,thiscommandwillenterthe
IPACLconfigurationmode.However,iftheACLnameisusedbyothertypeofACL,
apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheIPACLfirstly
andthenentertheIPACLconfigurationmode.1602Examples
ThisexampleshowshowtocreateanIPACLnamedlist_ipv4_1andthenenterthe
IPACLconfigurationmode:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#
ThisexampleshowshowtoremovetheIPACLnamedlist_ipv4_1:
Switch#configureterminal
Switch(config)#noipaccess-listlist_ipv4_1
RelatedCommands
matchaccess-group
11.4.8deny
CommandPurpose
UsethiscommandtodiscardongoingIPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)deny(PROTO_NUM|any)(SRC_MACSRC_MAC_MASK
|any|hostSRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment)(routed-packet
|)(options|)(packet-lengthOPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPprotocolnumber0-2551603any AnyIPprotocol -
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
thefilterAstringwithupto40
characters1604OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
IfIPaddresswildcardbitisprovided,theIPaddressislogical-andinbitwisewiththe
reversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255meansthe
addressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPACL.i.e.whenthemaximum
existingsequencenumberis100,thesequencenumberofsubsequentcreatedIP
filteris110.
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyIPpackets:
ThisexampleshowshowtocreateafilterinIPACLtodenythefragmentpackets
withthesourceIPaddresss1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denyanyhost1.1.1.1anyfragments
ThisexampleshowshowtocreateafilterinIPACLtodenyanyroutedpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#3denyanyanyanyrouted-packet1605RelatedCommands
nosequence-num
11.4.9denytcp
CommandPurpose
UsethiscommandtorejectTCPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denytcp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(src-portOPERATORSRC_PORT|)(DST_MACDST_MAC_MASK|
any|hostDST_MAC)(dst-portOPERATORDST_PORT|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(established|(match-any|match-all
FLAG-NAME|)|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment)(routed-packet|)(options|)(packet-length
OPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address1606OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-1607first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyTCPpackets:1608Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denytcpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheTCPpacketswiththe
sourceIPaddress1.1.1.1,sourceport0-100:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denytcphost1.1.1.1src-portrange0100any
ThisexampleshowshowtocreateafilterinIPACLtodenyanyTCPpacketsin
establishedTCPstreams:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#3denytcpanyanyestablished
ThisexampleshowshowtocreateafilerinIPACLtodenytheTCPACKpackets
withthesourceIPaddress1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#4denytcp10.10.10.00.0.0.0anymatch-anyack
RelatedCommands
nosequence-num
11.4.10denyudp
CommandPurpose
UsethiscommandtorejectUDPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyudp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(src-portOPERATORSRC_PORT|)(DST_MACDST_MAC_MASK|
any|hostDST_MAC)(dst-portOPERATORDST_PORT|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue1609SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-631610ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).1611Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denyudpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheUDPpacketswiththe
sourceIP1.1.1.1,sourceport10,anddestinationportlessthan2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denyudphost1.1.1.1src-porteq10anydst-portlt2000
RelatedCommands
nosequence-num
11.4.11denyicmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyicmp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(ip-precedencePRECEDENCE|dscp
DSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment)(routed-packet|)(options|)(packet-length
OPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
TYPE-NUM ICMPmessagetype 0-255
CODE-NUM ICMPmessagecode 0-2551612SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-1613routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectICMPpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyICMPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denyicmpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheICMPpacketswith
theicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denyicmpanyanyicmp-type3icmp-code31614RelatedCommands
nosequence-num
11.4.12denyigmp
CommandPurpose
UsethiscommandtorejectIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyigmp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(IGMP-TYPE|)
(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment)(routed-packet
|)(options|)(packet-lengthOPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
IGMP-TYPE IGMPtype includingdvmrp,host-
query,host-report,mtrace,
mtrace-response,pim,
precedence,trace,v2-
leave,v2-report,v3-report
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address1615DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-163821616CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectIGMPpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyIGMPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denyigmpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheIGMPpacketswith
thesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denyigmphost1.1.1.1anypim
RelatedCommands
nosequence-num
11.4.13denygre
CommandPurpose
UsethiscommandtorejectGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denygre(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(keyKEY
maskKEY-MASK)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-1617fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-1618non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectGREpackets.
Pleasereferencetocommanddenyfortheotherparameters.
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyGREpackets:1619Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denygreanyanykey0mask0
ThisexampleshowshowtocreateafilterinIPACLtodenytheGREpacketswith
thesourceIPaddress1.1.1.1,anydestinationIPaddressandthegrekeyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denygrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.4.14denynvgre
CommandPurpose
UsethiscommandtorejectNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denynvgre(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(vsidVSID
maskVSID-MASK)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Pleasereferencetocommanddenyfortheotherparameters.
Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711620PROTO_NUM AnIPprotocolnumber0-255
any AnyIPprotocol -
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-1621TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyNVGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1denynvgreanyanyvsid0mask0
ThisexampleshowshowtocreateafilterinIPACLtodenytheNVGREpacketswith
thesourceIPaddress1.1.1.1,anydestinationIPaddressandthenvgrevsidis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denygrehost1.1.1.1anyvsid10mask0xffffff
RelatedCommands
nosequence-num162211.4.15permit
CommandPurpose
UsethiscommandtopermitpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permit(PROTO_NUM|any)(SRC_MAC
SRC_MAC_MASK|any|hostSRC_MAC)(DST_MACDST_MAC_MASK|any|
hostDST_MAC)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPprotocolnumber0-255
any AnyIPprotocol -
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-71623DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None1624Usage
IfIPaddresswildcardbitsareprovided,theIPaddressislogical-andinbitwisewith
thereversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255meansthe
addressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPACL.i.e.whenthemaximum
existingsequencenumberis105,thesequencenumberofsubsequentcreatedIP
filteris115.
Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyIPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2denygrehost1.1.1.1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.4.16permittcp
CommandPurpose
UsethiscommandtopermitTCPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permittcp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(src-portOPERATORSRC_PORT|)(DST_MACDST_MAC_MASK|
any|hostDST_MAC)(dst-portOPERATORDST_PORT|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(established|(match-any|match-all
FLAG-NAME|)|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment)(routed-packet|)(options|)(packet-length
OPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue1625SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-631626ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-163821627CommandMode
IPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyTCPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#10permitanyanyany
ThisexampleshowshowtocreateafilterinIPACLtopermittheTCPpacketswith
thesourceIPaddress1.1.1.1,andsourceportrangesfrom0to100:
Switch#configureterminal
Switch(config-ex-ip-acl)#20permittcphost1.1.1.1anynon-first-fragments
ThisexampleshowshowtocreateafilterinIPACLtopermitanyTCPpacketsin
establishedTCPstreams:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#30permitanyanyanyrouted-packet
ThisexampleshowshowtocreateafilterinIPACLtopermittheTCPACKpackets
withthesourceIPaddress10.10.10.0:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#4permittcp10.10.10.00.0.0.0anymatch-anyack
RelatedCommands
nosequence-num162811.4.17permitudp
CommandPurpose
UsethiscommandtopermitUDPpacketswhenthepacketsmatchthisaccess-list.
CommandSyntax
(SEQUENCE_NUM|)permitudp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(src-portOPERATORSRC_PORT|)(DST_MACDST_MAC_MASK|
any|hostDST_MAC)(dst-portOPERATORDST_PORT|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask1629hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters1630OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1permitudpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheUDPpacketswiththe
sourceIPaddress1.1.1.1,sourceport10,anddestinationportlessthan2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2permitudphost1.1.1.1src-porteq10anydst-portlt2000
RelatedCommands
nosequence-num
11.4.18permiticmp
CommandPurpose
UsethiscommandtopermitICMPpacketsmatchingtheIPfilter.1631CommandSyntax
(SEQUENCE_NUM|)permiticmp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(ip-precedencePRECEDENCE|dscp
DSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment)(routed-packet|)(options|)(packet-length
OPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
icmp-typeTYPE-NUM ICMPmessagetype 0-255
icmp-codeCODE-NUMICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-31632non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtopermitICMPpackets.1633Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyICMPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1permiticmpanyany
ThisexampleshowshowtocreateafilterinIPACLtopermittheICMPpacketswith
theicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2permiticmpanyanyicmp-type3icmp-code3
RelatedCommands
denyicmp
nosequence-num
11.4.19permitigmp
CommandPurpose
UsethiscommandtopermitIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitigmp(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(IGMP-TYPE|)
(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment)(routed-packet
|)(options|)(packet-lengthOPERATORLENGTH|)(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
IGMP-TYPE IGMPtype IGMPtype,including
dvmrp,host-query,host-
report,mtrace,mtrace-
response,pim,
precedence,trace,v2-
leave,v2-report,v3-report1634SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-1635routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtopermitIGMPpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyIGMPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1permitigmpanyany
ThisexampleshowshowtocreateafilterinIPACLtopermittheIGMPpacketswith
thesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2permitigmphost1.1.1.1anypim1636RelatedCommands
nosequence-num
11.4.20permitgre
CommandPurpose
UsethiscommandtopermitGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitgre(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(keyKEY
maskKEY-MASK)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask1637hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration1638Default
None
Usage
ThistypeoffilterismostlyusedtopermitGREpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1permitgreanyanykey0mask0
ThisexampleshowshowtocreateafilterinIPACLtopermittheGREpacketswith
thesourceIPaddress1.1.1.1,anydestinationIPaddressandthegrekeyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2permitgrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.4.21permitnvgre
CommandPurpose
UsethiscommandtopermitNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitnvgre(SRC_MACSRC_MAC_MASK|any|host
SRC_MAC)(DST_MACDST_MAC_MASK|any|hostDST_MAC)(vsidVSID
maskVSID-MASK)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Pleasereferencetocommanddenynvgrefortheotherparameters.1639Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_MAC
SRC_MAC_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_MAC ThesourceIPaddressofa
hostIPv4Address
DST_MAC
DST_MAC_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_MAC ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-1640small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtopermitNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinIPACLtopermitanyNVGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#1permitnvgreanyanyvsid0mask01641ThisexampleshowshowtocreateafilterinIPACLtopermittheNVGREpackets
withthesourceIPaddress1.1.1.1,anydestinationIPaddressandthenvgrevsidis
10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#2permitgrehost1.1.1.1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.4.22showaccess-listip
CommandPurpose
UsethiscommandtoshowtheinformationofIPACL.
CommandSyntax
showaccess-listip(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheIPACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowtheinformationofIPACL:1642Switch#showaccess-listip
ipaccess-listlist_ipv4_1
2permittcphost1.1.1.1any
3denyicmpanyany
12permittcpanyany
RelatedCommands
ipaccess-list
11.4.23udfaccess-list
CommandPurpose
UsethiscommandtocreateUDFACLandthenenterUDFACLinglobal
configurationmode.Usenoudfaccess-listcommandtodeletetheUDFACL.
CommandSyntax
user-defineaccess-listACL_NAME
nouser-defineaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheUDFACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasaUDFACLwiththesamename,thiscommandwillenter
theUDFACLconfigurationmode.However,iftheACLnameisusedbyothertypeof
ACL,apromptmessagewillbeshown.1643WhenthenameisnotusedbyanyACL,thiscommandistocreatetheUDFACL
firstlyandthenentertheUDFACLconfigurationmode.
Examples
ThisexampleshowshowtocreateaUDFACLnamedlist_udf_1andthenenterthe
UDFACLconfigurationmode:
Switch#configureterminal
Switch(config)#user-defineaccess-listlist_udf_1
Switch(config-udf-acl)#
ThisexampleshowshowtoremovetheUDFACLnamedlist_udf_1:
Switch#configureterminal
Switch(config)#nouser-defineaccess-listlist_udf_1
RelatedCommands
permitudfdenyudf
11.4.24permitudf
CommandPurpose
Usethiscommandtopermitpacketsmatchingtheuser-definedfilter.
CommandSyntax
(SEQUENCE_NUM|)permitipv4-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
(SEQUENCE_NUM|)permitipv6-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
(SEQUENCE_NUM|)permitl2-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
(SEQUENCE_NUM|)permitl4-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue1644SEQUENCE_NUM Thesequencenumberof
thefilterinUDFACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
HEX_RULE Rulestring thestringmustbe
hexadecimalandstartwith
0xnomorethan10
characters(include0x)
HEX_MASK Masktotherulestringthestringmustbe
hexadecimalandstartwith
0xnomorethan10
characters(include0x)
OFFSET Offsetoftherulemaskin
thepacket(unit:byte)thevaluemustequal
4n(n=0,1,2)
TIME_RANGE_NAMEThetime-rangeusedby
theUDFfilterAstringwithupto40
characters
CommandMode
UDFACLConfiguration
Default
None
Usage
None
Examples
Thistypeoffilterisusedtopermitanykindofpackets.:1645Switch#configureterminal
Switch(config)#user-defineaccess-listlist_udf_1
Switch(config-udf-acl)#1permitl4-head0x100x0120
RelatedCommands
None
11.4.25denyudf
CommandPurpose
UsethiscommandtodenypacketsmatchingtheUDFfilter.
CommandSyntax
(SEQUENCE_NUM|)denyipv4-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
(SEQUENCE_NUM|)denyipv6-headHEX_RULEHEX_MASKOFFSET(time-
rangeTIME_RANGE_NAME|)
(SEQUENCE_NUM|)denyl2-headHEX_RULEHEX_MASKOFFSET(time-range
TIME_RANGE_NAME|)
(SEQUENCE_NUM|)denyl4-headHEX_RULEHEX_MASKOFFSET(time-range
TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinUDFACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
HEX_RULE Rulestring thestringmustbe
hexadecimalandstartwith
0xnomorethan10
characters(include0x)1646HEX_MASK Masktotherulestringthestringmustbe
hexadecimalandstartwith
0xnomorethan10
characters(include0x)
OFFSET Offsetoftherulemaskin
thepacket(unit:byte)thevaluemustequal
4n(n=0,1,2)
TIME_RANGE_NAMEThetime-rangeusedby
theUDFfilterAstringwithupto40
characters
CommandMode
UDFACLConfiguration
Default
None
Usage
None
Examples
Thistypeoffilterismostlyusedtopermitanykindofpackets.:
Switch#configureterminal
Switch(config)#user-defineaccess-listlist_udf_1
Switch(config-udf-acl)#1denyl4-head0x100x0120
RelatedCommands
None
11.4.26showaccess-listudf
CommandPurpose
UsethiscommandtoshowtheinformationofUDFACL.1647CommandSyntax
showaccess-listuser-define(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheUDFACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowtheinformationofUDFACL:
Switch#showaccess-listuser-define
user-defineaccess-listlist_udf_1
10permitl2-head0x000000100x0000000120
RelatedCommands
udfaccess-list
11.5ExtendACLCommands
11.5.1ipaccess-listextend
CommandPurpose
UsethiscommandtocreateextendIPACLandthenenterextendIPACL
configurationmode.1648ToremovethisACL,usethenoformofthiscommand.
CommandSyntax
ipaccess-listACL_NAMEextend
noipaccess-listACL_NAMEextend
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameofanextendIP
ACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanextendIPACLwiththesamename,thiscommandwill
entertheextendIPACLconfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreateanextendIPACL
firstlyandthenentertheextendIPACLconfigurationmode.
OnhowtoapplythecreatedextendIPACLintheinterface,pleaserefertotheusage
ofmatchaccess-groupcommandinrelatedchapter.
Examples
ThisexampleshowshowtocreateanextendIPACLnamedlist_ipv4_1andthen
entertheextendIPACLconfigurationmode:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#
ThisexampleshowshowtoremovetheextendIPACLnamedlist_ipv4_1:1649Switch#configureterminal
Switch(config)#noipaccess-listlist_ipv4_1extend
RelatedCommands
matchaccess-group
11.5.2sequence-num
CommandPurpose
UsethiscommandtodeleteafilterfromextendIPACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
anIPfilter1-131071
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtodeleteanIPorMACfilterwithsequencenumber10from
anextendIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#nosequence-num101650RelatedCommands
deny
denyudp
denyicmp
denyigmp
permit
permittcp
permitudp
permiticmp
permitigmp
denysrc-mac
permitsrc-mac
11.5.3denysrc-mac
CommandPurpose
Usethiscommandtocreateafilterfordiscardingongoingpacketsmatchingthefilter
rule.
CommandSyntax
(SEQUENCE_NUM|)denysrc-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(untag-vlan|(vlanVLAN_ID|)(cosCOS|)(inner-vlan
INNER_VLAN_ID|)(inner-cosINNER_COS|))(arp-packet((arp-op-code)
(sender-ip(IP_ADDRIP_ADDR_MASK|any|hostIP_ADDR)|)(target-ip
(IP_ADDRIP_ADDR_MASK|any|hostIP_ADDR)|))|packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1651SEQUENCE_NUM Thesequencenumberof
thefilterinMACACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan untag-vlan -
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
arp ARPprotocol -
arp-op-code arp-op-code 0-65535
sender-ip sender-ip -
target-ip target-ip -
IP_ADDR
IP_ADDR_MASKTheipaddressand
wildcardbitsIPv4AddressandMask
hostIP_ADDR Thehostwithaspecified
ipaddressIPv4Address1652TIME-RANGE-NAME Thetime-rangeusedby
theextendIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendIPACL.i.e.whenthe
maximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMACfilteris110.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenythepacketswith
sourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denysrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendIPACLtodenyallthepackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denysrc-macany
ThisexampleshowshowtocreateafilterinextendIPACLtodenythepacketwhose
sourceMACaddressisbetweentherangesspecified:1653Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3denysrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.5.4permitsrc-mac
CommandPurpose
Usethiscommandtocreateafilterforallowingpacketsmatchingthefilterruletobe
delivered.
CommandSyntax
(SEQUENCE_NUM|)permitsrc-mac(any|MAC_ADDRMAC_ADDR_MASK|
hostMAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(untag-vlan|(vlanVLAN_ID|)(cosVALUE|)(inner-vlan
INNER_VLAN_ID|)(inner-cosINNER_COS|))(arp-packet((arp-op-code)
(sender-ip(IP_ADDRIP_ADDR_MASK|any|hostIP_ADDR)|)(target-ip
(IP_ADDRIP_ADDR_MASK|any|hostIP_ADDR)|))|packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format1654hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan untag-vlan -
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
arp ARPprotocol -
arp-op-code arp-op-code 0-65535
sender-ip sender-ip -
target-ip target-ip -
IP_ADDR
IP_ADDR_MASKTheipaddressand
wildcardbitsIPv4AddressandMask
hostIP_ADDR Thehostwithaspecified
ipaddressIPv4Address
TIME-RANGE-NAME Thetime-rangeusedby
theextendIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration1655Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendIPACL.i.e.whenthe
maximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdMACfilteris115.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitthepacketswith
sourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-ac)#1permitsrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendIPACLtopermitallthepackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-ac)#2permitsrc-macany
ThisexampleshowshowtocreateafilterinMACACLtopermitthepacketswith
sourceMACaddressbetweentherangesspecified:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3permitsrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.5.5deny
CommandPurpose
UsethiscommandtodiscardongoingIPpacketsmatchingtheIPfilter.1656CommandSyntax
(SEQUENCE_NUM|)deny(PROTO_NUM|any)(SRC_IPSRC_IP_MASK|any|
hostSRC_IP)(DST_IPDST_IP_MASK|any|hostDST_IP)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-31657non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
0-255
Default
None1658Usage
IfanIPaddresswildcardbitisprovided,theIPaddressislogically-andedinbitwise
withthereversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255means
theaddressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendIPACL.i.e.whenthe
maximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPfilteris110.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyIPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyanyanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenythefragment
packetswiththesourceIPaddresss1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyanyhost1.1.1.1anyfragments
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyrouted
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#3denyanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.5.6denytcp
CommandPurpose
UsethiscommandtorejectTCPpacketsmatchingtheIPfilter.1659CommandSyntax
(SEQUENCE_NUM|)denytcp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(established|(match-any|match-allFLAG-NAME|)|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment)
(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1660OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -1661options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyTCPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denytcpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheTCPpackets
withthesourceIPaddress1.1.1.1,sourceport0-100:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denytcphost1.1.1.1src-portrange0100any
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyTCPpackets
inestablishedTCPstreams:1662Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3denytcpanyanyestablished
ThisexampleshowshowtocreateafilerinextendIPACLtodenytheTCPACK
packetswiththesourceIPaddress10.10.10.10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#4denytcp10.10.10.00.0.0.0anymatch-anyack
RelatedCommands
nosequence-num
11.5.7denyudp
CommandPurpose
UsethiscommandtorejectUDPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyudp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|
non-first-fragment)(routed-packet|)(options|)(packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -1663hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-1664non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denyudpanyany
ThisexampleshowshowtocreateafilterinIPACLtodenytheUDPpacketswiththe
sourceIP1.1.1.1,sourceport10,anddestinationportlessthan2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denyudphost1.1.1.1src-porteq10anydst-portlt20001665RelatedCommands
nosequence-num
11.5.8denyicmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyicmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(icmp-typeTYPE-NUM(icmp-code
CODE-NUM|)|)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
TYPE-NUM ICMPmessagetype 0-255
CODE-NUM ICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address1666hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration1667Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyudpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheUDPpackets
withthesourceIP1.1.1.1,sourceport10,anddestinationportlessthan2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyudphost1.1.1.1src-porteq10anydst-portlt2000
RelatedCommands
nosequence-num
11.5.9denyigmp
CommandPurpose
UsethiscommandtorejectIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyigmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(IGMP-TYPE|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1668IGMP-TYPE IGMPtype includingdvmrp,host-
query,host-report,mtrace,
mtrace-response,pim,
precedence,trace,v2-
leave,v2-report,v3-report
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-1669non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyICMP
packets:1670Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyicmpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheICMPpackets
withtheicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyicmpanyanyicmp-type3icmp-code3
RelatedCommands
nosequence-num
11.5.10denygre
CommandPurpose
UsethiscommandtorejectGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denygre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(keyKEYmaskKEY-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711671SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters1672OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyIGMP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyigmpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheIGMPpackets
withthesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyigmphost1.1.1.1anypim
RelatedCommands
nosequence-num167311.5.11denynvgre
CommandPurpose
UsethiscommandtorejectNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denynvgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(vsidVSIDmaskVSID-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1674PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration1675Default
None
Usage
ThistypeoffilterismostlyusedtorejectNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denygreanyanykey0mask0
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheGREpackets
withthesourceIPaddress1.1.1.1,anydestinationIPaddressandthegrekeyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denygrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.5.12permit
CommandPurpose
UsethiscommandtopermitpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permit(PROTO_NUM|any)(SRC_IPSRC_IP_MASK|any
|hostSRC_IP)(DST_IPDST_IP_MASK|any|hostDST_IP)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1676SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to2550-255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-1677non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
IfanIPaddresswildcardbitisprovided,theIPaddressislogically-andedinbitwise
withthereversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255means
theaddressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendIPACL.i.e.whenthe
maximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdIPfilteris115.1678Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyNVGRE
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denynvgreanyanyvsid0mask0
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheNVGRE
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandthenvgre
vsidis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denygrehost1.1.1.1anyvsid10mask0xffffff
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyrouted
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#30permitanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.5.13permittcp
CommandPurpose
UsethiscommandtopermitTCPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permittcp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(established|(match-any|match-allFLAG-NAME|)|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment)
(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)1679Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-71680DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilter-
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range1681LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyTCP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#10permittcpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheTCP
packetswiththesourceIPaddress1.1.1.1,andsourceportrangesfrom0to100:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#20permittcphost1.1.1.1src-portrange0100any
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyTCP
packetsinestablishedTCPstreams:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#30permittcpanyanyestablished
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheTCPACK
packetswiththesourceIPaddress10.10.10.0:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#4permittcp10.10.10.00.0.0.0anymatch-anyack1682RelatedCommands
nosequence-num
11.5.14permitudp
CommandPurpose
UsethiscommandtopermitUDPpacketswhenthepacketsmatchthisaccess-list.
CommandSyntax
(SEQUENCE_NUM|)permitudp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|
non-first-fragment)(routed-packet|)(options|)(packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address1683OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-1684routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilter-
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permitudpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtodenytheUDPpackets
withthesourceIPaddress1.1.1.1,sourceport10,anddestinationportlessthan
2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permitudphost1.1.1.1src-porteq10anydst-portlt20001685RelatedCommands
nosequence-num
11.5.15permiticmp
CommandPurpose
UsethiscommandtopermitICMPpacketswhenthepacketsmatchthisaccess-list.
CommandSyntax
(SEQUENCE_NUM|)permiticmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(icmp-typeTYPE-NUM(icmp-code
CODE-NUM|)|)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
icmp-typeTYPE-NUM ICMPmessagetype 0-255
icmp-codeCODE-NUMICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address1686hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration1687Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyICMP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permiticmpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheICMP
packetswiththeicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permiticmpanyanyicmp-type3icmp-code3
RelatedCommands
None
11.5.16permitigmp
CommandPurpose
UsethiscommandtopermitIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitigmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(IGMP-TYPE|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1688IGMP-TYPE IGMPtype includingdvmrp,host-
query,host-report,mtrace,
mtrace-response,pim,
precedence,trace,v2-
leave,v2-report,v3-report
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to2550-255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-1689non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyIGMP
packets:1690Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permitigmpanyany
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheIGMP
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-
typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permitigmphost1.1.1.1anypim
RelatedCommands
nosequence-num
11.5.17permitgre
CommandPurpose
UsethiscommandtopermitGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(keyKEYmaskKEY-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711691SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters1692OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtopermitGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyGRE
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1permitgreanyanykey0mask0
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheGRE
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandthegre
keyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2permitgrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num169311.5.18permitnvgre
CommandPurpose
UsethiscommandtopermitNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitnvgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(vsidVSIDmaskVSID-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1694PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
ExtendIPACLConfiguration1695Default
None
Usage
ThistypeoffilterismostlyusedtopermitNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendIPACLtopermitanyNVGRE
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1permitnvgreanyanyvsid0mask0
ThisexampleshowshowtocreateafilterinextendIPACLtopermittheNVGRE
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandthenvgre
vsidis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2permitgrehost1.1.1.1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.5.19remark
CommandPurpose
UsethiscommandtoaddremarksfortheextendIPACL.
ToremoveremarksfromtheextendIPACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue1696REMARK Theremarksoftheextend
IPACLAstringwithupto100
characters
CommandMode
ExtendIPACLConfiguration
Default
None
Usage
Theremarkisupto100characters.
Examples
ThisexampleshowshowtoaddaremarktodescribetheextendIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#remarkremard0flist1
ThisexampleshowshowtoremovetheremarkfromtheextendIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#noremark
RelatedCommands
None
11.5.20showaccess-listipextend
CommandPurpose
UsethiscommandtoshowtheinformationofextendIPACL.
CommandSyntax
showaccess-listip(ACL_NAMEextend|)1697Parameter ParameterDescriptionParameterValue
ACL_NAMEextend ThenameoftheextendIP
ACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowtheinformationofextendIPACL:
Switch#showaccess-listip
ipaccess-listex_ip_list_ipv4_1extend
2permittcphost1.1.1.1any
3denyicmpanyany
12permittcpanyany
RelatedCommands
ipaccess-listextend
11.6FLEXACLCommands
11.6.1mac-ipaccess-list-template
CommandPurpose
UsethiscommandtocreateACLtemplateformac,ipandmplsacl.andthenenter
MAC-IPACLtemplateConfigurationmode.Usenomac-ipaccess-listtemplate
commandtodeletetheACLtemplate.1698CommandSyntax
mac-ipaccess-list-templateTEMPALTE_NAME
Parameter ParameterDescriptionParameterValue
TEMPALTE_NAME Thenameofthemac-ip
ACCESS-LIST-TEMPLATEAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Ifthesystemalreadyhasamac-ipaccess-list-templatewiththesamename,this
commandwillenterthemac-ipaccess-list-templateconfigurationmode.However,if
theACLtemplatenameisusedbyothertypeofACLtemplate,apromptmessagewill
beshown.
WhenthenameisnotusedbyanyACLtemplate,thiscommandistocreatethemac-
ipaccess-list-templatefirstlyandthenenterthemac-ipaccess-list-template
configurationmode.
Examples
Thisexampleshowshowtocreateamac-ipaccess-list-templatenamed
mac_ip_tempalte_1andthenenterthemac_ip_templateconfigurationmode:
Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#
RelatedCommands
None169911.6.2mac-field
CommandPurpose
Usethiscommandtocreatemacfieldformac-ipaccess-list-template
CommandSyntax
mac-field{src-mac|dest-mac|vlan|inner-vlan|cos|inner-cos|untag|ether-type}
nomac-field{src-mac|dest-mac|vlan|inner-vlan|cos|inner-cos|untag|ether-
type|}
Parameter ParameterDescriptionParameterValue
src-mac SourceMACaddress -
dest-mac DestinationMACaddress-
vlan VLAN-ID -
inner-vlan InnerVLAN-ID -
cos CoSValue -
inner-cos InnerCoSvalue -
untag Withoutvlantag -
CommandMode
MAC-IPACLTEMPLATEConfiguration
Default
None
Usage
configureofmacfieldsofmac-FLEXIPACLtemplate,oneormorecanbeselected
atatime;Usethenomac-fieldcommandtodeletethecorrespondingmacfield,ifno
macfieldisadded,itmeansthatallmacfieldsaredeleted.1700Examples
Thisexampleshowshowtoaddsrc-macanddest-macfieldtothemac-FLEXIPACL
template:
Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#mac-fieldsrc-macdest-mac
RelatedCommands
None
11.6.3ip-field
CommandPurpose
Usethiscommandtocreateipfieldformac-ipaccess-list-template
CommandSyntax
ip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port|
l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length}
noip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port
|l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length|}
Parameter ParameterDescriptionParameterValue
src-ip SourceIPaddress -
dest-ip DestinationIPaddress-
dscp DSCPID -
l4-protocol L4Protocol -
ip-option IPoptions -
tcp-flag TCPFlag -
l4-src-port L4sourceport -1701l4-src-port-range rangeofL4sourceport-
l4-dest-port L4destinationport -
l4-dest-port-range rangeofL4destination
port-
icmp-type ICMPmessagetype -
icmp-code ICMPmessagecode -
igmp-type IGMPmessagetype -
vni VirtualNetworkIdentifier-
gre-key GREKEY -
packet-length packetlength -
CommandMode
MAC-IPACLTEMPLATEConfiguration
Default
None
Usage
configureofipfieldsofmac-FLEXIPACLtemplate,oneormorecanbeselectedata
time;Usethenoip-fieldcommandtodeletethecorrespondingipfield,ifnomacfield
isadded,itmeansthatallipfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsrc-ipanddest-ipfieldtothemac-FLEXIPACL
template:
Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#ip-fieldsrc-ipdest-ip1702RelatedCommands
None
11.6.4arp-field
CommandPurpose
Usethiscommandtocreatearpfieldformac-ipaccess-list-template
CommandSyntax
arp-field{sender-ip|target-ip|arp-op-code}
noarp-field{sender-ip|target-ip|arp-op-code|}
Parameter ParameterDescriptionParameterValue
sender-ip senderip -
target-ip targetip -
arp-op-code arpopcode -
CommandMode
MAC-IPACLTEMPLATEConfiguration
Default
None
Usage
configureofarpfieldsofmac-FLEXIPACLtemplate,oneormorecanbeselectedat
atime;Usethenoarp-fieldcommandtodeletethecorrespondingarpfield,ifnoarp
fieldisadded,itmeansthatallarpfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsender-ipandtarget-ipfieldtothemac-FLEXIPACL
template:1703Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#arp-fieldsender-iptarget-ip
RelatedCommands
None
11.6.5mpls-field
CommandPurpose
Usethiscommandtocreatemplsfieldformac-ipaccess-list-template
CommandSyntax
mpls-field{label0|exp0|ttl0|stack-bottom0|label1|exp1|ttl1|stack-bottom1|
label2|exp2|ttl2|stack-bottom2|forward-label|forward-exp|forward-ttl|forward-
stack-bottom}
nompls-field{label0|exp0|ttl0|stack-bottom0|label1|exp1|ttl1|stack-bottom1|
label2|exp2|ttl2|stack-bottom2|forward-label|forward-exp|forward-ttl|forward-
stack-bottom|}
Parameter ParameterDescriptionParameterValue
label0 topmostlabel -
exp0 topmostexp -
ttl0 topmostttl -
stack-bottom0 topmostsbit -
label1 secondlabel -
exp1 secondexp -
ttl1 secondttl -
stack-bottom1 secondsbit -
label2 thirdlabel -
exp2 thirdexp -1704ttl2 thirdttl -
stack-bottom2 thirdsbit -
forward-label forwardlabel -
forward-exp forwardexp -
forward-ttl forwardttl -
forward-stack-bottom forwardsbit -
CommandMode
MAC-IPACLTEMPLATEConfiguration
Default
None
Usage
configureofmplsfieldsofmac-FLEXIPACLtemplate,oneormorecanbeselected
atatime;Usethenompls-fieldcommandtodeletethecorrespondingmplsfield,if
nomplsfieldisadded,itmeansthatallmplsfieldsaredeleted.
Examples
Thisexampleshowshowtoaddlabel0exp0ttl0stack-bottom0fieldtothemac-
FLEXIPACLtemplate:
Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#mpls-fieldlabel0exp0ttl0stack-bottom0
RelatedCommands
None170511.6.6extra-field
CommandPurpose
Usethiscommandtocreateextrafieldformac-ipaccess-list-template
CommandSyntax
extra-field{routed-packet|vsid|vrf}
noextra-field{routed-packet|vsid|vrf|}
Parameter ParameterDescriptionParameterValue
routed-packet routedpacket -
vsid NVGREVSID -
vrf VPNRouting/Forwarding
instance-
CommandMode
MAC-IPACLTEMPLATEConfiguration
Default
None
Usage
configureofextrafieldsofmac-FLEXIPACLtemplate,oneormorecanbeselected
atatime;Usethenoextra-fieldcommandtodeletethecorrespondingarpfield,ifno
arpfieldisadded,itmeansthatallextrafieldsaredeleted.
Examples
Thisexampleshowshowtoaddrouted-packetfieldtothemac-FLEXIPACL
template:
Switch#configureterminal
Switch(config)#mac-ipaccess-list-templatemac_ip_template_1
Switch(config-acl-mac-ip-template)#extra-fieldrouted-packet1706RelatedCommands
None
11.6.7sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromFLEXMACACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
IP/MACfilter1-131071
CommandMode
FLEXMACACLConfiguration
FLEXIPACLConfiguration
Default
None
Usage
UsercandeleteaACLwhichisalreadyattachedtotheclass-mapandusedbya
interfaceimmediately.
Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromFLEX
MACACL:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#nosequence-num101707Thisexampleshowshowtoremoveafilterwiththesequence-num10fromFLEXIP
ACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ip_1
Switch(config-ip-acl)#nosequence-num10
RelatedCommands
deny
denytcp
denyudp
denyicmp
denyigmp
permit
permittcp
permitudp
permiticmp
permitigmp
11.6.8denysrc-mac
CommandPurpose
UsethiscommandtocreateaMACfilterfordiscardingongoingpacketsmatchingthe
filterrule.
CommandSyntax
(SEQUENCE_NUM|)denysrc-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(untag-vlan|((vlanVLAN_ID|)(cosCOS|)(inner-vlan
INNER_VLAN|)(inner-cosINNER_COS|))(protocol(arp(arp-op-code)|rarp|
ETH_TYPEmaskETH_TYPE_MASK)|packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)1708Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXMAC
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan Withoutvlantag -
VLAN_ID VLAN-ID 1-4094
COS CoSValue 0-7
INNER_VLAN InnerVLAN-ID 1-4094
INNER_COS InnerCoSvalue 0-7
protocol Theprotocoltypewhich
includingARP,RARPor
Ethertype-
arp ARPprotocol -
arp-op-code arp-op-code 0-65535
rarp RARPprotocol -
ETH_TYPE Ethertype 0-0xFFFF
ETH_TYPE_MASK Ethertypemask 0-0xFFFF1709TIME_RANGE_NAMEThetime-rangeusedby
theMACfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXMACACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheFLEXMACACL.i.e.whenthe
maximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMACfilteris110.Eth-typeisnotsupportedinegressACL.
Examples
ThisexampleshowshowtocreateafilterinFLEXMACACLtodenythepackets
withsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#1denysrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinFLEXMACACLtodenyallthepackets:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#2denysrc-macany
ThisexampleshowshowtocreateafilterinFLEXMACACLtodenythepacket
whosesourceMACaddressisbetweentherangesspecified:1710Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#3denysrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.6.9permitsrc-mac
CommandPurpose
UsethiscommandtocreateaMACfilterforallowingpacketsmatchingthefilterrule
tobedelivered.
CommandSyntax
(SEQUENCE_NUM|)permitsrc-mac(any|MAC_ADDRMAC_ADDR_MASK|
hostMAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(untag-vlan|(vlanVLAN|)(cosCOS|)(inner-vlan
INNER_VLAN|)(inner-cosINNER_COS|))(protocol(arp(arp-op-code)|rarp|
ETH_TYPEmaskETH_TYPE_MASK)|packet-lengthOPERATORLENGTH|)
(TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXMAC
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format1711hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
untag-vlan Withoutvlantag -
VLAN VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
protocol Theprotocoltypewhich
includingARP,RARPor
Ethertype-
arp ARPprotocol -
arp-op-code arpopcode 0-65535
rarp RARPprotocol -
ETH_TYPE Ethertype 0-0xFFFF
ETH_TYPE_MASK Ethertypemask 0-0xFFFF
TIME_RANGE_NAMESpecifythenameoftime-
rangeusedbytheMAC
filterStringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXMACACLConfiguration1712Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheFLEXMACACL.i.e.whenthe
maximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdMACfilteris115.Eth-typeisnotsupportedinegressACL.
Examples
ThisexampleshowshowtocreateafilterinFLEXMACACLtopermitthepackets
withsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#1permitsrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinFLEXMACACLtopermitallthepackets:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#2permitsrc-macany
ThisexampleshowshowtocreateafilterinFLEXMACACLtopermitthepackets
withsourceMACaddressbetweentherangesspecified:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#3permitsrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.6.10remark
CommandPurpose
UsethiscommandtoaddremarksfortheFLEXMACACL.
ToremoveremarksoftheFLEXMACACL,usethenoformofthiscommand.1713CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheFLEX
MACACLStringwithupto100
characters
CommandMode
FLEXMACACLConfiguration
FLEXIPACLConfiguration
Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheFLEXMACACL:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#remarkremarkofListformac
ThisexampleshowshowtoremovetheremarkoftheFLEXMACACL:
Switch#configureterminal
Switch(config)#macaccess-listlist_mac_1
Switch(config-mac-acl)#noremark
RelatedCommands
macaccess-listtemplate171411.6.11showaccess-listmactemplate
CommandPurpose
UsethiscommandtoshowtheFLEXMACACLinformation.
CommandSyntax
showaccess-listmactemplate(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheFLEX
MACACLStringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
IfnoFLEXMACACLarespecified,allmacaccess-listsinthesystemshouldbe
shown.
Examples
ThisexampleshowshowtoshowtheFLEXMACACLinformation:
Switch#showaccess-listmactemplate
macaccess-listlist_mac_1templatetemplate1
10denysrc-machost0000.0001.0002
20permitsrc-macany
RelatedCommands
macaccess-listtemplate171511.6.12ipaccess-list
CommandPurpose
UsethiscommandtocreateFLEXIPACLandthenenterFLEXIPACLconfiguration
mode.
ToremovethisACL,usethenoformofthiscommand.
CommandSyntax
ipaccess-listACL_NAME
noipaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameofanFLEXIP
ACLStringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanFLEXIPACLwiththesamename,thiscommandwill
entertheFLEXIPACLconfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheFLEXIPACL
firstlyandthenentertheFLEXIPACLconfigurationmode.
Examples
ThisexampleshowshowtocreateanFLEXIPACLnamedlist_ipv4_1andthen
entertheFLEXIPACLconfigurationmode:1716Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1
Switch(config-ip-acl)#
ThisexampleshowshowtoremovetheFLEXIPACLnamedlist_ipv4_1:
Switch#configureterminal
Switch(config)#noipaccess-listlist_ipv4_1
RelatedCommands
matchaccess-group
11.6.13sequence-num
CommandPurpose
UsethiscommandtodeleteafilterfromextendFLEXIPACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
anIPfilter1-131071
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
None1717Examples
ThisexampleshowshowtodeleteanIPorMACfilterwithsequencenumber10from
anextendFLEXIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#nosequence-num10
RelatedCommands
deny
denyudp
denyicmp
denyigmp
permit
permittcp
permitudp
permiticmp
permitigmp
denysrc-mac
permitsrc-mac
11.6.14denysrc-mac
CommandPurpose
Usethiscommandtocreateafilterfordiscardingongoingpacketsmatchingthefilter
rule.
CommandSyntax
(SEQUENCE_NUM|)denysrc-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(vlanVLAN_ID|)(cosCOS|)(inner-vlanINNER_VLAN_ID|)
(inner-cosINNER_COS|)(arp-packet((arp-op-code)(sender-ip(IP_ADDR1718IP_ADDR_MASK|any|hostIP_ADDR)|)(target-ip(IP_ADDRIP_ADDR_MASK|
any|hostIP_ADDR)|))|packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXMAC
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
arp ARPprotocol -
arp-op-code arp-op-code 0-65535
sender-ip sender-ip -
target-ip target-ip -
IP_ADDR
IP_ADDR_MASKTheipaddressand
wildcardbitsIPv4AddressandMask1719hostIP_ADDR Thehostwithaspecified
ipaddressIPv4Address
TIME-RANGE-NAME Thetime-rangeusedby
theextendIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendFLEXIPACL.i.e.when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMACfilteris110.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenythepackets
withsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denysrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyallthe
packets:1720Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denysrc-macany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenythepacket
whosesourceMACaddressisbetweentherangesspecified:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3denysrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.6.15permitsrc-mac
CommandPurpose
Usethiscommandtocreateafilterforallowingpacketsmatchingthefilterruletobe
delivered.
CommandSyntax
(SEQUENCE_NUM|)permitsrc-mac(any|MAC_ADDRMAC_ADDR_MASK|
hostMAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(vlanVLAN_ID|)(cosVALUE|)(inner-vlanINNER_VLAN_ID|)
(inner-cosINNER_COS|)(arp-packet((arp-op-code)(sender-ip(IP_ADDR
IP_ADDR_MASK|any|hostIP_ADDR)|)(target-ip(IP_ADDRIP_ADDR_MASK|
any|hostIP_ADDR)|))|packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -1721MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsMACandwildcardin
HHHH.HHHH.HHHH
format
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddressin
HHHH.HHHH.HHHH
format
dest-mac DestinationMACaddress-
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
arp ARPprotocol -
arp-op-code arp-op-code 0-65535
sender-ip sender-ip -
target-ip target-ip -
IP_ADDR
IP_ADDR_MASKTheipaddressand
wildcardbitsIPv4AddressandMask
hostIP_ADDR Thehostwithaspecified
ipaddressIPv4Address
TIME-RANGE-NAME Thetime-rangeusedby
theextendIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration1722Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendFLEXIPACL.i.e.when
themaximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdMACfilteris115.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitthe
packetswithsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-ac)#1permitsrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitallthe
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-ac)#2permitsrc-macany
ThisexampleshowshowtocreateafilterinFLEXMACACLtopermitthepackets
withsourceMACaddressbetweentherangesspecified:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3permitsrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.6.16deny
CommandPurpose
UsethiscommandtodiscardongoingIPpacketsmatchingtheIPfilter.1723CommandSyntax
(SEQUENCE_NUM|)deny(PROTO_NUM|any)(SRC_IPSRC_IP_MASK|any|
hostSRC_IP)(DST_IPDST_IP_MASK|any|hostDST_IP)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-31724non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None1725Usage
IfanIPaddresswildcardbitisprovided,theIPaddressislogically-andedinbitwise
withthereversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255means
theaddressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendFLEXIPACL.i.e.when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPfilteris110.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyIP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyanyanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenythe
fragmentpacketswiththesourceIPaddresss1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyanyhost1.1.1.1anyfragments
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyrouted
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#3denyanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.6.17denytcp
CommandPurpose
UsethiscommandtorejectTCPpacketsmatchingtheIPfilter.1726CommandSyntax
(SEQUENCE_NUM|)denytcp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(established|(match-any|match-allFLAG-NAME|)|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment)
(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1727OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -1728options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyTCP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denytcpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheTCP
packetswiththesourceIPaddress1.1.1.1,sourceport0-100:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denytcphost1.1.1.1src-portrange0100any
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyTCP
packetsinestablishedTCPstreams:1729Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#3denytcpanyanyestablished
ThisexampleshowshowtocreateafilerinextendFLEXIPACLtodenytheTCP
ACKpacketswiththesourceIPaddress10.10.10.10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#4denytcp10.10.10.00.0.0.0anymatch-anyack
RelatedCommands
nosequence-num
11.6.18denyudp
CommandPurpose
UsethiscommandtorejectUDPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyudp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|
non-first-fragment)(routed-packet|)(options|)(packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -1730hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-1731non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinFLEXIPACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denyudpanyany
ThisexampleshowshowtocreateafilterinFLEXIPACLtodenytheUDPpackets
withthesourceIP1.1.1.1,sourceport10,anddestinationportlessthan2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denyudphost1.1.1.1src-porteq10anydst-portlt20001732RelatedCommands
nosequence-num
11.6.19denyicmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyicmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(icmp-typeTYPE-NUM(icmp-code
CODE-NUM|)|)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
TYPE-NUM ICMPmessagetype 0-255
CODE-NUM ICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address1733hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration1734Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyUDP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyudpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheUDP
packetswiththesourceIP1.1.1.1,sourceport10,anddestinationportlessthan
2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyudphost1.1.1.1src-porteq10anydst-portlt2000
RelatedCommands
nosequence-num
11.6.20denyigmp
CommandPurpose
UsethiscommandtorejectIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denyigmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(IGMP-TYPE|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)1735Parameter ParameterDescriptionParameterValue
IGMP-TYPE IGMPtype includingdvmrp,host-
query,host-report,mtrace,
mtrace-response,pim,
precedence,trace,v2-
leave,v2-report,v3-report
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-1736non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyICMP
packets:1737Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyicmpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheICMP
packetswiththeicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyicmpanyanyicmp-type3icmp-code3
RelatedCommands
nosequence-num
11.6.21denygre
CommandPurpose
UsethiscommandtorejectGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denygre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(keyKEYmaskKEY-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-1310711738SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters1739OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtorejectGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyIGMP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1denyigmpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheIGMP
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-
typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2denyigmphost1.1.1.1anypim
RelatedCommands
nosequence-num174011.6.22denynvgre
CommandPurpose
UsethiscommandtorejectNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)denynvgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(vsidVSIDmaskVSID-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1741PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration1742Default
None
Usage
ThistypeoffilterismostlyusedtorejectNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyGRE
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denygreanyanykey0mask0
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheGRE
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandthegre
keyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denygrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.6.23permit
CommandPurpose
UsethiscommandtopermitpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permit(PROTO_NUM|any)(SRC_IPSRC_IP_MASK|any
|hostSRC_IP)(DST_IPDST_IP_MASK|any|hostDST_IP)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)1743Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to2550-255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-1744small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
IfanIPaddresswildcardbitisprovided,theIPaddressislogically-andedinbitwise
withthereversebitsofthewildcardbits.Forexample,10.10.10.00.0.0.255means
theaddressesfrom10.10.10.0to10.10.10.255arematched.
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendFLEXIPACL.i.e.when
themaximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdIPfilteris115.1745Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyany
NVGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1denynvgreanyanyvsid0mask0
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenythe
NVGREpacketswiththesourceIPaddress1.1.1.1,anydestinationIPaddressand
thenvgrevsidis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2denygrehost1.1.1.1anyvsid10mask0xffffff
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitany
routedpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#30permitanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.6.24permittcp
CommandPurpose
UsethiscommandtopermitTCPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permittcp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(established|(match-any|match-allFLAG-NAME|)|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment)
(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-range
TIME-RANGE-NAME|)1746Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-71747DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
established Matchestablished
connections-
match-any Matchanyoftheflag-
name-
FLAG-NAME Matchalltheflag-name,
includingack,fin,psh,rst,
synandurgack,fin,psh,rst,synand
urg
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilter-
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range1748LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitanyTCP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#10permittcpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermittheTCP
packetswiththesourceIPaddress1.1.1.1,andsourceportrangesfrom0to100:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#20permittcphost1.1.1.1src-portrange0100any
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitanyTCP
packetsinestablishedTCPstreams:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#30permittcpanyanyestablished
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermittheTCP
ACKpacketswiththesourceIPaddress10.10.10.0:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#4permittcp10.10.10.00.0.0.0anymatch-anyack1749RelatedCommands
nosequence-num
11.6.25permitudp
CommandPurpose
UsethiscommandtopermitUDPpacketswhenthepacketsmatchthisaccess-list.
CommandSyntax
(SEQUENCE_NUM|)permitudp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(src-portOPERATORSRC_PORT|)(DST_IPDST_IP_MASK|any|hostDST_IP)
(dst-portOPERATORDST_PORT|)(ip-precedencePRECEDENCE|dscpDSCP|)
(ecn<0-3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|
non-first-fragment)(routed-packet|)(options|)(packet-lengthOPERATOR
LENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPExtendACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address1750OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4AddressandMask
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-1751routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
theIPfilter-
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Thefragmentswillbeinvalidwhenthelayer4informationisspecified(i.e.src-port).
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenyanyUDP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permitudpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtodenytheUDP
packetswiththesourceIPaddress1.1.1.1,sourceport10,anddestinationportless
than2000:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permitudphost1.1.1.1src-porteq10anydst-portlt20001752RelatedCommands
nosequence-num
11.6.26permiticmp
CommandPurpose
UsethiscommandtopermitICMPpacketswhenthepacketsmatchthisaccess-list.
CommandSyntax
(SEQUENCE_NUM|)permiticmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(icmp-typeTYPE-NUM(icmp-code
CODE-NUM|)|)(ip-precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)
(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
icmp-typeTYPE-NUM ICMPmessagetype 0-255
icmp-codeCODE-NUMICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address1753hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration1754Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitanyICMP
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permiticmpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermittheICMP
packetswiththeicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permiticmpanyanyicmp-type3icmp-code3
RelatedCommands
None
11.6.27permitigmp
CommandPurpose
UsethiscommandtopermitIGMPpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitigmp(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(IGMP-TYPE|)(ip-precedence
PRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-fragment|non-
or-first-fragment|small-fragment|non-first-fragment)(routed-packet|)(options|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1755IGMP-TYPE IGMPtype includingdvmrp,host-
query,host-report,mtrace,
mtrace-response,pim,
precedence,trace,v2-
leave,v2-report,v3-report
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
PROTO_NUM AnIPprotocolnumber,the
rangeis0to2550-255
any Anyprotocol -
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-1756non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitanyIGMP
packets:1757Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#1permitigmpanyany
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermittheIGMP
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandtheigmp-
typepim:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#2permitigmphost1.1.1.1anypim
RelatedCommands
nosequence-num
11.6.28permitgre
CommandPurpose
UsethiscommandtopermitGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(keyKEYmaskKEY-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-1310711758SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
hostIPv4Address
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address
PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters1759OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
ThistypeoffilterismostlyusedtopermitGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitanyGRE
packets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1permitgreanyanykey0mask0
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermittheGRE
packetswiththesourceIPaddress1.1.1.1,anydestinationIPaddressandthegre
keyis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2permitgrehost1.1.1.1anykey10mask0xffffffff
RelatedCommands
nosequence-num176011.6.29permitnvgre
CommandPurpose
UsethiscommandtopermitNVGREpacketsmatchingtheIPfilter.
CommandSyntax
(SEQUENCE_NUM|)permitnvgre(SRC_IPSRC_IP_MASK|any|hostSRC_IP)
(DST_IPDST_IP_MASK|any|hostDST_IP)(vsidVSIDmaskVSID-MASK)(ip-
precedencePRECEDENCE|dscpDSCP|)(ecn<0-3>|)(non-fragment|first-
fragment|non-or-first-fragment|small-fragment|non-first-fragment|)(routed-
packet|)(options|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
VSID NVGREvsid 0-16777215
VSID-MASK NVGREvsidmask 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinFLEXIPACL.
Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
SRC_IPSRC_IP_MASKThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnysourceIPaddress-
hostSRC_IP ThesourceIPaddressofa
host-
DST_IPDST_IP_MASKThedestinationIPaddress
anditswildcardbitsIPv4Address
hostDST_IP ThedestinationIPaddress
ofahostIPv4Address1761PRECEDENCE Matchpacketswithgiven
precedencevalue0-7
DSCP Matchpacketswithgiven
dscpvalue0-63
ECN ecnvalue 0-3
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
routed-packet Matchroutedpacket -
options MatchpacketswithIP
options-
TIME-RANGE-NAME Thetime-rangeusedby
thefilterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPACLConfiguration1762Default
None
Usage
ThistypeoffilterismostlyusedtopermitNVGREpackets.
Examples
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitany
NVGREpackets:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#1permitnvgreanyanyvsid0mask0
ThisexampleshowshowtocreateafilterinextendFLEXIPACLtopermitthe
NVGREpacketswiththesourceIPaddress1.1.1.1,anydestinationIPaddressand
thenvgrevsidis10:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acl)#2permitgrehost1.1.1.1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.6.30remark
CommandPurpose
UsethiscommandtoaddremarksfortheextendFLEXIPACL.
ToremoveremarksfromtheextendFLEXIPACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue1763REMARK Theremarksoftheextend
FLEXIPACLAstringwithupto100
characters
CommandMode
FLEXIPACLConfiguration
Default
None
Usage
Theremarkisupto100characters.
Examples
ThisexampleshowshowtoaddaremarktodescribetheextendFLEXIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#remarkremard0flist1
ThisexampleshowshowtoremovetheremarkfromtheextendFLEXIPACL:
Switch#configureterminal
Switch(config)#ipaccess-listlist_ipv4_1extend
Switch(config-ex-ip-acll)#noremark
RelatedCommands
None
11.6.31mplsaccess-listtemplate
CommandPurpose
UsethiscommandtocreateFLEXMPLSACLandthenenterFLEXMPLSACLin
globalconfigurationmode.
CommandSyntax
mplsaccess-listACL_NAMEtemplateTEMPALTE_NAME1764nomplsaccess-listACL_NAMEtemplate
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheFLEX
MPLSACLAstringwithupto40
characters
TEMPALTE_NAME Thenameofthemac-ip
ACCESS-LIST-TEMPLATEAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasaFLEXMPLSACLwiththesamename,thiscommandwill
entertheFLEXMPLSACLConfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheFLEXMPLS
ACLfirstlyandthenentertheFLEXMPLSACLConfigurationmode.
Examples
ThisexampleshowshowtocreateanFLEXMPLSACLnamedlist_mpls_1andthen
entertheMPLSACLConfigurationmode,usingamac-iptemplatenamedtemp_1:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1templatetemp_1
Switch(config-mpls-acl)#
ThisexampleshowshowtoremovetheMPLSACLnamedlist_mpls_1:
Switch#configureterminal
Switch(config)#nomplsaccess-listlist_mpls_1template
RelatedCommands
matchaccess-group176511.6.32sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromMPLSACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
MPLSfilter1-131071
CommandMode
MPLSACLConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromMPLS
ACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#nosequence-num10
RelatedCommands
deny
permit176611.6.33remark
CommandPurpose
UsethiscommandtoaddremarksfortheMPLSACL.
ToremoveremarksoftheMPLSACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheMPLS
ACLStringwithupto100
characters
CommandMode
MPLSACLConfiguration
Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheMPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#remarkremarkoflistformpls
ThisexampleshowshowtoremovetheremarkoftheMPLSACL:1767Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#noremark
RelatedCommands
mplsaccess-list
11.6.34showaccess-listmpls
CommandPurpose
UsethiscommandtoshowtheMPLSACLinformation.
CommandSyntax
showaccess-listmpls(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheMPLS
ACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnomplsaclarespecified,allmplsaccess-listsinthesystemshouldbeshown.
Examples
ThisexampleshowshowtoshowtheMPLSACLinformation:
Switch#showaccess-listmplstemplate
mplsaccess-listlist_mpls_1
10permittopmost-label1next-label2
20denytopmost-labelany1768RelatedCommands
mplsaccess-list
11.6.35deny
CommandPurpose
UsethiscommandtodiscardongoingMPLSpacketsmatchingtheMPLSfilter.
CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinMPLSACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters1769CommandMode
MPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtodenyanyMPLSpackets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#1denytopmost-labelany
ThisexampleshowshowtocreateafilterinMPLSACLtodenyanyMPLSpackets
withfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2denytopmost-label1next-label2
RelatedCommands
nosequence-num
11.6.36permit
CommandPurpose
UsethiscommandtopermitongoingMPLSpacketsmatchingtheMPLSfilter.1770CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
MPLSACLConfiguration
Default
None1771Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtopermitanyMPLSpackets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#1permittopmost-labelany
ThisexampleshowshowtocreateafilterinMPLSACLtopermitanyMPLSpackets
withfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2permittopmost-label1next-label2
RelatedCommands
nosequence-num
11.6.37showaccess-listiptemplate
CommandPurpose
UsethiscommandtoshowtheinformationofFLEXIPACL.
CommandSyntax
showaccess-listiptemplate(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheFLEXIP
ACLAstringwithupto40
characters1772CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowtheinformationofFLEXIPACL:
Switch#showaccess-listiptemplate
ipaccess-listlist_ipv4_1templatetemplate1
2permittcphost1.1.1.1any
3denyicmpanyany
12permittcpanyany
RelatedCommands
ipaccess-listtemplate
11.7ACLv6Commands
11.7.1ipv6access-list
CommandPurpose
UsethiscommandtocreateIPv6ACLandthenenterIPv6ACLinglobal
configurationmode.
CommandSyntax
ipv6access-listACL_NAME
noipv6access-listACL_NAME
Parameter ParameterDescriptionParameterValue1773ACL_NAME ThenameoftheIPv6ACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanIPv6ACLwiththesamename,thiscommandwillenter
theIPv6ACLconfigurationmode.However,iftheACLnameisusedbyothertypeof
ACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheIPv6ACL
firstlyandthenentertheIPv6ACLconfigurationmode.
Examples
ThisexampleshowshowtocreateanIPv6ACLnamedlist_ipv6_1andthenenter
theIPv6ACLconfigurationmode:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#
ThisexampleshowshowtoremovetheIPv6ACLnamedlist_ipv6_1:
Switch#configureterminal
Switch(config)#noipv6access-listlist_ipv6_1
RelatedCommands
matchaccess-group
11.7.2sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromIPv6ACL.1774CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
IPv6filterTherangeis1to131071
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromIPv6ACL:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#nosequence-num10
RelatedCommands
deny
denytcp
denyudp
denyicmp
permit
permittcp
permitudp1775permiticmp
11.7.3remark
CommandPurpose
UsethiscommandtoaddremarksfortheIPv6ACL.
ToremoveremarksoftheIPv6ACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheIPv6
ACLStringwithupto100
characters
CommandMode
IPv6ACLConfiguration
Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheIPv6ACL:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#remarkremarkofListforipv6
ThisexampleshowshowtoremovetheremarkoftheIPv6ACL:1776Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#noremark
RelatedCommands
ipv6access-list
11.7.4deny
CommandPurpose
UsethiscommandtodiscardongoingIPv6packetsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)deny(PROTO_NUM|any)(SRC_IPV6SRC_IPV6_MASK|
any|hostSRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-
labelFLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPv6protocolnumber0-255
any AnyIPv6protocol -
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address1777DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration1778Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPv6ACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPv6filteris110.
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyIPv6packets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyanyanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyroutedpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.7.5denytcp
CommandPurpose
UsethiscommandtorejectTCPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denytcp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(flow-label
FLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|small-1779fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
flow-labelFLOW_LABELFlowlabelnumber 0-10485751780non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None1781Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyTCPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denytcpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheTCPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denytcphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.7.6denyudp
CommandPurpose
UsethiscommandtorejectUDPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denyudp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(flow-label
FLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711782SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-1783non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyudpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheUDPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyudphost2001::2020src-porteq8080any1784RelatedCommands
nosequence-num
11.7.7denyicmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denyicmp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(flow-labelFLOW_LABEL|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment|)
(dscpDSCP|)(routed-packet|)(packet-lengthOPERATORLENGTH|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
TYPE-NUM ICMPmessagetype 0-255
CODE-NUM ICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length1785hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None1786Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyICMPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyicmpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheICMPpacketswith
theicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyicmpanyanyicmp-type3icmp-code3
RelatedCommands
nosequence-num
11.7.8denygre
CommandPurpose
UsethiscommandtorejectGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denygre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(keyKEYmaskKEY-MASK)(dscpDSCP|)(ecn<0-3>
|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
KEY GREkey 0-42949672951787KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
IPv6ACLConfiguration1788Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denygreanyanykey0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denygrehost2000::1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.7.9denynvgre
CommandPurpose
UsethiscommandtorejectNVGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denynvgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(vsidVSIDmaskVSID-MASK)(dscpDSCP|)(ecn<0-
3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-
first-fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH
|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
VSID NVGREVSID 0-167772151789VSID-MASK NVGREVSIDMASK 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
IPv6ACLConfiguration1790Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denynvgreanyanyvsid0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denygrehost2000::1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.7.10permit
CommandPurpose
UsethiscommandtopermitongoingIPv6packetsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permit(PROTO_NUM|any)(SRC_IPV6SRC_IPV6_MASK
|any|hostSRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)
(flow-labelFLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|
small-fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-
lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1791SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPv6protocolnumber0-255
any AnyIPv6protocol -
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-631792routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATORLENGTHPacketlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPv6ACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPv6filteris110.
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyIPv6packets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitanyanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyroutedpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitanyanyanyrouted-packet1793RelatedCommands
nosequence-num
11.7.11permittcp
CommandPurpose
UsethiscommandtopermitTCPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permittcp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(flow-label
FLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address1794OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -1795TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyTCPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permittcpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheTCPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permittcphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num179611.7.12permitudp
CommandPurpose
UsethiscommandtopermitUDPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permitudp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(flow-label
FLOW_LABEL|)(non-fragment|first-fragment|non-or-first-fragment|small-
fragment|non-first-fragment|)(dscpDSCP|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length1797hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-
small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-163821798CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyUDPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitudpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheUDPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitudphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.7.13permiticmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permiticmp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(flow-labelFLOW_LABEL|)(non-
fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-fragment|)1799(dscpDSCP|)(routed-packet|)(packet-lengthOPERATORLENGTH|)(time-
rangeTIME-RANGE-NAME|)
permit
Parameter ParameterDescriptionParameterValue
icmp-typeTYPE-NUM ICMPmessagetype 0-255
icmp-codeCODE-NUMICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
flow-labelFLOW_LABELFlowlabelnumber 0-1048575
non-fragment Matchpacketswithnon
fragment-
first-fragment Matchpacketswithfirst
fragment-
non-or-first-fragment Matchpacketswithnon
firstfragment-1800small-fragment Matchpacketswithsmall
fragment-
non-first-fragment Matchpacketswithnon
firstfragment-
DSCP Matchpacketswithgiven
dscpvalue0-63
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyICMPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permiticmpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheICMPpackets
withtheicmp-type3andicmp-code3:1801Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permiticmpanyanyicmp-type3icmp-code3
RelatedCommands
nosequence-num
11.7.14permitgre
CommandPurpose
UsethiscommandtopermitGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permitgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(keyKEYmaskKEY-MASK)(dscpDSCP|)(ecn<0-3>
|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
denygre
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length1802any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitgreanyanykey0mask0
Switch#configureterminal1803Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitgrehost2000::1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.7.15permitnvgre
CommandPurpose
UsethiscommandtopermitNVGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permitnvgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(vsidVSIDmaskVSID-MASK)(dscpDSCP|)(ecn<0-
3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-
first-fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH
|)(time-rangeTIME-RANGE-NAME|)
denynvgre
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
VSID NVGREVSID 0-16777215
VSID-MASK NVGREVSIDMASK 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -1804hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
IPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitnvgreanyanyvsid0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitgrehost2000::1anyvsid10mask0xffffff1805RelatedCommands
nosequence-num
11.7.16showaccess-listipv6
CommandPurpose
UsethiscommandtoshowtheIPv6ACLinformation.
CommandSyntax
showaccess-listipv6(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheIPv6ACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnoipv6aclarespecified,allipv6access-listsinthesystemshouldbeshown.
Examples
ThisexampleshowshowtoshowtheIPv6ACLinformation:
Switch#showaccess-listipv6
ipv6access-listlist_ipv6_1
10denyany2001::/48any
20permitanyanyany1806RelatedCommands
ipv6access-list
11.8FLEXACLv6Commands
11.8.1ipv6access-list-template
CommandPurpose
UsethiscommandtocreateACLtemplateforipv6acl.andthenenteripv6ACL
templateconfigurationmode.Usenoipv6access-listtemplatecommandtodelete
theACLtemplate.
CommandSyntax
ipv6access-list-templateTEMPALTE_NAME
Parameter ParameterDescriptionParameterValue
TEMPALTE_NAME Thenameoftheipv6
ACCESS-LIST-TEMPLATEAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Ifthesystemalreadyhasaipv6access-list-templatewiththesamename,this
commandwillentertheipv6access-list-templateconfigurationmode.However,ifthe
ACLtemplatenameisusedbyothertypeofACLtemplate,apromptmessagewillbe
shown.1807WhenthenameisnotusedbyanyACLtemplate,thiscommandistocreatetheipv6
access-list-templatefirstlyandthenentertheipv6access-list-templateconfiguration
mode.
Examples
Thisexampleshowshowtocreateaipv6access-list-templatenamed
ipv6_tempalte_1andthenentertheIPv6ACLTEMPLATEconfigurationmode:
Switch#configureterminal
Switch(config)#ipv6access-list-templateipv6_template_1
Switch(config-acl-ipv6-template)#
RelatedCommands
None
11.8.2mac-field
CommandPurpose
Usethiscommandtocreatemacfieldforipv6access-list-template
CommandSyntax
mac-field{src-mac|dest-mac|vlan|inner-vlan|cos|inner-cos|untag|ether-type}
nomac-field{src-mac|dest-mac|vlan|inner-vlan|cos|inner-cos|untag|ether-
type|}
Parameter ParameterDescriptionParameterValue
src-mac SourceMACaddress -
dest-mac DestinationMACaddress-
vlan VLAN-ID -
inner-vlan InnerVLAN-ID -
cos CoSValue -
inner-cos InnerCoSvalue -1808untag Withoutvlantag -
CommandMode
IPv6ACLTEMPLATEConfiguration
Default
None
Usage
configureofmacfieldsofipv6ACLtemplate,oneormorecanbeselectedata
time;Usethenomac-fieldcommandtodeletethecorrespondingmacfield,ifnomac
fieldisadded,itmeansthatallmacfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsrc-macanddest-macfieldtotheipv6ACLtemplate:
Switch#configureterminal
Switch(config-acl-ipv6-template)#mac-fieldsrc-macdest-mac
RelatedCommands
None
11.8.3ip-field
CommandPurpose
Usethiscommandtocreateipfieldforipv6access-list-template
CommandSyntax
ip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port|
l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length|flow-label}1809noip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port
|l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length|flow-label|}
Parameter ParameterDescriptionParameterValue
src-ip SourceIPaddress -
dest-ip DestinationIPaddress-
dscp DSCPID -
l4-protocol L4Protocol -
ip-option IPoptions -
tcp-flag TCPFlag -
l4-src-port L4sourceport -
l4-src-port-range rangeofL4sourceport-
l4-dest-port L4destinationport -
l4-dest-port-range rangeofL4destination
port-
icmp-type ICMPmessagetype -
icmp-code ICMPmessagecode -
igmp-type IGMPmessagetype -
vni VirtualNetworkIdentifier-
gre-key GREKEY -
packet-length packetlength -
flow-label FlowLabel -
CommandMode
IPv6ACLTEMPLATEConfiguration1810Default
None
Usage
configureofipfieldsofipv6ACLtemplate,oneormorecanbeselectedatatime;Use
thenoip-fieldcommandtodeletethecorrespondingipfield,ifnomacfieldis
added,itmeansthatallipfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsrc-ipanddest-ipfieldtotheipv6ACLtemplate:
Switch#configureterminal
Switch(config-acl-ipv6-template)#ip-fieldsrc-ipdest-ip
RelatedCommands
None
11.8.4extra-field
CommandPurpose
Usethiscommandtocreateextrafieldforipv6access-list-template
CommandSyntax
extra-field{routed-packet|vsid|vrf}
noextra-field{routed-packet|vsid|vrf|}
Parameter ParameterDescriptionParameterValue
routed-packet routedpacket -
vsid NVGREVSID -
vrf VPNRouting/Forwarding
instance-1811CommandMode
IPv6ACLTEMPLATEConfiguration
Default
None
Usage
configureofextrafieldsofipv6ACLtemplate,oneormorecanbeselectedata
time;Usethenoextra-fieldcommandtodeletethecorrespondingarpfield,ifnoarp
fieldisadded,itmeansthatallextrafieldsaredeleted.
Examples
Thisexampleshowshowtoaddrouted-packetfieldtotheipv6ACLtemplate:
Switch#configureterminal
Switch(config-acl-ipv6-template)#extra-fieldrouted-packet
RelatedCommands
None
11.8.5ipv6access-listtemplate
CommandPurpose
UsethiscommandtocreateFLEXIPv6ACLandthenenterFLEXIPv6ACLinglobal
configurationmode.Usenoipv6access-listtemplatecommandtodeletetheFLEX
IPv6ACL.
CommandSyntax
ipv6access-listACL_NAMEtemplateTEMPLATE_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheFLEX
IPv6ACLAstringwithupto40
characters1812TEMPLATE_NAME Thenameoftheipv6
ACCESS-LIST-TEMPLATEAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasaFLEXIPv6ACLwiththesamename,thiscommandwill
entertheFLEXIPv6ACLconfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheFLEXIPv6
ACLfirstlyandthenentertheFLEXIPv6ACLconfigurationmode.
Examples
ThisexampleshowshowtocreateaFLEXIPv6ACLnamedflex_list_ipv6_1with
templatenamedipv6_template_1,andthenentertheFLEXIPv6ACLconfiguration
mode:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1templateipv6_template_1
Switch(config-acl-ipv6-template)#
RelatedCommands
matchaccess-group
11.8.6sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromIPv6ACL.1813CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
IPv6filterTherangeis1to131071
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromIPv6ACL:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#nosequence-num10
RelatedCommands
deny
denytcp
denyudp
denyicmp
permit
permittcp
permitudp1814permiticmp
11.8.7remark
CommandPurpose
UsethiscommandtoaddremarksfortheIPv6ACL.
ToremoveremarksoftheIPv6ACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheIPv6
ACLStringwithupto100
characters
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheIPv6ACL:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#remarkremarkofListforipv6
ThisexampleshowshowtoremovetheremarkoftheIPv6ACL:1815Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#noremark
RelatedCommands
ipv6access-list
11.8.8deny
CommandPurpose
UsethiscommandtodiscardongoingIPv6packetsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)deny(PROTO_NUM|any)(SRC_IPV6SRC_IPV6_MASK|
any|hostSRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)
(routed-packet|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPv6protocolnumber0-255
any AnyIPv6protocol -
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length1816hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPv6ACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPv6filteris110.
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyIPv6packets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyanyanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyroutedpackets:1817Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.8.9denytcp
CommandPurpose
UsethiscommandtorejectTCPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denytcp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(routed-packet|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address1818OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None1819Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyTCPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denytcpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheTCPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denytcphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.8.10denyudp
CommandPurpose
UsethiscommandtorejectUDPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denyudp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(routed-packet|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1820SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters1821OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyUDPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyudpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheUDPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyudphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.8.11denyicmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPv6filter.1822CommandSyntax
(SEQUENCE_NUM|)denyicmp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
TYPE-NUM ICMPmessagetype 0-255
CODE-NUM ICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range1823LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtodenyanyICMPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denyicmpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtodenytheICMPpacketswith
theicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denyicmpanyanyicmp-type3icmp-code3
RelatedCommands
nosequence-num
11.8.12denygre
CommandPurpose
UsethiscommandtorejectGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denygre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label1824FLOW-LABEL-VALUE|)(keyKEYmaskKEY-MASK)(dscpDSCP|)(ecn<0-3>
|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range1825LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denygreanyanykey0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denygrehost2000::1anykey10mask0xffffffff
RelatedCommands
nosequence-num
11.8.13denynvgre
CommandPurpose
UsethiscommandtorejectNVGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)denynvgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(vsidVSIDmaskVSID-MASK)(dscpDSCP|)(ecn<0-
3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-1826first-fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH
|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
VSID NVGREVSID 0-16777215
VSID-MASK NVGREVSIDMASK 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-163821827ECN ecnvalue 0-3
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1denynvgreanyanyvsid0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2denygrehost2000::1anyvsid10mask0xffffff
RelatedCommands
nosequence-num
11.8.14permit
CommandPurpose
UsethiscommandtopermitongoingIPv6packetsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permit(PROTO_NUM|any)(SRC_IPV6SRC_IPV6_MASK
|any|hostSRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)
(routed-packet|)(packet-lengthOPERATORLENGTH|)(time-rangeTIME-
RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1828SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
PROTO_NUM AnIPv6protocolnumber0-255
any AnyIPv6protocol -
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATORLENGTHPacketlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None1829Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheIPv6ACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdIPv6filteris110.
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyIPv6packets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitanyanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyroutedpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitanyanyanyrouted-packet
RelatedCommands
nosequence-num
11.8.15permittcp
CommandPurpose
UsethiscommandtopermitTCPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permittcp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(routed-packet|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1830SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters1831OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyTCPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permittcpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheTCPpacketswith
thesourceIPv6address2001::2020,sourceport8080:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permittcphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.8.16permitudp
CommandPurpose
UsethiscommandtopermitUDPpacketsmatchingtheIPv6filter.1832CommandSyntax
(SEQUENCE_NUM|)permitudp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(src-portOPERATORSRC_PORT|)(DST_IPV6DST_IPV6_MASK|
any|hostDST_IPV6)(dst-portOPERATORDST_PORT|)(routed-packet|)
(packet-lengthOPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anydestinationhost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
OPERATORSRC_PORTSourceportoperatorand
valueSourceport,therangeis
0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address1833OPERATORDST_PORTDestinationportoperator
andvalueDestinationport,therange
is0-65535.Operator
includingeq(equalto),lt
(lessthan),gt(greater
than),neq(notequalto)
andrange
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyUDPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitudpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheUDPpacketswith
thesourceIPv6address2001::2020,sourceport8080:1834Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitudphost2001::2020src-porteq8080any
RelatedCommands
nosequence-num
11.8.17permiticmp
CommandPurpose
UsethiscommandtorejectICMPpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permiticmp(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(icmp-type
TYPE-NUM(icmp-codeCODE-NUM|)|)(routed-packet|)(packet-length
OPERATORLENGTH|)(time-rangeTIME-RANGE-NAME|)
permit
Parameter ParameterDescriptionParameterValue
icmp-typeTYPE-NUM ICMPmessagetype 0-255
icmp-codeCODE-NUMICMPmessagecode 0-255
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -
hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address1835DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtocreateafilterinIPv6ACLtopermitanyICMPpackets:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permiticmpanyany
ThisexampleshowshowtocreateafilterinIPv6ACLtopermittheICMPpackets
withtheicmp-type3andicmp-code3:
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permiticmpanyanyicmp-type3icmp-code31836RelatedCommands
nosequence-num
11.8.18permitgre
CommandPurpose
UsethiscommandtopermitGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permitgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(keyKEYmaskKEY-MASK)(dscpDSCP|)(ecn<0-3>
|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-first-
fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH|)
(time-rangeTIME-RANGE-NAME|)
denygre
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
KEY GREkey 0-4294967295
KEY-MASK GREkeymask 0-0xFFFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -1837hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitgreanyanykey0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitgrehost2000::1anykey10mask0xffffffff1838RelatedCommands
nosequence-num
11.8.19permitnvgre
CommandPurpose
UsethiscommandtopermitNVGREpacketsmatchingtheIPv6filter.
CommandSyntax
(SEQUENCE_NUM|)permitnvgre(SRC_IPV6SRC_IPV6_MASK|any|host
SRC_IPV6)(DST_IPV6DST_IPV6_MASK|any|hostDST_IPV6)(flow-label
FLOW-LABEL-VALUE|)(vsidVSIDmaskVSID-MASK)(dscpDSCP|)(ecn<0-
3>|)(non-fragment|first-fragment|non-or-first-fragment|small-fragment|non-
first-fragment|)(routed-packet|)(options|)(packet-lengthOPERATORLENGTH
|)(time-rangeTIME-RANGE-NAME|)
denynvgre
Parameter ParameterDescriptionParameterValue
FLOW-LABEL-VALUEFlowlabel 0-1048575
VSID NVGREVSID 0-16777215
VSID-MASK NVGREVSIDMASK 0-0xFFFFFF
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
SRC_IPV6
SRC_IPV6_MASKThesourceIPv6prefix
addressIPv6Addressandmask
length
any Anysourcehost -1839hostSRC_IPV6 ThesourceIPv6address
ofahostIPv6Address
DST_IPV6
DST_IPV6_MASKThedestinationIPv6prefix
addressIPv6Addressandmask
length
hostDST_IPV6 ThedestinationIPv6
addressofahostIPv6Address
routed-packet Matchroutedpacket -
TIME-RANGE-NAME Thetime-rangeusedby
theIPv6filterAstringwithupto40
characters
OPERATOR Packetlength,operator
includingeq(equalto),lt
(lessthan),gt(greater
than),andrangeeq(equalto),lt(lessthan),
gt(greaterthan),and
range
LENGTH Thelengthvalue 64-16382
ECN ecnvalue 0-3
CommandMode
FLEXIPv6ACLConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#1permitnvgreanyanyvsid0mask0
Switch#configureterminal
Switch(config)#ipv6access-listlist_ipv6_1
Switch(config-ipv6-acl)#2permitgrehost2000::1anyvsid10mask0xffffff1840RelatedCommands
nosequence-num
11.8.20showaccess-listipv6
CommandPurpose
UsethiscommandtoshowtheIPv6ACLinformation.
CommandSyntax
showaccess-listipv6template(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheflexIPv6
ACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnoipv6aclarespecified,allipv6access-listsinthesystemshouldbeshown.
Examples
ThisexampleshowshowtoshowtheIPv6ACLinformation:
Switch#showaccess-listipv6template
ipv6access-listlist_ipv6_1templatetemplate1
10denyany2001::/48any
20permitanyanyany1841RelatedCommands
ipv6access-listtemplate
11.9PortGroupCommands
11.9.1port-group
CommandPurpose
Usethiscommandtocreateportgroupandthenenterportgroupinglobal
configurationmode.Usenoport-groupcommandtodeletetheportgroup.
CommandSyntax
port-groupPORT_GROUP_NAME
noport-groupPORT_GROUP_NAME
Parameter ParameterDescriptionParameterValue
PORT_GROUP_NAMEThenameoftheport
groupAstringwithupto32
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Ifthesystemalreadyhasaportgroupwiththesamename,thiscommandwillenter
theportgroupconfigurationmode.
Whenthenameisnotusedbyanyportgroup,thiscommandistocreatetheport
groupfirstlyandthenentertheportgroupconfigurationmode.1842Examples
Thisexampleshowshowtocreateaportgroupnamedport_group_1andthenenter
theportgroupconfigurationmode:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#
Thisexampleshowshowtoremovetheportgroupnamedlist_mac_1:
Switch#configureterminal
Switch(config)#noport-groupport_group_1
RelatedCommands
None
11.9.2memberinterface
CommandPurpose
Usethiscommandtoaddaphysicalinterfaceoranaggregationinterfacetoport
group.Usenomemberinterfacecommandtodeletethephysicalinterfaceor
aggregationinterface.
CommandSyntax
memberinterface(IFPHYSICAL|IFAGG)
nomemberinterface
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Thenameofthephysical
interfaceSupportphysicalports
IFAGG Thenameofthe
aggregationinterfaceSupportaggregationports
CommandMode
Port-groupConfiguration1843Default
None
Usage
Iftheinterfaceisalreadyanaggregationmemberinterface,itcannotbeadded.Ifthe
interfacehasalreadybeenaddedtoanotherportgroup,itcannotbeadded.
Examples
Thisexampleshowshowtocreateamemberinterface:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#memberinterfaceeth-0-1
Thisexampleshowshowtoremovethememberinterface:
Switch#configureterminal
Switch(config)#port-groupport_group_1
Switch(config-port-group)#nomemberinterfaceeth-0-1
RelatedCommands
None
11.10VlanGroupCommands
11.10.1vlan-group
CommandPurpose
Usethiscommandtocreatevlangroupandthenentervlangroupinglobal
configurationmode.Usenovlan-groupcommandtodeletethevlangroup.
CommandSyntax
vlan-groupVLAN_GROUP_NAME
novlan-groupVLAN_GROUP_NAME
Parameter ParameterDescriptionParameterValue1844VLAN_GROUP_NAMEThenameofthevlan
groupAstringwithupto32
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Ifthesystemalreadyhasavlangroupwiththesamename,thiscommandwillenter
thevlangroupconfigurationmode.
Whenthenameisnotusedbyanyvlangroup,thiscommandistocreatethevlan
groupfirstlyandthenenterthevlangroupconfigurationmode.
Examples
Thisexampleshowshowtocreateavlangroupnamedvlan_group_1andthenenter
thevlangroupconfigurationmode:
Switch#configureterminal
Switch(config)#vlan-groupvlan_group_1
Switch(config-vlan-group)#
Thisexampleshowshowtoremovethevlangroupnamedvlan_group_1:
Switch#configureterminal
Switch(config)#novlan-groupvlan_group_1
RelatedCommands
None
11.10.2menbervlan
CommandPurpose
Usethiscommandtoaddavlantovlangroup.Usenomembervlancommandto
deletethevlan.1845CommandSyntax
membervlanVLAN_ID
nomembervlan
Parameter ParameterDescriptionParameterValue
VLAN_ID Thevlanid 1-4094
CommandMode
Vlan-groupConfiguration
Default
None
Usage
Ifthevlanhasalreadybeenaddedtoanothervlangroup,itcannotbeadded.
Examples
Thisexampleshowshowtocreateamembervlan:
Switch#configureterminal
Switch(config)#vlan-groupvlan_group_1
Switch(config-vlan-group)#membervlan10
Thisexampleshowshowtoremovethemembervlan:
Switch#configureterminal
Switch(config)#vlan-groupvlan_group_1
Switch(config-vlan-group)#nomembervlan10
RelatedCommands
None184611.11MPLSACLCommands
11.11.1mplsaccess-list
CommandPurpose
UsethiscommandtocreateMPLSACLandthenenterMPLSACLinglobal
configurationmode.
CommandSyntax
mplsaccess-listACL_NAME
nomplsaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheMPLS
ACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanMPLSACLwiththesamename,thiscommandwill
entertheMPLSACLConfigurationmode.However,iftheACLnameisusedbyother
typeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheMPLSACL
firstlyandthenentertheMPLSACLConfigurationmode.
Examples
ThisexampleshowshowtocreateanMPLSACLnamedlist_mpls_1andthenenter
theMPLSACLConfigurationmode:1847Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#
ThisexampleshowshowtoremovetheMPLSACLnamedlist_mpls_1:
Switch#configureterminal
Switch(config)#nomplsaccess-listlist_mpls_1
RelatedCommands
matchaccess-group
11.11.2sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromMPLSACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
MPLSfilter1-131071
CommandMode
MPLSACLConfiguration
Default
None
Usage
None1848Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromMPLS
ACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#nosequence-num10
RelatedCommands
deny
permit
11.11.3remark
CommandPurpose
UsethiscommandtoaddremarksfortheMPLSACL.
ToremoveremarksoftheMPLSACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheMPLS
ACLStringwithupto100
characters
CommandMode
MPLSACLConfiguration
Default
None1849Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheMPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#remarkremarkoflistformpls
ThisexampleshowshowtoremovetheremarkoftheMPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#noremark
RelatedCommands
mplsaccess-list
11.11.4showaccess-listmpls
CommandPurpose
UsethiscommandtoshowtheMPLSACLinformation.
CommandSyntax
showaccess-listmpls(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheMPLS
ACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC1850Default
None
Usage
Ifnomplsaclarespecified,allmplsaccess-listsinthesystemshouldbeshown.
Examples
ThisexampleshowshowtoshowtheMPLSACLinformation:
Switch#showaccess-listmpls
mplsaccess-listlist_mpls_1
10permittopmost-label1next-label2
20denytopmost-labelany
RelatedCommands
mplsaccess-list
11.11.5deny
CommandPurpose
UsethiscommandtodiscardongoingMPLSpacketsmatchingtheMPLSfilter.
CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)next-label|)(MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1851SEQUENCE_NUM Thesequencenumberof
thefilterinMPLSACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
MPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtodenyanyMPLSpackets:1852Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#1denytopmost-labelany
ThisexampleshowshowtocreateafilterinMPLSACLtodenyanyMPLSpackets
withfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2denytopmost-label1next-label2
RelatedCommands
nosequence-num
11.11.6permit
CommandPurpose
UsethiscommandtopermitongoingMPLSpacketsmatchingtheMPLSfilter.
CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)next-label|)(MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -1853MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
MPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtopermitanyMPLSpackets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#1permittopmost-labelany
ThisexampleshowshowtocreateafilterinMPLSACLtopermitanyMPLSpackets
withfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2permittopmost-label1next-label21854RelatedCommands
nosequence-num
11.11.7deny
CommandPurpose
UsethiscommandtodiscardongoingMPLSpacketsmatchingtheforwardMPLS
filter.
CommandSyntax
(SEQUENCE_NUM|)denyforward-label(MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinMPLSACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
forward-label mplsforwardlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
MPLSACLConfiguration1855Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtodenyanyMPLSpackets
withforwardlabelis1:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2denyforward-label1
RelatedCommands
nosequence-num
11.11.8permit
CommandPurpose
UsethiscommandtopermitongoingMPLSpacketsmatchingtheMPLSfilter.
CommandSyntax
(SEQUENCE_NUM|)denyforward-label(MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1856SEQUENCE_NUM Thesequencenumberof
thefilterinIPv6ACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
forward-label mplsforwardlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
MPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheMPLSACL.Forexample,when
themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinMPLSACLtopermitanyMPLSpackets
withforwardlabelis1:1857Switch#configureterminal
Switch(config)#mplsaccess-listlist_mpls_1
Switch(config-mpls-acl)#2permitforward-label1
RelatedCommands
nosequence-num
11.12ExtendMPLSACLCommands
11.12.1mplsaccess-listextend
CommandPurpose
UsethiscommandtocreateExtendMPLSACLandthenenterExtendMPLSACLin
globalconfigurationmode.
CommandSyntax
mplsaccess-listACL_NAMEextend
nomplsaccess-listACL_NAMEextend
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheExtend
MPLSACLAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasanExtendMPLSACLwiththesamename,thiscommand
willentertheMPLSACLconfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.1858WhenthenameisnotusedbyanyACL,thiscommandistocreatetheExtendMPLS
ACLfirstlyandthenentertheExtendMPLSACLconfigurationmode.
Examples
ThisexampleshowshowtocreateanExtendMPLSACLnamedlist_ex_mpls_1and
thenentertheExtendMPLSACLconfigurationmode:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#
ThisexampleshowshowtoremovetheExtendMPLSACLnamedlist_ex_mpls_1:
Switch#configureterminal
Switch(config)#nomplsaccess-listlist_ex_mpls_1extend
RelatedCommands
matchaccess-group
11.12.2sequence-num
CommandPurpose
UsethiscommandtoremoveafilterfromExtendMPLSACL.
CommandSyntax
nosequence-numSEQUENCE_NUM
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberofa
ExtendMPLSfilterTherangeis1to131071
CommandMode
ExtendedMPLSACLConfiguration
Default
None1859Usage
None
Examples
Thisexampleshowshowtoremoveafilterwiththesequence-num10fromExtend
MPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#nosequence-num10
RelatedCommands
deny
permit
11.12.3remark
CommandPurpose
UsethiscommandtoaddremarksfortheExtendMPLSACL.
ToremoveremarksoftheExtendMPLSACL,usethenoformofthiscommand.
CommandSyntax
remarkREMARK
noremark
Parameter ParameterDescriptionParameterValue
REMARK TheremarksoftheExtend
MPLSACLStringwithupto100
characters
CommandMode
ExtendedMPLSACLConfiguration1860Default
None
Usage
Theremarksareupto100characters.Theexceedpartswillnotbestoredandwillbe
truncated.
Examples
ThisexampleshowshowtoaddaremarktodescribetheExtendMPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#remarkremarkofListformpls
ThisexampleshowshowtoremovetheremarkoftheExtendMPLSACL:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#noremark
RelatedCommands
mplsaccess-list
11.12.4denysrc-mac
CommandPurpose
Usethiscommandtocreateafilterfordiscardingongoingpacketsmatchingthefilter
rule.
CommandSyntax
(SEQUENCE_NUM|)denysrc-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(vlanVLAN_ID|)(cosCOS|)(inner-vlanINNER_VLAN_ID|)
(inner-cosINNER_COS|)(time-rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1861SEQUENCE_NUM Thesequencenumberof
thefilterinExtendMPLS
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsTheMACaddressand
wildcardbits
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddress
dest-mac DestinationMACaddressTheMACaddressand
wildcardbits
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
TIME-RANGE-NAME Thetime-rangeusedby
theMACfilterAstringwithupto40
characters
CommandMode
ExtendedMPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheextendMPLSACL.i.e.when1862themaximumexistingsequencenumberis100,thesequencenumberofsubsequent
createdMACfilteris110.
Examples
ThisexampleshowshowtocreateafilterinextendMPLSACLtodenythepackets
withsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#1denysrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendMPLSACLtodenyallthe
packets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#2denysrc-macany
ThisexampleshowshowtocreateafilterinextendMPLSACLtodenythepacket
whosesourceMACaddressisbetweentherangesspecified:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#3denysrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.12.5permitsrc-mac
CommandPurpose
Usethiscommandtocreateafilterforallowingpacketsmatchingthefilterruletobe
delivered.
CommandSyntax
(SEQUENCE_NUM|)permitsrc-mac(any|MAC_ADDRMAC_ADDR_MASK|
hostMAC_ADDR)(dest-mac(any|MAC_ADDRMAC_ADDR_MASK|host
MAC_ADDR)|)(vlanVLAN_ID|)(cosVALUE|)(inner-vlanINNER_VLAN_ID|)
(inner-cosINNER_COS|)(time-rangeTIME-RANGE-NAME|)1863Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinExtendMPLS
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
any Anyhost -
MAC_ADDR
MAC_ADDR_MASKTheMACaddressandits
wildcardbitsTheMACaddressand
wildcardbits
hostMAC_ADDR Thehostwithaspecified
MACaddressMACaddress
dest-mac DestinationMACaddressTheMACaddressand
wildcardbits
VLAN_ID VLAN-ID 1-4094
COS CoS 0-7
INNER_VLAN_ID InnerVLAN-ID 1-4094
INNER_COS InnerCoS 0-7
TIME-RANGE-NAME Thetime-rangeusedby
theMACfilterAstringwithupto40
characters
CommandMode
ExtendedMPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby186410onthemaximumexistingsequencenumberintheextendMPLSACL.i.e.when
themaximumexistingsequencenumberis105,thesequencenumberofsubsequent
createdMACfilteris115.
Examples
ThisexampleshowshowtocreateafilterinextendMPLSACLtopermitthepackets
withsourceMACaddress001A.A02C.A1DF:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-ac)#1permitsrc-machost001A.A02C.A1DF
ThisexampleshowshowtocreateafilterinextendMPLSACLtopermitallthe
packets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-ac)#2permitsrc-macany
ThisexampleshowshowtocreateafilterinextendMPLSACLtopermitthepackets
withsourceMACaddressbetweentherangesspecified:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#3permitsrc-mac001A.A02C.A1DF001A.A02C.0000
RelatedCommands
nosequence-num
11.12.6deny
CommandPurpose
UsethiscommandtodiscardongoingMPLSpacketsmatchingtheExtendMPLS
filter.
CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)next-label|)(MPLS-LABEL(maskMPLS-LABEL-1865MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinExtendMPLS
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
ExtendedMPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheExtendMPLSACL.For
example,whenthemaximumexistingsequencenumberis100,thesequence
numberofsubsequentcreatedExtendMPLSfilteris110.1866Examples
ThisexampleshowshowtocreateafilterinExtendMPLSACLtodenyanyMPLS
packets:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#1denytopmost-labelany
ThisexampleshowshowtocreateafilterinExtendMPLSACLtodenyanyMPLS
packetswithfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#2denytopmost-label1next-label2
RelatedCommands
nosequence-num
11.12.7permit
CommandPurpose
UsethiscommandtopermitongoingMPLSpacketsmatchingtheExtendMPLSfilter.
CommandSyntax
(SEQUENCE_NUM|)denytopmost-label((MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)next-label|)((MPLS-
LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)
next-label|)((MPLS-LABEL(maskMPLS-LABEL-MASK|)|any)(expEXP-
VALUE|)(ttlTTL-VALUE|)next-label|)(MPLS-LABEL(maskMPLS-LABEL-
MASK|)|any)(expEXP-VALUE|)(ttlTTL-VALUE|)(stack-bottom|)(time-
rangeTIME-RANGE-NAME|)
Parameter ParameterDescriptionParameterValue1867SEQUENCE_NUM Thesequencenumberof
thefilterinExtendMPLS
ACL.Anauto-generated
sequencenumberwillbe
assignedtothefilterifthis
fieldisnotpresented.1-131071
topmost-label mplstopmostlabel -
next-label mplsnextlabel -
MPLS-LABEL mplslabelvalue 0-1048575
MPLS-LABEL-MASK mplslabelmask 0-0xFFFFF
EXP-VALUE expvalue 0-7
TTL-VALUE ttlvalue 0-255
TIME-RANGE-NAME Thetime-rangeusedby
theMPLSfilterAstringwithupto40
characters
CommandMode
ExtendedMPLSACLConfiguration
Default
None
Usage
Anauto-generatedsequencenumberwillbeassignedtothefilterifthesequence-
numfieldisnotpresented.Theauto-generatedsequencenumberisincrementedby
10onthemaximumexistingsequencenumberintheExtendMPLSACL.For
example,whenthemaximumexistingsequencenumberis100,thesequence
numberofsubsequentcreatedExtendMPLSfilteris110.
Examples
ThisexampleshowshowtocreateafilterinExtendMPLSACLtopermitanyMPLS
packets:1868Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#1permittopmost-labelany
ThisexampleshowshowtocreateafilterinExtendMPLSACLtopermitanyMPLS
packetswithfirstlabelis1andsecondlabelis2:
Switch#configureterminal
Switch(config)#mplsaccess-listlist_ex_mpls_1extend
Switch(config-ex-mpls-acl)#2permittopmost-label1next-label2
RelatedCommands
nosequence-num
11.12.8showaccess-listmplsextend
CommandPurpose
UsethiscommandtoshowtheExtendMPLSACLinformation.
CommandSyntax
showaccess-listmpls(ACL_NAMEextend|)
Parameter ParameterDescriptionParameterValue
ACL_NAME ThenameoftheExtend
MPLSACLAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnomplsaclarespecified,allmplsaccess-listsinthesystemshouldbeshown.1869Examples
ThisexampleshowshowtoshowtheExtendMPLSACLinformation:
Switch#showaccess-listmpls
mplsaccess-listlist_ex_mpls_1extend
10permittopmost-label1next-label2
20denytopmost-labelany
RelatedCommands
mplsaccess-listextend
11.13COPPCommands
11.13.1control-planeaccess-list
CommandPurpose
Usethiscommandtocreateacontrol-planeaccesslist.
Usethenoformtodeletetheaccesslist.
CommandSyntax
control-planeaccess-listNAME
nocontrol-planeaccess-listNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifyaccesslistnameAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None1870Usage
None
Examples
Thefollowingexampleshowshowtocreateacontrol-planeaccesslist.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#quit
RelatedCommands
matchaccess-group
11.13.2(deny|permit)exceptionany
CommandPurpose
Usedenycommandtodiscardanytypeofpacketstothecpu.
Usepermitcommandtoletanytypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)(deny|permit)exceptionany(time-range?
TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters1871CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardanytypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.3(deny|permit)exceptionipda
CommandPurpose
Usedenycommandtodiscardipdatypeofpacketstothecpu.
Usepermitcommandtoletipdatypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(<0-255>|any)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(time-rangeNAME|)1872(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(icmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(icmp-typeIGMP_TYPE(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(udp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(gre)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(<0-255>|any)(any)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(icmp)(any)(any)(icmp-typeIGMP_TYPE(icmp-code
ICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(udp)(any)(any)(src-port(eqL4_PORT)|)(dst-port(eq
L4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionipda(untag-vlan|{vlanVLAN_ID
|cosCOS}|)(ipv6)(gre)(any)(any)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
VLAN_ID VLANID 1-4094
COS Therangeofcosisfrom0
to70-7
any Anysourcehost -1873hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
eq Equalto -
ICMP_TYPE Icmptype 0-255
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardipdatypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionipda
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.4(deny|permit)exceptionfwd-to-cpu
CommandPurpose
Usedenycommandtodiscardfwd-to-cputypeofpacketstothecpu.
Usepermitcommandtoletfwd-to-cputypeofpacketstothecpupass1874CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(<0-255>|any)(IP_ADDRIP_MASK|any|host
IP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(icmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(icmp-typeIGMP_TYPE(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME
|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(udp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME
|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(gre)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(<0-255>|any)(any)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(icmp)(any)(any)(icmp-typeIGMP_TYPE
(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(tcp)(any)(any)(src-port(eqL4_PORT)|)
(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(udp)(any)(any)(src-port(eqL4_PORT)|)
(dst-port(eqL4_PORT)|)(time-rangeNAME|)1875(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(gre)(any)(any)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
eq Equalto -
ICMP_TYPE ICMPtype 0-255
ICMP_CODE Therangeoficmp-codeis
from0-2550-255
CommandMode
Config-cp-acl
Default
None1876Usage
None
Examples
Thefollowingexampleshowshowtodiscardfwd-to-cputypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionfwd-to-cpu
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.5(deny|permit)exceptionslow-protocol
CommandPurpose
Usedenycommandtodiscardslow-protocoltypeofpacketstothecpu.
Usepermitcommandtoletslow-protocoltypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(sub-typeTYPE)
(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(efm|lacp|synce)
(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711877TYPE Therangeofsub-typeis
from0to2550-255
efm efmtypemessage -
lacp lacptypemessage -
synce syncetypemessage -
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardslow-protocoltypeofpacketstothe
cpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionslow-protocol
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.6(deny|permit)exceptiondhcp
CommandPurpose
Usedenycommandtodiscarddhcptypeofpacketstothecpu.
Usepermitcommandtoletdhcptypeofpacketstothecpupass1878CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiondhcp(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiondhcp(dhcp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(client|server|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiondhcp(dhcpv6)(any)(any)(reply|
request|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
client dhcprequesttype
message-
server dhcpreplytypemessage-
request dhcpclienttypemessage-
reply dhcpservertypemessage-
CommandMode
Config-cp-acl
Default
None1879Usage
None
Examples
Thefollowingexampleshowshowtodiscarddhcptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiondhcpdhcpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.7(deny|permit)exceptionrip
CommandPurpose
Usedenycommandtodiscardriptypeofpacketstothecpu.
Usepermitcommandtoletriptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionrip(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionrip(rip)(IP_ADDRIP_MASK|any|
hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionrip(ripng)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711880IP_ADDRIP_MASK ThesourceIP[address
anditswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardriptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionripripanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.8(deny|permit)exceptionospf
CommandPurpose
Usedenycommandtodiscardospftypeofpacketstothecpu.
Usepermitcommandtoletospftypeofpacketstothecpupass1881CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionospf(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionospf(ospfv2)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionospf(ospfv3)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
ospfv2 ospfv2typemessage -
ospfv3 ospfv3typemessage -
CommandMode
Config-cp-acl
Default
None
Usage
None1882Examples
Thefollowingexampleshowshowtodiscardospftypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionospfospfv2anyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.9(deny|permit)exceptionpim
CommandPurpose
Usedenycommandtodiscardpimtypeofpacketstothecpu.
Usepermitcommandtoletpimtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionpim(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionpim(pim)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionpim(pimv6)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -1883hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
pimv6 pimv6typemessage -
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardpimtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionpimpimanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.10(deny|permit)exceptionbgp
CommandPurpose
Usedenycommandtodiscardbgptypeofpacketstothecpu.
Usepermitcommandtoletbgptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionbgp(time-rangeNAME|)1884(SEQUENCE_NUM|)deny|permitexceptionbgp(bgp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionbgp(bgp4plus)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
bgp4plus bgp4plustypemessage-
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardbgptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest1885Switch(config-cp-acl)#denyexceptionbgpbgpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.11(deny|permit)exceptionvrrp
CommandPurpose
Usedenycommandtodiscardvrrptypeofpacketstothecpu.
Usepermitcommandtoletvrrptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionvrrp(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionvrrp(vrrp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionvrrp(vrrpv6)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
vrrpv6 vrrpv6typemessage -1886CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardvrrptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionvrrpvrrpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.12(deny|permit)exceptionssh
CommandPurpose
Usedenycommandtodiscardsshtypeofpacketstothecpu.
Usepermitcommandtoletsshtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionssh(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionssh(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue1887SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardsshtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionssh
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list188811.13.13(deny|permit)exceptiontelnet
CommandPurpose
Usedenycommandtodiscardtelnettypeofpacketstothecpu.
Usepermitcommandtolettelnettypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiontelnet(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontelnet(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
Config-cp-acl
Default
None1889Usage
None
Examples
Thefollowingexampleshowshowtodiscardtelnettypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiontelnet
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.14(deny|permit)exceptiontcp
CommandPurpose
Usedenycommandtodiscardtcptypeofpacketstothecpu.
Usepermitcommandtolettcptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(tcp)(any)(any)(src-port(eqL4_PORT)|)(dst-port(eq
L4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue1890SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardtcptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiontcp
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list189111.13.15(deny|permit)exceptionmlag
CommandPurpose
Usedenycommandtodiscardmlagtypeofpacketstothecpu.
Usepermitcommandtoletmlagtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionmlag(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionmlag(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
ControlplaneConfiguration
Default
None1892Usage
None
Examples
Thefollowingexampleshowshowtodiscardmlagtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionmlag
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.16(deny|permit)exceptionarp
CommandPurpose
Usedenycommandtodiscardarptypeofpacketstothecpu.
Usepermitcommandtoletarptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp-op-codeARP_OP_CODE|)(sender-ip(IP_ADDRIP_MASK|
any|hostIP_ADDR)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(garp)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp-reply|arp-request)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(rarp-reply|rarp-request)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask1893any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
ARP_OP_CODE Therangeofarp-op-code
isfrom0to655350-65535
arp-request Arprequesttypemessage-
arp-reply Arpreplytypemessage-
rarp-request Rarprequesttype
message-
rarp-reply Rarpreplytypemessage-
CommandMode
Config-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardarptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionarparp-op-code1any
Switch(config-cp-acl)#1894RelatedCommands
Control-planeaccess-list
11.13.17(deny|permit)exceptionigmp
CommandPurpose
Usedenycommandtodiscardigmptypeofpacketstothecpu.
Usepermitcommandtoletigmptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)(deny|permit)exceptionigmp(untag-vlan|{vlanVLAN_ID
|cosCOS}|)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(dvmrp|
host-query|host-report|mtrace|mtrace-response|pim|precedence|trace|v2-
leave|v2-report|v3-report|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionigmp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(igmp-
typeIGMP_TYPE)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionigmp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(mld)(any)(any)(mld-query|mld-report|mld-done|mldv2-report
|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-71895IGMP_TYPE Therangeoficmp-typeis
from0to2550-255
dvmrp Dvmrptypemessage -
host-query host-querytypemessage-
host-report host-reporttypemessage-
mtrace mtracetypemessage -
mtrace-response mtrace-responsetype
message-
pim pimtypemessage -
trace tracetypemessage -
v2-leave v2-leavetypemessage-
v2-report v2-reporttypemessage-
v3-report v3-reporttypemessage-
mld-query MulticastListener
Query(130)-
mld-report MulticastListener
Report(131)-
mld-done MulticastListener
Done(132)-
mldv2-report MLDv2MulticastListener
Report(143)-
CommandMode
Config-cp-acl
Default
None1896Usage
None
Examples
Thefollowingexampleshowshowtodiscardigmptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionigmpigmpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.18(deny|permit)exception
CommandPurpose
Usedenycommandtodiscardspecifiedtypeofpacketstothecpu.
Usepermitcommandtoletspecifiedtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexception(bpdu|erps|eapol|smart-link|ldp|
ptp|rsvp|icmp-redirect|mcast-rpf-fail|macsa-mismatch|vlan-security-discard|
port-security-discard|ip-option|udld|dot1x-mac-bypass|l2protocol-tunnel)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
CommandMode
Config-cp-acl1897Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardpbdutypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionbpdu
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.13.19class-maptype(control-plane)
CommandPurpose
Usethiscommandtocreateacontrol-planeclassmap.
Usethenoformtodeletetheclassmap.
CommandSyntax
class-maptype(control-plane)NAME
noclass-mapNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
GlobalConfiguration1898Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocreateacontrol-planeclassmap.:
Switch#configureterminal
Switch(config)#class-maptypecontrol-planetest
Switch(config-cmap-cp)
RelatedCommands
classtypecontrol-plane
11.13.20policy-maptype(control-plane)
CommandPurpose
Usethiscommandtocreateacontrol-planepolicymap.
Usethenoformtodeletethepolicymap.
CommandSyntax
policy-maptype(control-plane)NAME
nopolicy-mapNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifypolicymapnameAstringwithupto40
characters
CommandMode
GlobalConfiguration1899Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocreateacontrol-planepolicymap.:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#
RelatedCommands
service-policytypecontrol-planeinput
11.13.21classtypecontrol-plane
CommandPurpose
Usethiscommandtoaddtheclassmaptothepolicymap
Usethenoformofthiscommandtounbindit.
CommandSyntax
classtypecontrol-plane(NAME|class-default)
noclasstypecontrol-plane(NAME|class-default)
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
Config-pmap-cConfiguration1900Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoaddtheclassmaptothepolicymap:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#classtypecontrol-planetest
Switch(config-pmap-cp-c)#
RelatedCommands
class-maptype(control-plane)
11.13.22statisticsenable
CommandPurpose
Usethiscommandtoenablestatistics.
Usethenoformtodisableit.
CommandSyntax
statisticsenable
nostatisticsenable
CommandMode
GlobalConfiguration
Default
None1901Usage
None
Examples
Thefollowingexampleshowshowtoenablestatistics.:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#classtypecontrol-planetest
Switch(config-pmap-cp-c)#statisticsenable
RelatedCommands
class-maptype(control-plane)
11.13.23control-plane
CommandPurpose
Usethiscommandtoenterglobalcontrolplanemode.
CommandSyntax
control-plane
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenterglobalcontrolplanemode:1902Switch#configureterminal
Switch(config)#control-plane
Switch(Config-control-plain)#
RelatedCommands
service-policytypecontrol-planeinput
11.13.24service-policytypecontrol-planeinput
CommandPurpose
Usethiscommandtoapplythecontrolplanepolicy.
Usethenoformofthiscommandtoremoveit.
CommandSyntax
service-policytypecontrol-planeinputNAME
noservice-policytypecontrol-planeinput
Parameter ParameterDescriptionParameterValue
NAME SpecifypolicyinputnameAstringwithupto40
characters
CommandMode
ControlplaneConfiguration
InterfaceConfiguration
Default
None
Usage
None1903Examples
Thefollowingexampleshowshowtoapplythecontrolplanepolicy:
Switch#configureterminal
Switch(Config-control-plain)#service-policytypecontrol-planeinputtest
Switch(Config-control-plain)#
Switch#configureterminal
Switch(config)#interfaceeth-0-2
Switch(config-if)#service-policytypecontrol-planeinputp1
RelatedCommands
policy-maptypecontrol-plane
11.13.25showpolicy-maptypecontrol-planestatisticsinput
ace
CommandPurpose
Usethiscommandtoshowstatsofcopppolicer
CommandSyntax
showpolicy-maptypecontrol-planestatisticsinputace(class-based|ace-based)
(classNAME|)
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
None1904Usage
None
Examples
Thefollowingexampleshowshowtoshowstatsofcopppolicer:
Switch#showpolicy-maptypecontrol-planestatisticsinputpolicer
RelatedCommands
clearpolicy-maptypecontrol-planestatisticsinput
11.13.26policercir
CommandPurpose
ToSpecifyapolicerfortheclassifiedtraffic,configCIRCBSandenablepolicer
statistics
CommandSyntax
policercirCIR(cbsCBS|)(statistics|)
Parameter ParameterDescriptionParameterValue
CIR CIRCommitInformation
Rate(pps)0-148809523
CBS CBS-CommitBurstSize
(packets)(defaultvalueis
4400)",0-7600
statistics enablepolicerstat -
CommandMode
Config-pmap-cConfiguration1905Default
4400
Usage
limittherateofsomeexceptiontraffictocpu
Examples
configthetrafficrateofARPexceptionandenablepolicerstat:
Switch#configureterminal
Switch(config)#control-planeaccess-listtestacl
Switch(config-cp-acl)#10permitexceptionarp
Switch(config-cp-acl)#class-maptypecontrol-planetestclass
Switch(config-cmap-cp)#matchaccess-grouptestacl
Switch(config-cmap-cp)#policy-maptypecontrol-planetestpolicy
Switch(config-pmap-cp)#classtypecontrol-planetestclass
Switch(config-pmap-cp-c)#policercir100statistics
Switch(config-pmap-cp-c)#control-plane
Switch(Config-control-plain)service-policytypecontrol-planeinputtestpolicy
RelatedCommands
showpolicy-maptypecontrol-planestatisticsinput
11.13.27showpolicy-maptypecontrol-planestatisticsinput
policer
CommandPurpose
Toshowstatisticsofanypolicy,classnamecanbespecified
CommandSyntax
showpolicy-maptypecontrol-planestatisticsinputpolicer(classNAME|)
clearpolicy-maptypecontrol-planestatisticsinputpolicer
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters1906CommandMode
GlobalConfiguration
Default
None
Usage
Toshowstatisticsofanypolicy,classnamecanbespecified
Examples
Toshowstatisticsofanypolicy,classnamecanbespecified:
Switch#showpolicy-maptypecontrol-planestatisticsinputpolicer
RelatedCommands
policercir
11.14FLEXCOPPCommands
11.14.1control-planeaccess-list-template
CommandPurpose
UsethiscommandtocreateACLtemplateformac,ipandmplsacl.andthenenter
control-planeACLtemplateconfigurationmode.Usenocontrol-planeaccess-list
templatecommandtodeletetheACLtemplate.
CommandSyntax
control-planeaccess-list-templateTEMPALTE_NAME
Parameter ParameterDescriptionParameterValue
TEMPALTE_NAME Thenameofthecontrol-
planeACCESS-LIST-
TEMPLATEAstringwithupto40
characters1907CommandMode
GlobalConfiguration
Default
None
Usage
Ifthesystemalreadyhasacontrol-planeaccess-list-templatewiththesamename,
thiscommandwillenterthecontrol-planeaccess-list-templateconfigurationmode.
However,iftheACLtemplatenameisusedbyothertypeofACLtemplate,aprompt
messagewillbeshown.
WhenthenameisnotusedbyanyACLtemplate,thiscommandistocreatethe
control-planeaccess-list-templatefirstlyandthenenterthecontrol-planeaccess-list-
templateconfigurationmode.
Examples
Thisexampleshowshowtocreateacontrol-planeaccess-list-templatenamed
copp_tempalte_1andthenenterthecopp_tempalteconfigurationmode:
Switch#configureterminal
Switch(config)#control-planeaccess-list-templatecopp_tempalte_1
Switch(config-acl-cp-template)#
RelatedCommands
None
11.14.2mac-field
CommandPurpose
Usethiscommandtocreatemacfieldforcontrol-planeaccess-list-template
CommandSyntax
mac-field{vlan|cos|untag|slow-protocol-sub-type}1908nomac-field{vlan|cos|untag|slow-protocol-sub-type|}
Parameter ParameterDescriptionParameterValue
vlan VLAN-ID -
cos CoSValue -
untag Withoutvlantag -
slow-protocol-sub-typeSlowprotocolsubtype-
CommandMode
COPPACLTEMPLATEConfiguration
Default
None
Usage
configureofmacfieldsofcontrol-planeACLtemplate,oneormorecanbeselectedat
atime;Usethenomac-fieldcommandtodeletethecorrespondingmacfield,ifno
macfieldisadded,itmeansthatallmacfieldsaredeleted.
Examples
Thisexampleshowshowtoaddvlanfieldtothecontrol-planeACLtemplate:
Switch#configureterminal
Switch(config-acl-cp-template)#mac-fieldvlan
RelatedCommands
None
11.14.3ip-field
CommandPurpose
Usethiscommandtocreateipfieldforcontrol-planeaccess-list-template1909CommandSyntax
ip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port|
l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length}
noip-field{src-ip|dest-ip|ip-frag|dscp|l4-protocol|ip-option|tcp-flag|l4-src-port
|l4-src-port-range|l4-dest-port|l4-dest-port-range|icmp-type|icmp-code|igmp-
type|vni|gre-key|packet-length|}
Parameter ParameterDescriptionParameterValue
src-ip SourceIPaddress -
dest-ip DestinationIPaddress-
dscp DSCPID -
ip-option IPoptions -
tcp-flag TCPFlag -
l4-src-port L4sourceport -
l4-src-port-range rangeofL4sourceport-
l4-dest-port L4destinationport -
l4-dest-port-range rangeofL4destination
port-
icmp-type ICMPmessagetype -
icmp-code ICMPmessagecode -
igmp-type IGMPmessagetype -
vni VirtualNetworkIdentifier-
gre-key GREKEY -
packet-length packetlength -
CommandMode
COPPACLTEMPLATEConfiguration1910Default
None
Usage
configureofipfieldsofcontrol-planeACLtemplate,oneormorecanbeselectedata
time;Usethenoip-fieldcommandtodeletethecorrespondingipfield,ifnomacfield
isadded,itmeansthatallipfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsrc-ipanddest-ipfieldtothecontrol-planeACL
template:
Switch#configureterminal
Switch(config-acl-cp-template)#ip-fieldsrc-ipdest-ip
RelatedCommands
None
11.14.4arp-field
CommandPurpose
Usethiscommandtocreatearpfieldforcontrol-planeaccess-list-template
CommandSyntax
arp-field{sender-ip|target-ip|arp-op-code|garp}
noarp-field{sender-ip|target-ip|arp-op-code|garp|}
Parameter ParameterDescriptionParameterValue
sender-ip senderip -
target-ip targetip -
arp-op-code arpopcode -
garp GratuitousARP -1911CommandMode
COPPACLTEMPLATEConfiguration
Default
None
Usage
configureofarpfieldsofcontrol-planeACLtemplate,oneormorecanbeselectedat
atime;Usethenoarp-fieldcommandtodeletethecorrespondingarpfield,ifnoarp
fieldisadded,itmeansthatallarpfieldsaredeleted.
Examples
Thisexampleshowshowtoaddsender-ipandtarget-ipfieldtothecontrol-planeACL
template:
Switch#configureterminal
Switch(config-acl-control-plane-template)#arp-fieldsender-iptarget-ip
RelatedCommands
None
11.14.5control-planeaccess-listtemplate
CommandPurpose
UsethiscommandtocreateFLEXCOPPACLandthenenterFLEXCOPPACLin
globalconfigurationmode.Usenocontrol-planeaccess-listtemplatecommandto
deletetheFLEXCOPPACL.
CommandSyntax
control-planeaccess-listACL_NAMEtemplateTEMPLATE_NAME
Parameter ParameterDescriptionParameterValue1912ACL_NAME ThenameoftheFLEX
COPPACLAstringwithupto40
characters
TEMPLATE_NAME Thenameofthecontrol-
planeACCESS-LIST-
TEMPLATEAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfthesystemalreadyhasaFLEXCOPPACLwiththesamename,thiscommandwill
entertheFLEXCOPPACLconfigurationmode.However,iftheACLnameisusedby
othertypeofACL,apromptmessagewillbeshown.
WhenthenameisnotusedbyanyACL,thiscommandistocreatetheFLEXCOPP
ACLfirstlyandthenentertheFLEXCOPPACLconfigurationmode.
Examples
ThisexampleshowshowtocreateaFLEXCOPPACLnamedflex_list_control-
plane_1withtemplatenamedcontrol-plane_template_1,andthenentertheFLEX
COPPACLconfigurationmode:
Switch#configureterminal
Switch(config)#control-planeaccess-listflex_list_1templateccopp_template_1
Switch(config-acl-cp-template)#
RelatedCommands
matchaccess-group191311.14.6(deny|permit)exceptionany
CommandPurpose
Usedenycommandtodiscardanytypeofpacketstothecpu.
Usepermitcommandtoletanytypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)(deny|permit)exceptionany(time-range?
TIME_RANGE_NAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
TIME_RANGE_NAMEThetime-rangeusedby
theIPfilterAstringwithupto40
characters
CommandMode
FLEXFLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardanytypeofpacketstothecpu.:1914Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.7(deny|permit)exceptionany
CommandPurpose
Usedenycommandtodiscardanytypeofpacketstothecpu.
Usepermitcommandtoletanytypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(protocolETH-TYPEmaskMASK)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(PROTO_ID|any)(IP_ADDRIP_MASK|any|host
IP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(icmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(icmp-typeIGMP_TYPE(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(igmp-typeIGMP_TYPE)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(dvmrp|host-query|host-report|mtrace|mtrace-response|pim|trace|v2-leave|
v2-report|v3-report|)(time-rangeNAME|)1915(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(udp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(gre)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(<0-255>|any)(any)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(icmp)(any)(any)(icmp-typeIGMP_TYPE(icmp-code
ICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(tcp)(any)(any)(src-port(eqL4_PORT))(dst-port(eq
L4_PORT))(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(udp)(any)(any)(src-port(eqL4_PORT)|)(dst-port(eq
L4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp)(arp-op-codeARP_OP_CODE|)(sender-ip(IP_ADDR
IP_MASK|any|hostIP_ADDR)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp)(garp)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp)(arp-reply|arp-request)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp)(rarp-reply|rarp-request)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionany(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(gre)(any)(any)(time-rangeNAME|)1916Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
eq Equalto -
ARP_OP_CODE Therangeofarp-op-code
isfrom0to655350-65535
ICMP_TYPE Therangeoficmp-typeis
from0-2550-255
ICMP_CODE Therangeoficmp-codeis
from0-2550-255
dvmrp Dvmrptypemessage -
host-query host-querytypemessage-
host-report host-reporttypemessage-
mtrace mtracetypemessage -
mtrace-response mtrace-responsetype
message-1917pim pimtypemessage -
trace tracetypemessage -
v2-leave v2-leavetypemessage-
v2-report v2-reporttypemessage-
v3-report v3-reporttypemessage-
L4_PORT layer4portnumber 0-65535
PROTO_ID protocolID 1-255
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardanytypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.8(deny|permit)exceptionipda
CommandPurpose
Usedenycommandtodiscardipdatypeofpacketstothecpu.1918Usepermitcommandtoletipdatypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(<0-255>|any)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(icmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(icmp-typeIGMP_TYPE(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(udp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(gre)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)
(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(<0-255>|any)(any)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(icmp)(any)(any)(icmp-typeIGMP_TYPE(icmp-code
ICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionipda(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(udp)(any)(any)(src-port(eqL4_PORT)|)(dst-port(eq
L4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)(deny|permit)exceptionipda(untag-vlan|{vlanVLAN_ID
|cosCOS}|)(ipv6)(gre)(any)(any)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue1919SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
VLAN_ID VLANID 1-4094
COS Therangeofcosisfrom0
to70-7
any Anysourcehost -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
eq Equalto -
ICMP_TYPE Icmptype 0-255
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardipdatypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionipda
Switch(config-cp-acl)#1920RelatedCommands
Control-planeaccess-list
11.14.9(deny|permit)exceptionfwd-to-cpu
CommandPurpose
Usedenycommandtodiscardfwd-to-cputypeofpacketstothecpu.
Usepermitcommandtoletfwd-to-cputypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(<0-255>|any)(IP_ADDRIP_MASK|any|host
IP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(icmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(icmp-typeIGMP_TYPE(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME
|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(udp)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(src-port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME
|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv4)(gre)(IP_ADDRIP_MASK|any|hostIP_ADDR)
(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(<0-255>|any)(any)(any)(time-rangeNAME|)1921(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(icmp)(any)(any)(icmp-typeIGMP_TYPE
(icmp-codeICMP_CODE|)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(tcp)(any)(any)(src-port(eqL4_PORT)|)
(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(udp)(any)(any)(src-port(eqL4_PORT)|)
(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionfwd-to-cpu(untag-vlan|{vlan
VLAN_ID|cosCOS}|)(ipv6)(gre)(any)(any)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any Anysourcehost -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
eq Equalto -
ICMP_TYPE ICMPtype 0-2551922ICMP_CODE Therangeoficmp-codeis
from0-2550-255
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardfwd-to-cputypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionfwd-to-cpu
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.10(deny|permit)exceptionslow-protocol
CommandPurpose
Usedenycommandtodiscardslow-protocoltypeofpacketstothecpu.
Usepermitcommandtoletslow-protocoltypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(sub-typeTYPE)
(time-rangeNAME|)1923(SEQUENCE_NUM|)deny|permitexceptionslow-protocol(efm|lacp|synce)
(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
TYPE Therangeofsub-typeis
from0to2550-255
efm efmtypemessage -
lacp lacptypemessage -
synce syncetypemessage -
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardslow-protocoltypeofpacketstothe
cpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionslow-protocol
Switch(config-cp-acl)#1924RelatedCommands
Control-planeaccess-list
11.14.11(deny|permit)exceptiondhcp
CommandPurpose
Usedenycommandtodiscarddhcptypeofpacketstothecpu.
Usepermitcommandtoletdhcptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiondhcp(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiondhcp(dhcp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(client|server|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiondhcp(dhcpv6)(any)(any)(reply|
request|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
client dhcprequesttype
message-
server dhcpreplytypemessage-1925request dhcpclienttypemessage-
reply dhcpservertypemessage-
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscarddhcptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiondhcpdhcpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.12(deny|permit)exceptionrip
CommandPurpose
Usedenycommandtodiscardriptypeofpacketstothecpu.
Usepermitcommandtoletriptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionrip(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionrip(rip)(IP_ADDRIP_MASK|any|
hostIP_ADDR)(any)(time-rangeNAME|)1926(SEQUENCE_NUM|)deny|permitexceptionrip(ripng)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIP[address
anditswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardriptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionripripanyany
Switch(config-cp-acl)#1927RelatedCommands
Control-planeaccess-list
11.14.13(deny|permit)exceptionospf
CommandPurpose
Usedenycommandtodiscardospftypeofpacketstothecpu.
Usepermitcommandtoletospftypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionospf(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionospf(ospfv2)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionospf(ospfv3)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
ospfv2 ospfv2typemessage -
ospfv3 ospfv3typemessage -1928CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardospftypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionospfospfv2anyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.14(deny|permit)exceptionpim
CommandPurpose
Usedenycommandtodiscardpimtypeofpacketstothecpu.
Usepermitcommandtoletpimtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionpim(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionpim(pim)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionpim(pimv6)(any)(any)(time-
rangeNAME|)1929Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
pimv6 pimv6typemessage -
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardpimtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionpimpimanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list193011.14.15(deny|permit)exceptionbgp
CommandPurpose
Usedenycommandtodiscardbgptypeofpacketstothecpu.
Usepermitcommandtoletbgptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionbgp(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionbgp(bgp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionbgp(bgp4plus)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
bgp4plus bgp4plustypemessage-
CommandMode
FLEXConfig-cp-acl1931Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardbgptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionbgpbgpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.16(deny|permit)exceptionvrrp
CommandPurpose
Usedenycommandtodiscardvrrptypeofpacketstothecpu.
Usepermitcommandtoletvrrptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionvrrp(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionvrrp(vrrp)(IP_ADDRIP_MASK|
any|hostIP_ADDR)(any)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionvrrp(vrrpv6)(any)(any)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue1932SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
vrrpv6 vrrpv6typemessage -
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardvrrptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionvrrpvrrpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list193311.14.17(deny|permit)exceptionssh
CommandPurpose
Usedenycommandtodiscardsshtypeofpacketstothecpu.
Usepermitcommandtoletsshtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionssh(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionssh(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
FLEXConfig-cp-acl
Default
None1934Usage
None
Examples
Thefollowingexampleshowshowtodiscardsshtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionssh
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.18(deny|permit)exceptiontelnet
CommandPurpose
Usedenycommandtodiscardtelnettypeofpacketstothecpu.
Usepermitcommandtolettelnettypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiontelnet(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontelnet(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-1310711935IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardtelnettypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiontelnet
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.19(deny|permit)exceptiontcp
CommandPurpose
Usedenycommandtodiscardtcptypeofpacketstothecpu.
Usepermitcommandtolettcptypeofpacketstothecpupass1936CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(dst-port(eqL4_PORT)|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptiontcp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv6)(tcp)(any)(any)(src-port(eqL4_PORT)|)(dst-port(eq
L4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None1937Examples
Thefollowingexampleshowshowtodiscardtcptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptiontcp
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.20(deny|permit)exceptionmlag
CommandPurpose
Usedenycommandtodiscardmlagtypeofpacketstothecpu.
Usepermitcommandtoletmlagtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionmlag(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionmlag(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(ipv4)(tcp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(src-
port(eqL4_PORT)|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
SEQUENCE_NUM Thesequencenumberof
thefilterinCoPPACL.An
auto-generatedsequence
numberwillbeassignedto
thefilterifthisfieldisnot
presented.1-131071
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -1938hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
CommandMode
ControlplaneConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardmlagtypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionmlag
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.21(deny|permit)exceptionarp
CommandPurpose
Usedenycommandtodiscardarptypeofpacketstothecpu.
Usepermitcommandtoletarptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp-op-codeARP_OP_CODE|)(sender-ip(IP_ADDRIP_MASK|
any|hostIP_ADDR)|)(time-rangeNAME|)1939(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(garp)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(arp-reply|arp-request)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionarp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(rarp-reply|rarp-request)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
ARP_OP_CODE Therangeofarp-op-code
isfrom0to655350-65535
arp-request Arprequesttypemessage-
arp-reply Arpreplytypemessage-
rarp-request Rarprequesttype
message-
rarp-reply Rarpreplytypemessage-
CommandMode
FLEXConfig-cp-acl
Default
None1940Usage
None
Examples
Thefollowingexampleshowshowtodiscardarptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionarparp-op-code1any
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.22(deny|permit)exceptionigmp
CommandPurpose
Usedenycommandtodiscardigmptypeofpacketstothecpu.
Usepermitcommandtoletigmptypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)(deny|permit)exceptionigmp(untag-vlan|{vlanVLAN_ID
|cosCOS}|)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(dvmrp|
host-query|host-report|mtrace|mtrace-response|pim|precedence|trace|v2-
leave|v2-report|v3-report|)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionigmp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(igmp)(IP_ADDRIP_MASK|any|hostIP_ADDR)(any)(igmp-
typeIGMP_TYPE)(time-rangeNAME|)
(SEQUENCE_NUM|)deny|permitexceptionigmp(untag-vlan|{vlanVLAN_ID|
cosCOS}|)(mld)(any)(any)(mld-query|mld-report|mld-done|mldv2-report
|)(time-rangeNAME|)
Parameter ParameterDescriptionParameterValue1941IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
any AnyIPaddress -
hostIP_ADDR ThesourceIPaddressofa
hostIPv4Address
VLAN_ID Therangeofvlanidis
from1to40941-4094
COS Therangeofcosisfrom0
to70-7
IGMP_TYPE Therangeoficmp-typeis
from0to2550-255
dvmrp Dvmrptypemessage -
host-query host-querytypemessage-
host-report host-reporttypemessage-
mtrace mtracetypemessage -
mtrace-response mtrace-responsetype
message-
pim pimtypemessage -
trace tracetypemessage -
v2-leave v2-leavetypemessage-
v2-report v2-reporttypemessage-
v3-report v3-reporttypemessage-
mld-query MulticastListener
Query(130)-
mld-report MulticastListener
Report(131)-1942mld-done MulticastListener
Done(132)-
mldv2-report MLDv2MulticastListener
Report(143)-
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardigmptypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionigmpigmpanyany
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.23(deny|permit)exception
CommandPurpose
Usedenycommandtodiscardspecifiedtypeofpacketstothecpu.
Usepermitcommandtoletspecifiedtypeofpacketstothecpupass
CommandSyntax
(SEQUENCE_NUM|)deny|permitexception(bpdu|erps|eapol|smart-link|ldp|
ptp|rsvp|icmp-redirect|mcast-rpf-fail|macsa-mismatch|vlan-security-discard|1943port-security-discard|ip-option|udld|dot1x-mac-bypass|l2protocol-tunnel)(time-
rangeNAME|)
Parameter ParameterDescriptionParameterValue
IP_ADDRIP_MASK ThesourceIPaddressand
itswildcardbitsIPv4AddressandMask
CommandMode
FLEXConfig-cp-acl
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodiscardpbdutypeofpacketstothecpu.:
Switch#configureterminal
Switch(config)#control-planeaccess-listtest
Switch(config-cp-acl)#denyexceptionbpdu
Switch(config-cp-acl)#
RelatedCommands
Control-planeaccess-list
11.14.24class-maptype(control-plane)
CommandPurpose
Usethiscommandtocreateacontrol-planeclassmap.
Usethenoformtodeletetheclassmap.1944CommandSyntax
class-maptype(control-plane)NAME
noclass-mapNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocreateacontrol-planeclassmap.:
Switch#configureterminal
Switch(config)#class-maptypecontrol-planetest
Switch(config-cmap-cp)
RelatedCommands
classtypecontrol-plane
11.14.25matchaccess-group
CommandPurpose
Usethiscommandtoaddaccessgrouptotheclassmap.
Usethenoformofthiscommandtounbindit.1945CommandSyntax
matchaccess-groupNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifyaccesslistnameAstringwithupto40
characters
CommandMode
Class-mapConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoaddaccessgrouptotheclassmap:
Switch#configureterminal
Switch(config)#class-maptypecontrol-planetest
Switch(config-cmap-cp)#matchaccess-grouptest
RelatedCommands
Class-maptypecontrol-plane
11.14.26policy-maptype(control-plane)
CommandPurpose
Usethiscommandtocreateacontrol-planepolicymap.
Usethenoformtodeletethepolicymap.1946CommandSyntax
policy-maptype(control-plane)NAME
nopolicy-mapNAME
Parameter ParameterDescriptionParameterValue
NAME SpecifypolicymapnameAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocreateacontrol-planepolicymap.:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#
RelatedCommands
service-policytypecontrol-planeinput
11.14.27classtypecontrol-plane
CommandPurpose
Usethiscommandtoaddtheclassmaptothepolicymap
Usethenoformofthiscommandtounbindit.1947CommandSyntax
classtypecontrol-plane(NAME|class-default)
noclasstypecontrol-plane(NAME|class-default)
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
Config-pmap-cConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoaddtheclassmaptothepolicymap:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#classtypecontrol-planetest
Switch(config-pmap-cp-c)#
RelatedCommands
class-maptype(control-plane)
11.14.28statisticsenable
CommandPurpose
Usethiscommandtoenablestatistics.
Usethenoformtodisableit.1948CommandSyntax
statisticsenable
nostatisticsenable
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenablestatistics.:
Switch#configureterminal
Switch(config)#policy-maptypecontrol-planetest
Switch(config-pmap-cp)#classtypecontrol-planetest
Switch(config-pmap-cp-c)#statisticsenable
RelatedCommands
class-maptype(control-plane)
11.14.29control-plane
CommandPurpose
Usethiscommandtoenterglobalcontrolplanemode.
CommandSyntax
control-plane1949CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenterglobalcontrolplanemode:
Switch#configureterminal
Switch(config)#control-plane
Switch(Config-control-plain)#
RelatedCommands
service-policytypecontrol-planeinput
11.14.30service-policytypecontrol-planeinput
CommandPurpose
Usethiscommandtoapplythecontrolplanepolicy.
Usethenoformofthiscommandtoremoveit.
CommandSyntax
service-policytypecontrol-planeinputNAME
noservice-policytypecontrol-planeinput
Parameter ParameterDescriptionParameterValue
NAME SpecifypolicyinputnameAstringwithupto40
characters1950CommandMode
ControlplaneConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoapplythecontrolplanepolicy:
Switch#configureterminal
Switch(Config-control-plain)#service-policytypecontrol-planeinputtest
Switch(Config-control-plain)#
RelatedCommands
policy-maptypecontrol-plane
11.14.31showpolicy-maptypecontrol-planestatisticsinput
ace
CommandPurpose
Usethiscommandtoshowstatsofcopppolicer
CommandSyntax
showpolicy-maptypecontrol-planestatisticsinputace(class-based|ace-based)
(classNAME|)
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters1951CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoshowstatsofcopppolicer:
Switch#showpolicy-maptypecontrol-planestatisticsinputpolicer
RelatedCommands
clearpolicy-maptypecontrol-planestatisticsinput
11.14.32policercir
CommandPurpose
ToSpecifyapolicerfortheclassifiedtraffic,configCIRCBSandenablepolicer
statistics
CommandSyntax
policercirCIR(cbsCBS|)(statistics|)
Parameter ParameterDescriptionParameterValue
CIR CIRCommitInformation
Rate(pps)0-148809523
CBS CBS-CommitBurstSize
(packets)(defaultvalueis
4400)",0-76001952statistics enablepolicerstat -
CommandMode
Config-pmap-cConfiguration
Default
4400
Usage
limittherateofsomeexceptiontraffictocpu
Examples
configthetrafficrateofARPexceptionandenablepolicerstat:
Switch#configureterminal
Switch(config)#control-planeaccess-listtestacl
Switch(config-cp-acl)#10permitexceptionarp
Switch(config-cp-acl)#class-maptypecontrol-planetestclass
Switch(config-cmap-cp)#matchaccess-grouptestacl
Switch(config-cmap-cp)#policy-maptypecontrol-planetestpolicy
Switch(config-pmap-cp)#classtypecontrol-planetestclass
Switch(config-pmap-cp-c)#policercir100statistics
Switch(config-pmap-cp-c)#control-plane
Switch(Config-control-plain)service-policytypecontrol-planeinputtestpolicy
RelatedCommands
showpolicy-maptypecontrol-planestatisticsinput
11.14.33showpolicy-maptypecontrol-planestatisticsinput
policer
CommandPurpose
Toshowstatisticsofanypolicy,classnamecanbespecified
CommandSyntax
showpolicy-maptypecontrol-planestatisticsinputpolicer(classNAME|)1953clearpolicy-maptypecontrol-planestatisticsinputpolicer
Parameter ParameterDescriptionParameterValue
NAME SpecifyclassmapnameAstringwithupto40
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Toshowstatisticsofanypolicy,classnamecanbespecified
Examples
Toshowstatisticsofanypolicy,classnamecanbespecified:
Switch#showpolicy-maptypecontrol-planestatisticsinputpolicer
RelatedCommands
policercir
11.15IEEE802.1xCommands
11.15.1dot1xsystem-auth-ctrl
CommandPurpose
Usethedot1xsystem-auth-ctrltogloballystartthedot1xauthenticatecontrolfeature.
Toremovethisconfigure,usenoformofthiscommand.
CommandSyntax
dot1xsystem-auth-ctrl1954nodot1xsystem-auth-ctrl
CommandMode
GlobalConfiguration
Default
Disable
Usage
Usethiscommandtogloballystartthedot1xfeature.Tomakethedot1xconfigures
oneachportworknormally,thiscommandshouldbeused.
Examples
Thefollowingissampleoutputfromthedot1xsystem-auth-ctrlcommand:
Switch#configureterminal
Switch(config)#dot1xsystem-auth-ctrl
Switch(config)#nodot1xsystem-auth-ctrl
RelatedCommands
showdot1x
dot1xport-control
11.15.2dot1xinitialize
CommandPurpose
Usethedot1xinitializeprivilegedEXECcommandontheswitchtomanuallyreturn
thespecifiedIEEE802.1x-enabledporttoanunauthorizedstatebeforeinitiatinga
newauthenticationsessionontheport.
CommandSyntax
dot1xinitializeinterfaceIFNAME
Parameter ParameterDescriptionParameterValue1955IFNAME Specifytheinterfacename
tobeinitializedThisfunctionsupports
routedportandaccess
port,andDoesnotSupport
trunkport
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtoinitializetheIEEE802.1xstatemachinesandtosetupafresh
environmentforauthentication.Afteryouenterthiscommand,theportstatus
becomesunauthorized.
Examples
Thefollowingissampleoutputfromthedot1xinitializecommand:
Switch#dot1xinitializeinterfaceeth-0-1
RelatedCommands
showdot1x
11.15.3dot1xmax-req
CommandPurpose
Usethedot1xmax-reauth-reqinterfaceconfigurationcommandontheswitchtoset
themaximumnumberoftimesthattheswitchrestartstheauthenticationprocess
beforeaportchangestotheunauthorizedstate.Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
dot1xmax-reqCOUNT1956nodot1xmax-req
Parameter ParameterDescriptionParameterValue
COUNT Numberoftimesthatthe
switchrestartsthe
authenticationprocess
beforetheportchangesto
theunauthorizedstate.1-10
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueofdot1xmax-reauth-reqis2times.
Usage
Youshouldchangethedefaultvalueofthiscommandonlytoadjustforunusual
circumstancessuchasunreliablelinksorspecificbehavioralproblemswithcertain
clientsandauthenticationservers.
Examples
Thefollowingissampleoutputfromthedot1xmax-reauth-reqcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xmax-req4
RelatedCommands
showdot1x195711.15.4dot1xport-control
CommandPurpose
Usethedot1xport-controlinterfaceconfigurationcommandontheswitchtoenable
manualcontroloftheauthorizationstateoftheport.Usethenoformofthis
commandtoreturntothedefaultsetting.
Supportconfigdot1xinroutedport,whilecantconfigitinalogicalportsuchasagg,
andsoon.
CommandSyntax
dot1xport-control(auto|force-authorized|force-unauthorized|dir(both|in))
nodot1xport-control
Parameter ParameterDescriptionParameterValue
auto EnableIEEE802.1x
authenticationontheport
andcausetheportto
changetotheauthorized
orunauthorizedstate
basedontheIEEE802.1x
authenticationexchange
betweentheswitchand
theclient-
force-authorized DisableIEEE802.1x
authenticationontheport
andcausetheportto
transitiontotheauthorized
statewithoutan
authenticationexchange.
Theportsendsand
receivesnormaltraffic
withoutIEEE802.1x-
basedauthenticationofthe
client-1958force-unauthorized Denyallaccessthrough
thisportbyforcingtheport
tochangetothe
unauthorizedstate,
ignoringallattemptsbythe
clienttoauthenticate.The
switchcannotprovide
authenticationservicesto
theclientthroughtheport-
dir Specifythedot1xcontrol
direction-
both Discardreceivedand
transmittedpackets-
in Discardreceivedpackets
only-
CommandMode
InterfaceConfiguration
Default
Dot1xportcontrolisdisabledbydefault.
Thedefaultvalueofthecontroldirectionisin.
Usage
YoumustgloballyenableIEEE802.1xauthenticationontheswitchbyusingthe
dot1xsystem-auth-controlglobalconfigurationcommandbeforeenablingIEEE
802.1xauthenticationonaspecificport.
Examples
Thefollowingissampleoutputfromthedot1xport-controlcommand:1959Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xport-controlauto
RelatedCommands
showdot1x
11.15.5dot1xprotocol-version
CommandPurpose
Usethedot1xprotocol-versioninterfaceconfigurationcommandontheswitchtoset
theversionofEAPOLpackets.Usethenoformofthiscommandtoreturntothe
defaultsetting.
CommandSyntax
dot1xprotocol-versionVER
nodot1xprotocol-version
Parameter ParameterDescriptionParameterValue
VER TheEAPOLversion 1-2
CommandMode
InterfaceConfiguration
Default
ThedefaultvalueofEAPOLversionis2.
Usage
Youmustspecifythecontroloftheauthorizationstateoftheportbythedot1xport-
controlcommand,beforesettingtheEAPOLversion.
Examples
Thefollowingissampleoutputfromthedot1xprotocol-versioncommand:1960Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xprotocol-version1
RelatedCommands
showdot1x
11.15.6dot1xtimeoutquiet-period
CommandPurpose
Usethedot1xtimeoutquiet-periodinterfaceconfigurationcommandontheswitchto
setthequiettimeinterval.Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
dot1xtimeoutquiet-periodSECONDS
nodot1xtimeoutquiet-period
Parameter ParameterDescriptionParameterValue
SECONDS Thetimeinterval(in
seconds)betweenthe
retrialsofauthentication1-65535seconds
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueofdot1xquite-periodis60seconds.
Usage
Duringthequietperiod,theswitchdoesnotacceptorinitiateanyauthentication
requests.Ifyouwanttoprovideafasterresponsetimetotheuser,enteranumber
smallerthanthedefault.1961Examples
Thefollowingissampleoutputfromthedot1xquiet-periodcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xtimeoutquiet-period100
RelatedCommands
showdot1x
11.15.7dot1xhandshake
CommandPurpose
Usethedot1xhandshakeinterfaceconfigurationcommandontheswitchtoenable
periodichandshakeoftheclient.Usethenoformofthiscommandtoreturntothe
defaultsetting.
CommandSyntax
dot1xhandshake
nodot1xhandshake
CommandMode
InterfaceConfiguration
Default
None
Usage
Thedefaultsettingofdot1xhandshakeisdisabled.whenthehanshakeisdisabled,
theconfigurationofthehandshaketimeoutshouldnottakeeffect.
Examples
Thefollowingissampleoutputfromthedot1xhandshakecommand:1962Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xhandshake
RelatedCommands
dot1xtimeout
dot1xmax-req
11.15.8dot1xtimeouthandshake-period
CommandPurpose
Usethedot1xtimeouthandshake-periodinterfaceconfigurationcommandonthe
switchtosetthehandshaketimeinterval.Usethenoformofthiscommandtoreturn
tothedefaultsetting.
CommandSyntax
dot1xtimeouthandshake-periodSECONDS
nodot1xtimeouthandshake-period
Parameter ParameterDescriptionParameterValue
SECONDS Thetimeinterval(in
seconds)betweenthe
retrialsofhandshakefor
onlineuses5-7200seconds
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueofdot1xhandshake-periodis60seconds.
Usage
Ifhandshakeperiodwaschangedwhenhandshakewasalreadyenabled,itwilltake
intoeffectimmediatelyforonlineusers.1963Examples
Thefollowingissampleoutputfromthedot1xhandshake-periodcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xtimeouthandshake-period100
RelatedCommands
dot1xhandshake
dot1xmax-req
11.15.9dot1xreauthentication
CommandPurpose
Usethedot1xreauthenticationinterfaceconfigurationcommandontheswitchto
enableperiodicre-authenticationoftheclient.Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
dot1xreauthentication
nodot1xreauthentication
CommandMode
InterfaceConfiguration
Default
None
Usage
Thedefaultsettingofdot1xre-authenticationisdisabled.whenthere-authentication
isdisabled,theconfigurationofthere-authenticatetimeoutshouldnottakeeffect.1964Examples
Thefollowingissampleoutputfromthedot1xreauthenticationcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xreauthentication
RelatedCommands
showdot1x
dot1xtimeout
11.15.10dot1xre-authenticate
CommandPurpose
Usethedot1xre-authenticateprivilegedEXECcommandontheswitchstackto
manuallyinitiateare-authenticationofthespecifiedIEEE802.1x-enabledport.
CommandSyntax
dot1xre-authenticateinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Theinterfacetore-
authenticateThisfunctionsupports
routedportandaccess
port,andDoesnotSupport
trunkport
CommandMode
PrivilegedEXEC
Default
None1965Usage
Youcanusethiscommandtore-authenticateaclientwithoutwaitingforthe
configurednumberofsecondsbetweenre-authenticationattempts(re-authperiod)
andautomaticre-authentication.
Examples
Thefollowingissampleoutputfromthedot1xre-authenticatecommand:
Switch#dot1xre-authenticateinterfaceeth-0-1
RelatedCommands
showdot1x
11.15.11dot1xtimeout
CommandPurpose
Usethedot1xtimeoutinterfaceconfigurationcommandontheswitchstackorona
standaloneswitchtosetIEEE802.1xtimers.Usethenoformofthiscommandto
returntothedefaultsetting.
CommandSyntax
dot1xtimeout(re-authperiodSECONDS|server-timeoutSECONDS|supp-timeout
SECONDS|tx-periodSECONDS)
nodot1xtimeout(reauth-period|server-timeout|supp-timeout|tx-period)
Parameter ParameterDescriptionParameterValue
re-authperiodSECONDSSetthenumberofseconds
betweenreauthentication
attempts.60-65535seconds1966server-timeoutSECONDSNumberofsecondsthat
theswitchwaitsforthe
retransmissionofpackets
bytheswitchtothe
authenticationserver.1-65535seconds
supp-timeoutSECONDSNumberofsecondsthat
theswitchwaitsforthe
retransmissionofpackets
bytheswitchtotheIEEE
802.1xclient.1-65535seconds
tx-periodSECONDS Numberofsecondsthat
theswitchwaitsfora
responsetoanEAP-
request/identityframefrom
theclientbefore
retransmittingtherequest.1-65535seconds
CommandMode
InterfaceConfiguration
Default
None
Usage
Youshouldchangethedefaultvalueofthiscommandonlytoadjustforunusual
circumstancessuchasunreliablelinksorspecificbehavioralproblemswithcertain
clientsandauthenticationservers.
Thedot1xtimeoutre-authperiodinterfaceconfigurationcommandaffectsthe
behavioroftheswitchonlyifyouhaveenabledperiodicre-authenticationbyusing
thedot1xreauthenticationinterfaceconfigurationcommand.
Thedefaultvalueofre-authperiodis3600seconds.
Thedefaultvalueoftx-periodis30seconds.1967Thedefaultvalueofsupp-timeoutis30seconds.
Thedefaultvalueofserver-timeoutis30seconds.
Examples
Thefollowingissampleoutputfromthedot1xtimeoutcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xreauthentication
Switch(config-if)#dot1xtimeoutreauth-period4000
RelatedCommands
dot1xreauthentication
showdot1x
11.15.12dot1xguest-vlan
CommandPurpose
Usethedot1xguest-vlaninterfaceconfigurationcommandtospecifyanactiveVLAN
asan802.1xguestVLAN.Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
dot1xguest-vlanVLAN_ID
nodot1xguest-vlan
Parameter ParameterDescriptionParameterValue
VLAN_ID SpecifyanactiveVLANas
an802.1xguestVLAN.2-4094
CommandMode
InterfaceConfiguration1968Default
NoguestVLANisconfigured.
Usage
WhenyouconfigureaguestVLAN,clientsthatarenot802.1x-capableareputinto
theguestVLANwhentheserverdoesnotreceivearesponsetoitsExtensible
AuthenticationProtocoloverLAN(EAPOL)request/identityframe.Clientsthatare
802.1x-capablebutfailauthenticationarenotgrantedaccesstothenetwork.
TheguestVLANfeatureisnotsupportedoninternalVLANs(routedports)ortrunk
ports;itissupportedonlyonaccessports
Examples
ThisexampleshowshowtospecifyVLAN5asan802.1xguestVLAN:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan5
Switch(config-vlan)#exit
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeaccess
Switch(config-if)#dot1xport-controlauto
Switch(config-if)#dot1xguest-vlan5
RelatedCommands
showdot1x
11.15.13showdot1x
CommandPurpose
Usetheshowdot1xuserEXECcommandtodisplayIEEE802.1xsession
configuration,administrativestatus,andoperationalstatusfortheswitchorforthe
specifiedport.
CommandSyntax
showdot1xinterfaceIFNAME
showdot1xsessionbrief((interfaceIFPHYSICAL(macMACADDR|))|)1969showdot1x(all|)
Parameter ParameterDescriptionParameterValue
IFNAME Specifyaninterface Supportphysicalports
MACADDR Specifymacaddress MACAddressin
HHHH.HHHH.HHHH
format
all DisplayIEEE802.1x
informationofallinterfaces-
CommandMode
PrivilegedEXEC
Default
None
Usage
N/A
Examples
Thefollowingissampleoutputfromtheshowdot1xcommand:
Switch#showdot1xall
DUT1#showdot1xall
802.1XPort-BasedAuthenticationEnabled
=====================================
802.1Xinfoforinterfaceeth-0-2
portEnabled:false
portControl:Auto
portMode :Portbased
portStatus:Unauthorized
MacAuthbypass:disabled
reAuthenticate:enabled
reAuthPeriod:3600
Maxusernumber:255
Currentsessionnumber:0
Acceptusernumber:0
Rejectusernumber:0
GuestVLAN:N/A1970AssignVLAN:N/A
QuietPeriod:60
ReqMax :2
TxPeriod :30
SuppTimeout:30
ServerTimeout:30
CD:adminControlledDirections:in
CD:operControlledDirections:in
CD:bridgeDetected:false
========================================
RelatedCommands
dot1xsystem-auth-ctrl
dot1xport-control
11.15.14showdot1xstatistics
CommandPurpose
Usetheshowdot1xuserEXECcommandtodisplayIEEE802.1xEAPOLpackets
statistics,fortheswitchorforthespecifiedport.
CommandSyntax
showdot1xstatisticsinterfaceIFNAME
showdot1xstatistics(all|)
Parameter ParameterDescriptionParameterValue
IFNAME Specifyaninterface Supportphysicalports
all DisplayIEEE802.1x
informationofallinterfaces-
CommandMode
PrivilegedEXEC
Default
None1971Usage
N/A
Examples
Thefollowingissampleoutputfromtheshowdot1xcommand:
Switch#showdot1xstatisticsinterfaceeth-0-1
802.1Xstatisticsforinterfaceeth-0-1
EAPOLFramesRx:0-EAPOLFramesTx:323
EAPOLStartFramesRx:0-EAPOLLogoffFramesRx:0
EAPRsp/IdFramesRx:0-EAPResponseFramesRx:0
EAPReq/IdFramesTx:241-EAPRequestFramesTx:0
InvalidEAPOLFramesRx:0-EAPLengthErrorFramesRx:0
EAPOLLastFrameVersionRx:0-EAPOLLastFrameSrc:0000.0000.0000
RelatedCommands
dot1xsystem-auth-ctrl
dot1xport-control
11.15.15debugdot1x
CommandPurpose
Usethiscommandtoturnonthedebugswitchesofdot1xmodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debugdot1x(event|timer|packet|all)
nodebugdot1x(event|timer|packet|all)
Parameter ParameterDescriptionParameterValue
event putoutthedebug
messageofdot1xevents-1972timer putoutthedebug
messageofdot1xtimer
information-
packet putoutthedebug
messageofdot1xpackets
information,includesent
andreceived-
all putoutalldebugmessage
mentionedabove-
CommandMode
PrivilegedEXEC
Default
None
Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopendot1xdebugswitches:
Switch#debugdot1xall
RelatedCommands
terminalmonitor
showloggingbuffer197311.15.16cleardot1x
CommandPurpose
Usethecleardot1xuserEXECcommandtocleartheIEEE802.1xstatisticsforthe
switchorforthespecifiedport.
CommandSyntax
cleardot1xstatistics(all|)
Parameter ParameterDescriptionParameterValue
all DisplayIEEE802.1x
informationofallinterfaces-
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethecommandcleardot1xtocleartheIEEE802.1xstatisticsfortheswitchor
forthespecifiedport.
Usethecommandshowdot1xtodisplaytheIEEE802.1xstatistics.
Examples
Thefollowingissampletousingthecleardot1xcommand:
Switch#cleardot1xstatistics
Switch#cleardot1xsession-statistics
RelatedCommands
dot1xsystem-auth-ctrl
dot1xport-control1974showdot1x
11.15.17dot1xport-mode
CommandPurpose
Usethedot1xport-modecommandtosetcontrolmodeoftheinterface.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
dot1xport-mode(port|mac)
nodot1xport-mode
Parameter ParameterDescriptionParameterValue
port Setdot1xportbased -
mac Setdot1xmacbased -
CommandMode
InterfaceConfiguration
Default
Bydefaultthemodeisportbased.
Usage
Usethedot1xport-modecommandtosetcontrolmodeoftheinterface.
Usethenoformofthiscommandtorestorethedefaultvalue.
dot1xport-controlmustbeenabledbeforesetthecontrolmode.
Thecontrolmodecannotbechangedifthereareusersonline.
Examples
Thefollowingisasampletousethedot1xport-modecommand:1975Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xport-modemac
RelatedCommands
dot1xport-control
11.15.18dot1xmax-user
CommandPurpose
Usethedot1xmax-usercommandtosetmaxuseroftheinterface.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
dot1xmax-userCOUNT
nodot1xmax-user
Parameter ParameterDescriptionParameterValue
COUNT Maxusernumberofthe
port1-255
CommandMode
InterfaceConfiguration
Default
Bydefaulttheusernumberisuncontrolledonport.Themaxnumberisaccordingto
thesystemhardwareprofile.
Usage
Usethedot1xmax-usercommandtosetmaxuseroftheinterface.
Usethenoformofthiscommandtorestorethedefaultvalue.
dot1xport-controlmustbeenabledbeforesetthemaxvalue.1976Ifthereareusersonline,thesetvalueshouldbelargerthanoratleastbesameas
theuserscount.
Thesetvaluecannotbelargerthanthehardwareresourcecount.
Thiscountshouldlimitthenumberofdot1xmacbaseduserinstateaccept,reject
andreauth,whichshouldusehardwaretableforforwardingordiscarding.Thetotal
numberofusersincludewaitingstatesshouldbe2timesasthisconfiguration.
Examples
Thefollowingisasampletousethedot1xmax-usercommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dot1xmax-user10
RelatedCommands
dot1xport-control
11.15.19dot1xre-activeradius-server
CommandPurpose
Usethedot1xre-activecommandtoactivethespecifiedradiusservers.
CommandSyntax
dot1xre-activeradius-server(hostHOST_IP_ADDR(auth-portPORT|)|interface
IFNAME|all)
Parameter ParameterDescriptionParameterValue
hostHOST_IP_ADDR Re-activetheradius-server
byserveripIPv4Address
PORT Re-activetheradius-server
byserveripandudpport.
Iftheauthportisnot
specifiedthedefaultportis
1812.1-655351977IFNAME Re-activetheradius-
serversbyIEEE802.1x
clientsinterfaceThisfunctionsupports
routedportandaccess
port,andDoesnotSupport
trunkport
all Re-activeallradius-
servers-
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoactivetheradiusserver.Usersdonotneedthewaitforthe
radius-serverdeadtimewiththiscommand.
Examples
Thefollowingissamplestousethedot1xre-activeradius-servercommand:
Switch#dot1xre-activateradius-server
Switch#dot1xre-activateradius-serverhost3.3.3.3auth-port1812
Switch#dot1xre-activateradius-serverinterfaceeth-0-9
RelatedCommands
radius-serverhost
radius-serverdeadtime
showradius-server
11.15.20dot1xaccounting-moderadius
CommandPurpose
Usethedot1xaccounting-moderadiustogloballystartthedot1xaccountingfeature.1978Toremovethisconfigure,usenoformofthiscommand.
CommandSyntax
dot1xaccounting-moderadius
nodot1xaccounting-mode
CommandMode
GlobalConfiguration
Default
Disable
Usage
Usethiscommandtogloballystartthedot1xaccountingfeature.Thiscommanddoes
nottakeeffectimmediatelyforuserswhoarealreadyonline.
Examples
Thefollowingisasampletousethedot1xaccounting-moderadiuscommand:
Switch#configureterminal
Switch(config)#dot1xaccounting-moderadius
Switch(config)#nodot1xaccounting-mode
RelatedCommands
None
11.15.21dot1xaccountingstart-fail
CommandPurpose
Usethedot1xaccountingstart-failtogloballyconfigurethepolicywhenstart
accountingfail.
Torestorethedefault,usenoformofthiscommand.1979CommandSyntax
dot1xaccountingstart-fail(offline|online)
nodot1xaccountingstart-fail
Parameter ParameterDescriptionParameterValue
offline Confiurestart-failpolicy:
rejectusertobeonline
afterstartfail.-
online Confiurestart-failpolicy:
acceptusertobeonline
afterstartfail.-
CommandMode
GlobalConfiguration
Default
offline
Usage
Devicesendsaccountingstartpackettoaccountingserverafteruserisonline,start-
failpolicywillbeperformedwhenreceivednoresponsefromaccoungtingserver.
Thiscommanddoesnottakeeffectimmediatelyforuserswhoarealreadyonline.
Examples
Thefollowingisasampletousethedot1xaccountingstart-failcommand:
Switch#configureterminal
Switch(config)#dot1xaccountingstart-failonline
Switch(config)#nodot1xstart-fail
RelatedCommands
dot1xaccounting-moderadius198011.15.22dot1xaccountingrealtime
CommandPurpose
Usethedot1xaccountingrealtimetogloballystartthedot1xrealtimeaccounting
featureandsetrealtimeaccountinginterval.
Toremovethisconfigure,usenoformofthiscommand.
CommandSyntax
dot1xaccountingrealtimeINTERVAL
nodot1xaccountingrealtime
Parameter ParameterDescriptionParameterValue
INTERVAL Tosetintervalforsending
realtimeaccountingpacket1-65535minute
CommandMode
GlobalConfiguration
Default
Thedefaultintervalofdot1xrealtimeaccountingisnotconfiguerd,whichmeans
realtimeisdisabled.
Usage
Usethiscommandtogloballystartthedot1xrealtimeaccountingfeatureormodify
realtimeaccountinginterval.Thiscommanddoesnottakeeffectimmediatelyfor
userswhoarealreadyonline.
Examples
Thefollowingisasampletousethedot1xaccountingrealtimeradiuscommand:
Switch#configureterminal
Switch(config)#dot1xaccountingrealtime1
Switch(config)#nodot1xaccountingrealtime1981RelatedCommands
dot1xaccounting-moderadius
11.15.23dot1xaccountinginterim-fail
CommandPurpose
Usethedot1xaccountinginterim-failtogloballyconfiguremaxacceptedperiodsof
noresponseforthedot1xrealtimeaccountingrequest,andsetpolicyforrealtime
accountingfail.
Torestorethedefault,usenoformofthiscommand.
CommandSyntax
dot1xaccountinginterim-fail(max-timesTIMES|)(offline|online)
nodot1xaccountinginterim-fail
Parameter ParameterDescriptionParameterValue
TIMES Configureacceptedmax
timesfornoresponsefor
accountingrealtime
request1-255
offline Confiureinterim-failpolicy:
rejectusertobeonline
afterinterimfail.-
online Confiureinterim-failpolicy:
acceptusertobeonline
afterinterimfail.-
CommandMode
GlobalConfiguration
Default
Thedefaultpolicyismax-times3onlineforinterim-fail1982Usage
Onlycontinuousinterim-failswillbecounted.Thiscommanddoesnottakeeffect
immediatelyforuserswhoarealreadyonline.
Examples
Thefollowingisasampletousethedot1xaccountinginterim-failcommand:
Switch#configureterminal
Switch(config)#dot1xaccountinginterim-failmax-times2offline
Switch(config)#nodot1xaccountinginterim-fail
RelatedCommands
dot1xaccounting-moderadiusdot1xaccountingrealtime
11.16ArpInspectionCommands
11.16.1showiparpinspection
CommandPurpose
Usethiscommandtodisplaytheconfigurationofarpinspection.
CommandSyntax
showiparpinspection
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtoshowthegeneralconfigurationofarpinspection.1983Examples
Thisexampleshowshowtodisplaytheinformationofarpinspection:
Switch#showiparpinspection
SourceMacValidation:Disabled
DestinationMacValidation:Disabled
IPAddressValidation:Disabled
VlanConfigurationACLMatchStaticACL
=================================================================
1enabledacl
VlanACLLoggingDHCPLogging
=================================================================
1denydeny
VlanForwardedDroppedDHCPDropsACLDrops
=================================================================
10000
VlanDHCPPermitsACLPermitsSourceMACFailures
=================================================================
10 0 0
VlanDestMACFailuresIPValidationFailuresInvalidProtocolData
=================================================================
10 0 0
RelatedCommands
iparpinspectionvlan
11.16.2showiparpinspectioninterfaces
CommandPurpose
Usethiscommandtodisplaythearpinspectionconfigurationofspecifiedinterface.
CommandSyntax
showiparpinspectioninterfaces(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports1984CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Thiscommandisusedtoshowthearpinspectionconfigurationoninterface.
Examples
Thisexampleshowshowtodisplayallthearpinspectionconfigurationofall
interface.:
Switch#showiparpinspectioninterfaces
InterfaceTrustState
================================
eth-0-1untrusted
eth-0-2untrusted
eth-0-3untrusted
eth-0-4untrusted
eth-0-5untrusted
eth-0-6untrusted
eth-0-7untrusted
eth-0-8untrusted
eth-0-9untrusted
eth-0-10untrusted
eth-0-11untrusted
eth-0-12untrusted
eth-0-13untrusted
eth-0-14untrusted
eth-0-15untrusted
eth-0-16untrusted
eth-0-17untrusted
eth-0-18untrusted
eth-0-19untrusted
eth-0-20untrusted
eth-0-21untrusted
eth-0-22untrusted
eth-0-23untrusted
eth-0-24untrusted
eth-0-25untrusted
eth-0-26untrusted
eth-0-27untrusted
eth-0-28untrusted
eth-0-29untrusted1985eth-0-30untrusted
eth-0-31untrusted
eth-0-32untrusted
eth-0-33untrusted
eth-0-34untrusted
eth-0-35untrusted
eth-0-36untrusted
eth-0-37untrusted
eth-0-38untrusted
eth-0-39untrusted
eth-0-40untrusted
eth-0-41untrusted
eth-0-42untrusted
eth-0-43untrusted
eth-0-44untrusted
eth-0-45untrusted
eth-0-46untrusted
eth-0-47untrusted
eth-0-48untrusted
RelatedCommands
iparpinspectiontrust
11.16.3showiparpinspectionlog
CommandPurpose
Usethiscommandtodisplaythelogconfigurationandloginformationinarp
inspectionlogbuffer.Thedefaultnumberis32.
CommandSyntax
showiparpinspectionlog(NUMBER|)
Parameter ParameterDescriptionParameterValue
NUMBER Specifythenumberof
message1-1024
CommandMode
PrivilegedEXEC1986Default
Nodefaultisdefined.
Usage
Thiscommandisusedtoverifyarpinspectionlogsettings.
Examples
Thisexampleshowshowtodisplaytheloginformationinarpinspectionlogbuffer.:
Switch#showiparpinspectionlog
TotalLogBufferSize:32
Syslograte:5entriesper1seconds.
Noentriesinlogbuffer
RelatedCommands
iparpinspectionlog-buffer
11.16.4showiparpinspectionstatistics
CommandPurpose
Usethiscommandtodisplaysstatisticsforforwarded,dropped,MACvalidation
failure,IPvalidationfailure,ACLpermittedanddenied,andDHCPpermittedand
deniedpacketsforthespecifiedvlan.Ifnovlansarespecifiedorifarangeis
specified,displaysinformationonlyforvlanswithARPInspectionenabled.
CommandSyntax
showiparpinspectionstatistics(vlanVLAN_RNG_STR|)
Parameter ParameterDescriptionParameterValue1987vlanVLAN_RNG_STRSelectedvlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-11
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Displaysstatisticsforforwarded,dropped,MACvalidationfailure,IPvalidationfailure,
ACLpermittedanddenied,andDHCPpermittedanddeniedpacketsforthespecified
VLAN.
Examples
Thisexampleshowshowtodisplaythearpinspectionstatistics:
Switch#showiparpinspectionstatisticsvlan1
VlanForwardedDroppedDHCPDropsACLDrops
=================================================================
10000
VlanDHCPPermitsACLPermitsSourceMACFailures
=================================================================
10 0 0
VlanDestMACFailuresIPValidationFailuresInvalidProtocolData
=================================================================
10 0 0
RelatedCommands
cleariparpinspectionstatistics198811.16.5showiparpinspectionvlan
CommandPurpose
UsethiscommandtodisplaystheconfigurationandtheoperatingstateofARP
Inspectionforthespecifiedvlan.
CommandSyntax
showiparpinspectionvlanVLAN_RNG_STR
Parameter ParameterDescriptionParameterValue
vlanVLAN_RNG_STRSelectedvlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-11
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Ifnovlansarespecifiedorifarangeisspecified,displaysinformationonlyforvlans
withARPInspectionenabled.
Examples
Thisexampleshowshowtodisplaythearpinspectionstatistics:
Switch#showiparpinspectionvlan1
SourceMacValidation:Disabled1989DestinationMacValidation:Disabled
IPAddressValidation:Disabled
VlanConfigurationACLMatchStaticACL
=================================================================
1enabledacl
VlanACLLoggingDHCPLogging
=================================================================
1denydeny
RelatedCommands
iparpinspectionvlan
11.16.6showdebuggingarpinspection
CommandPurpose
UsethiscommandtodisplaythedebuginformationofARPInspection.
CommandSyntax
showdebuggingarpinspection
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Thiscommandisusedtoshowthegeneralconfigurationofarpinspection.
Examples
ThisexampleshowshowtodisplaythedebuginformationofARPInspection:
Switch#showdebuggingarpinspection
arpinspectiondebuggingstatus:
packetdebuggingison
errordebuggingison1990RelatedCommands
debugarpinspection
11.16.7debugarpinspection
CommandPurpose
UsethiscommandtoconfigureARPInspectiondebug.
CommandSyntax
debugarpinspection(all|packet|events|error)
Parameter ParameterDescriptionParameterValue
all Turnalldebuggingon -
packet ARPmessagefields -
events ARPInspectionevents-
error ErrorDHCPmessage -
CommandMode
PrivilegedEXEC
Default
Alldebugdisabled.
Usage
Thiscommandisusedtodebugarpinspection,includingall,error,events,packet.
Examples
ThisexampleshowshowtousethiscommandtodebugallerrorARPpacket:
Switch#debugiparpinspectionerror1991RelatedCommands
showdebuggingarpinspection
11.16.8iparpinspectionfiltervlan
CommandPurpose
UsethiscommandtoappliestheARPACLtoaVLAN.
CommandSyntax
iparpinspectionfilteraclvlanVLAN_RNG_STR(static|)
Parameter ParameterDescriptionParameterValue
acl ARPaclname -
VLAN_RNG_STR Selectedvlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-11
static ApplytheACLstatically-
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
Thiscommandisusedtoshowthegeneralconfigurationofarpinspection.1992Examples
ThisexampleshowshowtoapplytheARPACLtoavlan2:
Switch#configureterminal
Switch(config)#iparpinspectionfilteraclvlan2static
RelatedCommands
arpaccess-list
11.16.9iparpinspectionlog-bufferentries
CommandPurpose
Usethiscommandtosetlog-buffersize.
CommandSyntax
iparpinspectionlog-bufferentriesNUMBER
Parameter ParameterDescriptionParameterValue
NUMBER Numberoflogbuffer 10-1024
CommandMode
GlobalConfiguration
Default
None
Usage
Thenocommandrevertsthelog-buffertothedefaultbuffersize(32).
Examples
Thisexampleshowshowtosetlog-buffersizeto10:
Switch#configureterminal
Switch(config)#iparpinspectionlog-bufferentries101993RelatedCommands
showiparpinspectionlog
11.16.10iparpinspectionlog-bufferlogsinterval
CommandPurpose
UsethiscommandtoconfiguretheDAIloggingsystemmessages.Thenocommand
revertsthedefaultsystemmessageconfiguration.
CommandSyntax
iparpinspectionlog-bufferlogsNUMBERintervalINTERVAL
noiparpinspectionlog-bufferlogs
Parameter ParameterDescriptionParameterValue
NUMBER Numberoflogbuffer 0-1024
INTERVAL Interval(seconds) 0-86400seconds
CommandMode
GlobalConfiguration
Default
Defaultnumberoflogbufferis5,defaultintervalis1
Usage
Anintervalof0indicatesthatthelogwillberecordedintosyslogimmediately.
Iftheintervalisnot0,alogsof0indicatesthatthelogwillnotberecordedinto
syslog;iflogsisnot0,thelogslogwillberecordedintosyslogeveryintervaltime.
Examples
Thisexampleshowshowtoconfigureloggingtosend12messagesevery2seconds:1994Switch#configureterminal
Switch(config)#iparpinspectionlog-bufferlogs12interval2
RelatedCommands
None
11.16.11iparpinspectionvalidate
CommandPurpose
UsethiscommandtoenableadditionalvalidationonthedestinationMACaddress,
thesenderandtargetIPaddresses,andthesourceMACaddress.
CommandSyntax
[no]iparpinspectionvalidate(dst-mac|ip|src-mac)
Parameter ParameterDescriptionParameterValue
dst-mac ValidatedestinationMAC
address-
ip ValidateIPaddresses-
src-mac ValidatesourceMAC
address-
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
Forsrc-mac,checkthesourceMACaddressintheEthernetheaderagainstthe
senderMACaddressintheARPbody.ThischeckisperformedonbothARP
requestsandresponses.Whenenabled,packetswithdifferentMACaddressesare
classifiedasinvalidandaredropped.1995Fordst-mac,checkthedestinationMACaddressintheEthernetheaderagainstthe
targetMACaddressinARPbody.ThischeckisperformedforARPresponses.When
enabled,packetswithdifferentMACaddressesareclassifiedasinvalidandare
dropped.
Forip,checktheARPbodyforinvalidandunexpectedIPaddresses.Addresses
include0.0.0.0,255.255.255.255,andallIPmulticastaddresses.SenderIP
addressesarecheckedinallARPrequestsandresponses,andtargetIPaddresses
arecheckedonlyinARPresponses.
Examples
ThisexampleshowshowtoenableadditionalvalidationonthedestinationMAC
address.:
Switch#configureterminal
Switch(config)#iparpinspectionvalidatedst-mac
RelatedCommands
showiparpinspection
11.16.12iparpinspectionvlan
CommandPurpose
UsethiscommandtoenableARPInspectiononvlans.
CommandSyntax
[no]iparpinspectionvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-111996CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
EnableARPInspectiononvlans.
Examples
ThisexampleshowshowtoenableARPInspectiononVLAN2.:
Switch#configureterminal
Switch(config)#iparpinspectionvlan2
RelatedCommands
showiparpinspectionvlan2
11.16.13iparpinspectionvlanloggingacl-macth
CommandPurpose
UsethiscommandtoconfigureARPInspectionlogfiltering.
CommandSyntax
[no]iparpinspectionvlanVLAN_IDloggingacl-macth(matchlog|none)
Parameter ParameterDescriptionParameterValue1997VLAN_ID Vlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-11
matchlog LogpacketsonACE
loggingconfiguration-
none Donotlogpacketsthat
matchACLs-
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
Ifyouspecifythematchlogkeywordinthiscommandandthelogkeywordinthe
permitordenyARPaccess-listconfigurationcommand,ARPpacketspermittedor
deniedbytheARPInspectionarelogged.
Examples
ThisexampleshowshowtologpermittedARPpacketsonvlan2:
Switch#configureterminal
Switch(config)#iparpinspectionvlan2loggingacl-matchmatchlog
RelatedCommands
iparpinspectionvlan199811.16.14iparpinspectionvlanloggingdhcp-bindings
CommandPurpose
UsethiscommandtoconfigureARPInspectionlogfiltering.
CommandSyntax
[no]iparpinspectionvlanVLAN_IDloggingdhcp-bindings(all|none|permit)
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanrange validvlanIDrangeis1-
4094.Useshortbar(-)to
describecontinuous
VLANs,usecomma(,)to
describenon-continuous
VLANs.Forexample:13-
579-11
all Logallpacketsthatmatch
DHCPbindings-
permit LogDHCPBinding
Permittedpackets-
none Donotlogpacketsthat
matchDHCPbindings-
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
Ifthecommandisset,theinformationthatmatchthedhcp-bingswillbeloged.1999Examples
ThisexampleshowshowtoLogsallpacketsthatmatchDHCPbindingsonvlan2:
Switch#configureterminal
Switch(config)#iparpinspectionvlan2loggingdhcp-bindingsall
RelatedCommands
showiparpinspectionvlan
11.16.15cleariparpinspectionlog-buffer
CommandPurpose
Usethiscommandtodeleteallloginlog-buffer.
CommandSyntax
cleariparpinspectionlog-buffer
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Thiscommandisusedtodeleteallloginlog-buffer.
Examples
Thisexampleshowshowtodeleteallloginlog-buffer:
Switch#cleariparpinspectionlog-buffer
RelatedCommands
iparpinspectionlog-bufferlogs200011.16.16cleariparpinspectionstatistics
CommandPurpose
UsethiscommandtodeleteallstatisticsofARPInspection.
CommandSyntax
cleariparpinspectionstatistics
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
ThiscommandisusedtodeleteallstatisticsofARPInspection.
Examples
ThisexampleshowshowtodeleteallstatisticsofARPInspection:
Switch(config)#cleariparpinspectionstatistics
RelatedCommands
showiparpinspectionstatistics
11.16.17iparpinspectiontrust
CommandPurpose
UsethiscommandtoconfiguretheARPInspectioninterfacetruststate.
CommandSyntax
iparpinspectiontrust2001noiparpinspectiontrust
CommandMode
InterfaceConfiguration
Default
Nodefaultisdefined.
Usage
Inatypicalnetworkconfiguration,youconfigureallswitchportsconnectedtohost
portsasuntrustedandconfigureallswitchportsconnectedtoswitchesastrusted.
Examples
ThisexampleshowshowtoconfiguretheARPInspectioninterfaceeth-0-2untrusted
state:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noiparpinspectiontrust
RelatedCommands
showiparpinspectioninterfaces
11.16.18arpaccess-list
CommandPurpose
UsethiscommandtoconfigureaARPACL
CommandSyntax
arpaccess-listACL_NAME
noarpaccess-listACL_NAME
Parameter ParameterDescriptionParameterValue2002ACL_NAME Aarpaccess-listnameStringwithupto40
characters
CommandMode
GlobalConfiguration
Default
Nodefaultisdefined.
Usage
Innon-DHCPenvironments,dynamicARPinspectioncanvalidateARPpackets
againstuser-configuredARPaccesscontrollists(ACLs)forhostswithstatically
configuredIPaddresses.
Examples
ThisexampleshowshowtoconfigureaARPACL:
Switch#configureterminal
Switch(config)#arpaccess-listacl1
RelatedCommands
showaccess-listarp
11.16.19ipmac
CommandPurpose
UsethiscommandtoconfigureARPACEs.
CommandSyntax
(deny|permit)(request|response|)ip(IP_ADDRIP_ADDR_MASK|any|host
IP_ADDR)mac(MAC_ADDRMAC_ADDR_MASK|any|hostMAC_ADDR)(log|)
Parameter ParameterDescriptionParameterValue2003deny Specifypacketstoreject-
permit Logallpacketsthatmatch
DHCPbindings-
request LogDHCPBinding
Permittedpackets-
response Donotlogpacketsthat
matchDHCPbindings-
IP_ADDR Senderaddress IPv4address
IP_ADDR_MASK Senderwildcardbits IPv4wildcard
any Anysenderhost -
host AsingleSenderhost -
MAC_ADDR SenderhostsMAC
addressMACaddressin
HHHH.HHHH.HHHH
format
MAC_ADDR_MASK Senderwildcard MACwildcardin
HHHH.HHHH.HHHH
format
log Logatmatch -
CommandMode
ARPACLConfiguration
Default
Nodefaultisdefined.
Usage
UsethiscommandtoaddARPACEtoARPACL.2004Examples
ThisexampleshowshowtoconfigureaARPACE:
Switch#configureterminal
Switch(config)#arpaccess-listacl1
Switch(config-arp-acl)#permitiphost192.168.1.1macany
RelatedCommands
showaccess-listarp
11.16.20nosequence-num
CommandPurpose
UsethiscommandtodeleteaARPACE.
CommandSyntax
nosequence-numNUMBER
Parameter ParameterDescriptionParameterValue
NUMBER Specifyasequence
number1-131071
CommandMode
ARPACLConfiguration
Default
Nodefaultisdefined.
Usage
ThiscommandisusedtodeleteARPACEconfigured.
Examples
ThisexampleshowshowtodeleteaARPACE:2005Switch#configureterminal
Switch(config)#arpaccess-listacl1
Switch(config-arp-acl)#nosequence-num10
RelatedCommands
showaccess-listarp
11.16.21showaccess-listarp
CommandPurpose
Usethiscommandtodisplaythearpaclconfiguration.
CommandSyntax
showaccess-listarp(ACL_NAME|)
Parameter ParameterDescriptionParameterValue
ACL_NAME Aarpaccess-listnameStringwithupto40
characters
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
Thiscommandisusedtodisplaythearpaclconfiguredbyarpacl.
Examples
Thisexampleshowshowtodisplayarpace:
Switch#showaccess-listarp
arpaccess-listacl
10permitrequestip1.1.1.10.255.255.255macany2006RelatedCommands
arpaccess-list
11.17DHCPSnoopingCommands
11.17.1cleardhcpsnooping
CommandPurpose
Usethecleardhcpsnoopingglobalconfigurationcommandontheswitchtoclear
dynamicentriesinDHCPbindingdatabaseortheDHCPsnoopingstatisticscounters.
CommandSyntax
cleardhcpsnooping(bindings(learning|manual)(ipv4IP_ADDR|mac
MAC_ADDR|vlanVLAN_ID|interfaceIFNAME|)|statistics)
Parameter ParameterDescriptionParameterValue
bindings CleartheDHCPsnooping
bindingdatabase-
IP_ADDR Clearthebindingentryby
IPaddressIPv4Address
MAC_ADDR Clearthebindingentryby
MACaddressMACAddress
VLAN_ID Clearthebindingentryby
VLAN1-4094
IFNAME Clearthebindingentryby
interfaceSupportphysicalandAGG
interfaces
statistics CleartheDHCPsnooping
statisticscounter-
CommandMode
GlobalConfiguration2007Default
Nodefaultisdefined.
Usage
ThiscommandisusedtoclearDHCPsnoopingbindingorstatistics.
Examples
ThisexampleshowshowtocleartheDHCPsnoopingstatisticscounters:
Switch(config)#cleardhcpsnoopingstatistics
RelatedCommands
showdhcpsnoopingbinding
showdhcpsnoopingstatistics
11.17.2dhcpsnooping
CommandPurpose
Usethedhcpsnoopingglobalconfigurationcommandontheswitchtoglobally
enableDHCPsnooping.Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
dhcpsnooping
nodhcpsnooping
CommandMode
GlobalConfiguration
Default
DHCPsnoopingisdisabled.2008Usage
ForanyDHCPsnoopingconfigurationtotakeeffect,youmustgloballyenableDHCP
snooping.DHCPsnoopingisnotactiveuntilyouenablesnoopingonaVLANby
usingthedhcpsnoopingvlanvlan-idglobalconfigurationcommand.
Examples
ThisexampleshowshowtoenableDHCPsnooping:
Switch#configureterminal
Switch(config)#dhcpsnooping
Youcanverifyyoursettingsbyenteringtheshowdhcpsnoopingconfigprivileged
EXECcommand:
RelatedCommands
dhcpsnoopingvlan
showdhcpsnoopingconfig
11.17.3dhcpsnoopingbinding
CommandPurpose
Usethedhcpsnoopingbindingglobalconfigurationcommandontheswitchto
configuretheDHCPsnoopingbindingdatabaseandtoaddbindingentriestothe
database.
CommandSyntax
dhcpsnoopingbindingmacMAC_ADDRvlanVLAN_IDipv4IP_ADDRinterface
IFNAMEexpirySECONDS
nodhcpsnoopingbindings(ipv4IP_ADDR|macMAC_ADDR|vlanVLAN_ID|
interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
MAC_ADDR SpecifyaMACaddressMACAddress
VLAN_ID SpecifyaVLANnumber.1-40942009IP_ADDR SpecifyanIPaddressIPv4Address
IFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupportphysicalandAGG
interfaces
expirySECONDS Specifytheinterval(in
seconds)afterwhichthe
bindingentryisnolonger
valid.0-86400
CommandMode
GlobalConfiguration
Default
Nodefaultdatabaseisdefined.
Usage
Usethiscommandwhenyouaretestingordebuggingtheswitch.
IntheDHCPsnoopingbindingdatabase,eachdatabaseentry,alsoreferredtoa
binding,hasanIPaddress,anassociatedMACaddress,theleasetime,theinterface
towhichthebindingapplies,andtheVLANtowhichtheinterfacebelongs.
UsetheshowdhcpsnoopingbindingprivilegedEXECcommandtodisplaythe
configuredbindings.
Examples
ThisexampleshowshowtogenerateaDHCPbindingconfigurationwithan
expirationtimeof1000secondsonaportinVLAN1:
Switch#configureterminal
Switch(config)#dhcpsnoopingbindingmac0001.000c.01efvlan1ipv410.10.1.1interfaceeth-0-1expiry1000
RelatedCommands
dhcpsnooping2010showdhcpsnoopingbinding
11.17.4dhcpsnoopingdatabase
CommandPurpose
Usethedhcpsnoopingdatabaseglobalconfigurationcommandontheswitchto
configuretheDHCPsnoopingbindingdatabaseagent.
Usethenoformofthiscommandtodisabletheagent,toresetthetimeoutvalue,or
toresetthewrite-delayvalue.
CommandSyntax
dhcpsnoopingdatabaseauto-saveintervalSECONDS
Parameter ParameterDescriptionParameterValue
intervalSECONDS Specifytheinterval(in
seconds)thathowlongto
savethebindingdatabase.15-1200seconds
CommandMode
GlobalConfiguration
Default
Defaultintervalis600seconds.
Usage
TheDHCPsnoopingdatabaseissaveasflash:/dhcpsnooping.
Examples
Thefollowingissampleoutputfromthedhcpsnoopingdatabasecommand:
Switch#configureterminal
Switch(config)#dhcpsnoopingdatabaseauto-saveinterval1202011RelatedCommands
dhcpsnooping
dhcpsnoopingbinding
11.17.5dhcpsnoopinginformationoption
CommandPurpose
Usethedhcpsnoopinginformationoptionglobalconfigurationcommandonthe
switchtoenableDHCPoption-82datainsertion.Usethenoformofthiscommandto
disableDHCPoption-82datainsertion.
CommandSyntax
dhcpsnoopinginformationoption
nodhcpsnoopinginformationoption
CommandMode
GlobalConfiguration
Default
DHCPoption-82dataisnotinserted.
Usage
YoumustgloballyenableDHCPsnoopingbyusingthedhcpsnoopingglobal
configurationcommandforanyDHCPsnoopingconfigurationtotakeeffect.
Whentheoption-82featureisenabledandaswitchreceivesaDHCPrequestfroma
host,itaddstheoption-82informationinthepacket.Theoption-82information
containstheswitchMACaddress(theremoteIDsuboption)andtheportidentifier,
vlan-mod-port,fromwhichthepacketisreceived(circuitIDsuboption).Theswitch
forwardstheDHCPrequestthatincludestheoption-82fieldtotheDHCPserver.
WhentheDHCPserverreceivesthepacket,itcanusetheremoteID,thecircuitID,
orbothtoassignIPaddressesandimplementpolicies,suchasrestrictingthe2012numberofIPaddressesthatcanbeassignedtoasingleremoteIDoracircuitID.
ThentheDHCPserverechoestheoption-82fieldintheDHCPreply.
TheDHCPserverunicastssendthereplytotheswitchiftherequesthasbeen
relayedtotheserverbytheswitch.Whentheclientandserverareonthesame
subnet,theserverbroadcaststhereply.TheswitchinspectstheremoteIDand
possiblythecircuitIDfieldstoverifythatitoriginallyinsertedtheoption-82data.The
switchremovestheoption-82fieldandforwardsthepackettotheswitchportthat
connectstotheDHCPhostthatsenttheDHCPrequest.
Examples
ThisexampleshowshowtoenableDHCPoption-82datainsertion:
Switch#configureterminal
Switch(config)#dhcpsnoopinginformationoption
Youcanverifyyoursettingsbyenteringtheshowdhcpsnoopingconfigprivileged
EXECcommand.:
Switch#showdhcpsnoopingconfig
dhcpsnoopingservice:enabled
dhcpsnoopingswitch:enabled
Verificationofhwaddrfield:enabled
Insertionofrelayagentinformation(option82):enabled
Relayagentinformation(option82)onuntrustedport:notallowed
dhcpsnoopingvlan1
RelatedCommands
showdhcpsnoopingconfig
showdhcpsnoopingbinding
11.17.6dhcpsnoopinginformationoptionallow-untrusted
CommandPurpose
Usethedhcpsnoopinginformationoptionallow-untrustedglobalconfiguration
commandonanaggregationswitchtoconfigureittoacceptDHCPpacketswith
option-82informationthatarereceivedonuntrustedportsthatmightbeconnectedto
anedgeswitch.Usethenoformofthiscommandtoreturntothedefaultsetting.2013CommandSyntax
dhcpsnoopinginformationoptionallow-untrusted
nodhcpsnoopinginformationoptionallow-untrusted
CommandMode
GlobalConfiguration
Default
TheswitchdropsDHCPpacketswithoption-82informationthatarereceivedon
untrustedportsthatmightbeconnectedtoanedgeswitch.
Usage
YoumightwantanedgeswitchtowhichahostisconnectedtoinsertDHCPoption-
82informationattheedgeofyournetwork.YoumightalsowanttoenableDHCP
securityfeatures,suchasDHCPsnooping,IPsourceguard,ordynamicAddress
ResolutionProtocol(ARP)inspection,onanaggregationswitch.However,ifDHCP
snoopingisenabledontheaggregationswitch,theswitchdropspacketswithoption-
82informationthatarereceivedonanuntrustedportanddoesnotlearnDHCP
snoopingbindingsforconnecteddevicesonatrustedinterface.
Iftheedgeswitchtowhichahostisconnectedinsertsoption-82informationandyou
wanttouseDHCPsnoopingonanaggregationswitch,enterthedhcpsnooping
informationoptionallow-untrustedcommandontheaggregationswitch.The
aggregationswitchcanlearnthebindingsforahosteventhoughtheaggregation
switchreceivesDHCPsnoopingpacketsonanuntrustedport.Youcanalsoenable
DHCPsecurityfeaturesontheaggregationswitch.Theportontheedgeswitchto
whichtheaggregationswitchisconnectedmustbeconfiguredasatrustedport.
Examples
Thisexampleshowshowtoconfigureanaccessswitchtonotchecktheoption-82
informationinuntrustedpacketsfromanedgeswitchandtoacceptthepackets:
Switch#configureterminal
Switch(config)#dhcpsnoopinginformationoptionallow-untrusted2014RelatedCommands
showdhcpsnoopingconfig
11.17.7dhcpsnoopinginformationoptionallow-untrusted
(interface)
CommandPurpose
Usethedhcpsnoopinginformationoptionallow-untrustedinterfaceconfiguration
commandonanaggregationswitchtoconfigureittoacceptDHCPpacketswith
option-82informationthatarereceivedonuntrustedportsthatmightbeconnectedto
anedgeswitch.Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
dhcpsnoopinginformationoptionallow-untrusted
nodhcpsnoopinginformationoptionallow-untrusted
CommandMode
InterfaceConfiguration
Default
Allow-untrustedisnotconfiguredoninterface.DHCPpacketswithOption-82willbe
processedaccordingtoglobalconfiguration.
Usage
YoumightwantanedgeswitchtowhichahostisconnectedtoinsertDHCPoption-
82informationattheedgeofyournetwork.YoumightalsowanttoenableDHCP
securityfeatures,suchasDHCPsnooping,IPsourceguard,ordynamicAddress
ResolutionProtocol(ARP)inspection,onanaggregationswitch.However,ifDHCP
snoopingisenabledontheaggregationswitch,theswitchdropspacketswithoption-
82informationthatarereceivedonanuntrustedportanddoesnotlearnDHCP
snoopingbindingsforconnecteddevicesonatrustedinterface.
Iftheedgeswitchtowhichahostisconnectedinsertsoption-82informationandyou
wanttouseDHCPsnoopingonanaggregationswitch,enterthedhcpsnooping2015informationoptionallow-untrustedcommandontheaggregationswitch.The
aggregationswitchcanlearnthebindingsforahosteventhoughtheaggregation
switchreceivesDHCPsnoopingpacketsonanuntrustedport.Youcanalsoenable
DHCPsecurityfeaturesontheaggregationswitch.Theportontheedgeswitchto
whichtheaggregationswitchisconnectedmustbeconfiguredasatrustedport.
Examples
Thisexampleshowshowtoconfigureaninterfacetonotchecktheoption-82
informationinuntrustedpacketsfromanedgeswitchandtoacceptthepackets:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpsnoopinginformationoptionallow-untrusted
RelatedCommands
showdhcpsnoopingconfig
11.17.8dhcpsnoopingtrust
CommandPurpose
Usethedhcpsnoopingtrustinterfaceconfigurationcommandontheswitchto
configureaportastrustedforDHCPsnoopingpurposes.Usethenoformofthis
commandtoreturntothedefaultsetting.
CommandSyntax
dhcpsnoopingtrust
nodhcpsnoopingtrust
CommandMode
InterfaceConfiguration
Default
DHCPsnoopingtrustisdisabled.2016Usage
ConfigureastrustedportsthosethatareconnectedtoaDHCPserverortoother
switchesorrouters.ConfigureasuntrustedportsthosethatareconnectedtoDHCP
clients.
Examples
ThisexampleshowshowtoenableDHCPsnoopingtrustonaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpsnoopingtrust
RelatedCommands
showdhcpsnoopingconfig
11.17.9dhcpsnoopingverify
CommandPurpose
Usethedhcpsnoopingverifyglobalconfigurationcommandontheswitchto
configuretheswitchtoverifyonanuntrustedportthatthesourceMACaddressina
DHCPpacketmatchestheclienthardwareaddress.Usethenoformofthis
commandtoconfiguretheswitchtonotverifytheMACaddresses.
CommandSyntax
dhcpsnoopingverifymac-address
nodhcpsnoopingverifymac-address
CommandMode
GlobalConfiguration
Default
TheswitchverifiesthesourceMACaddressinaDHCPpacketthatisreceivedon
untrustedportsmatchestheclienthardwareaddressinthepacket.2017Usage
Inaservice-providernetwork,whenaswitchreceivesapacketfromaDHCPclient
onanuntrustedport,itautomaticallyverifiesthatthesourceMACaddressandthe
DHCPclienthardwareaddressmatch.Iftheaddressesmatch,theswitchforwards
thepacket.Iftheaddressesdonotmatch,theswitchdropsthepacket.
Examples
ThisexampleshowshowtodisabletheMACaddressverification:
Switch#configureterminal
Switch(config)#nodhcpsnoopingverifymac-address
RelatedCommands
showdhcpsnoopingconfig
11.17.10dhcpsnoopingvlan
CommandPurpose
Usethedhcpsnoopingvlanglobalconfigurationcommandontheswitchtoenable
DHCPsnoopingonaVLAN.Usethenoformofthiscommandtoreturntothedefault
setting.
CommandSyntax
dhcpsnoopingvlanVLAN-RANGE
nodhcpsnoopingvlanVLAN-RANGE
Parameter ParameterDescriptionParameterValue
VLAN-RANGE SpecifyaVLANIDora
rangeofVLANsonwhich
toenableDHCPsnooping.1-4094
CommandMode
GlobalConfiguration2018Default
DHCPsnoopingisdisabledonallVLANs.
Usage
YoucanenterasingleVLANIDidentifiedbyVLANIDnumber,aseriesofVLANIDs
separatedbycommas,arangeofVLANIDsseparatedbyhyphens,orarangeof
VLANIDsseparatedbyenteringthestartingandendingVLANIDsseparatedbya
space.
YoumustfirstgloballyenableDHCPsnoopingbeforeenablingDHCPsnoopingona
VLAN.
Examples
ThisexampleshowshowtoenableDHCPsnoopingonVLAN10:
Switch#configureterminal
Switch(config)#dhcpsnoopingvlan10
RelatedCommands
showdhcpsnoopingconfig
11.17.11dhcpsnoopingvlaninformationoptionformat-type
circuit-idstring
CommandPurpose
Usethisinterfaceconfigurationcommandontheswitchstackoronastandalone
switchtoconfiguretheoption-82circuit-IDsuboption.Usethenoformofthis
commandtoconfigurethedefaultcircuit-IDsuboption.
CommandSyntax
dhcpsnoopingvlanVLAN_IDinformationoptionformat-typecircuit-idstringSTRING
nodhcpsnoopingvlanVLAN_IDinformationoptionformat-typecircuit-idstring
Parameter ParameterDescriptionParameterValue2019VLAN_ID SpecifyaVLANID. 1-4094
STRING ASCIIstringforcircuitidASCIIstringwithupto63
characters
CommandMode
InterfaceConfiguration
Default
None
Usage
UsermustgloballyenableDHCPsnoopingconfigurationcommandforanyDHCP
snoopingconfigurationtotakeeffect.
Examples
Thisexampleshowshowconfiguretheoption-82circuit-IDsuboption:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpsnoopingvlan2informationoptionformat-typecircuit-idstringvlan2
RelatedCommands
None
11.17.12dhcpsnoopinginformationoptionformatremote-id
CommandPurpose
Usethedhcpsnoopinginformationoptionformatremote-idglobalconfiguration
commandontheswitchstackoronastandaloneswitchtoconfiguretheoption-82
remote-IDsuboption.Usethenoformofthiscommandtoconfigurethedefault
remote-IDsuboption.
CommandSyntax
dhcpsnoopinginformationoptionformatremote-id(stringNAME|hostname)2020nodhcpsnoopinginformationoptionformatremote-id
Parameter ParameterDescriptionParameterValue
NAME SpecifyaremoteID ASCIIstringwithupto63
characters(nospaces)
hostname Specifytheswitch
hostnameastheremote
ID-
CommandMode
GlobalConfiguration
Default
None
Usage
YoumustgloballyenableDHCPsnoopingconfigurationcommandforanyDHCP
snoopingconfigurationtotakeeffect.
Examples
Thisexampleshowshowconfiguretheoption-82remote-IDsuboption:
Switch#configureterminal
Switch(config)#dhcpsnoopinginformationoptionformatremote-idhostname
RelatedCommands
None
11.17.13dhcpsnoopinginformationoptionformatremote-
id(interface)
CommandPurpose
Usethedhcpsnoopinginformationoptionformatremote-idinterfaceconfiguration
commandontheswitchstackoronastandaloneswitchtoconfiguretheoption-822021remote-IDsuboption.Usethenoformofthiscommandtoconfigurethedefault
remote-IDsuboption.
CommandSyntax
dhcpsnoopinginformationoptionformatremote-id(stringNAME|hostname)
nodhcpsnoopinginformationoptionformatremote-id
Parameter ParameterDescriptionParameterValue
NAME SpecifyaremoteID ASCIIstringwithupto63
characters(nospaces)
hostname Specifytheswitch
hostnameastheremote
ID-
CommandMode
InterfaceConfiguration
Default
None
Usage
YoumustgloballyenableDHCPsnoopingconfigurationcommandforanyDHCP
snoopingconfigurationtotakeeffect.Theportconfigurationtakesprecedenceover
theglobalconfiguration.
Examples
Thisexampleshowshowconfiguretheoption-82remote-IDoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-17
Switch(config-if)#dhcpsnoopinginformationoptionformatremote-idhostname
RelatedCommands
None202211.17.14debugdhcpsnooping
CommandPurpose
Usethiscommandtoturnonthedebugswitchesofdhcpsnoopingmodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debugdhcpsnooping(events|error|dump|packet|all)
nodebugdhcpsnooping(events|error|dump|packet|all)
Parameter ParameterDescriptionParameterValue
events Snoopingevents -
error ErrorDHCPmessage -
packet DHCPmessagefields-
dump Dumpmessageinhex
format-
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC
Default
None
Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.2023Examples
Thefollowingissampletoopendhcpsnoopingdebugswitches:
Switch#debugdhcpsnoopingall
RelatedCommands
terminalmonitor
showloggingbuffer
11.17.15showdhcpsnoopingbinding
CommandPurpose
UsetheshowdhcpsnoopingbindingprivilegedEXECcommandtodisplaythe
DHCPsnoopingbindingdatabaseandconfigurationinformationforallinterfacesona
switch.
CommandSyntax
showdhcpsnoopingbinding(all|manual|learning(ipv4IP_ADDR|mac
MAC_ADDR|vlanVLAN_ID|interfaceIFNAME|)summary|database)
Parameter ParameterDescriptionParameterValue
all Displayallentries -
manual Displaystaticentries -
learning Displaydynamicentries-
MAC_ADDR SpecifyMACaddress MACAddress
VLAN_ID SpecifyaVLANnumber.1-4094
IP_ADDR SpecifyanIPaddressIPv4Address
IFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupportphysicaland
aggregationinterfaces2024summary Displaysummary
informationofDHCP
snoopingbindings-
database Displaystoredinformation
ofDHCPsnooping
bindings-
CommandMode
PrivilegedEXEC
Default
None
Usage
IfDHCPsnoopingisenabledandaninterfacechangestothedownstate,theswitch
doesnotdeletethestaticallyconfiguredbindings.
Examples
Thefollowingissampleoutputfromtheshowdhcpsnoopingbindingcommand:
Switch#showdhcpsnoopingbindingall
DHCPsnoopingbindingtable:
VLANMACAddressInterfaceLease(s)IPAddress
============================================================
10001.0001.0001eth-0-2static1.1.1.1
RelatedCommands
dhcpsnoopingbinding
11.17.16showdhcpsnoopingconfig
CommandPurpose
UsetheshowdhcpsnoopingprivilegedEXECcommandtodisplaytheDHCP
snoopingconfiguration.2025CommandSyntax
showdhcpsnoopingconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheconfigurationofDHCPsnooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpsnoopingconfigcommand:
Switch#showdhcpsnoopingconfig
dhcpsnoopingservice:enabled
dhcpsnoopingswitch:enabled
Verificationofhwaddrfield:enabled
Insertionofrelayagentinformation(option82):enabled
Relayagentinformation(option82)onuntrustedport:notallowed
dhcpsnoopingvlan1
RelatedCommands
dhcpsnoopingbinding
11.17.17showdhcpsnoopingstatistics
CommandPurpose
UsetheshowdhcpsnoopingstatisticsprivilegedEXECcommandtodisplayDHCP
snoopingstatistics.
CommandSyntax
showdhcpsnoopingstatistics2026CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaythestatisticsofDHCPsnooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpsnoopingstatisticscommand:
Switch#showdhcpsnoopingstatistics
DHCPsnoopingstatistics:
============================================================
DHCPpackets 11257
BOOTPpackets 0
Packetsforwarded 10381
Packetsinvalid 844
PacketsMACaddressverifyfailed354
Packetsdropped 516
RelatedCommands
cleardhcpsnoopingstatistics
11.17.18showdhcpsnoopingtrusted-sources
CommandPurpose
Usetheshowdhcpsnoopingtrusted-sourcescommandtodisplayDHCPsnooping
trustedinterfaces.
CommandSyntax
showdhcpsnoopingtrusted-sources2027CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaythetrustedinterfacesofDHCPsnooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpsnoopingtrusted-sources
command:
Switch#showdhcpsnoopingtrusted-sources
ListofDHCPsnoopingtrustedinterface(s):
============================================================
eth-0-2
RelatedCommands
dhcpsnoopingtrust
11.18IPSourceGuardCommands
11.18.1ipsourcebinding
CommandPurpose
Usetheipsourcebindingglobalconfigurationcommandontheswitchtoconfigure
staticIPsourcebindingsontheswitch.Usethenoformofthiscommandtodelete
staticbindings.
CommandSyntax
ipsourcebindingmacMAC_ADDRvlanVLAN_IDipIP_ADDRinterfaceIFNAME
noipsourcebindingmacMAC_ADDRvlanVLAN_IDipIP_ADDRinterfaceIFNAME2028Parameter ParameterDescriptionParameterValue
MAC_ADDR SpecifyaMACaddressMACAddress
VLAN_ID SpecifyaVLANnumber1-4094
IP_ADDR SpecifyanIPv4addressIPv4Address
IFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupportphysicaland
aggregationinterfaces
CommandMode
GlobalConfiguration
Default
None
Usage
AstaticIPsourcebindingentryhasanIPaddress,itsassociatedMACaddress,and
itsassociatedVLANnumber.
ThesameMACandIPcanonlybeboundinonebindingentry.DuplicationofMACor
IPinbindingentriesisnotallowed.
NoIPsourcebindingsareconfiguredbydefault.
Examples
Thefollowingissampleoutputfromtheipsourcebindingcommand:
Switch#configureterminal
Switch(config)#ipsourcebindingmac0001.1234.1234vlan1ip172.20.50.5interfaceeth-0-1
RelatedCommands
showipsourcebinding
noipsourcebinding202911.18.2ipv6sourcebinding
CommandPurpose
Usetheipsourcebindingglobalconfigurationcommandontheswitchtoconfigure
staticIPsourcebindingsontheswitch.Usethenoformofthiscommandtodelete
staticbindings.
CommandSyntax
ipsourcebindingmacMAC_ADDRvlanVLAN_IDipv6IPV6_ADDRinterface
IFNAME
noipsourcebindingmacMAC_ADDRvlanVLAN_IDipv6IPV6_ADDRinterface
IFNAME
Parameter ParameterDescriptionParameterValue
MAC_ADDR SpecifyaMACaddressMACAddress
VLAN_ID SpecifyaVLANnumber1-4094
IPV6_ADDR SpecifyanIPv6addressIPv6Address
IFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupportphysicaland
aggregationinterfaces
CommandMode
GlobalConfiguration
Default
None
Usage
AstaticIPsourcebindingentryhasanIPaddress,itsassociatedMACaddress,and
itsassociatedVLANnumber.2030ThesameMACandIPcanonlybeboundinonebindingentry.DuplicationofMACor
IPinbindingentriesisnotallowed.
NoIPsourcebindingsareconfiguredbydefault.
Examples
Thefollowingissampleoutputfromtheipsourcebindingcommand:
Switch#configureterminal
Switch(config)#ipsourcebindingmac0001.1234.1234vlan1ipv61::12:11interfaceeth-0-1
RelatedCommands
showipsourcebinding
noipsourcebinding
11.18.3noipsourcebindingentries
CommandPurpose
Usethiscommandtodeleteoneormoreipsourcebindingentries.
CommandSyntax
noipsourcebindingentries
noipsourcebindingentriesvlanVLAN_ID
noipsourcebindingentriesinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
VLAN_ID SpecifyaVLANnumber1-4094
IFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupportphysicaland
aggregationinterfaces
CommandMode
GlobalConfiguration2031Default
None
Usage
Ifneithervlan-idnorinterface-idisspecified,allstaticipsourcebindingentrieswillbe
deleted.
Examples
cleartheentriesofeth-0-1:
Switch#configureterminal
Switch(config)#noipsourcebindingentriesinterfaceeth-0-1
cleartheentriesofvlan2:
Switch#configureterminal
Switch(config)#noipsourcebindingentriesvlan2
RelatedCommands
ipsourcebinding
showipsourcebinding
11.18.4ipsourcemaximalbinding
CommandPurpose
Tospecifythemaximumnumberofbindingsforeachinterface,usetheipsource
maximalbindingcommandinglobalconfigurationmode.Torestoretothedefault
value,usethenoformofthiscommand.
CommandSyntax
ipsourcemaximalbindingnumberper-portNUMBER
noipsourcemaximalbindingnumberper-port
Parameter ParameterDescriptionParameterValue2032NUMBER Specifymaximumnumber
ofbindings0-30
CommandMode
GlobalConfiguration
Default
10
Usage
Usingforconfiguringmaximalbindingnumber,anddefaultvalueis10.Thenumber0
indicatesnolimiation
Examples
Thefollowingexampleshowshowtorestorethedefaultmaximumnumberof
bindings:
Switch#configureterminal
Switch(config)#noipsourcebindingentries
Thefollowingexampleshowshowtospecifythemaximumnumberofbindings:
Switch#configureterminal
Switch(config)#ipsourcemaximalbindingnumberper-port20
RelatedCommands
showipsourcebinding
11.18.5ipverifysource
CommandPurpose
Usetheipverifysourceinterfaceconfigurationcommandontheswitchstackorona
standaloneswitchtoenableIPsourceguardonaninterface.Usethenoformofthis
commandtodisableIPsourceguard.2033CommandSyntax
ipverifysource(ip|ip-mac|ip-vlan|ip-mac-vlan)
noipverifysource
Parameter ParameterDescriptionParameterValue
ip CheckonlyIPaddress-
ip-mac CheckIPaddressand
MACaddress-
ip-vlan CheckIPaddressand
VLAN-
ip-mac-vlan CheckIPaddress,MAC
address,andVLAN-
CommandMode
InterfaceConfiguration
Default
None
Usage
WhenIPsourceguardisenabledonanaccessport,theip-mac-vlankeywordis
equivalenttotheip-mackeyword.
Bydefault,IPsourceguardisdisabledoninterfaces.
Examples
ThefollowingexampleshowshowtoenableIPsourceguardonaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipverifysourceip-mac2034RelatedCommands
ipsourcebinding
showipsourcebinding
11.18.6showipsourcebinding
CommandPurpose
UsetheshowipsourcebindingprivilegedEXECcommandtodisplaytheIPsource
bindingsontheswitch.
CommandSyntax
showipsourcebinding(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME DisplayIPsourcebindings
foraspecifiedinterface-
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifinterfaceisnotspecified,allip-source-bindingentriesshouldbeshown.
Examples
Thefollowingissampleoutputfromtheshowipsourcebindingcommand:
Switch#showipsourcebinding
Thetotalnumberofipbindingis1,themaxipnumberlimitis127
Thetotalnumberofipv6bindingis0,themaxipv6numberlimitis128
IPsourceguardbindingtable:2035VLANMACAddressTypeInterfaceStateIPAddress
================================================================================
30001.0002.0003staticeth-0-1ip10.0.0.2
RelatedCommands
ipsourcebinding
noipsourcebinding
11.19AAACommands
11.19.1aaanew-model
CommandPurpose
Usethiscommandtoenabletheauthentication,authorization,accounting(AAA)
accesscontrolmodel.
UsethenoformofthiscommandtodisableAAAmodel
CommandSyntax
aaanew-model
noaaanew-model
CommandMode
GlobalConfiguration
Default
None
Usage
EnablestheAAAaccesscontrolmodel
Examples
ThefollowingexampleshowshowtoenableAAAaccesscontrolmodel:2036Switch#configureterminal
Switch(config)#aaanew-model
RelatedCommands
showaaastatus
11.19.2aaaauthenticationlogin
CommandPurpose
Usethiscommandtosetauthentication,authorization,accounting(AAA)
authenticationatlogin.
Usethenoformofthiscommandtodisableauthenticationatlogin
CommandSyntax
aaaauthenticationlogin(default|LISTNAME){enable|line|none|radius|local|
tacacs-plus}
noaaaauthenticationlogin(default|LISTNAME)
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anauthenticationlistwith
thisnameStringwithupto31
characters
enable Enablepassword -
line Linepassword -
none Noauthentication -
radius RADIUSserver -
local Localusername -
tacacs-plus TACACS+ -
CommandMode
GlobalConfiguration2037Default
None
Usage
Usetheaaaauthenticationloginglobalconfigurationcommandtospecifyoneor
moreAAAmethodsforuseonportsrunningIEEE802.1x.
Examples
Thefollowingexampleshowshowtosetauthenticationatlogin:
Switch#configureterminal
Switch(config)#aaanew-model
Switch(config)#aaaauthenticationlogindefaultlocalradiusnone
RelatedCommands
showaaamethod-listsauthentication
11.19.3aaaauthorizationexec
CommandPurpose
Setauthentication,authorization,accounting(AAA)authorizationatlogin.
CommandSyntax
aaaauthorizationexec(default|LISTNAME){none|radius|local|tacacs-plus}
noaaaauthorizationexec(default|LISTNAME)
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anauthenticationlistwith
thisnameStringwithupto31
characters
none Noauthentication -
radius RADIUSserver -2038local Localusername -
tacacs-plus TACACS+ -
CommandMode
GlobalConfiguration
Default
None
Usage
Usetheaaaauthorizationexecglobalconfigurationcommandtospecifyoneormore
AAAauthorizationmethodsforuseonportsrunningIEEE802.1x.
Examples
Thefollowingexampleshowshowtosetauthorizationatlogin:
Switch#configureterminal
Switch(config)#aaanew-model
Switch(config)#aaaauthorizationexecdefaultlocalradiusnone
RelatedCommands
None
11.19.4aaaaccountingexec
CommandPurpose
Setauthentication,authorization,accounting(AAA)accountingatlogin.
CommandSyntax
aaaaccountingexec(default|LISTNAME)(((start-stop|stop-only){radius|
tacacs-plus}(none|))|none)
noaaaaccountingexec(default|LISTNAME)2039Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anaccountinglistwiththis
nameStringwithupto31
characters
start-stop Sendexecaccounting
startandstoprequest
whileloginingswitch-
stop-only Onlysendexecaccounting
stoprequestwhileexit
switch-
none Noaccounting -
radius RADIUSserver -
tacacs-plus TACACS+ -
CommandMode
GlobalConfiguration
Default
None
Usage
Usetheaaaaccountingexecglobalconfigurationcommandtospecifyoneormore
AAAaccountingmethodsforuseonportsrunningIEEE802.1x.
Examples
Thefollowingexampleshowshowtosetaccountingexec:
Switch#configureterminal
Switch(config)#aaanew-model
Switch(config)#aaaaccountingexecdefaultstart-stoptacacs-plusnone2040RelatedCommands
None
11.19.5aaaaccountingcommands
CommandPurpose
Setauthentication,authorization,accounting(AAA)accountingatlogin.
CommandSyntax
aaaaccountingcommands(default|LISTNAME)((tacacs-plus(none|))|none)
noaaaaccountingcommands(default|LISTNAME)
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anaccountinglistwiththis
nameStringwithupto32
characters
none Noaccounting -
tacacs-plus TACACS+ -
CommandMode
GlobalConfiguration
Default
None
Usage
Usetheaaaaccountingcommandsglobalconfigurationcommandtospecifyoneor
moreAAAaccountingmethodsforuseonportsrunningIEEE802.1x.
Examples
Thefollowingexampleshowshowtosetaccountingcommands:2041Switch#configureterminal
Switch(config)#aaanew-model
Switch(config)#aaaaccountingcommandsdefaulttacacs-plusnone
RelatedCommands
None
11.19.6aaaprivilegemapping
CommandPurpose
SetthemappingrangeinAAAserverandswitch.
CommandSyntax
aaaprivilegemappingLEVEL1LEVEL2LEVEL3
noaaaprivilegemapping
Parameter ParameterDescriptionParameterValue
LEVEL1 Themaxserverprivilege
mappingtoswitchlevel1,
default00-12
LEVEL2 Themaxserverprivilege
mappingtoswitchlevel2,
default11-13
LEVEL3 Themaxserverprivilege
mappingtoswitchlevel3,
default102-14
CommandMode
GlobalConfiguration
Default
0:Theserverprivilege0mappingtoswitchlevel1
1:Theserverprivilege1mappingtoswitchlevel220429:Theserverprivilege2~9mappingtoswitchlevel3
Other:Theserverprivilege10~15mappingtoswitchlevel4
Usage
Usetheaaaprivilegemappingglobalconfigurationcommandtosetthemapping
rangeinAAAserverandswitch.
Examples
Thefollowingexampleshowshowtosetaccountingcommands:
Switch#configureterminal
Switch(config)#aaanew-model
Switch(config)#aaaprivilegemapping0114
RelatedCommands
None
11.19.7loginauthentication
CommandPurpose
Enableauthentication,authorization,accounting(AAA)authenticationforlogins.
CommandSyntax
loginauthentication(default|LISTNAME)
nologinauthentication
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anauthenticationlistwith
thisnameStringwithupto31
characters
CommandMode
LineConfiguration2043Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenableauthenticationforlogins:
Switch#configureterminal
Switch(config)#linevty07
Switch(config-line)#loginauthenticationdefault
RelatedCommands
showaaamethod-listsauthentication
11.19.8authorizationexec
CommandPurpose
Enableauthentication,authorization,accounting(AAA)authorizationforlogins.
CommandSyntax
authorizationexec(default|LISTNAME)
noauthorizationexec
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anauthorizationlistwith
thisnameStringwithupto31
characters
CommandMode
LineConfiguration2044Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenableauthorizationforlogins:
Switch#configureterminal
Switch(config)#linevty07
Switch(config-line)#authorizationexecdefault
RelatedCommands
None
11.19.9accountingexec
CommandPurpose
Enableauthentication,authorization,accounting(AAA)accountingforlogins.
CommandSyntax
accountingexec(default|LISTNAME)
noaccountingexec
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anaccountinglistwiththis
nameStringwithupto31
characters
CommandMode
LineConfiguration2045Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenableaccountingforlogins:
Switch#configureterminal
Switch(config)#linevty07
Switch(config-line)#accountingexecdefault
RelatedCommands
None
11.19.10accountingcommands
CommandPurpose
Enableauthentication,authorization,accounting(AAA)accountingforlogins.
CommandSyntax
accountingcommands(default|LISTNAME)
noaccountingcommands
Parameter ParameterDescriptionParameterValue
default Defaultmethodlist -
LISTNAME Anaccountinglistwiththis
nameStringwithupto31
characters
CommandMode
LineConfiguration2046Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenableaccountingforlogins:
Switch#configureterminal
Switch(config)#linevty07
Switch(config-line)#accountingcommandsdefault
RelatedCommands
None
11.19.11showaaamethod-listsauthentication
CommandPurpose
Usethiscommandtoshowauthentication,authorization,accounting(AAA)
authenticationmethodlists.
CommandSyntax
showaaamethod-listsauthentication
CommandMode
PrivilegedEXEC
Default
None2047Usage
Thiscommandisusedtoshowauthentication,authorization,accounting(AAA)
authenticationmethodlists.
Examples
Thefollowingexampleshowshowtoshowauthenticationmethodlists:
Switch#showaaamethod-listsauthentication
authenqueue=AAA_ML_AUTHEN_LOGIN
name=defaultstate=ALIVE:radius
authenqueue=AAA_ML_AUTHEN_LOGIN
name=group_astate=ALIVE:radiuslocallineenablenone
authenqueue=AAA_ML_AUTHEN_LOGIN
name=group_bstate=ALIVE:locallinenone
RelatedCommands
aaaauthenticationlogin
11.19.12showaaastatus
CommandPurpose
Usethiscommandtoshowauthentication,authorization,accounting(AAA)status.
CommandSyntax
showaaastatus
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtoshowauthentication,authorization,accounting(AAA)status.2048Examples
Thefollowingexampleshowshowtoshowauthentication,authorization,accounting
status:
Switch#showaaastatus
aaastats:
Authenticationenable
RelatedCommands
aaanew-model
11.19.13showaaaprivilegemapping
CommandPurpose
Usethiscommandtoshowprivilegemappingrelationshipwithserverprivilege.
CommandSyntax
showaaaprivilegemapping
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandistoshowprivilegemappingrelationshipwithserverprivilege.
Examples
Thefollowingexampleshowshowtoshowauthenticationmethodlists:
Switch#showaaaprivilegemapping
ServerSwitchServer
=====================================2049010
121
2~10310
11~15415
RelatedCommands
aaaprivilegemapping
11.19.14login-securityenable
CommandPurpose
Usethiscommandtoenableordisableloginsecurityfunction.Usethenoformofthis
commandtodisablelogin-securityfunction.Usethenoformofthiscommandto
recovertodefaultvalue.
CommandSyntax
login-securityenable
nologin-securityenable
CommandMode
GlobalConfiguration
Default
Enable
Usage
Whendisablelogin-secuirtyfunction,allusersrecordwillbereset,thatis,toclearfail
countsofusersinunlockedstateandunlockusersinlockedstate.
Examples
Thefollowingexampleshowshowtoenablelogin-securityfunction:
Switch#configureterminal
Switch(config)#login-securityenable
Thefollowingexampleshowshowtodisablelogin-securityfunction:2050Switch#configureterminal
Switch(config)#nologin-securityenable
RelatedCommands
None
11.19.15login-securitymax-fail-num
CommandPurpose
Usethiscommandtoconfigureloginsecuritylockparametersofmaxfailtimesand
lockstatistictime.Usethenoformofthiscommandtorecoverittodefaultvalue.
CommandSyntax
login-securitymax-fail-numMAX_FAIL_NUMPERIOD
nologin-securitymax-fail-num
Parameter ParameterDescriptionParameterValue
MAX_FAIL_NUM Maximumnumberoflogin
failure1-10
PERIOD Loginfailurerecordperiod1-120,uintisminute
CommandMode
GlobalConfiguration
Default
5
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguremaximumnumberofloginfailureand
failurerecordperiodinlogin-security:2051Switch#configureterminal
Switch(config)#login-securitymax-fail-num79
Thefollowingexampleshowshowtorecovermaximumnumberofloginfailureand
failurerecordperiodtodefaultvalue:
Switch#configureterminal
Switch(config)#nologin-securitymax-fail-num
RelatedCommands
None
11.19.16login-securitylock-duration
CommandPurpose
Usethiscommandtoconfugurelockdurationoflogin-security.Usethenoformofthis
commandtorecoverittodefaultvalue.
CommandSyntax
login-securitylock-durationLOCK_PEROID
nologin-securitylock-duration
Parameter ParameterDescriptionParameterValue
LOCK_PEROID Lockduration 0-1000,uintisminute
CommandMode
GlobalConfiguration
Default
5
Usage
Durationduringwhichauserislocked,0meansforever2052Examples
Thefollowingexampleshowshowtoconfigurelockduration:
Switch#configureterminal
Switch(config)#login-securitylock-duration
Thefollowingexampleshowshowtorecoverlockdurationtodefaultvalue:
Switch#configureterminal
Switch(config)#nologin-securitylock-duration
RelatedCommands
None
11.19.17showlogin-security
CommandPurpose
Usethiscommandtoshowrecordsofuserswhichfailedtologinbefore.
CommandSyntax
showlogin-security
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayinformationoflogin-securityandlogin
failurerecords:2053Switch#showlogin-security
Switch#showlogin-security
LoginSecurity:Enable
MaxFailNumber:5
FailPeriod: 5min
LockDuration:5min
LoginSecurityRecords:
Username LocalLockedResumeTime(s)FailCount
================================================================================
admin 100 1
abcdefg 012950
RelatedCommands
None
11.19.18clearlogin-securityrecord
CommandPurpose
Usethiscommandtoclearusersfailurerecordsorunlockusersinlockedstate.
CommandSyntax
clearlogin-securityrecord(USERNAME|)
Parameter ParameterDescriptionParameterValue
USERNAME username thefirstcharactershould
bea-zorA-Zcanonly
include0-9A-Za-z.-_and
themaxlenis31
CommandMode
PrivilegedEXEC
Default
None2054Usage
Ifspecifynousername,clearallrecords.Ifausernameisspecified,cleartherecord
forthisusername.
Examples
Thefollowingexampleshowshowtoclearloginfailurerecords:
Switch#clearlogin-securityrecordadmin1
RelatedCommands
None
11.20RADIUSAuthenticationCommands
11.20.1radius-serverdeadtime
CommandPurpose
ToimproveRADIUSresponsetimeswhensomeserversmightbeunavailableand
causetheunavailableserverstobeskippedimmediately,usetheradius-server
deadtimecommandinglobalconfigurationmode.Tosetdead-timetodefaultvalue,
usethenoformofthiscommand.
CommandSyntax
radius-serverdeadtimeMINUTES
noradius-serverdeadtime
Parameter ParameterDescriptionParameterValue
MINUTES Lengthoftime,inminutes,
forwhichaRADIUSserver
isskippedoverby
transactionrequests1-20minutes2055CommandMode
GlobalConfiguration
Default
5minutes
Usage
UsethiscommandtocausetheswitchtomarkasdeadanyRADIUSserversthat
failtorespondtoauthenticationrequests,thusavoidingthewaitfortherequestto
timeoutbeforetryingthenextconfiguredserver.ARADIUSservermarkedasdead
isskippedbyadditionalrequestsforthedurationofminutes,unlessthereareno
serversnotmarkeddead.
Thedefaultvalueoftheradiusdeadtimeis5minutes.
Examples
Thefollowingissampleoutputfromtheradiusdeadtimecommand:
Switch#configureterminal
Switch(config)#radiusdeadtime10
RelatedCommands
radius-serverhost
11.20.2radius-serverhost
CommandPurpose
TospecifyaRADIUSserverhost,usetheradius-serverhostcommandinglobal
configurationmode.TodeletethespecifiedRADIUShost,usethenoformofthis
command.
CommandSyntax
radius-serverhostHOST_IP_ADDR(source-interfaceIFNAME|source-ip
SRC_IP_ADDR|)2056radius-serverhostHOST_IP_ADDR{key(8|secret|)STRING|retransmit
RETRIES|timeoutSEC|mgmt-ifIPV4_ADDR|auth-portAUTH_PORT|acct-port
ACCT_PORT}(source-interfaceIFNAME|source-ipSRC_IP_ADDR|)
radius-serverhostmgmt-ifIPV4_ADDR
radius-serverhostmgmt-ifIPV4_ADDR{key(8|secret|)STRING|retransmit
RETRIES|timeoutSEC|mgmt-ifIPV4_ADDRauth-portAUTH_PORT}
noradius-serverhost(mgmt-if|)IPV4_ADDR(mgmt-ifIPV4_ADDRauth-port
AUTH_PORT|)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
IPV4_ADDR IPv4addressofthe
RADIUSserverhostIPv4Address
IPV6_ADDR IPv6addressofthe
RADIUSserverhost-
AUTH_PORT (Optional)Portnumberfor
authenticationrequests;
thehostisnotusedfor
authenticationifsetto0.If
unspecified,theport
numberdefaultsto18121-65535
ACCT_PORT (Optional)Portnumberfor
accountingrequests;the
hostisnotusedfor
accountingifsetto0.If
unspecified,theport
numberdefaultsto18131-65535
SECONDS (Optional)Specifiesthe
timeoutvalue.Ifnotimeout
valueisspecified,the
globalvalueisused.The
defaultvalueshouldbe51-1000seconds2057RETRIES (Optional)Specifiesthe
retransmitvalue.Ifno
retransmitvalueis
specified,theglobalvalue
isused.Thedefaultvalue
shouldbe31-100
STRING (Optional)Specifiesthe
authenticationand
encryptionkeyforall
RADIUScommunications
betweentheswitchand
theRADIUSserver.This
keymustmatchthe
encryptionusedonthe
RADIUSdaemonUpto256characters
IFNAME NameofsourceinterfaceSupport
physical/aggregation/loopb
ack/vlan/tunnelports
SRC_IP_ADDR SourceIPaddress IPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
Youcanusemultipleradius-serverhostcommandstospecifymultiplehosts.The
softwaresearchesforhostsintheorderinwhichyouspecifythem.
Ifnohost-specifictimeout,retransmit,orkeyvaluesarespecified,theglobalvalues
applytoeachhost.2058IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
Thefollowingissampleoutputfromtheradius-serverhostcommand:
Switch#configureterminal
Switch(config)#radius-serverhost10.10.1.1keyabcde
RelatedCommands
radius-serverkey
radius-servertimeout
11.20.3radius-serverretransmit
CommandPurpose
TospecifythenumberoftimestheswitchsearchesthelistofRADIUSserverhosts
beforegivingup,usetheradius-serverretransmitcommandinglobalconfiguration
mode.Todisableretransmission,usethenoformofthiscommand.
CommandSyntax
radius-serverretransmitRETRIES
noradius-serverretransmit
Parameter ParameterDescriptionParameterValue
RETRIES Maximumnumberof
retransmission
attempts.Thedefaultis31-100
CommandMode
GlobalConfiguration
Default
3attempts2059Usage
Theswitchtriesallservers,allowingeachonetotimeoutbeforeincreasingthe
retransmitcount.
IftheRADIUSserverisonlyafewhopsfromtheswitch,werecommendthatyou
configuretheRADIUSserverretransmitrateto5.
Thedefaultvalueofradiusretransmitis3attempts.
Examples
Thefollowingissampleoutputfromtheradiusretransmitcommand:
Switch#configureterminal
Switch(config)#radiusretransmit5
RelatedCommands
radius-serverhost
radius-serverkey
11.20.4radius-servertimeout
CommandPurpose
Tosettheintervalforwhichaswitchwaitsforaserverhosttoreply,usetheradius-
servertimeoutcommandinglobalconfigurationmode.Torestorethedefault,usethe
noformofthiscommand.
CommandSyntax
radius-servertimeoutSECONDS
noradius-servertimeout
Parameter ParameterDescriptionParameterValue
SECONDS Numberthatspecifiesthe
timeoutinterval,in
seconds.Thedefaultis5
seconds.1-1000seconds2060CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtosetthenumberofsecondsaswitchwaitsforaserverhostto
replybeforetimingout.
IftheRADIUSserverisonlyafewhopsfromtheswitch,werecommendthatyou
configuretheRADIUSservertimeoutto15seconds.
Thedefaultvalueofradiustimeoutis5seconds.
Examples
Thefollowingissampleoutputfromtheradiustimeoutcommand:
Switch#configureterminal
Switch(config)#radiusretransmit15
RelatedCommands
radius-serverhost
radius-serverkey
11.20.5radius-serverkey
CommandPurpose
TosetthesharedencryptionkeyofRADIUSserver,usetheradius-serverkey
commandinglobalconfigurationmode.Torestorethedefault,usethenoformofthis
command.
CommandSyntax
radius-serverkeyKEY_STRING2061noradius-serverkey
Parameter ParameterDescriptionParameterValue
KEY_STRING RADIUSserverkey-string-
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtosetthesharedencryptionkeyinaswitch.
Sharedencryptionkeyisthefoundationofcommunicatebetweenswitchandserver.
Youneedsetasamesharedencryptionstringinauthenticationserverandswitch.
Examples
Thefollowingissampleoutputfromtheradius-serverkeycommand:
Switch#configureterminal
Switch(config)#radius-serverkeysimple-key
RelatedCommands
radius-serverhost
11.20.6showdot1xradius-serverstatus
CommandPurpose
Usetheshowradius-servercommandtodisplayradiusserverstatesofeachIEEE
802.1xsession.
CommandSyntax
showdot1xradius-serverstatus(interfaceIFNAME|)2062Parameter ParameterDescriptionParameterValue
IFNAME Specifyaninterfaceto
showSupportPhysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtodisplaythecurrentradius-serveranddeadradius-serversof
eachIEEE802.1xsessions.
Examples
Thefollowingissampleoutputfromtheshowradius-servercommand:
Switch#showdot1xradius-serverstatus
=====================================
802.1Xsessiononinterfaceeth-0-9:
currentradiusserver:
retransmitcount:3
serveraddress:3.3.3.3:1812
socketdescriptor:15
laststate:
radiusserversindeadlist:
N/A
=====================================
RelatedCommands
radius-serverhost206311.20.7showradius-server
CommandPurpose
Usetheshowradius-servercommandtodisplayradiusserverstatesofeachIEEE
802.1xsession.
CommandSyntax
showradius-server
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtodisplaythecurrentradius-serveranddeadradius-serversof
eachIEEE802.1xsessions.
Examples
Thefollowingissampleoutputfromtheshowradius-servercommand:
Switch#showradius-server
=====================================
802.1Xsessiononinterfaceeth-0-9:
currentradiusserver:
retransmitcount:3
serveraddress:3.3.3.3:1812
socketdescriptor:15
laststate:
radiusserversindeadlist:
N/A
=====================================
RelatedCommands
radius-serverhost206411.21Tacacs+Commands
11.21.1tacacs-serverhost
CommandPurpose
SpecifiesanddefinestheIPaddressoftheTACACS+serverhost.
CommandSyntax
tacacs-serverhostHOST_IP_ADDR({key(8|secret|)STRING|timeout
SECONDS|portPORT|single-connection|primary}|)(source-interfaceIFNAME|
source-ipSRC_IP_ADDR|)
tacacs-serverhostmgmt-ifIP_ADDR({key(8|secret|)STRING|timeout
SECONDS|portPORT|single-connection|primary}|)
notacacs-serverhost(mgmt-if|)IP_ADDR(portPORT|)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
IP_ADDR TACACS+serverIP
addressIPv4address
single-connection Maintainsasingleopen
connection-
primary TACACS+primaryserver-
PORT TACACSserverport
number(default49)1-65535
SECONDS TimetowaitforaTACACS
servertoreply,therangeis
1to20,default5s1-20
STRING SetTACACS+encryption
keyUpto256characters
8 Specifiesahidden
passwordwillfollow-2065secret Displaythecurrentshared
keywithciphertext-
IFNAME NameofsourceinterfaceSupport
physical/aggregation/loopb
ack/vlan/tunnelports
SRC_IP_ADDR SourceIPaddress IPv4address
CommandMode
GlobalConfiguration
Default
NoTacacs+serverisconfiguredbydefault
Usage
AddordeleteaTACACS+serverhost.
IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
ThefollowingexampleshowshowtospecifyaTACACS+primaryserverhost:
Switch#configureterminal
Switch(config)#tacacs-serverhost10.10.10.1port55keymy_keyprimary
RelatedCommands
showtacacs
11.21.2cleartacacsstatistics
CommandPurpose
ToresetstatisticsonTACACS+servers,usethecleartacacsstatisticsEXEC
command.2066CommandSyntax
cleartacacsstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ResetstatisticsonTACACS+servers.
Examples
ThefollowingexampleshowshowtoresetstatisticsonTACACS+servers:
Switch#cleartacacsstatistics
RelatedCommands
showtacacs
11.21.3showtacacs
CommandPurpose
TodisplaystatisticsforaTACACS+server,usetheshowtacacscommandinEXEC
configurationmode.
CommandSyntax
showtacacs
CommandMode
PrivilegedEXEC2067Default
None
Usage
ThiscommandisusedtoshowTACACS+serversstatistics.
Examples
ThefollowingexampleshowshowtoshowTACACS+servers:
Switch(config)#cleartacacsstatistics
Switch#showtacacs
Tacacs+PrimaryServer:10.10.33.29(mgmt-if)port49
Tacacs+CurrentServer:10.10.33.29(mgmt-if)port49
Tacacs+PrimaryServer:10.10.33.29(mgmt-if)
Serverport:49
Socketopens:42
Socketcloses:42
Socketaborts:0
Socketerrors:0
SocketTimeouts:0
FailedConnectAttempts:3
TotalPacketsSent:66
TotalPacketsRecv:66
RelatedCommands
tacacs-serverhost
11.22PortIsolateCommands
11.22.1port-isolategroup
CommandPurpose
Usetheport-isolategroupinterfaceconfigurationcommandontheswitchtosetthe
isolategroupofainterface.
Usethenoformofthiscommandtoreturntothedefaultsetting.2068CommandSyntax
port-isolategroupGROUP
noport-isolategroup
Parameter ParameterDescriptionParameterValue
GROUP Portisolategroupid 1-30
CommandMode
InterfaceConfiguration
Default
None
Usage
Theportsinthesameisolate-groupcannotcommunicatewitheachother.
Theportsindifferentisolate-groupsshouldnotbeaffectedbythisfeature.
Theisolate-groupscanonlybeconfiguredonphysicalportandLinkAggregation.
Examples
Thefollowingissampleoutputfromtheport-isolategroupcommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#port-isolategroup4
RelatedCommands
port-isolatemode
11.22.2port-isolatemode
CommandPurpose
Usetheport-isolatemodeglobalconfigurationcommandontheswitchtosetisolate
mode.2069Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
port-isolatemode(all|l2)
noport-isolatemode
Parameter ParameterDescriptionParameterValue
all Isolatebridgedpackets
androutedpackets-
l2 Isolatebridgedpackets-
CommandMode
GlobalConfiguration
Default
None
Usage
Ifconfigureport-isolatemodel2,allroutedpacketsshouldnotobeytheportisolate
rules.
Ifconfigureport-isolatemodeall,allpacketsshouldobeytheportisolaterules.
Thedefaultsettingisl2
Examples
Thefollowingissampleoutputfromtheport-isolatemodecommand:
Switch#configureterminal
Switch(config)#port-isolatemodeall
RelatedCommands
port-isolategroup207011.22.3showport-isolate
CommandPurpose
Usetheshowport-isolatecommandontheswitchtochecktheport-isolate
configuration.
CommandSyntax
showport-isolate(groupGROUP)
Parameter ParameterDescriptionParameterValue
GROUP Portisolategroupid 1-30
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowport-isolatecommand:
switch#showport-isolategroup12
PortIsolateMode:L2
------------------------------------------------------------------
PortIsolateGroups:
------------------------------------------------------------------
GroupsID:12
eth-0-1eth-0-2eth-0-3eth-0-4eth-0-5
eth-0-6
------------------------------------------------------------------2071RelatedCommands
port-isolategroup
11.22.4port-isolateam
CommandPurpose
Usethiscommandtoenableunidirectionalisolation.
Usethenoformofthiscommandtodisableit.
CommandSyntax
port-isolateaminterfaceIFNAME
port-isolateaminterfacerangeIFRNG
noport-isolateaminterfaceIFNAME
noport-isolateaminterfacerangeIFRNG
noport-isolateam
Parameter ParameterDescriptionParameterValue
IFNAME portname Support
physical/aggregationports
IFRNG stringtodefingportrangeSupport
physical/aggregationports.
Usecommaandshortbar
todescribearangeof
ports.
CommandMode
InterfaceConfiguration
Default
None2072Usage
Unidirectionalisolationcannotco-workwithisolategrouponasameinterface.
Examples
Thefollowingexampleshowshowtodenythepacketreceivedfrometh-0-9andsend
toeth-0-10:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#port-isolateaminterfaceeth-0-10
RelatedCommands
showport-isolate
11.23PrivateVlanCommands
11.23.1switchportmodeprivate-vlan
CommandPurpose
Toconfiguretheswitchportsmodeasprivatevlan,usetheswitchportmodeprivate-
vlancommandininterfacemode.
CommandSyntax
switchportmodeprivate-vlan(host|promiscuous)
Parameter ParameterDescriptionParameterValue
host Settheportasprivate
vlan,hostport-
promiscuous Settheportasprivate
vlan,promiscuousport-
CommandMode
InterfaceConfiguration2073Default
Bydefaulttheswitchportsmodeisaccessvlan.
Usage
Toconfiguretheswitchportsmodeasprivatevlan,usetheswitchportmodeprivate-
vlancommandininterfacemode.
Thiscanonlybeconfiguredonaswitchport.
Examples
Thefollowingexampleshowshowtoconfiguretheswitchportmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeprivate-vlanhost
Switch(config-if)#switchportmodeprivate-vlanpromiscuous
RelatedCommands
switchportprivate-vlan
11.23.2switchportprivate-vlan
CommandPurpose
Toconfiguretheprimaryandsecondaryvlanofaprivatevlan,usetheswitchport
private-vlancommandininterfacemode.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
switchportprivate-vlanVLAN_ID(isolate|community-vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
private-vlanVLAN_ID Setprivateprimaryvlan1-4094
isolate Setasisolatemode -
community-vlanVLAN_IDSetcommuntiyvlan 1-40942074CommandMode
InterfaceConfiguration
Default
Bydefault,theprimaryvlanis1.
Iftheswitchportmodeisprivate-vlanhost,thedefaultmodeisisolate;Orelsethe
switchportmodeispromiscuous
Usage
Toconfiguretheprimaryandsecondaryvlanofaprivatevlan,usetheswitchport
private-vlancommandininterfacemode.
Thiscanonlybeconfiguredonaswitchport.
Examples
Thefollowingexampleshowshowtoconfiguretheprivatevlan:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#switchportmodeprivate-vlanhost
Switch(config-if)#switchportprivate-vlan1isolate
Switch(config-if)#quit
Switch(config)#interfaceeth-0-2
Switch(config-if)#switchportmodeprivate-vlanhost
Switch(config-if)#switchportprivate-vlan1community-vlan2
Switch(config-if)#quit
Switch(config)#interfaceeth-0-3
Switch(config-if)#switchportmodeprivate-vlanpromiscuous
Switch(config-if)#switchportprivate-vlan1
RelatedCommands
switchportmodeprivate-vlan
11.23.3showprivate-vlan
CommandPurpose
Todisplaytheprivate-vlanconfigure,usetheshowprivate-vlancommandin
privilegedPrivilegedEXEC.2075CommandSyntax
showprivate-vlan(vlanVLAN_ID|interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
VLAN_ID Showbyprimaryvlan 1-4094
IFNAME Showbyinterface Support
physical/aggregationports
CommandMode
PrivilegedEXEC
Default
N/A
Usage

Examples
Thefollowingexampleshowstheresultofthiscommand:
Switch#showprivate-vlan
PrimarySecondaryTypePorts
--------------------------------------------------------------------------------
1N/Apromiscuouseth-0-3
1N/Aisloateeth-0-1
12communityeth-0-2
DUT1#showprivate-vlanvlan1
PrimarySecondaryTypePorts
--------------------------------------------------------------------------------
1N/Apromiscuouseth-0-3
1N/Aisloateeth-0-1
12communityeth-0-2
DUT1#showprivate-vlaninterfaceeth-0-1
--------------------------------------------------------------------------------
Privatevlanmode:isolate
Primaryvlanid:12076RelatedCommands
switchportmodeprivate-vlan
switchportprivate-vlan
11.24DDOSCommands
11.24.1ipicmpintercept
CommandPurpose
ToconfigurethesystemtoresistICMPfloodattack,usetheipicmpintercept
commandinglobalconfigurationmode.Todisablethiscapability,usethenoformof
thiscommand.
CommandSyntax
ipicmpintercept(maxcountNUMBER|)
noipicmpintercept
Parameter ParameterDescriptionParameterValue
NUMBER Specifymaxcounterof
receivedpacketsper
second0-1000
CommandMode
GlobalConfiguration
Default
Bydefault,ipicmpinterceptisunset.
Ifthemaxcountisnotspecified,thedefaultcountis500.
Usage
UsethiscommandifyouwanttosetthesystemtolimittheICMPpacketrate.2077Examples
Thefollowingexampleshowshowtoconfiguretheipicmpintercept:
Switch#configureterminal
Switch(config)#ipicmpinterceptmaxcount100
Thefollowingexampleunsettheipicmpintercept:
Switch#configureterminal
Switch(config)#noipicmpintercept
RelatedCommands
showip-interceptconfig
11.24.2ipsmurfintercept
CommandPurpose
Toconfigurethesystemtoresistsmurfattack,usetheipsmurfinterceptcommandin
globalconfigurationmode.Todisablethiscapability,usethenoformofthis
command.
CommandSyntax
ipsmurfintercept
noipsmurfintercept
CommandMode
GlobalConfiguration
Default
Bydefault,ipsmurfinterceptisset.
Usage
Usethiscommandifyouwanttosetthesystemtoresistsmurfattack.2078Examples
Thefollowingexampleshowshowtoconfiguretheipsumrfintercept:
Switch#configureterminal
Switch(config)#ipsmurfintercept
Thefollowingexampleunsettheipsmurfintercept::
Switch#configureterminal
Switch(config)#noipsmurfintercept
RelatedCommands
showip-interceptconfig
11.24.3ipfraggleintercept
CommandPurpose
Toconfigurethesystemtoresistfraggleattack,usetheipfraggleinterceptcommand
inglobalconfigurationmode.Todisablethiscapability,usethenoformofthis
command.
CommandSyntax
ipfraggleintercept
noipfraggleintercept
CommandMode
GlobalConfiguration
Default
Bydefault,ipfraggleinterceptisunset.
Usage
Usethiscommandifyouwanttosetthesystemtoresistfraggleattack.2079Examples
Thefollowingexampleshowshowtoconfiguretheipfraggleintercept:
Switch#configureterminal
Switch(config)#ipfraggleintercept
Thefollowingexampleunsettheipfraggleintercept:
Switch#configureterminal
Switch(config)#noipfraggleintercept
RelatedCommands
showip-interceptconfig
11.24.4ipudpintercept
CommandPurpose
ToconfigurethesystemtoresistUDPfloodattack,usetheipudpinterceptcommand
inglobalconfigurationmode.Todisablethiscapability,usethenoformofthis
command.
CommandSyntax
ipudpintercept(maxcountNUMBER|)
noipudpintercept
Parameter ParameterDescriptionParameterValue
NUMBER Specifymaxcounterof
receivedpacketsper
second0-1000
CommandMode
GlobalConfiguration
Default
Bydefault,ipudpinterceptisunset.2080Ifthemaxcountisnotspecified,thedefaultcountis500.
Usage
UsethiscommandifyouwanttosetthesystemtolimittheUDPpacketrate.
Examples
Thefollowingexampleshowshowtoconfiguretheipudpintercept:
Switch#configureterminal
Switch(config)#ipudpinterceptmaxcount100
Thefollowingexampleunsettheipudpintercept:
Switch#configureterminal
Switch(config)#noipudpintercept
RelatedCommands
showip-interceptconfig
11.24.5iptcpintercept
CommandPurpose
ToconfigurethesystemtoresistSYNfloodattack,usetheiptcpinterceptcommand
inglobalconfigurationmode.Todisablethiscapability,usethenoformofthis
command.
CommandSyntax
iptcpintercept(maxcountnumber|)
noiptcpintercept
Parameter ParameterDescriptionParameterValue
NUMBER Specifymaxcounterof
receivedpacketsper
second0-10002081CommandMode
GlobalConfiguration
Default
Bydefault,iptcpinterceptisunset.
Ifthemaxcountisnotspecified,thedefaultcountis500.
Usage
UsethiscommandifyouwanttosetthesystemtolimittheTCPpacketratewithonly
SYNbitset.
Examples
Thefollowingexampleshowshowtoconfiguretheiptcpintercept:
Switch#configureterminal
Switch(config)#iptcpinterceptmaxcount100
Thefollowingexampleunsettheiptcpintercept:
Switch#configureterminal
Switch(config)#noiptcpintercept
RelatedCommands
showip-interceptconfig
11.24.6ipsmall-packetintercept
CommandPurpose
Toconfigurethesystemtofilterthesmallpacket,usetheipsmall-packetcommand
inglobalconfigurationmode.Todisablethiscapability,usethenoformofthis
command.
CommandSyntax
ipsmall-packetintercept(lengthnumber|)
noipsmall-packetintercept2082Parameter ParameterDescriptionParameterValue
NUMBER Specifylengthofsmall
packet28-65535
CommandMode
GlobalConfiguration
Default
Bydefault,ipsmall-packetinterceptisunset.
Ifthelengthisnotspecified,thedefaultvalueis28bytes.
Usage
Usethiscommandifyouwanttosetthesystemtodropthepacketwhichlengthis
lessthantheconfiguredvalue.
Examples
Thefollowingexampleconfigurestheipsmall-packetintercept:
Switch#configureterminal
Switch(config)#ipsmall-packetinterceptlength32
Thefollowingexampleunsettheipsmall-packetintercept:
Switch#configureterminal
Switch(config)#nosmall-packetintercept
RelatedCommands
showip-interceptconfig
11.24.7ipmaceqintercept
CommandPurpose
ToconfigurethesystemtointerceptthepacketwhosesourceMACequalsto
destinationMAC,usetheipmaceqinterceptcommandinglobalconfigurationmode.
Todisablethiscapability,usethenoformofthiscommand.2083CommandSyntax
ipmaceqintercept
noipmaceqintercept
CommandMode
GlobalConfiguration
Default
Bydefault,ipmacequalinterceptisunset.
Usage
Usethiscommandifyouwanttosetthesystemtodropthepacketwhosesource
MACequalstodestinationMAC.
Examples
Thefollowingexampleconfigurestheipinterceptmacequals:
Switch#configureterminal
Switch(config)#ipmaceqintercept
Thefollowingexampleunsettheipinterceptmacequals:
Switch#configureterminal
Switch(config)#noipmaceqintercept
RelatedCommands
showip-interceptconfig
11.24.8ipipeqintercept
CommandPurpose
ToconfigurethesystemtointerceptthepacketwhosesourceIPaddressequalsto
destinationIPaddress,usetheipipeqinterceptcommandinglobalconfiguration
mode.Todisablethiscapability,usethenoformofthiscommand.2084CommandSyntax
ipipeqintercept
noipipeqintercept
CommandMode
GlobalConfiguration
Default
Bydefault,ipipequalinterceptisunset.
Usage
UsethiscommandifyouwanttosetthesystemtodropthepacketwhosesourceIP
addressequalstodestinationIPaddress.
Examples
Thefollowingexampleconfigurestheipinterceptipequal:
Switch#configureterminal
Switch(config)#ipipeqintercept
Thefollowingexampleunsettheipinterceptipequal:
Switch#configureterminal
Switch(config)#noipipeqintercept
RelatedCommands
showip-interceptconfig
11.24.9showip-interceptconfig
CommandPurpose
Todisplaytheipinterceptconfigurations,usetheshowip-interceptconfigcommand
inprivilegedPrivilegedEXEC.2085CommandSyntax
showip-interceptconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtodisplayipinterceptconfigurations.
Examples
Thefollowingexampleshowstheconfigurationofipintercept:
Switch#showip-interceptconfig
CurrentDDoSPreventconfiguration:
============================================================
ICMPFloodIntercept:EnableMaxconut:100
UDPFloodIntercept:EnableMaxconut:100
SYNFloodIntercept:EnableMaxconut:100
Small-packetAttackIntercept:EnablePacketLength:32
SumrfAttackIntercept:Enable
FraggleAttackIntercept:Enable
MACEqualIntercept:Disable
IPEqualIntercept:Disable
RelatedCommands
showip-interceptconfig
11.24.10showip-interceptstatistics
CommandPurpose
Todisplaythestatisticsoftheinterceptpackets,usetheshowip-interceptstatistics
commandinprivilegedPrivilegedEXEC.2086CommandSyntax
showip-interceptstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtodisplayipinterceptstatistics.
Examples
Thefollowingissampleoutputfromtheshowip-interceptstatisticscommand:
Switch#showip-interceptstatistics
CurrentDDoSPreventstatistics:
============================================================
ResistSmall-packetAttackpacketsnumber:17307
ResistICMPFloodpacketsnumber:0
ResistSYNFloodpacketsnumber:0
ResistFraggleAttackpacketsnumber:0
ResistUDPFloodpacketsnumber:0
CurrentDDoSPreventmgmt-ifstatistics:
============================================================
ResistICMPFloodpacketsnumber:0
ResistSYNFloodpacketsnumber:0
ResistFraggleAttackpacketsnumber:0
ResistUDPFloodpacketsnumber:0
RelatedCommands
clearip-interceptstatistics208711.24.11clearip-interceptstatistics
CommandPurpose
Toclearthestatisticsoftheinterceptpackets,usetheclearip-interceptstatistics
commandinprivilegedPrivilegedEXEC.
CommandSyntax
clearip-interceptstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoclearipinterceptstatistics.
Examples
Thefollowingexampledisplayshowtouseclearip-interceptstatisticscommand:
Switch#clearip-interceptstatistics
Switch#showip-interceptstatistics
CurrentDDoSPreventstatistics:
============================================================
ResistSmall-packetAttackpacketsnumber:0
ResistICMPFloodpacketsnumber:0
ResistSYNFloodpacketsnumber:0
ResistFraggleAttackpacketsnumber:0
ResistUDPFloodpacketsnumber:0
CurrentDDoSPreventmgmt-ifstatistics:
============================================================
ResistICMPFloodpacketsnumber:0
ResistSYNFloodpacketsnumber:0
ResistFraggleAttackpacketsnumber:0
ResistUDPFloodpacketsnumber:02088RelatedCommands
showip-interceptstatistics
11.25KeyChainCommands
11.25.1keychain
CommandPurpose
Tocreateakeychain,usethekeychaincommandinglobalconfigurationmode.To
deleteakeychain,usethenoformofthiscommand.
CommandSyntax
keychainWORD
nokeychainWORD
Parameter ParameterDescriptionParameterValue
WORD ThenameofkeychainStringwithupto20
characters
CommandMode
GlobalConfiguration
Default
Nokeychainiscreated.
Usage
Routingprotocolsandnetworkmanagementapplicationsoftenusekeychainto
enhancesecuritywhilecommunicatingwithpeers.Forthedetailofthese
configurations,seerelevantchaptersofuserguide.
Examples
Thefollowingexampleshowshowtocreateakeychain:2089Switch#configureterminal
Switch(config)#keychaintest
Switch(config-keychain)#
RelatedCommands
key
key-string
showkeychain
11.25.2key
CommandPurpose
Tocreateakeyinakeychain,usethekeycommandinkeychainconfigurationmode.
Todeleteakeyfromakeychain,usethenoformofthiscommand.
CommandSyntax
keyKEY_ID
nokeyKEY_ID
Parameter ParameterDescriptionParameterValue
KEY_ID keyid 0-31
CommandMode
KeyChainConfiguration
Default
Thereisnokeyinakeychain.
Usage
Thekeywillnotbeusedunlesskeystringwasconfigured.2090Examples
Thefollowingexampleshowshowtocreateakey:
Switch#configureterminal
Switch(config)#keychaintest
Switch(config-keychain)#key1
RelatedCommands
keychain
key-string
accept-lifetime
send-lifetime
11.25.3key-string
CommandPurpose
Toconfigurekeystringforakey,usekey-stringcommandinkeyconfigurationmode.
Todeleteconfiguration,usethenoformofthiscommand.
CommandSyntax
key-stringLINE
nokey-stringLINE
Parameter ParameterDescriptionParameterValue
LINE Keystring Stringwithupto255
characters
CommandMode
KeyConfiguration
Default
Thekeystringisnotbeconfigured.2091Usage
Thiscommandisusedtoconfigurekeystringforakeyandthenthiskeywillbevalid
foreverifthereisnolifetimeset.
Examples
Thefollowingexampleshowshowtoconfigurekey-string:
Switch#configureterminal
Switch(config)#keychaintest
Switch(config-keychain)#key2
Switch(config-keychain-key)#key-string##test_keywords##
RelatedCommands
key
accept-lifetime
send-lifetime
11.25.4accept-lifetime
CommandPurpose
Toconfiguretheacceptlifetimeforakey,useaccept-lifetimecommandinkey
configurationmode.Todeletethisconfiguration,usethenoformofthiscommand.
CommandSyntax
accept-lifetimeSTART-TIMEEXPIRE-TIME
noaccept-lifetime
Parameter ParameterDescriptionParameterValue2092START-TIME ThestartofacceptlifetimeThestartofaccept
lifetime,itsformatshould
likeHH:MM:SS<1-31>
MONTH<1993-2035>or
HH:MM:SSMONTH<1-
31><1993-2035>and
MONTHshouldbeFirst
threelettersofthemonth
EXPIRE-TIME TheendofacceptlifetimeTheendofaccept
lifetime,itsformatshould
likeHH:MM:SS<1-31>
MONTH<1993-2035>,
HH:MM:SSMONTH<1-
31><1993-2035>,
Infiniteorduration<1-
2147483646>and
MONTHshouldbeFirst
threelettersofthemonth
CommandMode
KeyConfiguration
Default
Noacceptlifetimeisconfigured
Usage
Thiscommandisusedtoconfigureacceptlifetimeforakeywhichwillbeinvalidafter
lifetimeexpired.
Examples
Thefollowingexampleshowshowtoconfigureaccept-lifetime:
Switch#configureterminal
Switch(config)#keychaintest2093Switch(config-keychain)#key2
Switch(config-keychain-key)#accept-lifetime0:0:12jan2012infinite
RelatedCommands
key
key-string
11.25.5send-lifetime
CommandPurpose
Toconfigurethesendlifetimeforakey,usesend-lifetimecommandinkey
configurationmode.Todeletethisconfiguration,usethenoformofthiscommand.
CommandSyntax
send-lifetimeSTART-TIMEEXPIRE-TIME
nosend-lifetime
Parameter ParameterDescriptionParameterValue
START-TIME ThestartofsendlifetimeThestartofsend
lifetime,itsformatshould
likeHH:MM:SS<1-31>
MONTH<1993-2035>or
HH:MM:SSMONTH<1-
31><1993-2035>and
MONTHshouldbeFirst
threelettersofthemonth2094EXPIRE-TIME TheendofsendlifetimeTheendofsendlifetime,its
formatshouldlike
HH:MM:SS<1-31>
MONTH<1993-2035>,
HH:MM:SSMONTH<1-
31><1993-2035>,
Infiniteorduration<1-
2147483646>and
MONTHshouldbeFirst
threelettersofthemonth
CommandMode
KeyConfiguration
Default
Nosendlifetimeisconfigured
Usage
Thiscommandisusedtoconfiguresendlifetimeforakeywhichwillbeinvalidafter
lifetimeexpired.
Examples
Thefollowingexampleshowshowtoconfiguresend-lifetime:
Switch#configureterminal
Switch(config)#keychaintest
Switch(config-keychain)#key2
Switch(config-keychain-key)#send-lifetime0:0:12jan2012infinite
RelatedCommands
key
key-string209511.25.6showkeychain
CommandPurpose
Toshowinformationofkeychain,useshowkeychaincommand.
CommandSyntax
showkeychain(WORD|)
Parameter ParameterDescriptionParameterValue
WORD ThenameofkeychainStringwithupto20
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaykeychain:
Switch#showkeychaintest
keychaintest:
key1--text"key-string##test_keywords_1##"
accept-lifetime<00:00:01Jan012012>-<infinite>
send-lifetime<alwaysvalid>-<alwaysvalid>[validnow]
key2--text"key-string##test_keywords_2##"
accept-lifetime<alwaysvalid>-<alwaysvalid>[validnow]
send-lifetime<00:00:01Jan022012>-<infinite>
RelatedCommands
keychain209611.26Port-blockCommands
11.26.1port-block
CommandPurpose
Toconfigureportblock,usetheport-blockcommandininterfaceconfigurationmode.
Todeletethisconfiguration,usethenoformofthiscommand.
CommandSyntax
port-block(known-unicast|known-multicast|unknown-unicast|unknown-multicast|
broadcast)
noport-block(known-unicast|known-multicast|unknown-unicast|unknown-
multicast|broadcast)
Parameter ParameterDescriptionParameterValue
known-unicast Specifythatknownunicast
trafficshouldbeblocked-
known-multicast Specifythatknown
multicasttrafficshouldbe
blocked-
unknown-unicast Specifythatunknown
unicasttrafficshouldbe
blocked-
unknown-multicast Specifythatunknown
multicasttrafficshouldbe
blocked-
broadcast Specifythatbroadcast
trafficshouldbeblocked-
CommandMode
InterfaceConfiguration2097Default
Unknownorknownmulticastandunicasttrafficisnotblocked.
Broadcasttrafficisnotblocked.
Usage
Bydefault,alltrafficwithunknownMACaddressesissenttoallports.Youcanblock
unknownmulticastorunicasttrafficonprotectedornonprotectedports.Ifunknown
multicastorunicasttrafficisnotblockedonaprotectedport,therecouldbesecurity
issues.
Withmulticasttraffic,theportblockingfeatureblocksonlypureLayer2packets.
MulticastpacketsthatcontainIPv4orIPv6informationintheheaderarenotblocked.
Examples
Thisexampleshowshowtoblockunknownmulticasttrafficonaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#port-blockknown-unicast
RelatedCommands
showport-block(interfaceIFPHYSICAL|interfaceIFAGG|)
11.26.2showport-block
CommandPurpose
Usethiscommandtodisplaytheport-blockconfiguration.
CommandSyntax
showport-block(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Specifytheinterface Support
physical/aggregationports2098CommandMode
PrivilegedEXEC
Default
N/A
Usage
Iftheinterfaceisnotspecified,allinterfacesshouldbedisplayed.
Examples
Thisexampleshowshowtoshowport-blockconfigurationinPrivilegedPrivileged
EXEC:
Switch#showport-blockinterfaceeth-0-1
RelatedCommands
port-block(known-unicast|known-multicast|unknown-unicast|unknown-multicast|
broadcast)
11.27DevicemanagementsecuriyCommands
11.27.1iptelnetserveracl
CommandPurpose
TodenyspecifiedtelnetclientIP,usethiscommandinconfigurationmode.Todelete
thisconfiguration,usethenoformofthiscommand.
CommandSyntax
iptelnetserveraclNAME
noiptelnetserveracl
Parameter ParameterDescriptionParameterValue2099NAME access-listname Stringwithupto40
characters
CommandMode
GlobalConfiguration
Default
Noaclisspecified
Usage
UsethiscommandtodenyspecifiedtelnetclientIP.
Theaccess-listshouldbecreatedbeforeusingthiscommand.
Examples
Thisexampleshowshowtoenabetelnetacl,whichdenytelnetclientwithsourceIP
1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listtelnetACL
Switch(config-ip-acl)#10denytcphost1.1.1.1any
Switch(config-ip-acl)#exit
Switch(config)#iptelnetserveracltelnetACL
RelatedCommands
None
11.27.2ipsshserveracl
CommandPurpose
TodenyspecifiedSSHclientIP,usethiscommandinconfigurationmode.Todelete
thisconfiguration,usethenoformofthiscommand.
CommandSyntax
ipsshserveraclNAME2100ipnosshserveracl
Parameter ParameterDescriptionParameterValue
NAME access-listname Stringwithupto40
characters
CommandMode
GlobalConfiguration
Default
Noaclisspecified
Usage
UsethiscommandtodenyspecifiedSSHclientIP.
Theaccess-listshouldbecreatedbeforeusingthiscommand.
Examples
ThisexampleshowshowtoenabeSShacl,whichdenySSHclientwithsourceIP
1.1.1.1:
Switch#configureterminal
Switch(config)#ipaccess-listtelnetACL
Switch(config-ip-acl)#10denytcphost1.1.1.1any
Switch(config-ip-acl)#exit
Switch(config)#ipsshserveracltelnetACL
RelatedCommands
None
11.27.3servicepassword-encryption
CommandPurpose
Toencryptpasswordofusersandlinevtys,usethiscommandinconfigurationmode.
Todeletethisconfiguration,usethenoformofthiscommand.2101CommandSyntax
servicepassword-encryption
noservicepassword-encryption
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoencryptpasswordofusersandlinevtys,afterthiscommandis
configured,existedpasswordornewconfiguedpasswordwillbeencrypted.
Examples
Thefollowingexampleshowshowtoencryptuserpassword:
Switch#configureterminal
Switch(config)#servicepassword-encryption
Switch#showrunning-config
usernameadminprivilege4password856ab359baafb02a3
RelatedCommands
None
11.28MACsecCommands
11.28.1mkapolicy
CommandPurpose
TocreateanMKApolicyandenteritsview,orentertheviewofanexistingMKA
policy.2102CommandSyntax
mkapolicyNAME
nomkapolicyNAME
Parameter ParameterDescriptionParameterValue
NAME MKApolicyname. Acase-sensitivestringof1
to16characters.
CommandMode
GlobalConfiguration
Default
Asystem-definedMKApolicyexists.Thepolicynameisdefault-policy.
Usage
MKApolicyprovidesacentralizedmethodforconfiguringMACsecconfidentiality
offset,validationmode,icvmode,replayprotection,andreplayprotectionwindow
size.
ThesystemsupportsmultipleMKApolicies.
Youcannotdeleteormodifythesystem-definedMKApolicydefault-policy.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
RelatedCommands
mkaapplypolicy
11.28.2replay-protectionenable
CommandPurpose
ToenableMACsecreplayprotectioninanMKApolicy.2103CommandSyntax
replay-protectionenable
noreplay-protectionenable
CommandMode
MKAPolicyConfiguration
Default
Enable.
Usage
ThisfeatureallowsaMACsecporttoacceptanumberofout-of-orderorrepeated
inboundframes.
WhenanMKApolicyisappliedtoaport,thereplayprotectionconfigurationinthe
policyoverwritesthereplayprotectionfeaturealreadyusedbytheport.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
Switch(config-mka-policy)#replay-protectionenable
RelatedCommands
replay-protectionwindow-size
macsecreplay-protectionenable
11.28.3replay-protectionwindow-size
CommandPurpose
TosettheMACsecreplayprotectionwindowsizeinanMKApolicy.
CommandSyntax
replay-protectionwindow-sizeSIZE2104noreplay-protectionwindow-size
Parameter ParameterDescriptionParameterValue
SIZE Thereplayprotection
windowsize.Intherangeof0to
4294967295frames.
CommandMode
MKAPolicyConfiguration
Default
0
Usage
TheMACsecreplayprotectionwindowsizeallowsaMACsecporttoaccepta
numberofout-of-orderinboundframes.
Supposethereplayprotectionwindowsizeisaonaport.Aftertheportreceivesa
packetwithPNx,itcanacceptonlypacketswhosePNisgreaterthanorequaltox-a.
Thereplayprotectionwindowsizetakeseffectonlywhenthereplayprotection
featureisenabledontheport.
Setareplayprotectionwindowsizebasedontheforwardingpathofframes.Ifthe
framesmightbeforwardedmultipletimes,setalargereplayprotectionwindowsize.
WhenanMKApolicyisappliedtoaport,thereplayprotectionwindowsizeinthe
policyoverwritesthewindowsizealreadyconfiguredontheport.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
Switch(config-mka-policy)#replay-protectionenable
Switch(config-mka-policy)#replay-protectionwindow-size100
RelatedCommands
replay-protectionenable
macsecreplay-protectionwindow-size210511.28.4validation-mode
CommandPurpose
TosetMACsecvalidationmodeinanMKApolicy.
CommandSyntax
validation-mode(check|strict)
novalidation-mode
Parameter ParameterDescriptionParameterValue
check Performsvalidationonly
anddoesnotdropillegal
frames.-
strict Performsvalidationand
dropsillegalframes.-
CommandMode
MKAPolicyConfiguration
Default
Strict.
Usage
WhenanMKApolicyisappliedtoaport,theMACsecvalidationmodeinthepolicy
cannotoverwritetheMACsecvalidationmodealreadyconfiguredontheport.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
Switch(config-mka-policy)#validation-modecheck
RelatedCommands
macsecvalidation-mode210611.28.5icv-mode
CommandPurpose
TosetMACsecicvmodeinanMKApolicy.
CommandSyntax
icv-mode(normal|integrity-only)
noicv-mode
Parameter ParameterDescriptionParameterValue
normal Indicatesthatboth
encryptionandintegrity
checkareperformed.-
integrity-only Indicatesthatonlyintegrity
checkisperformed.-
CommandMode
MKAPolicyConfiguration
Default
Normal.
Usage
AfterMACsecisconfiguredonbothends,theMACsecmodesetonthekeyserver
takeseffect.
Dataencryptionandintegritycheck:
Dataencryption:Thesenderencryptsdatapacketsandtransmitstheencrypted
packetsonthelocalareanetwork(LAN).Thereceiverdecryptspacketsand
processesthedecryptedpackets.
Integritycheck:Thereceiverchecksintegrityofthereceivedpackets,determining
whetherthepacketshavesufferedtampering.Beforesendingadatapacket,the2107sendercalculatesanIntegrityCheckValue(ICV)forthepacketusingthespecified
algorithmandsuffixestheICVtothepacket.ThereceiverremovestheICVfromthe
packetandcalculatesanewICVforthepacketusingthesamealgorithm.Thenthe
receivercomparesthenewICVwiththatcarriedinthereceivedpacket.Iftheyare
thesame,thepacketpassesthecheck;otherwise,thepacketisdropped.
WhenanMKApolicyisappliedtoaport,theMACsecicvmodeinthepolicy
overwritestheMACsecicvmodealreadyconfiguredontheport.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
Switch(config-mka-policy)#icv-modeintegrity-only
RelatedCommands
confidentiality-offset
macsecicv-mode
11.28.6confidentiality-offset
CommandPurpose
TosettheMACsecconfidentialityoffsetinanMKApolicy.
CommandSyntax
confidentiality-offset(0|30|50)
noconfidentiality-offset
Parameter ParameterDescriptionParameterValue
0 Encryptthepacketsafter0
bytesinaframe.-
30 Encryptthepacketsafter
30bytesinaframe.-
50 Encryptthepacketsafter
50bytesinaframe.-2108CommandMode
MKAPolicyConfiguration
Default
0
Usage
TheMACsecconfidentialityoffsetspecifiesthenumberofbytesstartingfromthe
frameheader.
MACsecencryptsonlythebytesaftertheoffsetinaframe.
WhenanMKApolicyisappliedtoaport,theMACsecconfidentialityoffsetinthe
policyoverwritestheconfidentialityoffsetpreviouslyconfiguredontheport.However,
MACsecusestheconfidentialityoffsetpropagatedbythekeyserver.
MACsecusestheMACsecconfidentialityoffsetpropagatedbythekeyserver.
Examples
Switch#configureterminal
Switch(config)#mkapolicytest
Switch(config-mka-policy)#icv-modenormal
Switch(config-mka-policy)#confidentiality-offset30
RelatedCommands
icv-mode
macsecconfidentiality-offset
11.28.7mkaapplypolicy
CommandPurpose
Toapplyamkapolicytoaport.
CommandSyntax
mkaapplypolicyNAME2109nomkaapplypolicy
Parameter ParameterDescriptionParameterValue
NAME MKApolicyname. Acase-sensitivestringof1
to16characters.
Thenamecanbea
maximumof16
characters.Thenameis
casesensitiveandcan
onlycontainalphanumeric
characters,hyphens,and
underscores.
CommandMode
GlobalConfiguration
Default
NoMKApolicyisappliedtotheport.
Usage
AnMKApolicydefinesMACsecparameters,includingconfidentialityoffset,validation
mode,icvmode,replayprotection,andreplayprotectionwindowsize.
WhenyouapplyanMKApolicytoaport,theMACsecparametersettingsinthe
policyoverwritetheMACsecparameterspreviouslyconfiguredontheport.Any
modificationstotheMKApolicytakeeffectimmediately.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mkaapplypolicytest
RelatedCommands
mkapolicy211011.28.8macsecreplay-protectionenable
CommandPurpose
ToenableMACsecreplayprotectiononaport.
CommandSyntax
macsecreplay-protectionenable
nomacsecreplay-protectionenable
CommandMode
InterfaceConfiguration
Default
Enable.
Usage
ThisfeatureallowsaMACsecporttoacceptanumberofout-of-orderorrepeated
inboundframes.
IfyouexecutethiscommandonaporttowhichanMKApolicyhasbeenapplied,the
configurationcannotoverwritetheMACsecreplayprotectionconfigurationinthe
MKApolicy.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecreplay-protectionenable
RelatedCommands
macsecreplay-protectionwindow-size
replay-protectionenable211111.28.9macsecreplay-protectionwindow-size
CommandPurpose
TosetMACsecreplayprotectionwindowsizeonaport.
CommandSyntax
macsecreplay-protectionwindow-sizeSIZE
nomacsecreplay-protectionwindow-size
Parameter ParameterDescriptionParameterValue
SIZE Thereplayprotection
windowsize.Intherangeof0to
4294967295frames.
CommandMode
InterfaceConfiguration
Default
0
Usage
ToallowaMACsecporttoacceptanumberofout-of-orderframes,enablereplay
protectionandspecifyareplayprotectionwindowsizeontheport.
Supposethereplayprotectionwindowsizeisonaport.Aftertheportreceivesa
packetwithpacketnumber(PN)x,itcanacceptonlypacketswhosePNisgreater
thanorequaltox-a.
Thereplayprotectionwindowsizetakeseffectonlywhenthereplayprotection
featureisenabledontheport.
Setareplayprotectionwindowsizebasedontheforwardingpathofframes.Ifthe
framesmightbeforwardedmultipletimes,setalargereplayprotectionwindowsize.
IfyouexecutethiscommandonaporttowhichanMKApolicyhasbeenapplied,the
configurationcannotoverwritethereplayprotectionwindowsizeintheMKApolicy.2112Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecreplay-protectionenable
Switch(config-if)#macsecreplay-protectionwindow-size100
RelatedCommands
macsecreplay-protectionenable
replay-protectionwindow-size
11.28.10macsecvalidation-mode
CommandPurpose
TosetMACsecvalidationmodeonaport.
CommandSyntax
macsecvalidation-mode(check|strict)
nomacsecvalidation-mode
Parameter ParameterDescriptionParameterValue
check Performsvalidationonly
anddoesnotdropillegal
frames.-
strict Performsvalidationand
dropsillegalframes.-
CommandMode
InterfaceConfiguration
Default
Strict.2113Usage
IfyouexecutethiscommandonaporttowhichanMKApolicyhasbeenapplied,the
configurationcannotoverwritethevalidationmodeintheMKApolicy.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecvalidation-modecheck
RelatedCommands
validation-mode
11.28.11macsecicv-mode
CommandPurpose
TosetMACsecicvmodeonaport.
CommandSyntax
macsecicv-mode(normal|integrity-only)
nomacsecicv-mode
Parameter ParameterDescriptionParameterValue
normal Indicatesthatboth
encryptionandintegrity
checkareperformed.-
integrity-only Indicatesthatonlyintegrity
checkisperformed.-
CommandMode
InterfaceConfiguration
Default
Normal.2114Usage
AfterMACsecisconfiguredonbothends,theMACsecmodesetonthekeyserver
takeseffect.
Dataencryptionandintegritycheck:
Dataencryption:Thesenderencryptsdatapacketsandtransmitstheencrypted
packetsonthelocalareanetwork(LAN).Thereceiverdecryptspacketsand
processesthedecryptedpackets.
Integritycheck:Thereceiverchecksintegrityofthereceivedpackets,determining
whetherthepacketshavesufferedtampering.Beforesendingadatapacket,the
sendercalculatesanIntegrityCheckValue(ICV)forthepacketusingthespecified
algorithmandsuffixestheICVtothepacket.ThereceiverremovestheICVfromthe
packetandcalculatesanewICVforthepacketusingthesamealgorithm.Thenthe
receivercomparesthenewICVwiththatcarriedinthereceivedpacket.Iftheyare
thesame,thepacketpassesthecheck;otherwise,thepacketisdropped.
IfyouexecutethiscommandonaporttowhichanMKApolicyhasbeenapplied,the
configurationcannotoverwritetheicvmodeintheMKApolicy.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecicv-modeintegrity-only
RelatedCommands
macsecconfidentiality-offset
icv-mode
11.28.12macsecconfidentiality-offset
CommandPurpose
TosettheMACsecconfidentialityoffsetonaport.
CommandSyntax
macsecconfidentiality-offset(0|30|50)2115nomacsecconfidentiality-offset
Parameter ParameterDescriptionParameterValue
0 Encryptthepacketsafter0
bytesinaframe.-
30 Encryptthepacketsafter
30bytesinaframe.-
50 Encryptthepacketsafter
50bytesinaframe.-
CommandMode
InterfaceConfiguration
Default
0
Usage
TheMACsecconfidentialityoffsetspecifiesthenumberofbytesstartingfromthe
frameheader.
MACsecencryptsonlythebytesaftertheoffsetinaframe.
IfyouexecutethiscommandonaporttowhichanMKApolicyhasbeenapplied,the
configurationcannotoverwritetheconfidentialityoffsetintheMKApolicy.
MACsecusestheMACsecconfidentialityoffsetpropagatedbythekeyserver.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecicv-modenormal
Switch(config-if)#macsecconfidentiality-offset30
RelatedCommands
macsecicv-mode2116confidentiality-offset
11.28.13macsecplain-packet-policy
CommandPurpose
TosettheplainpacketpolicybeforeMKAnegotiationsucceeds.
CommandSyntax
macsecplain-packet-policy(permit|drop)
nomacsecplain-packet-policy
Parameter ParameterDescriptionParameterValue
permit Packetsnotcarrying
MACsecheaderswillbe
permittedbeforeMKA
negotiationsucceeds.-
drop Packetsnotcarrying
MACsecheaderswillbe
droppedbeforeMKA
negotiationsucceeds.-
CommandMode
InterfaceConfiguration
Default
Drop.
Usage
Onthedropmode,packetsnotcarryingMACsecheaderswillbedroppedbefore
MKAnegotiationsucceeds.
Onthepermitmode,PacketsnotcarryingMACsecheaderswillbepermittedbefore
MKAnegotiationsucceeds.2117Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecplain-packet-policydrop
RelatedCommands
None
11.28.14macsecdesire
CommandPurpose
ToenableMACsecdesire.TheportexpectsMACsecprotectionforoutboundframes.
CommandSyntax
macsecdesire
nomacsecdesire
CommandMode
InterfaceConfiguration
Default
No.
Usage
ThiscommandallowsaMACsecporttoexpectMACsecprotectionforoutbound
frames.ThekeyserverdetermineswhetherMACsecprotectstheoutboundframes.
MACsecprotectstheoutboundframesoftheportwhenthefollowingrequirements
aremet:
ThekeyserverisMACseccapable.
BoththelocalparticipantanditspeerareMACseccapable.
AminimumofoneparticipantisenabledwiththeMACsecdesirefeature.2118Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecdesire
RelatedCommands
None
11.28.15mkapriority
CommandPurpose
TosettheMKAkeyserverpriority.
CommandSyntax
mkapriorityPRIORITY
nomkapriority
Parameter ParameterDescriptionParameterValue
PRIORITY MKApriority. Intherangeof0to255.
Thepriorityisinversely
relatedtoitsvalue.
CommandMode
InterfaceConfiguration
Default
0
Usage
Ifyouuse802.1X-generatedCAK,theaccessdeviceportautomaticallybecomes
thekeyserver.
Theportthathashigherpriority(lowerpriorityvalue)becomesthekeyserverifyou
useapresharedkeyastheCAK.Iftheportanditspeershavethesamepriority,2119MACseccomparestheSCIvaluesontheports.TheportwiththelowestSCIvalue
becomesthekeyserver.
Aportwithpriority255cannotbecomethekeyserver.Forasuccessfulkeyserver
selection,makesureaminimumofoneparticipantskeyserverpriorityisnot255.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#macsecpriority16
RelatedCommands
None
11.28.16mkapsk
CommandPurpose
TosetapresharedkeyastheCAK.
CommandSyntax
mkapskcknCKNcaksimpleCAK
mkapskcipher-suite(gcm-aes-128|gcm-aes-256)cknCKNcaksimpleCAK
mkapskcipher-suite(gcm-aes-xpn-128|gcm-aes-xpn-256)cknCKNcaksimple
CAK
nomkapsk
Parameter ParameterDescriptionParameterValue
CKN Thepresharedkeyname.Ahexadecimalstringwith
anevennumberofcase-
insensitivecharacters.The
namelengthisinthe
rangeof2to64
characters.2120CAK Thepresharedkey. Theplaintextformofthe
keyisahexadecimalstring
withanevennumberof
case-insensitive
characters,andthekey
lengthisintherangeof2
to64characters.
gcm-aes-128 GCM-AES-128cipher
suite.-
gcm-aes-256 GCM-AES-256cipher
suite.-
gcm-aes-xpn-128 GCM-AES-xpn-128cipher
suite.-
gcm-aes-xpn-256 GCM-AES-xpn-256cipher
suite.-
CommandMode
InterfaceConfiguration
Default
No.
Usage
YoucanexecutethiscommandtoconfigureapresharedkeyoneachMACsecport.
MakesuretheconnectedportsareconfiguredwiththesameCKNandCAK.Ifthe
connectedportsareconfiguredwithdifferentCKNsandCAKs,theycannot
successfullyestablishMKAsessions.
TosuccessfullyestablishanMKAsessionbetweentwoconnectedports,makesure
onlytheportsareconfiguredwiththesameCKNinthenetwork.
TheGCM-AES-128andGCM-AES-XPN-128ciphersuitesrequirethattheCKNand
CAKeachmustbe32characterslong.IftheconfiguredCKNorCAKisnot322121characterslong,thesystemperformsthefollowingoperationswhenitrunsthecipher
suite:
AutomaticallyincreasesthelengthoftheCKNorCAKbyzeropaddingifthe
CKNorCAKcontainslessthan32characters.
Usesonlythefirst32charactersiftheCKNorCAKcontainsmorethan32
characters.
TheGCM-AES-256andGCM-AES-XPN-256ciphersuitesrequirethattheCKNand
CAKeachmustbe64characterslong.IftheconfiguredCKNorCAKisnot64
characterslong,thesystemperformsthefollowingoperationswhenitrunsthecipher
suite:
AutomaticallyincreasesthelengthoftheCKNorCAKbyzeropaddingifthe
CKNorCAKcontainslessthan64characters.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mkapskckne9accaksimple03e45543333f3fa57
RelatedCommands
None
11.28.17mkaenable
CommandPurpose
ToenableMKAonaport.
CommandSyntax
mkaenable
nomkaenable
CommandMode
InterfaceConfiguration2122Default
No.
Usage
MKAestablishesandmanagesMACsecsecurechannelsonaport.Italsonegotiates
encryptionkeysusedbyMACsec.
TheenablingofMKAonaporttriggersMKAnegotiation.AfterMKAnegotiation
succeeds,anMKAsessionissuccessfullyestablished.
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mkaenable
RelatedCommands
None
11.28.18resetmkasession
CommandPurpose
ToresetMKAsessiononaport.
CommandSyntax
resetmkasessioninterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. -
CommandMode
PrivilegedEXEC
Default
None2123Usage
ThiscommandfirstclearaMKAsession,andthenimmediatelytriggersanew
sessionestablishmentnegotiation.
Examples
Switch#resetmkasessioninterfaceeth-0-1
RelatedCommands
None
11.28.19showmkapolicy
CommandPurpose
ToshowMKApolicyinformation.
CommandSyntax
showmka(default-policy|policy(NAME|))
Parameter ParameterDescriptionParameterValue
default-policy Thesystem-definedMKA
policy.-
NAME Mkapolicyname. Acase-sensitivestringof1
to16characters.Ifyoudo
notspecifyanMKApolicy,
thiscommandshows
informationaboutallMKA
policies.
CommandMode
PrivilegedEXEC
Default
None2124Usage
Parameterdescription:
Parameter Description
PolicyName NameoftheMKApolicy.
ReplayProtection Whetherthereplayprotectionfeatureis
enabled.
WindowSize Replayprotectionwindowsizeinnumber
offrames.
IcvMode ICVmode.
ConfOffset Confidentialityoffsetinbytes.
Validation Validationmode:
Check.
Strict.
Examples
Switch#showmkapolicy
PolicyNameReplayProtectionWindowSizeIcvModeConfOffsetValidation
default-policyyes0normal0strict
RelatedCommands
None
11.28.20showmkastatistics
CommandPurpose
ToshowMKAstatisticsonports.
CommandSyntax
showmkastatisticsinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue2125IFNAME Interfacename. Ifyoudonotspecifyaport,
thiscommanddisplays
MKAstatisticsonallports.
CommandMode
PrivilegedEXEC
Default
None
Usage
Parameterdescription:
Parameter Description
Interface Interfacename
MKPDUswithinvalidCKN NumberofreceivedMKApacketswith
invalidCKNs.
MKPDUswithinvalidICV NumberofMKApacketsthatfailedICV
check.
MKPDUswithRxerror NumberofreceivederrorMKApackets.
CKNforparticipant CAKnameoftheMKAinstance.
TxMKPDUs NumberoftheMKApacketssentbythe
MKAinstance.
RxMKPDUs NumberoftheMKApacketsreceivedby
theMKAinstance.
MKPDUswithinvalidMN NumberofMKApacketswithillegalMNs
receivedbytheMKAinstance.
MKPDUswithTxerror NumberoferrorMKApacketssentbythe
MKAinstance.2126SAKsdistributed NumberofSAKsdistributedbytheMKA
instance.
SAKsreceived NumberofSAKsreceivedbytheMKA
instance.
Examples
Switch#showmkastatisticsinterfaceeth-0-1
Interfaceeth-0-1statistics:
MKPDUswithinvalidCKN:0
MKPDUswithinvalidICV:0
MKPDUswithRxerror:3
CKNforparticipant:ABCD0000000000000000000000000000
TxMKPDUs :557
RxMKPDUs :553
MKPDUswithinvalidMN:0
MKPDUswithTxerror:0
SAKsdistributed:1
SAKsreceived :1
RelatedCommands
None
11.28.21showmacsecstatistics
CommandPurpose
ToshowMACsecstatisticsonports.
CommandSyntax
showmacsecstatisticsinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Ifyoudonotspecifyaport,
thiscommanddisplays
MKAstatisticsonallports.2127CommandMode
PrivilegedEXEC
Default
None
Usage
Parameterdescription:
Parameter Description
Interface Interfacename
Input ReceiveMACsecstatisticsinformation:
SCOKpackets Thenumberofpacketsreceivedforthis
SCsuccessfullyvalidatedandwithinthe
replaywindow.
SCUncheckedpackets Thenumberofpacketsreceivedforthis
SC,whilesecyValidateFrameswas
disabled.
SCDelayedpackets Thenumberofreceivedpackets,forthis
SC,withPNlowerthanthelowest
acceptablePNandReplayProtect
Enablefalse.
SCInvalidpackets Thenumberofpackets,forthisSC,that
failedvalidationbutcouldbereceived
becauseValidateFrameswascheck
andthedatawasnotencrypted(sothe
originalframecouldberecovered).2128SCNotValidpackets Thenumberofpacketsdiscarded,for
thisSC,becausevalidationfailedand
ValidateFrameswasstrictorthedata
wasencrypted(sotheoriginalframe
couldnotberecovered).
SCLatepackets Thenumberofpacketsdiscarded,for
thisSC,becausethethereceivedPN
waslowerthanthelowestacceptablePN
andReplayProtectEnablewastrue.
SCNotUsingSApackets ForthisSCwhichisnotcurrentlyinuse,
thenumberofreceivedpacketsthat
havebeendiscarded,andhaveeither
thepacketsencryptedorValidate
Framessettostrictmode.
SCUnusedSApackets ForthisSCwhichisnotcurrentlyinuse,
thenumberofreceived,unencrypted,
packetswithValidateFramesnotinthe
strictmode.
SCBadTagpackets Thenumberofreceivedpackets
discardedwithaninvalidSecTAG,zero
valuePN,orinvalidICV."
SCValidatedbytes Thenumberofplaintextoctetsrecovered
frompacketsthatwereintegrityprotected
butnotencrypted.
SCDecryptedbytes Thenumberofplaintextoctetsrecovered
frompacketsthatwereintegrityprotected
andencrypted.
Output TransmitMACsecstatisticsinformation:
SCUntaggedpackets Thenumberofpacketstransmitted
withoutaSecTAGbecauseProtect
FramesEnableisconfiguredfalse.2129SCNotinuseSApackets ThenumberoftransmitpacketsnoSAs
areinuse.
SCToolongpackets Thenumberoftransmitpackets
discardedbecausetheirlengthisgreater
thantheifMtuoftheCommonPort.
SCProtectedpackets Thenumberofintegrityprotectedbutnot
encryptedpacketsforthistransmitSC.
ZeroifConfidentialityisTrue,andone
lessthanNextPNotherwise.
SCEncryptedpackets Thenumberofintegrityprotectedand
encryptedpacketsforthistransmitSC.
ZeroifConfidentialityisFalse,andone
lessthanNextPNotherwise.
SCProtectedbytes Thenumberofplaintextoctetsintegrity
protectedbutnotencryptedin
transmittedframes.
SCEncryptedbytes Thenumberofplaintextoctetsintegrity
protectedandencryptedintransmitted
frames.
Examples
Switch#showmacsecstatisticsinterfaceeth-0-1
Interfaceeth-0-1statistics:
Input:
SCOKpackets :0
SCUncheckedpackets:0
SCDelayedpackets:0
SCInvalidpackets:0
SCNotValidpackets:0
SCLatepackets :0
SCNotUsingSApackets:0
SCUnusedSApackets:0
SCBadTagpackets:0
SCValidatedbytes:0
SCDecryptedbytes:0
Output:
SCUntaggedpackets:0
SCNotinuseSApackets:0
SCToolongpackets:02130SCProtectedpackets:0
SCEncryptedpackets:0
SCProtectedbytes:0
SCEncryptedbytes:0
RelatedCommands
None
11.28.22clearmkastatistics
CommandPurpose
ToclearMKAstatisticsonports.
CommandSyntax
clearmkastatisticsinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Ifyoudonotspecifyaport,
thiscommandclearsMKA
statisticsonallports.
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearmkastatisticsinterfaceeth-0-12131RelatedCommands
None
11.28.23clearmacsecstatistics
CommandPurpose
ToclearMACsecstatisticsonports.
CommandSyntax
clearmacsecstatisticsinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename. Ifyoudonotspecifyaport,
thiscommandclears
MACsecstatisticsonall
ports.
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearmacsecstatisticsinterfaceeth-0-1
RelatedCommands
None213212IPv6SecurityCommands
12.1DHCPv6SnoopingCommands
12.1.1cleardhcpv6snoopingbindingslearning
CommandPurpose
Usethecleardhcpv6snoopingbindingslearningprivilegedEXECcommandonthe
switchtoclearthedynamicDHCPv6bindingitems.
CommandSyntax
cleardhcpv6snoopingbindings(learning|manual)(ipv6IP-ADDRESS|mac
MAC-ADDRESS|vlanVLAN-ID|interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
ipv6IP-ADDRESS Clearthebindingentry
withtheIPv6addressIPv6Address
macMAC-ADDRESS Clearthebindingentry
withtheMACaddressMACaddress
vlanVLAN-ID Clearthebindingentry
withtheVLAN1-4094
interfaceIFNAME Clearthebindingentry
withtheInterfaceSupport
physical/aggregationports
CommandMode
PrivilegedEXEC2133Default
Nodefaultisdefined.
Usage
ThiscommandisusedtoclearDHCPv6snoopingbinding.
Examples
ThisexampleshowshowtoclearallDHCPv6snoopingbindinglearningitems:
Switch#cleardhcpv6snoopingbindingslearning
RelatedCommands
showdhcpv6snoopingbinding
12.1.2cleardhcpv6snoopingstatistics
CommandPurpose
Usethecleardhcpv6snoopingstatisticsprivilegedEXECcommandontheswitchto
cleartheDHCPv6snoopingstatisticscounters.
CommandSyntax
cleardhcpv6snoopingstatistics
CommandMode
PrivilegedEXEC
Default
Nodefaultisdefined.
Usage
ThiscommandisusedtoclearDHCPv6snoopingstatistics.2134Examples
ThisexampleshowshowtocleartheDHCPv6snoopingstatisticscounters:
Switch#cleardhcpv6snoopingstatistics
RelatedCommands
showdhcpv6snoopingstatistics
12.1.3dhcpv6snooping
CommandPurpose
Usethedhcpv6snoopingglobalconfigurationcommandontheswitchtoglobally
enableDHCPv6snooping.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
dhcpv6snooping
nodhcpv6snooping
CommandMode
GlobalConfiguration
Default
DHCPv6snoopingisdisabled.
Usage
ForanyDHCPv6snoopingconfigurationtotakeeffect,youmustgloballyenable
DHCPv6snooping.DHCPv6snoopingisnotactiveuntilyouenablesnoopingona
VLANbyusingthedhcpv6snoopingvlanglobalconfigurationcommand.
Examples
ThisexampleshowshowtoenableDHCPv6snooping:2135Switch#configureterminal
Switch(config)#dhcpv6snooping
Youcanverifyyoursettingsbyenteringtheshowdhcpv6snoopingconfigprivileged
EXECcommand:
RelatedCommands
dhcpv6snoopingvlan
showdhcpv6snoopingconfig
12.1.4dhcpv6snoopingbinding
CommandPurpose
Usethedhcpv6snoopingbindingglobalconfigurationcommandontheswitchto
configuretheDHCPv6snoopingbindingdatabaseandtoaddbindingentriestothe
database.
CommandSyntax
dhcpv6snoopingbindingmacMAC-ADDRESSvlanVLAN-IDipv6IP-ADDRESS
interfaceIFNAMEexpirySECONDS
nodhcpv6snoopingbindings(ipv6IP-ADDRESS|macMAC-ADDRESS|vlan
VLAN-ID|interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
macMAC-ADDRESS SpecifyaMACaddressMACaddress
vlanVLAN-ID SpecifyaVLANnumber.1-4094
ipv6IP-ADDRESS SpecifyanIPv6addressIPv6Address
interfaceIFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupport
physical/aggregationports2136expirySECONDS Specifytheinterval(in
seconds)afterwhichthe
bindingentryisnolonger
valid.Therangeis0to
864000-86400seconds
CommandMode
GlobalConfiguration
Default
Nodefaultdatabaseisdefined.
Usage
Usethiscommandwhenyouaretestingordebuggingtheswitch.
IntheDHCPv6snoopingbindingdatabase,eachdatabaseentry,alsoreferredtoa
binding,hasanIPaddress,anassociatedMACaddress,theleasetime,theinterface
towhichthebindingapplies,andtheVLANtowhichtheinterfacebelongs.
Usetheshowdhcpv6snoopingbindingprivilegedEXECcommandtodisplaythe
configuredbindings.
Examples
ThisexampleshowshowtogenerateaDHCPv6bindingwithanexpirationtimeof
1000secondsonaportinVLAN1:
Switch#configureterminal
Switch(config)#dhcpv6snoopingbindingmac0001.000c.01efvlan1ipv62001:1::1interfaceeth-0-1expiry1000
RelatedCommands
showdhcpv6snoopingbinding213712.1.5dhcpv6snoopingdatabase
CommandPurpose
Usethedhcpv6snoopingdatabaseglobalconfigurationcommandontheswitchto
configuretheDHCPv6snoopingbindingdatabaseagent.Usethenoformofthis
commandtoresetthewrite-delayvalue.
CommandSyntax
dhcpv6snoopingdatabaseauto-saveintervalSECONDS
Parameter ParameterDescriptionParameterValue
intervalSECONDS Specifytheinterval(in
seconds)thathowlongto
savethebindingdatabase.15-2000seconds
CommandMode
GlobalConfiguration
Default
Defaultintervalis600seconds.
Usage
TheDHCPv6snoopingdatabaseissaveasflash:/dhcpv6snooping.
Examples
Thefollowingissampleoutputfromthedhcpv6snoopingdatabasecommand:
Switch#configureterminal
Switch(config)#dhcpv6snoopingdatabaseauto-saveinterval120
RelatedCommands
dhcpv6snooping
dhcpv6snoopingbinding213812.1.6dhcpv6snoopingremote-idformat
CommandPurpose
Usethedhcpv6snoopingremote-idformatglobalconfigurationcommandonthe
switchtoconfiguretheformatofdhcpv6snoopingremote-id.Usethenoformofthis
commandtosettheformatofdhcpv6snoopingremote-idtodefaultformat.
CommandSyntax
dhcpv6snoopingremote-idformat{vlan|ifname|duid}
nodhcpv6snoopingremote-idformat
Parameter ParameterDescriptionParameterValue
vlan TheIDofthevlanattached
byclient-
ifname Thenameoftheinterface
receivedpacketfromclient-
duid InsertsystemsDUIDin
remote-id-
CommandMode
GlobalConfiguration
Default
Defaultformatisduid::ifname
Usage
Theformatofremote-idcanbeacombinationofvlan,interfacename,DUID.This
commandspecifiestheexistingkeywordsinthecombination.
Examples
Thefollowingexampleshowshowtospecifytheformatofremote-id:2139Switch#configureterminal
Switch(config)#dhcpv6snoopingremote-idformatduidvlanifname
RelatedCommands
dhcpv6snoopingremote-idoption
12.1.7dhcpv6snoopingremote-idoption
CommandPurpose
Usethedhcpv6snoopingremote-idoptionglobalconfigurationcommandonthe
switchtogloballyenableinsertdhcpv6snoopingremote-id.Usethenoformofthis
commandtogloballydisableinsertdhcpv6snoopingremote-id.
CommandSyntax
dhcpv6snoopingremote-idoption
nodhcpv6snoopingremote-idoption
CommandMode
GlobalConfiguration
Default
Insertremote-idisdisabled
Usage
None
Examples
Thefollowingexampleshowshowtoenableremote-idoption:
Switch#configureterminal
Switch(config)#dhcpv6snoopingremote-idoption2140RelatedCommands
dhcpv6snoopingremote-idformat
12.1.8dhcpv6snoopingtrust
CommandPurpose
Usethedhcpv6snoopingtrustinterfaceconfigurationcommandontheswitchto
configureaportastrustedforDHCPv6snoopingpurposes.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
dhcpv6snoopingtrust
nodhcpv6snoopingtrust
CommandMode
InterfaceConfiguration
Default
DHCPv6snoopingtrustisdisabled.
Usage
ConfigureastrustedportsthosethatareconnectedtoaDHCPv6serverortoother
switchesorrouters.Configureasentrustedportsthosethatareconnectedto
DHCPv6clients.
Examples
ThisexampleshowshowtoenableDHCPv6snoopingtrustonaport:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#dhcpv6snoopingtrust2141RelatedCommands
showdhcpv6snoopingtrusted-sources
12.1.9dhcpv6snoopingvlan
CommandPurpose
Usethedhcpv6snoopingvlanglobalconfigurationcommandontheswitchtoenable
DHCPv6snoopingonaVLAN.Usethenoformofthiscommandtoreturntothe
defaultsetting.
CommandSyntax
dhcpv6snoopingvlanVLAN-RANGE
nodhcpv6snoopingvlanVLAN-RANGE
Parameter ParameterDescriptionParameterValue
VLAN-RANGE SpecifyaVLANIDora
rangeofVLANsonwhich
toenableDHCPsnooping.1-4094
CommandMode
GlobalConfiguration
Default
DHCPv6snoopingisdisabledonallVLANs.
Usage
YoucanenterasingleVLANIDidentifiedbyVLANIDnumber,aseriesofVLANIDs
separatedbycommas,arangeofVLANIDsseparatedbyhyphens,orarangeof
VLANIDsseparatedbyenteringthestartingandendingVLANIDsseparatedbya
space.
YoumustfirstgloballyenableDHCPv6snoopingbeforeenablingDHCPv6snooping
onaVLAN.2142Examples
ThisexampleshowshowtoenableDHCPv6snoopingonVLAN10:
Switch#configureterminal
Switch(config)#dhcpv6snoopingvlan10
RelatedCommands
showdhcpv6snoopingconfig
12.1.10debugdhcpv6snooping
CommandPurpose
Usethiscommandtoturnonthedebugswitchesofdhcpv6snoopingmodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debugdhcpv6snooping(events|error|dump|packet|all)
nodebugdhcpv6snooping(events|error|dump|packet|all)
Parameter ParameterDescriptionParameterValue
events Snoopingevents -
error ErrorDHCPv6message-
packet DHCPv6messagefields-
dump Dumpmessageinhex
format-
all Turnalldebuggingon -
CommandMode
PrivilegedEXEC
Default
None2143Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopendhcpv6snoopingdebugswitches:
Switch#debugdhcpv6snoopingall
RelatedCommands
terminalmonitor
showloggingbuffer
12.1.11showdhcpv6snoopingbinding
CommandPurpose
Usetheshowdhcpv6snoopingbindingprivilegedEXECcommandtodisplaythe
DHCPv6snoopingbindingdatabaseandconfigurationinformationforallinterfaces
onaswitch.
CommandSyntax
showdhcpv6snoopingbinding(all|manual|learning(ipv4IP-ADDRESS|
macMAC-ADDRESS|vlanVLAN-ID|interfaceIFNAME|)summary|)
Parameter ParameterDescriptionParameterValue
all Displayallentries -
manual Displaystaticentries -
learning Displaydynamicentries-
macMAC-ADDRESS SpecifyMACaddress MACaddress2144vlanVLAN-ID SpecifyaVLANnumber.1-4094
ipv4IP-ADDRESS SpecifyanIPaddressIPv4Address
interfaceIFNAME Specifyaninterfaceon
whichtoaddordeletea
bindingentrySupport
physical/aggregationports
summary Displaysummary
informationofDHCPv6
snoopingbindings-
CommandMode
PrivilegedEXEC
Default
None
Usage
IfDHCPv6snoopingisenabledandaninterfacechangestothedownstate,the
switchdoesnotdeletethestaticallyconfiguredbindings.
Examples
Thefollowingissampleoutputfromtheshowdhcpv6snoopingbindingcommand:
Switch#showdhcpv6snoopingbindingall
DHCPv6snoopingbindingtable:
VLANMACAddressInterfaceLease(s)IPv6Address
============================================================
10001.0001.0001eth-0-2static1:1::1:1
Switch#showdhcpv6snoopingbindingsummary
Total1DHCPv6snoopingbindingentries
0learningentry,1configuredentry
RelatedCommands
dhcpv6snoopingbinding214512.1.12showdhcpv6snoopingconfig
CommandPurpose
Usetheshowdhcpv6snoopingprivilegedEXECcommandtodisplaytheDHCPv6
snoopingconfiguration.
CommandSyntax
showdhcpv6snoopingconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheconfigurationofDHCPv6snooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpv6snoopingconfigcommand:
Switch#showdhcpv6snoopingconfig
dhcpv6snoopingservice:enabled
dhcpv6snoopingswitch:enabled
dhcpv6snoopingvlan3
RelatedCommands
dhcpv6snooping
dhcpv6snoopingvlan214612.1.13showdhcpv6snoopingtrusted-sources
CommandPurpose
Usetheshowdhcpv6snoopingtrusted-sourcesprivilegedEXECcommandtodisplay
theDHCPv6snoopingtrustedinterface.
CommandSyntax
showdhcpv6snoopingtrusted-sources
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaythetrustedinterfaceofDHCPv6snooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpv6snoopingtrusted-sources
command:
Switch#showdhcpv6snoopingtrusted-source
ListofDHCPv6snoopingtrustedinterface(s):
============================================================
eth-0-20
RelatedCommands
dhcpv6snoopingtrust214712.1.14showdhcpv6snoopingstatistics
CommandPurpose
Usetheshowdhcpv6snoopingstatisticsprivilegedEXECcommandtodisplay
DHCPv6snoopingstatistics.
CommandSyntax
showdhcpv6snoopingstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaythestatisticsofDHCPv6snooping.
Examples
Thefollowingissampleoutputfromtheshowdhcpv6snoopingstatisticscommand:
Switch#showdhcpv6snoopingstatistics
DHCPv6snoopingstatistics:
============================================================
DHCPv6packets 137
Packetsforwarded 137
Packetsinvalid 0
Packetsdropped 0
RelatedCommands
cleardhcpv6snoopingstatistics214812.2DevicemanagementsecuriyCommands
12.2.1ipv6telnetserveracl
CommandPurpose
TodenyspecifiedtelnetclientIPV6,usethiscommandinconfigurationmode.To
deletethisconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6telnetserveraclNAME
noipv6telnetserveracl
Parameter ParameterDescriptionParameterValue
NAME access-listname Stringwithupto40
characters
CommandMode
GlobalConfiguration
Default
Noaclisspecified
Usage
UsethiscommandtodenyspecifiedtelnetclientIPV6.
Theaccess-listshouldbecreatedbeforeusingthiscommand.
Examples
Thisexampleshowshowtoenabetelnetacl,whichonlypermittelnetclientwith
sourceIP3001:1::1000:
Switch#configureterminal
Switch(config)#ipv6access-listtelnetACL
Switch(config-ip-acl)#permittcphost3001:1::1000any2149Switch(config-ip-acl)#exit
Switch(config)#ipv6telnetserveracltelnetACL
RelatedCommands
None
12.2.2ipv6sshserveracl
CommandPurpose
TodenyspecifiedSSHclientIPV6,usethiscommandinconfigurationmode.To
deletethisconfiguration,usethenoformofthiscommand.
CommandSyntax
ipv6sshserveraclNAME
noipv6sshserveracl
Parameter ParameterDescriptionParameterValue
NAME access-listname Stringwithupto40
characters
CommandMode
GlobalConfiguration
Default
Noaclisspecified
Usage
UsethiscommandtodenyspecifiedSSHclientIPV6.
Theaccess-listshouldbecreatedbeforeusingthiscommand.
Examples
Thisexampleshowshowtoenabesshacl,whichonlypermitSSHclientwithsource
IP3001:1::1000:2150Switch#configureterminal
Switch(config)#ipv6access-listsshACL
Switch(config-ip-acl)#permittcphost3001:1::1000any
Switch(config-ip-acl)#exit
Switch(config)#ipv6sshserveraclsshACL
RelatedCommands
None215113ReliabilityCommands
13.1BHMCommands
13.1.1sysmonenable
CommandPurpose
Usethiscommandtoenablesystemmonitor.Usethenocommandtodisablesystem
monitor.
CommandSyntax
sysmonenable
nosysmonenable
CommandMode
GlobalConfiguration
Default
Sysmonisenabledbydefault.
Usage
None
Examples
Thefollowingexampleshowshowtoenablesystemmonitor:
Switch#configureterminal
Switch(config)#sysmonenable2152RelatedCommands
showsysmon
13.1.2showsysmon
CommandPurpose
Usethiscommandtoshowsystemmonitorinformation.
CommandSyntax
showsysmon
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaysystemmonitorstatus:
Switch#showsysmon
Systemmonitorenable.
RelatedCommands
sysmonenable215313.1.3heart-beat-monitorenable
CommandPurpose
Usethiscommandtoenableheartbeatmonitor.Usethenocommandtodisable
heartbeatmonitor.
CommandSyntax
heart-beat-monitorenable
noheart-beat-monitorenable
CommandMode
GlobalConfiguration
Default
Thedefaultofheartbeatmonitorisenabled.
Usage
None
Examples
Thefollowingexampleshowshowtoenableheartbeatmonitor:
Switch#configureterminal
Switch(config)#heart-beat-monitorenable
RelatedCommands
showheart-beat-monitor
13.1.4heart-beat-monitorreactivate
CommandPurpose
Usethiscommandtospecifyareactivationafterprocesscrash.2154CommandSyntax
heart-beat-monitorreactivate(reloadsystem|shutdownport|warning)
Parameter ParameterDescriptionParameterValue
reloadsystem reloadsystem -
shutdownport shutdownallportwhen
systemcrash-
warning printwarningonscreen-
CommandMode
GlobalConfiguration
Default
Thedefaultreactivationistoreloadsystem.
Usage
None
Examples
Thefollowingexampleshowshowtosetheart-beat-monitorthereactivation:
Switch#configureterminal
Switch(config)#heart-beat-monitorreactivatereloadsystem
RelatedCommands
showheart-beat-monitor
13.1.5showheart-beat-monitor
CommandPurpose
Usethiscommandtoshowheartbeatmonitorstatus.2155CommandSyntax
showheart-beat-monitor
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoshowsystemmonitorinformation:
Switch#showheart-beat-monitor
heart-beat-monitorenable.
heart-beat-monitorreactivation:restartsystem.
RelatedCommands
heart-beat-monitorenable
heart-beat-monitorreactivate
13.2EFMCommands
13.2.1ethernetoamenable
CommandPurpose
UsethiscommandtoenableEthernetoperations,maintenance,andadministration
(OAM)onaninterface.
UsethenoformofthiscommandtodisableOAMonaninterface.2156CommandSyntax
ethernetoamenable
noethernetoamenable
CommandMode
InterfaceConfiguration
Default
ThedefaultstatusofEthernetOAMisdisabled.
Usage
ThiscommandisusedtoenabletheEthernetOAMmoduleonaport.
Examples
ThefollowingexampleshowshowtoenableEthernetOAM:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamenable
RelatedCommands
noethernetoamenable
13.2.2ethernetoammode
CommandPurpose
UsethecommandtoconfigureEthernetOAMmodeonaninterface
CommandSyntax
ethernetoammodeactive
ethernetoammodepassive
noethernetoammode2157CommandMode
InterfaceConfiguration
Default
ThedefaultEthernetOAMmodefortheDTEispassive.
Usage
ThiscommandisusedtosettheDTEtoactivemodeorpassivemode.
Examples
ThefollowingexampleshowshowtosetEFMmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoammodeactive
Switch(config-if)#ethernetoammodepassive
RelatedCommands
None
13.2.3ethernetoammin-rate
CommandPurpose
UsethiscommandtosettheOAMPDUtimer.Usethenoformofthecommandto
resettodefaultvalue.
CommandSyntax
ethernetoammin-rateSECONDS
noethernetoammin-rate
Parameter ParameterDescriptionParameterValue
SECONDS Thenumberofseconds
chosenforthistimer.1-10seconds2158CommandMode
InterfaceConfiguration
Default
ThedefaultvalueoftheOAMPDUtimeris1second
Usage
SetthetimertoemitatleastoneOAMPDUpersecondandensurethatthesublayer
adherestothemaximumnumberofOAMPDUspersecond.Theminimumis1
OAMPDUpersecondandthemaximumis10OAMPDUpersecond
Examples
ThefollowingexampleshowshowtosettheOAMPDUtimerto1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoammin-rate1
RelatedCommands
showethernetoamstatus
13.2.4ethernetoammax-rate
CommandPurpose
UsethiscommandtosettheOAMPDUmaximumnumberofPDUSpersecond.Use
thenoformofthecommandtoresetmax-ratetothedefaultvalue.
CommandSyntax
ethernetoammax-ratePDUS
noethernetoammax-rate
Parameter ParameterDescriptionParameterValue2159PDUS Themaximumnumberof
PDUspersecond.1-10
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueofthemax-rateis10PDUspersecond.
Usage
Thiscommandistoensurethatthesublayeradherestothemaximumnumberof
OAMPDUspersecond.Theminimumis1OAMPDUpersecondandthemaximumis
10OAMPDUspersecond.
Examples
ThefollowingexampleshowshowtosettheOAMPDUmaximumnumberto10per
second:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoammax-rate10
RelatedCommands
showethernetoamstatus
13.2.5ethernetoamlink-monitoron
CommandPurpose
Usethiscommandtoturnonlinkmonitoringonaninterface.Usethenoformofthis
commandtoturnlinkmonitoringoff.
CommandSyntax
ethernetoamlink-monitoron
noethernetoamlink-monitoron2160CommandMode
InterfaceConfiguration
Default
Whenlinkmonitorissupported,linkmonitoringisautomaticallyturnedon.
Usage
None
Examples
Thefollowingexampleshowshowtoturnonlinkmonitoringoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamlink-monitoron
RelatedCommands
showethernetoamstatus
13.2.6ethernetoamlink-monitorsupported
CommandPurpose
Usethiscommandtoconfigurelinkmonitoringonaninterface.Usethenoformof
thiscommandtoremovesupportforlinkmonitoringonaninterface.
CommandSyntax
ethernetoamlink-monitorsupported
noethernetoamlink-monitorsupported
CommandMode
InterfaceConfiguration2161Default
Thedefaultstateofthelinkmonitorissupported
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurelinkmonitoringoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamlink-monitorsupported
RelatedCommands
showethernetoamstatus
13.2.7ethernetoamlink-monitorframe
CommandPurpose
Usethiscommandtoconfigurethelowandhighthresholdandthewindowforthe
frameevent.Ifthelowthresholdisexceeded,anerrorframelinkeventisgenerated.
Ifthehighthresholdisexceeded,theactiondefinedusingthecommandethernet
oamlink-monitorhighthresholdactionistaken.
CommandSyntax
ethernetoamlink-monitorframethresholdhigh(HIGH_THRES|none)low
LOW_THRESwindowWINDOW
noethernetoamlink-monitorframethreshold
Parameter ParameterDescriptionParameterValue
HIGH_THRES Valueofthehighthreshold
forerrorframes.1-65535
none Nohighthresholdvalueis
set-2162lowLOW_THRES Valueofthelowthreshold
forerrorframes.0-65535
windowWINDOW Sizeofframeevent
window,expressedin
milliseconds10-600
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueforhighthresholdisnone,meaningthatnohighthresholdis
configured.
Thedefaultvalueoflowthresholdis1.
Thedefaultvaluefortheframeeventwindowis100.
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurethelowandhighthresholdandthe
windowfortheframeevent:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamlink-monitorframethresholdhigh5low2window200
RelatedCommands
showethernetoamstatus216313.2.8ethernetoamlink-monitorframe-secondsthreshold
CommandPurpose
Usethiscommandtoconfigurethelowandhighthresholdandthewindowforthe
frame-secondsevent.Ifthelowthresholdisexceeded,anerror-frame-secondslink
eventisgenerated.Ifthehighthresholdisexceededthenactiondefinedthroughthe
commandethernetoamlink-monitorhighthresholdactionwillbetaken.
CommandSyntax
ethernetoamlink-monitorframe-secondsthresholdhigh(HIGH_THRES|none)low
LOW_THRESwindowWINDOW
noethernetoamlink-monitorframe-secondsthresholdhigh
Parameter ParameterDescriptionParameterValue
HIGH_THRES Highthresholdforthe
numberoferrorframe-
secondsintherangeof
1~9001-900
none Nohighthresholdvalueis
set-
lowLOW_THRES Lowthresholdforthe
numberoferrorframe-
seconds1~9001-900
windowWINDOW Windowforframe-seconds
events,inmilliseconds,in
multiplesof100100-9000
CommandMode
InterfaceConfiguration2164Default
Thedefaultvalueforhighthresholdisnone,meaningthatnohighthresholdis
configure.Thedefaultvalueforthelowthresholdis1.Thedefaultvalueofframe
eventwindowis1000.
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurethethresholdandwindowforthe
frame-secondsevent:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamlink-monitorframe-secondsthresholdhigh5low2window200
RelatedCommands
showethernetoamstatus
13.2.9ethernetoamlink-monitorhighthresholdaction
CommandPurpose
Usethiscommandtodefineactionwhenhighthresholdisdetected.Usenoformof
thecommandtoresettheaction.
CommandSyntax
ethernetoamlink-monitorhighthresholdactionerror-disable-interface
noethernetoamlink-monitorhighthresholdactionerror-disable-interface
CommandMode
InterfaceConfiguration2165Default
Whenhighthresholdisexceededitwillgenerateonlythecorrespondinglinkevent
andwillnottriggeranyinterfaceeventsbydefault
Usage
None
Examples
Thefollowingexampleshowshowtodefineactionoferror-disableinterfacewhen
highthresholdisdetected:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamlink-monitorhigh-thresholdactionerror-disable-interface
RelatedCommands
showethernetoamstatus
13.2.10ethernetoamremote-loopback
CommandPurpose
Usethiscommandtoconfigureremoteloopbackonaninterface.Thiscommandcan
beusedtoenableordisableremoteloopbackandalsoconfiguretheremote
loopbacktimeout,whichisthenumberofsecondstheDTEwillwaitfortheremote
DTEtorespondtotheethernetoamremote-loopbackenablecommand.Usetheno
formofthiscommandtoremoveremote-loopbacksupportfromtheinterface.
CommandSyntax
ethernetoamremote-loopback{supported|timeoutSECS}
noethernetoamremote-loopback{supported|timeout}
Parameter ParameterDescriptionParameterValue
supported Remoteloopbackcanbe
initiatedintheDTE-2166timeoutSECS Theremoteloopback
timeoutvalueintherange
of1~101-10seconds
CommandMode
InterfaceConfiguration
Default
Thedefaultstatefortheremoteloopbackisnotsupported.Ifatimeoutisnot
configured,thelocalDTEremainsinremoteloopbackstateuntiltheremoteDTE
respondsortheuserstopsremoteloopbackadministratively.
Oneswitchsupports4interfacesinlocalLoopbackstatusatthesametime.
Usage
None
Examples
Thefollowingexampleshowshowtosupportremote-loopbackoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamremote-loopbacksupported
RelatedCommands
showethernetoamstatus
13.2.11ethernetoamremote-loopbackstart
CommandPurpose
UsethiscommandtostartanEthernetOAMremote-loopbackmechanism.
CommandSyntax
ethernetoamremote-loopbackstartinterfaceIFNAME2167Parameter ParameterDescriptionParameterValue
IFNAME Nameoftheinterface Supportphysicalports
CommandMode
PrivilegedEXEC
Default
Thedefaultstateoftheremoteloopbackfunctionisdisabled.
Usage
Thiscommandisusedtostartaremoteloopbackmechanism.
Examples
ThefollowingexampleshowshowtostartanEthernetOAMremote-loopback
mechanism:
Switch#ethernetoamremote-loopbackstartinterfaceeth-0-1
RelatedCommands
showethernetoamstate-machine
13.2.12ethernetoamremote-loopbackstop
CommandPurpose
UsethiscommandtostopanEthernetOAMremote-loopbackprocess.
CommandSyntax
ethernetoamremote-loopbackstopinterfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME Nameoftheinterface Supportphysicalports2168CommandMode
PrivilegedEXEC
Default
UsethiscommandtostopanEthernetOAMremoteloopbackmechanism.
Usage
UsethiscommandtostopanEthernetOAMremoteloopbackmechanism.
Examples
ThefollowingexampleshowshowtostopanEthernetOAMremote-loopback
process:
Switch#ethernetoamremote-loopbackstopinterfaceeth-0-9
RelatedCommands
showethernetoamstate-machine
13.2.13ethernetoamtimeout
CommandPurpose
UsethiscommandtoresettheLOCAL_LOST_LINK_TIMERandstartanEthernet
OAMdiscoveryprocess.Usethenoformofthecommandtoresettothedefault
value.
CommandSyntax
ethernetoamtimeoutSECONDS
noethernetoamtimeout
Parameter ParameterDescriptionParameterValue
SECONDS Thenumberofseconds
chosenforthelink-timer2-302169CommandMode
InterfaceConfiguration
Default
Thedefaultvalueofthetimeoutis5seconds
Usage
Thiscommandisusedtostartadiscoveryprocessbyresettingthe
LOCAL_LOST_LINK_TIMER.
Examples
Thefollowingexampleshowshowtosetthetimeoutto5s:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamtimeout5
RelatedCommands
None
13.2.14ethernetoamremote-failure
CommandPurpose
Usethiscommandtoerror-disableportwhengetremotefailureitemformpeer.Use
thenoformofthecommandtounsettheaction.
CommandSyntax
ethernetoamremote-failure(link-fault|critical-event|dying-gasp)actionerror-
disable-interface
noethernetoamremote-failure(link-fault|critical-event|dying-gasp)actionerror-
disable-interface
Parameter ParameterDescriptionParameterValue2170link-fault CriticalLinkEvent -
critical-event DyingGaspEvent -
dying-gasp LinkFaultEvent -
CommandMode
InterfaceConfiguration
Default
None
Usage
Thiscommandisusedtoerror-disableportwhengetremotefailureitemformpeer.
Examples
Thefollowingexampleshowshowtoerror-disableportwhengetremotefailureitem
formpeeroninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetoamremote-failurelink-faultactionerror-disable-interface
RelatedCommands
None
13.2.15showethernetoamdiscovery
CommandPurpose
Usethiscommandtodisplaytheethernetoamadministrativeandoperation
configurationforlocalandremoteDTE
CommandSyntax
showethernetoamdiscovery(interfaceIFNAME|)2171Parameter ParameterDescriptionParameterValue
interfaceIFNAME Nameoftheinterface Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Thefollowingsampleoutputfromthiscommanddisplaysethernetoamadministrative
andoperationconfigurationsforlocalandremoteDTE
Examples
Thefollowingexampleshowshowtodisplaytheethernetoamadministrativeand
operationconfigurationforlocalandremoteDTEofinterfaceeth-0-1:
Switch1#showethernetoamdiscoveryinterfaceeth-0-1
RelatedCommands
None
13.2.16showEthernetoamstatus
CommandPurpose
Usethiscommandtodisplaytheruntimesettingsoflink-monitoringandgeneralOAM
operationsforallinterfacesorforaspecificinterface
CommandSyntax
showethernetoamstatus(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue2172interfaceIFNAME Nameoftheinterface Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaytheruntimesettingsoflink-monitoring
andgeneralOAMoperationsofinterfaceeth-0-1:
Switch#showethernetoamstatusinterfaceeth-0-1
RelatedCommands
None
13.2.17showethernetoamstate-machine
CommandPurpose
Usethiscommandtodisplaythestatemachineinformation.
CommandSyntax
showethernetoamstate-machine(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Nameoftheinterface Supportphysicalports2173CommandMode
PrivilegedEXEC
Default
None
Usage
Thecommanddisplaysthestateoftheinterface.
Examples
Thefollowingexampleshowshowtodisplaythestatemachineinformationofeth-0-1:
Switch#showethernetoamstate-machineinterfaceeth-0-1
RelatedCommands
None
13.2.18showethernetoamstatistics
CommandPurpose
Usethiscommandtodisplaythestatisticsinformation.
CommandSyntax
showethernetoamstatistics(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interfaceIFNAME Nameoftheinterface Supportphysicalports
CommandMode
PrivilegedEXEC2174Default
None
Usage
Thecommanddisplaysthestatisticsoftheinterface.
Examples
Thefollowingexampleshowshowtodisplaythestatisticsinformationofeth-0-1:
Switch#showethernetoamstatisticsinterfaceeth-0-1
RelatedCommands
None
13.3CFMCommands
13.3.1ethernetcfmenable
CommandPurpose
UsethiscommandtoenableCFMglobally.UsethenoparametertodisabletheCFM
functiononthebridge.
CommandSyntax
ethernetcfmenable
noethernetcfmenable
CommandMode
GlobalConfiguration
Default
Disabled2175Usage
ThiscommandisusedtoenableCFMglobally.
Examples
Thefollowingexampleshowshowtoenableanddisablecfmglobally:
Switch#configureterminal
Switch(config)#ethernetcfmenable
Switch(config)#noethernetcfmenable
RelatedCommands
None
13.3.2ethernetcfmdomainlevel
CommandPurpose
UsethiscommandtocreateanMDwithinwhichyoucanmanageEthernettrafficor
entercfmdomainmode.EnsureyouspecifythelevelforeachMD.Thelevels
separateMDsfromeachotherandprovidedifferentareasoffunctionality.
CommandSyntax
ethernetcfmdomainDOMAIN_NAMElevelLEVEL(format(no-md-name|string
STRING|dnsDNS_NAME|mac-addressMAC_ADDRESS)|)
noethernetcfmdomainDOMAIN_NAME(levelLEVEL|)
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43
LEVEL MDlevel 0-7
no-md-name Thereisnomdname
whencreatemaidofcfm
packet-2176stringSTRING Maintenancedomain
ASCIIname,usedto
createmaidofcfmpacketThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43
dnsDNS_NAME MaintenancedomainDNS
name,usedtocreatemaid
ofcfmpacketThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43
mac-address
MAC_ADDRESSMaintenancedomain
MAC-addresswithtwo
octetsname,usedto
createmaidofcfmpacketMAC-addressand2-octet
integer(H.H.H:U(0-65535),
example:0001.0001.0001:
1)
CommandMode
GlobalConfiguration
Default
None
Usage
ThelevelsdefinetheMDasfollows:
0~2(operatorlevels)
3~4(providerlevels)
5~7(customerlevels)
ForY.1731mode,domainformatshouldbeno-md-name
Examples
Thefollowingexampleshowshowtocreateanddestroydomain:
Switch#configureterminal
Switch(config)#ethernetcfmdomaintestlevel5
Switch(config-ether-cfm)#exit
Switch(config)#noethernetcfmdomaintest2177RelatedCommands
None
13.3.3service
CommandPurpose
UsethiscommandtocreateanMAwithinwhichyoucancreatemep.
CommandSyntax
serviceCSI_ID(vlanVLAN_ID|format(stringSTRING|icc-basedICC_NAME)|)
noserviceCSI_ID
Parameter ParameterDescriptionParameterValue
CSI_ID Maintenanceassociation
nameThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43.
MD(Maintenancedomain)
nameand
MA(Maintenance
association)nametotally
upto44characters.
vlanVLAN_ID Vlanid 1-4094
stringSTRING Maintenanceassociation
ASCIIname,usedto
createmaidofcfmpacketThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43
icc-basedICC_NAME Maintenanceassociation
icc-basedname,usedto
createmaidofcfmpacketThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis132178CommandMode
Ethernet-CfmConfiguration
Default
None
Usage
ForY.1731mode,formatshouldbeicc-basedorstring
Examples
ThefollowingexampleshowshowtocreateandremoveMA:
Switch#configureterminal
Switch(config)#ethernetcfmdomaintestlevel5
Switch(config-ether-cfm)#servicecstvlan30
Switch(config-ether-cfm)#noservicecst
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVEL
13.3.4ethernetcfmmep
CommandPurpose
UsethiscommandtodefineanMEPwithinanMA.EachMEPandremoteMEPmust
haveauniqueIDwithinanMA.IftwoormoreMEPssharethesameID,CFMraises
aneventindicatingaduplicateMEPexistsintheMA.
CommandSyntax
ethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlan
VLAN_ID|)interval(1|2|3|4|5|6|7)
noethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlan
VLAN_ID|)
Parameter ParameterDescriptionParameterValue2179down Downmep -
up Upmep -
MEPID Localmepid 1-8191
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid,therangeis1to
40941-4094
1 CCMInterval3.3
millisecond-
2 CCMInterval10
millisecond-
3 CCMInterval100
millisecond-
4 CCMInterval1second-
5 CCMInterval10second-
6 CCMInterval1minute-
7 CCMInterval10minutes-
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtocreateMEP:2180Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetcfmmepdownmpid1domainmd1vlan2interval1
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVEL
serviceCSI_ID(vlanVLAN_ID|)
13.3.5ethernetcfmmepcrosscheckmpid
CommandPurpose
UsethiscommandtodefinearemoteMEPwithinanMA.EachMEPandremote
MEPmusthaveauniqueIDwithinanMA.IftwoormoreMEPssharethesameID,
CFMraisesaneventindicatingaduplicateMEPexistsintheMA.
CommandSyntax
ethernetcfmmepcrosscheckmpidMEPIDdomainDOMAIN_NAME(vlanVLAN_ID
|)(macMAC|)
noethernetcfmmepcrosscheckmpidMEPIDdomainDOMAIN_NAME(vlan
VLAN_ID|)
Parameter ParameterDescriptionParameterValue
MEPID Therangeis1to81911-8191
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid,therangeis1to
40941-4094
MAC RemotemepmacaddressMACAddress
CommandMode
InterfaceConfiguration2181Default
None
Usage
None
Examples
ThefollowingexampleshowshowtocreateremoteMEP:
Switch#configureterminal
Switch(config)#ethernetcfmdomaintestlevel5
Switch(config-ether-cfm)#servicecstvlan30
Switch(config-ether-cfm)#exit
Switch(config)#interfaceeth-0-9
Switch(config-if)#ethernetcfmmepcrosscheckmpid8000domaintestvlan30mac0.0.1
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVEL
serviceCSI_ID(vlanVLAN_ID|)
13.3.6ethernetcfmmip
CommandPurpose
UsethiscommandtodefineanMIP.TherelativeMDandMAshouldbeconfigured
beforeMIPisconfigured.
CommandSyntax
ethernetcfmmiplevelLEVELvlanVLAN_ID
noethernetcfmmiplevelLEVELvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
LEVEL MDlevel,therangeis0to
71-7
VLAN_ID Vlanid 1-40942182CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtocreateMIP:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetcfmmiplevel5vlan2
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVE
serviceCSI_ID(vlanVLAN_ID|)
13.3.7ethernetcfmccenabledomain
CommandPurpose
UsethecommandtoenablecontinuitycheckforanMA.
CommandSyntax
ethernetcfmccenabledomainDOMAIN_NAME(vlanVLAN_ID|)
noethernetcfmccenabledomainDOMAIN_NAME(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters2183VLAN_ID Vlanid 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenablecc:
Switch#configureterminal
Switch(config)#ethernetcfmccenabledomaintestvlan2
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVEL
serviceCSI_ID(vlanVLAN_ID|)
13.3.8ethernetcfmccdomainpriority
CommandPurpose
UsethecommandtodefinecontinuitycheckvlanpriorityforanMA.
CommandSyntax
ethernetcfmccdomainDOMAIN_NAME(vlanVLAN_ID|)priority
VLAN_PRIORITY
noethernetcfmccdomainDOMAIN_NAME(vlanVLAN_ID|)priority
Parameter ParameterDescriptionParameterValue2184DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
VLAN_ID Vlanid 1-4094
VLAN_PRIORITY VlanpriorityThedefault
valueis70-7
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoconfigurevlanpriorityforCCmessage:
Switch#configureterminal
Switch(config)#ethernetcfmccdomaintestvlan2priority3
RelatedCommands
ethernetcfmdomainDOMAIN_NAMElevelLEVEL
serviceCSI_ID(vlanVLAN_ID|)
ethernetcfmccenabledomainDOMAIN_NAME(vlanVLAN_ID|)
13.3.9ethernetcfmloopback
CommandPurpose
UsethecommandtoissueCFMloopbackmessagesforremotemepidormulticast
addressandverifythatremoteMEPsareaccessible.2185CommandSyntax
ethernetcfmloopback(multicast|unicastrmepidRMEPID)mepidMEPID(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)(repeatCOUNT|)(timeout
TIMEOUT|)(priorityPRIORITY|)
Parameter ParameterDescriptionParameterValue
multicast Sendmulticastframe -
unicast Sendunicastframe -
RMEPID Remotemepid 1-8191
MEPID Sourcemepid 1-8191
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel 0-7
vlanVLAN_ID Vlanid 1-4094
repeatCOUNT Repeatcount,thedefault
valueis11-255
timeoutTIMEOUT Thevalueoftimeout,the
defaultvalueis51-65535seconds
priorityPRIORITY ThevalueofVLANpriority0-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None2186Examples
Thefollowingexampleshowshowtostartloopback:
Switch#ethernetcfmloopbackmulticastmepid1domaintestvlan2repeat3timeout5priority7
RelatedCommands
ethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
interval(1|2|3|4|5|6|7)
ethernetcfmmepcrosscheckmpidMEPID(vlanVLAN_ID|)macMAC
13.3.10ethernetcfmloopbackmac
CommandPurpose
UsethecommandtoissueCFMloopbackmessagesforremoteMEPorMIPmac
addressandverifythatremoteMEPsorMIPsareaccessible.
CommandSyntax
ethernetcfmloopbackmacMACADDRESSunicastmepidMEPID(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)(repeatCOUNT|)(timeout
TIMEOUT|)(priorityPRIORITY|)
Parameter ParameterDescriptionParameterValue
MACADDRESS Theremotemepmac
addressMACAddress
MEPID Thesourcelocalmepid
anditsrangeis1to81911-8191
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel 0-7
vlanVLAN_ID Vlanid 1-40942187repeatCOUNT Repeatcount,therangeis
1to255,thedefaultvalue
is11-255
timeoutTIMEOUT Thevalueoftimeout,the
defaultvalueis51-65535seconds
priorityPRIORITY ThevalueofVLANpriority0-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtostartloopback:
Switch#ethernetcfmloopbackmac0.0.1unicastmepid1domaintestvlan2repeat3timeout5priority7
RelatedCommands
ethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
interval(1|2|3|4|5|6|7)
ethernetcfmmepcrosscheckmpidMEPID(vlanVLAN_ID|)macMAC
13.3.11ethernetcfmerrorsenabledomain
CommandPurpose
Usethecommandtoconfigurereserveccmerrors.Thedefaultactionistoreserve
ccmerrors.2188CommandSyntax
ethernetcfmerrorsenabledomainDOMAIN_NAME(vlanVLAN_ID|)
noethernetcfmerrorsenabledomainDOMAIN_NAME(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
Foreverymep,fivelatesterrorswillbereserved.
Examples
Thefollowingexampleshowshowtoconfigurereserveccmerrors:
Switch#configureterminal
Switch(config)#ethernetcfmerrorsenabledomaintestvlan2
RelatedCommands
None
13.3.12clearethernetcfmerrors
CommandPurpose
Usethecommandtoclearcfmerrorsfordomain.2189CommandSyntax
clearethernetcfmerrors(domainDOMAIN_NAME|levelLEVEL)
Parameter ParameterDescriptionParameterValue
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel 0-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoclearccmerrors:
Switch#clearethernetcfmerrorsdomaintest
RelatedCommands
None
13.3.13ethernetcfmaisstatusenable
CommandPurpose
Usethecommandtoenableordisableaisfunctionandconfigurerelativeparameters.2190CommandSyntax
ethernetcfmaisstatusenable(all|loc|mismerge|unexpected-mep|unexpected-
meg-level|unexpected-period)domainDOMAIN_NAME(vlanVLAN_ID|)
levelLEVEL(unicastRMEP_MAC|multicast)(cvlanVLAN_LIST|)
noethernetcfmaisstatusenable(all|loc|mismerge|unexpected-mep|
unexpected-meg-level|unexpected-period)domainDOMAIN_NAME(vlan
VLAN_ID|)
levelLEVEL(unicastRMEP_MAC|multicast)
Parameter ParameterDescriptionParameterValue
all Aisforalldefectcondition-
loc Aisforlossofcontinuity-
mismerge AisforincorrectMEGID-
unexpected-mep AisforunexpectedMEPID
received-
unexpected-meg-levelAisforincorrectMEGlevel-
unexpected-period Aisformis-matchedin
periodreceived-
DOMAIN_NAME Maintenancedomain
nameofthelocalmepStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
LEVEL Aispacketwillbesentin
thisMDlevel1-7
unicast Unicastaisframetobe
sent-
RMEP_MAC Theremotemepmac
address-
multicast Multicastaisframetobe
sent-2191cvlanVLAN_LIST Cvlanidofaispacket1-4094
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoconfigureais:
Switch#configureterminal
Switch(config)#ethernetcfmaisstatusenablealldomaintestvlan2level5multicast
RelatedCommands
None
13.3.14ethernetcfmaissuppressalarmenabledomain
CommandPurpose
Usethecommandtoenableaissuppressalarm.Whenthiscommandisconfigured
andaisconditionisenabled,thelocerrorswillnotbereported.
CommandSyntax
ethernetcfmaissuppressalarmenabledomainDOMAIN_NAME(vlanVLAN_ID|)
noethernetcfmaissuppressalarmenabledomainDOMAIN_NAME(vlanVLAN_ID
|)
Parameter ParameterDescriptionParameterValue2192DOMAIN_NAME Maintenancedomain
nameofthelocalmepStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenableaissuppressalarm:
Switch#configureterminal
Switch(config)#ethernetcfmaissuppressalarmenabledomaintestvlan2
RelatedCommands
None
13.3.15ethernetcfmserver-aisstatusenablelevel
CommandPurpose
Usethiscommandtoconfigureaisserverandparameters.
CommandSyntax
ethernetcfmserver-aisstatusenablelevelLEVEL(interval(1|60))
noethernetcfmserver-aisstatusenable
Parameter ParameterDescriptionParameterValue2193LEVEL Aispacketwillbesentin
thisMDlevel1-7
interval(1|60) Transmissionintervalfor
AISframes,thedefault
valueis1second1-60seconds
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoconfigureaisserver:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetcfmserver-aisstatusenablelevel5interval60
RelatedCommands
None
13.3.16showethernetcfmdomain
CommandPurpose
UsethecommandtodisplayinformationrelatedtotheconfigurationofMDsandMAs.
CommandSyntax
showethernetcfmdomainDOMAIN_NAME2194Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayinformationrelatedtotheconfiguration
ofMDsandMas:
Switch#showethernetcfmdomaintest
RelatedCommands
None
13.3.17showethernetcfmmaintenance-points
CommandPurpose
UsethecommandtodisplayinformationrelatedtoconfigurationofMEPs,remote
MEPs,andMIPs.
CommandSyntax
showethernetcfmmaintenance-points2195CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayinformationrelatedtoconfigurationof
MEPs,remoteMEPs,andMIPs:
Switch#showethernetcfmmaintenance-points
RelatedCommands
None
13.3.18showethernetcfmmaintenance-pointslocal
CommandPurpose
UsethecommandtodisplayinformationrelatedtoconfigurationofMEPsandMIPs.
CommandSyntax
showethernetcfmmaintenance-pointslocal(mep|mip)(interfaceIFNAME|
domainDOMAIN_NAME|levelLEVEL)
Parameter ParameterDescriptionParameterValue
mep Maintenanceendpoint-
mip Maintenanceintermediate
point-
interfaceIFNAME Interfacename Supportphysicalports2196domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel 0-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayinformationrelatedtoconfigurationof
MEPsandMIPs:
Switch#showethernetcfmmaintenance-pointslocalmepinterfaceeth-0-1
RelatedCommands
None
13.3.19showethernetcfmmaintenance-pointsremote
CommandPurpose
UsethecommandtodisplayinformationrelatedtoconfigurationofremoteMEPs.
CommandSyntax
showethernetcfmmaintenance-pointsremote(mpidMEPID|macMAC|)(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue2197mpidMEPID Theremotemepid 1-8191
macMAC Theremotemepmac
addressMACAddress
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel,therangeis0to
70-7
vlanVLAN_ID Vlanid 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayinformationofremoteMEP:
Switch#showethernetcfmmaintenance-pointsremotempid1domaintest
RelatedCommands
None
13.3.20showethernetcfmccconfig
CommandPurpose
UsethecommandtodisplayinformationrelatedtoCCconfiguration.2198CommandSyntax
showethernetcfmccconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayinformationrelatedtoCCconfiguration:
Switch#showethernetcfmccconfig
RelatedCommands
None
13.3.21showethernetcfmerrors
CommandPurpose
UsethecommandtodisplayCFMerror.
CommandSyntax
showethernetcfmerrors(domainDOMAIN_NAME|levelLEVEL|)
Parameter ParameterDescriptionParameterValue
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters2199levelLEVEL MDlevel,therangeis0to
70-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplayCFMerror:
Switch#showethernetcfmerrors
RelatedCommands
None
13.3.22showethernetcfmaismep
CommandPurpose
Usethecommandtodisplayaisconfigurationforlocalmep.
CommandSyntax
showethernetcfmaismepMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
MEPID Localmepid,therangeis
1to81911-81912200DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayaisconfigurationforlocalmep:
Switch#showethernetcfmaismep1domaintestvlan2
RelatedCommands
None
13.3.23showethernetcfm
CommandPurpose
Usethecommandtodisplaycfmglobalinformation.
CommandSyntax
showethernetcfm
CommandMode
PrivilegedEXEC2201Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocfmglobalinformation:
Switch#showethernetcfm
RelatedCommands
None
13.3.24ethernetcfmlinktracermepid
CommandPurpose
UsethecommandtoissueCFMlinktracemessagesforremotemepanddiscoverya
pathtoremotemep.
CommandSyntax
ethernetcfmlinktracermepidRMEPID(domainDOMAIN_NAME|levelLEVEL)
(vlanVLAN_ID|)(ttlTTL|timeoutTIMEOUT|priorityPRIORITY|ltm-egress-
identifier-tlv|sender-id-tlv|organization-specific-tlv)
Parameter ParameterDescriptionParameterValue
RMEPID Remotemepid 1-8191
MEPID Thesourcelocalmepid1-8191
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel,therangeis0to
70-72202vlanVLAN_ID Vlanid 1-4094
ttlTTL Maximumhops,thedefault
valueis641-255
timeoutTIMEOUT Thevalueoftimeout,the
defaultvalueis51-65535
priorityPRIORITY Vlanpriority,thedefault
valueis70-7
ltm-egress-identifier-tlvLTMegressidentifierTLV-
sender-id-tlv SenderIDTLV -
organization-specific-tlvOrganizationSpecificTLV-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtostartlinktrace:
Switch#ethernetcfmlinktracermepid1mepid2domaintestvlan2ttl255timeout5priority7
RelatedCommands
ethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
interval(1|2|3|4|5|6|7)
ethernetcfmmepcrosscheckmpidMEPID(vlanVLAN_ID|)(macMAC|)220313.3.25ethernetcfmlinktracemac
CommandPurpose
UsethecommandtoissueCFMlinktracemessagesforremotemepormipmac
addressanddiscoveryapathtoremotemepormip.
CommandSyntax
ethernetcfmlinktracemacMACADDRESSmepidMEPID(domainDOMAIN_NAME
|levelLEVEL)(vlanVLAN_ID|)(ttlTTL|timeoutTIMEOUT|priorityPRIORITY|)
Parameter ParameterDescriptionParameterValue
MACADDRESS Theremotemepmac
addressMACAddress
MEPID Thesourcelocalmepid1-8191
domainDOMAIN_NAMEMaintenancedomain
nameStringwithupto43
characters
levelLEVEL MDlevel,therangeis0to
70-7
VLAN_ID Vlanid 1-4094
ttlTTL Maximumhops,thedefault
valueis641-255
timeoutTIMEOUT Thevalueoftimeout,the
defaultvalueis51-65535
priorityPRIORITY Vlanpriority,thedefault
valueis70-7
CommandMode
PrivilegedEXEC
Default
None2204Usage
None
Examples
Thefollowingexampleshowshowtostartlinktrace:
Switch#ethernetcfmlinktracemac7234.ef5a.2806mepid1domaintestvlan2ttl255timeout5priority7
RelatedCommands
ethernetcfmmep(down|up)mpidMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
interval(1|2|3|4|5|6|7)
ethernetcfmmepcrosscheckmpidMEPID(vlanVLAN_ID|)(macMAC|)
13.3.26ethernetcfmlinktracecacheenable
CommandPurpose
Usethecommandtoconfigurecachinglinktraceinformation.Thedefaultvalueis
disabled.
CommandSyntax
ethernetcfmlinktracecacheenable
noethernetcfmlinktracecacheenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
None2205Examples
Thefollowingexampleshowshowtoconfigurecachinglinktraceinformation:
Switch#configureterminal
Switch(config)#ethernetcfmlinktracecacheenable
RelatedCommands
None
13.3.27ethernetcfmlinktracecachesize
CommandPurpose
Usethecommandtoconfigurelinktracecachesize.
CommandSyntax
ethernetcfmlinktracecachesizeENTRIES
noethernetcfmlinktracecachesize
Parameter ParameterDescriptionParameterValue
ENTRIES Cacheentrynumber,the
defaultvalueis1001-65535
CommandMode
GlobalConfiguration
Default
100
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurelinktracecachesize:2206Switch#configureterminal
Switch(config)#ethernetcfmlinktracecachesize200
RelatedCommands
None
13.3.28ethernetcfmlinktracecacheholdtime
CommandPurpose
Usethecommandtoconfigurelinktracecacheholdtime.
CommandSyntax
ethernetcfmlinktracecacheholdtimeMINUTES
Parameter ParameterDescriptionParameterValue
MINUTES Cacheentryholdtime
minutes,thedefaultvalue
is60minutes1-65535minutes
CommandMode
GlobalConfiguration
Default
60minutes
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurelinktracecacheholdtime:
Switch#configureterminal
Switch(config)#ethernetcfmlinktracecacheholdtime902207RelatedCommands
None
13.3.29showethernetcfmlinktracecache
CommandPurpose
Usethecommandtodisplaylinktracecacheentries.
CommandSyntax
showethernetcfmlinktracecache
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaylinktracecacheentries:
Switch#configureterminal
Switch(config)#ethernetcfmlinktracecacheholdtime90
RelatedCommands
None
13.3.30clearethernetcfmlinktracecache
CommandPurpose
Usethecommandtoclearlinktracecache.2208CommandSyntax
clearethernetcfmlinktracecache
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoclearlinktracecache:
Switch#showethernetcfmlinktracecache
RelatedCommands
None
13.3.31ethernetcfmmipccm-databasesize
CommandPurpose
Usethecommandtoconfiguremipccmdatabasesize.
CommandSyntax
ethernetcfmmipccm-databasesizeENTRIES
noethernetcfmmipccm-databasesize
Parameter ParameterDescriptionParameterValue2209ENTRIES Cacheentrynumber,the
rangeis1to65535,the
defaultvalueis1001-65535
CommandMode
GlobalConfiguration
Default
100
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguremipccmdatabasesize:
Switch#configureterminal
Switch(config)#ethernetcfmmipccm-databasesize200
RelatedCommands
None
13.3.32ethernetcfmmipccm-databaseholdtime
CommandPurpose
Usethecommandtoconfiguremipccm-databaseholdtime.
CommandSyntax
ethernetcfmmipccm-databaseholdtimeMINUTES
noethernetcfmmipccm-databaseholdtime
Parameter ParameterDescriptionParameterValue2210MINUTES Mipccmdatabasehold
timeminutes,therangeis
60to65535minutes,the
defaultvalueis60minutes1-65535minutes
CommandMode
GlobalConfiguration
Default
60minutes
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguremipccm-databaseholdtime:
Switch#configureterminal
Switch(config)#ethernetcfmmipccm-databaseholdtime90
RelatedCommands
None
13.3.33showethernetcfmmipccm-database
CommandPurpose
Usethecommandtodisplaymipccm-database.
CommandSyntax
showethernetcfmmipccm-database
CommandMode
PrivilegedEXEC2211Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaymipccm-database:
Switch#showethernetcfmmipccm-database
RelatedCommands
None
13.3.34clearethernetcfmmipccm-database
CommandPurpose
Usethecommandtoclearmipccmdatabase.
CommandSyntax
clearethernetcfmmipccm-database
CommandMode
PrivilegedEXEC
Default
None
Usage
None2212Examples
Thefollowingexampleshowshowtoclearmipccmdatabase:
Switch#clearethernetcfmmipccm-database
RelatedCommands
None
13.3.35ethernetcfmsf-reason
CommandPurpose
Usethecommandtoconfiguresignalfailreasonsandthesereasonswilltrigger
g8031/g8032.
CommandSyntax
ethernetcfmsf-reason(all|{loc|rdi-rx|ais-defect}|none)
noEthernetcfmsf-reason
Parameter ParameterDescriptionParameterValue
all Configureallreasonsto
triggerSignalFail-
loc Configureloctotrigger
SignalFail-
rdi-rx Configureremotemeprdi
totriggerSignalFail-
ais-defect Configureaisconditionto
triggerSignalFail-
none Configurenonereason-
CommandMode
GlobalConfiguration2213Default
Thedefaultvalueofsf-reasonisLoc
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguresignalfailreasons:
Switch#configureterminal
Switch(config)#ethernetcfmsf-reasonall
RelatedCommands
None
13.3.36ethernetcfmmode
CommandPurpose
Usethiscommandtoconfigurecfmmodeglobally.Usethenoparametertoconfigure
cfmmodeto802.1ag.
CommandSyntax
ethernetcfmmode(dot1ag|y1731)
noethernetcfmmode
Parameter ParameterDescriptionParameterValue
dot1ag IEEE802.1ag-2007 -
y1731 ITU-TY.1731 -
CommandMode
GlobalConfiguration2214Default
IEEE802.1ag-2007
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurecfmmodeglobally:
Switch#configureterminal
Switch(config)#ethernetcfmmodedot1ag
Switch(config)#noethernetcfmmode
RelatedCommands
None
13.3.37ethernetcfmraw-vlan
CommandPurpose
Usethiscommandtoconfigurecfmraw-vlanmodeglobally.Usethenoparameterto
configurecfmmodetonon-raw-vlanmode.
CommandSyntax
ethernetcfmraw-vlan
noethernetcfmraw-vlan
CommandMode
GlobalConfiguration
Default
None2215Usage
None
Examples
Thefollowingexampleshowshowtoconfigurecfmraw-vlanmodeglobally:
Switch#configureterminal
Switch(config)#ethernetcfmraw-vlan
Switch(config)#noethernetcfmraw-vlan
RelatedCommands
None
13.3.38ethernetcfmlmenabledual-ended
CommandPurpose
Usethiscommandtoenabledual-endedlossmeasurement.
CommandSyntax
ethernetcfmlmenabledual-ended(domainDOMAIN_NAME|levelLEVEL)(vlan
VLAN_ID|)mepidMEPID(all-cos|per-cos|cosCOS_VALUE)(stats-interval
INTERVAL_VALUE|)(cache-sizeCACHE_VALUE|)
noethernetcfmlmenabledual-ended(domainDOMAIN_NAME|levelLEVEL)
(vlanVLAN_ID|)mepidMEPID
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
LEVEL MDleve 0-7
VLAN_ID Vlanid 1-4094
MEPID Localmepid 1-81912216all-cos Allpacketswithdifferent
coswillbecounted
together-
per-cos Packetswithdifferentcos
willbecountedseparately-
cosCOS_VALUE Packetswithspecifiedcos
willbecounted.0-7
stats-interval
INTERVAL_VALUEAfteraninterval,system
willgetcountervaluesand
calculateframelossand
framelossratiofornear
endandfarend.
Afteraninterval,system
willgetcountervaluesand
calculateframelossand
framelossratiofornear
endandfarend.
Therangeis1to10,unit
issecond,andthedefault
valueis1.1-10seconds
cache-size
cache-size
CACHE_VALUECacheentrynumberforlm
results.
Cacheentrynumberforlm
results.
Thedefaultvalueis128.1-512
CommandMode
GlobalConfiguration
Default
None2217Usage
None
Examples
Thefollowingexampleshowshowtoenabledual-endedlossmeasurement:
Switch#configureterminal
Switch(config)#ethernetcfmlmenabledual-endeddomainmd1vlan2mepid1all-cosstats-interval1cache-
count256
RelatedCommands
None
13.3.39ethernetcfmlmenablesingle-ended
CommandPurpose
Usethiscommandtoenablesingle-endedlossmeasurement.
CommandSyntax
ethernetcfmlmenablesingle-ended(domainDOMAIN_NAME|levelLEVEL)(vlan
VLAN_ID|)mepidMEPID(all-cos|per-cos|cosCOS_VALUE)
noethernetcfmlmenablesingle-ended(domainDOMAIN_NAME|levelLEVEL)
(vlanVLAN_ID|)mepidMEPID
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
LEVEL MDleve 0-7
VLAN_ID Vlanid 1-4094
MEPID Localmepid 1-8191
all-cos Allpacketswithdifferent
coswillbecounted
together-2218per-cos Packetswithdifferentcos
willbecountedseparately-
cosCOS_VALUE Packetswithspecifiedcos
willbecounted.0-7
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenablesingle-endedlossmeasurement:
Switch#configureterminal
Switch(config)#ethernetcfmlmenablesingle-endeddomainmd1vlan2mepid1all-cos
RelatedCommands
None
13.3.40ethernetcfmlmsingle-ended
CommandPurpose
UsethecommandtoissueCFMsingle-endedlossmessagemessages.
CommandSyntax
ethernetcfmlmsingle-ended(domainDOMAIN_NAME|levelLEVEL)(vlan
VLAN_ID|)rmepidRMEPIDmepidMEPID(countCOUNT|)(interval(1|2|3|)
|)2219Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
name-
LEVEL MDleve 0-7
VLAN_ID Vlanid 1-4094
RMEPID Remotemepid 1-8191
MEPID Localmepid 1-8191
countCOUNT Repeatcount,thedefault
valueis22-60
interval LMTransmissioninterval,
defaultvalueis1second.-
1 LMInterval,100
milliseconds-
2 LMInterval,1second -
3 LMInterval,10seconds-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoissueCFMsingle-endedlossmessage
messages:
Switch#ethernetcfmlmsingle-endeddomainmd1vlan2rmepid2mepid1count10interval12220RelatedCommands
None
13.3.41showethernetcfmlm
CommandPurpose
Usethecommandtodisplaydual-endedlossmeasurementresults.
CommandSyntax
showethernetcfmlmdomainDOMAIN_NAME(vlanVLAN_ID|)mepidMEPID
(cosCOS_VALUE)
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
VLAN_ID Vlanid 1-4094
MEPID Localmepid 1-8191
cosCOS_VALUE Displaylmresultfor
specifiedcos.
Displaylmresultfor
specifiedcos.
Thedefaultvalueis00-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None2221Examples
Thefollowingexampleshowshowtodisplaydual-endedlmresults:
Switch#showethernetcfmlmdomainmd1vlan2mepid3
DOMAIN:md1
VLAN:2
MEPID:1
StartTime:2013/07/159:00:09
EndTime:2013/07/159:00:09
Notes:1.WhenthedifferenceofTxislessthanthedifferenceofRx,
thenodeisinvalid,lossandlossratioshouldbe"-";
2.Whenlocisreportedformep,thelossshouldbe"-"andloss
ratioshouldbe100%;
3.Whencalculateaveragelossandlossratio,invalidorlocnodes
willbeexcluded;
Latestdual-endedlossstatistics:
--------------------------------------------------------------------------------
IndexCosLocal-lossLocal-lossratioRemote-lossRemote-lossratioTime
--------------------------------------------------------------------------------
1all4050.0000%4050.0000%09:00:09
2all- -- -09:00:09
3all0000.0000%100100.0000%09:00:09
4all0000.0000%99099.0000%09:00:09
5all0000.0000%90090.0000%09:00:09
6all0000.0000%1001.0000%09:00:09
7all0000.0000%0000.0000%09:00:09
8all- -- -09:00:09
9all0000.0000%4294967039099.9999%09:00:09
10all0000.0000%510099.8043%09:00:09
11all-100.0000%-100.0000%09:00:09
12all0000.0000%0000.0000%09:00:09
13all4050.0000%4050.0000%09:00:09
14all4050.0000%4050.0000%09:00:09
--------------------------------------------------------------------------------
MaximumLocal-loss:4MaximumLocal-lossRatio:100.0000%
MinimumLocal-loss:0MinimumLocal-lossRatio:000.0000%
AverageLocal-loss:1AverageLocal-lossRatio:013.6363%
MaximumRemote-loss:4294967039MaximumRemote-lossRatio:100.0000%
MinimumRemote-loss:0MinimumRemote-lossRatio:000.0000%
AverageRemote-loss:390451622AverageRemote-lossRatio:058.1640%
RelatedCommands
None222213.3.42ethernetcfmsd-reason
CommandPurpose
Usethecommandtoconfiguresignaldefectreasons.Ifdual-lmlossrationisgreater
thanlimit,logwillbeprintedandtrapwillbereported.
CommandSyntax
ethernetcfmsd-reason(domainDOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)
mepidMEPIDratioRATIO_VALUE
noethernetcfmsd-reason(domainDOMAIN_NAME|levelLEVEL)(vlanVLAN_ID
|)mepidMEPID
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
LEVEL MDlevel 0-7
VLAN_ID Vlanid 1-4094
MEPID Localmepid 1-8191
RATIO_VALUE Dual-lmlossratio
limitation,therangeis1to
1000,unitisoneina
thousand,1-1000
CommandMode
GlobalConfiguration
Default
None
Usage
None2223Examples
Thefollowingexampleshowshowtoenablesd-reason:
Switch#configureterminal
Switch(config)#ethernetcfmsd-reasondomainmd1vlan2mepid1ratio100
RelatedCommands
None
13.3.43ethernetcfm(1dm|dmm)
CommandPurpose
UsethecommandtoissueCFM1dmordmmmessagesforremotemepid,receive
dmrfromremotemep,calculateanddisplayframedelay.
CommandSyntax
ethernetcfm(1dm|dmm)rmepidRMEPIDmepidMEPIDcountCOUNT(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)(priorityPRIORITY|interval(1|
2|3|))(frame_sizeSIZE|)
Parameter ParameterDescriptionParameterValue
RMEPID Remotemepid 1-8191
MEPID Localmepid 1-8191
COUNT Repeatcount 1-60
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
VLAN_ID Vlanid 1-4094
LEVEL MDlevel 0-7
priorityPRIORITY Vlanpriority,thedefault
valueis70-7
interval DMTransmissioninterval,
defaultvalueis1second.-22241 DMInterval,100
milliseconds-
2 DMInterval,1second-
3 DMInterval,10seconds-
frame_sizeSIZE TherangeofSIZEshould
be64bytesto9600bytes,
thedefaultvalueis64
bytes;64-9600bytes
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoissueCFM1dmordmmmessages:
Switch#configureterminal
Switch(config)#ethernetcfmdmmmepid1rmepid2duration5domainmd1vlan2priority3interval1
RelatedCommands
None
13.3.44ethernetcfm(1dm|dmm)continual
CommandPurpose
UsethecommandtoissueCFM1dmordmmmessagesforremotemepid
periodically,receivedmrfromremotemep,calculateanddisplayframedelay.2225CommandSyntax
ethernetcfm(1dm|dmm)continualrmepidRMEPIDmepidMEPID(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)(priorityPRIORITY|interval(1|
2|3|4|5|))(frame_sizeSIZE|)
noethernetcfm(1dm|dmm)continualrmepidRMEPIDmepidMEPID(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
RMEPID Remotemepid 1-8191
MEPID Localmepid 1-8191
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
VLAN_ID Vlanid 1-4094
LEVEL MDlevel 0-7
priorityPRIORITY Vlanpriority,thedefault
valueis70-7
interval DMTransmissioninterval,
defaultvalueis30
seconds.-
1 DMInterval,100
milliseconds-
2 DMInterval,1second-
3 DMInterval,10seconds-
4 DMInterval,30seconds-
5 DMInterval,60seconds-
frame_sizeSIZE TherangeofSIZEshould
be64bytesto9600bytes,
thedefaultvalueis64
bytes;64-9600bytes2226CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoissueCFM1dmordmmmessagesperiodically:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ethernetcfmdmmcontinualrmepid1mepid2domainmd1vlan2priority3interval1
RelatedCommands
showethernetcfmdmmcontinualmepidMEPID(domainDOMAIN_NAME|level
LEVEL)(vlanVLAN_ID|)
13.3.45showethernetcfmdmmcontinual
CommandPurpose
Usethecommandtodisplaycontinualdelaymeasurementstatistics.
CommandSyntax
showethernetcfmdmmcontinual((rmepidRMEPIDmepidMEPID(domain
DOMAIN_NAME|levelLEVEL)(vlanVLAN_ID|))|)
Parameter ParameterDescriptionParameterValue
RMEPID Remotemepid 1-8191
MEPID Localmepid 1-81912227DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
VLAN_ID Vlanid 1-4094
LEVEL MDlevel 0-7
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaycontinualdelaymeasurementstatistics:
Switch#showethernetcfmdmmcontinual
RelatedCommands
None
13.3.46ethernetcfmdelaymeasurementcacheenable
CommandPurpose
Usethecommandtoconfigurecachingdelaymeasurementinformation.Thedefault
valueisenabled.
CommandSyntax
ethernetcfmdelaymeasurementcacheenable
noethernetcfmdelaymeasurementcacheenable2228CommandMode
GlobalConfiguration
Default
Enabled
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguredelaymeasurementcacheenable:
Switch#configureterminal
Switch(config)#ethernetcfmdelaymeasurementcacheenable
RelatedCommands
None
13.3.47ethernetcfmdelaymeasurementcachesize
CommandPurpose
Usethecommandtoconfiguredelaymeasurementcachesize.
CommandSyntax
ethernetcfmdelaymeasurementcachesizeENTRIES
noEthernetcfmdelaymeasurementcachesize
Parameter ParameterDescriptionParameterValue
ENTRIES Cacheentrynumber,the
defaultvalueis10001-65535
CommandMode
GlobalConfiguration2229Default
1000
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguredelaymeasurementcachesize:
Switch#configureterminal
Switch(config)#ethernetcfmdelaymeasurementcachesize100
RelatedCommands
None
13.3.48showethernetcfmdelaymeasurementcache
CommandPurpose
Usethecommandtodisplaydelaymeasurementcacheentries.
CommandSyntax
showethernetcfmdelaymeasurementcache
CommandMode
PrivilegedEXEC
Default
None
Usage
None2230Examples
Thefollowingexampleshowshowtodisplaydelaymeasurementcacheentries:
Switch#showethernetcfmdelaymeasurementcache
RelatedCommands
None
13.3.49clearethernetcfmdelaymeasurementcache
CommandPurpose
Usethecommandtocleardelaymeasurementcacheentries.
CommandSyntax
clearethernetcfmdelaymeasurementcache
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtocleardelaymeasurementcacheentries:
Switch#clearethernetcfmdelaymeasurementcache
RelatedCommands
None223113.3.50ethernetcfmcsf
CommandPurpose
UsethiscommandtoconfigureCSF(clientsignalfail)relationbetweenclientmep
andservermep.
CommandSyntax
ethernetcfmcsfclientdomainCLI_DOMAIN_NAME(vlanCLI_VLAN_ID|)mepid
CLI_MEPIDserverdomainSRV_DOMAIN_NAME(vlanSRV_VLAN_ID|)mepid
SRV_MEPID(tx-interval(1|60)|)
noethernetcfmcsfclientdomainCLI_DOMAIN_NAME(vlanCLI_VLAN_ID|)
mepidCLI_MEPIDserverdomainSRV_DOMAIN_NAME(vlanSRV_VLAN_ID|)
mepidSRV_MEPID
Parameter ParameterDescriptionParameterValue
CLI_DOMAIN_NAME Clientmaintenance
domainnameStringwithupto43
characters
vlanCLI_VLAN_ID Clientvlanid 1-4094
CLI_MEPID Clientlocalmepid 1-8191
SRV_DOMAIN_NAMEServermaintenance
domainnameStringwithupto43
characters
vlanSRV_VLAN_ID Servervlanid 1-4094
SRV_MEPID Serverlocalmepid 1-8191
tx-interval(1|60) Transmissionintervalof
csfmessage,thedefault
valueis60seconds1or60seconds
CommandMode
GlobalConfiguration2232Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoconfigureCSFrelation:
Switch#configureterminal
Switch(config)#ethernetcfmcsfclientdomaincustvlan30mepid88serverdomainprovidvlan20mepid666tx-
interval1
RelatedCommands
None
13.3.51showethernetcfmcsf
CommandPurpose
Usethecommandtodisplaycsfrelationandstatus.
CommandSyntax
showethernetcfmcsf
CommandMode
PrivilegedEXEC
Default
None
Usage
None2233Examples
Thefollowingexampleshowshowtodisplaycsf:
Switch#showethernetcfmcsf
CTR-ClientTriggerreason,L(los)/F(fdi)/R(rdi)/N(null)
ECC-EnterCSFCondition,Y(Yes)/N(No)
SRR-ServerRxReason,L(los)/F(fdi)/R(rdi)/D(dci)/N(null)
Tx-I,TransmitInterval
Rx-I,TheperiodwhichisgottenfromLCKpackets
ClientMep ServerMep
MPIDCli-DomainVLANCTRECCMPIDSrv-DomainVLANSRRTx-IRx-I
1003md12345678903001L/F/RY1004md12345678902001L/F/R11
RelatedCommands
None
13.3.52ethernetcfmlckenable
CommandPurpose
Usethiscommandtolockdatapacketsformep.
CommandSyntax
ethernetcfmlckenablemepMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)tx-
levelTX_LEVEL({tx-interval(1|60)|cvlanVLAN_LIST}|)
noethernetcfmlckenablemepMEPIDdomainDOMAIN_NAME(vlanVLAN_ID|)
Parameter ParameterDescriptionParameterValue
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
MEPID Localmepid 1-8191
TX_LEVEL Transmissionleveloflck
message0-72234tx-interval(1|60) Transmissionintervaloflck
message,thedefaultvalue
is60seconds1or60seconds
cvlanVLAN_LIST Cvlanidoflckpacket1-4094
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenablelockdatapacketsformep:
Switch#configureterminal
Switch(config)#ethernetcfmlckenabledomainmd1vlan2mepid1tx-level5tx-interval1
RelatedCommands
None
13.3.53showethernetcfmlck
CommandPurpose
Usethecommandtodisplaylckinformation.
CommandSyntax
showethernetcfmlck
CommandMode
PrivilegedEXEC2235Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaylckinformation:
Switch#showethernetcfmlck
En-LCKEnable,Y(Yes)/N(No)
Rx-LC,ReceiveLCKpacketsandenterLCKcondition,Y(Yes)/N(No)
Rx-I,TheperiodwhichisgottenfromLCKpackets
Tx-Domain,frameswithETH-LCKinformationaresenttothisDomain
Tx-I,TransmitInterval
MPIDDomainVLANEnRx-LCRx-ITx-DomainTx-I
1001md12345678903001YNN/Amd12345678911
RelatedCommands
None
13.3.54showethernetcfmlmbrief
CommandPurpose
Usethecommandtodisplayallmepswhichareenabledlossmeasurement.
CommandSyntax
showethernetcfmlmbrief
CommandMode
PrivilegedEXEC
Default
None2236Usage
None
Examples
Thefollowingexampleshowshowtodisplaylmbriefinformation:
Switch#showethernetcfmlmbrief
------------------------------------------
MPIDDomainVLANLM-En
------------------------------------------
1md12dual-lm-enabled
5md12single-lm-enabled
RelatedCommands
None
13.3.55ethernetcfmtsttransmissionenable
CommandPurpose
Usethiscommandtoenabletesttransmissionenable.
CommandSyntax
ethernetcfmtsttransmissionenablesessionSESSION_IDdomainDOMAIN_NAME
(vlanVLAN_ID|)mepMEPIDtx-mode(fixedpkt-numNUMBER|continuous)
({pattern-type(repeatVALUE|random|increment-byte|decrement-byte)|
packet-sizePACKET_SIZE|dest-mac(multicast|MACADDRESS)}|)
noethernetcfmtsttransmissionenablesessionSESSION_IDdomain
DOMAIN_NAME(vlanVLAN_ID|)mepidMEPID
Parameter ParameterDescriptionParameterValue
SESSION_ID sessionid 1-4
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid 1-40942237MEPID Localmepid 1-8191
NUMBER Transmissionpacket
number1-65535
VALUE Thevalueofrepeatpattern
type,therangeis0to
0xFFFFFFFF0-0xFFFFFFFF
PACKET_SIZE Transmissionpacketsize,
therangeis64bytesto
16027bytes,defaultis512
bytes64-16027bytes
multicast Thedestinationmac
addressoftstpackets
shouldbemulticast
address,defaultis
multicast-
MACADDRESS Thedestinationmac
addressoftstpackets
shouldbeunicastmac
address-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoenablemaintenancedomaintstformep:2238Switch#configureterminal
Switch(config)#ethernetcfmtsttransmissionenabledomainmd1vlan2mepid1tx-modecontinuouspattern-
typerandompacket-size1518
RelatedCommands
None
13.3.56ethernetcfmtststart/stop
CommandPurpose
Usethiscommandtostartorstoptesttransmission.
CommandSyntax
ethernetcfmtststartsessionSESSION_IDrateRATEtime(cosCOS_VALUE|)
(secondSECOND|1m|15m|2h|24h)(tx_portTX_PORT|)
ethernetcfmtststop
Parameter ParameterDescriptionParameterValue
SESSION_ID sessionid 1-4
RATE Transmissionrate,the
rangeis1to10000,unitis
mbps1-10000mbps
cosCOS_VALUE Vlanpriority,defaultvalue
is70-7
SECOND Transmissiontimefrom1
secondto60seconds1-60seconds
15m Transmissiontimefor
everyrateis15minutes-
2h Transmissiontimefor
everyrateis2hours-
24h Transmissiontimefor
everyrateis24hours-2239TX_PORT Transmissionport,only
validforupmep-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtostarttesttransmissionformep:
Switch#configureterminal
Switch(config)#ethernetcfmtststartsession2rate10timesecond1
Switch#configureterminal
Switch(config)#ethernetcfmtststarttimesecond1
RelatedCommands
None
13.3.57ethernetcfmtstreceptionenable
CommandPurpose
Usethiscommandtoenabletestpacketreception.
CommandSyntax
ethernetcfmtstreceptionenablesessionSESSION_IDdomainDOMAIN_NAME
(vlanVLAN_ID|)mepidMEPID
noethernetcfmtstreceptionenablesessionSESSION_IDdomainDOMAIN_NAME
(vlanVLAN_ID|)mepidMEPID2240Parameter ParameterDescriptionParameterValue
session Sessionid 1-4
DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
vlanVLAN_ID Vlanid 1-4094
MEPID Localmepid 1-8191
CommandMode
GlobalConfiguration
Default
None
Usage
TesttransmissionandreceptionmustbeconfiguredonthesameMEP.
Examples
Thefollowingexampleshowshowtoenabletestreceptionformep:
Switch#configureterminal
Switch(config)#ethernetcfmtstreceptionenablesession1domainmd1vlan2mep1
Switch#configureterminal
Switch(config)#ethernetcfmtstreceptionenabledomainmd1vlan2mepid1
RelatedCommands
None
13.3.58showethernetcfmtst
CommandPurpose
Usethecommandtodisplaytestinformation.2241CommandSyntax
showethernetcfmtst
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thesendingsidetestinformation:
Switch#showethernetcfmtst
DOMAIN:md1
VLAN:2
MEPID:2
Transmission:Disabled
Reception:Enabled
Status:Non-Running
StartTime:null
EndTime:null
PacketType:null
Rate:null
PacketSize:null
TxNumber:0
TxBytes:0
RxNumber:28
RxBytes:1792
RelatedCommands
None224213.3.59clearethernetcfmtstcounters
CommandPurpose
Usethecommandtocleartestcounters.
CommandSyntax
clearethernetcfmtstcounters
CommandMode
PrivilegedEXEC
Default
None
Usage
Whentesttransmissionisrunning,cantclearethernetcfmtestcounters.
Examples
Thefollowingexampleshowshowtocleartestcounters:
Switch#clearethernetcfmtstcounters
RelatedCommands
None
13.4CPUTrafficLimitCommands
13.4.1cpu-traffic-limittotalrate
CommandPurpose
UsethiscommandtosetthetotalrateofallstreamsdestinedtoCPU.Usetheno
formofthiscommandtosetthetotalratetothedefaultvalue.2243CommandSyntax
cpu-traffic-limittotalrateRATE_RANGE
nocpu-traffic-limittotalrate
Parameter ParameterDescriptionParameterValue
RATE_RANGE Rateofallstreams
destinedtocpuinpps0-1000000
CommandMode
GlobalConfiguration
Default
2048pps
Usage
N/A
Examples
Thisexampleshowshowtoconfigurecpu-traffic-limittotalrate:
Switch#configureterminal
Switch(config)#cpu-traffic-limittotalrate3000
Thisexampleshowshowtoresetcpu-traffic-limittotalrate:
Switch#configureterminal
Switch(config)#nocpu-traffic-limittotalrate
RelatedCommands
showcputraffic-limit224413.4.2cpu-traffic-limitreasonrate
CommandPurpose
Usethiscommandtosettheindividuallimitrateforthestreamcarriedwiththis
reason.Usethenoformofthiscommandtosettheindividuallimitrateofthereason
toitsdefaultvalue.
CommandSyntax
cpu-traffic-limitreason{bpdu|slow-protocol|eapol|erps|smart-link|arp|dhcp|
rip|ldp|ospf|pim|vrrp|ssh|telnet|mlag|tcp|ipda|icmp-redirect|mcast-rpf-fail
|macsa-mismatch|port-security-discard|vlan-security-discard|ip-mtu-fail|ip-
option|ucast-ttl-fail|mpls-ttl-fail|igmp|sflow-ingress|sflow-egress|fwd-to-cpu|
udld|bfd-learning|bgp|dot1x-mac-bypass|egress-ttl-fail|icmpv6|l2protocol-
tunnel|loopback-detection|mirror-to-cpu|ndp|tunnel-gre-keepalive}rate
RATE_RANGE
nocpu-traffic-limitreason{bpdu|slow-protocol|eapol|erps|smart-link|arp|dhcp
|rip|ldp|ospf|pim|vrrp|ssh|telnet|mlag|tcp|ipda|icmp-redirect|mcast-rpf-
fail|macsa-mismatch|port-security-discard|vlan-security-discard|ip-mtu-fail|ip-
option|ucast-ttl-fail|mpls-ttl-fail|igmp|sflow-ingress|sflow-egress|fwd-to-cpu|
udld|bfd-learning|bgp|dot1x-mac-bypass|egress-ttl-fail|icmpv6|l2protocol-
tunnel|loopback-detection|mirror-to-cpu|ndp|tunnel-gre-keepalive}rate
Parameter ParameterDescriptionParameterValue
bpdu ReasonforBPDU
protocols
packets(includingSTP,
RSTP,MSTP)-
slow-protocol Reasonforslowprotocol
packets.(includingEFM,
LACP)-
eapol ReasonforDot1xprotocol
packets-2245erps ReasonforERPSprotocol
packets
ReasonforERPSprotocol
packets-
arp ReasonforARPprotocol
packets-
dhcp ReasonforDHCPprotocol
packets-
rip ReasonforRIPprotocol
packets-
bgp ReasonforBGPprotocol
packets-
ldp ReasonforLDPprotocol
packets-
ospf ReasonforOSPFprotocol
packets-
pim ReasonforPIMprotocol
packets-
vrrp ReasonforVRRPprotocol
packets-
ssh ReasonforSSHprotocol
packets-
telnet ReasonforTelnetprotocol
packets-
mlag ReasonforMLAGprotocol
packets-
tcp ReasonforTCPprotocol
packets-2246ipda Reasonforpacketswith
IPDAdestinationtorouter
itself-
icmp-redirect Reasonforredirecting
ICMP-
mcast_rpf_fail Reasonformulti-cast
packetswithrpffail-
macsa-mismatch Reasonforpacketsthat
arediscardedforsource
macislearnedfrom
anothersecurityport-
port-security-discard Reasonforpacketsthat
arediscardedforfdb
numberequalstoallowed
maximumnumberof
securityport-
vlan-security-discard Reasonforpacketsthat
arediscardedforfdb
numberequalstoallowed
maximumnumberonthe
specifiedvlan-
ip-mtu-fail Ipmtufail -
ip-option ReasonforIPpacketswith
optionalfields-
ucast-ttl-fail Reasonforucastip
packetswithfailTTL-
mpls-ttl-fail Reasonformplspackets
withfailTTL-
igmp ReasonforIGMPorigmp
snoopingpackets-2247sflow-ingress Reasonforsflowsampled
packetsatingress
direction-
sflow-egress Reasonforsflowsampled
packetsategressdirection-
fwd-to-cpu Reasonforpackets
forwardingtocpu-
udld Reasonforpackets
unidirectionallinkdetection
protocol-
bfd-learning Reasonforbfdlearning
packets-
dot1x-mac-bypass Reasonformacauth
bypasspackets-
egress-ttl-fail Reasonforegressttlfail
packet-
icmpv6 ReasonforICMPv6packet-
l2protocol-tunnel Reasonforlayer2protocol
tunnelpacket-
loopback-detection Reasonforloopback
detectionpacket-
mirror-to-cpu Reasonformirror-to-cpu
packet-
ndp Reasonforneighbor
discoveryprotocolpacket-
tunnel-gre-keepalive Reasonfortunnelgre
keepalivereplypacket-
RATE_RANGE Individualrateofstreams
destinedtocpucarried
withthereasoninkbps0-10000002248CommandMode
GlobalConfiguration
Default
Reason Rate(pps) Reason Rate(pps)
bpdu 64 icmp-redirect 128
slow-protocol 128 mcast-rpf-fail 128
eapol 128 macsa-mismatch128
erps 128 port-security-
discard128
smart-link 128 vlan-security-
discard128
arp 640 udld 128
dhcp 128 ip-mtu-fail 64
rip 64 fwd-to-cpu 64
ldp 512 ip-option 512
ospf 256 ucast-ttl-fail 64
pim 128 mpls-ttl-fail 64
vrrp 512 igmp 128
ssh 64 telnet 64
mlag 1024 tcp 64
ipda 1024 sflow-ingress 128
sflow-egress 128 bfd-learning 128
sflow-egress 128 bfd-learning 1282249Usage
ssh/telnet/mlagisusefulwhenenablecpu-traffic-optimize.
Examples
ThisexampleshowshowtoconfigureindividualrateforBPDUPDU:
Switch#configureterminal
Switch(config)#cpu-traffic-limitreasonbpdurate300
ThisexampleshowshowtoresetindividualrateforBPDUPDU:
Switch#configureterminal
Switch(config)#nocpu-traffic-limitreasonbpdurate
RelatedCommands
showcputraffic-limit
13.4.3cpu-traffic-limitreasonclass
CommandPurpose
Usethiscommandtosetthepriorityclassforthestreamcarriedwiththereason.Use
thenoformofthiscommandtosetthepriorityclassofthereasontoitsdefaultvalue.
CommandSyntax
cpu-traffic-limitreason{bpdu|slow-protocol|eapol|erps|smart-link|arp|dhcp|
rip|ldp|ospf|pim|vrrp|ssh|telnet|mlag|tcp|ipda|icmp-redirect|mcast-rpf-fail
|macsa-mismatch|port-security-discard|vlan-security-discard|ip-mtu-fail|ip-
option|ucast-ttl-fail|mpls-ttl-fail|igmp|sflow-ingress|sflow-egress|fwd-to-cpu|
udld|bfd-learning|bgp|dot1x-mac-bypass|egress-ttl-fail|icmpv6|l2protocol-
tunnel|loopback-detection|mirror-to-cpu|ndp|tunnel-gre-keepalive}class
CLASS_RANGE
nocpu-traffic-limitreason{bpdu|slow-protocol|eapol|erps|smart-link|arp|dhcp
|rip|ldp|ospf|pim|vrrp|ssh|telnet|mlag|tcp|ipda|icmp-redirect|mcast-rpf-
fail|macsa-mismatch|port-security-discard|vlan-security-discard|ip-mtu-fail|ip-
option|ucast-ttl-fail|mpls-ttl-fail|igmp|sflow-ingress|sflow-egress|fwd-to-cpu|
udld|bfd-learning|bgp|dot1x-mac-bypass|egress-ttl-fail|icmpv6|l2protocol-
tunnel|loopback-detection|mirror-to-cpu|ndp|tunnel-gre-keepalive}class2250Parameter ParameterDescriptionParameterValue
CLASS_RANGE Priorityofthestream
carriedwiththisreason.
Reasonwithclass3has
thehighestpriority.0-3
CommandMode
GlobalConfiguration
Default
Reason class Reason class
bpdu 3 icmp-redirect 0
slow-protocol 1 mcast-rpf-fail 1
eapol 0 macsa-mismatch0
erps 2 port-security-
discard0
smart-link 2 vlan-security-
discard0
arp 1 udld 3
dhcp 0 mtu-dontfrag 0
rip 1 mtu-frag 0
ldp 1 sflow-ingress 0
ospf 1 ip-option 0
pim 1 ucast-ttl-fail 0
vrrp 1 mpls-ttl-fail 0
igmp 2 ssh 3
telnet 3 mlag 12251tcp 2 ipda 0
igmp 2 mld 2
sflow-egress 0 dot1x-mac-bypass2
fwd-to-cpu 0 bfd-learning 1
fwd-to-cpu 0 bfd-learning 1
Usage
Thereasonwiththehighestpriorityclasswillgetpreferencetreatmentwhendealing
withscheduling.ssh/telnet/mlagisusefulwhenenablecpu-traffic-optimize.
Examples
ThisexampleshowshowtoconfigurepriorityclassforBPDU:
Switch#configureterminal
Switch(config)#cpu-traffic-limitreasonbpduclass3
RelatedCommands
showcputraffic-limit
13.4.4showcputraffic-limit
CommandPurpose
UsethiscommandtoshowtheCPUtraffic-limitconfigurations.
CommandSyntax
showcputraffic-limit
CommandMode
PrivilegedEXEC
Default
None2252Usage
None
Examples
Thisexampleshowscputraffic-limitconfigurations:
DUT2#showcputraffic-limit
reason rate(pps)class
dot1x-mac-bypass642
bpdu 643
slow-protocol2561
eapol 1280
erps 1283
smart-link 1282
udld 1283
loopback-detection643
arp 2561
dhcp 1280
rip 641
ldp 5121
ospf 2561
pim 1281
bgp 2561
vrrp 5121
ndp 642
icmpv6 642
ssh 643
telnet 643
mlag 10001
tcp 642
ipda 10000
icmp-redirect1280
mcast-rpf-fail1281
macsa-mismatch1280
port-security-discard1280
vlan-security-discard1280
egress-ttl-fail640
ip-mtu-fail 640
bfd-learning 1281
ptp 5122
ip-option 5120
tunnel-gre-keepalive640
ucast-ttl-fail640
mpls-ttl-fail640
igmp 1282
sflow-ingress1280
sflow-egress 1280
fwd-to-cpu 640
l2protocol-tunnel100002253mirror-to-cpu10000
Totalrate:2048(pps)
RelatedCommands
cpu-traffic-limittotalrate
cpu-traffic-limitreasonrate
13.5CPUTrafficStatisticsCommands
13.5.1cpu-traffic-statisticstime
CommandPurpose
UsethiscommandtosettheCPUreceivepacketsorCPUtransmitpacketsstatistics
time.
CommandSyntax
cpu-traffic-statisticstimeRATE-TIME
Parameter ParameterDescriptionParameterValue
RATE-TIME Rateofstatisticstime 1-10seconds
CommandMode
GlobalConfiguration
Default
5s
Usage
N/A
Examples
Thisexampleshowshowtoconfigurecpu-traffic-statisticstime:2254Switch#configureterminal
Switch(config)#cpu-traffic-statisticstime2
RelatedCommands
N/A
13.5.2nocpu-traffic-statisticstime
CommandPurpose
UsethiscommandtoresettheCPUreceivepacketsorCPUtransmitpackets
statisticstime.
CommandSyntax
nocpu-traffic-statisticstime
CommandMode
GlobalConfiguration
Default
N/A
Usage
N/A
Examples
Thisexampleshowshowtoresetcpu-traffic-statisticstime:
Switch#configureterminal
Switch(config)#nocpu-traffic-statisticstime
RelatedCommands
N/A225513.5.3showcputraffic-statisticsreceive
CommandPurpose
UsethiscommandtoshowCPUreceivepacketsbyreason.
CommandSyntax
showcputraffic-statisticsreceive(bpdu|slow-protocol|eapol|erps|smart-link|
arp|dhcp|rip|ldp|ospf|pim|bgp|vrrp|ssh|telnet|mlag|tcp|ipda|icmp-
redirect|mcast-rpf-fail|macsa-mismatch|port-security-discard|vlan-security-
discard|ip-mtu-fail|ip-option|ucast-ttl-fail|sflow-ingress|sflow-egress|igmp|udld
|dot1x-mac-bypass|l2protocol-tunnel|mirror-to-cpu|tunnel-gre-keepalive|
loopback-detection|rsvp|bfd-learning|mpls-ttl-fail|fwd-to-cpu|ptp|)
Parameter ParameterDescriptionParameterValue
bpdu ReasonforBPDU
protocols
packets(includingSTP,
RSTP,MSTP)-
slow-protocol Reasonforslowprotocol
packets.(includingEFM,
LACP)-
eapol ReasonforDot1xprotocol
packets-
erps ReasonforERPSprotocol
packets-
arp ReasonforARPprotocol
packets-
dhcp ReasonforDHCPprotocol
packets-
rip ReasonforRIPprotocol
packets-2256bgp ReasonforBGPprotocol
packets-
ldp ReasonforLDPprotocol
packets-
ospf ReasonforOSPFprotocol
packets-
pim ReasonforPIMprotocol
packets-
vrrp ReasonforVRRPprotocol
packets-
ssh ReasonforSSHprotocol
packets-
telnet ReasonforTelnetprotocol
packets-
mlag ReasonforMLAGprotocol
packets-
tcp ReasonforTCPprotocol
packets-
ipda Reasonforpacketswith
IPDAdestinationtorouter
itself-
icmp-redirect Reasonforredirecting
ICMP-
learning-full Reasonforlearningcache
isfull-
mcast_rpf_fail Reasonformulti-cast
packetswithrpffail-2257macsa-mismatch Reasonforpacketsthat
arediscardedforsource
macislearnedfrom
anothersecurityport-
port-security-discard Reasonforpacketsthat
arediscardedforfdb
numberequalstoallowed
maximumnumberof
securityport-
vlan-security-discard Reasonforpacketsthat
arediscardedforfdb
numberequalstoallowed
maximumnumberonthe
specifiedvlan-
ip-mtu-fail Ipmtufail -
Ip-option ReasonforIPpacketswith
optionalfields-
ucast-ttl-fail Reasonforucastip
packetswithfailTTL-
mpls-ttl-fail Reasonformplspackets
withfailTTL-
Igmp ReasonforIGMPorigmp
snoopingpackets-
sflow-ingress Reasonforsflowsampled
packetsatingress
direction-
sflow-egress Reasonforsflowsampled
packetsategressdirection-
fwd-to-cpu Reasonforpackets
forwardingtocpu-2258bfd-learning Reasonforbfdlearning
packets-
mld mldpacketsormld
snoopingpackets-
dot1x-mac-bypass macauthbypasspackets-
CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
ThisexampleshowshowtoshowcpureceiveBPDUpackets:
Switch#showcputraffic-statisticsreceivebpdu
statisticsratetimeis5second(s)
reasoncount(packets)rate(pps)
bpdu 0 0
RelatedCommands
showcputraffic-statisticsreceiveall
13.5.4showcputraffic-statisticsreceiveall
CommandPurpose
UsethiscommandtoshowCPUreceiveallpackets.
CommandSyntax
showcputraffic-statisticsreceiveall2259CommandMode
PrivilegedEXEC
Default
N/A
Usage
N/A
Examples
ThisexampleshowshowtoshowCPUreceiveallpackets:
Switch#showcputraffic-statisticsreceiveall
statisticsratetimeis5second(s)
reasoncount(packets)rate(pps)
dot1x-mac-bypass0 0
bpdu 0 0
slow-protocol0 0
eapol 0 0
erps 0 0
smart-link0 0
udld 0 0
loopback-detection0 0
arp 0 0
dhcp 0 0
rip 0 0
ldp 0 0
ospf 0 0
pim 0 0
bgp 0 0
vrrp 0 0
rsvp 0 0
ssh 0 0
telnet 0 0
mlag 0 0
tcp 0 0
ipda 0 0
icmp-redirect0 0
mcast-rpf-fail0 0
macsa-mismatch0 0
port-security-discard0 0
vlan-security-discard0 0
ip-mtu-fail0 0
bfd-learning0 0
ptp 0 02260ip-option0 0
tunnel-gre-keepalive0 0
ucast-ttl-fail0 0
mpls-ttl-fail0 0
igmp 0 0
sflow-ingress0 0
sflow-egress0 0
fwd-to-cpu0 0
l2protocol-tunnel0 0
mirror-to-cpu0 0
mpls-tp-pwoam0 0
other 0 0
Total 0 0
RelatedCommands
N/A
13.5.5showcputraffic-statisticstransmit
CommandPurpose
UsethiscommandtoshowtheCPUtransmitallpackets.
CommandSyntax
showcpu-traffic-statistictransmit
CommandMode
PrivilegedEXEC
Default
N/A
Usage
CPUtransmitpacketsstatisticsnotdistinguishreason.
Examples
ThisexampleshowshowtoshowtheCPUtransmitallpackets:2261Switch#showcputraffic-statisticstransmit
statisticsratetimeis5second(s)
count(packets)rate(pps)
Total 0 0
RelatedCommands
N/A
13.6CPUTrafficProtectCommands
13.6.1cpu-traffic-protect
CommandPurpose
Usethiscommandtoenableandenterintocputrafficprotectmode.Usethenoform
ofthiscommandtodisablecputrafficprotectmode.
CommandSyntax
cpu-traffic-protect(arp|dhcp)
nocpu-traffic-protect(arp|dhcp)
Parameter ParameterDescriptionParameterValue
arp ARPpacket -
dhcp DHCPpacket,cputraffic
protectdhcpatportlevelis
enabled.-
CommandMode
GlobalConfiguration
Default
None2262Usage
Whencpu-traffic-protectarpisconfigured,blacklistmodeisentereddefault.When
cpu-traffic-protectdhcpisconfigured,cputrafficprotectdhcpatportlevelisenabled.
Examples
Thisexampleshowshowtoenableandenterintocputrafficprotectmode:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#
RelatedCommands
N/A
13.6.2traceenable
CommandPurpose
Usethiscommandtoenableattacktrace.Usethenoformofthiscommandtodisable
attacktrace.
CommandSyntax
traceenable
notraceenable
CommandMode
CputraifficProtectConfiguration
Default
None
Usage
None2263Examples
Thisexampleshowshowtoenableattacktrace:
Switch#configureterminal
Switch(config-cpu-traffic-protect)#traceenable
RelatedCommands
N/A
13.6.3tracetype
CommandPurpose
Usethiscommandtoconfigureattacktracetype.Usethenoformofthiscommandto
settothedefaulttype.
CommandSyntax
tracetype(sender-ip|src-mac|target-ip|source-portvlan|src-interface)
notracetype
Parameter ParameterDescriptionParameterValue
sender-ip ARPpacketsenderip
address-
src-mac ARPpacketsourceMAC-
target-ip ARPpackettargetip
address-
source-portvlan Theportandvlanpacket
input-
source-interface Thesourceinterface
DHCPpacketinputonly
canbeusedwhencpu-
traffic-protectdhcp.-2264CommandMode
CputraifficProtectConfiguration
Default
TracetypedefaultforARP:src-mac;
TracetypedefaultforDHCP:src-interface
Usage
Tracetypeofdhcponlysupportssrc-interface,andarptracetypeincludesallexcept
src-interface.
Examples
Thisexampleshowshowtoconfigureattacktracetypetosender-ipandtarge-ip:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#tracetypesender-iptarget-ip
RelatedCommands
N/A
13.6.4tracesample
CommandPurpose
Usethiscommandtoconfigureattacktracesamplerate.Usethenoformofthis
commandtosetsampletothedefault.
CommandSyntax
tracesampleSAMPLE-RATE
notracesample
Parameter ParameterDescriptionParameterValue
SAMPLE-RATE Attacktracesamplerate1-10242265CommandMode
CputraifficProtectConfiguration
Default
TracesampledefaultforARP:8;
TracesampledefaultforDHCP:1
Usage
None
Examples
Thisexampleshowshowtoconfigureattacktracesamplerateto16:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#tracesample16
RelatedCommands
None
13.6.5tracethreshold
CommandPurpose
Usethiscommandtoconfigureattacktracechekingthreshold.Usethenoformofthis
commandtosetthresholetothedefault.
CommandSyntax
tracethresholdTHRESHOLD
notracethreshold
Parameter ParameterDescriptionParameterValue
THRESHOLD Attacktracechecking
threshold1-65535,unit:pps2266CommandMode
CputraifficProtectConfiguration
Default
TracethresholddefaultforARP:128;
TracethresholddefaultforDHCP:64
Usage
None
Examples
Thisexampleshowshowtoconfigureattacktracechekingthresholdto10:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#tracethreshold10
RelatedCommands
None
13.6.6tracetimeout
CommandPurpose
Usethiscommandtoconfiguretraceagingtimeout.Usethenoformofthiscommand
tosetagingtimeouttothedefault.
CommandSyntax
tracetimeoutAGING-TIMEOUT
notracetimeout
Parameter ParameterDescriptionParameterValue
AGING-TIMEOUT Attacktraceagingtimeout30-1000000,unit:s2267CommandMode
CputraifficProtectConfiguration
Default
TracetimeoutdefaultforARP:300s
Usage
None
Examples
Thisexampleshowshowtoconfigureattacktracetimeoutto400:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#tracetimeout400
RelatedCommands
None
13.6.7traceaction
CommandPurpose
Usethiscommandtoconfigureattacktracepunishaction.Usethenoformofthis
commandtosettraceactiontothedefault.
CommandSyntax
traceactiondeny(recovertimeRECOVER-TIME|)
notraceaction
Parameter ParameterDescriptionParameterValue
RECOVER-TIME Attacktracepunishaction
auto-recovertime1-86400,unit:s2268CommandMode
CputraifficProtectConfiguration
Default
recovertime300
Usage
Onlyusedforcpu-traffic-protectdhcp,defaultistodenydhcppacketsandrecoverin
300s
Examples
Thisexampleshowshowtoconfigureattacktraceactionrecovertimeto600:
Switch#configureterminal
Switch(config)#cpu-traffic-protectdhcp
Switch(config-cpu-traffic-protect)#traceactiondenyrecovertime600
RelatedCommands
cpu-traffic-protectmanualrecoverdhcp
13.6.8traceprotectdelay-time
CommandPurpose
Usethiscommandtoconfiguretraceprotectdelay-time.Usethenoformofthis
commandtosetprotectdelay-timetothedefault.
CommandSyntax
traceprotectdelay-timeDELAY-TIME
notracedelay-time
Parameter ParameterDescriptionParameterValue
DELAY-TIME delay-timeforprotect
actionisenabled0-86400,unit:s2269CommandMode
CputraifficProtectConfiguration
Default
10
Usage
Onlyusedforcpu-traffic-protectdhcp,representscontinuouslybeingattackedfor
howlongtimetoenablecputrafficprotectdhcp.
Examples
Thisexampleshowshowtoconfigureattackprotectdelay-timeto15:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#traceprotectdelay-time15
RelatedCommands
None
13.6.9applyaccess-list
CommandPurpose
Usethiscommandtoconfigurearpprotectfilterrules.Usethenoformofthis
commandtodisablerules.
CommandSyntax
applyaccess-listNAME(mode(blacklist|whitelist(rateRATE|))|)
noapplyaccess-listACL-NAME
Parameter ParameterDescriptionParameterValue
ACL-NAME Extendipaccesslistname-
blacklist Blacklistmode -2270whitelist Whitelistmode -
RATE Packettocpurate 32-2048,unit:pps
CommandMode
CputraifficProtectConfiguration
Default
Rate:32pps,Mode:blacklist
Usage
Therateiscalculatedbyusing64Btyespacket
Examples
Thisexampleshowshowtoconfigurearpprotectfilterruleswithaccesslist2and
enterintowhitelistmodeandtherateis64pps:
Switch#configureterminal
Switch(config)#cpu-traffic-protectarp
Switch(config-cpu-traffic-protect)#applyaccess-list2modewhitelistrate64
RelatedCommands
None
13.6.10cpu-traffic-protectmanualrecoverdhcp
CommandPurpose
Usethiscommandtomanuallyrecoverdhcpprotocolofinterfacesbeingpunishedby
cputrafficprotect.
CommandSyntax
cpu-traffic-protectmanualrecoverdhcp(interface(IFPHYSICAL|IFAGG|IFVLAN)
|all)2271Parameter ParameterDescriptionParameterValue
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
IFVLAN VLANinterfacename -
all Allinterfacesbeing
punished-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigurecpu-traffic-protectmanualrecoverdhcpfor
interfaceeth-0-1:
Switch#cpu-traffic-protectmanualrecoverdhcpinterfaceeth-0-1
RelatedCommands
traceaction
13.6.11showcputraffic-protectdhcprecovertable
CommandPurpose
Usethiscommandtoshowtheinformationtableofinterfacesbeingprotectedbycpu
trafficandtheirrecovertimeofdhcpprotocol.2272CommandSyntax
showcputraffic-protectdhcprecovertable
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowcputraffic-protectdhcprecovertable:
Switch#showcputraffic-protectdhcprecovertable
DhcpRecoverStateTable:
------------------------------------------------------------------------
InterfaceRecoverTime(s)
------------------------------------------------------------------------
eth-0-130
------------------------------------------------------------------------
Total:1
RelatedCommands
traceprotectdelay-time
13.6.12showcputraffic-protecttrace
CommandPurpose
Usethiscommandtoshowtheinformationofattacktrace.
CommandSyntax
showcputraffic-protect(arp|dhcp)trace(history|)2273Parameter ParameterDescriptionParameterValue
arp ARPpacket -
dhcp DHCPpacket -
histroy Historytraceinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowtheinformationofarpattacktrace:
Switch#showcputraffic-protectarptrace
AttackSourceUserTable:
------------------------------------------------------------------------
MacAddressInterfaceVlan:O/IAttackTimeTotalPackets
------------------------------------------------------------------------
0000.0b00.0200eth-0-3-2019-01-0215:18:211712
------------------------------------------------------------------------
Total:1
AttackSourcePortTable:
------------------------------------------------------------------------
InterfaceVlan:O/IAttackTimeTotalPackets
------------------------------------------------------------------------
------------------------------------------------------------------------
Total:0
AttackSenderIPTable:
------------------------------------------------------------------------
IPAddressAttackTimeTotalPackets
------------------------------------------------------------------------
1.2.3.42019-01-0215:21:24184
------------------------------------------------------------------------
Total:12274AttackTargetIPTable:
------------------------------------------------------------------------
IPAddressAttackTimeTotalPackets
------------------------------------------------------------------------
4.3.2.12019-01-0215:21:24184
------------------------------------------------------------------------
Total:1
RelatedCommands
clearcputraffic-protecttrace
13.6.13showcputraffic-protecttraceconfig
CommandPurpose
Usethiscommandtoshowtheconfigureinformationofattacktraceconfig.
CommandSyntax
showcputraffic-protect(arp|dhcp)traceconfig
Parameter ParameterDescriptionParameterValue
arp ARPpacket -
dhcp DHCPpacket -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowtheinformationofarpattacktraceconfig:2275Switch#showcputraffic-protectarptraceconfig
Tracearpconfiguration:
Reason:16
Enable:1
Mode:0x1
Sample:18
Threshold:35
Agingtimeout:300
RelatedCommands
None
13.6.14clearcputraffic-protecttrace
CommandPurpose
Usethiscommandtoclearthehistoryinformationofattacktrace.
CommandSyntax
clearcputraffic-protect(arp|dhcp)trace(history|)
Parameter ParameterDescriptionParameterValue
arp ARPpacket -
dhcp DHCPpacket -
histroy Historytraceinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
None2276Examples
Thisexampleshowshowtocleartheinformationofarpattackhistorytrace:
Switch#clearcputraffic-protectarptracehistory
RelatedCommands
None
13.7G.8031Commands
13.7.1g8031eps-id
CommandPurpose
Usethiscommandtoentertheepsconfigurationmode.
Iftheg8031epsgroupwiththespecifiedeps-iddoesnotexist,systemwillcreatea
newone.
Usethenoformofthiscommandtodeletetheg8031epsgroup.
CommandSyntax
g8031eps-idEPS_ID(working-portIFNAME-Wprotection-portIFNAME-P|)
nog8031eps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink(1-
2048)1-2048
working-portIFNAME-Winterfacenameforworking
portSupportphysicalports
protection-portIFNAME-Pinterfacenamefor
protectionportSupportphysicalports2277CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoentertheepsconfigurationmode.
Iftheg8031epsgroupwiththespecifiedeps-iddoesnotexist,systemwillcreatea
newone.Usershouldspecifytheworkingportandprotectionportwhencreatinga
group.Theworkingportandprotectionportisnotallowedtochangeaftertheeps
groupcreated.
Iftheg8031epsgroupwiththespecifiedeps-idexists,usercanentertheeps
configurationmodewithoutspecifytheworkingportandprotectionport.
Examples
Thefollowingexampleshowshowtocreateag8031epsgroupandentertheeps
configurationmode:
Switch#configureterminal
Switch(config)#g8031eps-id10working-porteth-0-9protection-porteth-0-10
RelatedCommands
instance
domain
showg8031
13.7.2instance
CommandPurpose
Usethiscommandtobindaninstanceinag8031epsgroup.
Usethenoformofthiscommandtounbindtheprotectedinstance.2278CommandSyntax
instanceINSTANCE_ID
noinstanceINSTANCE_ID
Parameter ParameterDescriptionParameterValue
INSTANCE_ID Setrestrictionsfortheport
ofparticularinstance0-4094
CommandMode
EPSConfiguration
Default
None
Usage
Usethiscommandtobindaninstanceing8032ring.Theinstanceshouldexistinthe
mstpconfigmodebeforebinding.
Usercanbindmorethanoneinstanceinag8032ring.
Examples
Thefollowingexampleshowshowtobindaninstanceing8031epsgroup:
Switch#configureterminal
Switch(g8031-config-switching)#instance10
RelatedCommands
g8031eps-id
showg8031
13.7.3domain
CommandPurpose
Usethiscommandtobindacfmmaintainsdomainintheg8031epsgroup.2279Usethenoformofthiscommandtounbindthecfmmaintainsdomain.
CommandSyntax
domainMD_NAMEworking-serviceMA_NAME_Wprotection-serviceMA_NAME_P
nodomain
Parameter ParameterDescriptionParameterValue
domainMD_NAME maintenance-domain
nameStringwithupto43
characters
working-service
MA_NAME_Wmaintenance-association
nameforworkingpathMD(Maintenancedomain)
nameand
MA(Maintenance
association)nametotolly
upto44characters.
protection-service
MA_NAME_Pmaintenance-association
nameforprotectionpathMD(Maintenancedomain)
nameand
MA(Maintenance
association)nametotolly
upto44characters.
CommandMode
EPSConfiguration
Default
None
Usage
Usethiscommandtobindacfmmaintainsdomainandmaintainsassociationinthe
g8032ring.
Thecfmmaintainsdomainandmaintainsassociationshouldexistinthecfm
configuration.2280Examples
Thefollowingexampleshowshowtobindacfmmaintainsdomain:
Switch#configureterminal
Switch(g8031-config-switching)#domaintestworking-servicetest1protetion-servicetest2
RelatedCommands
g8031eps-id
showg8031
13.7.4mode
CommandPurpose
Usethiscommandtosetthemodeofg8031ethernetprotection.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
g8031mode(revertive|non-revertive)
nomode
Parameter ParameterDescriptionParameterValue
revertive Revertivemode -
non-revertive Non-revertivemode -
CommandMode
EPSConfiguration
Default
Thedefaultsettingshouldberevertivemode.
Usage
Usethiscommandtosetthemodeofg8031ethernetprotection.2281Aftersetthemodeofg8031ethernetprotection,thestatemachineofAPSshould
restart.
Examples
Thefollowingexampleshowshowtochangethemodeofag8031epsgroup:
Switch#configureterminal
Switch(g8031-config-switching)#modenon-revertive
RelatedCommands
g8031eps-id
showg8031
13.7.5timer
CommandPurpose
Usethiscommandtosetthehold-offtimerorwait-to-restoretimerofag8031
ethernetprotectiongroup.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
timer(wait-to-restoreTIME-VALUE|hold-offTIME-VALUE)
notimer(wait-to-restore|hold-off)
Parameter ParameterDescriptionParameterValue
wait-to-restoreTIME-
VALUEEPSwait-to-restore
timer(5-12min)5-12minutes
hold-offTIME-VALUE EPShold-offtimer(0-100in
stepsof100ms)0-100instepsof100ms
CommandMode
EPSConfiguration2282Default
Thedefaultvalueofwait-to-restore(WTR)periodis5minutes.
Thedefaultvalueofhold-offtimeris0.
Thedefaultvalueofguardtimeris500ms.
Usage
Usethiscommandtosetthewait-to-restoretimerorhold-offtimerorguard-timerof
g8032ring.
Thewait-to-restore(WTR)period,maybeconfiguredbytheoperatorin1minute
stepsbetween5and12minutes;thedefaultvalueis5minutes.
Therangeofthehold-offtimeris0to10secondsinstepsof100ms.
Theguardtimermaybeconfiguredbytheoperatorin100msstepsbetween100ms
and2seconds,withadefaultvalueof500ms.
Examples
Thefollowingexampleshowshowtochangethetimerofag8031epsgroup:
Switch#configureterminal
Switch(g8031-config-switching)#timerwait-to-restore8
Switch(g8031-config-switching)#timerhold-off5
RelatedCommands
g8031eps-id
showg8031
13.7.6g8031force
CommandPurpose
Usethiscommandtotriggerthelocalforce-switcheventofag8031ethernet
protectiongroup.2283CommandSyntax
g8031forceeps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtotriggerthelocalforce-switcheventofag8031ethernet
protectiongroup.
Whenthecurrentstatehasthehigherprioritythanforce-switch,systemshouldreject
theoperation.
Examples
Thefollowingexampleshowshowtotriggerthelocalforce-switcheventofag8031
epsgroup:
Switch#g8031forceeps-id10
RelatedCommands
g8031eps-id
showg8031228413.7.7g8031manual
CommandPurpose
Usethiscommandtotriggerthelocalmanual-switcheventofag8031ethernet
protectiongroup.
CommandSyntax
g8031manualeps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Usethiscommandtotriggerthelocalmanual-switcheventofag8031ethernet
protectiongroup.
Whenthecurrentstatehasthehigherprioritythanmanual-switch,systemshould
rejecttheoperation.
Examples
Thefollowingexampleshowshowtotriggerthelocalmanual-switcheventofag8031
epsgroup:
Switch#g8031manualeps-id10
RelatedCommands
g8031eps-id2285showg8031
13.7.8g8031lockout
CommandPurpose
Usethiscommandtotriggerthelocallockouteventofag8031ethernetprotection
group.
CommandSyntax
g8031lockouteps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Usethiscommandtotriggerthelocallockouteventofag8031ethernetprotection
group.
Examples
Thefollowingexampleshowshowtotriggerthelocallockouteventofag8031eps
group:
Switch#g8031lockouteps-id10
RelatedCommands
g8031eps-id2286showg8031
13.7.9g8031exercise
CommandPurpose
Usethiscommandtotriggerthelocalexerciseeventofag8031ethernetprotection
group.
CommandSyntax
g8031exerciseeps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Usethiscommandtotriggerthelocalexerciseeventofag8031ethernetprotection
group.
Examples
Thefollowingexampleshowshowtotriggerthelocalexerciseeventofag8031eps
group:
Switch#g8031exerciseeps-id10
RelatedCommands
g8031eps-id2287showg8031
13.7.10g8031clear
CommandPurpose
Usethiscommandtotriggerthelocalcleareventofag8031ethernetprotection
group.
CommandSyntax
g8031cleareps-idEPS_ID
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtotriggerclearlocaleventofag8031ethernetprotectiongroup.
Examples
Thefollowingexampleshowshowtotriggerclearlocaleventofag8031epsgroup:
Switch#g8031cleareps-id10
RelatedCommands
g8031eps-id
showg8031228813.7.11showg8031
CommandPurpose
Usethiscommandtoshowtheconfigurationandstatuesofg8031ethernet
protectiongroups.
CommandSyntax
showg8031(eps-idEPS_ID|)
Parameter ParameterDescriptionParameterValue
eps-idEPS_ID uniqueidtoidentifyan
EPSprotectionlink1-2048
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoshowtheconfigurationandstatuesofg8031ethernet
protectiongroups.
Usercanentertheeps-idtoshowthespecifiedgroup.Iftheeps-idisnotspecified,
allgroupsshouldbeshown.
Examples
Thefollowingexampleshowstheresultofusingthiscommand:
Switch#showg8031
Codes:ID-GroupidofG.8031
IF-W-Interfaceofworkingentity,IF-P-Interfaceofprotectionentity
MD-Maintenancedomain
MA-W-Maintenanceassociationofworkingentity
MA-W-Maintenanceassociationofprotectionentity2289CS-Currentstate,LS-Laststate,LE-Lastevent,FS-Farendstate
R/B-Requestsignal&bridgedsignal,MODE-RevertiveorNon-revertive
WTR-Waittorestore,DFOP-Failureofprotocoldefects
=============================================================================
IDIF-WIF-PMDMA-WMA-PCSLSLEFSR/BMODE
-----------------------------------------------------------------------------
10eth-0-9eth-0-10testtest1test2NRNRNRNRnullREV
APSVid-11
Active-Path-Working
DFOPState-Notindefectmode
ProtectedInstance-10
=============================================================================
RelatedCommands
g8031eps-id
13.7.12debugg8031
CommandPurpose
Usethiscommandtoenablethedebugofg8031module.
Usethenoformofthiscommandtodisablethedebug.
CommandSyntax
debugg8031(rx|tx|event|all)
nodebugg8031(rx|tx|event|all)
Parameter ParameterDescriptionParameterValue
rx Enablerxdebugs -
tx Enabletxdebugs -
event Enableeventdebugs -
all Enablealldebugs -
CommandMode
PrivilegedEXEC2290Default
None
Usage
Usethiscommandtoenablethedebugofg8031module.
Examples
Thefollowingexampleshowshowtoenablethedebugofg8031module:
Switch#debugg8031all
Switch#terminalmonitor
RelatedCommands
None
13.8G.8032Commands
13.8.1g8032ring-id
CommandPurpose
Usethiscommandtoentertheg8032configurationmode.
Iftheg8032ringwiththespecifiedring-iddoesnotexist,systemwillcreateanew
one.
Usethenoformofthiscommandtodeletetheg8032ring.
CommandSyntax
g8032ring-idRING_IDeast-interfaceIFNAME-Ewest-interfaceIFNAME-W(is-
sub-ring|)|)
g8032ring-idRING_ID(interfaceIFNAMEmajor-ring-idMAJOR_RING_ID|)
nog8032ring-idRING_ID
Parameter ParameterDescriptionParameterValue2291ring-idRING_ID uniqueidtoidentifyan
g8032ring1-2048
east-interfaceIFNAME-Einterfacenameforeast
interfaceSupportphysicalports
west-interfaceIFNAME-Winterfacenameforwest
interfaceSupportphysicalports
interfaceIFNAME interfacenameforsub-ring
interfaceSupportphysicalports
major-ring-id
MAJOR_RING_IDuniqueidtoidentifyan
ethernetmajor-ring
protection1-2048
is-sub-ring specifytheringassub-ring-
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoentertheg8032configurationmode.
Iftheg8032ringwiththespecifiedring-iddoesnotexist,systemwillcreateanew
one.Usershouldspecifytheeastinterfaceandwestinterfacewhencreatingagroup.
Theeastinterfaceandwestinterfaceisnotallowedtochangeaftertheg8032ring
created.
Iftheg8032ringwiththespecifiedring-idexists,usercanentertheg8032
configurationmodewithoutspecifytheeastinterfaceandwestinterface.
Examples
Thefollowingexampleshowshowtocreateag8032ringandentertheg8032
configurationmode:2292Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1east-interfaceeth-0-1west-interfaceeth-0-2
Switch(g8032-config-switch)#exit
Thefollowingexampleshowshowtocreateag8032subringandentertheg8032
configurationmode:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id2interfaceeth-0-3major-ring-id1
Switch(g8032-config-switch)#exit
Thefollowingexampleshowshowtoentertheg8032configurationmode:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#exit
Switch(config)#g8032ring-id2
Switch(g8032-config-switch)#
RelatedCommands
domain
instance
timer
showg8032
13.8.2instance
CommandPurpose
Usethiscommandtobindaninstanceing8032ring.
Usethenoformofthiscommandtounbindtheinstance.
CommandSyntax
instanceINSTANCE_ID
noinstanceINSTANCE_ID
Parameter ParameterDescriptionParameterValue2293INSTANCE_ID Setrestrictionsfortheport
ofparticularinstance0-4094
CommandMode
G8032Configuration
Default
None
Usage
Usethiscommandtobindaninstanceing8032ring.Theinstanceshouldexistinthe
mstpconfigmodebeforebinding.
Usercanbindmorethanoneinstanceinag8032ring.
Examples
Thefollowingexampleshowshowtobindaninstanceing8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#instance1
Switch(g8032-config-switch)#
RelatedCommands
domain
timer
showg8032
13.8.3domain
CommandPurpose
Usethiscommandtobindacfmmaintainsdomainintheg8032ring.
Usethenoformofthiscommandtounbindthecfmmaintainsdomain.2294CommandSyntax
domainMD_NAMEserviceMA_NAME
nodomain
Parameter ParameterDescriptionParameterValue
MD_NAME maintenance-domain
nameStringwithupto43
characters
MA_NAME maintenance-association
nameMD(Maintenancedomain)
nameand
MA(Maintenance
association)nametotolly
upto44characters.
CommandMode
G8032Configuration
Default
None
Usage
Usethiscommandtobindacfmmaintainsdomainandmaintainsassociationinthe
g8032ring.
Thecfmmaintainsdomainandmaintainsassociationshouldexistinthecfm
configuration.
Examples
Thefollowingexampleshowshowtobindacfmmaintainsdomain:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#domainmd1servicema1
Switch(g8032-config-switch)#2295RelatedCommands
instance
timer
showg8032
13.8.4control-vlan
CommandPurpose
UsethiscommandtosettheR-APSvlanofag8032ring.
UsethenoformofthiscommandtodeletetheringsR-APSvlan.
CommandSyntax
control-vlanVID
nocontrol-vlan
Parameter ParameterDescriptionParameterValue
VID R-APSchannelvlanid2-4094
CommandMode
G8032Configuration
Default
None
Usage
UsethiscommandtosettheR-APSchannelvlanofag8032ring.R-APSmessages
shoulduseadedicatedvlan.
Noticethatadedicatedvlanmeanslearningisdisabledforthisvlan.DynamicFDB
isflushedandstaticFDBisdeleted.UsercannotconfigstaticFDBforthisvlanafter
isconfiguredasacontrolvlan.2296Examples
ThefollowingexampleshowshowtosetR-APSchannelvlan:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#control-vlan22
RelatedCommands
domain
instance
timer
showg8032
13.8.5rplowner
CommandPurpose
Usethiscommandtosettherplofag8032ring.
Usethenoformofthiscommandtodeletetherpl.
CommandSyntax
rplowner(EAST-INTERFACE|WEST-INTERFACE)
norplowner
Parameter ParameterDescriptionParameterValue
EAST-INTERFACE ringseastinterface -
WEST-INTERFACE ringswestinterface -
CommandMode
G8032Configuration2297Default
None
Usage
Usethiscommandtosettherplofag8032ring.Ina(major)ring,usercanspecify
eastinterfaceorwestinterfaceasrpl,butUsercanonlyspecifyeast-interfaceasrpl
interfaceinasub-ring.
Examples
Thefollowingexampleshowshowtosetrplofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#rplownereast-interface
RelatedCommands
domain
instance
timer
showg8032
13.8.6timer
CommandPurpose
Usethiscommandtosetthewait-to-restoretimerorhold-offtimerorguard-timerofa
g8032ring.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
timer(wait-to-restoreTIMEVAL|hold-offTIMEVAL|guard-timerTIMEVAL)
notimer(wait-to-restore|hold-off|guard-timer)2298Parameter ParameterDescriptionParameterValue
wait-to-restoreTIMEVALg8032wait-to-restore
timer(5-12min)1-12minute
hold-offTIMEVAL g8032hold-offtimer(0-10s)0-10000inmultipleof
100ms
guard-timerTIMEVAL g8032guardtimer(100ms-
2s)0-2000inmultipleof
100ms
CommandMode
G8032Configuration
Default
Thedefaultvalueofwait-to-restore(WTR)periodis5minutes.
Thedefaultvalueofhold-offtimeris0.
Thedefaultvalueofguardtimeris500ms.
Usage
Usethiscommandtosetthewait-to-restoretimerorhold-offtimerorguard-timerof
g8032ring.
Thewait-to-restore(WTR)period,maybeconfiguredbytheoperatorin1minute
stepsbetween1and12minutes;thedefaultvalueis5minutes.
Therangeofthehold-offtimeris0to10secondsinstepsof100ms.
Theguardtimermaybeconfiguredbytheoperatorin100msstepsbetween100ms
and2seconds,withadefaultvalueof500ms.
Examples
Thefollowingexampleshowshowtochangethewait-to-restoretimerofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#timerwait-to-restore62299Thefollowingexampleshowshowtochangethehold-offtimerofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#timerhold-off100
Thefollowingexampleshowshowtochangetheguardtimerofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#timerguard-timer200
RelatedCommands
domain
instance
showg8032
13.8.7ringenable
CommandPurpose
Usethiscommandtostarttheg8032ringstatemachine.
CommandSyntax
ringenable
CommandMode
G8032Configuration
Default
None
Usage
Usethiscommandtostarttheg8032ringstatemachine.Theringshouldhavebind
md/maandinstancebeforeenablethering.2300Examples
Thefollowingexampleshowshowtoenablethering:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#ringenable
Switch(g8032-config-switch)#
RelatedCommands
ringdisable
showg8032
13.8.8ringdisable
CommandPurpose
Usethiscommandtostoptheg8032ringstatemachine.
CommandSyntax
ringdisable
CommandMode
G8032Configuration
Default
None
Usage
Usethiscommandtostoptheg8032ringstatemachine.
Examples
Thefollowingexampleshowshowtodisableag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.2301Switch(config)#g8032ring-id1
Switch(g8032-config-switch)#ringdisable
RelatedCommands
ringenable
showg8032
13.8.9showg8032
CommandPurpose
Usethiscommandtoshowtheconfigurationandstatuesofg8032ring.
CommandSyntax
showg8032(ring-idRING_ID|interfaceIF_NAME)
Parameter ParameterDescriptionParameterValue
RING_ID uniqueidtoidentifyan
g8032ring1-2048
IF_NAME interfacenameofg8032
ring-
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoshowtheconfigurationandstatuesofg8032ring.
Usercanenterthering-idtoshowthespecifiedring.Ifthering-idisnotspecified,all
ringsshouldbeshown.2302Examples
Thefollowingexampleshowstheresultofusingthiscommand:
Switch#showg8032
RingIDMajorRingStateEastStatusWestStatus
-------------------------------------------------------------------------------
1N/AIdleeth-0-9Blockedeth-0-13Forward
ControlVlan:4094
MDName :md1
ServiceId :ma1
IsEnabled :Yes
Mode :Revertive
NodeRole :Owner
IsSub_ring:No
ProtectInstance:1-2
RPL :east-interface
Wait-to-restore:05:00
Hold-offTimer:0(msecs)
GuardTimer:500(msecs)
WTBTimer :5500(msecs)
RAPSMEL :7
IsForward-to-cpu:1
-------------------------------------------------------------------------------
Thefollowingexampleshowstheinformationofg8032interface:
Switch#showg8032interfaceeth-0-1
InterfaceState:Up
==================================================
RingID :1
FlushLogic
RemoteNodeID:92d5.b22e.cc00
RemoteBPR:0
==================================================
RelatedCommands
g8032ring-id
13.8.10debugg8032
CommandPurpose
Usethiscommandtoenablethedebugofg8032module.
Usethenoformofthiscommandtodisablethedebug.2303CommandSyntax
debugg8032(rx|tx|event|all)
nodebugg8032(rx|tx|event|all)
Parameter ParameterDescriptionParameterValue
rx Enablerxdebugs -
tx Enabletxdebugs -
event Enableeventdebugs -
all Enablealldebugs -
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoenablethedebugofg8032module.
Examples
Thefollowingexampleshowshowtoenablethedebugofg8032module:
Switch#debugg8032all
Switch#terminalmonitor
RelatedCommands
None
13.8.11g8032force
CommandPurpose
Usethiscommandtotriggerthelocalforce-switcheventofag8032ringport.2304CommandSyntax
g8032forcering-idRING_ID(east-interface|west-interface)
Parameter ParameterDescriptionParameterValue
RING_ID Uniqueidtoidentifyan
g8032ring1-2048
east-interface Triggerringseast
interfaceforce-switch-
west-interface Triggerringswest
interfaceforce-switch-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtog8032forceswitch:
Switch#g8032forcering-id1east-interface
RelatedCommands
showg8032
13.8.12g8032manual
CommandPurpose
Usethiscommandtotriggerthelocalmanual-switcheventofag8032ringport.2305CommandSyntax
g8032manualring-idRING_ID(east-interface|west-interface)
Parameter ParameterDescriptionParameterValue
RING_ID Uniqueidtoidentifyan
g8032ring1-2048
east-interface Triggerringseast
interfacemanual-switch-
west-interface Triggerringswest
interfacemanual-switch-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtog8032manualswitch:
Switch#g8032manualring-id1east-interface
RelatedCommands
showg8032230613.8.13g8032clear
CommandPurpose
Usethiscommandtoclearthelocalforce-switchormanual-switchofag8032ring
port.
CommandSyntax
g8032clearring-idRING_ID
Parameter ParameterDescriptionParameterValue
RING_ID Uniqueidtoidentifyan
g8032ring1-2048
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtog8032clearswitch:
Switch#g8032clearring-id2
RelatedCommands
None230713.8.14rplneighbor
CommandPurpose
Usethiscommandtosettherplneighborofag8032ring.
Usethenoformofthiscommandtodeletetherplneighbor.
CommandSyntax
rplneighbor(east-interface|west-interface)
norplneighbor
Parameter ParameterDescriptionParameterValue
east-interface Specifyringseast
interfaceastheRPL
neighbor-
west-interface Specifyringswest
interfaceastheRPL
neighbor-
CommandMode
G8032Configuration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetrplneighborofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1east-interfaceeth-0-1west-interfaceeth-0-22308Switch(g8032-ring-1)#rplneighboreast-interface
Switch(g8032-ring-1)#
Thefollowingexampleshowshowtodeleterplneighborofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1east-interfaceeth-0-1west-interfaceeth-0-2
Switch(g8032-ring-1)#rplneighboreast-interface
Switch(g8032-ring-1)#norplneighbor
RelatedCommands
showg8032
13.8.15virtual-channelenable
CommandPurpose
Usethiscommandtoenablesub-ringvirtualchannelintheg8032subring.
CommandSyntax
virtual-channelenable
CommandMode
G8032Configuration
Default
None
Usage
Usethiscommandtoenablesub-ringvirtualchannel.Thereforeg8032subringR-
APSpacketswontbeendedininterconnectionnode.
Examples
Thefollowingexampleshowshowtoenablevirtualchannel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1east-interfaceeth-0-1west-interfaceeth-0-22309Switch(g8032-ring-1)#exit
Switch(config)#g8032ring-id2interfaceeth-0-3major-ring-id1
Switch(g8032-ring-2)#virtual-channelenable
RelatedCommands
showg8032
13.8.16mode
CommandPurpose
Usethiscommandtosettherevertivemodeofg8032ringprotection.
Usethenoformofthiscommandtoreturntothedefaultsetting.
CommandSyntax
mode(revertive|non-revertive)
Parameter ParameterDescriptionParameterValue
revertive Revertivemode -
non-revertive Non-revertivemode -
CommandMode
G8032Configuration
Default
Revertivemode
Usage
None
Examples
Thefollowingexampleshowshowtochangetherevertivemodeofag8032ring:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.2310Switch(config)#g8032ring-id1east-interfaceeth-0-1west-interfaceeth-0-2
Switch(g8032-ring-1)#modenon-revertive
RelatedCommands
showg8032
13.8.17raps-melLEVEL-ID
CommandPurpose
Usethiscommandtosetcfmlevelintheg8032R-APSpackets.
CommandSyntax
raps-melLEVEL-ID
noraps-mel
Parameter ParameterDescriptionParameterValue
LEVEL-ID MDlevel 0-7
CommandMode
G8032Configuration
Default
7
Usage
None
Examples
ThefollowingexampleshowshowtoconfigureR-APSlevel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#g8032ring-id1
Switch(g8032-ring-1)#ring-level32311RelatedCommands
showg8032
13.9UDLDCommands
13.9.1udldenable
CommandPurpose
Usethiscommandenable/disableglobalUDLDstate.
CommandSyntax
udldenable
noudldenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
None
Examples
ThisexampleshowshowtoenableglobalUDLDstate:
Switch#configureterminal
Switch(config)#udldenable
RelatedCommands
showudld231213.9.2udldport
CommandPurpose
Usethiscommandtoenable/disableUDLDstateonaspecificinterface.
CommandSyntax
udldport(aggressive|)
noudldport
Parameter ParameterDescriptionParameterValue
aggressive UDLDaggressivemode-
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
None
Examples
ThisexampleshowshowtoenableUDLDoninterfaceeth-0-9:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config)#udldport
RelatedCommands
showudld231313.9.3udldmessageinterval
CommandPurpose
UsethiscommandtosettheUDLDmessageinterval.Usenocommandtosetthe
intervaltodefaultvalue.
CommandSyntax
udldmessageintervalINTERVAL
noudldmessageinterval
Parameter ParameterDescriptionParameterValue
INTERVAL UDLDmessageinterval
(seconds).Therangeis1-
901-90seconds
CommandMode
GlobalConfiguration
Default
15s
Usage
None
Examples
ThisexampleshowshowtosetUDLDmessageintervalto5seconds:
Switch#configureterminal
Switch(config)#udldmessageinterval5
RelatedCommands
showudld231413.9.4udldreset
CommandPurpose
UsethiscommandtoresettheinterfacesdisabledbyUDLD.
CommandSyntax
udldreset
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoresetinterfacesdisabledbyUDLD:
Switch#udldreset
RelatedCommands
None
13.9.5showudld
CommandPurpose
UsethiscommandtoshowUDLDinformationofinterfaces.
CommandSyntax
showudld(IFNAME|)2315Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Supportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowUDLDinformationofinterfaceeth-0-1:
Switch#showudldeth-0-1
Interfaceeth-0-1
---
UDLDmode:aggressivemode
Operationalstate:Bidirectional
Messageinterval:15
Timeoutinterval:3
Neighbor1
---
DeviceID:001e.0808.0360
PortID:eth-0-2
DeviceName:DUT2
MessageInterval:15
TimeoutInterval:3
Linkstatus:Bidirectional
Expirationtime:40
RelatedCommands
None231613.9.6showudldneighbors
CommandPurpose
UsethiscommandtoshowinformationofUDLDneighbors.
CommandSyntax
showudldneighbors
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowUDLDneighborinformation:
Switch#showudldneighbor
PortDeviceNameDeviceIDPortIDNeighborState
---------------------------------------------
eth-0-9DUT2 d4f2.489f.d100eth-0-9bidirectional
RelatedCommands
None
13.9.7debugudld
CommandPurpose
UsethiscommandtodebugUDLD.2317CommandSyntax
debugudld(all|packet|events)
nodebugudld(all|packet|events)
Parameter ParameterDescriptionParameterValue
all Showbothpacketand
events-
packet Showpacketsonly -
events Showeventsonly -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoenableUDLDdebugforpackets:
Switch#debugudldpacket
RelatedCommands
None
13.9.8showdebuggingudld
CommandPurpose
UsethiscommandtoshowUDLDdebuggingstatus.2318CommandSyntax
showdebuggingudld
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowUDLDdebuggingstatus:
Switch#showdebuggingudld
RelatedCommands
None
13.10ERPSCommands
13.10.1erps
CommandPurpose
Usethiscommandtocreateerpsdomaininstance.
Usethenoformofthiscommandtoremovetheerpsdomaininstance
CommandSyntax
erpsDOMAINID(ERPS_NAME|)
noerpsDOMAINID2319Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID. 1-255
ERPS_NAME ERPSdomainname Stringwithupto15
characters
CommandMode
GlobalConfiguration
Default
None
Usage
Thiscommandisusedtocreateordeleteanerpsdomain.Thecommandshouldthe
usefirstwhenconfigerps.
ERPS_NAMEisoptional.Ifnonameisprovidedbycommand,systemwillgenerate
thedomainnameautomatically.ThenameformatfollowsERPS001,where001can
beinsteadofanydomainIDbetween1-255providedthroughthecommand.
Examples
ThisexampleshowshowtocreateanerpsdomainwithID11andnametest11:
Switch#configureterminal
Switch(config)#erps11test11
RelatedCommands
showerpslist
13.10.2erpscontrolvlan
CommandPurpose
Usethiscommandtospecifyerpsdomainscontrolvlan.
Usethenoformofthiscommandtoremovethecontrolvlan.2320CommandSyntax
erpsDOMAINID(primary|sub)controlvlanVLANID
noerpsDOMAINID(primary|sub)controlvlan
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID. 1-255
primary primaryring -
sub subring -
VLANID vlanid 2-4094
CommandMode
GlobalConfiguration
Default
None
Usage
Theerpsprotocolpacketistransferredinthecontrolvlan.
Itisbesttoaddthecontrolvlanintotheinstancewhichisboundbythedomain.
Examples
Thisexampleshowshowtosetvlan15asprimarycontrolvlanforerpsdomain11:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan15
Switch(config-vlan)#exit
Switch(config)#erps11primarycontrolvlan15
RelatedCommands
showerps232113.10.3erpshellotime
CommandPurpose
Usethiscommandtosethellotimerintervalforspecificerpsdomaininstance.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
erpsDOMAINIDhellotimeHELLOTIME
noerpsDOMAINIDhellotime
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID. 1-255
HELLOTIME Hellotimerinterval 1-150inthemultipleof
100ms
CommandMode
GlobalConfiguration
Default
Thedefaulthellotimeis101second,unitis100ms
Usage
Thetimershouldbethesameofallnodesinthering.
Examples
Thisexampleshowshowtosethellotimerintervaloferpsdomain11to20s:
Switch#configureterminal
Switch(config)#erps11hellotime20
RelatedCommands
showerps232213.10.4erpsfailtime
CommandPurpose
Usethiscommandtosetthefailtimerintervalforspecificerpsdomaininstance.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
erpsDOMAINIDfailtimeFAILTIME
noerpsDOMAINIDfailtime
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID. 1-255
FAILTIME Failtimerinterval 3-450inthemultipleof
100ms
CommandMode
GlobalConfiguration
Default
Thedefaultfailtimeis30(3seconde),unitis100ms
Usage
Thetimershouldbethesameofallnodesinthering.
Examples
Thisexampleshowshowtosetfailtimerintervaloferpsdomain11to60s:
Switch#configureterminal
Switch(config)#erps11failtime60
RelatedCommands
showerps232313.10.5erpsmstpinstance
CommandPurpose
UsethiscommandtosetthemstpinstanceprotectedbyERPS.
Usethenoformofthiscommandtoremovetheprotectedmstpinstance.
CommandSyntax
erpsDOMAINIDmstpinstanceINSTANCE_ID
noerpsDOMAINIDmstpinstanc
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
INSTANCE_ID MSTPinstance. 1-4094
CommandMode
GlobalConfiguration
Default
None
Usage
Nodefaultinstanceisspecified.
Examples
Thisexampleshowshowtosetinstance1asERPS11sprotectedinstance:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#erps11mstpinstance1
RelatedCommands
showerps232413.10.6erpsringlevel
CommandPurpose
UsethiscommandtocreateanERPSringforspecificERPSdomain.
UsethenoformofthiscommandtoremovetheERPSring.
CommandSyntax
erpsDOMAINIDringRINGIDlevel(primary|sub)
noerpsDOMAINIDringRINGID
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
primary Primaryring -
sub Subring -
CommandMode
GlobalConfiguration
Default
None
Usage
Theringsintheerpsdomainaredividedintoprimaryandsubringsthatare
differentiatedbytheconfiguration.
Examples
ThisexampleshowshowtocreateasubringwithID1forERPSdomain11:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#erps11ring1levelsub2325RelatedCommands
showerps
13.10.7erpsringmode
CommandPurpose
UsethiscommandtosetspecificERPSringinstancenodemode.
Usethenoformofthiscommandtorestorethedefaultmode.
CommandSyntax
erpsDOMAINIDringRINGIDmode(master|transit)
noerpsDOMAINIDringRINGIDmode
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
master Masternode -
transit Transitnode -
CommandMode
GlobalConfiguration
Default
Themodeisnotsetbydefault.
Usage
Themasternodeisusedtosendandreceiveerpsprotocolpacket.
Thetransitnodeisusedtotransfererpsprotocolpackettoneighborswitch.2326Examples
ThisexampleshowshowtosetnodeasERPSdomain11ring1transitnode:
Switch#configureterminal
Switch(config)#erps11ring1modetransit
RelatedCommands
showerps
13.10.8erpsringprimaryinterface
CommandPurpose
UsethiscommandtosetprimaryinterfaceforspecificERPSringinstance.
Usethenoformofthiscommandtounsettheprimaryinterface.
CommandSyntax
erpsDOMAINIDringRINGIDprimaryinterface(IFPHYSICAL|IFAGG)
noerpsDOMAINIDringRINGIDprimaryinterface
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
CommandMode
GlobalConfiguration
Default
None2327Usage
Formasternode,theinterfacewithtypeprimaryisusedtosenderpsprotocolpacket.
Onlytheinterfaceintrunk/dot1q-tunnelmodecanbesetasprimaryinterface.
Examples
Thisexampleshowshowtosetinterfaceeth-0-9asprimaryinterfaceforERPS
domain11ring1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd15
Switch(config-if)#exit
Switch(config)#erps11ring1primaryinterfaceeth-0-9
RelatedCommands
showerps
13.10.9erpsringsecondaryinterface
CommandPurpose
UsethiscommandtosetsecondaryinterfaceforspecificERPSringinstance.
Usethenoformofthiscommandtounsetthesecondaryinterface.
CommandSyntax
erpsDOMAINIDringRINGIDsecondaryinterface(IFPHYSICAL|IFAGG)
noerpsDOMAINIDringRINGIDsecondaryinterface
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
IFPHYSICAL Ethernetinterfacename-2328IFAGG Linkaggregationinterface
name-
CommandMode
GlobalConfiguration
Default
None
Usage
Onlytheinterfaceintrunk/dot1q-tunnelmodecanbesetassecondaryinterface.
Examples
Thisexampleshowshowtosetinterfaceeth-0-9asprimaryinterfaceforERPS
domain11ring1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd15
Switch(config-if)#exit
Switch(config)#erps11ring1secondaryinterfaceeth-0-9
RelatedCommands
showerps
13.10.10erpsringinterface
CommandPurpose
UsethiscommandtosetinterfaceforspecificERPSringinstance.
UsenoformofthiscommandtounsetinterfaceforspecificERPSringinstance.
CommandSyntax
erpsDOMAINIDringDOMAINIDinterface(IFPHYSICAL|IFAGG)2329noerpsDOMAINIDringDOMAINIDinterface
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosetinterfaceeth-0-9asinterfaceforERPSdomain11
ring1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd15
Switch(config-if)#exit
Switch(config)#erps11ring1interfaceeth-0-9
RelatedCommands
showerps233013.10.11erpsringedge-mode
CommandPurpose
UsethiscommandtosetspecificERPSringinstanceedgenodemode.
UsethenoformofthiscommandtounsetspecificERPSringinstanceedgenode
mode.
CommandSyntax
erpsDOMAINIDringDOMAINIDedge-mode(edge|assistant-edge)
noerpsDOMAINIDringDOMAINIDmode
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
edge Edgenode -
assistant-edge Assistant-edgenode -
CommandMode
GlobalConfiguration
Default
None
Usage
Boththeedgenodeandtheassistant-edgenodearespecialtransitnodes.
Onceanodeissettoedge/assistant-edgenode,itwillbesettotransitnode
automatically.
Examples
ThisexampleshowshowtosetnodeasERPSdomain11ring1edgenode:2331Switch#configureterminal
Switch(config)#erps11ring1edge-modeedge
RelatedCommands
showerps
13.10.12erpsringedgeinterface
CommandPurpose
UsethiscommandtosetedgeinterfaceforspecificERPSringinstance.
Usethenoformofthiscommandtounsettheedgeinterface.
CommandSyntax
erpsDOMAINIDringDOMAINIDedgeinterface(IFPHYSICAL|IFAGG)
noerpsDOMAINIDringDOMAINIDedgeinterface
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
CommandMode
GlobalConfiguration
Default
None
Usage
Ofthetwoportsviawhichtheedgenode(assistant-edgenode)accessesthesubring,
oneisacommonportandtheotherisanedgeport.Thecommonportistheportfor2332theedgenode(assistant-edgenode)toaccesstheprimaryringandthesubring,
whiletheedgeportistheportfortheedgenodetoaccessthesubringonly.
Thiscommandisonlyavailableforedge/assistant-edgenode.
Examples
Thisexampleshowshowtosetinterfaceeth-0-9asedgeinterfaceforERPSdomain
11ring1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd15
Switch(config-if)#exit
Switch(config)#erps11ring1edgeinterfaceeth-0-9
RelatedCommands
showerps
13.10.13erpsringcommoninterface
CommandPurpose
UsethiscommandtosetcommoninterfaceforspecificERPSringinstance.
UsethenoformofthiscommandtosetedgeinterfaceforspecificERPSring
instance.
CommandSyntax
erpsDOMAINIDringRINGIDcommoninterface(IFPHYSICAL|IFAGG)
noerpsDOMAINIDringRINGIDcommoninterface
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
IFPHYSICAL Ethernetinterfacename-2333IFAGG Linkaggregationinterface
name-
CommandMode
GlobalConfiguration
Default
None
Usage
Ofthetwoportsviawhichtheedgenode(assistant-edgenode)accessesthesubring,
oneisacommonportandtheotherisanedgeport.Thecommonportistheportfor
theedgenode(assistant-edgenode)toaccesstheprimaryringandthesubring,
whiletheedgeportistheportfortheedgenodetoaccessthesubringonly.
Thiscommandisonlyavailableforedge/assistant-edgenode.
Examples
Thisexampleshowshowtosetinterfaceeth-0-9asedgeinterfaceforERPSdomain
11ring1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#switchportmodetrunk
Switch(config-if)#switchporttrunkallowedvlanadd15
Switch(config-if)#exit
Switch(config)#erps11ring1commoninterfaceeth-0-9
RelatedCommands
showerps
13.10.14erpsringsrpt
CommandPurpose
Usethiscommandtoenable/disablesrptfunctionalityforspecificERPSringinstance.2334CommandSyntax
erpsDOMAINIDringRINGIDsrpt(enable|disable)
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
enable Enablethesrpt -
disable Disablethesrp -
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoenablesrptfunctionalityforERPSdomain11ring1:
Switch#configureterminal
Switch(config)#erps11ring1srptenable
RelatedCommands
showerps
13.10.15erpsringenable
CommandPurpose
Usethiscommandtoenablespecificerpsringinstance.2335CommandSyntax
erpsDOMAINIDringRINGIDenable
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
CommandMode
GlobalConfiguration
Default
None
Usage
UponthespecificERPSringisenabledsuccessfully,theringstateshouldleavethe
idlestate.
Examples
ThisexampleshowshowtoenableERPSdomain11ring1:
Switch#configureterminal
Switch(config)#erps11ring1enable
RelatedCommands
showerps
13.10.16erpsringdisable
CommandPurpose
Usethiscommandtodisablespecificerpsringinstance.
CommandSyntax
erpsDOMAINIDringRINGIDdisable2336Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
RINGID ERPSringID 1-255
CommandMode
GlobalConfiguration
Default
None
Usage
UponthespecificERPSringisenabledsuccessfully,theringstateshouldleavethe
idlestate.
Examples
ThisexampleshowshowtodisableERPSdomain11ring1:
Switch#configureterminal
Switch(config)#erps11ring1disable
RelatedCommands
showerps
13.10.17erpsenable
CommandPurpose
UsethiscommandtoenablespecificERPSdomaininstance.
CommandSyntax
erpsDOMAINIDenable
Parameter ParameterDescriptionParameterValue2337DOMAINID ERPSdomainID 1-255
CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtoenablealltheringoftheerpsdomain.
Enablethedomainwillmakealltheringswithinthedomainbeenabled.Uponthe
specificERPSringisenabledsuccessfully,theringstateshouldleavetheidlestate
Examples
Thisexampleshowshowtoenableerpsdomain11:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#erps11enable
RelatedCommands
showerps
13.10.18erpsdisable
CommandPurpose
Usethiscommandtodisablespecificerpsdomaininstance.
CommandSyntax
erpsDOMAINIDdisable
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-2552338CommandMode
GlobalConfiguration
Default
None
Usage
Usethiscommandtodisablealltheringoftheerpsdomain.
Enablethedomainwillmakealltheringswithinthedomainbeenabled.Uponthe
specificERPSringisenabledsuccessfully,theringstateshouldleavetheidlestate.
Examples
Thisexampleshowshowtodisableerpsdomain11:
Switch#configureterminal
Switch(config)#erps11disable
RelatedCommands
showerps
13.10.19erpsmoderrpp
CommandPurpose
UsethiscommandtocompatiblewithRRPP.
CommandSyntax
erpsmoderrpp
noerpsmoderrpp
CommandMode
GlobalConfiguration2339Default
None
Usage
ThiscommandtocompatiblewithRRPP.
Examples
ThisexampleshowshowtocompatiblewithRRPP:
Switch#configureterminal
Switch(config)#erpsmoderrpp
RelatedCommands
None
13.10.20showerps
CommandPurpose
Usethiscommandtoshowtheconfigurationforspecificerpsdomain.
CommandSyntax
showerpsDOMAINID
Parameter ParameterDescriptionParameterValue
DOMAINID ERPSdomainID 1-255
CommandMode
PrivilegedEXEC
Default
None2340Usage
None
Examples
Thisexampleshowshowtodisplaytheconfigurationforerpsdomain1:
Switch#showerps1
ERPSdomainID:1
ERPSdomainname:ERPS001
ERPSdomainmode:normal
ERPSdomainprimarycontrolVLANID:0
ERPSdomainsubcontrolVLANID:0
ERPSdomainhellotimerinterval:1second(s)
ERPSdomainfailtimerinterval:3second(s)
RelatedCommands
None
13.10.21showerpslist
CommandPurpose
Usethiscommandtoshowthelistoferpsdomain(s).
CommandSyntax
showerpslist
CommandMode
PrivilegedEXEC
Default
None
Usage
None2341Examples
Thisexampleshowshowtodisplaytheerpsdomainlist:
Switch#showerpslist
ERPSDomainList
IDName
==============================
11ERPS0011
RelatedCommands
None
13.10.22clearerpscounters
CommandPurpose
Usethiscommandtoclearthestatisticsforalldomainsorforsingledomainorfor
singlering.
CommandSyntax
clearerpscounters(all|(domainDOMAINID(|ringRINGID)))
Parameter ParameterDescriptionParameterValue
all Alldomain -
domainDOMAINID ERPSdomainID 1-255
ringRINGID ERPSringID 1-255
CommandMode
PrivilegedEXEC
Default
None2342Usage
None
Examples
Thisexampleshowshowtoclearalldomainstatistics:
Switch#clearerpscountersall
RelatedCommands
None
13.10.23debugerps
CommandPurpose
UsethiscommandtoopenthedebugfunctionsofERPS.
CommandSyntax
debugerps(all|dump|events)
nodebugerps(all|dump|events)
Parameter ParameterDescriptionParameterValue
all alldebuginformation -
dump dumpdebuginformation-
events eventsdebuginformation-
CommandMode
PrivilegedEXEC
Default
None2343Usage
None
Examples
Thisexampleshowshowtoopenalldebugfunctions:
Switch#debugerpsall
RelatedCommands
None
13.11Smart-LinkCommands
13.11.1smart-linkgroup
CommandPurpose
Usethiscommandtocreateasmart-linkgroupandentersmart-linkgroup
configurationmode.Todestroythesmart-linkgroup,usednoformofthiscommand.
CommandSyntax
smart-linkgroupGROUP-ID
nosmart-linkgroup(GROUP-ID|all)
Parameter ParameterDescriptionParameterValue
GROUP-ID smart-linkgroupID 1-16
all Allthesmart-linkgroups
havebeenexist-
CommandMode
GlobalConfiguration2344Default
Thereisnoanysmart-linkgroup
Usage
Upto16smart-linkgroupscanbecreated.
Examples
Createasmart-linkgroupwithID1:
Switch#configureterminal
Switch(config)#smart-linkgroup1
RelatedCommands
showsmart-linkgroup
13.11.2smart-linkrelayenable
CommandPurpose
Usethiscommandtoenabletheswitchtorelaythesmart-linkflushpacket.To
disablerelayingthepackets,usenoformofthiscommand.
CommandSyntax
smart-linkrelayenable
nosmart-linkrelayenable
CommandMode
GlobalConfiguration
Default
Relayingthesmart-linkflushpacketisenabled.2345Usage
Bydefault,thesmart-linkflushpacketcouldbeflooded.Usethecommand,no
smart-linkrelayenable,todisablethepacketfloodingtootherswitches.
Examples
Theexampleshowshowtoenablesmart-linkrelay:
Switch#configureterminal
Switch(config)#smart-linkrelayenable
Theexampleshowshowtodisablesmart-linkrelay:
Switch#configureterminal
Switch(config)#nosmart-linkrelayenable
RelatedCommands
None
13.11.3interface
CommandPurpose
Usethiscommandtosetmasterorslavememberinterfaceofthesmart-linkgroup.
Tounsetthemember,usesthenoformofthiscommand.
CommandSyntax
interface(IFPHYSICAL|IFAGG)(master|slave)
nointerface(master|slave|all)
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Thenameofphysical
interface-
IFAGG Thenameoflink-agg
interface,likeagg1-
master Theinterfaceactas
masterrole-2346slave Theinterfaceactasslave
role-
CommandMode
Smart-linkConfiguration
Default
Thereisnoanyinterfacememberinthesmart-linkgroupbydefault.
Usage
Everysmart-linkgrouphastwomemberinterfaces,masterandslave.Theinterfaces
shouldbephysical(i.e.eth-0-1)oraggregator(i.e.agg1)switchinterface.
STPmustbedisabledinthesmart-linkinterfacesfirst.
Examples
Thisexampleshowshowtosetinterfaceseth-0-9andeth-0-13asthemember
interfacesofsmart-linkgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#spanning-treeportdisable
Switch(config-if)#exit
Switch(config)#interfaceeth-0-13
Switch(config-if)#spanning-treeportdisable
Switch(config-if)#exit
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#interfaceeth-0-9master
Switch(config-smlk-group)#interfaceeth-0-13slave
Switch(config-smlk-group)#end
Displaythesmartlinkgroupjustcreated:
Switch#showsmart-linkgroup1
Smart-linkgroup1information:
Thesmart-linkgroupwasdisabled.
============================================================
Auto-restore:
statetimecountLast-time
disabled60 0N/A
============================================================
Protectedinstance:2347Loadbalanceinstance:
============================================================
INTERFACE:
RoleMemberDownCountLast-Down-TimeFlushCountLast-Flush-Time
MASTEReth-0-90N/A0N/A
SLAVEeth-0-130N/A0N/A
RelatedCommands
showsmart-linkgroup
13.11.4protectedmstpinstance
CommandPurpose
UsethiscommandtosetprotectedMSTPinstancetothesmart-linkgroup.
UsethenoformofthiscommandtounsetprotectedMSTPinstance.
CommandSyntax
protectedmstpinstanceINSTANCE-ID
noprotectedmstpinstance(all|INSTANCE-ID)
Parameter ParameterDescriptionParameterValue
INSTANCE-ID MSTPinstanceID.The
rangeis0-40940-4094
all Alltheinstancehavebeen
exist-
CommandMode
Smart-linkConfiguration
Default
ThereisnoprotectedMSTPinstanceinthesmart-linkgroupbydefault.2348Usage
Thesmart-linkgroupsonlyprotecttheseVLANsintheprotectedMSTPinstances.
Thesmart-linkgroupcantbeenabledifnoprotectedinstanceisconfigured.To
protectthoseVLANswhicharenotboundwithMSTPinstance,usethecommand
protectedmstpinstance0.
NOTE:IftheMTSPinstanceisremoved,itwillberemovedfromsmart-linkgroupat
thesametime.
Examples
ThisexampleshowshowtosetMSTPinstance0,10and100tothesmart-linkgroup
1:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#protectedmstpinstance0
Switch(config-smlk-group)#protectedmstpinstance10
Switch(config-smlk-group)#protectedmstpinstance100
Switch(config-smlk-group)#end
Switch#showsmart-linkgroup1
Smart-linkgroup1information:
Thesmart-linkgroupwasdisabled.
============================================================
Auto-restore:
statetimecountLast-time
disabled600N/A
============================================================
Protectedinstance:010010
Loadbalanceinstance:
============================================================
INTERFACE:
RoleMemberDownCountLast-Down-TimeFlushCountLast-Flush-Time
MASTEReth-0-90N/A0N/A
SLAVEeth-0-130N/A0N/A
RelatedCommands
showsmart-linkgroup
13.11.5load-balanceinstance
CommandPurpose
Usethiscommandtosetload-balancinginstancetothesmart-linkgroup.2349Usethiscommandtounsetload-balancinginstance.
CommandSyntax
load-balanceinstanceINSTANCE-ID
noload-balanceinstance(all|INSTANCE-ID)
Parameter ParameterDescriptionParameterValue
INSTANCE-ID MSTPinstanceID.The
rangeis0-40940-4094
all Alltheinstancehavebeen
exist-
CommandMode
Smart-linkConfiguration
Default
Thereisnoload-balancinginstanceinthesmart-linkgroupbydefault.
Usage
Load-balancinginstanceswillbeactiveintheslaveinterface.Ifuserwantto
configureload-balancinginstances,shouldbeforethesmart-groupisenabled.
Examples
Thisexampleshowshowtosetprotectedinstance10astheload-balancinginstance:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#load-balanceinstance10
RelatedCommands
showsmart-linkgroup235013.11.6restoretime
CommandPurpose
Usethiscommandtosetrestoretimeofthesmart-linkgroup.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
restoretimeRESTORE-TIME
norestoretime
Parameter ParameterDescriptionParameterValue
RESTORE-TIME Therestoretimeofthe
smart-linkgroup30-1200seconds
CommandMode
Smart-linkConfiguration
Default
Thedefaultrestoretimeis60seconds.
Usage
Whenthemasterinterfaceisresumed,thelinkswillnotbeimmediatelyrestoredto
themasterinterface,butwillbedelayedawhile.Thedelaytimeiscalledrestoretime.
Examples
Thisexampleshowshowtosetrestoretimeas30secondsinthesmart-linkgroup1:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#restoretime30
RelatedCommands
showsmart-linkgroup235113.11.7restoreenable
CommandPurpose
Usethiscommandtoenable/disablerestoringfeatureofthesmart-linkgroup.
CommandSyntax
restoreenable
norestoreenable
CommandMode
Smart-linkConfiguration
Default
Therestoringfeatureofthesmart-linkgroupisdisabledbydefault.
Usage
Whenmasterinterfacefails,thelinkwillbeswitchedtotheslaveinterface.Then,if
masterinterfaceisresumed,thelinkwillnotbeswitchedbacktokeeptheflowstable
bydefault.Ifrestoringfeatureisenabled,thelinkwillbeswitchedback.
NOTE:Ifload-balancinginstanceisconfigured,thisfeatureisrecommendedstrongly.
Examples
Thisexampleshowshowtoenabletherestoringfeatureinthesmart-linkgroup1:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#restoreenable
RelatedCommands
showsmart-linkgroup235213.11.8flushsend
CommandPurpose
Usethiscommandtoset/unsettheflushpacketsenderinthesmart-linkgroup.
CommandSyntax
flushsendcontrol-vlanVLAN-ID(passwordsimplePASSWORD|)
noflushsend
Parameter ParameterDescriptionParameterValue
VLAN-ID Flushpacketwillbesent
throughthisVLAN.1-4094
PASSWORD Thesimplepasswordof
theflushpacketStringwithupto15
characters
CommandMode
Smart-linkConfiguration
Default
Thereisnoflushsenderinthesmart-linkgroupbydefault.
Usage
Macaddress-tableshouldbeupdatedwhenamaster(forwarding)linkgoesdown
andtheslavelinkbeginsforwardingtraffic.Flushpacketisusedforthispurpose.
NOTE:Ifthecontrol-vlanisnotexistedintheswitch,sendingflushpacketwillfail.
Examples
Thisexampleshowshowtoconfigureflushsenderofthesmart-linkgroup1,control-
vlanis4andpasswordistest:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#flushsendcontrol-vlan4passwordsimpletest2353RelatedCommands
showsmart-linkgroup
smart-linkflushreceive
13.11.9groupenable
CommandPurpose
Usethiscommandtoenable/disablethesmart-linkgroup.
CommandSyntax
groupenable
nogroupenable
CommandMode
Smart-linkConfiguration
Default
Smart-linkgroupisdisabledbydefault.
Usage
Afterinterfaceandprotectedinstanceconfigurationisfinished,thiscommandcould
beusedtoenablethegroup.
Examples
Thisexampleshowshowtoenablethesmart-linkgroup1:
Switch#configureterminal
Switch(config)#smart-linkgroup1
Switch(config-smlk-group)#groupenable
RelatedCommands
showsmart-linkgroup235413.11.10smart-linkflushreceive
CommandPurpose
Usethiscommandtoset/unsettheflushpacketreceiverintheswitchinterface.
CommandSyntax
smart-linkflushreceivecontrol-vlanVLAN_LIST(passwordsimplePASSWORD|)
(vpls-notify|)
nosmart-linkflushreceive(control-vlanVLAN_LIST|)
Parameter ParameterDescriptionParameterValue
VLAN_LIST Flushpacketwillbesent
throughtheseVLANs.VLANIDlist,example:2-
5,7,9-11,rangeis1-4094
PASSWORD Thesimplepasswordof
theflushpacketStringwithupto15
characters
vpls-notify Flushpacketisusedfor
vpls.-
CommandMode
InterfaceConfiguration
Default
Thereisnoflushreceiverbydefault.
Usage
ThereceivedflushpacketshouldhavethesameVLAN-IDandpasswordwiththe
sender.Otherwise,thepacketwillbediscarded.
Examples
Thisexampleshowshowtoconfigureflushreceiverintheinterfaceeth-0-9,control-
vlanis4andpasswordistest:2355Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#smart-linkflushreceivecontrol-vlan4passwordsimpletest
Switch(config-if)#end
Switch#showsmart-link
Relaysmart-linkflushpacketisenabled
Smart-linkreceivedflushpacketnumber:0
Smart-linkprocessedflushpacketnumber:0
SmartlinkGroupNumberis1.
Group-IDStateMASTERSLAVE
1disabledN/AN/A
RelatedCommands
flushsend
showsmart-link
13.11.11smart-linktcnenable
CommandPurpose
Usethiscommandtoenablesmartlinktcn.Todisablethesmart-linktcn,usedno
formofthiscommand.
CommandSyntax
smart-linktcnenable
nosmart-linktcnenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None2356Examples
Switch#configureterminal
Switch(config)#nosmart-linktcnenable
Switch#configureterminal
Switch(config)#smart-linktcnenable
RelatedCommands
showsmart-link
13.11.12smart-linktcnquery-count
CommandPurpose
Usethiscommandtosetsmartlinktcnquerycount.Toresetthesmart-linktcnquery
counttodefaultvalue,usednoformofthiscommand.
CommandSyntax
smart-linktcnquery-countQUERY-COUNT
nosmart-linktcnquery-count
Parameter ParameterDescriptionParameterValue
QUERY-COUNT TCNquerycount. 1-10
CommandMode
GlobalConfiguration
Default
2
Usage
None2357Examples
Thisexampleshowshowtosetsmartlinktcnquerycountto5:
Switch#configureterminal
Switch(config)#smart-linktcnquery-count5
RelatedCommands
showsmart-link
13.11.13smart-linktcnquery-interval
CommandPurpose
Usethiscommandtosetsmartlinktcnqueryinterval.Toresetthesmart-linktcn
queryintervaltodefaultvalue,usednoformofthiscommand.
CommandSyntax
smart-linktcnquery-intervalQUERY-INTERVAL
nosmart-linktcnquery-interval
Parameter ParameterDescriptionParameterValue
QUERY-INTERVAL TCNqueryinterval. 1-255seconds
CommandMode
GlobalConfiguration
Default
10s
Usage
None
Examples
Thisexampleshowshowtosetsmartlinktcnqueryintervalto50:2358Switch#configureterminal
Switch(config)#smart-linktcnquery-interval50
Switch#configureterminal
Switch(config)#nosmart-linktcnquery-interval
RelatedCommands
showsmart-link
13.11.14showsmart-link
CommandPurpose
Usethiscommandtodisplayinformationofallsmart-linkgroups.
CommandSyntax
showsmart-link
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaysummaryinformationofSmart-linkgroupstatus,
includingreceivedflushpacket,processedflushpacketandcurrentSmart-linkgroup
number,etc.
Examples
Switch#showsmart-link
Relaysmart-linkflushpacketisenabled
Smart-linkreceivedflushpacketnumber:7
Smart-linkprocessedflushpacketnumber:0
SmartlinkGroupNumberis1.
Group-IDStateMASTERSLAVE
1enabledeth-0-1eth-0-22359RelatedCommands
None
13.11.15showsmart-linkgroup
CommandPurpose
Usethiscommandtodisplaydetailedinformationofallsmart-linkgroupsoraspecific
group.
CommandSyntax
showsmart-linkgroup(GROUP-ID|)
Parameter ParameterDescriptionParameterValue
GROUP-ID Smart-linkgroupID 1-16
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaydetailinformationofaspecifiedSmart-linkgroupor
allSmart-linkgroupsstatus.
Examples
Switch#showsmart-linkgroup1
RelatedCommands
None236013.11.16clearsmart-linkstatistic
CommandPurpose
Usethiscommandtoclearthestatisticofthesmart-linkgroups.
CommandSyntax
clearsmart-linkstatistic
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtoclearthestatisticofthesmart-linkgroups.
Examples
Switch#clearsmart-linkstatistic
RelatedCommands
None
13.11.17debugsmart-link
CommandPurpose
Usethiscommandtodebugdetailinformationofsmartlink.
CommandSyntax
debugsmart-link(all|flush|instance|interface|restore)
Parameter ParameterDescriptionParameterValue2361all Alldebugging -
flush Smart-LinkFlushPacket-
instance Smart-LinkInstance -
interface Smart-LinkInterface -
restore Smart-Linkauto-restore-
mib SNMPMIBsofSmart-Link-
trap SNMPtrapofSmart-Link-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugsmart-linkall
RelatedCommands
None
13.12Multi-LinkCommands
13.12.1multi-linkgroup
CommandPurpose
Usethiscommandtocreateamulti-linkgroupandentermulti-linkgroup
configurationmode.Todestroythemulti-linkgroup,usednoformofthiscommand.2362CommandSyntax
multi-linkgroupGROUP-ID
nomulti-linkgroup(GROUP-ID|all)
Parameter ParameterDescriptionParameterValue
GROUP-ID multi-linkgroupID 1-16
all Allthemulti-linkgroups
havebeenexist-
CommandMode
GlobalConfiguration
Default
Thereisnoanymulti-linkgroup
Usage
Upto16multi-linkgroupscanbecreated.
Examples
Createamulti-linkgroupwithID1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
RelatedCommands
showmulti-linkgroup
13.12.2multi-linkrelayenable
CommandPurpose
Usethiscommandtoenabletheswitchtorelaythemulti-linkflushpacket.Todisable
relayingthepackets,usenoformofthiscommand.2363CommandSyntax
multi-linkrelayenable
nomulti-linkrelayenable
CommandMode
GlobalConfiguration
Default
Relayingthemulti-linkflushpacketisenabled.
Usage
Bydefault,themulti-linkflushpacketcouldbeflooded.Usethecommand,nomulti-
linkrelayenable,todisablethepacketfloodingtootherswitches.
Examples
Theexampleshowshowtoenablemulti-linkrelay:
Switch#configureterminal
Switch(config)#multi-linkrelayenable
Theexampleshowshowtodisablemulti-linkrelay:
Switch#configureterminal
Switch(config)#nomulti-linkrelayenable
RelatedCommands
None
13.12.3interface
CommandPurpose
Usethiscommandtosetmasterorslavememberinterfaceofthemulti-linkgroup.To
unsetthememberusesthenoformofthiscommand.2364CommandSyntax
interface(IFPHYSICAL|IFAGG)priority<1-4>
nointerface(priority<1-4>|all)
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Thenameofphysical
interface,likeeth-0-1-
IFAGG Thenameoflink-agg
interface,likeagg1-
<1-4> Thepriorityoftheinterface1-4
all Bothofthemasterand
slaveinterface-
CommandMode
Multi-linkGroupConfiguration
Default
Thereisnoanyinterfacememberinthemulti-linkgroupbydefault.
Usage
Everymulti-linkgrouphasmorethantwomemberinterfaces.Theinterfacesshould
bephysical(i.e.eth-0-1)oraggregator(i.e.agg1)switchinterface.
NOTE:STPmustbedisabledinthemulti-linkinterfacesfirst.
Examples
Thisexampleshowshowtosetinterfaceseth-0-9andeth-0-13astheinterfacesof
multi-linkgroup1:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#spanning-treeportdisable
Switch(config-if)#exit
Switch(config)#interfaceeth-0-132365Switch(config-if)#spanning-treeportdisable
Switch(config-if)#exit
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#interfaceeth-0-9master
Switch(config-multilk-group)#interfaceeth-0-13slave
Switch(config-multilk-group)#end
Switch#showmulti-linkgroup1
Multi-linkgroup1information:
Themulti-linkgroupwasdisabled.
============================================================
Auto-restore:
statetimecountLast-time
disabled60 0N/A
============================================================
Protectedinstance:
Loadbalanceinstance:
============================================================
INTERFACE:
RoleMemberDownCountLast-Down-TimeFlushCountLast-Flush-Time
MASTEReth-0-90N/A0N/A
SLAVEeth-0-130N/A0N/A
RelatedCommands
showmulti-linkgroup
13.12.4protectedmstpinstance
CommandPurpose
Usethiscommandtoset/unsetprotectedMSTPinstancetothemulti-linkgroup.
CommandSyntax
protectedmstpinstanceINSTANCE-ID
noprotectedmstpinstance(all|INSTANCE-ID)
Parameter ParameterDescriptionParameterValue
INSTANCE-ID MSTPinstanceID.The
rangeis0-40940-4094
all Alltheinstancehavebeen
exist-2366CommandMode
Multi-linkGroupConfiguration
Default
ThereisnoprotectedMSTPinstanceinthemulti-linkgroupbydefault.
Usage
Themulti-linkgroupsonlyprotecttheseVLANsintheprotectedMSTPinstances.
Themulti-linkgroupcantbeenabledifnoprotectedinstanceisconfigured.To
protectthoseVLANswhicharenotboundwithMSTPinstance,usethecommand
protectedmstpinstance0.
NOTE:IftheMTSPinstanceisremoved,itwillberemovedfrommulti-linkgroupat
thesametime.
Examples
ThisexampleshowshowtosetMSTPinstance0,10and100tothemulti-linkgroup
1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#protectedmstpinstance0
Switch(config-multilk-group)#protectedmstpinstance10
Switch(config-multilk-group)#protectedmstpinstance100
Switch(config-multilk-group)#end
Switch#showmulti-linkgroup1
Multi-linkgroup1information:
Themulti-linkgroupwasenabled.
============================================================
Auto-restore:
statetimecountLast-time
disabled60 0N/A
============================================================
Protectedinstance:010100
Loadbalanceinstance:
============================================================
INTERFACE:
RoleMemberDownCountLast-Down-TimeFlushCountLast-Flush-Time
PRI1eth-0-90N/A 0N/A
PRI2eth-0-100N/A 0N/A
PRI3N/A0N/A 0N/A
PRI4eth-0-120N/A 0N/A
============================================================2367Instancestatesinthememberinterfaces:
A-ACTIVE,B-BLOCK,D-Theinterfaceislink-down
Map-instance-IDP1(eth-0-9)P2(eth-0-10)P3(N/A)P4(eth-0-12)
0 ABDB
10 ABDB
100ABDB
RelatedCommands
showmulti-linkgroup
13.12.5load-balanceinstance
CommandPurpose
Usethiscommandtoset/unsetload-balancingtothemulti-linkgroup.
CommandSyntax
load-balanceinstanceINSTANCE-IDpriority<2-4>
noload-balanceinstance(all|INSTANCE-ID)
Parameter ParameterDescriptionParameterValue
INSTANCE-ID MSTPinstanceID.The
rangeis0-40940-4094
<2-4> Setload-balancingport
withsamepriority-
all Alltheinstancehavebeen
exist-
CommandMode
Multi-linkGroupConfiguration
Default
Thereisnoload-balancinginstanceinthemulti-linkgroupbydefault.2368Usage
Load-balancinginstanceswillbeactiveintheslaveinterface.Ifuserwantto
configureload-balancinginstances,shouldbeforethesmart-groupisenabled.
Examples
Thisexampleshowshowtosetprotectedinstance10astheload-balancinginstance:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#load-balanceinstance10priority2
RelatedCommands
showmulti-linkgroup
13.12.6restoretime
CommandPurpose
Usethiscommandtosetrestoretimeofthemulti-linkgroup.
CommandSyntax
restoretimeRESTORE-TIME
norestoretime
Parameter ParameterDescriptionParameterValue
RESTORE-TIME Therestoretimeofthe
multi-linkgroup30-1200seconds
CommandMode
Multi-linkGroupConfiguration
Default
Thedefaultrestoretimeis60seconds.2369Usage
Whenthemasterinterfaceisresumed,thelinkswillnotbeimmediatelyrestoredto
themasterinterface,butwillbedelayedawhile.Thedelaytimeiscalledrestoretime.
Examples
Thisexampleshowshowtosetrestoretimeas30secondsinthemulti-linkgroup1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#restoretime30
RelatedCommands
showmulti-linkgroup
13.12.7restoreenable
CommandPurpose
Usethiscommandtoenable/disablerestoringfeatureofthemulti-linkgroup.
CommandSyntax
restoreenable
norestoreenable
CommandMode
Multi-linkGroupConfiguration
Default
Therestoringfeatureofthemulti-linkgroupisdisabledbydefault.
Usage
Whenmasterinterfacefails,thelinkwillbeswitchedtotheslaveinterface.Then,if
masterinterfaceisresumed,thelinkwillnotbeswitchedbacktokeeptheflowstable
bydefault.Ifrestoringfeatureisenabled,thelinkwillbeswitchedback.2370NOTE:Ifload-balancinginstanceisconfigured,thisfeatureisrecommendedstrongly.
Examples
Thisexampleshowshowtoenabletherestoringfeatureinthemulti-linkgroup1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#restoreenable
RelatedCommands
showmulti-linkgroup
13.12.8flushsend
CommandPurpose
Usethiscommandtoset/unsettheflushpacketsenderinthemulti-linkgroup.
CommandSyntax
flushsendcontrol-vlanVLAN-IDpasswordsimplePASSWORD
noflushsend
Parameter ParameterDescriptionParameterValue
VLAN-ID Flushpacketwillbesent
throughthisVLAN.1-4094
PASSWORD Thesimplepasswordof
theflushpacketStringwithupto15
characters
CommandMode
Multi-linkGroupConfiguration
Default
Thereisnoflushsenderinthemulti-linkgroupbydefault.2371Usage
Macaddress-tableshouldbeupdatedwhenamaster(forwarding)linkgoesdown
andtheslavelinkbeginsforwardingtraffic.Flushpacketisusedforthispurpose.
NOTE:Ifthecontrol-vlanisnotexistedintheswitch,sendingflushpacketwillfail.
Examples
Thisexampleshowshowtoconfigureflushsenderofthemulti-linkgroup1,control-
vlanis4andpasswordistest:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#flushsendcontrol-vlan4passwordsimpletest
RelatedCommands
showmulti-linkgroup
multi-linkflushreceive
13.12.9groupenable
CommandPurpose
Usethiscommandtoenable/disablethemulti-linkgroup.
CommandSyntax
groupenable
nogroupenable
CommandMode
Multi-linkGroupConfiguration
Default
Multi-linkgroupisdisabledbydefault.2372Usage
Afterinterfaceandprotectedinstanceconfigurationisfinished,thiscommandcould
beusedtoenablethegroup.
Examples
Thisexampleshowshowtoenablethemulti-linkgroup1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#groupenable
RelatedCommands
showmulti-linkgroup
13.12.10multi-linkflushreceive
CommandPurpose
Usethiscommandtoset/unsettheflushpacketreceiverintheswitchinterface.
CommandSyntax
multi-linkflushreceivecontrol-vlanVLAN-IDpasswordsimplePASSWORD
nomulti-linkflushreceive
Parameter ParameterDescriptionParameterValue
VLAN-ID Flushpacketwillbesent
throughthisVLAN.1-4094
PASSWORD Thesimplepasswordof
theflushpacketStringwithupto15
characters
CommandMode
InterfaceConfiguration2373Default
Thereisnoflushreceiverbydefault.
Usage
ThereceivedflushpacketshouldhavethesameVLAN-IDandpasswordwiththe
sender.Otherwise,thepacketwillbediscarded.
Examples
Thisexampleshowshowtoconfigureflushreceiverintheinterfaceeth-0-9,control-
vlanis4andpasswordistest:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#multi-linkflushreceivecontrol-vlan4passwordsimpletest
Switch(config-if)#end
Switch#showmulti-link
Relaymulti-linkflushpacketisenabled
Multi-linkreceivedflushpacketnumber:0
Multi-linkprocessedflushpacketnumber:0
Multi-linktcnisenabled
Multi-linktcnquerycount:2
Multi-linktcnqueryinterval:3
Multi-linkGroupNumberis1.
Group-IDStatePri-1Pri-2Pri-3Pri-4
1enabledeth-0-9eth-0-10N/Aeth-0-12
RelatedCommands
flushsend
showmulti-link
13.12.11multi-linktcnenable
CommandPurpose
Usethiscommandtoenablemulti-linktcn.Todisablethemulti-linktcn,usednoform
ofthiscommand.
CommandSyntax
multi-linktcnenable2374nomulti-linktcnenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Switch#configureterminal
Switch(config)#multi-linktcnenable
Switch#configureterminal
Switch(config)#nomulti-linktcnenable
RelatedCommands
showmulti-link
13.12.12multi-linktcnquery-count
CommandPurpose
Usethiscommandtosetmulti-linktcnquerycount.Toresetthemulti-linktcnquery
counttodefaultvalue,usednoformofthiscommand.
CommandSyntax
multi-linktcnquery-countQUERY-COUNT
nomulti-linktcnquery-count
Parameter ParameterDescriptionParameterValue
QUERY-COUNT TCNquerycount. 1-102375CommandMode
GlobalConfiguration
Default
2
Usage
None
Examples
Thisexampleshowshowtosetmulti-linktcnquerycountto5:
Switch#configureterminal
Switch(config)#multi-linktcnquery-count5
RelatedCommands
showmulti-link
13.12.13multi-linktcnquery-interval
CommandPurpose
Usethiscommandtosetmulti-linktcnqueryinterval.Toresetthemulti-linktcnquery
intervaltodefaultvalue,usednoformofthiscommand.
CommandSyntax
multi-linktcnquery-intervalQUERY-INTERVAL
nomulti-linktcnquery-interval
Parameter ParameterDescriptionParameterValue
QUERY-INTERVAL TCNqueryinterval. 1-255seconds
CommandMode
GlobalConfiguration2376Default
10s
Usage
None
Examples
Thisexampleshowshowtosetmulti-linktcnqueryintervalto50:
Switch#configureterminal
Switch(config)#multi-linktcnquery-interval50
Thisexampleshowshowtorestorethedefaultmulti-linktcnqueryintervalto50:
Switch#configureterminal
Switch(config)#nomulti-linktcnquery-interval
RelatedCommands
showmulti-link
13.12.14showmulti-link
CommandPurpose
Usethiscommandtodisplayinformationofallmulti-linkgroups.
CommandSyntax
showmulti-link
CommandMode
PrivilegedEXEC
Default
None2377Usage
ThiscommandisusedtodisplayasummaryinformationofMulti-linkgroupstatus,
includingreceivedflushpacket,processedflushpacketandcurrentMulti-linkgroup
number,etc.
Examples
Switch#showmulti-link
Relaymulti-linkflushpacketisenabled
Multi-linkreceivedflushpacketnumber:0
Multi-linkprocessedflushpacketnumber:0
Multi-linktcnisenabled
Multi-linktcnquerycount:2
Multi-linktcnqueryinterval:3
Multi-linkGroupNumberis1.
Group-IDStatePri-1Pri-2Pri-3Pri-4
1enabledeth-0-9eth-0-10N/Aeth-0-12
RelatedCommands
None
13.12.15showmulti-linkgroup
CommandPurpose
Usethiscommandtodisplaydetailedinformationofallmulti-linkgroupsoraspecific
group.
CommandSyntax
showmulti-linkgroup(GROUP-ID|)
Parameter ParameterDescriptionParameterValue
GROUP-ID Multi-linkgroupID 1-16
CommandMode
PrivilegedEXEC2378Default
None
Usage
ThiscommandisusedtodisplaydetailinformationofaspecifiedMulti-linkgroupor
allMulti-linkgroupsstatus.
Examples
Switch#showmulti-linkgroup1
RelatedCommands
None
13.12.16clearmulti-linkstatistic
CommandPurpose
Usethiscommandtoclearthestatisticofthemulti-linkgroups.
CommandSyntax
clearmulti-linkstatistic
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtoclearthestatisticofthemulti-linkgroups.
Examples
Switch#clearmulti-linkstatistic2379RelatedCommands
None
13.12.17debugmulti-link
CommandPurpose
Usethiscommandtodebugdetailinformationofmulti-link.
CommandSyntax
debugmulti-link(all|flush|instance|interface|restore)
Parameter ParameterDescriptionParameterValue
all Alldebugging -
flush Multi-linkFlushPacket-
instance Multi-linkInstance -
interface Multi-linkInterface -
restore Multi-linkauto-restore -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#debugmulti-linkall2380RelatedCommands
None
13.12.18multilink-enhanceinterface
CommandPurpose
Usethiscommandtoset/unsetthemultilinkenhanceinterfacewhichsends
enhancedpacketsinthemulti-linkgroup.
CommandSyntax
multilink-enhanceinterface(IFPHYSICAL|IFAGG)
nomultilink-enhanceinterface
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Thenameofphysical
interface,likeeth-0-1-
IFAGG Thenameoflink-agg
interface,likeagg1-
CommandMode
Multi-linkGroupConfiguration
Default
Thereisnoflushsenderinthemulti-linkgroupbydefault.
Usage
Theinterfaceofmultilink-enhanceisgenerallyoutofmulti-linkgroup,whenyouwant
toconfiguremultilink-enhanceinterface,youshouldsetthecontrolvlanidand
passwordofflushsend.
Examples
Thisexampleshowshowtoconfiguremultilink-enhanceofmulti-linkgroup1:2381Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#multilink-enhanceinterfaceeth-0-1
RelatedCommands
showmulti-linkgroup
13.12.19multilink-enhancereceive
CommandPurpose
Usethiscommandtoset/unsetthemultilinkenhanceinterfacewhichreceives
enhancedpacketsinmulti-linkgroup.
CommandSyntax
multilink-enhancereceivecontrol-vlanVLAN-IDpasswordsimplePASSWORD
interface(IFPHYSICAL|IFAGG)
nomultilink-enhancereceiveinterface(IFPHYSICAL|IFAGG)
Parameter ParameterDescriptionParameterValue
control-vlanVLAN-ID TheVLANIDofmulti-link
controlvlan1-4094
passwordsimple
PASSWORDThesimplepassword Stringwithupto15
characters
IFPHYSICAL Thenameofphysical
interface,likeeth-0-1-
IFAGG Thenameoflink-agg
interface,likeagg1-
CommandMode
Multi-linkGroupConfiguration
Default
Thereisnoflushsenderinthemulti-linkgroupbydefault.2382Usage
Thereceivedinterfaceofmultilink-enhancemustbethememberofmulti-linkgroup
withthelowestpriority.Whentheinterfaceenablingreceivingenhancedpackets,it
shouldnotbesettheload-balance,anddoesntaddthelowerpriorityinterfacein
multi-linkgroup.
Examples
Thisexampleshowshowtoconfiguremultilink-enhancereceivedinterfaceofmulti-
linkgroup1:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#multilink-enhancereceivecontrol-vlan10passwordbinterfaceeth-0-2
RelatedCommands
showmulti-linkgroup
13.12.20multilink-enhancesend-interval
CommandPurpose
Usethiscommandtosettheintervalofsendingenhancepackets.
CommandSyntax
multilink-enhancesend-interval<1-255>
nomultilink-enhancesend-interval
Parameter ParameterDescriptionParameterValue
<1-255> Theintervalofsending
enhancepackets1-255
CommandMode
Multi-linkGroupConfiguration2383Default
10
Usage
NONE.
Examples
Thisexampleshowshowtoconfiguretheintervalofsendingenhancepackets,its
valueis20:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#multilink-enhancesend-interval20
RelatedCommands
showmulti-linkgroup
13.12.21multilink-enhancetimeout
CommandPurpose
Usethiscommandtosettheintervalofcheckingreceivedenhancepackets.
CommandSyntax
multilink-enhancetimeout<1-255>
nomultilink-enhancetimeout
Parameter ParameterDescriptionParameterValue
<1-255> Theintervalofchecking
receivedenhancepackets1-255
CommandMode
Multi-linkGroupConfiguration2384Default
10
Usage
NONE.
Examples
Thisexampleshowshowtoconfiguretheintervalofcheckingreceivedenhance
packets,itsvalueis20:
Switch#configureterminal
Switch(config)#multi-linkgroup1
Switch(config-multilk-group)#multilink-enhancetimeout20
RelatedCommands
showmulti-linkgroup
13.13MonitorLinkCommands
13.13.1monitor-linkgroup
CommandPurpose
Usethiscommandtocreatemonitorlinkgroup.
CommandSyntax
monitorlinkgroupGROUP-ID
nomonitorlinkgroupGROUP-ID
Parameter ParameterDescriptionParameterValue
GROUP-ID Monitorlinkgroupnumber1-16
CommandMode
GlobalConfiguration2385Default
Nomonitorlinkgroupiscreated
Usage
Thiscommandisusedtocreatemonitorlinkgroup.Thegrouprangeis1-16.
Examples
Inthefollowingexample,monitorlinkgroup1iscreated:
Switch#configureterminal
Switch(config)#monitor-linkgroup1
RelatedCommands
nomonitor-linkgroup
13.13.2monitor-linkuplinkinterface
CommandPurpose
Usethiscommandtoadduplinkinterfacetomonitorlinkgroup.
CommandSyntax
monitor-linkuplinkinterface(IFPHYSICAL|IFAGG)
nomonitor-linkuplinkinterface(IFPHYSICAL|IFAGG)
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
CommandMode
Monitor-linkConfiguration2386Default
Nointerfaceisadd
Usage
OnlyEthernetinterfaceandaggregationinterfacecanbeusedasmonitorlinkgroup.
Examples
Inthefollowingexample,theethernetinterfaceissettomonitorlinkgroupmember:
Switch#configureterminal
Switch(config)#monitor-linkgroup1
Switch(config-mtlk-group)#monitor-linkuplinkinterfaceeth-0-1
RelatedCommands
showmonitor-linkgroup
13.13.3monitor-linkuplinksmart-linkgroup
CommandPurpose
Usethiscommandtoaddsmartlinkgrouptomonitorlinkgroup.
CommandSyntax
monitor-linkuplinksmart-linkgroupGROUP-ID
nomonitor-linkuplinksmart-linkgroupGROUP-ID
Parameter ParameterDescriptionParameterValue
GROUP-ID Monitorlinkgroupnumber1-16
CommandMode
Monitor-linkConfiguration
Default
Nosmartlinkgroupisadd2387Usage
Onlythesmartlinkgroupwhichisenabledcanbeaddtomonitorlinkgroup
Examples
Inthefollowingexample,thesmartlinkgroupissettomonitorlinkgroupmember:
Switch#configureterminal
Switch(config)#monitor-linkgroup1
Switch(config-mtlk-group)#monitor-linkuplinksmart-linkgroup1
RelatedCommands
showmonitor-linkgroup
13.13.4nomonitor-linkuplink
CommandPurpose
Usethiscommandtodeletealltheuplinkfrommonitorlinkgroup.
CommandSyntax
nomonitor-linkuplink
CommandMode
Monitor-linkConfiguration
Default
None
Usage
Thiscommandisusedtodeletealltheuplinkfrommonitorlinkgroup.
Examples
Inthefollowingexample,alltheuplinkisdeletedfrommonitorlinkgroup:2388Switch#configureterminal
Switch(config-mtlk-group)#nomonitor-linkuplink
RelatedCommands
showmonitor-linkgroup
13.13.5monitor-linkdownlinkinterface
CommandPurpose
Usethiscommandtoadddownlinkinterfacefrommonitorlinkgroup.
CommandSyntax
monitor-linkdownlinkinterface(IFPHYSICAL|IFAGG)
nomonitor-linkdownlinkinterface(IFPHYSICAL|IFAGG|)
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Ethernetinterfacename-
IFAGG Linkaggregationinterface
name-
CommandMode
Monitor-linkConfiguration
Default
Nointerfaceisadd
Usage
OnlyEthernetinterfaceandaggregationinterfacecanbeaddtomonitorlinkgroup.
Examples
Inthefollowingexample,theEthernetinterfaceissettomonitorlinkgroupmember:2389Switch#configureterminal
Switch(config)#monitor-linkgroup1
Switch(config-mtlk-group)#monitor-linkdownlinkinterfaceeth-0-1
RelatedCommands
showmonitor-linkgroup
13.13.6monitor-linkrecover-time
CommandPurpose
Usethiscommandtosetrecovertimeformonitorlinkgroup.
CommandSyntax
monitor-linkrecover-timeRECOVER_TIME
nomonitor-linkrecover-time
Parameter ParameterDescriptionParameterValue
RECOVER_TIME Monitorlinkgrouprecover
timerange(second)0-60seconds
CommandMode
GlobalConfiguration
Default
Thedefaultvalueis3seconds
Usage
Thiscommandisusedtosetrecovertimeformonitorlinkgroup.Iftheuplinkis
changetoup,allthedownlinkwillbesettoupafterrecovertimer.
Examples
Inthefollowingexample,monitorlinkgroupsrecover-timeissetto1s:2390Switch#configureterminal
Switch(config)#monitor-linkrecover-time1
RelatedCommands
showmonitor-linkgroup
13.13.7showmonitor-linkgroup
CommandPurpose
Usethiscommandtodisplayallthemonitorlinkgroupstatus.
CommandSyntax
showmonitor-linkgroup(GROUP-ID|)
Parameter ParameterDescriptionParameterValue
GROUP-ID Monitorlinkgroupnumber1-16
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplayaspecifiedorallthemonitorlinkgroupstatus,
includingstatus,groupid,uptime,downtime,etc.
Examples
Inthefollowingexample,monitorlinkgroup1isdisplayed:
Switch#showmonitor-linkgroup
GroupId:1
Monitorlinkstatus:UP
RoleMemberLast-up-timeLast-down-timeupcountdowncount
UpLk1eth-0-22011/07/15,01:34:172011/07/15,01:34:14112391RelatedCommands
None
13.13.8debugmonitor-link
CommandPurpose
Usethiscommandtodebugmonitorlink.
CommandSyntax
debugmonitor-link
CommandMode
PrivilegedEXEC
Default
None.
Usage
None.
Examples
Inthefollowingexample,thedebugofmonitorlinkissettoon:
Switch#debugmonitor-link
RelatedCommands
None239213.14VRRPCommands
13.14.1advertisement-interval
CommandPurpose
Toconfiguretheintervalbetweensuccessiveadvertisementssentbythemaster
virtualrouterinaVirtualRouterRedundancyProtocol(VRRP)group,usethe
advertisement-intervalcommandinrouterconfigurationmode.Torestorethedefault
value,usethenoformofthiscommand.
CommandSyntax
advertisement-intervalinterval
noadvertisement-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Timeintervalbetween
successiveadvertisements
sentbythemastervirtual
router.Theunitofthe
intervalisinseconds.1-255seconds
CommandMode
RouterConfiguration
Default
Defaultis1second.
Usage
Theadvertisementssentbythemastervirtualroutercommunicatethestateand
priorityofthecurrentmastervirtualrouter.
Theadvertisement-intervalcommandconfiguresthetimebetweensuccessive
advertisementpacketsandthetimebeforeotherroutersdeclarethemasterrouterto
bedown.Routersoraccessserversonwhichtimervaluearenotconfiguredcan2393learntimervaluesfromthemasterrouter.Thetimersconfiguredonthemasterrouter
alwaysoverrideanyothertimersettings.AllroutersinaVRRPgroupmustusethe
sametimervalue.Ifthesametimervalueisnotset,theroutersintheVRRPgroup
willnotcommunicatewitheachotherandanymisconfiguredrouterwillchangeits
statetomaster.
Examples
Thefollowingexampleshowshowtoconfigurethemastervirtualroutertosend
advertisementsevery4seconds:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#advertisement-interval4
RelatedCommands
advertisement-intervalmsec
13.14.2advertisement-intervalmsec
CommandPurpose
Toconfiguretheadvertisementintervalwithmilli-secondmodebetweensuccessive
advertisementssentbythemastervirtualrouterinaVRRPgroup,usethe
advertisement-intervalmseccommandinrouterconfigurationmode.
CommandSyntax
advertisement-intervalmsecinterval
Parameter ParameterDescriptionParameterValue
INTERVAL Timeintervalbetween
successiveadvertisements
sentbythemastervirtual
router.Theunitofthe
intervalisin100milli-
seconds.100-900milli-seconds.2394CommandMode
RouterConfiguration
Default
None
Usage
Theadvertisementsbesentbythemastervirtualroutercommunicatethestateand
priorityofthecurrentmastervirtualrouter.
Theadvertisement-intervalmseccommandconfiguresthetimebetweensuccessive
advertisementpacketsandthetimebeforeotherroutersdeclarethemasterrouterto
bedown.Routersoraccessserversonwhichtimervaluesarenotconfiguredcan
learntimervaluesfromthemasterrouter.Thetimersconfiguredonthemasterrouter
alwaysoverrideanyothertimersettings.AllroutersinaVRRPgroupmustusethe
sametimervalue.Ifthesametimervalueisnotset,theroutersintheVRRPgroup
willnotcommunicatewitheachotherandanymisconfiguredrouterwillchangeits
statetomaster.
Examples
Thefollowingexampleshowshowtoconfigurethemastervirtualroutertosend
advertisementsevery100milli-seconds:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#advertisement-intervalmsec100
RelatedCommands
advertisement-interval
13.14.3interface(VRRP)
CommandPurpose
ToenabletheVirtualRouterRedundancyProtocol(VRRP)protocolonaspecified
interface,usetheinterfacecommandinroutermode.2395TodisableVRRPprotocolonthisinterface,usethenoformofthiscommand.
CommandSyntax
interfaceINTERFACE-ID
nointerface
Parameter ParameterDescriptionParameterValue
INTERFACE-ID Interfacename -
CommandMode
RouterConfiguration
Default
None
Usage
ThemaxVRRPgroupnumbershouldbenomorethan3foroneVRRPinterface.
Examples
Thefollowingisasampleoutputfromtheinterfacecommand:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#interfaceeth-0-1
RelatedCommands
routervrrp
13.14.4learnmaster-mode
CommandPurpose
Toenablethebackuproutertolearnadvertisementintervalfrommasterrouter,use
thelearnmaster-modetruecommandinroutermode.2396Todisablelearnadvertisementintervalfrommasterrouter,usethelearnmaster-mode
falsecommand.
CommandSyntax
learnmaster-mode(true|false)
Parameter ParameterDescriptionParameterValue
True Enablelearn
advertisementinterval
frommasterrouter-
False Disablelearning
advertisementinterval
frommasterrouter-
CommandMode
RouterConfiguration
Default
Defaultisfalse.
Usage
Bydefault,backuprouterdoesnotlearnadvertisementintervalfrommasterrouter.
Examples
Thefollowingexampleshowshowtoconfigureabackuprouterlearning
advertisementintervalfrommasterrouter.:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#learnmaster-modetrue
RelatedCommands
routervrrp239713.14.5preempt-mode
CommandPurpose
ToconfiguretheroutertotakeoverasmastervirtualrouterforaVirtualRouter
RedundancyProtocol(VRRP)groupifithashigherprioritythanthecurrentmaster
virtualrouter,usethepreempt-modeenablecommandinroutermode.Todisablethis
function,usethepreempt-modedisablecommand.
CommandSyntax
preempt-mode(true|false)
Parameter ParameterDescriptionParameterValue
True Preemptionenabled -
False Preemptiondisabled -
CommandMode
RouterConfiguration
Default
Defaultistrue.
Usage
Bydefault,therouterconfiguredpreempt-modetruewilltakeoverasmastervirtual
routerforthegroupifithasahigherprioritythanthecurrentmastervirtualrouter.
Examples
Thefollowingexampleshowshowtoconfiguretheroutertopreemptthecurrent
mastervirtualrouterwhenitspriorityof200ishigherthanthatofthecurrentmaster
virtualrouter:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#preempt-modetrue
Switch(config-router)#priority2002398RelatedCommands
preemptdelay
13.14.6preemptdelay
CommandPurpose
Toconfigurethemasterdownintervalwhenpreempttakeseffect.
CommandSyntax
preemptdelaytime
Parameter ParameterDescriptionParameterValue
TIME Preemptdelaytime 0-3600seconds
CommandMode
RouterConfiguration
Default
Defaultis0second.
Usage
Theoriginalmasterdowninterval=(3advt_interval)+skew_time.whenpreempt
delaytimeisconfigured,thenmasterdowninterval=(3advt_interval)+skew_time+
preempt_delay.Bydefault,preemptdelayis0second.
Examples
Thefollowingexampleshowshowtoconfiguretheroutertopreemptthecurrent
mastervirtualrouterwhenitspriorityof200ishigherthanthatofthecurrentmaster
virtualrouter,butdelay30secondstopreempt:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#preempt-modetrue2399Switch(config-router)#priority200
Switch(config-router)#preemptdelay30
RelatedCommands
preempt-mode
13.14.7priority(VRRP)
CommandPurpose
TosetthepriorityleveloftherouterwithinaVirtualRouterRedundancyProtocol
(VRRP)group,usetheprioritycommandinrouterconfigurationmode.Toremovethe
priorityleveloftherouter,usethenoformofthiscommand.
CommandSyntax
prioritylevel
nopriority
Parameter ParameterDescriptionParameterValue
level Priorityoftherouterwithin
theVRRPgroup.The
rangeisfrom1to254.1-254
CommandMode
RouterConfiguration
Default
Defaultis100
Usage
Usethiscommandtocontrolwhichrouterbecomesthemastervirtualrouter.
Examples
Thefollowingexampleshowshowtoconfiguretherouterwithapriorityof254:2400Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#priority254
RelatedCommands
routervrrp
13.14.8routervrrp
CommandPurpose
TocreateaVirtualRouterRedundancyProtocol(VRRP)group,usetheroutervrrp
commandinGlobalConfigurationmode.ToremovethisVRRPgroup,usetheno
formofthiscommand.
CommandSyntax
routervrrpGROUP(vrfNAME|)(uniform-mac|)
noroutervrrpGROUP
Parameter ParameterDescriptionParameterValue
GROUP Groupnumbertowhich
thetrackingapplies1-255
NAME VRFname -
CommandMode
GlobalConfiguration
Default
None
Usage
None2401Examples
ThefollowingisasampleshowshowtocreateaVRRPgroup:
Switch#configureterminal
Switch(config)#routervrrp1
RelatedCommands
None
13.14.9track(VRRP)
CommandPurpose
ToconfiguretheVirtualRouterRedundancyProtocol(VRRP)totrackanobject,use
thetrackcommandinrouterconfigurationmode.
Todisablethetracking,usethenoformofthiscommand.
CommandSyntax
trackOBJ_ID(decrementVALUE)
notrack
Parameter ParameterDescriptionParameterValue
OBJ_ID trackobjectid 1-500
decrementVALUE Prioritydecrementvalue1-255
CommandMode
RouterConfiguration
Default
None2402Usage
Usetracktomonitoranuplinkinterface,sothatwhenthemonitoringinterfaceis
down,backupcanchangetomasterrouter.
Only1trackobjectisvalidforonespecialVRRPgroup,andthelaterconfiguredtrack
objectwillalwaysoverwritethepreviousone.
Examples
Thefollowingisasampleoutputfromthetrackcommand:
Switch#configureterminal
Switch(config)#track10interfaceeth-0-1linkstate
Switch(config)#routervrrp1
Switch(config-router)#track10
RelatedCommands
routervrrp
13.14.10enable/disable
CommandPurpose
ToenableaVRRPsession,usetheenablecommandinrouterconfigurationmode.
TodisableaVRRPsession,usethedisablecommandinrouterconfigurationmode.
CommandSyntax
enable
disable
CommandMode
RouterConfiguration
Default
None2403Usage
None
Examples
ThefollowingisasampleshowshowtoenableaVRRPsession:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#enable
ThefollowingisasampleshowshowtodisableaVRRPsession:
Switch#configureterminal
Switch(config)#routervrrp1
Switch(config-router)#disable
RelatedCommands
None
13.14.11virtual-ip
CommandPurpose
ToenabletheVirtualRouterRedundancyProtocol(VRRP)onaninterfaceand
identifytheIPaddressofthevirtualrouter,usethevirtual-ipcommandinrouter
configurationmode.TodisableVRRPontheinterfaceandremovetheIPaddressof
thevirtualrouter,usethenoformofthiscommand.
CommandSyntax
virtual-ipIP-ADDRESS
novirtual-ip
Parameter ParameterDescriptionParameterValue
IP-ADDRESS IPaddressofthevirtual
routerIPv4Address2404CommandMode
RouterConfiguration
Default
None
Usage
ForVRRPtoelectadesignatedrouter,atleastonerouteronthecablemusthave
beenconfiguredwiththeprimaryaddressofthevirtualrouter.
VRRPdoesnotsupportaddresslearning.Alladdressesmustbeconfigured.
AllroutersintheVRRPgroupmustbeconfiguredwiththesameprimaryaddressfor
thevirtualrouter.Ifdifferentprimaryaddressesareconfigured,theroutersinthe
VRRPgroupwillnotcommunicatewitheachotherandanymis-configuredroutersin
thegroupwillchangetheirstatetomaster.
ThevirtualIPaddressmustbeinthesamesubnetwithVRRPinterface,andifvirtual
IPisequaltotheinterfaceIPaddress,itiscalledIPaddressowner.
Examples
ThefollowingexampleshowshowtoenableVRRPoneth-0-1.TheVRRPgroupis1.
IPaddress10.0.1.20istheaddressofthevirtualrouter:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipaddress10.0.1.1/24
Switch(config)#routervrrp1
Switch(config-router)#interfaceeth-0-1
Switch(config-router)#virtual-ip10.0.1.20
Switch(config-router)#enable
RelatedCommands
routervrrp240513.14.12showvrrp
CommandPurpose
TodisplayabriefordetailedstatusofoneorallconfiguredVirtualRouter
RedundancyProtocol(VRRP)groupsontherouter,usetheshowvrrpcommandin
PrivilegedEXECmode.
CommandSyntax
showvrrp(GROUP|)
Parameter ParameterDescriptionParameterValue
GROUP (Optional)Virtualrouter
groupnumberofthegroup
forwhichinformationisto
bedisplayed.1-255
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifnogroupisspecified,allgroupsaredisplayed.
Examples
Thefollowingisasampleoutputfromtheshowvrrpcommand:
Switch#showvrrp
VRID<1>
State :Master
VirtualIP:10.0.20.254(NotIPowner)
Interface:eth-0-10
VMAC :0000.5e00.0101
Advttimer:12406Preemptmode:TRUE
Confpri:200Runpri:200
Masterrouterip:10.0.20.1
Masterpriority:200
Masteradvttimer:1
Masterdowntimer:3
Preemptdelay:100second(s)
Learnmastermode:FALSE
RelatedCommands
routervrrp
13.15TrackCommands
13.15.1delayup
CommandPurpose
Usethiscommandtospecifythedelaytimebeforecommunicationstateoftrack
objectchangestoup.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
delayupSECONDS
nodelayup
Parameter ParameterDescriptionParameterValue
SECONDS Thedelaytimebeforethe
statusoftrackturnup.1-180seconds
CommandMode
TrackConfiguration
Default
Bydefaultthedelaytimeis0.2407Usage
None
Examples
Inthefollowingexample,thedelayupcommandisusedtoconfiguredelaywhen
objectstateisturnedfromdowntoup:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#delayup30
RelatedCommands
delaydown
13.15.2delaydown
CommandPurpose
Usethiscommandtospecifythedelaytimebeforecommunicationstateoftrack
objectchangestodown.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
delaydownSECONDS
nodelaydown
Parameter ParameterDescriptionParameterValue
SECONDS Thedelaytimebeforethe
statusoftrackturndown.1-180seconds
CommandMode
TrackConfiguration2408Default
Bydefaultthedelaytimeis0.
Usage
None
Examples
Inthefollowingexample,thedelaydowncommandisusedtoconfiguredelaywhen
objectstateisturnedfromuptodown:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#delaydown30
RelatedCommands
delayup
13.15.3frequency
CommandPurpose
UsethiscommandtosetthefrequencyofIPSLAoperation.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
frequencySECONDS
nofrequency
Parameter ParameterDescriptionParameterValue
SECONDS ThefrequencyofIPSLA
operation1-4800seconds
CommandMode
IPSLAConfiguration2409Default
Thedefaultvalueis60seconds.
Usage
Thefrequencyvalueshouldfollowthisrule
frequency>interval*(packets-per-test-1)+timeout
Examples
Inthefollowingexample,thefrequencycommandisusedtosettherateatwhicha
specifiedIPSLAsoperationrepeats:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#frequency10
RelatedCommands
showipslamonitor
13.15.4ipslamonitor
CommandPurpose
TocreateanIPSLAentryandenterIPSLAmonitorconfigurationmode,useipsla
monitorinCONFIGmode.
TodeleteanIPSLAentry,usethenoformofthiscommand.
CommandSyntax
ipslamonitorENTRY-NUMBER
noipslamonitorENTRY-NUMBER
Parameter ParameterDescriptionParameterValue
ENTRY-NUMBER Identifyofipslamonitor
entry1-2552410CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,theipslamonitorcommandisusedtocreateanipsla
monitorentry:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#
RelatedCommands
showipslamonitor
13.15.5descriptionstring
CommandPurpose
Todescribetheipslaentrywithastring.
Usethenoformofthiscommandtodeleteit.
CommandSyntax
descriptionSTRING
nodescription
Parameter ParameterDescriptionParameterValue
STRING descriptionstringforIP
SLAStringwithupto255
characters2411CommandMode
IPSLAConfiguration
Default
None
Usage
None
Examples
InthefollowingexampleshowshowtosetIPSLAdescription:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#descriptionthisisanexampler
RelatedCommands
None
13.15.6ipslamonitorschedule
CommandPurpose
ToenableanIPSLAentry,useipslamonitorschedulecommandinCONFIGmode.
TodisableanIPSLAentry,usethenoformofthiscommand.
CommandSyntax
ipslamonitorschedule(ENTRY-NUMBER)
Parameter ParameterDescriptionParameterValue
ENTRY-NUMBER Identifyofipslamonitor
entry1-2552412CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,theipslamonitorschedulecommandisusedtoenablean
IPSLAmonitorentry:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#exit
Switch(config)#ipslamonitorschedule1
RelatedCommands
showipslamonitor
13.15.7timeout
CommandPurpose
UsethiscommandtosetthetimevaluewhichIPSLAoperationwaitfortheresponse.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
timeoutSECONDS
notimeout
Parameter ParameterDescriptionParameterValue
SECONDS Timeoutvalue 1-4800seconds2413CommandMode
IPSLAConfiguration
Default
Thedefaultvalueis5seconds.
Usage
Thetimeoutvalueshouldfollowthisrule
frequency>interval*(packets-per-test-1)+timeout)
Examples
Inthefollowingexample,thetimeoutcommandisusedtosetthetimerange:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#timeout10
RelatedCommands
showipslamonitor
13.15.8threshold
CommandPurpose
Usethiscommandtosettheupperthresholdvalueforcalculatingnetworkmonitoring
statisticscreatedbyanIPSLAsoperation.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
thresholdMILLISECONDS
nothreshold
Parameter ParameterDescriptionParameterValue2414MILLISECONDS Theupperthresholdvalue
forcalculatingnetwork
monitoringstatistics
createdbyanIPSLAs
operation1-4800000milliseconds
CommandMode
IPSLAConfiguration
Default
Thedefaultvalueis5000milliseconds.
Usage
None
Examples
Inthefollowingexample,thethresholdcommandisusedtosetthethresholdtime
range:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#threshold10000
RelatedCommands
showipslamonitor
13.15.9interval
CommandPurpose
Usethiscommandtosettheintervalbetweenprobeofeachipslatest.
Usethenoformofthiscommandtorestorethedefaultvalue
CommandSyntax
intervalSECONDS2415nointerval
Parameter ParameterDescriptionParameterValue
SECONDS Theintervalbetween
probeofeachipslatest1-4800seconds
CommandMode
IPSLAConfiguration
Default
Thedefaultvalueis6seconds.
Usage
Theintervalvalueshouldfollowthisrule
(frequency>interval*(packets-per-test-1)+timeout)
Examples
InthefollowingexampletheintervalcommandisusedtosettheIPSLAinterval:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#interval10
RelatedCommands
showipslamonitor
13.15.10ttl
CommandPurpose
Usethiscommandtosetthettloficmprequestsendbyipslatest.
Usethenoformofthiscommandtorestorethedefaultvalue.2416CommandSyntax
ttlVALUE
nottl
Parameter ParameterDescriptionParameterValue
VALUE TTLvalue 1-255
CommandMode
IPSLAConfiguration
Default
64
Usage
None
Examples
ThefollowingexampleshowshowtosetTTLforIPSLA:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#ttl100
RelatedCommands
showipslamonitor
13.15.11tos
CommandPurpose
Usethiscommandtosetthetosoficmprequestsendbyipslatest.
Usethenoformofthiscommandtorestorethedefaultvalue.2417CommandSyntax
tosVALUE
notos
Parameter ParameterDescriptionParameterValue
VALUE tosvalue 0-255
CommandMode
IPSLAConfiguration
Default
0
Usage
None
Examples
ThefollowingexampleshowshowtosettosforIPSLA:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#tos100
RelatedCommands
showipslamonitor
13.15.12data-size
CommandPurpose
UsethiscommandtosettheprotocoldatasizeinthepayloadofanIPSLAs
operationsrequestpacket.
Usethenoformofthiscommandtorestorethedefaultvalue.2418CommandSyntax
data-sizeSIZE
nodata-size
Parameter ParameterDescriptionParameterValue
SIZE Theprotocoldatasizein
thepayloadofanIPSLAs
operationsrequestpacket0-8100
CommandMode
IPSLAConfiguration
Default
28
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#data-size100
RelatedCommands
showipslamonitor
13.15.13data-pattern
CommandPurpose
Usethiscommandtosetthehexadecimalvaluefordatapattern.
Usethenoformofthiscommandtorestorethedefaultvalue.2419CommandSyntax
data-patternHEX_STRING
nodata-pattern
Parameter ParameterDescriptionParameterValue
HEX_STRING Hexstringfordatapatten0-0xFFFFFFFF
CommandMode
IPSLAConfiguration
Default
ABCDABCD
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#data-patternabababab
RelatedCommands
showipslamonitor
13.15.14fail-percent
CommandPurpose
Usethiscommandtosetthefailpercentusedtojudgetestresult.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
fail-percentPERCENT2420nofail-percent
Parameter ParameterDescriptionParameterValue
PERCENT Thefailpercentusedto
judgetestresult1-100
CommandMode
IPSLAConfiguration
Default
100
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#fail-percent100
RelatedCommands
showipslamonitor
13.15.15packets-per-test
CommandPurpose
Usethiscommandtosettheprobecountofeachtest.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
packets-per-testNUMBER
nopackets-per-test2421Parameter ParameterDescriptionParameterValue
NUMBER Theprobecountofeach
test1-10
CommandMode
IPSLAConfiguration
Default
3
Usage
Thepackets-per-testvalueshouldfollowthisrule
(frequency>interval*(packets-per-test-1)+timeout)
Examples
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#packets-per-test5
RelatedCommands
showipslamonitor
13.15.16statistics(packet|test)
CommandPurpose
Usethiscommandtosetthestatisticsnumberofpacketandrecenttest.
Usethenoformofthiscommandtorestorethedefaultvalue.
CommandSyntax
statistics(packetPKT_CNT|testTEST_CNT)
nostatisticspacket2422nostatisticstest
Parameter ParameterDescriptionParameterValue
PKT_CNT PacketNumberforstatistic0-1000
TEST_CNT Thecountoftestfor
statistic1-10
CommandMode
IPSLAConfiguration
Default
packet:50;test:5
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#statisticspacket60
Switch(config-ipsla)#statisticstest6
RelatedCommands
showipslamonitor
13.15.17clearipslastatistics
CommandPurpose
Usethiscommandtoclearipslastatistics.
CommandSyntax
clearipslastatisticsENTRY_ID
Parameter ParameterDescriptionParameterValue2423ENTRY_ID IPSLAentryid 1-255
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#clearipslastatistics1
RelatedCommands
showipslamonitor
13.15.18track
CommandPurpose
Toconfigureatrackobject,usethetrackcommandinGlobalConfigurationmode.
CommandSyntax
trackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
CommandMode
GlobalConfiguration2424Default
None
Usage
None
Examples
Inthefollowingexample,thetrackcommandisusedtocreateatrackobject:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#
RelatedCommands
showtrack
13.15.19trackinterfacelinkstate
CommandPurpose
Usethiscommandtocreateatrackobjectandtrackthestateofaninterface
CommandSyntax
trackOBJECT_IDinterfaceIFNAMElinkstate
notrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
IFNAME Interfacename Support
physical/aggregation/loopb
ack/vlan/tunnelports2425CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetrackinterfacelinkstatecommandisusedtocreatean
trackobject:
Switch#configureterminal
Switch(config)#track1interfaceeth-0-1linkstate
Switch(config-track)#
RelatedCommands
showtrack
13.15.20trackrtrreachability
CommandPurpose
Createatrackobjectandtrackthestateofanipslaentry,usethetrackrtr
reachabilitytocommandinGlobalConfigurationmode.Toremoveatrack,usetheno
formofthiscommand.
WhenthestateofIPSLAentryisOKorover-threshold,trackobjectstateisup;
otherwisetrackobjectstateisdown.
CommandSyntax
trackOBJECT_IDrtrENTRY_IDreachability
notrackOBJECT_ID2426Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
ENTRY_ID IPSLAentryid 1-255
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetrackrtrreachabilitycommandisusedtocreateatrack
object:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#exit
Switch(config)#track1rtr1reachability
Switch(config-track)#
RelatedCommands
showtrack
13.15.21trackrtrstate
CommandPurpose
CreateatrackobjectandtrackthestateofanIPSLAentry,usethetrackrtrstate
commandinGlobalConfigurationmode.Toremoveatrack,usethenoformofthis
command.2427WhenthestateofIPSLAentryisOK,trackobjectstateisup;otherwisetrackobject
stateisdown.
CommandSyntax
trackOBJECT_IDrtrENTRY_IDstate
notrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
ENTRY_ID IPSLAentryid 1-255
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetrackrtrstatecommandisusedtocreateatrackobject:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#exit
Switch(config)#track1rtr1state
Switch(config-track)#
RelatedCommands
showtrack242813.15.22trackbfd
CommandPurpose
Createatrackobjectandtrackthestateofbfdsession,usethetrackbfdcommand
inGlobalConfigurationmode.Toremoveatrack,usethenoformofthiscommand.
Whenthestateofbfdsessionisup,trackobjectstateisup;otherwisetrackobject
stateisdown.
CommandSyntax
trackOBJECT_IDbfdsourceinterfaceIFNAMEdestinationIP_ADDR
notrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
IFNAME Interfacename Support
physical/aggregation/vlan/
ports
IP_ADDR DestinationIPaddressof
thebfdsessionIPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
ThesourceinterfaceshouldbeaLayer3interfaceandipaddressshouldbe
configured.
Thedestinationipaddressshouldbeinthesamenetworkoftheinterfaceipaddress.2429Examples
Inthefollowingexample,thetrackbfdcommandisusedtocreateatrackobject:
Switch#configureterminal
Switch(config)#interfaceeth-0-9
Switch(config-if)#noswitchport
Switch(config-if)#noshutdown
Switch(config-if)#ipaddress9.9.9.1/24
Switch(config-if)#quit
Switch(config)#track1bfdsourceinterfaceeth-0-9destination9.9.9.2
Switch(config-track)#
RelatedCommands
showtrack
13.15.23trackbfdsession
CommandPurpose
Createatrackobjectandtrackthestateofbfdsession,usethetrackbfdsession
commandinGlobalConfigurationmode.Toremoveatrack,usethenoformofthis
command.
Whenthestateofbfdsessionisup,trackobjectstateisup;otherwisetrackobject
stateisdown.
CommandSyntax
trackOBJECT_IDbfdsessionSESSION_NAME
notrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
SESSION_NAME BFDsessionname Stringwithupto16
characters
CommandMode
GlobalConfiguration2430Default
None
Usage
Thebfdsessionshouldbecreatedbeforethiscommandconfigure.
Examples
Inthefollowingexample,thetrackbfdsessioncommandisusedtocreateatrack
object:
Switch#configureterminal
Switch(config)#bfdtestpeer-ip9.9.9.2source10.10.10.1local10remote20
Switch(config)#track1bfdsessiontest
Switch(config-track)#
RelatedCommands
showtrack
13.15.24trackcfm
CommandPurpose
Createatrackobjectandtrackthestateofcfm,usethetrackcfmcommandinGlobal
Configurationmode.Toremoveatrack,usethenoformofthiscommand.
Whenthestateofcfmisup,trackobjectstateisup;otherwisetrackobjectstateis
down.
CommandSyntax
trackOBJECT_IDcfmdomainDOMAIN_NAMEserviceCSI_ID(rmepidMEPID|)
(rdi-trigger|)
notrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-5002431DOMAIN_NAME Maintenancedomain
nameStringwithupto43
characters
CSI_ID Maintenanceassociation
nameThefirstcharactershould
bea-zorA-Z,character
onlycanbe0-9A-Za-z.-_
andthemaxlenis43.
MD(Maintenancedomain)
nameand
MA(Maintenance
association)nametotally
upto44characters.
MEPID Remotemepid 1-8191
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetrackcfmcommandisusedtocreateatrackobject:
Switch#configureterminal
Switch(config)#track1cfmdomaintstservicetst
RelatedCommands
showtrack243213.15.25typeicmp-echo
CommandPurpose
UsethiscommandtodefinesanEchooperationwithICMPpacketandenters
destinationIPaddress
UsethenoformofthiscommandtodeleteanEchooperationanddestinationIP
address.
CommandSyntax
typeicmp-echoIP_ADDR(source-interfaceIFNAME|)(source-ipSRC_IP_ADDR|)
notypeicmp-echo
Parameter ParameterDescriptionParameterValue
IP_ADDR DestionationIPaddressof
sendingicmppacketIPv4Address
source-interfaceIFNAMESourceinterfaceof
sendingicmppacketSupport
physical/aggregation/vlan/
ports
SRC_IP_ADDR SourceIPaddressof
sendingicmppacketIPv4Address
CommandMode
IPSLAConfiguration
Default
None
Usage
Iftheinterfacespecifiedbysource-interfaceisnotoneoftheoutinterfacesbyrouting,
packetsmaynotbesentout.2433Examples
Inthefollowingexample,thetypeechoprotocolipIcmpEchocommandisusedtoset
ICMPpacketanddestinationIPaddress:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#typeicmp-echo192.168.0.1
RelatedCommands
showipslamonitor
13.15.26showipslamonitor
CommandPurpose
ToshowIPSLAentries,packetstatisticsandrecenttestresult,useshowipsla
monitorinEXECmode.
CommandSyntax
showipslamonitor(ENTRY_ID)(statistics(packet|test)|)
Parameter ParameterDescriptionParameterValue
ENTRY_ID Entrynumberisusedto
identifyipslamonitor
entry,itsrangeisfrom1to
2551-255
CommandMode
PrivilegedEXEC
Default
None
Usage
None2434Examples
Inthefollowingexample,theshowipslamonitorcommandisusedtoshowipsla
monitorentries:
Switch#showipslamonitor
Entry1
Type Echo
Adminstate Enable
Destinationaddress192.168.0.1
Frequency 3seconds
Timeout 2seconds
Threshold 1seconds
RunningFrequency3seconds
Vrf vpn1
Returncode OK
RelatedCommands
ipslamonitor
13.15.27showtrack
CommandPurpose
ToshowTRACKentries,useshowtrackinEXECmode.
CommandSyntax
showtrackOBJECT_ID
Parameter ParameterDescriptionParameterValue
OBJECT_ID Objectidentityisusedto
identifytrackobject1-500
CommandMode
PrivilegedEXEC
Default
None2435Usage
None
Examples
Inthefollowingexample,theshowtrackcommandisusedtoshowtrackentries:
Switch#showtrack
Track2
Type :ResponseTimeReporter(RTR)Reachability
Interface:eth-0-2
State :down
Delayup:30seconds
Delaydown:30seconds
RelatedCommands
track
13.15.28vrf
CommandPurpose
TouseIPSLAoperationsinVPNs,usevrfinipslamode.ToremoveVPNfeathers
fromIPSLAoperations,usethenoformofthiscommand.
CommandSyntax
vrfNAME
novrf
Parameter ParameterDescriptionParameterValue
NAME VRFname Stringwithupto15
characters
CommandMode
IPSLAConfiguration2436Default
None
Usage
None
Examples
Inthefollowingexample,thevrfcommandisusedtouseipslamonitorentryinVPN:
Switch#configureterminal
Switch(config)#ipslamonitor1
Switch(config-ipsla)#vrfvpn1
RelatedCommands
showipslamonitor
13.16VARPCommands
13.16.1ipvirtual-routermac
CommandPurpose
Usethiscommandtoconfigureavirtualmacforswitch.
Usethenoformofthiscommandtoremovethevirtual-routermac.
CommandSyntax
ipvirtual-routermacmac-addr
noipvirtual-routermac
Parameter ParameterDescriptionParameterValue
mac-addr Virtualmacaddress MACAddress
CommandMode
GlobalConfiguration2437Default
None
Usage
ThisvirtualmacisusedforinterfaceconfiguredvirtualIPaddress.Theaddressis
receive-only;theswitchneversendspacketswiththisaddressasthesource.Andit
onlyexistsinARPreplayforvirtualIP.
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#configureterminal
Switch(config)#ipvirtual-routermac1.1.1
RelatedCommands
ipvirtual-routeraddress
13.16.2ipvirtual-routeraddress
CommandPurpose
UsethiscommandtoconfigureavirtualIPaddressforinterface.
Usethenoformofthiscommandtoremovethevirtual-routerIP.
CommandSyntax
ipvirtual-routeraddress(A.B.C.D|A.B.C.D/M)
noipvirtual-routeraddress
Parameter ParameterDescriptionParameterValue
A.B.C.D VirtualIPaddresswithout
maskIPv4Address
A.B.C.D/M VirtualIPaddresswith
maskIPv4Addressandmask
length2438CommandMode
InterfaceConfiguration
Default
None
Usage
Theipvirtual-routeraddresscommandassignsavirtualIPaddresstotheinterface.
ThevirtualIPaddresswithoutmaskshouldbeinthesubnetoftheprimaryIP
addressassignedtotheinterfaceandthevirtualIPaddresswithmaskshouldnotbe
inthesubnetoftheprimaryIPaddressassignedtotheinterface.ThevirtualIP
addresswithoutmaskandthevirtualIPaddresswithmaskmustbeselectedonly
onetobeconfigured.ifvirtualmacisnotconfigured,thereisnoreplytoARPrequest
packetforthevirtualIPaddress.
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipvirtual-routeraddress1.1.1.1
RelatedCommands
ipvirtual-routermac
13.17IPBFDCommands
13.17.1bfdinterval
CommandPurpose
Usethiscommandtospecifythedesiredtransmitinterval,receiveintervalanddetect
multiplierofIPBFDontheinterface.
Usethenoformofthiscommandtorestorethedefaultvalue.2439CommandSyntax
bfdinterval{txMINTX|rxMINRX|multiplierMULTIPLIER}
nobfdinterval
Parameter ParameterDescriptionParameterValue
MINTX SetBFDminimumtrasmit
interval3-1000millisecond
MINRX SetBFDminimumreceive
interval3-1000millisecond
MULTIPLIER SetthevalueofHello
Multiplier2-15
CommandMode
InterfaceConfiguration
Default
Thedefaultvalueforminimumtxintervalandrxintervalis20ms.
Thedefaultvaluefordetectmultipleis3.
Usage
Usethiscommandtospecifythetransmitinterval,receiveintervalanddetectmultiple
ofIPBFDontheinterface.
ThisconfigurationshouldaffectalltheIPBFDsessionsonthisinterface.Theactual
transmitintervalandreceiveintervalneedtonegotiatewithanotherendofthe
session.
Examples
Inthefollowingexample,thedesiredtransmitintervalissetas3ms,thedesired
receiveintervalissetas3ms,thedetectmultiplierissetas3times:2440Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#bfdintervalmintx3minrx3multiplier3
RelatedCommands
None
13.17.2bfdNAMEpeer-ipA.B.C.Dinterface
CommandPurpose
UsethiscommandtoconfigureoneSingle-hopIPBFDsession.
Usethenoformofthiscommandtoremovethesession
CommandSyntax
bfdNAMEpeer-ipA.B.C.D(vrfNAME|)interface(IFPHYSICAL|IFVLAN|IFAGG)
(source-ipA.B.C.D|)(auto|localLDISRremoteRDISR)
nobfdNAME
Parameter ParameterDescriptionParameterValue
peer-ipA.B.C.D BFDdestinationipaddressIPv4Address
vrfNAME specifyavrfforbfd -
interface specifyaninterfacefor
singlehopbfd-
Source-ipA.B.C.D specifysourceipaddressIPv4Address
auto Allocatinglocal
discriminatorbysystem-
LDISR specifylocaldiscriminator
byusers1-8191
RDISR specifylocaldiscriminator
byusers1-81912441CommandMode
GlobalConfiguration
Default
BydefaultthereisnoIPSingleBFDsessiontobecreated.
Usage
UsethiscommandtospecifytheIPBFDforstaticroute.BFDsessioniscreated,the
bfdconfigurationsneedmeetthefollowingconditions:
Thedestinationipaddressshouldbesubnetwiththeipaddressofthebindedinterface.
Thespecifiedvrfshouldbesameasthatofthebindedinterface.Ifusersdontspecifythevrf,the
bfdvrfwouldbedefault.
Thesourceipaddressshouldbesameasthatofthebindedinterface.Ifusersdontspecifythe
sourceipaddress,thesourceipwouldbegotfromthebindedinterface,whichissubnetwiththe
destinationipaddress.Iftherearemanyipaddressesofthebindedinterfacesubnetthethe
destinationipaddress,theprimaryipaddresswouldbeselectedfirstly,andthesmallervaluesof
theipaddersswouldbechosensecondly.
Ifusersspecifythelocalandremotediscriminator,bfdusesthem.Otherwise,thebfd
localdiscriminatorwouldbeallocatedbysystem.
Examples
Inthefollowingexample,thesingle-hopIPbfdsessiontestiscreated:
Switch#configureterminal
Switch(config)#bfdtestpeer-ip9.9.9.2interfaceeth-0-9local10remote20
RelatedCommands
iproute
13.17.3bfdNAMEpeer-ipA.B.C.Dsource-ip
CommandPurpose
UsethiscommandtoconfigureoneMulti-hopIPBFDsession.2442Usethenoformofthiscommandtoremovethisconfiguration.
CommandSyntax
bfdNAMEpeer-ipA.B.C.Dsource-ipA.B.C.D(auto|localLDISRremoteRDISR)
nobfdNAME
Parameter ParameterDescriptionParameterValue
NAME BFDname Stringwithupto16
characters
peer-ipA.B.C.D BFDdestinationipaddressIPv4Address
Source-ipA.B.C.D specifysourceipaddressIPv4Address
auto Allocatinglocal
discriminatorbysystem-
LDISR specifylocaldiscriminator
byusers1-8191
RDISR specifylocaldiscriminator
byusers1-8191
CommandMode
GlobalConfiguration
Default
BydefaultthereisnoIPMultipleBFDsessiontobecreated.
Usage
UsethiscommandtospecifytheIPBFDforstaticroute.BFDsessioniscreated,the
bfdconfigurationsneedmeetthefollowingconditions:
1.ThesourceipaddressshouldbesameasthatofthelocalL3interface.
Ifusersspecifythelocalandremotediscriminator,bfdusesthem.Otherwise,thebfd
localdiscriminatorwouldbeallocatedbysystem.2443Examples
Inthefollowingexample,themulti-hopIPbfdsessiontestiscreated:
Switch#configureterminal
Switch(config)#bfdtestpeer-ip9.9.9.2source10.10.10.1local10remote20
RelatedCommands
iproute
13.17.4iproute
CommandPurpose
UsethiscommandtospecifytobindIPBFDsessionforstaticroute.
Usethenoformofthiscommandtoremovethisconfiguration.
CommandSyntax
iproutePREFIXNEXTHOPbindbfdNAME
noiprouteprefixnexthopbindbfd
Parameter ParameterDescriptionParameterValue
PREFIX IPdestinationprefix
(e.g.10.0.0.0/8)IPv4Addressandmask
length
NEXTHOP IPgatewayaddress -
NAME bfdsessionname Stringwithupto16
characters
CommandMode
GlobalConfiguration
Default
BydefaultthereisnoIPBFDsessiontobebindedwithonestaticroute.2444Usage
UsethiscommandtobindanexistentIPBFDsessionforstaticroute.Thesession
shouldbecreatebeforeusethiscommand.
Whentheipstaticrouteisdeleted,thesessionshouldbedetachfromtheroute,but
notdestroyed.
Examples
Inthefollowingexample,theIPbfdsessiontestisboundtothestaticrouter
1.1.1.0/24via9.9.9.2:
Switch#configureterminal
Switch(config)#iproute1.1.1.0/249.9.9.2bindbfdtest
RelatedCommands
iproute
13.17.5bfdsetinterval
CommandPurpose
Usethiscommandtoconfiguretheintervalofsendingandreceivingbfdpacketsfor
bfdsession.
Usethenoformofthiscommandtoremovethisconfiguration.
CommandSyntax
bfdsetintervalmintxMINTXminrxMINRXmultiplierMULTIPLIER
nobfdsetinterval
Parameter ParameterDescriptionParameterValue
MINTX Theminimumintervalof
sendingbfdpackets3-1000millisecond
MINRX Theminimumintervalof
receivingbfdpackets3-1000millisecond2445MULTIPLIER thetimesoftimeout 2-15
CommandMode
BFDConfiguration
Default
Bydefault,theminimumtimeofsendingandreceivingpacketsarerespectively20ms
and20ms,thetimesoftimeoutis3.
Usage
Usethiscommandtospecifythemintx,minrxandtimeoutofbfdsession.
Examples
Inthefollowingexample,settheintervalofsendingandreceivingbfdpacketsforbfd
sessiontest:
Switch#configureterminal
Switch(config)#bfdtest
Switch(config-ip-bfd)bfdsetintervalmintx30minrx30multiplier5
RelatedCommands
showbfdsessiondetail
13.17.6bfdglobaldscp
CommandPurpose
Usethiscommandtoconfigureglobaldscpvalueforallmulti-hopbfdsessions.
Usethenoformofthiscommandtoremovethisconfiguration.
CommandSyntax
bfdsetdscpDSCP
nobfdglobaldscp2446Parameter ParameterDescriptionParameterValue
DSCP thedscpvalueofbfd
packetinIPhead0-63
CommandMode
GlobalConfiguration
Default
Bydefault,thedscpvalueofallthemulti-hopbfdsessionsis56.
Usage
Usethiscommandtospecifythedscpforallthemulti-hopbfdsessions.
Examples
Inthefollowingexample,userconfigurestosettheglobaldscpvalueforallthemulti-
hopforallthebfdsessions:
Switch#configureterminal
Switch(config)#bfdglobaldscp63
RelatedCommands
showbfdsessiondetail
13.17.7bfdsetdscp
CommandPurpose
Usethiscommandtoconfigureglobaldscpvalueforonemulti-hopbfdsession.
Usethenoformofthiscommandtoremovethisconfiguration.
CommandSyntax
bfdsetdscpDSCP
nobfdsetdscp2447Parameter ParameterDescriptionParameterValue
DSCP thedscpvalueofbfd
packetinIPhead0-63
CommandMode
BFDConfiguration
Default
Bydefault,thedscpvalueofonemulti-hopbfdsessionsis56.
Usage
Usethiscommandtospecifythedscpforonemulti-hopbfdsession.
Whenremovingthisconfiguration,thedscpofthismultiplierbfdsessionwouldbethe
globaldscpvaluewhenconfiguringtheglobaldscp.
Examples
Inthefollowingexample,userconfigurestosettheglobaldscpvalueforallthemulti-
hopforallthebfdsessions:
Switch#configureterminal
Switch(config)bfdtest
Switch(config-ip-bfd)#bfdsetdscp63
RelatedCommands
showbfdsessiondetail
13.17.8showbfd
CommandPurpose
UsethiscommandtoshowthestatuesofIPBFDmodule.
CommandSyntax
showbfd2448CommandMode
PrivilegedEXEC
Default
N/A
Usage
UsethiscommandtoshowthestatuesofIPBFDmodule.
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#showbfd
BFDID:00StartTime:ThuMay203:09:412013
NumberofSessions:2
SlowTimer:1000Imagetype:DISTRIBUTED
EchoMode:DisabledBFDNotificationsdisabled
NextSessionDiscriminator:10
BFDClients:
STATIC->ClientID:1
OSPF->ClientID:4
RelatedCommands
None
13.17.9showbfdstaticconfigurations
CommandPurpose
Usethiscommandtoshowthebfdstaticconfigurations.
CommandSyntax
showbfdstaticconfigurations(word|)
CommandMode
PrivilegedEXEC2449Default
N/A
Usage
Usethiscommandtoshowthebfdstaticconfigurations.
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#showbfdstaticconfigurations
--------------------------------------------------------------------------------------------------------------------------------
NameTypeVRF LocalDiscrRemoteDiscrSrcIpDstIpinterfaceStatus
test1single-hopdefault--10.10.10.110.10.10.2vlan10active
test2single-hoptest--9.9.9.19.9.9.2vlan4094active
test3single-hopdefault8191429496729510.10.10.110.10.10.3vlan10active
RelatedCommands
None
13.17.10showbfdsession
CommandPurpose
Usethiscommandtoshowthebfdsessions.
CommandSyntax
showbfdsession(detail|)
showbfdsessionSRCDSTinterfaceIFNAME(detail|)
showbfdsessionSRCDST(detail|)
showbfdsessiondiscriminatorSESS(detail|)
Parameter ParameterDescriptionParameterValue
detail Showsessiondetails -
SRC LocalIPv4address IPv4Address2450DST NeighborIPv4addressIPv4Address
IFNAME BFDInterface Support
physical/aggregation/vlan/
ports
discriminatorSESS BFDsessionindex 1-4294967295
CommandMode
PrivilegedEXEC
Default
N/A
Usage
Usethiscommandtoshowthebfdsession.
Usethekeyworddetailtoshowthedetailedinformation.
Tofiltertheshowresult,usercanspecifythesessionssourceanddestination
addressandinterface.
Examples
Thefollowingexampleistheresultofthiscommand::
DUT1#showbfdsession
Abbreviation:
LD:LocalDiscriminator.RD:RemoteDiscriminator
S:Singlehopsession.M:Multihopsession.
SD:StaticDiscriminator.DD:DynamicDiscriminator
A:Admindown.D:Down.I:Init.U:Up.
============================================================================
LDRDTYPESTUP-TimeRemote-AddrVRF
81914294967295S-SDD00:00:0010.10.10.3default
81920S-DDD00:00:0011.11.11.2yoush
81930S-DDD00:00:0010.10.10.2default
81940S-DDD00:00:009.9.9.2test
NumberofSessions:4
DUT1#showbfdsessiondetail
======================================================
SessionInterface:vlan10 SessionName:test32451LowerLayer:IPv4 Version:1
SessionType:SingleHop SessionState:Down
DiscriminatorType:StaticDSCP:0
LocalDiscriminator:8191 LocalAddress:10.10.10.1
RemoteDiscriminator:4294967295RemoteAddress:10.10.10.3
LocalPort:49155 RemotePort:3784
vrf:default
Diagnostics:None
TimersinMilliseconds:
MinTx:20 MinRx:20 Multiplier:3
NegTx:4 NegRx:20 Negdetectmult:3
Sessuptime:00:00:00
Sessdowntime:00:00:00
BindApplication:-
----------------------------------------------------------
SessionInterface:vlan11 SessionName:-
LowerLayer:IPv4 Version:1
SessionType:SingleHop SessionState:Down
DiscriminatorType:DynamicDSCP:0
LocalDiscriminator:8192 LocalAddress:11.11.11.1
RemoteDiscriminator:0 RemoteAddress:11.11.11.2
LocalPort:49152 RemotePort:3784
vrf:yoush
Diagnostics:None
TimersinMilliseconds:
MinTx:20 MinRx:20 Multiplier:3
NegTx:4 NegRx:20 Negdetectmult:3
Sessuptime:00:00:00
Sessdowntime:00:00:00
BindApplication:VRRP
----------------------------------------------------------
RelatedCommands
None
13.17.11showresourcebfdstaticconfigurations
CommandPurpose
Usethiscommandtoshowtheresourceofstaticbfdconfigurations
CommandSyntax
showresourcebfdstaticconfigurations
CommandMode
UserEXEC2452Default
None
Usage
UsethiscommandtoshowtheresourceofstaticBFDconfigurations
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#showresourcebfdstaticconfigurations
Switch#showresourcebfdstaticconfigurations
BFD(Static-BFD,Vrrp-BFD)
Resource UsedCapability
=============================================================
BFDstaticconfiguration
RelatedCommands
None
13.17.12showbfdinterface
CommandPurpose
UsethiscommandtoshowtheIPbfdinterfacestatues.
CommandSyntax
showbfdinterface(IFNAME|all|)
Parameter ParameterDescriptionParameterValue
IFNAME BFDInterface Support
physical/aggregation/vlan/
ports
CommandMode
PrivilegedEXEC2453Default
N/A
Usage
UsethiscommandtoshowtheIPbfdinterfacestatues.
Usercanshowthespecifiedinterfaceorallinterfaces.
Examples
Thefollowingexampleistheresultofthiscommand:
Switch#showbfdinterfaceeth-0-9
Interface:eth-0-9ifindex:9state:UP
Interfacelevelconfiguration:NOECHO,NOSLOWTMR
TimersinMilliseconds
MinTx:1MinRx:1Multiplier:3
----------------------------------------------------------
NumberofSessions:2
BFDdiscriminator:8193BFDstate:DOWN
BFDdiscriminator:8191BFDstate:DOWN
RelatedCommands
None
13.18UDPHelperCommands
13.18.1ipudp-helperenable
CommandPurpose
Usethiscommandtoenabletheudp-helper.
CommandSyntax
ipudp-helperenable
CommandMode
GlobalConfiguration2454Default
Disable
Usage
Whenipudp-helperisenabled,thedefaultudpdestportof37,49,53,69,137,138
willbeconfigured.
Examples
Thisexampleshowshowtoenableipudp-helper:
Switch#configureterminal
Switch(config)#ipudp-helperenable
RelatedCommands
N/A
13.18.2ipudp-helperdisable
CommandPurpose
Usethiscommandtodisabletheudp-helper.
CommandSyntax
ipudp-helperdisable
CommandMode
GlobalConfiguration
Default
Disable
Usage
Whenipudp-helperisdisabled,theallconfiguredudpdestportwillbecleared.2455Examples
Thisexampleshowshowtoenableattacktrace:
Switch#configureterminal
Switch(config)#ipudp-helperdisable
RelatedCommands
N/A
13.18.3ipudp-helperport
CommandPurpose
Usethiscommandtoconfiguretheudphelperport.Usethenoformofthiscommand
tounsettheudphelperport.
CommandSyntax
ipudp-helperport(NUM|dns|netbios-ds|netbios-ns|tacacs|tftp|time)
noipudp-helperport(NUM|dns|netbios-ds|netbios-ns|tacacs|tftp|time)
Parameter ParameterDescriptionParameterValue
NUM UDPDestinationPortNUM<1-65535>
dns DomainNameService(53)-
netbios-ds NetBiosdatagram
service(138)-
netbios-ns NetBiosname
service(137)-
tacacs TACAccessControl
System(49)-
tftp TrivialFileTransfer
Protocol(69)-
time Timeservice(37) -2456CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigureudp-helperport:
Switch#configureterminal
Switch(config)#ipudp-helperport30
Thisexampleshowshowtounconfigureudp-helperport:
Switch#configureterminal
Switch(config)#noipudp-helperport30
RelatedCommands
N/A
13.18.4ipudp-helperserver
CommandPurpose
Usethiscommandtoconfiguretheudp-helperserveriponinterface.Usethenoform
ofthiscommandtocleartheudp-helperserveriponinterface.
CommandSyntax
ipudp-helperserverIP_ADDR
ipudp-helperserver(IP_ADDR|)
Parameter ParameterDescriptionParameterValue2457IP_ADDR IPv4address -
CommandMode
InterfaceConfiguration
Default
None
Usage
Theudp-helperserveripcanonlyconfiguredonL3physicalportorL3aggportor
vlaninterface.
Aggmemberportcantbeconfigured.
Examples
Thisexampleshowshowtoconfigureudp-helperserver1.1.1.1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipudp-helperserver1.1.1.1
Thisexampleshowshowtoclearudp-helperserver1.1.1.1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#noipudp-helperserver1.1.1.1
RelatedCommands
N/A
13.18.5showipudp-helperserver
CommandPurpose
Usethiscommandtodisplaytheudp-helperserverinformation.2458CommandSyntax
showipudp-helperserverinterfaceIFMANE|
Parameter ParameterDescriptionParameterValue
IFMANE InterfaceName -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheudp-helperserverinformation:
Switch#showipudp-helperserver
Switch#showipudp-helperserver
InterfaceServerIPPacketReceivedPacketDropped
--------------+----------------+---------------+---------------
eth-0-11.1.1.10 0
RelatedCommands
N/A
13.18.6showresourceudp-helper
CommandPurpose
Usethiscommandtodisplaytheresourceofudp-helperport.2459CommandSyntax
showresourceudp-helper
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheresourceofudp-helperportinformation:
Switch#showresourceudp-helper
Switch#showresourceudp-helper
Udp-Helper
Resource UsedCapability
=============================================================
Udp-HelperPort 6184
RelatedCommands
N/A
13.18.7clearipudp-helperstatistics
CommandPurpose
Usethiscommandtoclearthestatisticsofudp-helper.
CommandSyntax
clearipudp-helperstatistics2460CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoclearudp-helperstatisticsoninterface:
Switch#clearipudp-helperstatistics
RelatedCommands
N/A246114DeviceManagementCommands
14.1STMCommands
14.1.1stmprefer
CommandPurpose
UsethestmpreferGlobalConfigurationcommandtoconfiguretheprofileusedin
SwitchTableManagement(STM)resourceallocation.Youcanuseprofiletoallocate
systemmemorytobestsupportthefeaturesbeingusedinyourapplication.Use
profiletoapproximatethemaximumnumberofunicastMACaddresses,qualityof
service(QoS)accesscontrolentries(ACEs)andunicastroutes.Usethenoformof
thiscommandtoreturntothedefaultprofile.
CommandSyntax
stmprefer(default|layer2|layer3|ipv6|l2vpn)
nostmprefer
Parameter ParameterDescriptionParameterValue
default Providebalancetoall
features-
layer2 ProvidemaximumFDB
entries.Thisprofile
maximizessystemmemory
foruseasaLayer2switch-2462layer3 ProvidemaximumHost
Route/IndirectRoute
entries.Youwouldtypically
usethisprofileforarouter
oraggregatorinthemiddle
ofanetwork-
ipv6 Unicastbias,supporting
moreIPv6UcastRoutes.
Thisprofileisonlyexisted
whenIPv6featureis
supported.-
l2vpn Providemaximumsystem
utilizationforVPWS/VPLS
withmore
MPLS/MAC/USERID
entries.Youwouldtypically
usethisprofileforarouter
oraggregatorinthemiddle
ofanetwork-
CommandMode
GlobalConfiguration
Default
Systemusethedefaultprofilewhenfirstbootup,thisprofilebalanceallthefeatures.
Usage
Usersmustreloadtheswitchfortheconfigurationtotakeeffect.
Examples
Thisexampleshowshowtoconfiguretheipv4profileontheswitch.Youcanverify
yoursettingsbyenteringtheshowstmpreferinprivilegedEXECmode:2463Switch#configureterminal
Switch(config)#stmpreferlayer3
Switch(config)#exit
Switch#reload
RelatedCommands
showstmprefer
14.1.2showstmprefer
CommandPurpose
UsetheshowstmpreferprivilegedEXECcommandtodisplayinformationaboutthe
profilesthatcanbeusedtomaximizesystemresourcesforaparticularfeature,or
usethecommandwithoutakeywordtodisplaytheprofileinuse.
CommandSyntax
showstmprefer(default|layer2|layer3|ipv6|l2vpn)
nostmprefer
Parameter ParameterDescriptionParameterValue
default Providebalancetoall
features-
layer2 ProvidemaximumFDB
entries.Thisprofile
maximizessystemmemory
foruseasaLayer2switch-
layer3 ProvidemaximumHost
Route/IndirectRoute
entries.Youwouldtypically
usethisprofileforarouter
oraggregatorinthemiddle
ofanetwork-2464ipv6 Unicastbias,supporting
moreIPv6UcastRoutes.
Thisprofileisonlyexisted
whenIPv6featureis
supported.-
l2vpn Providemaximumsystem
utilizationforVPWS/VPLS
withmore
MPLS/MAC/USERID
entries.Youwouldtypically
usethisprofileforarouter
oraggregatorinthemiddle
ofanetwork-
CommandMode
PrivilegedEXEC
Default
None
Usage
IfyoudidnotreloadtheswitchafterenteringthestmpreferGlobalConfiguration
command,theshowstmpreferprivilegedEXECcommanddisplaystheprofile
currentlyinuseandnotthenewlyconfiguredprofile.
Thenumbersdisplayedforeachprofilerepresentanapproximatemaximumnumber
foreachfeatureresource.
Examples
Thisisanexampleofoutputfromtheshowstmprefercommand,displayingthe
profilecurrentlyinuse:
Switch#showstmprefer
Currentprofileis:default
numberofvlaninstance :1/40942465numberofvlanstats :0/128
numberofunicastmacaddress :0/32768
numberofmulticastmacaddress :0/2048
numberofblackholemacaddress :0/128
numberofmaxappliedvlanmapping :0/1024
numberofbfdsessions :0/128
numberofCFMloacl&remoteMEPs :0/1024
numberofCFMlm :0/256
numberofCFMlck :0/24
numberofG8031groups :0/256
numberofG8032rings :0/256
numberofG8032memberports :0/256
numberofmacbasedvlanclass :0/512
numberofipv4basedvlanclass :0/512
numberofipv6basedvlanclass :0/0
numberofdot1xmacbased :0/256
numberofunicastipv4hostroutes :0/3072
numberofunicastipv4indirectroutes :0/6144
numberofunicastipv4policybasedroutes:0/128
numberofunicastipv6hostroutes :0/0
numberofunicastipv6indirectroutes :0/0
numberofunicastecmpgroups :0/240
numberofunicastiptunnelpeers :0/8
numberofmulticastipv4routes :0/1023
numberofmvrentries :0/511
numberofmvr6entries :0/0
numberofmulticastipv6routes :0/0
numberofipv4sourceguardentries :0/1024
numberofingresssecurityaclflowentries:0/2464
numberofingresssecurityaclflowstats:0/1022
numberofingressqosflowentries :0/1280
numberofingressqosflowstats :0/511
numberofingresstelnetflowentries :0/64
numberofingresssshflowentries :0/64
numberofingresswormanti-attackflowentries:0/32
numberofingressipfixflowentries :0/256
numberofingressudfaclflowentries :0/64
numberofingressudfaclflowstats :0/64
numberofingresscoppflowentries :0/251
numberofingresscoppflowstats :0/251
numberofegresssecurityaclflowentries:0/928
numberofegresssecurityaclflowstats :0/511
numberofegressipfixflowentries :0/512
numberoflinkaggregation(static&lacp):0/64
numberofipfixcache :0/4096
numberofmkapolicy :1/64
numberofmacsecinterface :0/32
RelatedCommands
stmprefer246614.2SyslogCommands
14.2.1clearloggingbuffer
CommandPurpose
Toclearmessagesfromtheloggingbuffer,usetheclearloggingbuffercommandin
PrivilegedEXECmode.
CommandSyntax
clearloggingbuffer
CommandMode
PrivilegedEXEC
Default
None
Usage
Clearlogmessagesinloggingbuffer
Examples
Thefollowingshowshowtoclearloggingbuffer:
Switch#clearloggingbuffer
RelatedCommands
showloggingbuffer
14.2.2loggingalarm-trap
CommandPurpose
Tolimitmessagesloggedtothesyslogserversbasedonseverity,usethelogging
alarm-trapcommandinGlobalConfigurationmode.Torestorethedefaultlevel,use
thenoformofthiscommand.2467CommandSyntax
loggingalarm-trap(enable|disable|level(high|lower|middle|minor))
nologgingalarm-traplevel
Parameter ParameterDescriptionParameterValue
enable Enableloggingtraps -
disable Disableloggingtraps -
levelhigh Thehighalarmlevel -
levellower Theloweralarmlevel.-
levelmiddle Themiddlealarmlevel-
levelminor Theminoralarmlevel-
CommandMode
GlobalConfiguration
Default
Loggingtrapisdisabled.
Usage
Atrapisanunsolicitedmessagesenttoaremotenetworkmanagementhost.
LoggingtrapsshouldnotbeconfusedwithSNMPtraps.
Examples
Thefollowingshowshowtolimitmessagesloggedtothelogserversbasedon
severity:
Switch#configureterminal
Switch(config)#loggingalarm-trapenable
Switch(config)#loggingalarm-traplevelhigh
RelatedCommands
loggingalarm-traplevelmiddle246814.2.3loggingfile
CommandPurpose
Toenablewritinglogsintofiles,usetheloggingfilecommandinGlobalConfiguration
mode.
CommandSyntax
loggingfile(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enablewritinglogstofile-
disable Disablewritinglogstofile-
CommandMode
GlobalConfiguration
Default
Loggingfileisenabled
Usage
Ifloggingfilewillenabled,thelogwillbesavedtoflash:/syslogevery6hours.
Examples
Thefollowingshowshowtoenableloggingfilefunction:
Switch#configureterminal
Switch(config)#loggingfileenable
RelatedCommands
showlogging246914.2.4logginglevelfile
CommandPurpose
Tosetseveritylevelwhilewritinglogsintofiles,usethelogginglevelfilecommandin
GlobalConfigurationmode.Toreturntheloggingtothedefaultlevel,usethenoform
ofthiscommand.
CommandSyntax
logginglevelfile(alert|critical|debug|emergency|error|information|notice|
warning|SEVERITY_LEVEL)
nologginglevelfile
Parameter ParameterDescriptionParameterValue
0|emergency Systemisunusable -
1|alert Immediateactionneeded-
2|critical Criticalconditions -
3|error Errorconditions -
4|warning Warningconditions -
5|notice Normalbutsignificant
conditions-
6|information Informationalmessages-
7|debug Debuggingmessages-
SEVERITY_LEVEL Severitylevel 0-7
CommandMode
GlobalConfiguration
Default
Loggingfilelevelisinofrmation.2470Usage
Specifyingaseverity-levelcausesmessagesonlyatthatlevelandnumericallylower
levelstofiles.
Examples
Inthefollowingexample,theuserspecifiesthatonlymessagesofthelevelserror,
critical,alerts,andemergencybeloggedtofiles:
Switch#configureterminal
Switch(config)#logginglevelfile3
RelatedCommands
logginglevelmodule
14.2.5loggingbuffer
CommandPurpose
Tosetthenumberoflogssavedinsystembuffer,usetheloggingbuffercommandin
GlobalConfigurationmode.Toreturntheloggingtothedefaultvalue,usethenoform
ofthiscommand.
CommandSyntax
loggingbufferBUFFERSIZE
nologgingbuffer
Parameter ParameterDescriptionParameterValue
BUFFERSIZE loggingbuffersize 10-1000
CommandMode
GlobalConfiguration
Default
5002471Usage
SpecifyingthemaxnumberofmessagesshowedinCLIshowloggingbuffer.
Examples
Inthefollowingexample,theusersave1000loggingentriesinsystem:
Switch#configureterminal
Switch(config)#loggingbuffer1000
RelatedCommands
showloggingbuffer
14.2.6logginglevelmodule
CommandPurpose
Tosetseveritylevel,usethelogginglevelmodulecommandinGlobalConfiguration
mode.Toreturntheloggingtothedefaultlevel,usethenoformofthiscommand.
CommandSyntax
logginglevelmodule(alert|critical|debug|emergency|error|information|notice|
warning|SEVERITY_LEVEL)
nologginglevelmodule
Parameter ParameterDescriptionParameterValue
0|emergency Systemisunusable -
1|alert Immediateactionneeded-
2|critical Criticalconditions -
3|error Errorconditions -
4|warning Warningconditions -
5|notice Normalbutsignificant
conditions-24726|information Informationalmessages-
7|debug Debuggingmessages-
SEVERITY_LEVEL Severitylevel 0-7
CommandMode
GlobalConfiguration
Default
Loggingfilelevelisdebugging.
Usage
Specifyingaseverity-levelcausesmessagesonlyatthatlevelandnumericallylower
levelsofthemodules.
Examples
Inthefollowingexample,theuserspecifiesthatallmessagesbelogged:
Switch#configureterminal
Switch(config)#logginglevelmoduledebug
RelatedCommands
logginglevelfile
14.2.7loggingmerge
CommandPurpose
Toenabletheloggingmergence,usetheloggingmergecommandinGlobal
Configurationmode.Torestoretodefaultvalue,usethenoformofthiscommand.
CommandSyntax
loggingmerge(enable|disable|fifo-sizeSIZE|timeoutSECONDS)
nologgingmerge(fifo-size|timeout)2473Parameter ParameterDescriptionParameterValue
enable Enableloggingmergence-
disable Disableloggingmergence-
fifo-sizeSIZE Setfifosize.Therangeis
100to10240,default
valueis1024100-10240
timeoutSECONDS Settimeout.Therangeis1
to300seconds,default
valueis10seconds1-300
CommandMode
GlobalConfiguration
Default
Loggingmergenceisenabled.
Usage
Theloggingmergecommandmergesallthesamelogsintooneduringaspecified
timerange.Duringthistime,theswitchbufferedthesesamelogs.Youcanusethe
timeoutkeywordtosetthetimerange,andusethefifo-sizetosetthebuffersize.
Examples
Thefollowingshowshowtoenableloggingmergefunction:
Switch#configureterminal
Switch(config)#loggingmergeenable
RelatedCommands
loggingmergetimeout30247414.2.8loggingsync
CommandPurpose
Tosynchronizelogfrombuffertosyslogfile,usetheloggingsynccommandin
privilegedEXECmode.
CommandSyntax
loggingsync
CommandMode
PrivilegedEXEC
Default
None
Usage
Whenenabledlogmerge,systemwillmergeallthesamelogsintooneduringa
specifiedtimerange.Duringthistimelogwillnotsendtologgingbuffer.Ifuserwants
tosynclogtologgingbuffer,usethiscommand.Andsynchronizelogfrombufferto
syslogfile.
Examples
Thefollowingshowshowtoenableloggingsyncfunction:
Switch#loggingsync
RelatedCommands
loggingmergeenableloggingsynctimeout247514.2.9loggingsynctimeout
CommandPurpose
Tosetthetimeoutthatsynchronizelogfrombuffertosyslogfile.Torestoretodefault
value,usethenoformofthiscommand.
CommandSyntax
loggingsynctimeoutINTERVAL
nologgingsynctimeout
Parameter ParameterDescriptionParameterValue
INTERVAL synctimeoutinminutes5-1440
CommandMode
GlobalConfiguration
Default
360minutes
Usage
None
Examples
Thefollowingshowshowtosetevery5minutessynchronizelogfrombuffertosyslog
file:
Switch#configureterminal
Switch(config)#loggingsynctimeout5
RelatedCommands
loggingsync247614.2.10loggingoperate
CommandPurpose
Tologtheoperations,andusetheloggingoperatecommandinGlobalConfiguration
mode.
CommandSyntax
loggingoperate(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enableloggingoperations-
disable Disableloggingoperations-
CommandMode
GlobalConfiguration
Default
Loggingoperationsisdisabled
Usage
Ifloggingoperateisenabled,alltheCLIinconfiguremodeorhigherwillbesaveto
loggerbuffer.
Examples
Thefollowingshowshowtoenableloggingoperatefunction:
Switch#configureterminal
Switch(config)#loggingoperateenable
RelatedCommands
loggingserver247714.2.11loggingserver
CommandPurpose
Toenabletheloggingtotheremoteloggingservers,usetheloggingserver
commandinGlobalConfigurationmode.
CommandSyntax
loggingserver(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enableloggingserver-
disable Disableloggingserver-
CommandMode
GlobalConfiguration
Default
Loggingoperationsisdisabled.
Usage
Thiscommandisusedtosendloggertoaremoteserver.
Examples
Thefollowingshowshowtouseloggingservercommand:
Switch#configureterminal
Switch(config)#loggingserverenable
RelatedCommands
loggingserverseverity247814.2.12loggingserveraddress
CommandPurpose
Tologsystemmessagesanddebugoutputtoaremoteserver,usetheloggingserver
addresscommandinGlobalConfigurationmode.Toremoveaspecifiedlogging
serverfromtheconfiguration,usethenoformofthiscommand.
CommandSyntax
loggingserveraddress(mgmt-if|)(IPV4_ADDR|IPV6_ADDR)(dest-port
PORT_NUM|)(transport(tcp|udp)|)(source-interfaceIFNAME|source-ip
SRC_IP_ADDR|)
nologgingserveraddress(mgmt-if|)(IPV4_ADDR|IPV6_ADDR)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
IPV4_ADDR IPv4addressoftheserver
thatwillreceivethesystem
loggingmessagesIPv4Address
IPV6_ADDR IPv6addressoftheserver
thatwillreceivethesystem
loggingmessagesIPv6Address
PORT_NUM Portnumber 1-65535
tcp Transporttypeistcp TCP
udp Transporttypeisudp UDP
IFNAME NameofsourceinterfaceAllinterfacetype
SRC_IP_ADDR SourceIPaddress IPv4Address
CommandMode
GlobalConfiguration2479Default
Systemloggingmessagesarenotsenttoanyremoteserver.
Usage
Theloggingserveraddresscommandidentifiesaremoteserver(usuallyadevice
servingasasyslogserver)toreceiveloggingmessages.Byissuingthiscommand
morethanonce,youcanbuildalistofserversthatreceiveloggingmessages.
IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
Inthefollowingexample,messagesareloggedtoaserverat209.165.202.169:
Switch#configureterminal
Switch(config)#loggingserveraddress209.165.202.169
RelatedCommands
loggingserver
14.2.13loggingserverfacility
CommandPurpose
Toconfigurethesyslogfacilityinwhicherrormessagesaresent,usethelogging
serverfacilitycommandinGlobalConfigurationmode.Toreverttothedefaultof
local7,usethenoformofthiscommand.
CommandSyntax
loggingserverfacility(kern|user|mail|daemon|auth|syslog|lpr|news|uucp|
cron|authpriv|ftp|FACILITY_TYPE|FACILITY_LOCAL)
nologgingserverfacility
Parameter ParameterDescriptionParameterValue
0|kern Kernel -24801|user User -
2|mail Mailsystem -
3|daemon Systemdaemon -
4|auth Authorizationsystem -
5|syslog Systemlog -
6|lpr Lineprintersystem -
7|news USENETnews -
8|uucp UNIX-to-UNIX -
9|cron Cronfacility -
10|authpriv Authorizationprivsystem-
11|ftp FTPsytem -
16|local0 Reservedforlocally
definedmessages-
17|local1 Reservedforlocally
definedmessages-
18|local2 Reservedforlocally
definedmessages-
19|local3 Reservedforlocally
definedmessages-
20|local4 Reservedforlocally
definedmessages-
21|local5 Reservedforlocally
definedmessages-
22|local6 Reservedforlocally
definedmessages-
23|local7 Reservedforlocally
definedmessages-2481FACILITY_TYPE systemdefinedmessages0-11
FACILITY_LOCAL Reservedforlocally
definedmessages6-23
CommandMode
GlobalConfiguration
Default
Defaultislocal4
Usage
None
Examples
Thefollowingshowshowtouseloggingfilecommand:
Switch#configureterminal
Switch(config)#loggingserverfacilitylocal3
RelatedCommands
loggingserver
14.2.14loggingserverseverity
CommandPurpose
Tosetseveritylevelwhilewritinglogsintoservers,usetheloggingserverseverity
commandinGlobalConfigurationmode.Toreverttothedefaultseveritylevel,use
thenoformofthiscommand.
CommandSyntax
loggingserverseverity(alert|critical|debug|emergency|error|information|
notice|warning|SEVERITY_LEVEL)
nologgingserverseverity2482Parameter ParameterDescriptionParameterValue
0|emergency Systemisunusable -
1|alert Immediateactionneeded-
2|critical Criticalconditions -
3|error Errorconditions -
4|warning Warningconditions -
5|notice Normalbutsignificant
conditions-
6|information Informationalmessages-
7|debug Debuggingmessages-
SEVERITY_LEVEL Severitylevel 0-7
CommandMode
GlobalConfiguration
Default
Loggingserverlevelisinformation.
Usage
Thiscommandisusedtosetseveritylevelwhilewritinglogsintoservers.
Examples
Inthefollowingexample,theuserspecifiesthatonlymessagesofthelevelserror,
critical,alerts,andemergencybeloggedtoserver:
Switch#configureterminal
Switch(config)#loggingserverseverity3
RelatedCommands
logginglevelmodule2483logginglevelfile
14.2.15loggingtimestamp
CommandPurpose
Toconfigurethesystemtoapplyatime-stamptodebuggingmessagesorsystem
loggingmessages,usetheloggingtimestampscommandinGlobalConfiguration
mode.Torestorethedefaulttimestampformat,usethenoformofthiscommand.
CommandSyntax
loggingtimestamp(bsd|date|iso|none|rfc3164|rfc3339)
nologgingtimestamp
Parameter ParameterDescriptionParameterValue
bsd BSDstyle(RFC3164)-
date Datecommandstyle -
iso ISOstyle(RFC3339)-
none Notimestamp -
rfc3164 RFC3164style(bsd) -
rfc3339 RFC3339style(iso) -
CommandMode
GlobalConfiguration
Default
DefaulttimestampformatisBSD.
Usage
Thiscommandisusedtospecifythetimestampinloggermessage.2484Examples
Thefollowingshowshowtosetthetimestamptoiso.:
Switch#configureterminal
Switch(config)#loggingtimestampiso
RelatedCommands
showlogging
14.2.16showlogging
CommandPurpose
Todisplaythestateofsystemlogging(syslog),usetheshowloggingcommandin
privilegedEXECmode.
CommandSyntax
showlogging
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingshowshowtodisplaytheconfigurationofthelog:
Switch#showlogging
Currentloggingconfiguration:
============================================================
loggingbuffer500
loggingtimestampdate2485loggingfileenable
logginglevelfilewarning
logginglevelmoduledebug
loggingserverdisable
loggingserverseveritywarning
loggingserverfacilitylocal7
loggingalarm-trapenable
loggingalarm-traplevelmiddle
loggingmergedisable
loggingmergefifo-size1024
loggingmergetimeout10
loggingoperatedisable
RelatedCommands
logginglevel
14.2.17showloggingbuffer
CommandPurpose
Todisplaythecontentsofthestandardsystemloggingbuffer,usetheshowlogging
buffercommandinprivilegedEXECmode.
CommandSyntax
showloggingbuffer(LINES|statistics|)
Parameter ParameterDescriptionParameterValue
LINES Specifythemaxnumberof
logs.positivenumber
meanslatestmessage
displayedontop,negative
numbermeanstheoldest
messagedisplayedontop.-1000-1000
statistics Displaystatisticsoflogging
buffers-
CommandMode
PrivilegedEXEC2486Default
Display20messageswhenmessagesnumberisnotspecified.Thelatestmessage
isdisplayedontop
Usage
None
Examples
Thefollowingshowshowtouseshowloggingbuffercommand:
Switch#showloggingbufferstatistics
Loggingbufferstatistics:
============================================================
Totalprocessed153entries
Totaldropped0entries
Currenthave153entries
Thelatestmessageis:
Aug616:06:44Switch3IMISH-6:readytoservice
Theoldestmessageis:
Aug613:38:38SwitchLOGGING-5:loggingstartingup;version=\'2.0rc4\'
RelatedCommands
showlogging
14.3MirrorCommands
14.3.1monitorsessiondestinationinterface
CommandPurpose
Usethiscommandtosetmirrordestinationinterface.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDdestinationinterfaceIFNAME
nomonitorsessionSESSIONdestination2487Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
IFNAME mirrordestinationinterfaceSupportaggregation,
physicalandtunnel
interfaces
CommandMode
GlobalConfiguration
Default
None
Usage
Samesessioncantconfigurebothlocaldestinationinterfaceandremotedestination
VLAN.(AbouttheremotedestinationVLAN,pleaserefertochaptermonitorsession
destinationremote.)
Examples
Thisexampleshowshowtosetthemirrordestinationporttoeth-0-1insession1:
Switch#configureterminal
Switch(config)#monitorsession1destinationinterfaceeth-0-1
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitorsession1destination
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDsourcevlan
showmonitor248814.3.2monitorsessiondestinationcpu
CommandPurpose
Usethiscommandtosetmirrordestinationofcpu.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDdestinationcpu
nomonitorsessionSESSION-IDdestination
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
destinationcpu mirrordestinationcpu -
CommandMode
GlobalConfiguration
Default
None
Usage
Thedestinationcanbecpuport.
Samesessioncantconfigurebothdestinationcpuandremotedestination
VLAN.(AbouttheremotedestinationVLAN,pleaserefertochaptermonitorsession
destinationremote.)
Examples
Thisexampleshowshowtosetthemirrordestinationtocpuinsession1:
Switch#configureterminal
Switch(config)#monitorsession1destinationcpu
Thisexampleshowshowtoremovethissetting:2489Switch#configureterminal
Switch(config)#nomonitorsession1destination
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDsourcevlan
showmonitor
14.3.3monitorsessiondestinationgroup
CommandPurpose
Usethiscommandtocreatemirrormultidestinationgroupandentermirror
destinationgroupmode.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDdestinationgroupGROUP-ID
nomonitorsessionSESSION-IDdestination
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
Destinationgroup
GROUP-IDmirrordestinationgroupid
number1-32
CommandMode
GlobalConfiguration
Default
None2490Usage
Onlyonesessioncanconfiguretomulti-destgroup.Thesessiontypeonlysupport
localdestinationinterface.Onesessioncanhavemultidestinationgroupmembers
whichportisphysicalport.Samesessioncantconfigurebothlocaldestination
interfaceandremotedestinationVLAN.(AbouttheremotedestinationVLAN,please
refertochaptermonitorsessiondestinationremote.)
Examples
Thisexampleshowshowtocreatethemirrortomulti-destinationgroupinsession1.:
Switch#configureterminal
Switch(config)#monitorsession1destinationgroup1
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitorsession1destination
RelatedCommands
monitorsessionSESSION-IDsourceinterface
member
showmonitor
14.3.4member
CommandPurpose
Usethiscommandtoaddagroupmembermirrordestinationinterfaceforamirror
destinationgroup.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
memberIFPHYSICAL
Parameter ParameterDescriptionParameterValue
IFPHYSICAL mirrordestinationinterfaceSupportphysicalports2491CommandMode
MirrorDestinationGroupConfiguration
Default
None
Usage
Thedestinationinterfaceonlycanbephysicalport.ItcanbeneitherVLANinterface
norAggregatorinterface.
Samesessioncantconfigurebothlocaldestinationinterfaceandmulti-destination
interface
Examples
Thisexampleshowshowtoaddthemirrordestinationeth-0-1togroupofmulti-
destinationsession:
Switch#configureterminal
Switch(config)#monitorsession1destinationgroup1
Switch(config-monitor-d-group)#membereth-0-1
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#monitorsession1destinationgroup1
Switch(config-monitor-d-group)#nomembereth-0-1
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDdestinationgroupGROUP-ID
showmonitor249214.3.5monitorsessionsourceinterface
CommandPurpose
CommandSyntax
monitorsessionSESSION-IDsourceinterfaceinterface(both|tx|rx)
nomonitorsessionSESSION-IDsourceinterfaceIFNAME(both|tx|rx)
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
sourceinterfaceIFNAMEmirrorsourceinterfaceSupportaggregationand
physicalinterfaces
both monitorreceivedand
transmittedtrafficonthat
interface-
rx monitorreceivedtraffic
onlyonthatinterface-
tx monitortransmittedtraffic
onlyonthatinterface-
CommandMode
GlobalConfiguration
Default
None
Usage
ThemirrorsourceinterfacecanbeeitherphysicalportorAggregatorinterface.
(e.g.eth-0-1,agg1).
Iftheparameterfordirection[both|tx|rx]isnotspecified,thedefaultvalueisboth.2493Examples
Thisexampleshowshowtoremovethissetting.:
Switch#configureterminal
Switch(config)#monitorsession1sourceinterfaceeth-0-11
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitorsession1sourceinterfaceeth-0-11
RelatedCommands
monitorsessionSESSION-IDdestination
showmonitor
14.3.6monitorsessionsourcevlan
CommandPurpose
Usethiscommandtosetmirrorsourcevlan.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDsourcevlanVLAN-ID(both|tx|rx)
nomonitorsessionSESSION-IDsourcevlanVLAN-ID(both|tx|rx)
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
VLAN-ID thesourcevlanidtobe
mirrored1-4094
both monitorreceivedand
transmittedtrafficonthat
interface-
rx monitorreceivedtraffic
onlyonthatinterface-2494tx monitortransmittedtraffic
onlyonthatinterface-
CommandMode
GlobalConfiguration
Default
None
Usage
Iftheparameterfordirection(both|tx|rx)isnotspecified,thedefaultvalueisboth.
Beforeconfigurethemonitorsessionsourcevlan,Usershouldcreatevlanby
commandvlandatabase,andcreatevlaninterfacebycommandinterfacevlan
first.
Examples
Thisexampleshowshowtocreatevlanandvlaninterface:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#exit
Switch(config)#interfacevlan2
Switch(config-if)#exit
Thisexampleshowshowtosetthemirrorsourcetovlan2insession1:
Switch#configureterminal
Switch(config)#monitorsession1sourcevlan2both
Thisexampleshowshowtosetthemirrorsourcetovlan2insession1tomonitor
receivedtrafficonly:
Switch#configureterminal
Switch(config)#monitorsession1sourcevlan2rx
Thisexampleshowshowtosetthemirrorsourcetovlan2insession1tomonitor
transmittedtrafficonly:
Switch#configureterminal
Switch(config)#monitorsession1sourcevlan2tx2495Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitorsession1sourcevlan2both
Thisexampleshowshowtodeletevlanandvlaninterface:
Switch#configureterminal
Switch(config)#nointerfacevlan2
Switch(config)#vlandatabase
Switch(config-vlan)#novlan2
Switch(config-vlan)#exit
RelatedCommands
monitorsessiondestination
showmonitor
vlandatabase
vlanVLAN-ID
interfacevlanVLAN-ID
14.3.7monitorsessionsourcecpu
CommandPurpose
Usethiscommandtosetmirrorsourcecpu
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDsourcecpu(both|tx|rx)
nomonitorsessionSESSION-IDsourcecpu(both|tx|rx)
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
cpu setcputobemirrored-2496both monitorreceivedand
transmittedtrafficonthat
interface-
rx monitorreceivedtraffic
onlyonthatinterface-
tx monitortransmittedtraffic
onlyonthatinterface-
CommandMode
GlobalConfiguration
Default
None
Usage
Iftheparameterfordirection(both|tx|rx)isnotspecified,thedefaultvalueisboth.
Mirrorsourcecpucanonlybeconfiguredinsession1.
Examples
Thisexampleshowshowtosetthemirrorsourcetocpuinsession1:
Switch#configureterminal
Switch(config)#monitorsession1sourcecpuboth
Thisexampleshowshowtosetthemirrorsourcetocpuinsession1tomonitor
receivedtrafficonly:
Switch#configureterminal
Switch(config)#monitorsession1sourcecpurx
Thisexampleshowshowtosetthemirrorsourcetocpuinsession1tomonitor
transmittedtrafficonly:
Switch#configureterminal
Switch(config)#monitorsession1sourcecputx
Thisexampleshowshowtoremovethissetting:2497Switch#configureterminal
Switch(config)#nomonitorsession1sourcecpuboth
RelatedCommands
monitorsessiondestination
showmonitor
14.3.8monitorsessiondestinationinterfacetunnel
CommandPurpose
Usethiscommandtoseterspanmirrordestinationinterfacetunnel.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorsessionSESSION-IDdestinationinterfaceIFTUNNEL
nomonitorsessionSESSION-IDdestinationinterfaceIFTUNNEL
Parameter ParameterDescriptionParameterValue
SESSION-ID <1-3>mirrorsession
number1-3
IFTUNNEL <0-1023>ERSPAN
monitordestinationtunnel0-1023
CommandMode
GlobalConfiguration
Default
None
Usage
ThedestinationtunnelanditsmodeshouldbecreatedbeforeconfiguringERSPAN
monitordestination.2498TheERSPANdestinationinterfacecanonlybeatunnelinterface.
Abouttunnelconfiguration,pleaserefertoIPv6_Service_CLI_en.doc
Examples
Thisexampleshowshowtocreatethetunnel::
Switch#configureterminal
Switch(config)#interfacetunnel
Switch(config-vlan)#tunnelmodeerspan
Switch(config-vlan)#exit
ThisexampleshowshowtosettheERSPANmirrordestinationtotunnel1insession
1::
Switch#configureterminal
Switch(config)#monitorsession1destinationinterfacetunnel1
Thisexampleshowshowtoremovethissetting::
Switch#configureterminal
Switch(config)#nomonitorsession1destination
Thisexampleshowshowtodeletethetunnel::
Switch#configureterminal
Switch(config)#nointerfacetunnel1
Switch(config-vlan)#exit
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDsourcevlan
interfacetunnel
tunnelmodemode
14.3.9monitorsessiondestinationremote
CommandPurpose
Usethiscommandtosetmirrorremotedestinationvlanandinterface.
Toremovethissetting,usethenoformofthiscommand.2499CommandSyntax
monitorsessionSESSION-IDdestinationremotevlanVLAN-IDinterfaceIFNAME
nomonitorsessionSESSION-IDdestinationremotevlan
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
VLAN-ID Remotemirrordestination
VLANid2-4094
IFNAME theout-goinginterfacefor
mirroredpacketsSupportaggregationand
physicalinterfaces
CommandMode
GlobalConfiguration
Default
None
Usage
Thedestinationvlanshouldbecreatedinvlandatabase.
ThedestinationinterfacecanbeeitherphysicalportorAggregatorinterface.
Topreventanothercopyofpacketsfloodoutfromthedestinationoutgoingport,user
canremovetheportfromdefaultvlanbycommandswitchporttrunkallowedvlan
remove1.
Examples
Thisexampleshowshowtocreatethevlan:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#exit
Thisexampleshowshowtosetthemirrorremotedestinationvlanto2andoutgoing
porttoeth-0-1insession1:2500Switch#configureterminal
Switch(config)#monitorsession1destinationremotevlan2interfaceeth-0-1
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitorsession1destinationremotevlan
Thisexampleshowshowtodeletethevlan:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#novlan2
Switch(config-vlan)#exit
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDsourcevlan
vlandatabase
vlanVLAN-ID
14.3.10monitormacescape
CommandPurpose
UsethiscommandtosetremotemirrorMacescapefeature.Whentheseescape
entriesareset,thepacketswithspecifiedMAC-DAwillnotbemirroredtotheremote
destinationvlanwhenusingRspan(unsupportERSPAN).
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitormacescapeMACMASK
nomonitormacescape(MACMASK|)
Parameter ParameterDescriptionParameterValue
MAC macaddress macaddressinHHHH.
HHHH.HHHHformat2501MASK macaddressmask macaddressmaskin
HHHH.HHHH.HHHH
format
CommandMode
GlobalConfiguration
Default
None
Usage
Macescapeisusedforremotemirror.Itwillnotaffecttheresultoflocalmirror.
IfaMacescapeentryisset,thepacketwiththisMacdestinationcannotbemirrored
inremotemirror.
Commandnomonitormacescapeshoulddeletethespecifiedentry.
Commandnomonitormacescapeshoulddeleteallentries.
Examples
Thisexampleshowshowtosetthemirrormacescape:
Switch#configureterminal
Switch(config)#monitormacescape00cc.1122.3344ffff.ffff.0000
Thisexampleshowshowtoremovethissetting:
Switch#configureterminal
Switch(config)#nomonitormacescape00cc.1122.3344ffff.ffff.0000
RelatedCommands
monitorsessionSESSION-IDdestinationremote
14.3.11showmonitor
CommandPurpose
Usethiscommandtoshowtheinformationaboutmonitor.2502CommandSyntax
showmonitor(sessionSESSION-ID)
Parameter ParameterDescriptionParameterValue
SESSION-ID mirrorsessionnumber1-3
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifsessionidisnotspecified,anyconfiguredsessionsshouldbeshown.
Examples
Thisexampleshowshowtodisplaytheinformationaboutmonitor:
DUT1#showmonitor
session1
Session1
----------
Status:Valid
Type :LocalSession
SourcePorts:
ReceiveOnly:
TransmitOnly:
Both:eth-0-2
SourceVLANs:
ReceiveOnly:
TransmitOnly:
Both:
DestinationPort:eth-0-1
RelatedCommands
monitorsessionSESSION-IDsourceinterface
monitorsessionSESSION-IDsourcevlan2503monitorsessionSESSION-IDsourcecpu
monitorsessionSESSION-IDdestinationinterface
monitorsessionSESSION-IDdestinationremote
monitorsessionSESSION-IDdestinationcpu
14.3.12showmonitormacescape
CommandPurpose
Usethiscommandtoshowmacescapesettingsforremotemirror.
CommandSyntax
showmonitormacescape
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutmonitormacescape:
Switch#showmonitormacescape
-------------------------------------------------------------
monitorrspanmacescapedatabase
-------------------------------------------------------------
count:1
-------------------------------------------------------------
Mac:00:cc:11:22:33:44
Mask:ff:ff:ff:ff:00:00
-------------------------------------------------------------2504RelatedCommands
monitormacescapeMACMASK
14.3.13monitordestinationforwardingenable
CommandPurpose
Usethiscommandtosetmirrordestinationportforwardingenable.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitordestinationforwardingenable
nomonitordestinationforwardingenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
Ifanymirrordestinationisconfigured,thisfeaturecantbechanged.
Examples
Thisexampleshowshowtosetmirrordestinationforwardingenable:
Switch#configureterminal
Switch(config)#monitordestinationforwardingenable
RelatedCommands
monitorsessionSESSION-IDdestination
showmonitor250514.3.14monitorcpusetpacketbuffer
CommandPurpose
Usethiscommandtosetmirrorcpubuffersize,itsdefaultvalueis1000ofpackets.
Toremovethissetting,usethenoformofthiscommand.
CommandSyntax
monitorcpusetpacketbufferSIZE
nomonitorcpusetpacketbuffer
Parameter ParameterDescriptionParameterValue
SIZE buffersizeinpackets 1-1000,unit:packet
CommandMode
GlobalConfiguration
Default
Default1000
Usage
Themirrorcpubuffercanstoreupto1000packetsandthedefaultvalueis1000.
Examples
Thisexampleshowshowtosetmirrorcpubuffersize:
Switch#configureterminal
Switch(config)#monitorcpusetpacketbuffer50
RelatedCommands
showmonitorcpupacketbuffersize250614.3.15monitorcpucapturepacket
CommandPurpose
Usethiscommandtocapturepacketstobewritteninatextfilefromcpumemory
buffer.
CommandSyntax
monitorcpucapturepacket(start|stop)
Parameter ParameterDescriptionParameterValue
start startcapture -
stop stopcaptrue -
CommandMode
PrivilegedEXEC
Default
stop
Usage
Whenstartcapturingpacket,thecpumirrorpacketswillbewritteninatextfileand
thefilenameisassignedbysystem.Thetextfileisstoredinthedirectoryof
flash/mirror/
Examples
Thisexampleshowshowtostartcpucapturingpacketsinatextfile:
Switch#configureterminal
Switch(config)#monitorcpucapturepacketstart
Thisexampleshowshowtostopcpucapturingpacketsinatextfile:
Switch#configureterminal
Switch(config)#monitorcpucapturepacketstop2507RelatedCommands
pcapconvertFILENAMEAFILENAMEB
14.3.16monitorcpucapturestrategy
CommandPurpose
Usethiscommandtosetthetrategyofcapturingpackets.
CommandSyntax
monitorcpucapturestrategy(replace|drop)
Parameter ParameterDescriptionParameterValue
replace theoldestpacketwouldbe
replacedbythelatest
packetwhencpumirror
memorybufferisfull-
drop thelatestpacketwouldbe
discardwhencpumirror
memorybufferisfull-
CommandMode
GlobalConfiguration
Default
replace
Usage
None
Examples
Thisexampleshowshowtosetcpucapturestrategyasreplace:2508Switch#configureterminal
Switch(config)#monitorcpucapturestrategyreplace
Thisexampleshowshowtosetcpucapturestrategyasdrop:
Switch#configureterminal
Switch(config)#monitorcpucapturestrategydrop
RelatedCommands
showmonitorcpucapturestrategy
14.3.17showmonitorcpupacket
CommandPurpose
Usethiscommandtoshowthemirrorcpupacketsinmemory.
CommandSyntax
showmonitorcpupacket(all|PACKET-ID)
Parameter ParameterDescriptionParameterValue
all showallofmirrorcpu
packetsinmemory-
PACKET-ID showthemirrorcpu
packetsofuserspecifying1-1000
CommandMode
PrivilegedEXEC
Default
None
Usage
None2509Examples
Thisexampleshowshowtodisplaytheallmirrorcpupacketsinmemory:
Switch(config)#showmonitorcpupacketall
RelatedCommands
monitorsessionSESSION-IDdestinationcpu
14.3.18clearmonitorcpupacketall
CommandPurpose
Usethiscommandtoclearthemirrorcpupacketsinmemory.
CommandSyntax
clearmonitorcpupacketall
CommandMode
PrivilegedEXEC
Default
None
Usage
clearallthemirrorcpupacketsinmemory.
Examples
Thisexampleshowshowtoclearallthemirrorcpupacketsinmemorybuffer:
Switch(config)#clearmonitorcpupacketall
RelatedCommands
showmonitorcpupacket(all|<1-1000>)251014.3.19showmonitorcpupacketbuffer-size
CommandPurpose
Usethiscommandtoshowthebuffersizeofmirrorcpuinmemory
CommandSyntax
showmonitorcpupacketbuffer-size
CommandMode
PrivilegedEXEC
Default
None
Usage
Itdisplaysthemirrorcpubuffersizeinmemoryandthesizeintendsthenumberof
packets.
Examples
Thisexampleshowshowtoshowthemirrorcpubuffersizeinmemory:
Switch(config)#showmonitorcpupacketbuffer-size
RelatedCommands
monitorcpusetpacketbuffer<1-1000>
14.3.20showmonitorcpucapturestrategy
CommandPurpose
Usethiscommandtoshowthecurrentstrategyofcapturingpackets.
CommandSyntax
showmonitorcpucapturestrategy2511CommandMode
PrivilegedEXEC
Default
None
Usage
Itdisplaythecurrentstrategyofcapturingmirrorcpupacketsinmemory.
Examples
Thisexampleshowshowtoshowthecurrentcapturestrategy:
Switch(config)#showmonitorcpucapturestrategy
RelatedCommands
monitorcpucapturestrategy(replace|drop)
14.4DeviceManagementCommands
14.4.1temperature
CommandPurpose
Tospecifythesystemtemperaturemonitorthreshold.
CommandSyntax
termperatureLOWHIGHCRITICAL
notermperature
Parameter ParameterDescriptionParameterValue
LOW Lowalarmtemperature
degreeCelsius45-50,unit:degreeCelsius2512HIGH Highalarmtemperature
degreeCelsius50-85,unit:degreeCelsius
CRITICAL Criticalalarmtemperature
degreeCelsius55-100,unit:degree
Celsius
CommandMode
GlobalConfiguration
Default
Thedefaultthresholdislowtemperature5,hightemperature75,andcritical
temperature90.
Usage
Theunitfortemperatureiscentigrade.
Thecriticaltemperaturemusthigherthanhightemperature5Celsiusdegrees.
Thehightemperaturemusthigherthanlowtemperature5Celsiusdegrees.
Examples
Thisexampleshowshowtospecifythetemperaturethresholds:
Switch#configureterminal
Switch(config)#temperature57090
RelatedCommands
showenvironment
14.4.2showenvironment
CommandPurpose
Usethiscommandtoshowthehardwareenvironmentinformation.2513CommandSyntax
showenvironment(slotID|)
Parameter ParameterDescriptionParameterValue
ID TheIDofstackmember.1-29
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayhardwareenvironmentinformation:
Switch#showenvironment
Fantraystatus:
IndexStatus
1PRESENT
FanIndexStatusSpeedRateMode
1-1OK30%Auto
1-2OK30%Auto
1-3OK30%Auto
---------------------------------------------------------
Powerstatus:
IndexStatusPowerTypeAlert
1PRESENTOKACNO
2ABSENT---
---------------------------------------------------------
Sensorstatus(DegreeCentigrade):
IndexTemperatureLower_alarmUpper_alarmCritical_limit
16457590
RelatedCommands
temperature251414.4.3bootsystem
CommandPurpose
Usethiscommandtospecifythesystemimagethattheswitchloadsatstartup.
CommandSyntax
bootsystem(GFLASHFILE|tftp:mgmt-ifIP_ADDRGTFTPFLIE)
Parameter ParameterDescriptionParameterValue
GFLASHFILE Thefilenamethatwillbe
usedtoloadatstartupFilepathandnameonthe
flash
IP_ADDR ThetftpserverIPaddressIPv4Address
tftp:mgmt-if Usemanagementport-
GTFTPFLIE Thefilenamethatwillbe
usedtoloadatstartupFilenameonthetftp
server
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtospecifyloadimagefromtftpwhenswitchstartup:
Switch#bootsystemtftp:mgmt-if10.10.29.160uImage.r
RelatedCommands
None251514.4.4showtransceiver
CommandPurpose
Usethiscommandtoshowthetransceiverinformation.
CommandSyntax
showtransceiver(interface|)(detail|)
Parameter ParameterDescriptionParameterValue
interface Specifythephysical
interface-
detail ShowdetailincludeDDM
information-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytransceiverinformation:
Switch#showtransceiverdetail
Porteth-1-2transceiverinfo:
TransceiverType:10GBase-SR
TransceiverVendorName:OEM
TransceiverPN:SFP-10GB-SR
TransceiverS/N:201033PST1077C
TransceiverOutputWavelength:850nm
SupportedLinkTypeandLength:
LinkLengthfor50/125ummulti-modefiber:80m2516LinkLengthfor62.5/125ummulti-modefiber:30m
----------------------------------------------------------------------------
Transceiverisinternallycalibrated.
mA:milliamperes,dBm:decibels(milliwatts),NAorN/A:notapplicable.
++:highalarm,+:highwarning,-:lowwarning,--:lowalarm.
Thethresholdvaluesarecalibrated.
----------------------------------------------------------------------------
HighAlarmHighWarnLowWarnLowAlarm
TemperatureThresholdThresholdThresholdThreshold
Port(Celsius)(Celsius)(Celsius)(Celsius)(Celsius)
-------------------------------------------------------------------
eth-1-225.9295.0090.00-20.00-25.00
--------------------------------------------------------------------------------------------------
HighAlarmHighWarnLowWarnLowAlarm
VoltageThresholdThresholdThresholdThreshold
Port(Volts)(Volts)(Volts)(Volts)(Volts)
----------------------------------------------------------------------------------------
eth-1-23.323.803.702.902.80
---------------------------------------------------------------------------------------------------
HighAlarmHighWarnLowWarnLowAlarm
CurrentThresholdThresholdThresholdThreshold
Port(milliamperes)(mA)(mA)(mA)(mA)
----------------------------------------------------------------------------------------
eth-1-26.4120.0018.001.000.50
-----------------------------------------------------------------------------------------------------
OpticalHighAlarmHighWarnLowWarnLowAlarm
TransmitPowerThresholdThresholdThresholdThreshold
Port(dBm)(dBm)(dBm)(dBm)(dBm)
-----------------------------------------------------------------------------------------
eth-1-2-2.412.011.00-6.99-7.96
-------------------------------------------------------------------------------------------------------
OpticalHighAlarmHighWarnLowWarnLowAlarm
ReceivePowerThresholdThresholdThresholdThreshold
Port(dBm)(dBm)(dBm)(dBm)(dBm)
-------------------------------------------------------------------------------------------
eth-1-2-12-1.000.00-19.00-20.00
-------------------------------------------------------------------------------------------------------
RelatedCommands
None
14.4.5updatebootrom
CommandPurpose
Usethiscommandtoupdatebootromimage.
CommandSyntax
updatebootrom(flash|udisk)2517Parameter ParameterDescriptionParameterValue
flash Sourcefiledirection -
udisk Sourcefiledirection -
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoupdatebootromimage:
Switch#configureterminal
Switch(config)#updatebootromflash:/boot/bootrom.bin
RelatedCommands
None
14.4.6showreboot-info
CommandPurpose
Usethiscommandtoshowrebootinfo.
CommandSyntax
showreboot-info(slotID|)
Parameter ParameterDescriptionParameterValue
ID TheIDofstackmember.1-292518CommandMode
PrivilegedEXEC
Default
None
Usage
RebootType Description
POWER Poweroutages
MANUAL Clireboot/reloadundersystem
HIGH-TMPR Rebootforabnormalhightemperature
BHMDOG BHMwatchdog,monitorfunctional
module
LCMDOG LCMwatchdog,monitoreachLC
SCHEDULE Schedulereboot
SNMP-RELOAD SNMPreboot
HALFAIL RebootforHAGTcommunicatewith
HSRVfailedneedstackenable
ABNORMAL Unusualreboot,includerebootunder
shell
CTCINTR Buttonreboot
LCATTACH RebootforLCattachCHSMfailed
OTHER Otherreboot
OTHER Otherreboot
Examples
Thisexampleshowshowtoshowreboot-info:2519Switch#showreboot-info
TimesRebootTypeRebootTime
1MANUAL2016/09/0815:14:41
2MANUAL2016/09/0814:23:31
3MANUAL2000/01/0100:00:01
4HIGH-TMPR2000/01/0101:01:40
5MANUAL2000/01/0100:08:17
6ABNORMAL1959/11/2517:44:24
7MANUAL1959/11/2614:51:37
8MANUAL1959/11/2809:04:35
9MANUAL2016/09/1209:44:53
10MANUAL2000/01/0100:00:01
RelatedCommands
None
14.5BootromCommands
14.5.1version
CommandPurpose
UsetheversioncommandtoshowtheBootromversioninformation.
CommandSyntax
version
CommandMode
BootRomCLI
Default
None
Usage
None2520Examples
ThisexampleshowshowtoshowtheU-bootversion:
bootrom:>version
U-BootA.1.0(Jun252018-12:32:40)
aarch64-linux-gnu-gcc(LinaroGCC6.3-2017.02)6.3.120170109
GNUld(Linaro_Binutils-2017.02)2.27.0.20161019
RelatedCommands
None
14.5.2setenv
CommandPurpose
UsethiscommandtosetBootromenvironmentvariables.
CommandSyntax
setenv(ipaddr|serveripIP_ADDR|bootcmdbootarguments)
Parameter ParameterDescriptionParameterValue
IP_ADDR Localdeviceortftpserver
IPaddressIPv4Address
bootarguments Bootformflashortftp
server-
CommandMode
BootRomCLI
Default
None
Usage
None2521Examples
ThisexampleshowshowtosetSwitchIPaddressasenvironmentvariables:
bootrom:>setenvipaddr10.10.29.48
ThisexampleshowshowtosetTFTPserverIPaddressasenvironmentvariables:
bootrom:>setenvserverip10.10.29.160
Thisexampleshowshowtosetbootcommandasenvironmentvariables:
bootrom:>setenvbootcmdboot_flashOS-ma-v3.0.1.it.r.bin
RelatedCommands
None
14.5.3saveenv
CommandPurpose
UsethesaveenvcommandtosavetheBootromenvironmentvariablestopersistent
storage.
CommandSyntax
saveenv
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtosavetheBootromenvironmentvariables:2522bootrom:>saveenv
RelatedCommands
printenv
14.5.4printenv
CommandPurpose
UsetheprintenvcommandtoshowtheU-bootenvironmentvariables.
CommandSyntax
printenv
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtoshowtheBootromenvironmentvariables:
bootrom:>printenv
baudrate=115200
bootargs=console=ttyS0,115200root=/dev/ram0earlycon=uart8250,mmio,0x21c0500
mtdparts=spi0.0:1m(uboot),5m(kernel),1m(dtb),9m(file_system)bootimage=TftpFile://10.10.38.160:switchOS-
e550-v6.0.1.33.r.binU-BootA.1.0selfip=10.10.39.83eeprom_info=ffffffffffffffffffff
bootcmd=boot_flash
bootdelay=10
eth1addr=00:1E:08:11:06:5C
ethact=FM1@DTSEC3
ethaddr=00:1E:08:11:06:5C
ethprime=FM1@DTSEC3
fdtcontroladdr=fbc266382523fman_ucode=fbc33650
ipaddr=10.10.39.83
serverip=10.10.38.160
stderr=serial
stdin=serial
stdout=serial
Environmentsize:576/8188bytes
RelatedCommands
setenv
14.5.5reset
CommandPurpose
UsetheresetcommandtoperformRESEToftheCPU.
CommandSyntax
reset
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtoRESETtheCPUinBootrom:
bootrom:>reset
RelatedCommands
saveenv252414.5.6ping
CommandPurpose
UsethepingcommandtosendICMPECHO_REQUESTtonetworkhost.
CommandSyntax
pingIP_ADDR
Parameter ParameterDescriptionParameterValue
IP_ADDR remotehostIPaddressIPv4Address
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtousepingcommandinBootrommode:
Bootrom:>ping10.10.38.160
UsingFM1@DTSEC3device
host10.10.38.160isalive
RelatedCommands
saveenv252514.5.7ctcls
CommandPurpose
Usethelscommandtolistfilesinadirectory(defaultis/).
CommandSyntax
ctcls
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
Thisexampleshowshowtolistfilesinadirectory(defaultis/).:
Bootrom:>ctcls
Bootrom:>ctcls
<DIR>4096.
<DIR>4096..
<DIR>16384lost+found
<DIR>4096boot
<DIR>4096cfg
<DIR>4096info
<DIR>4096log
<DIR>4096conf
<DIR>4096cold
<DIR>4096reboot-info
<DIR>4096monitor
<DIR>4096capwap
1682startup-config.conf
RelatedCommands
None252614.5.8boot_tftp
CommandPurpose
Usetheboot_tftpcommandtobootsystemthroughthespecifiedsystemimagefrom
TFTPserver.
CommandSyntax
boot_tftpIMAGE_NAME
Parameter ParameterDescriptionParameterValue
IMAGE_NAME Imagenameoftftpserver-
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtobootsystemformTFTPserver:
bootrom:>boot_tftpOS-ma-v3.0.1.it.r.bin
RelatedCommands
None252714.5.9boot_tftp_nopass
CommandPurpose
Usetheboot_tftp_nopasscommandtobootsystemthroughthespecifiedsystem
imagefromTFTPserverwithdefaultconfiguration.
CommandSyntax
boot_tftp_nopassIMAGE_NAME
Parameter ParameterDescriptionParameterValue
IMAGE_NAME Imagenameoftftpserver-
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtobootsystemformTFTPserver:
bootrom:>boot_tftp_nopassOS-ma-v3.0.1.it.r.bin
RelatedCommands
None252814.5.10boot_flash
CommandPurpose
Usetheboot_flashcommandtobootsystemthroughthespecifyimageordefault
imageintheflash
CommandSyntax
boot_flashIMAGE_NAME
Parameter ParameterDescriptionParameterValue
IMAGE_NAME Imagenameinflash -
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
Thisexampleshowshowtobootsystemthroughthespecifyimageintheflash:
bootrom:>boot_flash
RelatedCommands
None252914.5.11boot_flash_nopass
CommandPurpose
Usetheboot_flash_nopasscommandtobootsystemthroughthespecifyimageor
defaultimageintheflashwithdefaultconfiguration.
CommandSyntax
boot_flash_nopassIMAGE_NAME
Parameter ParameterDescriptionParameterValue
IMAGE_NAME Imagenameinflash -
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
Thisexampleshowshowtobootsystemthroughthespecifyimageintheflashwith
defaultconfiguration:
bootrom:>boot_flash_nopass/boot/OS-ma-v3.0.1.it.r.bin
Doyouwanttoreverttothedefaultconfigfile?[Y|N|E]:Y
RelatedCommands
None253014.5.12upgrade_uboot
CommandPurpose
Usetheupgrade_ubootcommandtoupgradetheU-bootimagefromTFTPserver.
CommandSyntax
upgrade_ubootIMAGE_NAME
Parameter ParameterDescriptionParameterValue
IMAGE_NAME Imagenameformtftp
server-
CommandMode
BootRomCLI
Default
None
Usage
None
Examples
ThisexampleshowshowtoupgradetheBootromimagefromTFTPserver:
bootrom:>upgrade_ubootu-boot.bin
RelatedCommands
None253114.6BootupDiagnosticCommands
14.6.1diagnosticbootuplevel
CommandPurpose
UsethiscommandtosetbootupdiagnosticlevelofnextSwitchreboot.
CommandSyntax
diagnosticbootuplevel(minimal|complete)
nodiagnosticbootuplevel
Parameter ParameterDescriptionParameterValue
minimal Minimalbootupleveltest-
complete Completebootupleveltest-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosetbootupdiagnosticlevel:
Switch#configureterminal
Switch(config)#diagnosticbootuplevelminimal
RelatedCommands
None253214.6.2showdiagnosticbootuplevel
CommandPurpose
Usethiscommandtoshowbootupdiagnosticlevel.
CommandSyntax
showdiagnosticbootuplevel
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowbootupdiagnosticlevel:
Switch#showdiagnosticbootuplevel
Thecurrentrunningbootupdiagleveliscomplete
Thenextrunningbootupdiagleveliscomplete
RelatedCommands
None
14.6.3showdiagnosticbootupresult
CommandPurpose
Usethiscommandtoshowbootupdiagnosticresult.2533CommandSyntax
showdiagnosticbootupresult(detail|)(slotID|)
Parameter ParameterDescriptionParameterValue
detail Detailedinformation -
ID TheIDofstackmember.1-29
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowbootupdiagnosticlevel:
Switch#showdiagnosticbootupresultdetail
#########################################################
ItemName AttributeResultTime(usec)
1EPLDTEST CPass57
2EEPROM0TESTCPass101262
3PHYTEST CPass1161
4FANTEST CPass4668
5SENSORTEST CPass5472
6PSUTEST CPass1370
7L2UCASTFUNCTESTCPass40126
RelatedCommands
None253414.7SmartConfigCommands
14.7.1smart-config
CommandPurpose
Toconfigsmartconfigfunction,usethesmart-configcommandinglobalconfiguration
mode.
CommandSyntax
smart-config(initial-switch-deployment|hostname-prefix)
nosmart-config(initial-switch-deployment|hostname-prefix)
Parameter ParameterDescriptionParameterValue
initial-switch-deploymentEnableinitialswitch
automaticallydeployment-
hostname-prefix Enablehostnameprefix
feature-
CommandMode
GlobalConfiguration
Default
Initial-switch-deploymentandhostname-prefixisenabled.
Usage
None
Examples
Thefollowingexampleshowshowtoenablesmartconfigfunction:
Switch#configureterminal
Switch(config)#smart-configinitial-switch-deployment
Thefollowingexampleshowshowtodisablesmartconfigfunction:2535Switch#configureterminal
Switch(config)#nosmart-configinitial-switch-deployment
RelatedCommands
ipaddressdhcp
showsmart-configconfig
14.7.2showsmart-configconfig
CommandPurpose
Toshowconfigurationofsmart-config,usetheshowsmart-configconfiguration
commandinprivilegedEXECmode.
CommandSyntax
showsmart-configconfig
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplayconfigurationofsmart-config:
Switch#showsmart-configconfig
Smart-Configconfig:
initial-switch-deployment:on
hostname-prefix:on
Sendlogmessagetoconsole:on2536RelatedCommands
ipaddressdhcp
smart-config
14.8DebianCommands
14.8.1bash
CommandPurpose
ToenterintodebianshellmodeusedbashcommandinprivilegedEXECmode.
CommandSyntax
bash
CommandMode
PrivilegedEXEC
Default
None
Usage
Canonlybeusedindebianimage.
Examples
Thisexmpaleshowshowtoentryintodebianshellmode:
Switch#bash
switch@Switch:~$
RelatedCommands
None253714.8.2showdebian-version
CommandPurpose
Toshowdebianversioninformationusedshowdebian-versioncommandin
privilegedEXECmode.
CommandSyntax
showdebian-version
CommandMode
PrivilegedEXEC
Default
None
Usage
Canonlybeusedindebianimage.
Examples
Thisexmpaleshowshowtodisplaydebianversioninformation:
Switch#showdebian-version
Debianversionis8.11
RelatedCommands
None253815NetworkManagementCommands
15.1NetworkDiagnosisCommands
15.1.1ping
CommandPurpose
TheswitchsupportsIPping,whichyoucanusetotestconnectivitytoremotehosts.
Pingsendsanechorequestpackettoanaddressandwaitsforareply.Pingreturns
oneoftheseresponses:
Normalresponse-Thenormalresponse(hostnameisalive)occursin1to10
seconds,dependingonnetworktraffic.
Destinationdoesnotrespond-Ifthehostdoesnotrespond,ano-answermessageis
returned.
Unknownhost-Ifthehostdoesnotexist,anunknownhostmessageisreturned.
Destinationunreachable-Ifthedefaultgatewaycannotreachthespecifiednetwork,a
destination-unreachablemessageisreturned.
Networkorhostunreachable-Ifthereisnoentryintheroutetableforthehostor
network,anetworkorhostunreachablemessageisreturn.
CommandSyntax
ping(ip|mgmt-if)WORD
ping(vrfWORD|)[-aWORD|-siIFNAME|-mINTERVAL|-cCOUNT|-s
DATASIZE|-f|-tosTOS|-hTTL|-tTIMEOUT]WORD
ping(mgmt-if|vrfWORD|)ipv6[-aWORD|-mINTERVAL|-cCOUNT|-s
DATASIZE|-tcTC|-hHL|-tTIMEOUT]WORD(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue2539-aWORD SelectsourceIPaddress,
thedefaultistheIP
addressoftheoutput
interface-
-siIFNAME Setthespecifiedinterface
asthesourceinterfaceof
pingpacketSupport
physical/aggregation/loopb
ack/tunnel/vlanports
ip PublicnetworkIPv4echo-
vrfWORD VPNRouting/Forwarding
instanceUpto15characters
mgmt-if Managementinterface-
WORD PingdestinationIPv4or
IPv6addressorhostname-
ipv6 PublicnetworkIPv6echo-
interface Outgoinginterfacefor
LinkLocaladdress/host-
IFNAME Interfacesname Support
physical/aggregation/loopb
ack/tunnel/vlanports
-mINTERVAL specifyintervalforsending
pingpackets10-10000millisecond
-cCOUNT specifythenumberofping
packets1-4294967295
-sDATASIZE specifythedatasizeof
pingpacket20-9600bytes
-f specifytheDontFragment
flaginpacket-
-tosTOS Specifythepackettos
value0-2552540-hTTL specifytheTTLvaluein
pingpacket1-255
-tcTC specifytheTrafficClass
valueinipv6pingpacket0-255
-hHL specifytheHopLimitvalue
inipv6pingpacket1-255
-tTIMEOUT specifythetimeoutvalue
towaitforreplaypacket0-100second,0standsfor
continuouswaiting
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtopingahostfrommanagementinterface:
Switch#pingmgmt-if10.10.29.247
PING10.10.29.247(10.10.29.247)56(84)bytesofdata.
64bytesfrom10.10.29.247:icmp_seq=1ttl=64time=0.194ms
64bytesfrom10.10.29.247:icmp_seq=2ttl=64time=0.131ms
64bytesfrom10.10.29.247:icmp_seq=3ttl=64time=0.134ms
64bytesfrom10.10.29.247:icmp_seq=4ttl=64time=0.121ms
64bytesfrom10.10.29.247:icmp_seq=5ttl=64time=0.135ms
---10.10.29.247pingstatistics---
5packetstransmitted,5received,0%packetloss,time3996ms
rttmin/avg/max/mdev=0.121/0.143/0.194/0.025ms
RelatedCommands
traceroute254115.1.2traceroute
CommandPurpose
YoucanuseIPtraceroutetoidentifythepaththatpacketstakethroughthenetwork
onahop-by-hopbasis.Thecommandoutputdisplaysallnetworklayer(Layer3)
devices,suchasrouters,thatthetrafficpassesthroughonthewaytothedestination.
Yourswitchescanparticipateasthesourceordestinationofthetracerouteprivileged
EXECcommandandmightormightnotappearasahopinthetraceroutecommand
output.Iftheswitchisthedestinationofthetraceroute,itisdisplayedasthefinal
destinationinthetracerouteoutput.Intermediateswitchesdonotshowupinthe
tracerouteoutputiftheyareonlybridgingthepacketfromoneporttoanotherwithin
thesameVLAN.However,iftheintermediateswitchisamultilayerswitchthatis
routingaparticularpacket,thisswitchshowsupasahopinthetracerouteoutput.
ThetracerouteprivilegedEXECcommandusestheTimeToLive(TTL)fieldintheIP
headertocauseroutersandserverstogeneratespecificreturnmessages.
TraceroutestartsbysendingaUserDatagramProtocol(UDP)datagramtothe
destinationhostwiththeTTLfieldsetto1.IfarouterfindsaTTLvalueof1or0,it
dropsthedatagramandsendsbackanInternetControlMessageProtocol(ICMP)
time-to-live-exceededmessagetothesender.Traceroutedeterminestheaddressof
thefirsthopbyexaminingthesourceaddressfieldoftheICMPtime-to-live-exceeded
message.
CommandSyntax
traceroute(ip|vrfWORD|mgmt-if|)WORD
traceroute(vrfWORD|)ipv6WORD
Parameter ParameterDescriptionParameterValue
-a SelectsourceIPaddress,
thedefaultistheIP
addressoftheoutput
interface-2542-si Setthespecifiedinterface
asthesourceinterfaceof
traceroutepacket-
ip PublicnetworkIPv4echo-
ipv6 PublicnetworkIPv6echo-
vrfWORD VPNRouting/Forwarding
instance-
mgmt-if Managementinterface-
WORD DestinationIPaddressor
hostname-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleissampledialogfromthetraceroutecommandusingdefault
values:
Switch#traceroute1.1.1.2
tracerouteto1.1.1.2(1.1.1.2),30hopsmax,38bytepackets
11.1.1.2(1.1.1.2)108.129ms99.313ms94.720ms
RelatedCommands
ping254315.2NTPCommands
15.2.1ntpace
CommandPurpose
TocreatetheAccessControlEntries(ACE)ofaNTPserver/peer,usethentpace
commandinglobalconfigurationmode.Toremovetheace,usethenoformofthis
command.
CommandSyntax
ntpace(IP_ADDR|HOSTNAME)(maskMASK_LENGTH|)(version|kod|
ignore|noquery|nomodify|notrap|noserve|nopeer|notrust|limited|none)
nontpace(IP_ADDR|HOSTNAME)(maskMASK|)(version|kod|ignore|
noquery|nomodify|notrap|noserve|nopeer|notrust|limited|none)
Parameter ParameterDescriptionParameterValue
IP_ADDR IPaddressofthetime
serverorpeerIPv4Addressexclude
127.0.0.1&0.0.0.0
HOSTNAME Nameofthetimeserveror
peerUpto256characters
MASK_LENGTH Specifynetworkmask
lengthoftheaddress1-32
MASK Specifynetworkmaskof
theaddressInIPv4Addressformat
version Ignorethesehostsifnot
thecurrentNTPversion-
kod Ifaccessisdenied,senda
kiss-of-deathpacket-
ignore Ignoreallpacketsfrom
hostthatmatchthisentry-2544noquery IgnoreallNTPmode6and
7packetsfromthesource,
timeserviceisnotaffected-
nomodify IgnoreallNTPmode6and
7packetswhichattemptto
modifythestateofthe
server-
notrap Declinetoprovidemode6
controlmessagetrap
servicetomatchinghosts-
noserve IgnoreNTPpacketswhose
modeisotherthan6or7-
nopeer Providestatelesstime
servicetopollinghosts,
butdonotallocatepeer
memoryresources-
notrust Treatthesehostsnormally
inotherrespects,but
neverusethemas
synchronizationsources-
limited Thesehostsaresubjectto
limitationofnumberof
clientsfromthesamenet-
none Nolimit -
CommandMode
GlobalConfiguration
Default
None2545Usage
Usethiscommandifyouwanttoallowthesystemtosynchronizewiththespecified
server.Theserverwillnotsynchronizetothismachine.
Examples
ThefollowingexampleshowshowtocreateanACEfor1.1.1.1:
Switch#configureterminal
Switch(config)#ntpace1.1.1.1version
RelatedCommands
showntp
15.2.2ntpauthentication
CommandPurpose
ToenableNTPauthentication,usethentpauthenticationenablecommand.To
disabletheNTPauthentication,usethentpauthenticationdisablecommand.
CommandSyntax
ntpauthentication(enable|disable)
Parameter ParameterDescriptionParameterValue
enable EnableNTPauthentication-
disable DisableNTP
authentication-
CommandMode
GlobalConfiguration
Default
None2546Usage
WhenNTPauthenticationisenabled,theswitchwillsynchronizethetimewithNTP
serverswithtrustedkeyonly.Formoreinformationabouttrustedkey,pleaseseethe
ntptrustedkeycommand.
Examples
ThefollowingexampleshowshowtoenablesNTPauthentication:
Switch#configureterminal
Switch(config)#ntpauthenticationenable
RelatedCommands
showntp
15.2.3ntpdisable
CommandPurpose
ToconfigureDisableNTPpacketsfrombeingreceivedontheinterface,usethentp
disablecommandininterfaceconfigurationmode.Todisablethiscapability,usethe
noformofthiscommand.
CommandSyntax
ntpdisable
nontpdisable
CommandMode
InterfaceConfiguration
Default
Bydefault,allinterfacesreceiveNTPpackets.
Usage
Onlyphysicalinterface,vlaninterfaceandloopbackinterfacesupportthiscommand.2547Examples
Inthefollowingexample,thesystemisconfigurednottoreceiveNTPpacketin
interfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ntpdisable
RelatedCommands
None
15.2.4ntpkey
CommandPurpose
ToconfigurevalueoftheNTPkey,usethentpkeycommandinglobalconfiguration
mode.ToremovethevalueoftheNTPkey,usethenoformofthiscommand.
CommandSyntax
ntpkeyKEYIDVALUE
nontpkeyKEYID
Parameter ParameterDescriptionParameterValue
KEYID Authenticationkey 1-64000
VALUE Thevalueofthekey Upto128characters
CommandMode
GlobalConfiguration
Default
None
Usage
UsethiscommandtocreateavalueforaNTPkey.2548Examples
Inthefollowingexample,thevalue321isgiventotheNTPkey123:
Switch#configureterminal
Switch(config)#ntpkey123321
RelatedCommands
showntp
15.2.5ntpinterfacereload
CommandPurpose
ToreloadtheNTPconfigurationontheinterfaces,usethentpinterfacereload
commandinglobalconfigurationmode.
CommandSyntax
ntpinterfacereload
CommandMode
GlobalConfiguration
Default
None
Usage
UsethiscommandtoreloadtheNTPconfigurationonalltheinterfaces.
Examples
ThefollowingexamplereloadstheNTPconfigurationonallinterfaces:
Switch#configureterminal
Switch(config)#ntpinterfacereload2549RelatedCommands
showntp
15.2.6ntpmax-distance
CommandPurpose
Usentpmax-distancecommandtoconfigntpmaxsyncdistancethreshold.This
commandusedinntpclient,andntpcalculatethesyncdistancetoeachntpserver
andcompareitwiththentpmaxsyncdistancewhichconfiguredbyntpmax-distance
command.Ifthedistancecalculatebyntpoverthedistanceconfiguredbyntpmax-
distance,clientwillnotsyncwiththisntpserver.
CommandSyntax
ntpmax-distanceDISTANCE
nontpmax-distanceDISTANCE
Parameter ParameterDescriptionParameterValue
DISTANCE Specifythentpmaxsync
distancethresholdin
seconds,default10s.1-16
CommandMode
GlobalConfiguration
Default
10
Usage
None
Examples
ThefollowingexampleshowstheconfigurationofNTP:2550Switch#configureterminal
DUT1#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
DUT1(config)#ntpmax-distance16
RelatedCommands
None
15.2.7ntppeer
CommandPurpose
Toconfigurethesoftwareclocktosynchronizeapeerortobesynchronizedbyapeer,
usethentppeercommandinglobalconfigurationmode.Todisablethiscapability,
usethenoformofthiscommand.
CommandSyntax
ntppeer(HOSTNAME|IP_ADDR){keyKEY_ID|prefer|versionVER}{source-
interfaceIFNAME|source-ipSRC_ADDR}
nontppeer(HOSTNAME|IP_ADDR)
Parameter ParameterDescriptionParameterValue
HOSTNAME Nameofthetimeserveror
peerUpto256characters
IP_ADDR IPaddressofthetime
serverorpeerIPv4Address
KEY_ID Authenticationkeytouse
whensendingpacketsto
thispeer1-64000
prefer Makesthispeerthe
preferredpeerthat
providessynchronization-
VER DefinestheNetworkTime
Protocol(NTP)version
number1-32551IFNAME NameofsourceinterfaceSupport
physical/aggregation/loopb
ack/tunnel/vlanports
SRC_ADDR SourceIPaddress IPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
Whenapeerisconfigured,thedefaultNTPversionnumberis3,noauthentication
keyisused,andthesourceIPaddressistakenfromtheoutgoinginterface.
Usethiscommandtoallowadevicetosynchronizewithapeer,orviceversa.Using
thepreferkeywordreducesswitchingbetweenpeers.
IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
Thefollowingexampleshowshowtoconfigureaswitchtoallowitssoftwareclockto
besynchronizedwiththeclockofthepeer(orviceversa)atIPaddress
192.168.22.33usingNTPversion2.:
Switch#configureterminal
Switch(config)#ntppeer192.168.22.33version2
RelatedCommands
showntp255215.2.8ntprefclock
CommandPurpose
ToconfigureanexternalclocksourceforusewithNetworkTimeProtocol(NTP)
services,usethentprefclockcommandinglobalconfigurationmode.Todisable
supportoftheexternaltimesource,usethenoformofthiscommand.
CommandSyntax
ntprefclockstratumNUMBER
nontprefclock
Parameter ParameterDescriptionParameterValue
NUMBER IndicatestheNTPstratum
numberthatthesystem
willclaim.1-15
CommandMode
GlobalConfiguration
Default
Thiscommandisdisabledbydefault.
Usage
None
Examples
ThefollowingexampleshowsconfigurationofaNTPsourceonaswitchplatform:
Switch#configureterminal
Switch(config)#ntprefclockstratum1
RelatedCommands
showntp255315.2.9ntpserver
CommandPurpose
ToallowthesoftwareclocktobesynchronizedbyaNetworkTimeProtocol(NTP)
timeserver,usethentpservercommandinglobalconfigurationmode.Todisablethis
capability,usethenoformofthiscommand.
CommandSyntax
ntpserver(HOSTNAME|IP_ADDR){keyKEY_ID|prefer|versionVER}{source-
interfaceIFNAME|source-ipSRC_ADDR}
nontpserver(HOSTNAME|SRC_ADDR)
Parameter ParameterDescriptionParameterValue
HOSTNAME Nameofthetimeserveror
peerUpto256characters
IP_ADDR IPaddressofthetime
serverorpeerIPv4Address
KEY_ID Authenticationkeytouse
whensendingpacketsto
thispeer1-64000
prefer Makesthispeerthe
preferredpeerthat
providessynchronization-
VER DefinestheNetworkTime
Protocol(NTP)version
number1-3
IFNAME NameofsourceinterfaceSupport
physical/aggregation/loopb
ack/tunnel/vlanports
SRC_ADDR SourceIPaddress IPv4Address2554CommandMode
GlobalConfiguration
Default
Theserverwillnotsynchronizetothismachine.
Usage
Usethiscommandifyouwanttoallowthesystemtosynchronizewiththespecified
server.
IfthesourceinterfaceorsourceIPaddressisspecified,thepackettransmitwilluse
therelatedIPaddressassourceaddress.
Examples
Thefollowingexampleshowshowtoconfigureaswitchtoallowitssoftwareclockto
besynchronizedwiththeclockbythedeviceatIPaddress172.16.22.44usingNTP
version2:
Switch#configureterminal
Switch(config)#ntpserver172.16.22.44version2
RelatedCommands
showntp
15.2.10ntptrustedkey
CommandPurpose
ToauthenticatetheidentityofasystemtowhichNetworkTimeProtocol(NTP)will
synchronize,usethentptrustedkeycommandinglobalconfigurationmode.To
disableauthenticationoftheidentityofthesystem,usethenoformofthiscommand.
CommandSyntax
ntptrustedkeyKEY_ID
nontptrustedkeyKEY_ID2555Parameter ParameterDescriptionParameterValue
KEY_ID Authenticationkeytouse
whensendingpacketsto
thispeer1-64000
CommandMode
GlobalConfiguration
Default
None
Usage
Ifauthenticationisenabled,usethiscommandtodefineoneormorekeynumbers
(correspondingtothekeysdefinedwiththentpkeycommand)thatapeerNTP
systemmustprovideinitsNTPpackets,inorderforthissystemtosynchronizetoit.
Thisfunctionprovidesprotectionagainstaccidentallysynchronizingthesystemtoa
systemthatisnottrusted,becausetheothersystemmustknowthecorrect
authenticationkey.
Examples
Thefollowingexampleshowshowtoconfigurethesystemtosynchronizeonlyto
systemsprovidingauthenticationkey42initsNTPpackets:
Switch#configureterminal
Switch(config)#ntpauthenticationenable
Switch(config)#ntpkey42aNiceKey
Switch(config)#ntptrustedkey42
RelatedCommands
showntp
ntpkey255615.2.11showntp
CommandPurpose
TodisplaytheNTPconfigurations,usetheshowntpcommandinprivilegedEXEC
mode.
CommandSyntax
showntp
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplaytheNTPconfigurations.
Examples
ThefollowingexampleshowstheconfigurationofNTP:
Switch#showntp
CurrentNTPconfiguration:
============================================================
NTPaccesscontrollist:
Unicastpeer:
1.1.1.1
Unicastserver:
2.2.2.2
Authentication:enabled
Localreferenceclock:
enabled,stratum10
RelatedCommands
ntpserver
ntppeer255715.2.12showntpace
CommandPurpose
TodisplaytherestrictlistofAccessControlEntries(ACE)ofaNTPserver/peer,use
theshowntpacecommandinprivilegedEXECmode.
CommandSyntax
showntpace
CommandMode
PrivilegedEXEC
Default
None
Usage
None.
Examples
ThefollowingexampleshowstheNTPrestrictlist:
Switch#showntpace
addressmaskcountflags
=====================================================================
0.0.0.00.0.0.055188noquery,nomodify,notrap
6.6.6.6255.255.255.25573none
127.0.0.1255.255.255.2551259none
RelatedCommands
ntpace255815.2.13showntpassociations
CommandPurpose
ToshowthestatusofNetworkTimeProtocol(NTP)associations,usetheshowntp
associationscommandinprivilegedEXECmode.
CommandSyntax
showntpassociations
CommandMode
PrivilegedEXEC
Default
None
Usage
Detaileddescriptionsoftheinformationdisplayedbythiscommandcanbefoundin
theNTPspecification(RFC1305).
Examples
ThefollowingexampleshowsthestatusofNTPassociations:
Switch#showntpassociations
CurrentNTPassociations:
remoterefidstwhenpollreachdelayoffsetdisp
==============================================================================
*6.6.6.6127.127.1.061612563770.778-0.087119.400
*synchronized,+candidate,#selected,xfalsetick,.excess,-outlyer
RelatedCommands
showntpstatus255915.2.14showntpkey
CommandPurpose
ToshowtheNTPkeys,usetheshowntpkeycommandinprivilegedEXECmode.
CommandSyntax
showntpkey
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplaytheNTPkeys.
Examples
ThefollowingexampleshowsthekeysofNTP:
Switch#showntpkey
CurrentNTPkeyconfiguration:
Flags:*-Trusted
IDValue
============================================================
*1trusted_key
5test_key
RelatedCommands
ntpkey256015.2.15showntpstatus
CommandPurpose
ToshowthestatusoftheNetworkTimeProtocol(NTP),usetheshowntpstatus
commandinprivilegedEXECmode.
CommandSyntax
showntpstatus
CommandMode
PrivilegedEXEC
Default
None
Usage
None.
Examples
Thefollowingissampleoutputfromtheshowntpstatuscommand:
Switch#showntpstatus
CurrentNTPstatus:
============================================================
clockissynchronized
stratum:11
referenceclock:127.127.1.0
frequency:0.000ppm
precision:2^15
referencetime:d116c946.4dc2f6a7(1:24:22.303UTCTueMar12011)
rootdelay:0.000ms
rootdispersion:449.207ms
peerdispersion:662.059ms
clockoffset:0.000ms
stability:0.000ppm2561RelatedCommands
showntpassociations
15.2.16showntpstatistics
CommandPurpose
ToshowthestatisticsoftheNetworkTimeProtocol(NTP),usetheshowntpstatistics
commandinprivilegedEXECmode.
CommandSyntax
showntpstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
None.
Examples
Thefollowingissampleoutputfromtheshowntpstatisticscommand:
Switch#showntpstatistics
CurrentNTPI/Ostatistics:
============================================================
timesincereset:175834
receivebuffers:10
freereceivebuffers:9
usedreceivebuffers:0
lowwaterrefills:1
droppedpackets:0
ignoredpackets:0
receivedpackets:32
packetssent:31
packetsnotsent:02562interruptshandled:32
receivedbyint:32
RelatedCommands
showntpassociations
15.2.17clearntpstatistics
CommandPurpose
ToclearthestatisticsoftheNetworkTimeProtocol(NTP),usetheclearntpstatistics
commandinprivilegedEXECmode.
CommandSyntax
clearntpstatistics
CommandMode
PrivilegedEXEC
Default
None
Usage
None.
Examples
Thefollowingisasampletoclearntpstatistics:
Switch#clearntpstatistics
RelatedCommands
showntpstatistics256315.2.18ntpmgmt-if
CommandPurpose
ToenableNTPmanagementinterface,usethentpmgmt-ifcommand.Toenable
managementinterfaceonly,usetheonlyparameter.Toenablebothin-bandand
managementinterface,usetheenableparameter.TodisableNTPmanagement
interface,usethenontpmgmt-ifcommand.
CommandSyntax
ntpmgmt-if(enable|only)
nontpmgmt-if
Parameter ParameterDescriptionParameterValue
only Onlyusemanagement
interface-
enable Bothusemanagement
interfaceandin-band
interface-
CommandMode
GlobalConfiguration
Default
Disablemanagementinterfacebydefaultandonlyusein-bandinterface
Usage
Usethiscommandtoenablemanagementinterface,thenthentpclientwillconnect
totheserverorpeer.
Examples
Thefollowingexampleshowsonlyusemanagementinterface:2564Switch#configureterminal
Switch(config)#ntpmgmt-ifonly
RelatedCommands
showntp
15.3PhyLoopbackCommands
15.3.1loopbackphy
CommandPurpose
Usethiscommandtoconfigureaphysicalinterfaceasphylevelloopbackmode.Use
thenoloopbackcommandtocancelthisconfiguration.
CommandSyntax
loopbackphy(internalIFPHYSICAL|external)
Parameter ParameterDescriptionParameterValue
internalIFPHYSICAL Packetstransmittedtothe
interfaceshouldbelooped
backtoaspecified
physicalinterfacewithout
anymodification.The
destinationphysical
interface-
external Packetsreceivedfromthe
interfaceshouldbelooped
backtotheinterfaceitself
withoutanymodification-
CommandMode
InterfaceConfiguration2565Default
None
Usage
Onlyonetypeofloopbackcanbeappliedonaphysicalinterface.Anew
configurationshouldreplacetheoldconfiguration.
Examples
Inthefollowingexample,thephysicalinterfaceissettophylevelloopbackmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopbackphyinternaleth-0-2
RelatedCommands
noloopback
15.3.2loopbackport
CommandPurpose
Usethiscommandtoconfigureaphysicalinterfaceasportlevelloopbackmode.Use
thenoloopbackcommandtocancelthisconfiguration.
CommandSyntax
loopbackport(mac-addressswap|)
Parameter ParameterDescriptionParameterValue
mac-addressswap Ifthisfliedisentered,the
packetsSMACincoming
fromportlevelloopback
interfacewillbeswapped
withitsDMAC,andthe
FCSwillbeupdated-2566CommandMode
InterfaceConfiguration
Default
None
Usage
Onlyonetypeofloopbackcanbeappliedonaphysicalinterface.Anew
configurationshouldreplacetheoldconfiguration.
Examples
Inthefollowingexample,thephysicalinterfaceissettoportlevelloopbackmode:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopbackport
RelatedCommands
noloopback
15.3.3noloopback
CommandPurpose
Usethiscommandtocancelaphysicalinterfacefromphylevelorportlevelloopback
tonormalinterface.
CommandSyntax
noloopback
CommandMode
InterfaceConfiguration2567Default
None
Usage
Phyorportlevelloopbackcanbecanceledbythiscommand.
Examples
Inthefollowingexample,portlevelloopbackiscanceledbythiscommand:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#loopbackport
Switch(config-if)#noloopback
RelatedCommands
loopbackphy
loopbackport
15.3.4showphyloopback
CommandPurpose
Usethiscommandtoshowtheconfigurationofphyloopback.
CommandSyntax
showphyloopback
CommandMode
PrivilegedEXEC
Default
None2568Usage
None
Examples
Inthefollowingexampleshowshowtoshowtheconfiguration:
Switch#showphyloopback
InterfaceTypeDestIntfSwapMac
-------------------------------------------------------------
eth-0-1port-no
eth-0-2port-yes
eth-0-3external--
eth-0-4internaleth-0-5-
-------------------------------------------------------------
RelatedCommands
loopbackphy
loopbackport
15.3.5l2ping
CommandPurpose
UsethiscommandtopingspecifiedDMACfromspecifiedphysicalinterface,using
protocolpacketwithethertype0x9009.
CommandSyntax
l2pingHHHH.HHHH.HHHHinterfaceIFPHYSICAL({vlanVLAN_ID|interval
INTERVAL|timeoutTIMEOUT|countCOUNT|sizeSIZE}|)
Parameter ParameterDescriptionParameterValue
HHHH.HHHH.HHHH TheDMACtoping MACAddressin
HHHH.HHHH.HHHH
format
interfaceIFPHYSICALTheinterfacetopingfromSupportphysicalports2569VLAN_ID Thevlanidoftheprotocol
pingpacket1-4094
INTERVAL Theintervaltimebetween
twopingaction,second1-65535
TIMEOUT Thetimewaitforaping
action,second1-65535
COUNT Totalpingtimes 1-65535
SIZE Thesizeoftheprotocol
pingpacket64-1518
CommandMode
PrivilegedEXEC
Default
Thepingprotocolpacketiswithoutvlantagbydefault.
Thedefaultintervalpingtimeis200milliseconds.
Thedefaultcountis5.
Thedefaultsizeofthepingprotocolpacketis64.
Usage
ThepingactioncanbecanceledbyCtrl+C.
Examples
Thefollowingexampleshowshowtopingaspecifieddestinationmac.:
Switch#l2ping0000.0000.0001interfaceeth-0-1vlan101interval200timeout1000count10size1500
RelatedCommands
l2pingresponse257015.3.6l2pingresponse
CommandPurpose
Usethiscommandtoenablel2pingresponseglobally.Usethenoformofthis
commandtodisableit.
CommandSyntax
l2pingresponseenable
nol2pingresponseenable
CommandMode
InterfaceConfiguration
Default
None
Usage
Ifl2pingresponseisnotenabled,thel2pingrequestpacketshouldbedropped.
Examples
Inthefollowingexampleshowshowtoenablel2pingresponseoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#l2pingresponseenable
RelatedCommands
l2ping
showl2pingresponse257115.3.7showl2pingresponse
CommandPurpose
Usethiscommandtoshowtheconfigurationofl2ping.
CommandSyntax
showl2pingresponse
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexampleshowshowtousethiscommand:
Switch#showl2pingresponse
InterfaceL2pingResp
-------------------------------------
eth-0-7Enable
eth-0-8Enable
-------------------------------------
RelatedCommands
l2pingresponse257215.3.8showl2pingstate
CommandPurpose
CommandSyntax
showl2pingstate
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexampleshowsthestatusofl2ping:
Switch#showl2pingresponse
L2pingstate.
-------------------------------------------------------------
TotalcountIntervalTimeoutVlanIdPacketsizeSequence
1001515010
10packet(s)transmitted,0received,100%packetloss
RelatedCommands
None
15.3.9l2pingstop
CommandPurpose
CommandSyntax
l2pingstop2573CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
InthefollowingexampleshowshowtostopL2ping:
Switch#l2pingstop
RelatedCommands
None
15.3.10l2pingforwardenable
CommandPurpose
CommandSyntax
l2pingforwardenable
nol2pingforwardenable
CommandMode
InterfaceConfiguration
Default
Enable2574Usage
None
Examples
Inthefollowingexampleshowshowtoenablel2pingforwardoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#l2pingforwardenable
RelatedCommands
None
15.3.11debugl2ping
CommandPurpose
Usethiscommandtoenabledebuggingl2ping.
CommandSyntax
debugl2ping(all|packet|send|receive|response)
nodebugl2ping(all|packet|send|receive|response)
Parameter ParameterDescriptionParameterValue
all Alll2pingdebug -
packet Packet -
send Sendpackets -
receive Receivepackets -
response ResponseLog -
CommandMode
PrivilegedEXEC2575Default
Allthesethreedebuggingtypesisoff.
Usage
Ifpacket,send,orreceivedebuggingison,thecorrespondingmessagewillbe
printed.
Examples
Inthefollowingexampleshowshowtousethiscommand:
Switch#debugl2pingall
RelatedCommands
l2pingresponse
15.3.12showdebuggingl2ping
CommandPurpose
Usethiscommandtoshowthestatusofl2pingdebugging
CommandSyntax
showdebuggingl2ping
CommandMode
PrivilegedEXEC
Default
None
Usage
None2576Examples
Inthefollowingexampleshowsthestatusofl2pingdebugging:
Switch#showdebuggingl2ping
L2pingdebuggingstatus:
l2pingpacketdebuggingison
l2pingreceivedebuggingison
l2pingsenddebuggingison
l2pingresponsedebuggingison
RelatedCommands
l2pingresponse
15.4RMONCommands
15.4.1rmoncollectionstats
CommandPurpose
UsethiscommandtoenableRMONstatisticcollectionontheinterface
CommandSyntax
rmoncollectionstatsID(ownerOWNER|)
normoncollectionstatsID
Parameter ParameterDescriptionParameterValue
ID SpecifytheRMONgroup
ofstatistics1-65535
ownerOWNER Theowneridentityofthe
statistic.(optional)Upto15characters
CommandMode
InterfaceConfiguration2577Default
None
Usage
Tocreateonestatisticonlyonacertaininterface
Examples
ThisexampleshowshowtocollectRMONstatisticsfortheownertest:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#rmoncollectionstats1ownertest
RelatedCommands
showrmonstatistics
15.4.2rmoncollectionhistory
CommandPurpose
UsethiscommandtoenableRMONhistorycollectionforthespecifiednumberof
bucketsandtimeperiod
CommandSyntax
rmoncollectionhistoryINDEX(bucketsNUMBER|)(intervalINTERVAL|)(owner
OWNER|)
normoncollectionhistoryINDEX
Parameter ParameterDescriptionParameterValue2578INDEX Specifythemaximum
numberofbucketsdesired
fortheRMON
Specifythemaximum
numberofbucketsdesired
fortheRMON
Collectionhistorygroupof
statistics.1-65535
bucketsNUMBER Specifythemaximum
numberofbucketsdesired
fortheRMONcollection
historygroupofstatistics.1-65535
intervalINTERVAL Specifythenumberof
secondsineachpolling
cycle.1-3600
ownerOWNER Theowneridentityof
historygroup(optional)Upto15characters
CommandMode
InterfaceConfiguration
Default
None
Usage
Usethiscommandtoenableahistorystatisticsonacertaininterface.
Examples
ThisexampleshowshowtoenablehistoryRMONstatisticsoneth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#rmoncollectionhistory1buckets1000interval100ownertest2579RelatedCommands
showrmonhistory
15.4.3rmonevent
CommandPurpose
UsethiscommandtoaddaneventtoRMONeventtable
CommandSyntax
rmoneventINDEX(log|)(trapTRAP|)(descriptionDESCRIPTION|)(owner
OWNER|)
normoneventIndex
Parameter ParameterDescriptionParameterValue
INDEX Eventindex. 1-65535
log GenerateaRMONlog
wheneventistriggered-
trapTRAP Trapcommunity Upto127characters
descriptionDESCRIPTIONSpecifythedescription
stringfortheevent(default
is
Specifythedescription
stringfortheevent(default
is
RMON_SNMP)Upto127characters
ownerOWNER Theownername(default
isRMON_SNMP)Upto15characters
CommandMode
GlobalConfiguration2580Default
None
Usage
CreateaneventisforRMONalarm.Permiteventspecialtriggeredoperate.Logcan
besentbytrap.
Examples
Thisexampleshowshowtocreateanevent:
Switch#configureterminal
Switch(config)#rmonevent1logtrappublicdescriptionreach_maxownertest
RelatedCommands
showrmonevent
15.4.4rmonalarm
CommandPurpose
UsethiscommandtosetanalarmonaMIBobject.
CommandSyntax
rmonalarmINDEXOIDintervalINTERVAL(delta|absolute)rising-threshold
RTHRE(eventnumbs|)falling-thresholdFTHRE(eventNUMBER|)(owner
OWNER|)
normonalarmIndex
Parameter ParameterDescriptionParameterValue
INDEX Alarmindex. 1-65535
OID Variableforsetting
alarm(etherStatsEntry.m.n)MIBOID2581INTERVAL Specifythetimein
secondsthealarm
monitorstheMIB
object(seconds).1-65535
delta Specifythedeltakeyword
totestthechangebetween
samplesofaMIBvariable-
absolute Specifytheabsolute
keywordtotesteachMIB
variabledirectly-
rising-thresholdRTHREAlarmrisingthreshold.-2147483648-
2147483646
eventnumbs Specifytheeventnumber
totriggerwhenthefalling
threshold1-65535
falling-thresholdFTHREAlarmfallingthreshold.-2147483648-2147483646
eventNUMBER Specifytheeventnumber
totriggerwhenthefalling
threshold1-65535
ownerOWNER exceedsitslimit. Upto15characters
CommandMode
GlobalConfiguration
Default
None
Usage
Weneedtocreateeventsforrisingthresholdandfallingthresholdfirstbeforewe
createanalarmforamib.2582Alsothestatisticsneedtobecreatedonaninterface,becauseweonlysupporttoset
alarmmonitoronetherStatsEntry.
Examples
Thisexampleshowshowtosetanalarm:
Switch#configureterminal
Switch(config)#rmonalarm1etherStatsEntry.3.1interval10deltarising-threshold1000event1falling-threshold
5event1ownertest
RelatedCommands
None
15.4.5showrmonstatistics
CommandPurpose
Usethiscommandtoshowrmonstatistics.
CommandSyntax
showrmonstatistics(ID|)
Parameter ParameterDescriptionParameterValue
ID Statisticsindex 1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
ShowtheinterfacestatisticswhichcollectbyRMON2583Examples
Thisexampleshowshowtoshowrmonstatistics:
Switch#showrmonstatistics
Rmoncollectionindex1
Statisticsifindex=1,Owner:RMON_SNMP
Inputpackets0,octets0,dropped0
Broadcastpackets0,multicastpackets0,CRCalignmenterrors0,collisions0
Undersizedpackets0,oversizedpackets0,fragments0,jabbers0
#ofpacketsreceivedoflength(inoctets):
64:0,65-127:0,128-255:0
256-511:0,512-1023:0,1024-max:0
RelatedCommands
None
15.4.6showrmonhistory
CommandPurpose
Usethiscommandtoshowrmonhistorystatistics.
CommandSyntax
showrmonhistory(ID|)
Parameter ParameterDescriptionParameterValue
ID Historyindex 1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
ShowtheinterfacehistorystatisticswhichcollectbyRMON2584Examples
Thisexampleshowshowtoshowrmonhistorystatistics:
Switch#showrmonhistory
Historyindex=1
Datasourceifindex=1
Bucketsrequested=1000
Bucketsgranted=1000
Interval=100
Owner:test
Sample#1Beginat00:30:07
Received00octets,00packets
00broadcastand00multicastpackets
00undersizedand00oversizedpackets
00fragmentsand00jabbers
00CRCalignmenterrorsand00collisions.
#ofdroppedpacketeventsis00
Networkutilizationisestimatedat0
Sample#2Beginat00:31:47
Received00octets,00packets
00broadcastand00multicastpackets
00undersizedand00oversizedpackets
00fragmentsand00jabbers
00CRCalignmenterrorsand00collisions.
#ofdroppedpacketeventsis00
Networkutilizationisestimatedat0
Sample#3Beginat00:33:27
Received00octets,00packets
00broadcastand00multicastpackets
00undersizedand00oversizedpackets
00fragmentsand00jabbers
00CRCalignmenterrorsand00collisions.
#ofdroppedpacketeventsis00
Networkutilizationisestimatedat0
RelatedCommands
None
15.4.7showrmonevent
CommandPurpose
Usethiscommandtoshowrmonevent.
CommandSyntax
showrmonevent(ID|)2585Parameter ParameterDescriptionParameterValue
ID Eventindex. 1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
Showrmoneventsinformation
Examples
Thisexampleshowshowtoshowrmonevent:
Switch#showrmonevent
eventIndex=1
Description:RMON_SNMP
EventtypeLog&Trap
Eventcommunitynamepublic
LastTimeSent=00:00:00
Ownertest
RelatedCommands
None
15.4.8showrmonalarm
CommandPurpose
Usethiscommandtoshowrmonalarm
CommandSyntax
showrmonalarm(ID|)2586Parameter ParameterDescriptionParameterValue
ID Alarmindex. 1-65535
CommandMode
PrivilegedEXEC
Default
None
Usage
Showrmonalarminformation
Examples
Thisexampleshowshowtoshowrmonalarm:
Switch#showrmonalarm
alarmIndex=1
alarmstatus=VALID
alarmInterval=3600
alarmTypeisDelta
alarmValue=00
alarmRisingThreshold=100
alarmRisingEvent=1
alarmFallingThreshold=10
alarmFallingEvent=1
alarmOwneristest
RelatedCommands
None
15.4.9rmonclearcounters
CommandPurpose
Usethiscommandtoclearrmoncounters.2587CommandSyntax
rmonclearcounters
CommandMode
InterfaceConfiguration
Default
None
Usage
Clearcountersonainterface
Examples
Thisexampleshowshowtoclearrmoncounters:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#rmonclearcounters
RelatedCommands
None
15.4.10debugrmon
CommandPurpose
Usethiscommandtoopenrmondebug.
CommandSyntax
debugrmon
normondebug
CommandMode
PrivilegedEXEC2588Default
None
Usage
Openrmondebug
Examples
Thisexampleshowshowtoopenrmondebug:
Switch#debugrmon
RelatedCommands
None
15.5SNMPCommands
15.5.1snmp-serveraccess
CommandPurpose
TosettheaccesssecurityofMIBview,usethesnmp-serveraccesscommandin
globalconfigurationmode.ToremovetheaccesssecurityofMIBview,usetheno
formofthiscommand.
CommandSyntax
snmp-serveraccessGROUP_NAMEsecurity-modelusm(noauth|auth|priv)
({readREAD|writeWRITE|notifyNOTIFY|contextCONTEXT(prefix|exact|)}
|)
nosnmp-serveraccessGROUP_NAMEsecurity-modelusm(noauth|auth|priv)
(contextCONTEXT|)
Parameter ParameterDescriptionParameterValue
GROUP_NAME Nameofthegroup Upto31characters2589security-model Definethesecuritymodel
ofthegroup-
usm SNMPv3usmsecurity
model-
auth Specifiesauthenticationof
apacketwithout
encryptingit-
noauth Specifiesnoauthentication
ofapacket-
priv Specifiesauthenticationof
apacketwithencryption-
contextCONTEXT (Optional)Specifiesthe
SNMPcontexttoassociate
withthisSNMPgroupand
itsviews.Upto31characters
prefix Thecontextonlymatchthe
prefix-
exact Thecontextshouldmatch
thewholepart-
READ Optional)Specifiesaread
viewfortheSNMPgroup.
Thisviewenablesyouto
viewonlythecontentsof
theagentUpto31characters
WRITE (Optional)Specifiesawrite
viewfortheSNMPgroup.
Thisviewenablesyouto
enterdataandconfigure
thecontentsoftheagent.Upto31characters2590NOTIFY (Optional)Specifiesa
notifyviewfortheSNMP
group.Thisviewenables
youtospecifyanotify,
inform,ortrapUpto31characters
CommandMode
GlobalConfiguration
Default
NoSNMPaccessgroupisdefined
Usage
ThecommandisusedtocreateaaccesssecurityforMIBview.
Examples
Thefollowingissampleoutputfromthesnmp-serveraccesscommand:
Switch#configureterminal
Switch(config)#snmp-serveraccessmanagesecurity-modelusmauthwrite_all_read_all_
RelatedCommands
showsnmp-serveraccess
15.5.2snmp-servercommunity
CommandPurpose
TosetupthecommunityaccessstringtopermitaccesstotheSimpleNetwork
ManagementProtocol(SNMP),usethesnmp-servercommunitycommandinglobal
configurationmode.Toremovethespecifiedcommunitystring,usethenoformof
thiscommand.
CommandSyntax
snmp-servercommunitySTRING(read-only|read-write)(viewNAME|)2591nosnmp-servercommunitystring
Parameter ParameterDescriptionParameterValue
STRING Communitystringthat
consistsof1to256
alphanumericcharacters
andfunctionsmuchlikea
password,permitting
accesstoSNMP.Blank
spacesarenotpermitted
inthecommunity
string,supportdigitchar
andspecialcharas
~!@#$%^&*()_+`-=,./;[]<:{}Astringwith1-256
characters
read-only Specifiesread-only
access.Authorized
managementstationscan
retrieveonlyMIBobjects-
read-write Specifiesread-write
access.Authorized
managementstationscan
bothretrieveandmodify
MIBobjects-
viewNAME Specifiesapreviously
definedview.Theview
definestheobjects
availabletotheSNMP
communityUpto31characters
CommandMode
GlobalConfiguration
Default
NoSNMPcommunitystringisdefined2592Usage
Thenosnmp-servercommanddisablesallversionsofSNMP(SNMPv1,SNMPv2C,
SNMPv3).
Examples
Thefollowingexampleshowshowtosettheread/writecommunitystringto
newstring.:
Switch#configureterminal
Switch(config)#snmp-servercommunitynewstringread-write
RelatedCommands
snmp-serverenable
15.5.3snmp-servercontext
CommandPurpose
TocreateaSimpleNetworkManagementProtocol(SNMP)context,usethesnmp-
servercontextcommandinglobalconfigurationmode.TodeleteanSNMPcontext,
usethenoformofthiscommand.
CommandSyntax
snmp-servercontextCONTEXT
nosnmp-servercontextCONTEXT
Parameter ParameterDescriptionParameterValue
CONTEXT NameoftheSNMP
contextbeingcreatedUpto31characters
CommandMode
GlobalConfiguration2593Default
NoSNMPcontextsareconfigured
Usage
Whenyouusethenosnmp-servercontextcommand,allSNMPinstancesinthat
contextaredeleted.
Examples
Thefollowingissampleoutputfromthesnmp-servercontextcommand:
Switch#configureterminal
Switch(config)#snmp-servercontextcontextA
RelatedCommands
showsnmp-servercontext
15.5.4snmp-serverenable
CommandPurpose
ToenabletheSNMPfunction,usethesnmp-serverenablecommandinglobal
configurationmode.TodisabletheSNMPfunction,usethenoformofthiscommand.
CommandSyntax
snmp-serverenable
nosnmp-serverenable
CommandMode
GlobalConfiguration
Default
SNMPfunctionisdisabled2594Usage
Thecommandisusedtoenableordisablesnmpglobal.
Examples
Thefollowingissampleoutputfromthesnmp-serverenablecommand:
Switch#configureterminal
Switch(config)#snmp-serverenable
RelatedCommands
showsnmp
15.5.5snmp-serverengineID
CommandPurpose
TospecifytheSimpleNetworkManagementProtocol(SNMP)engineIDonthelocal
device,usethesnmp-serverengineIDcommandinglobalconfigurationmode.To
removetheconfiguredengineID,usethenoformofthiscommand.
CommandSyntax
snmp-serverengineIDSTRING
nosnmp-serverengineID
Parameter ParameterDescriptionParameterValue
STRING Astringidentifiesthe
engineIDStringofamaximumof64
charactersthatidentifies
theengineID
CommandMode
GlobalConfiguration2595Default
AnSNMPengineIDisgeneratedautomaticallybutisnotdisplayedorstoredinthe
runningconfiguration.YoucandisplaythedefaultorconfiguredengineIDbyusing
theshowsnmp-serverengineIDcommand.
Usage
TheSNMPengineIDisauniquestringusedtoidentifythedeviceforadministration
purposes.YoudonotneedtospecifyanengineIDforthedevice.Forfurtherdetails
ontheSNMPengineID,seeRFC2571.
Examples
Thefollowingissampleoutputfromthesnmp-serverengineIDcommand:
Switch#configureterminal
Switch(config)#snmp-serverengineID30383038303830383038
RelatedCommands
showsnmp-serverengineID
15.5.6snmp-servergroup
CommandPurpose
ToconfigureanewSimpleNetworkManagementProtocol(SNMP)group,usethe
snmp-servergroupcommandinglobalconfigurationmode.Toremoveaspecified
SNMPgroup,usethenoformofthiscommand.
CommandSyntax
snmp-servergroupGROUP_NAMEuserUSER_NAMEsecurity-modelusm
nosnmp-servergroupGROUP_NAMEuseruser-namesecurity-modelusm
Parameter ParameterDescriptionParameterValue
GROUP_NAME Nameofthegroup Upto31characters2596USER_NAME Nameoftheuserinthat
groupUpto31characters
security-model Definethegroupsecurity
model-
usm SNMPv3usmmodel -
CommandMode
GlobalConfiguration
Default
NoSNMPservergroupsareconfigured.
Usage
ThiscommandisusedtoaddanewSNMPservergroup.
Examples
Thefollowingissampleoutputfromthesnmp-servergroupcommand:
Switch#configureterminal
Switch(config)#snmp-servergroupSampleAuserUser1security-modelusm
RelatedCommands
showsnmp-servergroup
15.5.7snmp-servernotify
CommandPurpose
TosetthenotificationoftrapsforSimpleNetworkManagementProtocol(SNMP),use
thesnmp-servernotifycommandinglobalconfigurationmode.Torestoretothe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
snmp-servernotifynotify-nametagtag-name(inform|trap|)2597nosnmp-servernotifynotify-name
Parameter ParameterDescriptionParameterValue
NOTIFY_NAME NameofthenotificationUpto31characters
TAG_NAME Nameofthetag Upto32characters
inform Setnotifytype(defaultis
trap)toINFOR-
trap Setnotifytype(defaultis
trap)toTRAP-
CommandMode
GlobalConfiguration
Default
NoSNMPnotifynamesareconfigured
Usage
ThiscommandisusedtosendeventswiththenotificationtypeoferrortotheSNMP
server.
Examples
Thefollowingissampleoutputfromthesnmp-servernotifycommand:
Switch#configureterminal
Switch(config)#snmp-servernotifynotetagtt
RelatedCommands
showsnmp-servernotify259815.5.8snmp-serversystem-contact
CommandPurpose
Tosetthesystemcontact(sysContact)string,usethesnmp-serversystem-contact
commandinglobalconfigurationmode.Toremovethesystemcontactinformation,
usethenoformofthiscommand.
CommandSyntax
snmp-serversystem-contactTEXT
nosnmp-serversystem-contact
Parameter ParameterDescriptionParameterValue
TEXT Stringthatdescribesthe
systemcontactinformationUpto255characters
CommandMode
GlobalConfiguration
Default
Nosystemcontactstringisset
Usage
ThiscommandisusedtosetthesystemcontactoftheSNMPagentsothatthese
descriptionscanbeaccessedthroughtheconfigurationfile.
Examples
Thefollowingisanexampleofasystemcontactstring:
Switch#configureterminal
Switch(config)#snmp-serversystem-contactadmin@exampledomain.com
RelatedCommands
snmp-serversystem-location259915.5.9snmp-serversystem-location
CommandPurpose
Tosetthesystemlocationstring,usethesnmp-serversystem-locationcommandin
globalconfigurationmode.Toremovethelocationstring,usethenoformofthis
command.
CommandSyntax
snmp-serversystem-locationTEXT
nosnmp-serversystem-location
Parameter ParameterDescriptionParameterValue
TEXT Stringthatdescribesthe
systemcontactinformationUpto255characters
CommandMode
GlobalConfiguration
Default
Nosystemlocationstringisset
Usage
ThiscommandisusedtosetthesystemlocationoftheSNMPagentsothatthese
descriptionscanbeaccessedthroughtheconfigurationfile.
Examples
Thefollowingisanexampleofasystemlocationstring:
Switch#configureterminal
Switch(config)#snmp-serversystem-locationSamplePlace
RelatedCommands
snmp-serversystem-contact260015.5.10snmp-servertarget-address
CommandPurpose
TospecifytherecipientofaSimpleNetworkManagementProtocol(SNMP)
notificationmessage,usethesnmp-servertraptarget-addresscommandinglobal
configurationmode.Toremovethespecifiedhostfromtheconfiguration,usetheno
formofthiscommand.
CommandSyntax
snmp-servertarget-addressNAMEparamPARAM(IPV4_ADDR|IPV6_ADDR)
({udpportUDP_PORT|timeoutTIMEOUT|retriesRETRY}|)(taglistLINE|)
snmp-servertarget-addressWORDparamWORDmgmt-ifIPV4_ADDR({udpport
UDP_PORT|timeoutTIMEOUT|retriesRETRY}|)(taglistLINE|)
nosnmp-servertarget-addressWORD(mgmt-if|)
Parameter ParameterDescriptionParameterValue
NAME Thenameofthetarget
addressUpto31characters
PARAM Defineaparamname
whichhelptofindtarget
paramstableUpto31characters
mgmt-if Managementport -
IPV4_ADDR IPv4address IPv4Address
IPV6_ADDR IPv6address IPv6Address
udpportport (Optional)Specifiesthat
SNMPnotificationsor
informsaretobesentto
anSNMPmanager.The
defaultportis1620-655352601timeoutnumber (Optional)Thetimeout
valuethedefaultvalueis
15000millisecond1-1800000millisecond
retriesnumber (Optional)Theretrytime
thedefaultvalueis30-10
taglistLINE (Optional)Thenameofthe
taglist(128tagsare
supported).splitby
blank.maxlengthis255
characterUpto255characters
CommandMode
GlobalConfiguration
Default
Nosnmpserverisconfigured.
Usage
ThiscommandisusedtoconfigurearemotemanagersIPaddress.
ThiscommandisusedforSNMPv3.
Examples
Thefollowingissampleoutputfromthesnmp-servertarget-addresscommand:
Switch#configureterminal
Switch(config)#snmp-servertarget-addresstarg1paramparm110.0.0.2taglisttmptag
RelatedCommands
showsnmp-servertarget-address260215.5.11snmp-servertarget-params
CommandPurpose
ToconfiguretheparametersofthehosttoacceptSNMPrequestmessageinglobal
configurationmode.Toremovethehost`sparameters,usethenoformofthe
command.
CommandSyntax
snmp-servertarget-paramsPARAMuserUSER_NAMEsecurity-modelv3message-
processingv3(noauth|auth|priv)
nosnmp-servertarget-paramsUSER_NAME
Parameter ParameterDescriptionParameterValue
PARAM Defineaparamname
whichhelptofindtarget
paramstableUpto31characters
USER_NAME Nameofuser Upto31characters
noauth Specifiesnoauthentication
ofapacket-
auth Specifiesauthenticationof
apacketwithout
encryptingit-
priv Specifiesauthenticationof
apacketwithencryption-
CommandMode
GlobalConfiguration
Default
Nosnmpparamsisconfigured2603Usage
ThiscommandisusedforSNMPv3.
Examples
Thefollowingexampleshowshowtosetp1parameters:
Switch#configureterminal
Switch(config)#snmp-servertarget-paramsp1useru1security-modelv3message-processingv3auth
RelatedCommands
showsnmp-servertarget-params
15.5.12snmp-servertrapenable
CommandPurpose
ToenableallSimpleNetworkManagementProtocol(SNMP)notificationtypesthat
areavailableonyoursystem,usethesnmp-servertrapenablecommandinglobal
configurationmode.TodisableallavailableSNMPnotifications,usethenoformof
thiscommand.
CommandSyntax
snmp-servertrapenableNOTIFICATION-TYPE
nosnmp-servertrapenableNOTIFICATION-TYPE
Parameter ParameterDescriptionParameterValue
NOTIFICATION-TYPETypeofnotificationto
enableordisable.Iftheall
argumentisspecified,all
notificationsavailableon
yourdeviceareenabledor
disabled(ifthenoformis
used)all/bgp/coldstart/ipsla/linkd
own/linkup/loopback-
detect/ptp/synce/system/w
armstart/bfd/cpu-traffic-
limit2604CommandMode
GlobalConfiguration
Default
Nonotificationscontrolledbythiscommandaresent
Usage
Thesnmp-servertrapenablecommandisusedinconjunctionwiththesnmp-server
traptarget-addresscommand.Usethesnmp-servertraptarget-addresscommandto
specifywhichhostorhostsreceiveSNMPnotifications.Tosendnotifications,you
mustconfigureatleastonesnmp-servertraptarget-addresscommand.
Examples
Thefollowingissampleoutputfromthesnmp-servertrapenablecommand:
Switch#configureterminal
Switch(config)#snmp-servertrapenableall
RelatedCommands
snmp-servertraptarget-address
15.5.13snmp-servertrapdelay
CommandPurpose
Todelaysnmp-servertrapsend,usethesnmp-servertrapdelaycommandinglobal
configurationmode.Todisabletrapdelay,usethenoformofthiscommand.
CommandSyntax
snmp-servertrapdelay(linkup|linkdown)TIMER
nosnmp-servertrapdelay(linkup|linkdown)
Parameter ParameterDescriptionParameterValue2605TIMER Thetimetodelayup/down.
Unit:100millisecond1-100
CommandMode
GlobalConfiguration
Default
Nodelayisenabled
Usage
Thelinkdownanduptrapwillsendimmediatelywhilelinkstatechange.The
commandcanconfigureadelaytimeforlinkstatustrap.Theunitis100ms.
Examples
Thefollowingissampleoutputfromthesnmp-servertrapenablecommand:
Switch#configureterminal
Switch(config)#snmp-servertrapdelaylinkup10
RelatedCommands
snmp-servertraptarget-address
15.5.14snmp-servertraptarget-address
CommandPurpose
ToconfigurearemotetrapmanagersIPaddress,usethesnmp-servertarget-
addresscommandinglobalconfigurationmode.Toremovetheconfiguration,usethe
noformofthiscommand.
CommandSyntax
snmp-servertraptarget-address(mgmt-if|vrfVRF_NAME|)(IPV4_ADDR|
IPV6_ADDR)communityCOMMUINTY(udpportUDP_PORT|)2606nosnmp-servertraptarget-address(mgmt-if|vrfVRF_NAME|)(IPV4_ADDR|
IPV6_ADDR)communityCOMMUINTY(udpportUDP_PORT|)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
vrfVRF_NAME VRFname Upto15characters
IPV4_ADDR IPv4address IPv4Address
IPV6_ADDR IPv6address IPv6Address
COMMUINTY Password-likecommunity
stringsentwiththe
notificationoperationUpto255characters
UDP_PORT (Optional)Specifiesthat
SNMPnotificationsor
informsaretobesentto
anSNMPmanager.The
defaultportis1621-65535
CommandMode
GlobalConfiguration
Default
Therouterdoesnotsendanytrapmessages.
Usage
Thiscommandisusedtospecifytheservertargetaddresstowhichthetrapissent.
Examples
Thefollowingissampleoutputfromthesnmp-servertraptarget-addresscommand:
Switch#configureterminal
Switch(config)#snmp-servertraptarget-addressmgmt-if192.168.1.100communitytestudpport60002607RelatedCommands
snmp-servertrapenable
snmp-servertrapsource-address
15.5.15snmp-servertrapsource-address
CommandPurpose
ToconfigurethetrapssourceIPaddress,usethesnmp-serversource-address
commandinglobalconfigurationmode.Toremovetheconfiguration,usethenoform
ofthiscommand.
CommandSyntax
snmp-servertrapsource-address(vrfWORD|)(IPV4_ADDR)
nosnmp-servertrapsource-address
Parameter ParameterDescriptionParameterValue
vrfWORD VRFname Upto15characters
IPV4_ADDR IPv4address IPv4Address
CommandMode
GlobalConfiguration
Default
Therouterdoesnotsendanytrapmessages.
Usage
ThiscommandisusedtospecifytheserversourceIPaddresstowhichthetrapis
sent.PleasecheckifthesourceIPexistsinaninterfacewhichisup
Examples
Thefollowingissampleoutputfromthesnmp-servertrapsource-addresscommand:2608Switch#configureterminal
Switch(config)#snmp-servertrapsource-address192.168.1.100
RelatedCommands
snmp-servertraptarget-address
15.5.16snmp-serverinformtarget-address
CommandPurpose
TospecifytherecipientofaSimpleNetworkManagementProtocol(SNMP)inform
message,usethesnmp-serverinformtarget-addresscommandinglobal
configurationmode.Toremovethespecifiedhostfromtheconfiguration,usetheno
formofthiscommand.
CommandSyntax
snmp-serverinformtarget-address(mgmt-if|vrfVRF_NAME|)(IPV4_ADDR|
IPV6_ADDR)communityCOMMUINTY(udpportUDP_PORT|)
nosnmp-serverinformtarget-address(mgmt-if|vrfVRF_NAME|)(IPV4_ADDR|
IPV6_ADDR)communityCOMMUINTY(udpportUDP_PORT|)
Parameter ParameterDescriptionParameterValue
mgmt-if Managementport -
vrfVRF_NAME VRFname Upto15characters
IPV4_ADDR IPv4address IPv4Address
IPV6_ADDR IPv6address IPv6Address
COMMUINTY Password-likecommunity
stringsentwiththe
notificationoperationUpto255characters
UDP_PORT (Optional)Specifiesthat
SNMPnotificationsor
informsaretobesentto
anSNMPmanager.The
defaultportis1621-655352609CommandMode
GlobalConfiguration
Default
Therouterdoesnotsendanyinformmessages
Usage
Thiscommandisusedtospecifytheservertargetaddresstowhichtheinformissent.
Examples
Thefollowingissampleoutputfromthesnmp-serverinformtarget-addresscommand:
Switch#configureterminal
Switch(config)#snmp-serverinformtarget-addressmgmt-if192.168.1.100communitytestudpport6000
RelatedCommands
None
15.5.17snmp-serverinform
CommandPurpose
UsethiscommandinglobaltoconfigureSimpleNetworkManagementProtocol
(SNMP)informmessageparameters,includetimeoutandretries.Usethenoformof
thiscommandtoremoveinformparameters.
CommandSyntax
snmp-serverinform({retriesRETRY|timeoutTIMEOUT})
nosnmp-serverinform(retries|timeout|)
Parameter ParameterDescriptionParameterValue
RETRY Theretrytime,thedefault
valueis30-102610TIMEOUT Thetimeoutvalue,the
defaultvalueis15second1-1800s
CommandMode
GlobalConfiguration
Default
Nosnmpinformparametersisconfigured
Usage
ThiscommandisusedforSNMPv2.
Examples
Thefollowingexampleshowshowtoconfigureinformmessageparameters:
Switch(config)#snmp-serverinformtimeout10retries5
RelatedCommands
None
15.5.18snmp-serverusm-user
CommandPurpose
TospecifytherecipientofaSimpleNetworkManagementProtocol(SNMP)
notificationmessage,usethesnmp-servertraptarget-addresscommandinglobal
configurationmode.Toremovethespecifiedhostfromtheconfiguration,usetheno
formofthiscommand.
CommandSyntax
snmp-serverusm-userUSERNAME(remoteREMOTE|)(authentication(md5|
sha)(8|)AUTH_PWD(privacy(aes|des)(8|)PRIVACY_PWD|)|)
nosnmp-serverusm-userUSERNAME2611Parameter ParameterDescriptionParameterValue
USERNAME Nameoftheuseronthe
hostthatconnectstothe
agentUpto31characters
remoteREMOTE (Optional)Specifiesa
remoteSNMPentityto
whichtheuserbelongsAstringwith10-64
characters
authentication (Optional)Specifieswhich
authenticationlevelshould
beused-
md5 (Optional)Specifiesthe
HMAC-MD5authentication
level-
sha (Optional)Specifiesthe
HMAC-SHAauthentication
level-
AUTH_PWD (Optional)Stringthat
enablestheagentto
receivepacketsfromthe
hostUpto63characters
privacy (Optional)Specifiesthe
useoftheUser-based
SecurityModel(USM)for
SNMPversion3forSNMP
messagelevelsecurity-
aes (Optional)Specifiesthe
useoftheAdvanced
EncryptionStandard(AES)
algorithmforencryption-2612des Optional)Specifiestheuse
oftheDigitalEncryption
Standard(DES)algorithm
forencryption-
8 SpecifiesaHIDDEN
passwordwillfollow-
PRIVACY_PWD (Optional)Stringthat
specifiestheprivacyuser
passwordUpto63characters
CommandMode
GlobalConfiguration
Default
NoSNMPv3usersareconfigured
Usage
Toconfigurearemoteuser,specifytheIPaddressorportnumberfortheremote
SNMPagentofthedevicewheretheuserresides.
Examples
Thefollowingissampleoutputfromthesnmp-serverusm-usercommand:
Switch#configureterminal
Switch(config)#snmp-serverusm-useruser1authenticationmd5mypasswordprivacydesyourpassword
RelatedCommands
snmp-serverengineID261315.5.19snmp-serverversion
CommandPurpose
TospecifythesupportofSNMPversion,usethesnmp-serverversioncommandin
globalconfigurationmode.Torestoretothedefaultvalue,usethenoformofthis
command.
CommandSyntax
snmp-serverversion(all|v1|v2c|v3)
nosnmp-serverversion
Parameter ParameterDescriptionParameterValue
all Supportallversions(v1,
v2c,andv3)-
v1 Supportonlyv1version-
v2c Supportonlyv2cversion-
v3 Supportonlyv3version-
CommandMode
GlobalConfiguration
Default
SupportallSNMPversions
Usage
ThiscommandisusedtosettheSNMPversiontheswitchsupported.
Examples
Thefollowingissampleoutputfromthesnmp-serverversioncommand:
Switch#configureterminal
Switch(config)#snmp-serverversionall2614RelatedCommands
showsnmp-serverversion
15.5.20snmp-serverview
CommandPurpose
Tocreateorupdateaviewentry,usethesnmp-serverviewcommandinglobal
configurationmode.ToremovethespecifiedSimpleNetworkManagementProtocol
(SNMP)serverviewentry,usethenoformofthiscommand.
CommandSyntax
snmp-serverviewNAME(included|excluded)sub-tree
nosnmp-serverviewNAME(included|excluded)sub-tree
Parameter ParameterDescriptionParameterValue
NAME Labelfortheviewrecord
thatyouareupdatingor
creating.Thenameisused
toreferencetherecordUpto31characters
included ConfigurestheOID(and
subtreeOIDs)specifiedin
sub-treeargumenttobe
includedintheSNMPview-
excluded ConfigurestheOID(and
subtreeOIDs)specifiedin
sub-treeargumenttobe
explicitlyexcludedfromthe
SNMPview-
sub-tree Objectidentifierofthe
ASN.1subtreetobe
includedorexcludedfrom
theview-2615CommandMode
GlobalConfiguration
Default
Noviewentryexists
Usage
OtherSNMPcommandsrequireanSMPviewasanargument.Youusethis
commandtocreateaviewtobeusedasargumentsforothercommands.
Examples
Thefollowingissampleoutputfromthesnmp-serverviewcommand:
Switch#configureterminal
Switch(config)#snmp-serverviewabcexcluded1.3.6.2
RelatedCommands
showsnmp-serverview
15.5.21snmp-serveraccess-groupNAMEin
CommandPurpose
Tosettheaccessgroup,usethesnmp-serveraccess-groupcommandinglobal
configurationmode.Toremovetheaccessgroup,usethenoformofthiscommand.
CommandSyntax
snmp-serveraccess-groupNAMEin
Parameter ParameterDescriptionParameterValue
NAME Access-listname Upto40characters
in Inboundpackets -2616CommandMode
GlobalConfiguration
Default
Noaccessgroupisdefined
Usage
ThecommandisusedtoapplyACLinsnmp.
Examples
Thefollowingissampleoutputfromthesnmp-serveraccesscommand:
Switch#configureterminal
Switch(config)#snmp-serveraccess-groupabcin
RelatedCommands
None
15.5.22showsnmp
CommandPurpose
TodisplaytheservicesinformationofSNMP,usetheshowsnmpcommandin
privilegedEXECmode.
CommandSyntax
showsnmp
CommandMode
PrivilegedEXEC
Default
None2617Usage
ThiscommandisusedtodisplaytheserviceinformationofSNMP(enableordisable).
Examples
Thefollowingissampleoutputfromtheshowsnmpcommand:
Switch#showsnmp
SNMPservices:enable
RelatedCommands
snmp-serverenable
15.5.23showsnmp-serveraccess
CommandPurpose
TodisplaytheACLinformationofSNMP,usetheshowsnmp-serveraccess
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-serveraccess(GROUP_NAME|)
Parameter ParameterDescriptionParameterValue
GROUP_NAME SpecifyagroupnameUpto31characters
CommandMode
PrivilegedEXEC
Default
None2618Usage
Thiscommandisusedtodisplaytheaccessinformationconfiguredbycommand
snmp-serveraccess.
Examples
Thefollowingissampleoutputfromtheshowsnmp-serveraccesscommand:
Switch#showsnmp-serveraccessgp1
Groupname:gp1
Context:test
Securitymodel:usm
Securitylevel:auth
ContextMatch:exact
Readview:_all_
Writeview:none
Notifyview:none
StorageType:permanent
Rowstatus:active
RelatedCommands
snmp-serveraccess
15.5.24showsnmp-servercommunity
CommandPurpose
TodisplaytheSNMPcommunityinformation,usetheshowsnmp-servercommunity
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-servercommunity
CommandMode
PrivilegedEXEC
Default
None2619Usage
Thiscommandisusedtodisplaythecommunityinformationconfiguredbycommand
snmp-servercommunity.
Examples
Thefollowingissampleoutputfromtheshowsnmp-servercommunitycommand:
Switch#showsnmp-servercommunity
Community-AccessCommunity-StringSecurity-name
===========================================================
read-onlypublic comm1
read-writeprivate comm2
RelatedCommands
snmp-servercommunity
15.5.25showsnmp-servercontext
CommandPurpose
TodisplaytheSNMPcontextinformation,usetheshowsnmp-servercontext
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-servercontext
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplaythecontextinformationconfiguredbycommand
snmp-servercontext.2620Examples
Thefollowingissampleoutputfromtheshowsnmp-servercontextcommand:
Switch#showsnmp-servercontext
samplecontext
RelatedCommands
snmp-servercontext
15.5.26showsnmp-serverengineID
CommandPurpose
TodisplaytheidentificationofthelocalSimpleNetworkManagementProtocol
(SNMP)engineandallremoteenginesthathavebeenconfiguredontherouter,use
theshowsnmp-serverengineIDcommandinEXECmode.
CommandSyntax
showsnmp-serverengineID
CommandMode
PrivilegedEXEC
Default
None
Usage
AnSNMPengineisacopyofSNMPthatcanresideonalocalorremotedevice.
Examples
Thefollowingexamplespecifies00000009020000000c025808asthelocalengineID:
Switch#showsnmp-serverengineID
EngineID:00000009020000000c0258082621RelatedCommands
snmp-serverengineID
15.5.27showsnmp-servergroup
CommandPurpose
TodisplaythenamesofconfiguredSNMPgroups,thesecuritymodelbeingused,the
statusofthedifferentviews,andthestoragetypeofeachgroup,usetheshowsnmp-
servergroupcommandinprivilegedEXECmode.
CommandSyntax
showsnmp-servergroup(GROUP_NAME|)
Parameter ParameterDescriptionParameterValue
GROUP_NAME SpecifyagroupnameUpto31characters
CommandMode
PrivilegedEXEC
Default
None
Usage
SNMPgroupsareconfiguredusingthesnmp-servergroupcommand.
Examples
Thefollowingissampleoutputfromtheshowsnmp-servergroupcommand:
Switch#showsnmp-servergroup
Group-namemodelSecurity-name
===========================================================
a11 usma
a11 usmab2622RelatedCommands
snmp-servergroup
15.5.28showsnmp-servernotify
CommandPurpose
TodisplaynotificationinformationofSNMP,usetheshowsnmp-servernotify
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-servernotify(GROUP_NAME|)
Parameter ParameterDescriptionParameterValue
GROUP_NAME SpecifyagroupnameUpto31characters
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplaythenotificationinformationconfiguredbycommand
snmp-servernotify.
Examples
Thefollowingissampleoutputfromtheshowsnmp-servernotifycommand:
Switch#showsnmp-servernotify
Notify-nameNotify-type
===========================================================
sample trap2623RelatedCommands
snmp-servernotify
15.5.29showsnmp-serversys-info
CommandPurpose
TodisplaythesysteminformationofSNMP,usetheshowsnmp-serversys-info
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-serversys-info
CommandMode
PrivilegedEXEC
Default
None
Usage
Thesystemcontactcanbesetbyusingthesnmp-serversystem-contactcommand.
Thesystemlocationcanbesetbyusingthesnmp-serversystem-locationcommand.
Examples
Thefollowingissampleoutputfromtheshowsnmp-serversys-infocommand:
Switch#showsnmp-serversys-info
Contact:admin@sampledomain.com
Location:Denvor
RelatedCommands
snmp-serversystem-contact
snmp-serversystem-location262415.5.30showsnmp-servertrap-receiver
CommandPurpose
TodisplaytheSNMPtrapsreceiver,usetheshowsnmp-servertrap-receiver
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-servertrap-receiver
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplaytrapsreceiverinformationconfiguredbycommand
snmp-servertraptarget-addres.
Examples
Thefollowingissampleoutputfromtheshowsnmp-servertrap-receivercommand:
Switch#showsnmp-servertrap-receiver
Target-ipaddressudpportversionpdu-typecommunity
===========================================================
1.1.1.1234v2cinformpublic
1.1.1.1234v2ctrappublic
1.1.1.1234v1trappublic
RelatedCommands
snmp-servertraptarget-addres262515.5.31showsnmp-serverusm-user
CommandPurpose
TodisplayinformationabouttheconfiguredcharacteristicsofSimpleNetwork
ManagementProtocol(SNMP)users,usetheshowsnmp-serverusm-usercommand
inprivilegedEXECmode.
CommandSyntax
showsnmp-serverusm-user(USERNAME|)
Parameter ParameterDescriptionParameterValue
USERNAME (Optional)Nameofa
specificuserorusers
aboutwhichtodisplay
SNMPinformationUpto31characters
CommandMode
PrivilegedEXEC
Default
None
Usage
AnSNMPusermustbepartofanSNMPgroup,asconfiguredusingthesnmp-server
usm-usercommand.
Examples
Thefollowingissampleoutputfromtheshowsnmp-serverusm-usercommand:
Switch#showsnmp-serverusm-useruser1
EnginedID:01234567890123456789
UserName:user1
AuthProtocol:md5
privProtocol:des2626StorageType:nonvolatile
Rowstatus:active
RelatedCommands
snmp-serverusm-user
15.5.32showsnmp-serverversion
CommandPurpose
TodisplaythesupportedversionofSNMP,usetheshowsnmp-serverversion
commandinprivilegedEXECmode.
CommandSyntax
showsnmp-serverversion
CommandMode
PrivilegedEXEC
Default
None
Usage
Thiscommandisusedtodisplaysnmpversioninformationconfiguredbycommand
snmp-serverversion.
Examples
Thefollowingissampleoutputfromtheshowsnmp-serverversioncommand:
Switch#showsnmp-serverversion
SNMPv1/SNMPv2c/SNMPv3
RelatedCommands
snmp-serverversion262715.5.33showsnmp-serverview
CommandPurpose
Todisplaythefamilyname,storagetype,andstatusofaSimpleNetwork
ManagementProtocol(SNMP)configurationandassociatedMIB,usetheshow
snmp-serverviewcommandinprivilegedEXECmode.
CommandSyntax
showsnmp-serverview(NAME|)
Parameter ParameterDescriptionParameterValue
NAME Specifyaviewname Upto31characters
CommandMode
PrivilegedEXEC
Default
None
Usage
UsethiscommandtodisplaytheSNMPviewconfiguration.
Examples
Thefollowingissampleoutputfromtheshowsnmp-serverviewcommand:
Switch#showsnmp-serverview
View-nameView-typeSubtree
===========================================================
abc excluded.1.3.6.2
_all_included.0
_all_included.1
_all_included.2
_none_excluded.0
_none_excluded.1
_none_excluded.22628RelatedCommands
snmp-serverview
15.6SFLOWCommands
15.6.1sflowenable
CommandPurpose
UsethiscommandtoenableordisablesFlowglobally.
CommandSyntax
sflowenable
nosflowenable
CommandMode
GlobalConfiguration
Default
Disabled
Usage
BeforeanyothersFlowcommandcanbeconfigured,sFlowservicesmustbe
enabledglobally.UsethenoparameterwiththiscommandtoremoveallsFlow
configurationsanddisablesFlowglobally.
Examples
ThisexampleshowshowtoenablesFlowservicesglobally:
Switch#configureterminal
Switch(config)#sflowenable
RelatedCommands
showsflow262915.6.2sflowagent
CommandPurpose
UsethiscommandtoconfiguresFlowagent.
CommandSyntax
sflowagent(ipIPV4_ADDR|ipv6ipv6-addres)
nosflowagent(ip|ipv6)
Parameter ParameterDescriptionParameterValue
IPV4_ADDR AgentIPv4address IPv4Address
IPV6_ADDR AgentIPv6address IPv6Address
CommandMode
GlobalConfiguration
Default
None
Usage
UsethiscommandtoconfigureIPaddressforsflowagent.Ifnotconfiguredand
router-idhasconfigured,sflowwillusethevalidinterfacewithmaxrouter-idandthen
neverchange.
Examples
ThisexampleshowshowtoconfigureagentwithIPaddress10.0.0.254.:
Switch#configureterminal
Switch(config)#sflowagentip10.0.0.254
RelatedCommands
showsflow263015.6.3sflowcollector
CommandPurpose
UsethiscommandtoconfiguresFlowcollector.
CommandSyntax
sflowcollector(IPV4_ADDR|ipv6-addres)(UDP_PORT|)
nosflowcollector(IPV4_ADDR|ipv6-addres)(<UDP_PORT|)
Parameter ParameterDescriptionParameterValue
IPV4_ADDR CollectorIPv4addressIPv4Address
IPV6_ADDR CollectorIPv6addressIPv6Address
UDP_PORT CollectorUDPport
number,defaultis63431-65535
CommandMode
GlobalConfiguration
Default
None
Usage
UsethiscommandtoaddacollectorbyspecifyingthecombinationofIPaddressand
UDPport.Onlyuptotwouniquecombinationscanbeallowedtoadd.Usetheno
parameterwiththiscommandtodeletecollector.
Examples
ThisexampleshowshowtoaddacollectorwithIPaddress10.0.0.254andUDPport
3000.:
Switch#configureterminal
Switch(config)#sflowcollector10.0.0.25430002631RelatedCommands
showsflow
15.6.4sflowcounterinterval
CommandPurpose
UsethiscommandtoconfiguresFlowpolling-intervalforcountersample.
CommandSyntax
sflowcounterintervalINTERVAL
nosflowcounterinterval
Parameter ParameterDescriptionParameterValue
INTERVAL Intervalvalueinsecond1-2000second
CommandMode
GlobalConfiguration
Default
20seconds
Usage
UsethiscommandtosetsFlowpolling-intervalforcountersample.Usetheno
parameterwiththiscommandtorestoretothedefaultvalue.Defaultintervalvalueis
20seconds.
Examples
ThisexampleshowshowtosetsFlowpolling-intervalto10second:
Switch#configureterminal
Switch(config)#sflowcounterinterval102632RelatedCommands
showsflow
15.6.5sflowcounter-samplingenable
CommandPurpose
Usethiscommandtoenableordisablecountersamplingonspecifiedport.
CommandSyntax
sflowcounter-samplingenable
nosflowcounter-samplingenable
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
Usethiscommandtoenablecountersamplingonspecifiedport.Usetheno
parameterwiththiscommandtodisablecountersampling.Bydefault,sFlowcounter
samplingisdisabledinallports.
Thiscommandcanonlybeconfiguredonaportwhichisnotalink-agggroup
member.Theportcanbeeitheraphysicalportoralink-aggport.
Examples
ThisexampleshowshowtoenablesFlowcountersamplingoninterfaceeth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#sflowcounter-samplingenable2633RelatedCommands
showsflow
15.6.6sflowflow-samplingrate
CommandPurpose
Usethiscommandtoconfigureflowsamplingrate.
CommandSyntax
sflowflow-samplingrateRATE
nosflowflow-samplingrate
Parameter ParameterDescriptionParameterValue
RATE Sampleratevalue mustbeapowerof2,the
rangeis32-1048576
CommandMode
InterfaceConfiguration
Default
8192
Usage
UsethiscommandtosetsFlowpacketsamplingrate.Usenoparameterwiththis
commandtosetdefaultsamplingrate.Defaultsamplingratevalueis8192.
sFlowusesCPUresourcestocollectsamplesandsendsamplestothecollector.Ifa
lowsamplingrateisset,CPUutilizationcanbecomehigh.ToprotectCPUfrom
overwhelming,exceededflowsampleswouldbedropped.Ifasamplingrateless
thandefaultvalueisconfigured,apromptwillbegiventoinfothepotentialof
involvingahighCPUutilization.
Thiscommandcanonlybeconfiguredonaportwhichisnotalink-agggroup
member.Theportcanbeeitheraphysicalportoralink-aggport.2634Examples
ThisexampleshowshowtosetthesFlowsamplingrateto2048oneth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#sflowflow-samplingrate2048
%Warning:sFlowsamplingrequireshighCPUusage,especiallywithalowrate.
Itissuggestednotconfigurearatelessthandefaultvalue8192.
RelatedCommands
showsflow
15.6.7sflowflow-samplingenable
CommandPurpose
Usethiscommandtoenableordisablepacketsamplingonindividualport.
CommandSyntax
sflowflow-samplingenable(input|output|both)
nosflowflow-samplingenable(input|output|both)
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
Usethiscommandtoenableingressdirectionofpacketsamplingonindividualport.
Usethenoparameterwiththiscommandtodisablepacketsampling.Bydefault,
sFlowpacketsamplingisdisabledinallports.
Thiscommandcanonlybeconfiguredonaportwhichisnotalink-agggroup
member.Theportcanbeeitheraphysicalportoralink-aggport.2635Examples
Thisexampleshowshowtoenableinputpacketsamplingonrouteporteth-0-1:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#sflowflow-samplingenableinput
RelatedCommands
showsflow
15.6.8showsflow
CommandPurpose
Usethiscommandtoshowtherunninginformationofsflow.
CommandSyntax
showsflow
CommandMode
PrivilegedEXEC
Default
None
Usage
Usethiscommandtoshowtherunninginformationofsflow.
Examples
Thisexampleshowshowtoshowthesflowrunninginformation:
Switch#showsflow
sFlowVersion:5
sFlowGlobalInformation:
AgentIPaddress :0.0.0.0
CounterSamplingInterval:20seconds
CollectorIP :Notconfigured2636sFlowPortInformation:
Flow-SampleFlow-Sample
PortCounterFlowDirectionRate
--------------------------------------------------------
eth-0-1DisableEnableInput8192
RelatedCommands
sflowenable
sflowcollector
15.7LLDPCommands
15.7.1lldpenable(global)
CommandPurpose
ToenableLLDPfunctionglobally,usethelldpenablecommandinglobal
configurationmode.Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
lldpenable
lldpdisable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
ThefollowingexampleshowshowtoenableLLDPglobally:2637Switch#configureterminal
Switch(config)#lldpenable
RelatedCommands
lldpenable()
15.7.2lldpenable(interface)
CommandPurpose
ToenableLLDPfunctiononinterface,usethelldpenablecommandininterface
configurationmode.Todisablethisfunction,usethenoformofthiscommand.
CommandSyntax
lldpenable(txonly|txrx|rxonly)
lldpdisable
Parameter ParameterDescriptionParameterValue
txonly Enablelldppdu
transmission-
txrx Enablelldppdu
transmissionandreception-
rxonly Enablelldppdureception-
CommandMode
InterfaceConfiguration
Default
Enable
Usage
None2638Examples
ThefollowingexampleshowshowtoenableLLDPoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldpenabletxrx
RelatedCommands
lldpenable()
15.7.3lldpsystem-name
CommandPurpose
ToconfiguresystemnameforSystemNameTLV,usethelldpsystem-name
commandinglobalconfigurationmode.Torestorethedefaultconfiguration,usethe
noformofthiscommand.
CommandSyntax
lldpsystem-nameNAME
nolldpsystem-name
Parameter ParameterDescriptionParameterValue
NAME SystemName. Astringwith1-64
characters
CommandMode
GlobalConfiguration
Default
Defaultsystemnameisused.
Usage
Ifnosystemnameisconfigured,thedefaultsystemnamewillbeused.2639Examples
Thefollowingexampleshowshowtoconfiguresystemname:
Switch#configureterminal
Switch(config)#lldpsystem-nameswitch
RelatedCommands
lldpenable()
lldpenable()
15.7.4lldpsystem-description
CommandPurpose
ToconfiguresystemdescriptionforSystemDescriptionTLV,usethelldpsystem-
descriptioncommandinglobalconfigurationmode.Torestorethedefault
configuration,usethenoformofthiscommand.
CommandSyntax
lldpsystem-descriptionLINE
nolldpsystem-description
Parameter ParameterDescriptionParameterValue
LINE SystemDescription.The
rangeisfrom1to255and
spaceisallowedAstringwith1-255
characters
CommandMode
GlobalConfiguration
Default
Defaultsystemdescriptionisused.2640Usage
Ifnosystemdescriptionisconfigured,thedefaultsystemdescriptionwillbeused.
Examples
Thefollowingexampleshowshowtoconfiguresystemdescription:
Switch#configureterminal
Switch(config)#lldpsystem-descriptionswitch
RelatedCommands
lldpenable()
lldpenable()
15.7.5lldpmanagement
CommandPurpose
ToconfiguremanagementipaddressforManagementAddressTLV,usethelldp
managementipcommandinglobalconfigurationmode.Torestorethedefault
configuration,usethenoformofthiscommand.
CommandSyntax
lldpmanagement(ipADDRESS|interfaceIFNAME)
nolldpmanagement(ip|interface)
Parameter ParameterDescriptionParameterValue
ADDRESS IPv4address,like1.1.1.1IPv4Address
IFNAME NameofL3interface Support
physical/aggregation/loopb
ack/vlan/tunnel/manageme
ntports
CommandMode
GlobalConfiguration2641Default
Defaultmanagementaddressisused.
Usage
TheconfiguredIPaddresshashigherprioritythanconfiguredinterface.Ifbothof
themarenotbeconfigured,systemshouldusetheloopbackinterface,management
interface,otherinterfaceorsystemMACaddressaccordingdescendorderofpriority.
Examples
Thefollowingexampleshowshowtoconfigurethemanagementipaddress.:
Switch#configureterminal
Switch(config)#lldpmanagementip192.168.1.2
RelatedCommands
lldpenable()
lldpenable()
15.7.6lldpmsg-tx-hold
CommandPurpose
Toconfiguremsg-tx-hold,usethelldpmsg-tx-holdcommandinglobalconfiguration.
Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
lldpmsg-tx-holdNUMBER
nolldpmsg-tx-hold
Parameter ParameterDescriptionParameterValue
NUMBER msg-tx-holdvalue 2-10
CommandMode
GlobalConfiguration2642Default
Thedefaultvalueofmsg-tx-holdis4.
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguremsg-tx-hold:
Switch#configureterminal
Switch(config)#lldpmsg-tx-hold3
RelatedCommands
lldpenable()
lldpenable()
15.7.7lldptimermsg-tx-interval
CommandPurpose
Toconfiguremsg-tx-interval,usethelldptimermsg-tx-intervalcommandinglobal
configuration.Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
lldptimermsg-tx-intervalNUMBER
nolldptimermsg-tx-interval
Parameter ParameterDescriptionParameterValue
NUMBER msg-tx-intervalvalue msg-tx-hold
CommandMode
GlobalConfiguration2643Default
Thedefaultvalueofmsg-tx-intervalis30s.
Usage
None
Examples
Thefollowingexampleshowshowtoconfiguremsg-tx-interval:
Switch#configureterminal
Switch(config)#lldptimermsg-tx-interval20
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.8lldptimerreinit-delay
CommandPurpose
ToconfigurereinitDelay,usethelldptimerreinitDelaycommandinglobal
configuration.Torestorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
lldptimerreinit-delayNUMBER
nolldptimerreinit-delay
Parameter ParameterDescriptionParameterValue
NUMBER reinit-delayvalue 1-10
CommandMode
GlobalConfiguration2644Default
ThedefaultvalueofreinitDelayis2s.
Usage
None
Examples
ThefollowingexampleshowshowtoconfigurereinitDelay:
Switch#configureterminal
Switch(config)#lldptimerreinit-delay1
RelatedCommands
lldpenable()
lldpenable()
15.7.9lldptimertx-delay
CommandPurpose
Toconfiguretx-delay,usethelldptimertx-delaycommandinglobalconfiguration.To
restorethedefaultconfiguration,usethenoformofthiscommand.
CommandSyntax
lldptimertx-delayNUMBER
nolldptimertx-delay
Parameter ParameterDescriptionParameterValue
NUMBER tx-delayvalue 1-8192
CommandMode
GlobalConfiguration2645Default
Thedefaultvalueoftx-delayis2s.
Usage
Thevalueoftx-delayshouldobeytheformula:1<=tx-delay<=((0.25)*msg-tx-
interval.
Examples
Thefollowingexampleshowshowtoconfiguretx-delay:
Switch#configureterminal
Switch(config)#lldptimertx-delay3
RelatedCommands
lldpenable()
lldpenable()
15.7.10lldptlvbasic
CommandPurpose
ToselectthebasictlvusedinLLDPpacket,usethelldptlvbasiccommandin
interfaceconfiguration.Tocancelthetlv,usethenoformofthiscommand..
CommandSyntax
lldptlvbasic{port-description|system-name|system-description|system-
capabilities|management-address|all}
nolldptlvbasic{port-description|system-name|system-description|system-
capabilities|management-address|all}
Parameter ParameterDescriptionParameterValue
port-description SelectPortDescriptionTlv-
system-name SelectSystemNameTlv-2646system-description SelectSystemDescription
Tlv-
system-capabilities SelectSystemCapabilities
Tlv-
management-addressSelectManagement
AddressTlv-
all SelectAllbasictlvs -
CommandMode
InterfaceConfiguration
Default
Allbasictlvsisselected.
Usage
None
Examples
Thefollowingexampleshowshowtoselectbasictlv:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlvbasicsystem-name
RelatedCommands
lldpenable(global)
lldpenable(interface)264715.7.11lldptlv8021-org-specific
CommandPurpose
ToselecttheIEEE802.1tlvsusedinLLDPpacket,usethelldptlv8021-org-specific
commandininterfaceconfiguration.Tocancelthetlv,usethenoformofthis
command..
CommandSyntax
lldptlv8021-org-specific{port-vlan|protocol-vlan|vlan-name|protocol-id|link-
aggregation|dcbx|all}
nolldptlv8021-org-specific{port-vlan|protocol-vlan|vlan-name|protocol-id|link-
aggregation|dcbx|all}
Parameter ParameterDescriptionParameterValue
port-vlan SelectPortVlanIDTlv-
protocol-vlan SelectPortandProtocol
VlanIDTlv-
vlan-name SelectVlanNameTlv -
protocol-id SelectProtocolIdentityTlv-
link-aggregation SelectLinkAggregation
Tlv-
dcbx SelectDCBXTLV -
all SelectAllIEEE802.1tlvs,
excludeLinkAggregation
Tlv-
CommandMode
InterfaceConfiguration
Default
AllIEEE802.1tlvsisselected,excludeLinkAggregationTlv.2648Usage
LinkAggregationTlvinIEEE802.3tlvsetisusedbydefault.
Examples
ThefollowingexampleshowshowtoselectIEEE802.1tlv:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlv8021-org-specificvlan-name
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.12lldptlv8021-org-specificvlan-name-value
CommandPurpose
ToconfigurethevalueforVLANNAMETLVintheIEEE802.1tlvs,usethelldptlv
8021-org-specificvlan-name-valuecommandininterfaceconfiguration.Tocancelthe
configuration,usethenoformofthiscommand..
CommandSyntax
lldptlv8021-org-specificvlan-name-valueVLAN_ID
nolldptlv8021-org-specificvlan-name-value
Parameter ParameterDescriptionParameterValue
VLAN_ID ThevalueofVlanIDfor
theVLANNAMETLV1-4094
CommandMode
InterfaceConfiguration2649Default
TheVLANNAMETLVwillcontaintheinformationofnativevlan.
Usage
None
Examples
ThefollowingexampleshowshowtoconfigureVLANNAMETLV:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlv8021-org-specificvlan-name-value2000
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.13lldptlv8023-org-specific
CommandPurpose
ToselecttheIEEE802.3tlvsusedinLLDPpacket,usethelldptlv8023-org-specific
commandininterfaceconfiguration.Tocancelthetlv,usethenoformofthis
command..
CommandSyntax
lldptlv8023-org-specific{mac-phy-cfg|power|link-aggregation|max-frame-size|
all}
nolldptlv8023-org-specific{mac-phy-cfg|power|link-aggregation|max-frame-size
|all}
Parameter ParameterDescriptionParameterValue
mac-phy-cfg SelectMAC/PHY
Configuration/StatusTLV-2650power SelectPowerViaMDITlv-
link-aggregation SelectLinkAggregation
Tlv-
max-frame-size SelectMaximumFrame
SizeTlv-
all SelectAllIEEE802.3tlvs-
CommandMode
InterfaceConfiguration
Default
AllIEEE802.3tlvsisselected.
Usage
LinkAggregationTlvinIEEE802.3tlvsetisusedbydefault.
Examples
ThefollowingexampleshowshowtoselectIEEE802.3tlv:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlv8023-org-specificpower
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.14lldptlvmed
CommandPurpose
ToselecttheMEDtlvsusedinLLDPpacket,usethelldptlvmedcommandin
interfaceconfiguration.Tocancelthetlv,usethenoformofthiscommand..2651CommandSyntax
lldptlvmed{network-policy|ext-power|inventory|all}
nolldptlvmed{network-policy|ext-power|inventory|all}
Parameter ParameterDescriptionParameterValue
network-policy SelectNetworkPolicyTLV-
ext-power SelectExtendPower-Via-
MDITlv-
inventory SelectInventoryTlv -
all SelectAllMEDtlvs,
excludeLocation
IdentificationTlv-
CommandMode
InterfaceConfiguration
Default
AllMEDtlvsisselected,excludeLocationIdentificationTlv.
Usage
LLDP-MEDCapabilitiesTLVwillbeaddedautomaticallywhenanyothertlvinMED
tlvsetwasselected,andcanceledwhennootherMEDtlvexceptitselfwasselected.
Examples
ThefollowingexampleshowshowtoselectMEDtlv:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlvmedinventory
RelatedCommands
lldpenable(global)2652lldpenable(interface)
15.7.15lldptlvmedlocation-id
CommandPurpose
ToselectandconfiguretheMEDLocation-idtlvusedinLLDPpacket,usethelldptlv
medlocation-idcommandininterfaceconfiguration.Tocancelthetlv,usethenoform
ofthiscommand..
CommandSyntax
lldptlvmedlocation-id(ecs-elinVALUE|civicDEV-TYPECODECA1-TYPECA1-
VALUE(CA2-TYPECA2-VALUE(CA3-TYPECA3-VALUE(CA4-TYPECA4-
VALUE(CA5-TYPECA5-VALUE(CA6-TYPECA6-VALUE(CA7-TYPECA7-
VALUE(CA8-TYPECA8-VALUE(CA9-TYPECA9-VALUE(CA10-TYPECA10-
VALUE|)|)|)|)|)|)|)|)|))
nolldptlvmedlocation-id
Parameter ParameterDescriptionParameterValue
ecs-elinVALUE TheECS-ELINaddress
shouldbeatelephone
numberTheECS-ELINaddress
shouldbeatelephone
numberinrange[10-25]
civicDEV-TYPE DEV-TYPE,0-DHCP
Server,1-thecloset
networkdevice,2-current
devic0-2
CODE Thetwo-letterISO3166
countrycodeincapital
ASCIIletters,eg.,USCODE,Thetwo-letterISO
3166countrycodein
capitalASCIIletters
CA(n)-TYPECA(n)-VALUEn=1-10 CA-TYPECA-VALUE,The
maxnumberofaddressis
10,therangeofCA-TYPE
is0-255,thelengthofCA-
VALUEis[1-232]2653CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtoconfigureMEDlocation-idtlv:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#lldptlvmedlocation-idecs-elin1234567890
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.16debuglldp
CommandPurpose
UsethiscommandtoturnonthedebugswitchesofLLDPmodule.
Torestorethedefault,usethenoformofthiscommand
CommandSyntax
debuglldp(events|packet|all|tlv-info)
nodebuglldp(events|packet|all|tlv-info)
Parameter ParameterDescriptionParameterValue
events LLDPevents -2654packet LLDPPacketinformation-
all Turnalldebuggingon -
tlv-info EnableTLVinformation
debugs-
CommandMode
PrivilegedEXEC
Default
None
Usage
UsecommandterminalmonitortomakedebugmessagesprintontheVTY
immediately.
Usecommandshowloggingbuffertocheckthedebugmessagesinthelogging
buffer.
Examples
Thefollowingissampletoopenlldpdebugswitches:
Switch#debuglldpall
RelatedCommands
terminalmonitor
showloggingbuffer
15.7.17showlldplocal
CommandPurpose
TodisplaytheLLDPlocalinformation,usetheshowlldplocalcommandinprivileged
EXECmode.2655CommandSyntax
showlldplocal(config|tlv-info)(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
config ConfigurationInformation-
tlv-info LocalLLDPTLV
information-
interface DisplayLLDPconfiguration
ortlvinformationofspecial
interface-
IFNAME Interfacenameonly
allowedphysicalinterfaceSupportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
Ifinterfaceisnotspecified,thiscommandwilldisplaytheglobalinformationofLLDP.
Examples
ThefollowingexampleshowshowtodisplayLLDPconfiguration:
Switch#showlldplocalconfig
LLDPglobalconfiguration:
============================================================
LLDPfunctionglobalenabled:NO
LLDPmsgTxHold:4
LLDPmsgTxInterval:30
LLDPreinitDelay:2
LLDPtxDelay:2
Switch#showlldplocalconfiginterfaceeth-0-4
LLDPconfigurationoninterfaceeth-0-4:2656============================================================
LLDPadminstatus:Disabled
BasicoptionalTLVEnabled:
PortDescriptionTLV
SystemNameTLV
SystemDescriptionTLV
SystemCapabilitiesTLV
ManagementAddressTLV
IEEE802.1TLVEnabled:
PortVlanIDTLV
PortandProtocolVlanIDTLV
VlanNameTLV
ProtocolIdentityTLV
IEEE802.3TLVEnabled:
MAC/PHYConfiguration/StatusTLV
PowerViaMDITLV
LinkAggregationTLV
MaximumFrameSizeTLV
LLDP-MEDTLVEnabled:
MedCapabilitiesTLV
NetworkPolicyTLV
ExtendedPower-via-MDITLV
InventoryTLV
RelatedCommands
lldpenable(global)
lldpenable(interface)
lldptlvbasic
lldptlvmed
lldptlv8023-org-specific
lldptlv8021-org-specific
lldpmsg-tx-hold
lldptimermsg-tx-interval
lldptimerreinitDelay
lldptimertx-delay265715.7.18showlldpneighbor
CommandPurpose
TodisplayLLDPneighborinformation,usetheshowlldpneighborcommandin
privilegedEXECmode.
CommandSyntax
showlldpneighbor(interfaceIFNAME|)(brief|)
Parameter ParameterDescriptionParameterValue
interface DisplayLLDPneighbor
informationofspecial
interface-
IFNAME Interfacenameonly
allowedphysicalinterfaceSupportphysicalports
brief Displaybriefinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaytheLLDPneighborinformation.
Examples
ThefollowingexampleshowshowtodisplayLLDPneighborinformation:
Switch#showlldpneighborinterfaceeth-0-4brief
LocalPort:eth-0-4
RemotePort:eth-0-6
HoldTime:1202658ExpireTime:116
SystemName:switch
------------------------------------------------------------
RelatedCommands
lldpenable(global)
lldpenable(interface)
15.7.19showlldpstatistics
CommandPurpose
TodisplaythestatisticsofLLDPpackets,usetheshowlldpstatisticscommandin
privilegedEXECmode.
CommandSyntax
showlldpstatistics(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interface DisplayLLDPstatisticsof
specialinterface-
IFNAME Interfacenameonly
allowedphysicalinterfaceSupportphysicalports
CommandMode
PrivilegedEXEC
Default
None
Usage
ThiscommandisusedtodisplaydetailLLDPstatistics.2659Examples
ThefollowingexampleshowshowtodisplayLLDPstatistics:
Switch#showlldpstatisticsinterfaceeth-0-4
LLDPstatisticsinformation:
============================================================
LLDPPortstatisticsforeth-0-4
Framestransmitted:568
FramesAgedout:0
FramesDiscarded:0
FrameswithError:0
FramesRecieved:364
TLVsdiscarded:0
TLVsunrecognized:0
RelatedCommands
clearlldpstatistics
15.7.20clearlldpstatistics
CommandPurpose
ToresetthestatisticsofLLDPpackets,usetheclearlldpstatisticscommandin
privilegedEXECmode.
CommandSyntax
clearlldpstatistics(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
interface ClearLLDPstatisticsof
specialinterface-
IFNAME Interfacenameonly
allowedphysicalinterfaceSupportphysicalports
CommandMode
PrivilegedEXEC2660Default
None
Usage
ThiscommandisusedtoresetLLDPstatistics.
Examples
ThefollowingexampleshowshowtoclearLLDPstatistics:
Switch#clearlldpstatistics
RelatedCommands
showlldpstatistics
15.8IPFIXCommands
15.8.1ipfixrecorder
CommandPurpose
Usethiscommandtocreateaipfixrecorderandenterrecorderconfiguremode.To
removetheipfixrecorder,usethenoformofthiscommand.
CommandSyntax
ipfixrecorderNAME
noipfixrecorderNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixrecordername Upto32characters
CommandMode
GlobalConfiguration2661Default
None
Usage
IfipfixrecorderhasexisteditwillenterIPFIXrecorderConfigurationifipfix
recorderisnewitwillcreatearecorderandenterIPFIXrecorderConfiguration
thiscommandshouldworkwiththecommandsofmatchandcollect.
Examples
Thisexampleshowshowtocreateipfixrecorderrecorder1inglobalconfigurationand
enterIPFIXrecorderConfiguration:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#
Deleteipfixrecorderrecorder1:
Switch(config)#noipfixrecorderrecorder1
Switch#configureterminal
Switch(config)#noipfixrecorderrecorder1
RelatedCommands
decription
matchipv4
matchipv6
matchmpls
matchtransport
collectttl
collectflow
collectcounter
collectquality266215.8.2description
CommandPurpose
Thiscommandusedtodescribeipfixrecorderusethenoformofthiscommandto
deletethisdescription.
CommandSyntax
descriptionDESCRIPTION
Parameter ParameterDescriptionParameterValue
DESCRIPTION ipfixmonitordescriptionThelengthofipfixmonitor
descriptionshouldnot
exceed64characters
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtodescriberecorderinIPFIXrecorderConfiguration:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#descrptionthisisaipfixrecorder
Thisexampleshowshowtodeletethedescriptionoftherecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#nodescription2663RelatedCommands
None
15.8.3matchipv4
CommandPurpose
Thiscommandconfiguresthefieldsofipv4inipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
matchipv4(source|destination)address(maskIP_MASK_LEN|)
matchipv4dscp|ecn|ttl
nomatchipv4source|destinationaddress
nomatchipv4dscp|ecn|ttl
Parameter ParameterDescriptionParameterValue
source ipv4sourceipaddress-
destination ipv4destinationipaddress-
dscp ipv4dscpvalue -
ecn ipv4ecnvalue -
ttl ipv4ttlvalue -
IP_MASK_LEN masklengthforipv4
address1-32
CommandMode
IPFIXrecorderConfiguration
Default
Defaultvalueis322664Usage
None
Examples
Thisexampleshowshowtoconfiguretouseipv4sourceaddressandipv4
destinationaddressinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchipv4sourceaddress
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchipv4destinationaddress
RelatedCommands
None
15.8.4matchipv6
CommandPurpose
Thiscommandconfiguresthefieldsofipv6inipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
matchipv6(source|destination)address(maskIPV6_MASK_LEN|)
nomatchipv6source|destinationaddress
matchipv6flowlabel|dscp
nomatchipv6flowlabel|dscp
Parameter ParameterDescriptionParameterValue
source ipv6sourceipaddress-
destination ipv4destinationipaddress-
dscp ipv6dscpvalue -2665flowlabel ipv6flowlabelvalue -
IPV6_MASK_LEN masklengthforipv6
addressrangeis1-128andmust
bethemultipleof4
CommandMode
IPFIXrecorderConfiguration
Default
Defaultvalueis128
Usage
None
Examples
Thisexampleshowshowtoconfiguretouseipv6sourceaddressandipv6
destinationaddressinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchipv6sourceaddress
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchipv6destinationaddress
RelatedCommands
None
15.8.5matchmac
CommandPurpose
thiscommandconfiguresthefieldsofmacinipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.2666CommandSyntax
matchmacdestination|sourceaddress
nomatchmacdestination|sourceaddress
Parameter ParameterDescriptionParameterValue
source Sourcemacaddress -
destination Destinationmacaddress-
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousesourcemacaddressinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchmacsourceaddress
RelatedCommands
None
15.8.6matchtransport
CommandPurpose
Thiscommandconfiguresthefieldsoftransportinipfixrecorder,usethenoformof
thiscommandtodeletethisconfigure.2667CommandSyntax
matchtransportdestination-port|source-port|type
nomatchtransportdestination-port|source-port|type
matchtransporticmpopcode|type
nomatchtransporticmpopcode|type
Parameter ParameterDescriptionParameterValue
destination-port Destinationport -
source-port Sourceport -
type Transportlayertype -
opcode Icmpoperatedcode -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousesourceportanddestinationportof
transportinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchtransportsource-port
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchtransportdestination-port2668RelatedCommands
None
15.8.7matchvlan
CommandPurpose
Thiscommandconfiguresthefieldsofvlaninipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
matchvlaninner|
nomatchvlaninner|
Parameter ParameterDescriptionParameterValue
inner InnerVLAN -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretouseinnervlaninipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchvlaninner2669RelatedCommands
None
15.8.8matchcos
CommandPurpose
Thiscommandconfiguresthefieldsofcosinipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
matchcosinner|
nomatchcosinner|
Parameter ParameterDescriptionParameterValue
inner InnerCOS -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretouseinnercosinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchcosinner2670RelatedCommands
None
15.8.9matchinterface(input|output)
CommandPurpose
Thiscommandconfiguresthefieldsofinterfaceinipfixrecorder,usethenoformof
thiscommandtodeletethisconfigure.
CommandSyntax
matchinterface(input|output)
nomatchinterface(input|output)
Parameter ParameterDescriptionParameterValue
input inputdirection -
output outputdirection -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigureinputdirectioninipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchinterfaceinput2671RelatedCommands
None
15.8.10matchvxlan-vni
CommandPurpose
Thiscommandconfiguresthefieldsofvxlan-vniinipfixrecorder,usethenoformof
thiscommandtodeletethisconfigure.
CommandSyntax
matchvxlan-vni
nomatchvxlan-vni
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousevxlan-vniinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchvxlan-vni
RelatedCommands
None267215.8.11matchnvgre-key
CommandPurpose
Thiscommandconfiguresthefieldsofnvgre-keyinipfixrecorder,usethenoformof
thiscommandtodeletethisconfigure.
CommandSyntax
matchnvgre-key
nomatchnvgre-key
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousenvgre-keyinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchnvgre-key
RelatedCommands
None
15.8.12matchtransporttcpflags
CommandPurpose
Thiscommandconfiguresthetcpflagsfieldsofpacketinipfixrecorder,usetheno
formofthiscommandtodeletethisconfigure.2673CommandSyntax
matchtransporttcpflags({ack|cwr|ece|fin|psh|rst|syn|urg}|)
nomatchtransporttcpflags({ack|cwr|ece|fin|psh|rst|syn|urg}|)
Parameter ParameterDescriptionParameterValue
ack TCPacknowledgement-
cwr TCPcongestionwindow
reduced-
ece TCPExplicitNotification
Congestionecho-
fin TCPfinish -
psh TCPpush -
rst TCPreset -
syn TCPsynchronize -
urg TCPurgent -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousetcpflags:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchtransporttcpflagsack2674RelatedCommands
None
15.8.13matchpacket(drop|non-drop)
CommandPurpose
Thiscommandconfiguresthefieldsofpacketinipfixrecorder,usethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
matchpacket(drop|non-drop)
nomatchpacket(drop|non-drop)
Parameter ParameterDescriptionParameterValue
drop Droppacket -
non-drop Non-droppacket -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretousedroppacket:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#matchpacketdrop2675RelatedCommands
None
15.8.14collectcounter
CommandPurpose
thiscommandconfiguresbytenumber,packetnumberanddroppedpacketnumber
thatneededtobecollectedinipfixrecorder,usethenoformofthiscommandto
deletethisconfigure.
CommandSyntax
collectcounterbytes|packets(dropped|)
nocollectcounterbytes|packets(dropped|)
Parameter ParameterDescriptionParameterValue
bytes Collectflowwithbyte
number-
packets Collectflowwithpacket
number-
packetsdropped Collectflowwithdropped
packetnumber-
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None2676Examples
Thisexampleshowshowtoconfiguretocollectthenumberofflowsbyteinipfix
recorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#collectcounterbytes
RelatedCommands
None
15.8.15collectflow
CommandPurpose
Thiscommandconfigurestocollectipfixflowinformationinipfixrecorder,usetheno
formofthiscommandtodeletethisconfigure.
CommandSyntax
collectflow(drop|destination|fragmentation)
nocollectflow(drop|destination|fragmentation)
Parameter ParameterDescriptionParameterValue
drop Onlycollectthedroped
flows-
destination Collectdestinationaddress
offlows-
fragmentation Onlycollectthe
fragmentedflows-
CommandMode
IPFIXrecorderConfiguration2677Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretocollectthedestinationaddressofflowsin
ipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#collectflowdestination
RelatedCommands
None
15.8.16collectttl
CommandPurpose
Thiscommandconfigurestocollectipfixflowinformationaboutttlinipfixrecorder,
usethenoformofthiscommandtodeletethisconfigure.
CommandSyntax
collectttl(maximum|minimum|changed|)
nocollectttl(maximum|minimum|changed|)
Parameter ParameterDescriptionParameterValue
maximum Collectflowmaxttlvalue-
minimum Collectflowminttlvalue-
changed Collectflowttlchanged
history-2678CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretocollectthemaximumttlandminimumttlof
theflowsinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#collectttlmaximum
Switch(Config-ipfix-reocrder)#collectttlminimum
RelatedCommands
None
15.8.17collectquality
CommandPurpose
Thiscommandconfigurestocollectipfixflowqualityinformationinipfixrecorder,
includejitterandlatency,usethenoformofthiscommandtodeletethisconfigure.
CommandSyntax
collectjitter(maximum|minimum|average)
collectlatency(maximum|minimum|average|last)
Parameter ParameterDescriptionParameterValue
maximum Collectmaxvalue -2679minimum Collectminvalue -
average Collectaveragevalue -
last Collectlastvalue -
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretocollectthemaximumjitterandminimumjitter
oftheflowsinipfixrecorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#collectjittermaximum
Switch(Config-ipfix-reocrder)#collectjitterminimum
RelatedCommands
None
15.8.18collecttimestamp
CommandPurpose
Thiscommandconfigurestocollectipfixflowinformationabouttimestampinipfix
recorder,usethenoformofthiscommandtodeletethisconfigure.
CommandSyntax
collecttimestamp(first|last)2680nocollecttimestamp(first|last)
Parameter ParameterDescriptionParameterValue
first Collectflowstart
timestamp-
last Collectflowendtimestamp-
CommandMode
IPFIXrecorderConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretocollectthetimestampoftheflowsinipfix
recorder:
Switch#configureterminal
Switch(config)#ipfixrecorderrecorder1
Switch(Config-ipfix-reocrder)#collecttimestampfirst
RelatedCommands
None
15.8.19ipfixexporter
CommandPurpose
Usethiscommandtocreateaipfixexporterandenterexporterconfiguremode.
Toremovetheipfixexporter,usethenoformofthiscommand.2681CommandSyntax
ipfixexporterNAME
noipfixexporterNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixexportername Upto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfipfixexporterhasexisteditwillenterIPFIXexporterConfigurationifipfix
exporterisnewitwillcreateexporterandenterIPFIXexporterConfigurationthis
commandshouldworkwiththeothercommands.
Examples
Thisexampleshowshowtocreateipfixexporterexporter1inglobalconfigurationand
enterIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#
Thisexampleshowshowtodeleteipfixexporterexporter1:
Switch#configureterminal
Switch(config)#noipfixexporterexporter1
RelatedCommands
templatedatatimeout
flowdatatimeout
eventflowstart2682eventflowend(tcp-end|timeout)
transportprotocol(udp|tcp)
15.8.20description
CommandPurpose
Thiscommandusedtodescribeipfixexporterusethenoformofthiscommandto
deletethisdescription.
CommandSyntax
descriptionDESCRIPTION
Parameter ParameterDescriptionParameterValue
DESCRIPTION IpfixexporterdescriptionUpto64characters
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#descrptionthisisaipfixexporter
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#nodescription
RelatedCommands
None268315.8.21destination
CommandPurpose
Thiscommandusedtoconfigurecollecterhostnamethatneedtoreceiveflow
recordsinipfixexporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
destinationHOST
nodestinationHOST
Parameter ParameterDescriptionParameterValue
HOST Thelengthofhostname
shouldnotexceed32
charactersUpto32characters
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
Ifyouusehostasdestinationofexporter,thehostwillberesolvedimmediatelyand
theipaddressisstored.Ifthehost-ipmappdingchangesdynamically,exporterdoes
notdetectthis.ItwillcontinuetosendpacketstooriginalIPaddress.
Examples
Thisexampleshowshowtoconfiguredestinationashost1inIPFIXexporters
Configuration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#destinationhost12684RelatedCommands
None
15.8.22dscp
CommandPurpose
thiscommandusedtoconfigurethedscpvalueofthemessagethatneedtobe
sendedinipfixexporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
dscpDSCP
Parameter ParameterDescriptionParameterValue
DSCP dscpvalue 0-63
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguredscptobe20inIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#dscp20
RelatedCommands
None268515.8.23domain-id
CommandPurpose
Thiscommandusedtoconfiguretheipfixdomainvalueofthemessagethatneedsto
besentinipfixexporter,usethenoformofthiscommandtodeletethisdescription.
CommandSyntax
domain-idID
Parameter ParameterDescriptionParameterValue
ID domainid 1-65535
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguredomain-idtobe1000inIPFIXexporter
Configuration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#domain-id1000
RelatedCommands
None268615.8.24sourceinterface
CommandPurpose
Thiscommandusedtoconfigurewhichinterfaceshouldsendipfixrecordinipfix
exporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
sourceinterfaceinterface-number
nosourceinterface-number
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigureuseinterfaceeth-0-1tosendipfixrecordsin
IPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#sourceinterfaceeth-0-1
RelatedCommands
None268715.8.25templatedatatimeout
CommandPurpose
Thiscommandusedtoconfiguretimeintervalofsendingtemplatedatainipfix
exporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
templatedatatimeoutTIMEOUT
notemplatedatatimeout
Parameter ParameterDescriptionParameterValue
TIMEOUT templatedatatimeout1-86400
CommandMode
IPFIXexporterConfiguration
Default
600
Usage
None
Examples
Thisexampleshowshowtoconfiguretimeintervalofsendingtemplatedatatobe
200secondsinIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#templatedatatimeout200
RelatedCommands
None268815.8.26flowdatatimeout
CommandPurpose
Thiscommandusedtoconfiguretimeintervalofsendingflowdatainipfixexporter
usethenoformofthiscommandtodeletethisdescription.
CommandSyntax
flowdatatimeoutTIMEOUT
noflowdatatimeout
Parameter ParameterDescriptionParameterValue
TIMEOUT flowdatatimeout 1-86400
CommandMode
IPFIXexporterConfiguration
Default
600
Usage
None
Examples
Thisexampleshowshowtoconfiguretimeintervalofsendingflowdatatobe200
secondsinIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#flowdatatimeout200
RelatedCommands
None268915.8.27transportprotocol
CommandPurpose
Thiscommandusedtoconfiguretousewhichtransportwhensendmessageinipfix
exporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
transportprotocoludpportUDP_PORT
notransportprotocol
Parameter ParameterDescriptionParameterValue
UDP_PORT transportprotocolnumberRangeis2000to65535
Defaultis2055
CommandMode
IPFIXexporterConfiguration
Default
2055
Usage
None
Examples
Thisexampleshowshowtoconfiguretransportprotocolofflowdatasendedtobe
udpanditsportis3500inIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#transportprotocoludp3500
RelatedCommands
None269015.8.28ttl
CommandPurpose
Thiscommandusedtoconfigurethettlofthesendedmessageinipfixexporteruse
thenoformofthiscommandtodeletethisdescription.
CommandSyntax
ttlTTL
nottl
Parameter ParameterDescriptionParameterValue
TTL TTLvalue 1-255
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigurettlvalueofflowdatatobe255inIPFIX
exporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#ttl255
RelatedCommands
None269115.8.29eventflow
CommandPurpose
Thiscommandusedtoconfigurewhicheventshouldtriggletosendflowinformation
atonceinipfixexporterusethenoformofthiscommandtodeletethisdescription.
CommandSyntax
eventflowstart
noeventflowstart
eventflowend(tcp-end|timeout)
noeventflowend(tcp-end|timeout)
CommandMode
IPFIXexporterConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretheeventaboutendingtcptransmissionofflow
datawilltriggletosendflowinformationinIPFIXexporterConfiguration:
Switch#configureterminal
Switch(config)#ipfixexporterexporter1
Switch(Config-ipfix-exporter)#eventflowtcp-end
RelatedCommands
None269215.8.30ipfixsampler
CommandPurpose
Usethiscommandtocreateaipfixsamplerandentersamplerconfiguremode.
Toremovetheipfixsampler,usethenoformofthiscommand.
CommandSyntax
ipfixsamplerNAME
noipfixsamplerNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixsamplername Upto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
IfipfixsamplerhasexisteditwillenterIPFIXsamplerConfigurationifipfixsampler
isnewitwillcreatesamplerandenterIPFIXsamplerConfigurationthiscommand
shouldworkwiththecommandofmatchandcollect.
Examples
Thisexampleshowshowtocreateipfixsamplersampler1inglobalconfigurationand
enterIPFIXsamplerConfiguration:
Switch#configureterminal
Switch(config)#ipfixsamplersampler1
Switch(Config-ipfix-sampler)#
Thisexampleshowshowtodeleteipfixsamplersampler1:2693Switch#configureterminal
Switch(config)#noipfixsamplersampler1
RelatedCommands
1out-of
15.8.31description
CommandPurpose
Thiscommandusedtodescribeipfixsamplerusethenoformofthiscommandto
deletethisdescription.
CommandSyntax
descriptionDESCRIPTION
Parameter ParameterDescriptionParameterValue
DESCRIPTION ipfixsamplerdescriptionUpto64characters
CommandMode
IPFIXsamplerConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipfixsamplersampler1
Switch(Config-ipfix-sampler)#descrptionthisisaipfixsampler
Switch#configureterminal
Switch(config)#ipfixsamplersampler1
Switch(Config-ipfix-sampler)#nodescription2694RelatedCommands
None
15.8.321out-of
CommandPurpose
Thiscommandusedtoconfiguretherateofipfixsamplerusethenoformofthis
commandtodeletethisconfigure.
CommandSyntax
1outofCLI_IPFIX_SAMPLER_RATE_RNG
Parameter ParameterDescriptionParameterValue
CLI_IPFIX_SAMPLER_RA
TE_RNGHowmanypacketswill
sampleonepacket1-65535
CommandMode
IPFIXsamplerConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretherateofsamplingis1/100inIPFIXsampler
Configuration:
Switch#configureterminal
Switch(config)#ipfixsamplersampler1
Switch(Config-ipfix-sampler)#1outof1002695RelatedCommands
None
15.8.33ipfixmonitor(global)
CommandPurpose
Usethiscommandtocreateaipfixmonitorandentermonitorconfiguremode.To
removetheipfixmonitor,usethenoformofthiscommand.
CommandSyntax
ipfixmonitorNAME
noipfixmonitorNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixmonitorname Upto32characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtocreateipfixrecorderrecorder1inglobalconfigurationand
enterIPFIXrecorderConfiguration:
Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#
Thisexampleshowshowtodeleteipfixmonitormonitor1:2696Switch#configureterminal
Switch(config)#noipfixmonitormonitor1
RelatedCommands
recorder
exporter
15.8.34description
CommandPurpose
Thiscommandusedtodescribeipfixmonitorusethenoformofthiscommandto
deletethisdescription.
CommandSyntax
descriptionDESCRIPTION
Parameter ParameterDescriptionParameterValue
DESCRIPTION Thelengthofipfixmonitor
descriptionshouldnot
exceed64charactersUpto64characters
CommandMode
IPFIXmonitorConfiguration
Default
None
Usage
None
Examples
AdddescriptoinforIPFIXmonitor:2697Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#descrptionthisisaipfixmonitor
Removedescription:
Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#nodescription
RelatedCommands
None
15.8.35recorder
CommandPurpose
Usethiscommandtocreateaipfixrecorderoftheipfixmonitor.Toremovetheipfix
monitor,usethenoformofthiscommand.
CommandSyntax
recorderNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixrecordername Upto32characters
CommandMode
IPFIXmonitorConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtocreatearecorderoftheipfixmonitorconfiguremode:2698Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#recorderrecorder1
RelatedCommands
None
15.8.36exporter
CommandPurpose
Usethiscommandtocreateaipfixexporteroftheipfixmonitor.Toremovetheipfix
monitor,usethenoformofthiscommand.
CommandSyntax
exporterNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixexportername Upto32characters
CommandMode
IPFIXmonitorConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtocreateaexporteroftheipfixmonitorconfiguremode:
Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#exporterexporter12699RelatedCommands
None
15.8.37flowmirror
CommandPurpose
Usethiscommandtocreateaipfixflowmirroroftheipfixmonitor.Toremoveflow
mirroroftheipfixmonitor,usethenoformofthiscommand.
CommandSyntax
flowmirrorpacketCLI_IPFIX_MIRROR_COUNT_RNGmonitortosession1
Parameter ParameterDescriptionParameterValue
CLI_IPFIX_MIRROR_COU
NT_RNGPacketcountvalue,first
countofpacketperflowRangeis1to255
CommandMode
IPFIXmonitorConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtocreateaflowmirroroftheipfixmonitorconfiguremode:
Switch#configureterminal
Switch(config)#ipfixmonitormonitor1
Switch(Config-ipfix-monitor)#flowmirrorpacket1monitortosession12700RelatedCommands
None
15.8.38ipfixmonitor(interface/port-group/vlangroup)
CommandPurpose
Thiscommandusedtoenableipfix.
CommandSyntax
ipfixmonitorinputNAME(samplerNAME|)
noipfixmonitorinput
Parameter ParameterDescriptionParameterValue
NAME IPFIXmonitorname Upto32characters
samplerNAME IPFIXsamplername Upto32characters
CommandMode
Vlan-groupConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoenableipfix:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ipfixmonitorinputmonitorsamplertest-sample2701RelatedCommands
None
15.8.39ipfixglobalconfigure
CommandPurpose
thiscommandusedtoenteripfixglobalconfiguremode.
CommandSyntax
ipfixglobal
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
ThisexampleshowshowtoenterIPFIXglobalconfiguremode.:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#
RelatedCommands
None
15.8.40ipfixglobalflow
CommandPurpose
thiscommandusedtoconfigureipfixglobally.2702CommandSyntax
flowexportCLI_IPFIX_CACHE_EXPORT_INTVAL_RNG
flowagingCLI_IPFIX_AGING_INTVAL_RNG
flowthresholdjitterCLI_IPFIX_JITTER_THRD_RNG
flowthresholdlatencyCLI_IPFIX_LATENCY_THRD_RNG
Parameter ParameterDescriptionParameterValue
CLI_IPFIX_CACHE_EXPO
RT_INTVAL_RNGTheintervaltimeofflow
beingexportedfromASIC
toOS.Rangeis1to1000,the
defaultis5seconds
CLI_IPFIX_AGING_INTVA
L_RNGTheagingtimeoftheflowRangeis1to65535,the
defaultis1800seconds
CLI_IPFIX_JITTER_THRD
_RNGThejitterthresholdthata
flowshouldbeexported.Rangeis1to65535,the
defaultis65535
nanoseconds.
CLI_IPFIX_LATENCY_TH
RD_RNGThelatencythresholdthat
aflowshouldbeexported.Rangeis1to16777215,
thedefaultis16777215
nanoseconds.
CommandMode
IPFIXglobalConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfiguretheexportintervaltobe10secondsinglobal
configuremode:2703Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#flowexport10
Thisexampleshowshowtoconfiguretheagingtimetobe200secondsinglobal
configuremode:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#flowaging200
Thisexampleshowshowtoconfigurethejitterthresholdtobe100nsinIPFIXglobal
configuremode:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#flowthresholdjitter100
Thisexampleshowshowtoconfigurethelatencythresholdtobe100nsinIPFIX
globalconfiguremode:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#flowthresholdlatency100
RelatedCommands
None
15.8.41ipfixhardware-telemetryenable
CommandPurpose
Thiscommandusedtoenableipfixhardware-telemetry.Todisableipfixhardware-
telemetry,usethenoformofthiscommand.
CommandSyntax
featurehardware-telemetry
nofeaturehardware-telemetry
CommandMode
IPFIXglobalconfiguration2704Default
None
Usage
None
Examples
Thisexampleshowshowtoenableipfixhardware-telemetry:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#featurehardware-telemetry
Warning:AllipfixcachesstoredinOSwillbecleared,continue?(y/n):y
Thisexampleshowshowtodisableipfixhardware-telemetry:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#nofeaturehardware-telemetry
RelatedCommands
None
15.8.42ipfixhardware-telemetrydest
CommandPurpose
Thiscommandusedtoconfigipfixhardware-telemetrydestinationaddress.To
removedestinationaddress,usethenoformofthiscommand.
CommandSyntax
hardware-telemetrydestinationHOST
hardware-telemetrydestination(ipv4|ipv6)ADDR
nohardware-telemetrydestination
Parameter ParameterDescriptionParameterValue2705HOST Thelengthofhostname
shouldnotexceed32
charactersUpto32characters
ipv4 useIPv4address -
ipv6 useIPv6address -
ADDR address -
CommandMode
IPFIXglobalconfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoconfigureipfixhardware-telemetrydestinationaddress:
Switch#configureterminal
Switch(config)#ipfixglobal
Switch(config-ipfix-global)#hardware-telemetrydestinationipv410.10.10.1
RelatedCommands
None
15.8.43showipfixrecorder
CommandPurpose
UsetheshowipfixrecordeprivilegedEXECcommandtodisplaytheconfigure
informationofoneipfixrecorder.2706CommandSyntax
showipfixrecorderNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixrecordername Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowipfixrecordercommand:
Switch#showipfixrecorderrecorder1
RelatedCommands
None
15.8.44showipfixexporter
CommandPurpose
UsetheshowipfixexporterprivilegedEXECcommandtodisplaytheconfigure
informationofoneipfixexporter.
CommandSyntax
showipfixexporterNAME
Parameter ParameterDescriptionParameterValue2707NAME ipfixexportername Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayconfigurationaboutexporter1inprivilegedEXEC
mode:
Switch#showipfixexporterexporter1
RelatedCommands
None
15.8.45showipfixcache
CommandPurpose
Thiscommandusedtoshowthestateinformationoftheipfix.
CommandSyntax
showipfixcachemonitorMNAME
showipfixcacheobserve-pointinterface(IFPHYSICAL|IFVLAN|IFAGG)input
showipfixcacheobserve-pointvlanCLI_IPFIX_ALL_VLAN_CLI_RNGinput
showipfixcacheobserve-pointport-groupPGNAMEinput
showipfixcacheobserve-pointvlan-groupVGNAMEinput2708showipfixcacheobserve-pointcid-pairrole-based
Parameter ParameterDescriptionParameterValue
MNAME ipfixmonitorname Upto32characters
IFPHYSICAL Nameofinterface Support
physical/aggregation/VLA
Nports
CLI_IPFIX_ALL_VLAN_CL
I_RNGvlanid -
PGNAME Port-groupname -
VGNAME Vlan-groupname -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtoshowthestateinformationoftheipfixontheinterface
eth-0-1inprivilegedEXECmode:
Switch#showipfixcacheobserve-pointinterfaceeth-0-1input
RelatedCommands
None270915.8.46showipfixmonitor
CommandPurpose
Thiscommandusedtodescribetheconfigrationoftheipfixmonitor.
CommandSyntax
showipfixmonitorNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixmonitorname Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayconfigurationofmonitor1inprivilegedEXEC
mode:
Switch#showipfixmonitormonitor1
RelatedCommands
None
15.8.47showipfixsampler
CommandPurpose
Thiscommandusedtodescribetheconfigrationoftheipfixsampler.2710CommandSyntax
showipfixsamplerNAME
Parameter ParameterDescriptionParameterValue
NAME ipfixsamplername Upto32characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplayconfigurationofsampler1inprivilegedEXEC
mode:
Switch#showipfixsamplersampler1
RelatedCommands
None
15.8.48showresourceipfix
CommandPurpose
Thiscommandusedtodescribetheresourceofipfix.
CommandSyntax
showresourceipfix2711CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtodisplayresourceofipfixinprivilegedEXECmode:
Switch#showresourceipfix
RelatedCommands
None
15.8.49clearipfixcachemonitor
CommandPurpose
Thiscommandusedtoclearcachewithipfixmonitorname.
CommandSyntax
clearipfixcachemonitorNAME
Parameter ParameterDescriptionParameterValue
NAME IPFIXmonitorname Upto32characters
CommandMode
PrivilegedEXEC2712Default
None
Usage
None
Examples
ThisexampleshowshowtoclearipfixcachewithnametestinprivilegedEXEC
mode:
Switch#clearipfixcachemonitortest
RelatedCommands
None
15.8.50clearipfixcacheobserve-pointinterface
CommandPurpose
Thiscommandusedtoclearcacheoninterface.
CommandSyntax
clearipfixcacheobserve-pointinterface(IFNAME)input
Parameter ParameterDescriptionParameterValue
IFPHYSICAL Nameofinterface Support
physical/aggregation/VLA
Nports
CommandMode
PrivilegedEXEC
Default
None2713Usage
None
Examples
Thisexampleshowshowtoclearipfixcacheoninterfaceeth-0-1inprivilegedEXEC
mode:
Switch#clearipfixcacheobserve-pointinterfaceeth-0-1input
RelatedCommands
None271416VPNCommands
16.1VRFCommands
16.1.1ipvrf
CommandPurpose
ToconfigureaVPNroutingandforwarding(VRF)routingtable,usetheipvrf
commandinglobalconfigurationmode.ToremoveaVRFroutingtable,usetheno
formofthiscommand.
CommandSyntax
ipvrfVRF-NAME
noipvrfVRF-NAME
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
GlobalConfiguration
Default
None
Usage
None2715Examples
Switch#configureterminal
Switch(config)#ipvrfComA
Switch(config-vrf)#route-targetboth100:2
Switch(config-vrf)#route-targetimport200:1
RelatedCommands
ipvrfforwarding
16.1.2showipvrf
CommandPurpose
ToshowthesetofdefinedVRFsandassocaitedinterfaces,usetheshowipvrf
commandinPrivilegedEXECmode.
CommandSyntax
showipvrf(bgp(brief|detail)|interfaces|ospf|rip|VRF-NAME|)
Parameter ParameterDescriptionParameterValue
bgp BorderGatewayProtocol
(BGP)-
brief BriefVPN
Routing/Forwarding
instanceinformation-
detail DetailedVPN
Routing/Forwarding
instanceinformation-
interfaces ShowVPN
Routing/Forwarding
interfaceinformation-
ospf OpenShortestPathFirst
(OSPF)-2716rip RoutingInformation
Protocol(RIP)-
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showipvrf
RelatedCommands
None
16.1.3ipvrfforwarding
CommandPurpose
ToassociateaVPNroutingandforwarding(VRF)instancewithanLayer3interface,
usetheipvrfforwardingcommandininterfaceconfigurationmode.Todisassociatea
VRF,usethenoformofthiscommand.
CommandSyntax
ipvrfforwardingVRF-NAME
noipvrfforwarding
Parameter ParameterDescriptionParameterValue2717VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
InterfaceConfiguration
Default
None
Usage
ExecutingthiscommandonaninterfaceremovestheIPaddressonthisinterface,
TheIPaddressshouldbereconfigured.
Examples
Switch#configureterminal
Switch(config)#ipvrfComA
Switch(config-vrf)#exit
Switch(config)#interfaceeth-0-1
Switch(config-if)#noswitchport
Switch(config-if)#ipvrfforwardingComA
RelatedCommands
ipvrf
iproutevrf
16.1.4iproutevrf
CommandPurpose
ToestablishstaticroutesforaVPNroutingandforwarding(VRF)instance,usetheip
routevrfcommandinglobalconfigurationmode.Toremovestaticroutes,usetheno
formofthiscommand.2718CommandSyntax
iproutevrfVRF-NAME(PREFIXMASK|PREFIX/PREFIX-LENGTH)(NH-
ADDRESS(public|)|vrfVRF-NAMENH-ADDRESS|IFNAME|REMOTE-VTEP)
(DISTANCE|)(bindbfdBFD-NAME|trackNUMBER|)
noiproutevrfVRF-NAME(PREFIXMASK|PREFIX/PREFIX-LENGTH)(NH-
ADDRESS(public|)|vrfVRF-NAMENH-ADDRESS|IFNAME|REMOTE-VTEP|)
(bindbfd|track|)
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
PREFIX IProuteprefixforthe
destinationIPv4address
MASK Prefixmaskforthe
destinationMaskinIPv4address
format
PREFIX-LENGTH Prefixlengthforthe
destination1-32
NH-ADDRESS IPaddressofthenexthop
thatcanbeusedtoreach
thatnetworkIPv4address
IFNAME Interfacenameofthenext
hopthatcanbeusedto
reachthatnetworkOnlysupporttunneland
nullinterface
REMOTE-VTEP Overlaytunnelofthenext
hopthatcanbeusedto
reachthatnetwork.remote-vtepindex
DISTANCE (Optional)An
administrativedistance.
Thedefaultadministrative
distanceforastaticroute
is11-2552719BFD-NAME SpecifythenameofbfdAstringupto16
characters
NUMBER SpecifytheIDoftrack
object1-500
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#iproutevrfVPN-NAME2.2.2.0/241.1.1.2
RelatedCommands
showiproutevrf
16.1.5arpvrf
CommandPurpose
ToaddapermanententryintheAddressResolutionProtocol(ARP)cacheforVRF,
usethearpvrfcommandinglobalconfigurationmode.ToremoveanentryfromVRF
ARPcache,enterthenoformofthiscommand.
CommandSyntax
arpvrfVRF_NAMEIP_ADDRMAC
noarpvrfVRF_NAMEIP_ADDR2720Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
IP_ADDR IPaddressoftheARP
entryIPv4Address
MAC Hardwareaddressofthe
ARPentryin
HHHH.HHHH.HHHH
formatMACAddress
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#arpvrfvpn31.1.1.10000.1111.2222
RelatedCommands
showiparpvrfVRF-NAME
cleariparpvrfVRF-NAMEA.B.C.D
16.1.6showiparpvrf
CommandPurpose
UsethiscommandtoshowarpentryinVRFinstance.2721CommandSyntax
showiparpvrfVRF-NAME
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtodisplayallarpentryinthearptableoftheVRF.:
Switch#showiparpvrfComA
ProtocolAddressAge(min)HardwareAddrInterface
Internet1.1.1.1 -0000.1111.2222
RelatedCommands
arpvrf
16.1.7cleariparpvrf
CommandPurpose
UsethiscommandtorefreshaspecificdynamicARPentryfromARPcacheforthe
VRF.2722CommandSyntax
cleariparpvrfVRF-NAMEIP_ADDR
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
IP_ADDR DynamiclearnedARP
entryIPaddressIPv4Address
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtorefreshadynamicarpentryinVRF.:
Switch#cleariparpvrfComA1.1.1.1
RelatedCommands
arpvrf
16.1.8pingvrf
CommandPurpose
UsethiscommandtopingaddressinVRF.2723CommandSyntax
pingvrfVRF-NAMEIPV4_HOST
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancename-
IPV4_HOST Pingdestinationaddress
orhostnameIPv4Addressorhostname
string
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#pingvrfvpn1.1.1.1
PING1.1.1.1(1.1.1.1)56(84)bytesofdata.
64bytesfrom1.1.1.1:icmp_seq=0ttl=64time=0.114ms
64bytesfrom1.1.1.1:icmp_seq=1ttl=64time=0.087ms
64bytesfrom1.1.1.1:icmp_seq=2ttl=64time=0.087ms
64bytesfrom1.1.1.1:icmp_seq=3ttl=64time=0.097ms
64bytesfrom1.1.1.1:icmp_seq=4ttl=64time=0.133ms
---1.1.1.1pingstatistics---
5packetstransmitted,5received,0%packetloss,time4041ms
rttmin/avg/max/mdev=0.087/0.103/0.133/0.020ms,pipe2
RelatedCommands
None272416.1.9traceroutevrf
CommandPurpose
UsethiscommandtotracerouteinVRF.
CommandSyntax
traceroutevrfVRF-NAMEIPV4_HOST
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
WORD Traceroutedestination
addressorhostnameIPv4Addressorhostname
string
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#traceroutevrfvpn1.1.1.1
tracerouteto1.1.1.1(1.1.1.1),30hopsmax,38bytepackets
11.1.1.1(1.1.1.1)0.222ms0.169ms0.169ms
RelatedCommands
None272516.1.10telnetvrf
CommandPurpose
UsethiscommandtotelnetinVRF.
CommandSyntax
telnetvrfVRF-NAMEWORD
Parameter ParameterDescriptionParameterValue
VRF-NAME VPNRouting/Forwarding
instancenameUpto15characters
WORD Thedestinationaddressor
hostnamefortelnet-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#telnetvrfvpn9.9.9.2
Trying9.9.9.2...
Connectedto9.9.9.2.
Escapecharacteris'^]'.
FedoraCorerelease4(Stentz)
Kernel2.6.32.23onani686
login:root
Password:2726RelatedCommands
None
16.1.11rd
CommandPurpose
Usethiscommandtosetroutedistinguisher.
CommandSyntax
rdRD-VALUE
Parameter ParameterDescriptionParameterValue
RD-VALUE Routedistinguishervalue.
ASN:nnorIP-address:nnTherangeofASNis1-
4294967295orinIPv4
format,Therangeofnnis
1-65535
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#rd1.1.1.1:1
RelatedCommands
None272716.1.12route-target
CommandPurpose
Usethiscommandtosetroutetarget.Tounsetroutetarget,enterthenoformofthis
command.
CommandSyntax
route-target(both|export|import)RT-VALUE
noroute-target(both|export|import)(RT-VALUE|)
Parameter ParameterDescriptionParameterValue
both Importandexport -
export Export -
import Import -
RT-VALUE Route-targetvalue.
ASN:nnorIP-address:nnTherangeofASNis1-
4294967295orinIPv4
format,Therangeofnnis
1-65535
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#route-targetimport100:12728RelatedCommands
None
16.1.13importmap
CommandPurpose
Usethiscommandtosetimportmap.Tounsetimportmap,enterthenoformofthis
command.
CommandSyntax
importmapWORD
noimportmap
Parameter ParameterDescriptionParameterValue
WORD Pointertoroute-map
entriesUpto20characters
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#importmap100
RelatedCommands
exportmap272916.1.14exportmap
CommandPurpose
Usethiscommandtosetexportmap.Tounsetexportmap,enterthenoformofthis
command.
CommandSyntax
exportmapWORD
noexportmap
Parameter ParameterDescriptionParameterValue
WORD Pointertoroute-map
entriesUpto20characters
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#exportmap100
RelatedCommands
importmap273016.1.15router-id
CommandPurpose
Usethiscommandtosetrouter-id.Tounsetrouter-id,enterthenoformofthis
command.
CommandSyntax
router-idIP_ADDR
norouter-id
Parameter ParameterDescriptionParameterValue
IP_ADDR RouteridentifierinIP
addressformatIPv4Address
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#router-id1.1.1.1
RelatedCommands
showipvrf273116.1.16description
CommandPurpose
UsethiscommandtospecificVRFdescription.ToremoveVRFdescription,enterthe
noformofthiscommand.
CommandSyntax
descriptionLINE
nodescription
Parameter ParameterDescriptionParameterValue
LINE Charactersdescribingthis
VRFThenamelengthshould
benomorethan40and
thefirstcharactermustbe
a-z,A-Zor0-9.
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#ipvrftest
Switch(config-vrf)#descriptionVrfName1
RelatedCommands
showipvrf273216.1.17showresourcevrf
CommandPurpose
Usethiscommandtodisplaytheresourcesusedbyvrfs.
CommandSyntax
showresourcevrf
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingissampleoutputfromtheshowresourcevrfcommand:
Switch#showresourcevrf
VRF
Resource UsedCapability
=============================================================
VRFnumber 1 252
RelatedCommands
None273316.2GRETUNNELCommands
16.2.1interface
CommandPurpose
Usingthiscommandtocreateanewtunnelinterface.Usethenoformofthis
commandtodestroythetunnelinterface.
CommandSyntax
interfacetunnelTUNNEL_ID
nointerfacetunnelTUNNEL_ID
Parameter ParameterDescriptionParameterValue
TUNNEL_ID tunnelid 0-1023
CommandMode
GlobalConfiguration
Default
None
Usage
Itjustcreatesaninterfacestructure,andthenthetunnelinterfacecannotbeused
beforeitisconfiguredthemode.
Examples
Thisexampleshowshowtocreateatunnelinterface.:
Switch#configureterminal
Switch(config)#interfacetunnel1
RelatedCommands
showinterfacetunnel273416.2.2tunnelmodegre
CommandPurpose
ThiscammadisusedforspecifyingtheIPv4transitiontunnelprotocolofgre,andthe
noformofthiscommandcanunsetthetunnelprotocol.
CommandSyntax
tunnelmodegre
notunnelmode
Parameter ParameterDescriptionParameterValue
gre Thegretunnelisonly
supportedinIPv4network
andencapedwithIPv4
header.-
CommandMode
InterfaceConfiguration
Default
None
Usage
Whenconfigurethetunnelmodewithgre,andthenitisrequiredconfiguretunnel
sourceandtunneldestinationmanually.
Examples
Thisexampleshowshowtoconfigurethetunnelwithgreprotocol:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelmodegre2735RelatedCommands
tunnelsource
tunneldestination
16.2.3tunnelsource
CommandPurpose
Thiscommandisusedtospecifythetunnelsource.Usethenoformofthiscommand
tounsetthetunnelsource.
CommandSyntax
tunnelsource(IP_ADDR|IFNAME)
notunnelsource
Parameter ParameterDescriptionParameterValue
IP_ADDR specifyatunnelsourcein
theIPv4addressformatIPv4Address
IFNAME specifyatunnelsourcein
theIFNAMEformat,the
IFNAMEshouldbelayer3
interface,likeroutedport,
vlaninterface,loopback..Support
physical/aggregation/loopb
ack/vlanports
CommandMode
InterfaceConfiguration
Default
None
Usage
Everytunnelmusthaveatunnelsource.IfusersspecifytheIFNAMEformat,system
willchoosetheprimaryaddressastunnelsource2736Examples
Thisexampleshowshowtosetthetunnelsource.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelsource3.3.3.3
RelatedCommands
tunnelmodegre
tunneldestination
16.2.4tunneldestination
CommandPurpose
UsethiscommandtospecifyatunneldestinationaddressinanIPv4portion.Usethe
noparametertoun-specifytheaddress.
CommandSyntax
tunneldestinationIP_ADDR
notunneldestination
Parameter ParameterDescriptionParameterValue
IP_ADDR Specifythetunnel
destinationIPv4addressIPv4Address
CommandMode
InterfaceConfiguration
Default
None
Usage
None2737Examples
thisexampleshowshowtosetthetunneldestination.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunneldestination4.4.4.4
RelatedCommands
tunnelsource
tunnelmodegre
16.2.5tunnelenable
CommandPurpose
Usethiscommandtoenabletunneldecapsulationforinterfaces.Usetheformofthis
commandtorestorethedefaultconfiguration.
CommandSyntax
tunnel(enable|disable)
Parameter ParameterDescriptionParameterValue
enable -
disable -
CommandMode
InterfaceConfiguration
Default
bydefault,tunneldecapsulationisdisabledonallinterfaces.
Usage
None2738Examples
Thisexampleshowshowtoenabletunneldecapsulationoninterfaceeth-0-1.:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#tunnelenable
RelatedCommands
interface
16.2.6tunnelgrekey
CommandPurpose
Usethiscommandtosetthekeyofgretunnel.Usethenoformofthiscommandto
unsetthekeyofgretunnel.
CommandSyntax
tunnelgrekeyKEY_VALUE
notunnelgrekey
Parameter ParameterDescriptionParameterValue
KEY_VALUE grekeyvalue 1-4294967295
CommandMode
InterfaceConfiguration
Default
None.
Usage
Grekeyistakenadvantageofcertificationofpacketandprovidesthesecurityofgre
tunnel.Grekeycansupport32bits,butcannotsupporttoset0.2739Examples
Thisexampleshowshowtosetgrekey.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelgrekey666
RelatedCommands
tunnelsource
16.2.7tunneldscp
CommandPurpose
UsethiscommandtospecifyavalueofDifferentiatedServicesCodePoint(DSCP)in
thetunnelIPv4encapsulationheader.Usethenoparametertoinheritingthe
underlyingphysicalinterfacevaluebydefault.
CommandSyntax
tunneldscpDSCP
notunneldscp
Parameter ParameterDescriptionParameterValue
DSCP TheouterIPv4header
DSCPvalue0-63
CommandMode
InterfaceConfiguration
Default
Bydefault,theDSCPvalueisinheritedfromoriginalIPv6packet.
Usage
None.2740Examples
ThisexampleshowshowtosettheouterIPv4headerDSCPvalueas40.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunneldscp40
RelatedCommands
showinterfacetunnel
interface
16.2.8keepalive
CommandPurpose
Usethiscommandtoenablefunctionofkeepalive,itisusedforcheckingwhethergre
tunnelpeersisuporreachable.
CommandSyntax
keepalivePERIOD_VALUERETRY_VALUE
nokeepalive
Parameter ParameterDescriptionParameterValue
PERIOD_VALUE Intervalperiod 1-32767
RETRY_VALUE timeoutandretry 1-255
CommandMode
InterfaceConfiguration
Default
period_value:10s
retry_value:32741Usage
Onlywhenthegretunnelisinthestateofuporkeepalivedown,thenthekeepalive
packetscanbesentoutthroughthenetworkport.
Examples
Thisexampleshowshowtoenablethekeepalivefunctionwithperiodvalue10sand
retrytimes5:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#keepalive105
RelatedCommands
nokeepalive
16.2.9showinterfacetunnel
CommandPurpose
Usethiscommandtodisplaythetunnelinformation.
CommandSyntax
showinterfacetunnelTUNNEL_ID
Parameter ParameterDescriptionParameterValue
TUNNEL_ID ThetunnelID 0-1023
CommandMode
PrivilegedEXEC
Default
None.2742Usage
None
Examples
Thisexampledisplaysthetunnelinformation.:
Switch#showinterfacetunnel1
Interfacetunnel1
Interfacecurrentstate:UP
HardwareisTunnel
Index8193,Metric1,EncapsulationTUNNEL
VRFbinding:notbound
Internetprimaryaddress:
1.1.1.1/24pointopoint1.1.1.255
Tunnelprotocol/transportGRE/IP,StatusValid
Tunnelsource192.192.168.1(eth-0-10),destination10.10.10.10
TunnelDSCPinherit,TunnelTTL255
TunneltransportMTU1476bytes
TunnelGREkeyenable:100
TunnelGREkeepaliveenable,Sendperiod:5,Retrytimes:3
0packetsinput,0bytes
0packetsoutput,0bytes
RelatedCommands
showresourcetunnel
16.2.10showresourcetunnel
CommandPurpose
Usethiscommandtodisplaythetunnelpeersresourceinformation.
CommandSyntax
showresourcetunnel
CommandMode
PrivilegedEXEC2743Default
None.
Usage
None
Examples
Thisexampledisplaysthetunnelpeersresourceinformation.:
Switch#showtunnelresource
Tunnel
Resource UsedCapability
=============================================================
Peers 08
DUT1#
RelatedCommands
None
16.2.11showtunnelkeepalivestatistics
CommandPurpose
Usethiscommandtodisplaythestatisticsofgretunnelkeepalive.
CommandSyntax
showtunnelkeepalivestatistics(|interfacetunnelTUNNEL_ID)
Parameter ParameterDescriptionParameterValue
TUNNEL_ID tunnelid 0-1023
CommandMode
PrivilegedEXEC2744Default
None
Usage
None
Examples
Thisexampledisplaysthestatisticsofgretunnelkeepalive.:
Switch#showtunnelkeepalivestatistics
NameStatusKeepaliveOut_ka_pktIn_ka_pktTunnelUpTunnelDown
-----------------------------------------------------------------------------
DUT1#
RelatedCommands
cleartunnelkeepalivestatistics
16.2.12cleartunnelkeepalivestatistics
CommandPurpose
Usethiscommandtoclearthestatisticsofgretunnelkeepalive.
CommandSyntax
cleartunnelkeepalivestatistics(all|interfacetunnelTUNNEL_ID)
Parameter ParameterDescriptionParameterValue
TUNNEL_ID tunnelid 0-1023
CommandMode
PrivilegedEXEC
Default
None2745Usage
None
Examples
Thisexampleclearsthestatisticsofgretunnelkeepalive.:
Switch#cleartunnelkeepalivestatisticsall
RelatedCommands
showtunnelkeepalivestatistics
16.2.13cleartunnelstatistics
CommandPurpose
Usethiscommandtoclearthestatisticsoftunnelincludeinputandoutput.
CommandSyntax
cleartunnelstatistics(all|interfacetunnelTUNNEL_ID)
Parameter ParameterDescriptionParameterValue
TUNNEL_ID tunnelid 0-1023
CommandMode
PrivilegedEXEC
Default
None
Usage
None2746Examples
Thisexampleclearsthestatisticsoftunnelincludeinputandoutput.:
Switch#cleartunnelstatisticsall
RelatedCommands
showinterfacetunnelid
16.3ERSPANTUNNELCommands
16.3.1interface
CommandPurpose
Usingthiscommandtocreateanewtunnelinterface.Usethenoformofthis
commandtodestroythetunnelinterface.
CommandSyntax
interfacetunnelTUNNEL_ID
nointerfacetunnelTUNNEL_ID
Parameter ParameterDescriptionParameterValue
TUNNEL_ID tunnelid 0-1023
CommandMode
GlobalConfiguration
Default
None
Usage
None2747Examples
Switch#configureterminal
Switch(config)#interfacetunnel1
RelatedCommands
showinterfacetunnel
16.3.2tunnelmodeerspan
CommandPurpose
ThiscammadisusedforspecifyingtheIPv4transitiontunnelprotocoloferspan,and
thenoformofthiscommandcanunsetthetunnelprotocol.
CommandSyntax
tunnelmode(erspan(ecmp-dst-gre|))
notunnelmode
Parameter ParameterDescriptionParameterValue
erspan Thetunnelmodeis
erspan,ithasonlyone
tunneldestination.Now,it
supportsIPv4erspan
tunnel,theplayloadpacket
shouldbeIPv4packet.-
erspanecmp-dst-gre Thetunnelmodeis
erspan,ithasacertainof
tunneldestinations,.Now,it
supportsIPv4erspan
tunnel,theplayloadpacket
shouldbeIPv4packet.-
CommandMode
InterfaceConfiguration2748Default
None
Usage
Whenconfigurethetunnelmodewitherspan,andthenitisrequiredconfiguretunnel
sourceandtunneldestinationmanually.
Examples
Whenconfigurethetunnelmodewitherspan,andthenitisrequiredconfiguretunnel
sourceandtunneldestinationmanually.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelmodeerspan
RelatedCommands
tunnelsource
tunneldestination
16.3.3tunnelsource
CommandPurpose
Thiscommandisusedtospecifythetunnelsource.Usethenoformofthiscommand
tounsetthetunnelsource.
CommandSyntax
tunnelsource(IP_ADDR|IFNAME)
notunnelsource
Parameter ParameterDescriptionParameterValue
IP_ADDR specifyatunnelsourcein
theIPv4addressformatIPv4Address2749IFNAME specifyatunnelsourcein
theIFNAMEformat,the
IFNAMEshouldbelayer3
interface,likeroutedport,
vlaninterface,loopback..Support
physical/aggregation/loopb
ack/vlanports
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelsource3.3.3.3
RelatedCommands
tunnelmodeerspan
tunneldestination
16.3.4tunneldestination
CommandPurpose
UsethiscommandtospecifyatunneldestinationaddressinanIPv4portion.Usethe
noparametertoun-specifytheaddress.
CommandSyntax
tunneldestinationIP_ADDR
notunneldestination2750Parameter ParameterDescriptionParameterValue
IP_ADDR Specifythetunnel
destinationIPv4addressIPv4Address
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelmodeerspan
Switch(config-if)#tunneldestination4.4.4.4
RelatedCommands
tunnelsource
tunnelmodeerspan
16.3.5tunnelecmp-destination
CommandPurpose
Usethiscommandtospecifytunnelecmp-destinationaddressinanIPv4portion.
Usethenoparametertoun-specifytheaddress.
CommandSyntax
tunnelecmp-destinationIP_ADDR
notunnelecmp-destinationIP_ADDR2751notunnelecmp-destinationall
Parameter ParameterDescriptionParameterValue
IP_ADDR tunnelecmp-destination
address-
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtosetthetunnelecmp-destination:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config)#tunnelmodeerspanecmp-dst-gre
Switch(config-if)#tunnelecmp-destination3.3.3.3
Switch(config-if)#tunnelecmp-destination4.4.4.4
RelatedCommands
tunnelsource
tunnelmodeerspanecmp-dst-gre
16.3.6tunnelgrekey
CommandPurpose
Usethiscommandtosetthekeyoferspantunnel.Usethenoformofthiscommand
tounsetthekeyoferspantunnel.2752CommandSyntax
tunnelgrekeyKEY_VALUE
notunnelgrekey
Parameter ParameterDescriptionParameterValue
KEY_VALUE grekeyvalue 1-4294967295
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config-if)#tunnelgrekey666
RelatedCommands
tunnelsource
16.3.7tunneldscp
CommandPurpose
UsethiscommandtospecifyavalueofDifferentiatedServicesCodePoint(DSCP)in
thetunnelIPv4encapsulationheader.Usethenoparametertoinheritingthe
underlyingphysicalinterfacevaluebydefault.
CommandSyntax
tunneldscpDSCP2753notunneldscp
Parameter ParameterDescriptionParameterValue
DSCP TheouterIPv4header
DSCPvalue0-63
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunneldscp40
RelatedCommands
interface
16.3.8tunnelttl
CommandPurpose
setthiscommandtospecifyavalueoftimetolive(ttl)inthetunnelIPv4
encapsulationheader.Usethenoparametertoinheritingtheunderlyingphysical
interfacevaluebydefault.
CommandSyntax
tunnelttlTTL
notunnelttl2754Parameter ParameterDescriptionParameterValue
TTL TheouterIPv4headerttl
value1-254
CommandMode
InterfaceConfiguration
Default
64
Usage
None
Examples
ThisexampleshowshowtosettheouterIPv4headerttlvalueas40.:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelttl40
RelatedCommands
interface
16.3.9tunnelextend-header
CommandPurpose
Usethiscommandtosettheextend-headerinformationinerspan.
CommandSyntax
tunnelextend-header
notunnelextend-header2755CommandMode
InterfaceConfiguration
Default
None.
Usage
None.
Examples
Thisexampleshowshowtosetextend-headerinerspanmode:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelextend-header
RelatedCommands
tunnelextend-headerid
16.3.10tunnelextend-headerid
CommandPurpose
Usethiscommandtosettheextend-headeridinerspan.Usethenoformofthis
commandcanunsetextend-headeridinerspan
CommandSyntax
tunnelextend-headeridID
notunnelextend-headerid
Parameter ParameterDescriptionParameterValue
ID Theextend-headerid 1-10232756CommandMode
InterfaceConfiguration
Default
None.
Usage
Youmustconfigurethetunnelextend-headerbeforesettingtheextend-headerid.
Examples
Thisexampleshowshowtosetextend-headeridinerspanmode:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelextend-header
Switch(config-if)#tunnelextend-headerid1
RelatedCommands
tunnelextend-header
16.3.11tunnelextend-headerdst-load-balance
CommandPurpose
Usethiscommandtosettheextend-headerdst-load-balanceinerspan.Usetheno
formofthiscommandcanunsetextend-headerdst-load-balanceinerspan
CommandSyntax
tunnelextend-headerdst-load-balance
notunnelextend-headerdst-load-balance
CommandMode
InterfaceConfiguration2757Default
None.
Usage
None
Examples
Thisexampleshowshowtosetextend-headerdst-load-balanceinerspanmode:
Switch#configureterminal
Switch(config)#interfacetunnel1
Switch(config-if)#tunnelextend-header
Switch(config-if)#tunnelextend-headerdst-load-balance
RelatedCommands
tunnelextend-header
16.3.12showresourcetunnel
CommandPurpose
Usethiscommandtoshowtheresourceusageofthetunnel.
CommandSyntax
showresourcetunnel
CommandMode
PrivilegedEXEC
Default
None
Usage
None2758Examples
Switch#showresourcetunnel
Tunnel
Resource UsedCapability
=============================================================
Peers 38
RelatedCommands
None275917DataCenterCommands
17.1OverlayCommands
17.1.1vlanoverlayenable
CommandPurpose
Usethiscommandtosetvlanoverlayenable/disable.
CommandSyntax
vlanVLAN_IDoverlay(enable|disable)
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
enable settheoverlayfeatureof
theVLANtoenable-
disable settheoverlayfeatureof
theVLANtodisable,andit
isdisabledbydefault-
CommandMode
VLANConfiguration
Default
Disable2760Usage
MakeSurethatoverlayofvlanisenabledbeforeconfigureoverlayvlanandvni
mapping.
Examples
Thefollowingexampleshowshowtosetoverlayofvlan2toenable:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan2
Switch(config-vlan)#vlan2overlayenable
RelatedCommands
None
17.1.2overlay
CommandPurpose
Usethiscommandtoenteroverlayconfiguremode.
Toreturntheconfiguremode,usetheexitcommand.
CommandSyntax
overlay
CommandMode
GlobalConfiguration
Default
None
Usage
None2761Examples
Thefollowingexampleshowshowtoenterintooverlayconfiguremode:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#
RelatedCommands
None
17.1.3vlanvni
CommandPurpose
Usethiscommandtomappingvlanidwithoverlayvni.
CommandSyntax
vlanVLAN_IDvniVNI
novlanVLAN_IDvni
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
VNI vniid 1-16777215
CommandMode
OVERLAYConfiguration
Default
None
Usage
Theoverlaymappingcommandisusedtobindthevlanidwithoverlayvni.That
meansthevlanisnowcanworkasoneoverlaybridgedomainandalltheportbelong
thisvlanwillalsobeintheoverlaybridgedomain.2762Examples
Thefollowingexamplesettheoverlaymapping:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vlan20vni20000
Thefollowingexampleunsettheoverlaymapping:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#novlan20vni
RelatedCommands
None
17.1.4vnisplit-horizon-disable
CommandPurpose
Usethiscommandtodisablehorizonsplitpervni.Usethenoformofthiscommand
toenablehorizonsplitpervni.
CommandSyntax
vniVNIsplit-horizon-disable
novniVNIsplit-horizon-disable
Parameter ParameterDescriptionParameterValue
VNI vniid 1-16777215
CommandMode
OVERLAYConfiguration
Default
Horizonsplitisenabled.2763Usage
None
Examples
Thefollowingexampleshowshowtodisablehorizonsplitpervni:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vni20000split-horizon-disable
Thefollowingexampleshowshowtoenablehorizonsplitpervni:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#novni20000split-horizon-disable
RelatedCommands
None
17.1.5source
CommandPurpose
Usethiscommandtosettheoverlaysourcevtepipaddress.
Toremovethesourcevtepipaddress,usethenoformofthiscommand.
CommandSyntax
sourceIP_ADDR
nosource
Parameter ParameterDescriptionParameterValue
IP_ADDR Theoverlaysourcevtepip
address,itshouldbea
validinterfaceipaddress.IPv4Address
CommandMode
OVERLAYConfiguration2764Default
None
Usage
Overlaysourcevtepipaddressisusedtoencapanddecapoverlaypackets.Itis
recommendedthatthesourcevtepipaddressisthesamewithsomeloopback
interfaceaddresssothatiproutingcanbereachable.
Examples
Thefollowingexamplesetsthesourcevtepipaddressofoverlay:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#source1.1.1.1
Thefollowingexampleremovesthesourcevtepipaddressofoverlay:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#nosource
RelatedCommands
None
17.1.6remote-vtep
CommandPurpose
Usetheoverlayremotevtepcommandtospecifythepeeripaddressandtypeof
overlayentry.Usethenoformofthiscommandtoremovethepeeripaddressand
typeofoverlayentry.
CommandSyntax
remote-vtepINDEXip-addressIP_ADDR_VTEPtype(vxlan|nvgre|geneve)
({src-ipIP_ADDR|split-horizon-disable|keep-vlan-tag}|)
noremote-vtepindex
Parameter ParameterDescriptionParameterValue2765INDEX Remotevtepindex 1-65535
vxlan-peer Remotevtepisvxlanvtep-
nvgre-peer Remotevtepisnvgrevtep-
geneve-peer Remotevtepisgeneve
vtep-
IP_ADDR_VTEP Theoverlaypeerip
address,itshouldbea
validinterfaceipaddress.IPv4Address
IP_ADDR Specifytheoverlaysource
ipaddress,itshouldbea
validinterfaceipaddress,
itwouldusetheglobal
sourceipaddressin
defaultIPv4Address
horizon-split-disable Supporttoclosehorizon
splitofthetunnelwiththis
vtep-
keep-vlan-tag meansthevlantagsof
originalpacketwillnotbe
stripped-
CommandMode
OVERLAYConfiguration
Default
None
Usage
Thiscommandisusedtospecifyoverlayvteppeeraddressandtypeonremote
device,administratormustknowallthepeeraddressesandtypesontheDataCenter
networkandmakesurethattheycanroutebetweeneachother.2766Examples
Thefollowingexamplesetstheoverlayvxlanvteppeeraddress2.2.2.2withsource
ipaddress1.1.1.1:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#remote-vtep20ip-address2.2.2.2typevxlansrc-ip1.1.1.1
Thefollowingexampleremovesremotevtep:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#noremote-vtep20
RelatedCommands
None
17.1.7dscp-strategy
CommandPurpose
Usetheoverlayremotevtepcommandtoconfiguretheouteripdscpgainingmode.
CommandSyntax
remote-vtepINDEXencapsulation-dscp-strategy(dscp-copy|priority-map|custom-
assignVALUE)
Parameter ParameterDescriptionParameterValue
INDEX Remotevtepindex 1-65535
dscp-copy Copyfrominneripdscp-
priority-map Mapfrompriorityofqos-
custom-assignVALUE)Assigndscpbyusers 0-63
CommandMode
OVERLAYConfiguration2767Default
Dscp-copy
Usage
Whendscp-strategyissetpriority-map,pleaseconfigureQOSprioritybyMQC.
Examples
Thefollowingexamplesetsoverlaydscp-strategyascustom-assign:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#remote-vtep20dscp-strategycustom-assign63
RelatedCommands
None
17.1.8Virtual-mac
CommandPurpose
Usetheoverlayvirtualmaccommandtospecifythevirtualroutemacaddressof
remotevtep.Usethenoformofthiscommandtoremovethevirtualmacaddressof
remotevtep.
CommandSyntax
remote-vtepINDEXvirtual-macMAC
noremote-vtepindexvirtual-mac
Parameter ParameterDescriptionParameterValue
INDEX Remotevtepindex 1-65535
MAC Thevirtualmacaddressof
remotevtepMACAddress2768CommandMode
OVERLAYConfiguration
Default
None
Usage
ThevirtualmacaddresswillbeusedastheinnermacaddressofDVRrouteswhich
dontspecifytheinnermacaddress.
Examples
Thefollowingexamplesetstheoverlayremotevtepwiththevirtualmaca.a.a:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#remote-vtep20virtual-maca.a.a
Thefollowingexampleremovesremotevtepvirtualmacaddress:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#noremote-vtepvirtual-mac
RelatedCommands
None
17.1.9vlanremote-vtep
CommandPurpose
Usetheoverlaypeercommandtospecifythepeeripaddressandtypeofoverlay
vlanentry.Usethenoformofthiscommandtoremovethepeeripaddressandtype
ofoverlayvlanentry.
CommandSyntax
vlanVLAN_IDremote-vtepINDEX(tunnel-awareinner|)
novlanVLAN_IDremote-vtepINDEX2769Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
INDEX Theoverlayremotevtep
index1-65535
inner Ifset,ACL/Flowtracingwill
useinnerpacketheader
information-
CommandMode
OVERLAYConfiguration
Default
None
Usage
Makesuretheremotevtepisalreadycreatedwhensettingvlanwithremotevtep
index.
Examples
Thefollowingexamplesetstheoverlayvlan20withremotevtep2:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vlan20remote-vtep2
Thefollowingexampleremovesremotevtep3fromvlan20:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#novlan20remote-vtep3
RelatedCommands
None277017.1.10vxlanuplink
CommandPurpose
Usethevxlanuplinkcommandtoenableordisablevxlanuplinkportcapability.
CommandSyntax
vxlanuplink(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Makevxlanuplinkport
enable-
disable Makevxlanuplinkport
disable-
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thecommandisallowsettingonethertypeport.Thiscommandisusedto
decapsulatedthevxlanpacketforl2vniandl3vni
Examples
Thisexampleshowshowtoenablevxlanuplinkoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vxlanuplinkenable
RelatedCommands
None277117.1.11nvgreuplink
CommandPurpose
Usethenvgreuplinkcommandtoenableordisablenvgreuplinkportcapability.
CommandSyntax
nvgreuplink(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Makenvgreuplinkport
enable-
disable Makenvgreuplinkport
disable-
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thecommandisallowsettingonethertypeport.Thiscommandisusedto
decapsulatedthenvgrepacketforl2vniandl3vni
Examples
Thisexampleshowshowtoenablenvgreuplinkoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#nvgreuplinkenable
RelatedCommands
None277217.1.12mac-address-tableforwardremote-vtep
CommandPurpose
Usetheoverlaystaticfdbcommandtoaddordeleteoverlaystaticfdb.
CommandSyntax
mac-address-tableMAC_ADDRforwardremote-vtepINDEXvlanVLAN_ID
nomac-address-tablemac-addrforwardremote-vtepindexvlanVLAN_ID
Parameter ParameterDescriptionParameterValue
MAC_ADDR DestinationMAC
addresses(unicast)toadd
totheaddresstable.
Packetswiththis
destinationaddress
receivedinthespecified
VLANareforwardedtothe
specifiedinterfaceMACAddress
INDEX Theindexofremotevtep1-65535
VLAN_ID SpecifytheVLANfor
whichthepacketwiththe
specifiedMACaddressis
received.2-4094
CommandMode
GlobalConfiguration
Default
None
Usage
None2773Examples
Thisexampleshowshowtoaddastaticoverlayfdbwithremote-vtep3andvlan2:
Switch#configureterminal
Switch(config)#mac-address-table1.1.1forwardremote-vtep3vlan2
Thisexampleshowshowtodeleteastaticoverlayfdbwithremote-vtep3andvlan2:
Switch#configureterminal
Switch(config)#nomac-address-table1.1.1forwardremote-vtep3vlan2
RelatedCommands
None
17.1.13gateway-mac
CommandPurpose
Usetheoverlaygatewaycommandtoaddordeleteoverlaygatewaymacaddress.
CommandSyntax
vlanVLAN_IDgateway-macmac-addr
novlanVLAN_IDgateway-macmac-addr
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
mac-addr GatewayMACaddresses
(unicast)whichVMswill
usewhentheyneedtodo
routing.-
CommandMode
OVERLAYConfiguration
Default
None2774Usage
Thedownlinkportshouldbeintrunkmode.
Examples
Thisexampleshowshowtoaddanoverlaygatewaywithvlan2:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vlan2gateway-mac2.2.2
Thisexampleshowshowtodeleteanstaticoverlayfdbwithnvgrevteppeer2.2.2.2
andvlan2:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#novlan2gateway-mac2.2.2
RelatedCommands
None
17.1.14iprouteremote-vtep
CommandPurpose
Usetheoverlayroutecommandtoaddordeleteoverlaystaticroutes.
CommandSyntax
iproutevrfVRF_NAME(ADDRESSWILDCARD-MASK|ADDRESS/PREFIX-
LENGTH)remote-vtepINDEXvniVNI(|inner-macdamac-addr)
noiproutevrfVRF_NAME(ADDRESSWILDCARD-MASK|ADDRESS/PREFIX-
LENGTH)remote-vtepINDEXvniVNI(|inner-macdamac-addr)
Parameter ParameterDescriptionParameterValue
VRF_NAME Vrfname Upto15characters
ADDRESS IPv4address IPv4Address
WILDCARD-MASK MaskfortheassociatedIP
subnetIPv4Address2775PREFIX-LENGTH Prefixlengthofthe
address1-32
INDEX Theindexofremotevtep1-65535
VNI vniid 1-16777215
MAC_ADDR Innermacdestination
addressMACAddress
CommandMode
GlobalConfiguration
Default
None
Usage
Iftheinnermacdestinationaddressisnotspecified,itwillusetheremotevteps
virtualmacaddressastheinnermacdestinationaddress.
Examples
Thisexampleshowshowtoaddanoverlayroute:
Switch#configureterminal
Switch(config)#iproutevrftenant13.3.3.3/32remote-vtep3vni50000inner-macdaa.a.a
Switch(config)#iproutevrftenant14.4.4.4/32remote-vtep3vni50000
Thisexampleshowshowtodeleteananoverlayroute:
Switch#configureterminal
Switch(config)#noiproutevrftenant13.3.3.3/32nvgre-peer5.5.5.5vni50000inner-macdaa.a.a
Switch(config)#noiproutevrftenant14.4.4.4/32nvgre-peer5.5.5.5vni50000
RelatedCommands
None277617.1.15overlaydistributed-gateway
CommandPurpose
Usethecommandtoenableordisableoverlaydistributedgateway.
CommandSyntax
overlaydistributed-gateway(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Enableoverlaydistributed
gateway-
disable Disableoverlaydistributed
gateway-
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Thisexampleshowshowtoenableoverlaydistributedgateway:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#overlaydistributed-gatewayenable
RelatedCommands
None277717.1.16selectiveqinqoverlaymode
CommandPurpose
Usethecommandtoconfigurethevlaneditmodeofselectiveqinqportinoverlay.
CommandSyntax
selectiveqinqoverlaymode(mapping|stripping)
Parameter ParameterDescriptionParameterValue
mapping editvlantagwithselective
vlanmapping-
stripping stripsvlantag -
CommandMode
GlobalConfiguration
Default
stripvlan
Usage
None
Examples
Thisexampleshowshowtoconfigureselectiveqinqvlaneditmode:
Switch#configureterminal
Switch(config)#selectiveqinqoverlaymodemapping
RelatedCommands
None277817.1.17vxlanudp-dest-port
CommandPurpose
Usethecommandtoconfigvxlanudpdestportvalue.
CommandSyntax
vxlanudp-dest-portPORT
novxlanudp-dest-port
Parameter ParameterDescriptionParameterValue
PORT udpdestportvalue 1024-65535
CommandMode
OVERLAYConfiguration
Default
4789
Usage
Whenusethisfunction,shouldmaketwoswitchconfigthesamevalue
Examples
Thisexampleshowshowtoconfigvxlanudpdestportvalue:
Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vxlanudp-dest-port8888
RelatedCommands
None277917.1.18qostunnel-awareinner
CommandPurpose
Useinnerpacketinformationtoprocesspacket(egACL,Flowtracingprocessing).
Thiscommandisusedforoverlaypacketswithouttunneldecapsulationprocessing.
CommandSyntax
(no|)qostunnel-awareinner
Parameter ParameterDescriptionParameterValue
no Disableinnerparse -
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thiscommandisusedtoforceinnerpacketheaderprocessforoverlaypackets
withouttunneldecapsulation.
Examples
Thisexampleshowshowtoenableforceinnerparseoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#qostunnel-awareinner
RelatedCommands
None278017.1.19qostunnel-awareinner-outer-merge
CommandPurpose
Useinnerandouterpacketinformationtoprocesspacket(egACL,Flowtracing
processing).
CommandSyntax
(no|)inner-outermergeenable
Parameter ParameterDescriptionParameterValue
no Disableinner-outermerge
mode-
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thiscommandisusedtoforceinnerandpacketheaderinformationprocessfor
overlaypackets.
Examples
Thisexampleshowshowtoenableinnerandouterparseoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#qostunnel-awareinner-outer-merge
RelatedCommands
None278117.1.20Showoverlay
CommandPurpose
Usetheshowoverlaycommandtoshowrelatedoverlayinformation.
CommandSyntax
showoverlay(vlanVLAN_ID)
Parameter ParameterDescriptionParameterValue
VLAN_ID Vlanid 2-4094
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowsalltheoverlayinformation:
Switch#showoverlay
-------------------------------------------------------------------------------
ECMPMode:Normal
SourceVTEP:20.1.1.1
VlanVniTypeRemote-vtepIP-AddressSrc-AddressSplit-Horizon
-------------------------------------------------------------------------------
1010000VxLAN12.2.2.21.1.1.1Enable
Thisexampleshowstheoverlayinformationofvlan2:
Switch#showoverlayvlan22782---------------------------------------------------------------
ECMPMode:Normal
SourceVTEP:1.1.1.1
RemoteVTEPIndex:1,Ipaddress:2.2.2.2,Type:VxLAN
RemoteVTEPIndex:2,Ipaddress:3.3.3.3,Type:VxLAN
---------------------------------------------------------------
VLANID:2
VNI:20000
RemoteVTEPNUM:2
Index:1,Ipaddress:2.2.2.2,Type:VxLAN
Index:2,Ipaddress:3.3.3.3,Type:VxLAN
DVRGatewayNUM:0
---------------------------------------------------------------
RelatedCommands
None
17.2PFCCommands
17.2.1priority-flow-controlmode
CommandPurpose
Usethiscommandtoenableordisablepriority-basedflowcontrolfunctiononthe
interface.
CommandSyntax
priority-flow-controlmode(on|auto)
nopriority-flow-control
Parameter ParameterDescriptionParameterValue
on enablepriority-based
flowcontrolnomatterhow
thepeerconfigures-
auto enablepriority-based
flowcontrolnegotiatingwith
thepeer-2783CommandMode
InterfaceConfiguration
Default
Enablepriority-basedflowcontrolonpriority3
Usage
Usethepriority-flow-controlinterfaceConfigurationcommandtosettheinterfaces
abilitytosendpauseframestoonoroffonthespecialedpriorities.
Examples
Thisexampleshowshowtoenablepriority-basedflowcontrolontheinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#priority-flow-controlmodeon
Thisexampleshowshowtoenablepriority-basedflowcontrolontheinterface(auto
negotiatingwiththepeer):
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#priority-flow-controlmodeauto
RelatedCommands
None
17.2.2priority-flow-controlenablepriority
CommandPurpose
Usethiscommandtoenableordisablepriority-basedflowcontrolfunctiononwhich
priority.
CommandSyntax
priority-flow-controlenablepriority<0-7>(<0-7>(<0-7>(<0-7>(<0-7>(<0-7>(<0-
7>(<0-7>|)|)|)|)|)|)|)2784nopriority-flow-controlenablepriority<0-7>(<0-7>(<0-7>(<0-7>(<0-7>(<0-7>
(<0-7>(<0-7>|)|)|)|)|)|)|)
CommandMode
InterfaceConfiguration
Default
Enablepriority-basedflowcontrolonpriority3
Usage
Usethepriority-flow-controlenablepriorityinterfaceConfigurationcommandtoset
theinterfacesabilitytosendpauseframestoonoroffonwhichpriorities.
Examples
Thisexampleshowshowtoenablepriority-basedflowcontrolonwhichpriorities:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#priority-flow-controlenablepriority1347
RelatedCommands
None
17.2.3showpriority-flow-control
CommandPurpose
Usethiscommandtodisplaypriority-basedflowcontrolinformation.
CommandSyntax
showpriority-flow-control(interfaceIFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Supportphysicalports2785CommandMode
PrivilegedEXEC
Default
None
Usage
Usethecommandtodisplaypriority-basedflowcontroladmin-configandoperation-
configinformationofeachport.
Examples
Thisexampleshowshowtodisplaypriority-basedflowcontrolinformation:
Switch#showpriority-flow-controlinterfaceeth-0-1
RelatedCommands
None
17.2.4showpriority-flow-controlstatistics
CommandPurpose
Usethiscommandtodisplaythestatisticofpriority-basedflowcontrol.
CommandSyntax
showpriority-flow-controlstatistics(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Interfacename Supportphysicalports
CommandMode
PrivilegedEXEC2786Default
None
Usage
Usethecommandtodisplaythecountinginformationofpauseframesforpriority-
basedflowcontrol.
Examples
Thisexampleshowshowtodisplaythecountinginformationofpauseframesfor
priority-basedflowcontrol:
Switch#showpriority-flow-controlstatisticsinterfaceeth-0-1
RelatedCommands
None
17.3EFDCommands
17.3.1efdenable
CommandPurpose
UsethiscommandtoenableEFDdetectoninterface.Usethenoformofthis
commandtodisableEFDdetectoninterface.
CommandSyntax
efdenable
noefdenable
CommandMode
InterfaceConfiguration
Default
EFDdetectisdisabled2787Usage
Whentherateoftheflowis60Mbps,thisflowshallbeaelephantflow.
Examples
ThisexampleshowshowtoenableEFDontheinterface:
Switch#configureterminal
Switch(config-if)#efdenable
RelatedCommands
None
17.3.2efdtcp-onlyenable
CommandPurpose
UsethiscommandtoenabledetectEFDwithTCPpacket.Usethenoformofthis
commandtodisabledetectEFDwithTCP.
CommandSyntax
efdtcp-onlyenable
noefdtcp-onlyenable
CommandMode
GlobalConfiguration
Default
Allflowwillbedetect
Usage
None
Examples
ThisexampleshowshowtoenableEFDontheinterface:2788Switch#configureterminal
Switch(config)#efdtcp-onlyenable
RelatedCommands
None
17.3.3efdflow-traffic-class
CommandPurpose
UsethiscommandtosettrafficclassforflowdetectedasEFD.Usethenoformof
thiscommandtounsettrafficclassforflowdetectedasEFD.
CommandSyntax
efdflow-traffic-classCLASS
noefdflow-traffic-class
Parameter ParameterDescriptionParameterValue
CLASS Trafficclassvalue 0-6
CommandMode
GlobalConfiguration
Default
Disabled
Usage
None
Examples
Thisexampleshowshowtosetflow-traffic-classas5forEFDflow:
Switch#configureterminal
Switch(config)#efdflow-traffic-class52789RelatedCommands
None
17.3.4efdflow-color
CommandPurpose
UsethiscommandtosetflowcolorforflowdetectedasEFD.Usethenoformofthis
commandtounsetflowcolorforflowdetectedasEFD.
CommandSyntax
efdflow-color(green|red|yellow)
noefdflow-color
Parameter ParameterDescriptionParameterValue
green Lettheflowbetingedwith
green-
red Lettheflowbetingedwith
red-
yellow Lettheflowbetingedwith
yellow-
CommandMode
GlobalConfiguration
Default
Disabled
Usage
None2790Examples
ThisexampleshowshowtosetflowcolorasyellowforEFDflow:
Switch#configureterminal
Switch(config)#efdflow-coloryellow
RelatedCommands
None
17.3.5efddetectspeed
CommandPurpose
UsethiscommandtosetspeedforflowdetectedasEFD.
CommandSyntax
efddetectspeedSPEED
efddetectspeed
Parameter ParameterDescriptionParameterValue
SPEED Detectspeed,Mbps. 1-10000
CommandMode
GlobalConfiguration
Default
50Mbps
Usage
None
Examples
Thisexampleshowshowtoset60MbpsdetectforEFDflow:2791Switch#configureterminal
Switch(config)#efddetectspeed60
RelatedCommands
None
17.3.6efddetectgranularity
CommandPurpose
Usethiscommandtosetthegranularityofcalculatethedetectrate.Thegreaterthe
granularity,thegreaterthequantizederror.
CommandSyntax
efddetectgranularity(4B|8B|16B|32B)
Parameter ParameterDescriptionParameterValue
4B|8B|16B|32B Granularity,default16B.4B|8B|16B|32B
CommandMode
GlobalConfiguration
Default
16B
Usage
(Rate*Interval)>>Granularity,thevaluesbitisfixed.
Examples
Thisexampleshowshowtoset32Bgranularity:
Switch#configureterminal
Switch(config)#efddetectgranularity32B2792RelatedCommands
None
17.3.7efddetecttime-interval
CommandPurpose
UsethiscommandtosetthethetimeintervalforflowasdetectedasEFDs.
CommandSyntax
efddetecttime-intervalINTERVAL
Parameter ParameterDescriptionParameterValue
INTERVAL Timeintervalinms(10ms-
100000ms,defaultvalueis
30ms)10-100000
CommandMode
GlobalConfiguration
Default
30ms
Usage
None
Examples
Thisexampleshowshowtosettimeintervalto100ms:
Switch#configureterminal
Switch(config)#efddetecttime-interval100
RelatedCommands
None279317.3.8efddetectmin-pkt-size
CommandPurpose
UsethiscommandtosetflowcolorforflowdetectedasEFD.Usethenoformofthis
commandtounsetflowcolorforflowdetectedasEFD.
CommandSyntax
efddetectmin-pkt-sizeSIZE
noefddetectmin-pkt-size
Parameter ParameterDescriptionParameterValue
SIZE Configureminimumpacket
size,unitisbyte64-9216
CommandMode
GlobalConfiguration
Default
Disabled
Usage
unitisbyte.
Examples
Thisexampleshowshowtosetelephantflowminimumpacketsizewith300:
Switch#configureterminal
Switch(config)#efddetectmin-pkt-size300
RelatedCommands
showefdconfiguration279417.3.9efdaging-period
CommandPurpose
UsethiscommandtosetflowsdetectedasEFDsagingperiod.
CommandSyntax
efdaging-periodPERIOD
Parameter ParameterDescriptionParameterValue
PERIOD Agingperiod,configure2~
7timesofconfigured
detecttime-interval,default
valueis42-7
CommandMode
GlobalConfiguration
Default
4
Usage
Theagingtimeisthedetectratemultipleagingperiod.
Examples
Thisexampleshowshowtosetagingperiodto3:
Switch#configureterminal
Switch(config)#efdaging-period3
RelatedCommands
None279517.3.10efdredirecttointerface
CommandPurpose
UsethiscommandtoredirecttheflowsdetectedasEFDtothespecifiedinterface.
CommandSyntax
efdredirecttointerfaceIFNAME
Parameter ParameterDescriptionParameterValue
IFNAME TheinterfacetoredirecttoSupport
physical/aggregationports
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoredirecttheflowstointerfaceeth-0-2:
Switch#configureterminal
Switch(config)#efdredirecttointerfaceeth-0-2
RelatedCommands
None279617.3.11efdipgenable
CommandPurpose
Usethiscommandtosetcalculatethedetectratewhetherusethepacketsipg.Use
thenoformofthiscommandtounsetcalculatethedetectratewhetherusethe
packetsipg.
CommandSyntax
efdipgenable
noefdipgenable
CommandMode
GlobalConfiguration
Default
Disable
Usage
None
Examples
Thisexampleshowshowtoenablethecalculatethedetectratewithipg:
Switch#configureterminal
Switch(config)#efdipgenable
RelatedCommands
None279717.3.12efdnotifyenable
CommandPurpose
UsethiscommandtoconfigureEFDnotifyfunction.Usethenoformofthiscommand
tounconfigureEFDnotifyfunction.
CommandSyntax
efdnotifyenableIP_ADDR(PORT|)
noefdnotifyenable
Parameter ParameterDescriptionParameterValue
IP_ADDR IPaddressoftheserverIPv4Address
PORT UDPportusedbyserver1-65535
CommandMode
GlobalConfiguration
Default
Thefeatureisdisabled.
ThedefaultUDPportis20007ifnotspecifed.
Usage
AfterEFDnotifyenabled,thenewelephantflowwillbenotifiedtoserver,theformat
ofthedataintheUDPpacketis:
|-rsv-|ver|code|
|length|
|type-|len-|
|-value|
2798Examples
ThisexampleshowshowtoconfigureEFDnotify:
Switch#configureterminal
Switch(config)#efdnotifyenable10.10.10.1
RelatedCommands
efdenable
efdnotifypacket
17.3.13efdnotifypacket
CommandPurpose
UsethiscommandtoconfigureEFDnotifycarryoriginalpacket.Usethenoformof
thiscommandtounconfigureEFDnotifycarryoriginalpacket.
CommandSyntax
efdnotifypacket
noefdnotifypacket
CommandMode
GlobalConfiguration
Default
Disabled
Usage
None
Examples
ThisexampleshowshowtoconfigureEFDnotifycarryoriginalpacket:
Switch#configureterminal
Switch(config)#efdnotifypacket2799RelatedCommands
efdenable
efdnotifyenable
17.3.14efdblack-hole-routegw
CommandPurpose
UsethiscommandtoenableEFDblackholeroute,specifythegatewayaddressand
routetag.UsethenoformofthiscommandtodisableEFDblackholeroute,
unspecifythegatewayaddressandroutetag.
CommandSyntax
efdblack-hole-routegwIP_ADDR(|tagTAG_VALUE)
noefdblack-hole-route
Parameter ParameterDescriptionParameterValue
IP_ADDR Gatewayaddressofblack
holerouteIPv4Address
TAG_VALUE Tagofblackholeroute0-4294967295
CommandMode
GlobalConfiguration
Default
None
Usage
EnableEFDblackholeroutefeature,ablackholeroutewouldbecreatedforitwhen
aflow
isdetectedaselephantflow,itsnext-hopwouldbepointedtotheconfiguredgateway
address.2800Examples
Thisexampleshowshowtoenableefdblackholeroute:
Switch#efdblack-hole-routegw1.2.3.4tag876
RelatedCommands
showefdbhrinformationdetail
17.3.15efdblack-hole-routeaging-timer
CommandPurpose
Usethiscommandtosetblackholerouteagingtime.Usethenoformfothis
commandtounsetblackholerouteagingtime.
CommandSyntax
efdblack-hole-routeaging-timer(0|value)
noefdblack-hole-routeaging-timer(0|VALUE)
Parameter ParameterDescriptionParameterValue
0 Neveraging -
VALUE Theblackholerouteaging
time10-1000000seconds
CommandMode
GlobalConfiguration
Default
300
Usage
None2801Examples
Thisexampleshowshowtosetagingtime:
Switch#efdblack-hole-routeaging-timer1000
RelatedCommands
None
17.3.16efdsyslogenable
CommandPurpose
Usethiscommandtosettheefddetectinformation.Usethenoformofthiscommand
tounsettheefddetectinformation.
CommandSyntax
efdsyslogenable
noefdsyslogenable
CommandMode
GlobalConfiguration
Default
Enable
Usage
None
Examples
Thisexampleshowshowtosettheefddetectinformation:
Switch#efdsyslogenable2802RelatedCommands
None
17.3.17showefdbhrinformation
CommandPurpose
Usethiscommandtodisplaytheinformationaboutefdblackholeroute.
CommandSyntax
showefdbhrinformation(detail|)
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheinformationaboutefdblackholeroute:
Switch#showefdbhrinformationdetail
ElephantflowdetectionBHRconfigurationinformation:
*BHR-BlackHoleRoute
--------------------------------------------------
AutoinstallBHR:Enabled
BHRgateway:1.2.3.4
BHRcount:1
BHRagingtimer:300
BHRroutetag:876
--------------------------
BHRPrefix,AgeTime:
--------------------------
12.12.12.2/32,1min2803RelatedCommands
efdblack-hole-routegw
efdblack-hole-routeaging-timer
17.3.18showefdconfiguration
CommandPurpose
Usethiscommandtodisplaytheconfigurationofefd.
CommandSyntax
showefdconfiguration
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thisexampleshowshowtodisplaytheconfigurationofefd:
Switch#showefdconfiguration
Elephantflowdetectionconfigurationinformation:
---------------------------------------------------
Detectrate :50Mbps
Detectgranularity:16B
Detecttimeinterval:30ms
Black-hole-routegateway:0.0.0.0
Black-hole-routetag:0
Black-hole-routeagingtime:0
EFDsyslog :Enable
EFDagingperiod:4times
EFDagingtime:120ms~150ms2804EFDdetectpackettype:AllIPpackets
EFDIPG :disable
EFDredirectinterface:N/A
EFDflow-traffic-class:N/A
EFDflow-color:N/A
EFDnotify :1.2.3.420007
EFDnotifypacket:disable
EFDmin-pkt-size:disable
EFDflowhashfields:source-ip
destination-ip
ip-protocol
layer4-source-port
layer4-destination-port
EFDenabledinterface:
------------------------------------------------------
eth-0-1 eth-0-9
eth-0-10 agg5
RelatedCommands
None
17.3.19showefdflowtable
CommandPurpose
Usethiscommandtodisplaytheefdflowhardwareinformation.
CommandSyntax
showefdflowtable
CommandMode
PrivilegedEXEC
Default
None
Usage
None2805Examples
Thisexampleshowshowtodisplaytheefdflowhardwareinformation:
Switch#showefdflowtable
Currentelelphantflownumberis0,validbitcountis0
FlowEntryStatus:'V'---Valid,'.'---NotValid
FlowId--------------------------------
(00)0000~0031................................
(01)0032~0063................................
(02)0064~0095................................
(03)0096~0127................................
(04)0128~0159................................
(05)0160~0191................................
(06)0192~0223................................
RelatedCommands
None
17.3.20showefdflowinformation
CommandPurpose
UsethiscommandtodisplayEFDflowinformation.
CommandSyntax
showefdflowinformation
CommandMode
PrivilegedEXEC
Default
None
Usage
None2806Examples
ThisexampleshowshowtodisplayEFDflowinformation:
Switch#showefdflowinformation
RelatedCommands
None
17.3.21clearefdflowinformation
CommandPurpose
UsethiscommandtoclearEFDflowinformation.
CommandSyntax
clearefdflowinformation
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThisexampleshowshowtoclearEFDflowinformation:
Switch#clearefdflowinformation
RelatedCommands
None280717.4OVSDBCommands
17.4.1ovsdbenable
CommandPurpose
Usethiscommandtosetovsdbenable/disable.
CommandSyntax
ovsdbenable(management-ipIP_ADDR|)(none-mgmt-if|)
noovsdbenable
Parameter ParameterDescriptionParameterValue
IP_ADDR Configurethe
managementIPaddress,it
willbesettoVTEP
databaseIPv4Address
none-mgmt-if Configuretheclient
connecttoOVSDBserver
fromin-bandinterface-
CommandMode
GlobalConfiguration
Default
Disable
Usage
AlloverlayconfigurationswillbecontrolledbyOVSDBafterOVSDBfunctionenabled
inswitch.ThepassiveTCPconnectionwillbeopendwithport6632whenovsdb
enabling.2808Examples
ThefollowingexampleshowshowtoenableOVSDB:
Switch#configureterminal
Switch(config)#ovsdbenablemanagement-ip192.168.1.1
RelatedCommands
ovsdbportenable
17.4.2ovsdbportenable
CommandPurpose
UsethiscommandtolettheportcontrolledbyOVSDB.Torestorethedefaultvalue,
usethenoformofthiscommand.
CommandSyntax
ovsdbportenable
noovsdbportenable
CommandMode
InterfaceConfiguration
Default
None
Usage
TherearenooverlayconfigurationsspecifiedbyOVSDBifnoneportiscontrolledby
OVSDB
Examples
ThefollowingexampleshowshowtoenableOVSDBonport:
Switch#configureterminal
Switch(config-if)#ovsdbportenable2809RelatedCommands
ovsdbenable
17.4.3ovsdbvirtual-port
CommandPurpose
UsethiscommandtoconfigurethevirtualportliketunnelcontrolledbyOVSDB.To
unsettheconfiguration,usethenoformofthiscommand.
CommandSyntax
ovsdbvirtual-portNAME
noovsdbvirtual-port
Parameter ParameterDescriptionParameterValue
NAME ThenameofvirtualportUpto20characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtoconfigurethevirtualport:
Switch#configureterminal
Switch(config)#ovsdbvirtual-porttunnel1
RelatedCommands
None281017.4.4ovsdbcontroller
CommandPurpose
UsethiscommandtoconfigureIPaddressofOVSDBcontroller.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
ovsdbcontrollerIP_ADDR(portNUM|)
noovsdbcontroller
Parameter ParameterDescriptionParameterValue
IP_ADDR SpecifyIPaddressof
OVSDBcontrollerIPv4Address
NUM SpecifytheportforTCP
connection1-65535
CommandMode
GlobalConfiguration
Default
Thereisnonecontrollerbydefault.
ThedefaultTCPportis6632ifnotspecified.
Usage
ThedefaultTCPportforconnectionis6632.
Examples
ThefollowingexampleshowshowtoconfiguretheIPaddressofcontroller:
Switch#configureterminal
Switch(config)#ovsdbcontroller192.168.1.22811RelatedCommands
ovsdbenable
17.4.5debugovsdb
CommandPurpose
UsethiscommandtoconfigurethelevelofOVSDBlogtodisplay.Torestorethe
defaultvalue,usethenoformofthiscommand.
CommandSyntax
debugovsdb(server|agent)(event|level)(error|warning|informaiton|debug|)
nodebugovsdb(server|agent)level|event
Parameter ParameterDescriptionParameterValue
server ConfigurelevelforOVSDB
server-
agent ConfigurelevelforOVSDB
agent-
event Configureeventfor
OVSDBagentandserver-
error Theleveloflogtodisplay
isERROR-
warning Theleveloflogtodisplay
isWARNING-
informaiton Theleveloflogtodisplay
isINFORMATION-
debug Theleveloflogtodisplay
isDEBUG-
CommandMode
PrivilegedEXEC2812Default
None
Usage
Fortheconfigurationtakeeffect,thiscommandshouldbeinputafterOVSDBenabled
onswitch.
Examples
ThefollowingexampleshowshowtomodifythelevelofOVSDBlogtodisplay:
Switch#debugovsdbserverleveldebug
RelatedCommands
ovsdbenable
17.4.6showovsdb
CommandPurpose
UsethiscommandtodisplaytheinformationinVTEPdatabase.
CommandSyntax
showovsdb(physical-switch(port|bindingIFNAME|)|logical-switch|remote-
macs(LSNAME|))
Parameter ParameterDescriptionParameterValue
physical-switch Displaytheinformationof
physicalswitchinVTEP
database-
port Displaytheinformationof
physicalportinVTEP
database-2813bindingIFNAME Displaythebindingsof
specifiedportinVTEP
databaseAggregationandphysical
interface
logical-switch Displaytheinformationof
logicalswitchinVTEP
database-
remote-macs(LSNAME|)DisplaytheremoteMACs
ofspecifiedlogicalswitch
inVTEPdatabase-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaythephysicalswitchinVTEPdatabase:
Switch#showovsdbphysical-switch
PhysicalSwitchName:switchA4D992AFF400
ManagementIPaddress:
TunnelIPaddress:2.2.2.1
RelatedCommands
ovsdbenable281417.5EVPNCommands
17.5.1address-familyl2vpnevpn
CommandPurpose
UsethiscommandtoenterEVPNaddressfamilyconfiguremode.
UsethenoparameterofthiscommandtocancelEVPNconfigurationinBGP.
CommandSyntax
address-familyl2vpnevpn
noaddress-familyl2vpnevpn
CommandMode
RouterConfiguration
Default
None
Usage
Usetheaddressfamilycommandtoentertheaddressfamilymodeallowing
configurationofaddress-familyspecificparameters.Toleavetheaddressfamily
modeandreturntotheConfiguremodeusetheexit-address-familycommand.
EVPNfeatureshouldbeenabledbeforeenterthisaddressfamilyconfiguremode.
Examples
ThefollowingexampleshowshowtoEVPNaddressfamilyconfiguremode:
Switch#configureterminal
Switch(config)#routerbgp1
Switch(config-router)#address-familyl2vpnevpn
Switch(config-router-af)#
RelatedCommands
exit-address-family281517.5.2debugoverlayevpn
CommandPurpose
UsethiscommandtoenableallEVPNtroubleshootingfunctionsonOverlay.
Usenoformatofthiscommandtodisablethisconfiguration.
CommandSyntax
debugoverlayevpn
nodebugoverlayevpn
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodebugEVPNonoverlay:
Switch#debugoverlayevpn
RelatedCommands
overlayhost-collect
17.5.3evpn
CommandPurpose
UsethiscommandtoenableEVPNfunctionandenterEVPNconfiguremode.
UsenoformatofthiscommandtodisableEVPNfunction.2816CommandSyntax
evpn
noevpn
CommandMode
GlobalConfiguration
Default
Disable
Usage
ThiscommandcanenableEVPNfunction.AndafterenteringEVPNconfiguremode,
EVPNinstancecanbecreated.Whenthefunctionhadbeendisabled,allEVPN
instanceswillbedeleted.
Examples
ThefollowingexampleshowshowtoenableEVPNfunction:
Switch#configureterminal
Switch(config)#evpn
Switch(config-evpn)#
RelatedCommands
address-familyl2vpnevpn
17.5.4overlayhost-collect
CommandPurpose
Usethiscommandtoenablehostinformationcollection.
Usenoformatofthecommandtodisablethisconfiguration.
CommandSyntax
overlayhost-collect(enable|disable)2817CommandMode
InterfaceConfiguration
Default
Disable
Usage
AfterhostcollectionwasenabledandbothRDandroute-targetofEVPNinstance
wasconfigured,hostinformationfromdynamicarpwillbesenttoBGPmoduleto
formatandadvertiseEVPNtype2route.
Examples
Thefollowingexampleshowshowtoenablehostinformationcollectiononinterface:
Switch#configureterminal
Switch(config)#interfacevlan100
Switch(config-if)#overlayhost-collectenable
RelatedCommands
evpn
17.5.5rd
CommandPurpose
Usethiscommandtosetroutedistinguisher.forEVPNinstance.
CommandSyntax
rd(auto|RD-VALUE)
Parameter ParameterDescriptionParameterValue
auto Automaticallygenerates
anRDintheN:VXLANID
format-2818RD-VALUE Routedistinguishervalue.
ASN:nnorIP:nnASNrangeis1-
4294967295
nnrangeis1-65535
CommandMode
EVIConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetrd:
Switch#configureterminal
Switch(config)#evpn
Switch(config-evpn)#vni100
Switch(config-evi)#rdauto
RelatedCommands
vni
17.5.6route-target
CommandPurpose
UsethiscommandtosetroutetargetforEVPNinstance.
Usenoformatofthecommandtocanceltheconfiguration.
CommandSyntax
route-target(import|export|both)(auto|RT-VALUE)
noroute-target(import|export|both)(auto|RT-VALUE)2819noroute-target(import|export|both|)
Parameter ParameterDescriptionParameterValue
import Importdirection -
export Exportdirection -
both Importandexportdirection-
auto Automaticallygenerates
anroutetarget-
RT-VALUE Routetargetvalue.
ASN:nnorIP:nnASNrangeis1-
4294967295
nnrangeis1-65535
CommandMode
EVIConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetroutetarget:
Switch#configureterminal
Switch(config)#evpn
Switch(config-evpn)#vni100
Switch(config-evi)#route-targetbothauto
RelatedCommands
vni282017.5.7route-targetevpn
CommandPurpose
UsethiscommandtosetroutetargetforEVPNinstanceinvrfmode.
Usenoformatofthecommandtocanceltheconfiguration.
CommandSyntax
route-target(import|export|both)(RT-VALUE)evpn
noroute-target(import|export|both)(auto|RT-VALUE)
noroute-target(import|export|both|)
Parameter ParameterDescriptionParameterValue
import Importdirection -
export Exportdirection -
both Importandexportdirection-
RT-VALUE Routetargetvalue.
ASN:nnorIP:nnASNrangeis1-
4294967295
nnrangeis1-65535
CommandMode
VRFConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetroutetarget:2821Switch#configureterminal
Switch(config)#ipvrfa
Switch(config-vrf)#route-targetboth1:1evpn
RelatedCommands
vxlanvni
17.5.8neighborattribute-unchanged
CommandPurpose
UsethiscommandtoadvertiseunchangedBGPattributestothespecifiedneighbor.
Usenoformatwiththiscommandtodisablethisfunction.
CommandSyntax
neighbor(IP_ADDR|WORD)attribute-unchangednext-hop
noneighbor(IP_ADDR|WORD)attribute-unchangednext-hop
Parameter ParameterDescriptionParameterValue
IP_ADDR Specifiestheaddressof
theBGPneighborinIPv4
formatIPv4Address
WORD Nameofanexistingpeer-
groupUpto20characters
CommandMode
AddressFamilyConfiguration
Default
None
Usage
None2822Examples
Thefollowingexampleshowshowtosetnexthopunchangedattribute:
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyl2vpnevpn
Switch(config-router-af)#neighbor1.1.1.1attribute-unchangednext-hop
RelatedCommands
address-familyl2vpnevpn
17.5.9neighborsend-community
CommandPurpose
UsethiscommandtospecifythatacommunityattributeshouldbesenttoaBGP
neighbor.
Usenoformatwiththiscommandtoremovetheentry.
CommandSyntax
neighbor(IP_ADDR|WORD)(both|extended|standard)
noneighbor(IP_ADDR|WORD)(both|extended|standard)
Parameter ParameterDescriptionParameterValue
IP_ADDR Specifiestheaddressof
theBGPneighborinIPv4
formatIPv4Address
WORD Nameofanexistingpeer-
groupUpto20characters
both SendsStandardand
ExtendedCommunity
attributes-
extended SendsExtended
Communityattributes-2823standard SendsStandard
Communityattributes-
CommandMode
AddressFamilyConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtosetsend-communityattribute:
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyl2vpnevpn
Switch(config-router-af)#neighbor1.1.1.1send-communityextended
RelatedCommands
address-familyl2vpnevpn
17.5.10neighborroute-reflector-client
CommandPurpose
UsethiscommandtoconfiguretherouterasaBGProutereflectorandconfigurethe
specifiedneighborasitsclient.
Usethenoparameterwiththiscommandtoindicatethattheneighborisnotaclient.
CommandSyntax
neighborNEIGHBORIDroute-reflector-client
noneighborNEIGHBORIDroute-reflector-clien2824Parameter ParameterDescriptionParameterValue
NEIGHBORID (A.B.C.D|TAG) -
IP_ADDR Specifiestheaddressof
theBGPneighborinIPv4
format.IPv4Address
TAG Nameofanexistingpeer-
group.Forinformationon
howtocreatepeergroups,
refertotheneighborpeer-
groupandneighbor
remote-ascommands.
Whenthisparameteris
usedwithacommand,the
commandappliesonall
peersinthespecified
group.-
CommandMode
AddressFamilyConfiguration
Default
N/A
Usage
RoutereflectorsareasolutionfortheexplosionofiBGPpeeringwithinan
autonomoussystem.ByroutereflectionthenumberofiBGPpeerswithinanASis
reduced.Usetheneighborroute-reflector-clientcommandtoconfigurethelocal
routerastheroutereflectorandspecifyneighborsasitsclient.
AnAScanhavemorethanoneroutereflector.Oneroutereflectortreatstheother
routereflectorasanotheriBGPspeaker.2825Examples
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyl2vpnevpn
Switch(config-router-af)#neighbor10.10.0.72route-reflector-client
RelatedCommands
N/A
17.5.11retainroute-targetall
CommandPurpose
Usethiscommandtoconfigurethebgproutewouldnotdeletewhentheyarenot
duplicatedintoevpninstance.
Usenoformatofthiscommandtocanceltheconfiguration.
CommandSyntax
retainroute-targetall
CommandMode
AddressFamilyConfiguration
Default
None
Usage
whenthebgpwouldbeusedfortransmittingthebgprouteastheunderlaynetwork,it
shouldsetthisconfiguration.
Examples
Thefollowingexampleshowshowtosetthisconfiguraion:
Switch#configureterminal
Switch(config)#routerbgp1002826Switch(config-router)#address-familyl2vpnevpn
Switch(config-router-af)#retainroute-targetall
RelatedCommands
evpn
17.5.12advertisel2vpnevpn
CommandPurpose
Usethiscommandtoconfigurethebgpvrfinstanceroutecouldbeadvertisedinto
theevpninstance.
Usenoformatofthiscommandtocanceltheconfiguration.
CommandSyntax
advertisel2vpnevpn
CommandMode
AddressFamilyConfiguration
Default
None
Usage
Whenitisneededtoadvertisetherouteofvrfinstancetotheevpninstanceastype5
route,itshouldsetthisconfiguration.
Examples
Thefollowingexampleshowshowtosetthisconfiguraion:
Switch#configureterminal
Switch(config)#routerbgp100
Switch(config-router)#address-familyipv4vrfa
Switch(config-router-af)#advertisel2vpnevpn2827RelatedCommands
evpn
17.5.13vni
CommandPurpose
UsethiscommandtocreateEVPNinstance.
Usenoformatofthiscommandtocanceltheconfiguration.
CommandSyntax
vniVAL
novniVAL
Parameter ParameterDescriptionParameterValue
VAL TheIDofvni 1-16777215
CommandMode
EVPNConfiguration
Default
None
Usage
TheEVPNinstancewillbereadyuntilbothRDandroute-targetisset.
Examples
ThefollowingexampleshowshowtocreateanEVPNinstance:
Switch#configureterminal
Switch(config)#evpn
Switch(config-evpn)#vni2001
Switch(config-evi)#2828RelatedCommands
evpn
17.5.14vxlanvni
CommandPurpose
UsethiscommandtocreateEVPNinstanceofvrf.
Usenoformatofthiscommandtocanceltheconfiguration.
CommandSyntax
vxlanvniVAL
novxlanvniVAL
Parameter ParameterDescriptionParameterValue
VAL TheIDofvni 1-16777215
CommandMode
EVPNConfiguration
Default
None
Usage
TheEVPNinstancewillbereadyuntilbothRDandroute-targetisset.
Examples
ThefollowingexampleshowshowtocreateanEVPNinstance:
Switch#configureterminal
Switch(config)#ipvrfa
Switch(config-vrf)#vxlanvni10002829RelatedCommands
evpn
17.5.15vxlanuplink
CommandPurpose
Usethevxlanuplinkcommandtoenableordisablevxlanuplinkportcapability.
CommandSyntax
vxlanuplink(enable|disable)
Parameter ParameterDescriptionParameterValue
enable Makevxlanuplinkport
enable-
disable Makevxlanuplinkport
disable-
CommandMode
InterfaceConfiguration
Default
Disable
Usage
Thecommandisallowsettingonethertypeport.Thiscommandisusedto
decapsulatedthevxlanpacketforl2vniandl3vni
Examples
Thisexampleshowshowtoenablevxlanuplinkoninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#vxlanuplinkenable2830RelatedCommands
None
17.5.16interfacenve
CommandPurpose
Usethiscommandtocreateaniterfacenve.
Usenoformatofthiscommandtocanceltheconfiguration.
CommandSyntax
interfacenveIFNVE
Parameter ParameterDescriptionParameterValue
IFNVE Theindexofnveif 0-3
CommandMode
GlobalConfiguration
Default
None
Usage
Therearefournvesconfiguredbecauseoffoursourceipaddressofoverlay
Examples
Thefollowingexampleshowshowtocreateaninterfacenve:
Switch#configureterminal
Switch(config)#interfacenve1
RelatedCommands
showinterfacenve283117.5.17source
CommandPurpose
Usethiscommandtosettheoverlaysourcevtepipaddressofnve.
Toremovethesourcevtepipaddressofnve,usethenoformofthiscommand.
CommandSyntax
source(IP_ADDR|IFNAME)
nosource
Parameter ParameterDescriptionParameterValue
IP_ADDR Theoverlaysourcevtepip
addressofnve,itshould
beavalidinterfaceip
address.IPv4Address
IFNAME Theoverlaysource
interfaceofnvemusthave
primaryipaddressAggregation,physical,
vlanandloopback
interface
CommandMode
InterfaceConfiguration
Default
None
Usage
Overlaysourcevtepipaddressisusedtoencapanddecapoverlaypackets.Itis
recommendedthatthesourcevtepipaddressisthesamewithsomeloopback
interfaceaddresssothatiproutingcanbereachable.
Examples
Thefollowingexamplesetsthesourcevtepipaddressofnve:2832Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#source1.1.1.1
switch#showinterfacenve1
Interfacenve1
Interfacecurrentstate:UP
Index540673,Metric0,EncapsulationVXLAN
VRFbinding:notbound
Tunnelprotocol/transportVxlan,StatusValid
Source1.2.3.4(loopback1)
tunnelkeep-vlan-tagdisable
tunnelsplit-horizonenable
tunnelencapsulation-dscp-strategydscp-copy
Vni10000,protocoltypebgp,Inclusive-multi(local)active
Vni20000,protocoltypebgp(associate-vrf),Inclusive-multi(local)inactive
RelatedCommands
None
17.5.18membervni
CommandPurpose
Usethiscommandtobindthevniwiththenve.
Tounbindthevnifromthenve,usethenoformofthiscommand.
CommandSyntax
membervni(VAL)(associate-vrf|)
nomembervni(VAL)(associate-vrf|)
Parameter ParameterDescriptionParameterValue
VAL Thevniofvalue 1-16777215
associate-vrf TheL3vniofvrf -
CommandMode
InterfaceConfiguration2833Default
None
Usage
Thevniwithoutassociate-vrfisL2vniandotherisL3vni
Examples
ThefollowingexampleconfiguretheL2vnifornveif:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#membervni10000
switch#showinterfacenve1
Interfacenve1
Interfacecurrentstate:UP
Index540673,Metric0,EncapsulationVXLAN
VRFbinding:notbound
Tunnelprotocol/transportVxlan,StatusValid
Source1.2.3.4(loopback1)
tunnelkeep-vlan-tagdisable
tunnelsplit-horizonenable
tunnelencapsulation-dscp-strategydscp-copy
Vni10000,protocoltypebgp,Inclusive-multi(local)active
RelatedCommands
None
17.5.19dscp-strategy
CommandPurpose
Usethecommandtoconfiguretheouteripdscpgainingmode.
CommandSyntax
encapsulation-dscp-strategy(dscp-copy|priority-map|custom-assignVALUE)
Parameter ParameterDescriptionParameterValue
dscp-copy Copyfrominneripdscp-2834priority-map Mapfrompriorityofqos-
VALUE Assigndscpbyusers 0-63
CommandMode
InterfaceConfiguration
Default
Dscp-copy
Usage
Whendscp-strategyissetpriority-map,pleaseconfigureQOSprioritybyMQC.
Examples
Thefollowingexamplesetsoverlaydscp-strategyascustom-assign:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#encapsulation-dscp-strategycustom-assign63
RelatedCommands
None
17.5.20virtual-mac
CommandPurpose
Usethevirtualmaccommandtospecifythevirtualroutemacaddressofnvevtep.
Usethenoformofthiscommandtoremovethevirtualmacaddressofnvevtep.
CommandSyntax
virtual-macMAC
novirtual-mac
Parameter ParameterDescriptionParameterValue2835MAC Thevirtualmacaddressof
remotevtepofnveHHHH.HHHH.HHHH
CommandMode
InterfaceConfiguration
Default
None
Usage
Thevirtualmacaddresswillbeusedastheinnermacaddressofroutesforevpn
firstly.
Examples
Thefollowingexamplesetsthenveremotevtepwiththevirtualmaca.a.a:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#virtual-maca.a.a
RelatedCommands
None
17.5.21keep-vlan-tag
CommandPurpose
Usethecommadtoconfigurethenveremotevtepforkeeptheinnervlantag
CommandSyntax
keep-vlan-tag(enable|disable)
Parameter ParameterDescriptionParameterValue
enable enablekeepvlantag -2836disable diablekeepvlantag -
CommandMode
InterfaceConfiguration
Default
diable
Usage
None
Examples
Thefollowingexampleenablestheremotevtepkeepvlantagofnve:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#keep-vlan-tagenable
RelatedCommands
None
17.5.22split-horizon
CommandPurpose
Usethecommadtoconfigurethenveremotevtepforsplit-horizon
CommandSyntax
split-horizon(enable|disable)
Parameter ParameterDescriptionParameterValue
enable enablesplit-horizon -
disable disablesplit-horizon -2837CommandMode
InterfaceConfiguration
Default
enable
Usage
None
Examples
Thefollowingexampledisablesthesplit-horizonofoverlaytunnel.:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#split-horizondisable
RelatedCommands
None
17.5.23evpninclusive-multicast
CommandPurpose
Usethecommadtoconfiguretheevpninclusivemultipleroutewhetheritcanbesent
CommandSyntax
evpninclusive-multicast(enable|disable)
Parameter ParameterDescriptionParameterValue
enable enablesendinginclusive-
multicastroute-
disable disablesendinginclusive
multicastroute-2838CommandMode
InterfaceConfiguration
Default
enable
Usage
None
Examples
Thefollowingexampledisablesthesendinginclusive-multicastroutebynve.:
Switch#configureterminal
Switch(config)#interfacenve1
Switch(config-if)#evpninclusive-multicastdisable
RelatedCommands
None
17.5.24vlanarp-broadcast-suppress
CommandPurpose
Usethecommandtoenablethearpbroadcastsuppressofvlan.Usethenoformof
thiscommandtoremovetheconfiguration.
CommandSyntax
vlan<2-4094>arp-broadcast-suppress
Parameter ParameterDescriptionParameterValue
enable enablearpbroadcast
suppress-
disable disablearpbroadcast
suppress-2839CommandMode
VLANConfiguration
Default
disable
Usage
None
Examples
Thefollowingexampleenablesarpbroadcastsuppressofvla10.:
Switch#configureterminal
Switch(config)#vlandatabase
Switch(config-vlan)#vlan10arp-broadcast-suppressenable
RelatedCommands
None
17.5.25evpnmode
CommandPurpose
Usethecommandtoconfiguretheevpnmodeasasymmetry.Usethenoformofthis
commandtoremovetheconfiguration.
CommandSyntax
evpnmodeasymmetry
CommandMode
GlobalConfiguration
Default
symmetry2840Usage
None
Examples
Thefollowingexampleconfigurestheevpnmodeasasymmetry.:
Switch#configureterminal
Switch(config)#evpnmodeasymmetry
RelatedCommands
None
17.5.26vlanmac-address-tunnellearning-disable
CommandPurpose
Usethecommandtodiabletheinnerfdblearningofevpntunnel.Usethenoformof
thiscommandtoremovetheconfiguration.
CommandSyntax
vlan<2-4094>mac-address-tunnellearning-disable
CommandMode
OVERLAYConfiguration
Default
None
Usage
None
Examples
Thefollowingexampleconfiguresthetunnelfdblearningdisableforvlan10.:2841Switch#configureterminal
Switch(config)#overlay
Switch(config-overlay)#vlan10mac-address-tunnellearning-disable
RelatedCommands
None
17.5.27showbgpevpn
CommandPurpose
UsethiscommandtodisplaytherouteinformationofEVPN.
CommandSyntax
showbgpevpn(all|rdVAL|vniVAL)(route-type(mac-ip|inclusive-multi|ip-
prefix|)|)
Parameter ParameterDescriptionParameterValue
all DisplayallEVPNroute-
rdVAL Secifytherdtodisplay
EVPNrouteRoutedistinguishervalue.
ASN:nnorIP:nn
ASNrangeis1-
4294967295
nnrangeis1-65535
vniVAL Secifythevnitodisplay
EVPNroute1-16777215
route-type SpecifythetypeofEVPN
route-
mac-ip MAC/IPAdvertisement
Route-
inclusive-multi Inclusive-Multiple
AdvertisementRoute-
ip-prefix ip-prefixAdvertisement
Route-2842CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaytherouteinformationofEVPN:
Switch#showbgpevpnall
Statuscodes:ssuppressed,ddamped,hhistory,*valid,>best,i-internal,
SStale
Origincodes:i-IGP,e-EGP,?-incomplete
NetworkNextHopMetricLocPrfWeightPath
RouteDistinguisher:1:2001(VNI2001)
*>[2]:[0]:[48]:[8264.c465.9400]:[32]:[12.12.12.2]/136
1.1.1.1 32768i
*>[2]:[0]:[48]:[8264.c465.9400]:[32]:[12.12.12.3]/136
1.1.1.1 32768i
RelatedCommands
evpn
17.5.28showbgpevpninstance
CommandPurpose
UsethiscommandtodisplaytheinstanceinformationofEVPN.
CommandSyntax
showbgpevpninstance(all|vniVAL)
Parameter ParameterDescriptionParameterValue2843all allevpnintance -
vniVAL Secifythevnitodisplay
EVPNinstance1-16777215
CommandMode
PrivilegedEXEC
Default
none
Usage
None
Examples
ThefollowingexampleshowshowtodisplaytheinformationofEVPNinstance:
Switch#showbgpevpninstancevni10000
Swicth#showbgpevpninstancevni10000
EVPNinstancevni:10000
Addressfamily:evpn
RouteDistinguisher:1:10000(auto)
RouteTargetExport:assigned
:1:10000
RouteTargetImport:assigned
:1:10000
RouteMapExport:-
RouteMapImport:-
DUT2#
RelatedCommands
None
17.5.29showbgpevpnneighbors
CommandPurpose
UsethiscommandtodisplaytheneighborinformationofEVPN.2844CommandSyntax
showbgpevpn(neighborsIP_ADDR|summary|)
Parameter ParameterDescriptionParameterValue
IP_ADDR SecifytheIPaddressof
neighborIPv4Address
summary Displaythesummary
informationofEVPN
neighbors-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaythesummaryinformationofEVPN
neighbors:
Switch#showbgpevpnsummary
BGProuteridentifier12.12.12.1,localASnumber1
BGPtableversionis10
1BGPAS-PATHentries
0BGPcommunityentries
NeighborVASMsgRcvdMsgSentTblVerInQOutQUp/DownState/PfxRcd
1.1.1.241946954100013:35:360
Totalnumberofneighbors1
RelatedCommands
evpn284517.5.30showoverlayhost-information
CommandPurpose
Usethiscommandtodisplaythehostinformation.
CommandSyntax
showoverlayhost-information(vniVAL|summary)
Parameter ParameterDescriptionParameterValue
vniVAL Secifythevnitodisplay
hostinformation,rangein
[1,16777215]1-16777215
summary Specifythesummaryof
hostinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaytherouteinformationofEVPN:
Switch#showoverlayhost-informationvni2001
MacIPaddressVTEPaddressTunnelRoute
-----------------------------------------------------------
8264.c465.940012.12.12.31.1.1.1NN2846RelatedCommands
evpn
17.5.31showinterfacenve
CommandPurpose
Usethiscommandtodisplaytheinterfacenveinformation.
CommandSyntax
showinterfacenveINDEX
Parameter ParameterDescriptionParameterValue
INDEX Theindexofnveif 0-3
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaythenveifinformation:
Switch#showinterfacenve1
Switch#showinterfacenve1
Interfacenve1
Interfacecurrentstate:UP
Index540673,Metric0,EncapsulationVXLAN
VRFbinding:notbound
Tunnelprotocol/transportVxlan,StatusValid
Source1.2.3.4(loopback1)
tunnelkeep-vlan-tagdisable2847tunnelsplit-horizonenable
tunnelencapsulation-dscp-strategydscp-copy
Vni10000,protocoltypebgp,Inclusive-multi(local)active
Vni20000,protocoltypebgp(associate-vrf),Inclusive-multi(local)inactive
RelatedCommands
None
17.5.32showoverlaytunnel
CommandPurpose
Usethiscommandtodisplaytheoverlaytunnelinfo.
CommandSyntax
showoverlaytunnel(static|evpn|interfacenveIFNVE|)
Parameter ParameterDescriptionParameterValue
static tunnelofstatic -
evpn tunnelofevpn -
IFNVE Theindexofnveif 0-3
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaytheoverlaytunnelinformation:2848Switch#showoverlaytunnelevpn
switch#showoverlaytunnelevpn
-------------------------------------------------------------------------------
VlanVniTypeRemote-vtepIP-AddressSrc-AddressHead-end-floodingProtocol
1010000VxLAN010.20.30.401.2.3.4EnableEvpn
DUT2#
RelatedCommands
None
17.5.33showoverlayevpnremote-vtep
CommandPurpose
Usethiscommandtodisplaytheoverlayevpnvtepinfo.
CommandSyntax
showoverlayevpnremote-vtep(interfacenveIFNVE)
Parameter ParameterDescriptionParameterValue
IFNVE Theindexofnveif 0-3
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaytheoverlaytunnelinformation:
Switch#showoverlayevpnremote-vtepinterfacenve12849switch#showoverlayevpnremote-vtepinterfacenve1
----------------------------------------------------------------------------------------------------
NveVniSrc-ipDst-ipKeep-vlanSplit-horizonDscp-strategy
nve1100001.2.3.410.20.30.40DisableEnableDscp-copy
RelatedCommands
None
17.5.34showoverlayarp-suppress-information
CommandPurpose
Usethiscommandtodisplaytheentryofarpbroadcastentry.
CommandSyntax
showoverlayarp-suppress-information
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Thefollowingexampleshowshowtodisplaythearpbroadcastentry.:
Switch#showoverlayarp-suppress-information
switch#showoverlayarp-suppress-information
IPaddressMacref
-----------------------------------------------------------
10.1.1.4a239.c664.f1001
Totoal:12850RelatedCommands
None
17.5.35showoverlaymac-forwarding-information
CommandPurpose
Usethiscommandtodisplaytheremotefdbinformation.
CommandSyntax
showoverlaymac-forwarding-information(vniVAL|summary)
Parameter ParameterDescriptionParameterValue
vniVAL Secifythevnitodisplay
hostinformation,rangein
[1,16777215]1-16777215
summary Specifythesummaryof
hostinformation-
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingexampleshowshowtodisplaythemacforwardinformationofEVPN:
Switch#showoverlaymac-forwarding-informationvni10000
switch#showoverlaymac-forwarding-informationvni10000
VlanMacIPaddressTunnel2851-----------------------------------------------------------
106ae7.f8cb.770010.20.30.40Y
RelatedCommands
evpn285218MPLSCommands
18.1LDPCommands
18.1.1advertise-labelsfor
CommandPurpose
UsethiscommandtospecifywhichdestinationshavetheirlabelsadvertisedtoLDP
neighbors.Usethenoparametertospecifywhichdestinationsdonothavetheir
labelsadvertisedtoLDPneighbors.
CommandSyntax
advertise-labelsforPREFIX_ACLto(PEER_ACL|any)
noadvertise-labelsforPREFIX_ACLto(PEER_ACL|any)
Parameter ParameterDescriptionParameterValue
PREFIX_ACL Prefixaccesscontrollist
nameUpto20characters
PEER_ACL Peerprefixlistname Upto20characters
any AllLDPneighbors -
CommandMode
RouterConfiguration
Default
ThelabelsofalldestinationsareadvertisedtoallLDPneighbors.2853Usage
None
Examples
Inthefollowingexample,theadvertise-labelsforcommandareusedtospecifywhich
destinationshavetheirlabelsadvertisedtoallLDPneighbors:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#advertise-labelsforprefix-acltoany
RelatedCommands
advertise-labelsforanytonone
advertise-labelsforprefix-acltopeer-acl
18.1.2clearldpadjacency
CommandPurpose
Usethiscommandtoclearanadjacencywithaspecifiedpeer(IPaddressIP_ADDR),
ortoclearalladjacenciesforthecurrentLSR.
CommandSyntax
clearldpadjacency(IP_ADDR|*)
Parameter ParameterDescriptionParameterValue
IP_ADDR Theaddressofthe
adjacentpeerIPv4Address
* Usetoclearall
adjacencies-
CommandMode
PrivilegedEXEC2854Default
None
Usage
None
Examples
Inthefollowingexample,theclearldpadjacencycommandisusedtoclearan
adjacencywithaspecifiedpeer:
Switch#clearldpadjacency123.123.123.33
RelatedCommands
clearldpsession
showldpadjacency
18.1.3clearldpsession
CommandPurpose
Usethiscommandtoclearasessionestablishedwithaspecifiedpeer(IPaddress
IP_ADDR),ortoclearallsessionsforthecurrentLSR.
CommandSyntax
clearldpsession(IP_ADDR|*)
Parameter ParameterDescriptionParameterValue
IP_ADDR Theaddressofthe
adjacentpeerIPv4Address
* Usetoclearall
adjacencies-2855CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theclearldpsessioncommandisusedtoclearasession
establishedwithaspecifiedpeer:
Switch#clearldpsession123.123.123.33
RelatedCommands
clearldpadjacency
showldpadjacency
showldpsession
18.1.4clearldpstatistics
CommandPurpose
UsethiscommandtoclearLDPpacketstatistics.
CommandSyntax
clearldpstatistics
CommandMode
PrivilegedEXEC2856Default
None
Usage
None
Examples
Inthefollowingexample,theclearldpstatisticscommandisusedtoclearLDP
packetstatistics:
Switch#clearldpstatistics
RelatedCommands
showldpstatistics
18.1.5clearldpstatisticsadvertise-labels
CommandPurpose
UsethiscommandtoclearLDPadvertise-labelsstatistics.
CommandSyntax
clearldpstatisticsadvertise-labels(forPREFIX_ACL)(toPERR_ACL)
Parameter ParameterDescriptionParameterValue
PREFIX_ACL Prefixaccesscontrollist
nameUpto20characters
PEER_ACL Peerprefixlistname Upto20characters
CommandMode
PrivilegedEXEC2857Default
None
Usage
None
Examples
Inthefollowingexample,theclearldpstatisticsadvertise-labelscommandisusedto
clearLDPadvertise-labelsstatistics:
Switch#clearldpstatisticsadvertise-labelsforprefix_acltopeer_acl
RelatedCommands
showldpstatisticsadvertise-labels
18.1.6control-mode
CommandPurpose
Usethiscommandtosetthecontrolmodeforlabelprocessing.Usetheno
parametertoreverttodefaultcontrolmode.
CommandSyntax
control-mode(ordered|independent)
nocontrol-mode(ordered|independent)
Parameter ParameterDescriptionParameterValue
ordered Setscontrolmodeto
orderedprocessing.-
independent Setscontrolmodeto
independentprocessing-
CommandMode
RouterConfiguration2858Default
Independentcontrol
Usage
Orderedprocessingsetsthemodetostrictchain-of-command;anLSRrepliestoa
requestpacketfromanLSRhigherinthechainonlyafteritreceivesalabelfroman
LSRlowerinthechain.Independentprocessingsetsthemodetoinstantreplies.
Inindependentcontrolmode,eachLSRmightadvertiselabelmappingstoits
neighborsatanytime.AnLSRmightadvertisealabelmappingforanFECtoits
neighborswheneveritispreparedtolabel-switchthatFEC.
Inorderedcontrolmode,anLSRmayinitiatethetransmissionoflabelmappingonly
foranFECforwhichithasalabelmappingfortheFECnexthop,orforwhichthe
LSRistheegress.
Changesincontrolmodeonlyaffectlabelsthatweresenttoorreceivedafterthe
changewasmade.
Examples
Inthefollowingexample,thecontrol-modecommandisusedtosetthecontrolmode
forlabelprocessing:
Switch#configureterminal
Switch(config)#routerldp
Switch(congig-router)#control-modeordered
RelatedCommands
showldp
18.1.7debugldpadvertise-labels
CommandPurpose
UsethiscommandtodebugtheIPaccesslistofLDPadvertise-labels.Usetheno
parameterwiththiscommandtodisablethisfunction.2859CommandSyntax
debugldpadvertise-labels
nodebugldpadvertise-labels
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,thedebugldpadvertise-labelscommandisusedtodebug
theIPaccesslistofLDPadvertise-labels:
Switch#debugldpadvertise-labels
RelatedCommands
showdebuggingldp
18.1.8debugldpall
CommandPurpose
UsethiscommandtoenableallLDPtroubleshootingfunctions.Usethenoparameter
withthiscommandtodisablethisfunction.
CommandSyntax
debugldpall
nodebugldpall2860CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,thedebugldpallcommandisusedtoenableallLDP
troubleshootingfunctions:
Switch#debugldpall
RelatedCommands
showdebuggingldp
18.1.9debugldpdsm
CommandPurpose
UsethiscommandtowriteDownstreamstatemachinespecificinformationtothe
output.
CommandSyntax
debugldpdsm
nodebugldpdsm
CommandMode
PrivilegedEXEC2861Default
None
Usage
None
Examples
Inthefollowingexample,thedebugldpdsmcommandisusedtowriteDownstream
statemachinespecificinformationtotheoutput:
Switch#debugldpdsm
RelatedCommands
debugldpfsm
debugldppacket
18.1.10debugldpusm
CommandPurpose
UsethiscommandtowriteUpstreamstatemachinespecificinformationtotheoutput.
CommandSyntax
debugldpusm
nodebugldpusm
CommandMode
PrivilegedEXEC
Default
None2862Usage
None
Examples
Inthefollowingexample,thedebugldpusmcommandisusedtowriteDownstream
statemachinespecificinformationtotheoutput:
Switch#debugldpusm
RelatedCommands
debugldpfsm
debugldppacket
18.1.11debugldpevents
CommandPurpose
UsethiscommandtomonitorallLDPevents,suchassendingpacketsandreceiving
packets.
CommandSyntax
debugldpevents
nodebugldpevents
CommandMode
PrivilegedEXEC
Default
None
Usage
None2863Examples
Inthefollowingexample,thedebugldpeventscommandisusedtomonitorallLDP
events:
Switch#debugldpevents
2002/06/1811:30:35LDP:RECVpacketfrom192.168.3.5port32783
2002/06/1811:30:35LDP:ldp_message_hello_recv:HelloPacketreceivedfrom192.168.3.5
2002/06/1811:30:36LDP:ldp_message_hello_send:SendingHellomessageviainterface
eth1.Notransportaddressisbeingadvertised.
2002/06/1811:30:36LDP:SENDtosocket13port646addr224.0.0.2
2002/06/1811:30:36LDP:ldp_message_hello_send:SendingHellomessageviainterface
eth2.Notransportaddressisbeingadvertised.
2002/06/1811:30:36LDP:SENDtosocket13port646addr224.0.0.2
2002/06/1811:30:37LDP:Server:TCPConnectionestablishedwith192.168.3.5
2002/06/1811:30:37LDP:ldp_message_initialization_recv:Initializationmessage
receivedfrom192.168.3.5
RelatedCommands
debugldpfsm
debugldppacket
18.1.12debugldpfsm
CommandPurpose
UsethiscommandtomonitortheLDPfinitestatemachinestatus.
CommandSyntax
debugldpfsm
nodebugldpfsm
CommandMode
PrivilegedEXEC
Default
None2864Usage
None
Examples
Inthefollowingexample,thedebugldpfsmcommandisusedtomonitortheLDP
finitestatemachinestatus:
Switch#debugldpfsm
2002/06/1811:40:01LDP:FSM:StatechangedfromNON_EXISTENTtoINITIALIZEDforevent
LDP_EVENT_TCP_established
2002/06/1811:40:01LDP:FSM:StatechangedfromINITIALIZEDtoOPENRECforevent
LDP_EVENT_Recv_Init_msg
2002/06/1811:40:01LDP:FSM:StatechangedfromOPENRECtoOPERATIONALforevent
LDP_EVENT_Recv_KeepAlive_msg
2002/06/1811:40:01LDP:FSM:StatechangedfromOPERATIONALtoOPERATIONALforevent
LDP_EVENT_Recv_Other_msg
RelatedCommands
debugldppacket
debugldpevents
18.1.13debugldphexdump
CommandPurpose
Usethiscommandtowritehexdumpspecificinformationtotheoutput.
CommandSyntax
debugldphexdump
nodebugldphexdump
CommandMode
PrivilegedEXEC
Default
None2865Usage
None
Examples
Inthefollowingexample,thedebugldphexdumpcommandisusedtowritehexdump
specificinformationtotheoutput:
Switch#debugldphexdump
RelatedCommands
debugldpfsm
debugldppacket
18.1.14debugldppacket
CommandPurpose
UsethiscommandtomonitorallsentorreceivedpacketstoorfromLDPpeers.
CommandSyntax
debugldppacket
nodebugldppacket
CommandMode
PrivilegedEXEC
Default
None
Usage
None2866Examples
Inthefollowingexample,thedebugldppacketcommandisusedtoreceivedpackets
toorfromLDPpeers:
Switch#debugldppacket
2002/06/1811:43:23LDP:ldp_message_hello_send:Dumpofoutgoingpacket
2002/06/1811:43:23LDP:
2002/06/1811:43:23LDP:PDUVersion:1
2002/06/1811:43:23LDP:PDULength:22
2002/06/1811:43:23LDP:LDPIdentifier:10.10.0.11:0
2002/06/1811:43:23LDP:
2002/06/1811:43:23LDP:MessageUbit:0
2002/06/1811:43:23LDP:MessageType:HelloMessage
2002/06/1811:43:23LDP:MessageLength:12
2002/06/1811:43:23LDP:MessageID:0x1a9
2002/06/1811:43:23LDP:
2002/06/1811:43:23LDP:TLVUbit:0
2002/06/1811:43:23LDP:TLVFbit:0
2002/06/1811:43:23LDP:TLVType:CommonHelloParametersTLV
2002/06/1811:43:23LDP:TLVlength:4
2002/06/1811:43:23LDP:HoldTime:15
2002/06/1811:43:23LDP:TargetedHello:0
2002/06/1811:43:23LDP:RequestSendTargedetail
RelatedCommands
debugldpfsm
debugldpevents
18.1.15debugldpqos
CommandPurpose
UsethiscommandtowriteQualityofServiceinformationtotheoutput.
CommandSyntax
debugldpqos
nodebugldpqos
CommandMode
PrivilegedEXEC2867Default
None
Usage
None
Examples
Inthefollowingexample,thedebugldpqoscommandisusedtowriteQualityof
Serviceinformationtotheoutput:
Switch#debugldpqos
RelatedCommands
debugldpfsm
debugldppacket
18.1.16debugldptsm
CommandPurpose
Usethiscommandtowritetrunkstatemachinespecificinformationtotheoutput.
CommandSyntax
debugldptsm
nodebugldptsm
CommandMode
PrivilegedEXEC
Default
None2868Usage
None
Examples
Inthefollowingexample,thedebugldptsmcommandisusedtowritetrunkstate
machinespecificinformationtotheoutput:
Switch#debugldptsm
RelatedCommands
debugldpfsm
debugldppacket
18.1.17debugldpvc
CommandPurpose
UsethiscommandtodebugLayer-2VirtualCircuitinformation.
CommandSyntax
debugldpvc(dsm|usm|events)
nodebugldpvc(dsm|usm|events)
Parameter ParameterDescriptionParameterValue
dsm Downstreamstate
machine-
usm Upstreamstatemachine-
events VCevents -
CommandMode
PrivilegedEXEC2869Default
None
Usage
None
Examples
Inthefollowingexample,thedebugldpvceventscommandisusedtodebugLayer-
2VirtualCircuitinformation:
Switch#debugldpvcevents
RelatedCommands
debugldpdsm
debugldpusm
18.1.18disable-ldp
CommandPurpose
UsethiscommandtodisableLDPonaspecifiedinterface.
CommandSyntax
disable-ldp
CommandMode
InterfaceConfiguration
Default
None
Usage
None2870Examples
Inthefollowingexample,thedisable-ldpcommandisusedtodisableLDPona
specifiedinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#disable-ldp
RelatedCommands
None
18.1.19enable-ldp
CommandPurpose
UsethiscommandtoenableLDPonaspecifiedinterface.
CommandSyntax
enable-ldp
CommandMode
InterfaceConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,theenable-ldpcommandisusedtoenableLDPona
specifiedinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#enable-ldp2871RelatedCommands
None
18.1.20explicit-null
CommandPurpose
Usethiscommandtoconfiguretheroutertosendexplicit-nulllabelsfordirectly
connectedFECsinsteadofimplicit-nulllabels.Implicit-nullsarethedefaultlabels
CommandSyntax
explicit-null
noexplicit-null
CommandMode
RouterConfiguration
Default
Sendsimplicit-nulllabels
Usage
None
Examples
Inthefollowingexample,theexplicit-nullcommandisusedtosendexplicit-nulllabels
fordirectlyconnectedFECsinsteadofimplicit-nulllabels:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#explicit-null
RelatedCommands
showldpFEC287218.1.21hello-interval
CommandPurpose
Usethiscommandtosettheintervalafterwhichhellopacketsaresentout.Usethe
noparametertoreverttodefaulthellointerval.
CommandSyntax
hello-intervalINTERVAL
nohello-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Intervalinsecondsfor
sendingperiodichello
messagetopeers1-21845
CommandMode
RouterConfiguration
Default
Thedefaultis5seconds.
Usage
None
Examples
Inthefollowingexample,thehello-intervalcommandisusedtosettheintervalafter
whichhellopacketsaresentout:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#hello-interval352873RelatedCommands
hold-time
ldphello-interval
ldphold-time
18.1.22hold-time
CommandPurpose
Usethiscommandtosettheglobalvalueforthehold-timeafterwhichtheLSR
rejectsadjacencies.Usethenoparametertoreverttothedefaultholdtime.
CommandSyntax
hold-timeTIME
nohold-time
Parameter ParameterDescriptionParameterValue
TIME Specifiesthehold-time
valueinseconds3-65535
CommandMode
RouterConfiguration
Default
Thedefaultis15seconds.
Usage
None
Examples
Inthefollowingexample,thehold-timecommandisusedtosettheglobalvaluefor
thehold-timeafterwhichtheLSRrejectsadjacencies:2874Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#hold-time635
RelatedCommands
hello-interval
ldphello-interval
ldphold-time
18.1.23keepalive-interval
CommandPurpose
Usethiscommandtosettheglobalvaluefortheintervalafterwhichkeep-alive
packetsaresentout.Usethenoparametertoreverttodefaultkeep-aliveinterval.
CommandSyntax
keepalive-intervalINTERVAL
nokeepalive-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Intervalinsecondsfor
sendingperiodichello
messagetopeers10-21845
CommandMode
RouterConfiguration
Default
Thedefaultis10seconds.
Usage
None2875Examples
Inthefollowingexample,thekeepalive-intervalcommandisusedtosettheglobal
valuefortheintervalafterwhichkeep-alivepacketsaresentout:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#keepalive-interval635
RelatedCommands
keepalive-timeout
ldpkeepalive-interval
ldpkeepalive-timeout
18.1.24keepalive-timeout
CommandPurpose
Usethiscommandtosettheglobalvalueforthetime-outafterwhichsessionsare
rejected.Usethenoparametertoreverttodefaultkeep-alivetime-out.
CommandSyntax
keepalive-timeoutTIME
nokeepalive-timeout
Parameter ParameterDescriptionParameterValue
TIME Specifiesthetime-out
valueinseconds30-65535
CommandMode
RouterConfiguration
Default
Thedefaultis30seconds.2876Usage
None
Examples
Inthefollowingexample,thekeepalive-timeoutcommandisusedtosettheglobal
valueforthetime-outafterwhichsessionsarerejected:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#keepalive-timeout635
RelatedCommands
keepalive-timeout
ldpkeepalive-interval
ldpkeepalive-timeout
18.1.25ldphello-interval
CommandPurpose
UsethiscommandtosettheintervalforsendingmulticastHellopacketsviaan
interface.Usethenoparameterwiththiscommandtoreverttothehello-interval
valuesetforthemainLDPprocess.
CommandSyntax
ldphello-intervalTIME
noldphello-interval
Parameter ParameterDescriptionParameterValue
TIME Specifiestheintervalin
second1-21845
CommandMode
InterfaceConfiguration2877Default
Thedefaultis5seconds.
Usage
None
Examples
Inthefollowingexample,theldphello-intervalcommandisusedtosettheintervalfor
sendingmulticastHellopacketsviaaninterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldphello-interval635
RelatedCommands
hello-interval
hold-time
ldphold-time
18.1.26ldphold-time
CommandPurpose
Usethiscommandtosetthehold-timevalueafterwhichtheLSRrejectsadjacencies.
Usethenoparametertoreverttothehold-timevaluesetforthemainLDPprocess.
CommandSyntax
ldphold-timeTIME
noldphold-time
Parameter ParameterDescriptionParameterValue
TIME Specifiestheintervalin
seconds3-655352878CommandMode
InterfaceConfiguration
Default
Thedefaultis15seconds.
Usage
None
Examples
Inthefollowingexample,theldphold-timecommandisusedtosetthehold-time
valueafterwhichtheLSRrejectsadjacencies:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldphold-time635
RelatedCommands
hello-interval
hold-time
ldphello-interval
18.1.27ldpkeepalive-interval
CommandPurpose
Usethiscommandtosettheintervalforsendingkeep-alivemessagestothepeerin
ordertomaintainasession.Usethenoparametertoreverttothekeep-aliveinterval
setforthemainLDPprocess.
CommandSyntax
ldpkeepalive-intervalINTERVAL
noldpkeepalive-interval2879Parameter ParameterDescriptionParameterValue
INTERVAL Specifiestheintervalin
seconds10-21845
CommandMode
InterfaceConfiguration
Default
Thedefaultis10seconds
Usage
None
Examples
Inthefollowingexample,theldpkeepalive-intervalcommandisusedtosetthe
intervalforsendingkeep-alivemessagestothepeerinordertomaintainasession:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldpkeepalive-interval635
RelatedCommands
ldpkeepalive-timeout
18.1.28ldpkeepalive-timeout
CommandPurpose
Usethiscommandtosetthekeep-alivetime-outvalueforrejectingasessionwitha
peer.Usethenoparametertoreverttothekeep-alivetime-outsetforthemainLDP
process.
CommandSyntax
ldpkeepalive-timeoutTIME2880noldpkeepalive-timeout
Parameter ParameterDescriptionParameterValue
TIME Specifiesthevaluein
seconds30-65535
CommandMode
InterfaceConfiguration
Default
Thedefaultis30seconds.
Usage
None
Examples
Inthefollowingexample,theldpkeepalive-timeoutcommandisusedtosetthekeep-
alivetime-outvalueforrejectingasessionwithapeer:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldpkeepalive-timeout635
RelatedCommands
ldpkeepalive-interval
18.1.29ldpmulticast-hellos
CommandPurpose
Usethiscommandtoenablemulticasthelloexchangeonaspecifiedinterface.
Usethenoparametertodisablemulticasthelloexchange.
CommandSyntax
ldpmulticast-hellos2881noldpmulticast-hellos
CommandMode
InterfaceConfiguration
Default
Disabled
Usage
None
Examples
Inthefollowingexample,theldpmulticast-helloscommandisusedtoenable
multicasthelloexchangeonaspecifiedinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldpmulticast-hellos
RelatedCommands
multicast-hellos
18.1.30ldptargeted-peer-hello-interval
CommandPurpose
Usethiscommandtosettheintervalforsendingunicasthellopacketstotargeted
peersviathisinterface.Usethenoparametertoreverttothetargeted-peerhello-
intervalvaluesetforthemainLDPprocess.
CommandSyntax
ldptargeted-peer-hello-intervalINTERVAL
noldptargeted-peer-hello-interval
Parameter ParameterDescriptionParameterValue2882INTERVAL Specifiestheintervalin
seconds1-21845
CommandMode
InterfaceConfiguration
Default
Thedefaultis15seconds.
Usage
None
Examples
Inthefollowingexample,theldptargeted-peer-hello-intervalcommandisusedtoset
theintervalforsendingunicasthellopacketstotargetedpeersviathisinterface:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldptargeted-peer-hello-interval635
RelatedCommands
showldpinterfaceIFNAME
targeted-peer-hello-interval
18.1.31ldptargeted-peer-hold-time
CommandPurpose
Usethiscommandtosetthetime-outvaluethatisthetimethattherouterwaits
beforerejectinganadjacencywithatargetedpeer.Usethenoparametertorevertto
thetargeted-peervaluesetforthemainLDPprocess.
CommandSyntax
ldptargeted-peer-hold-timeTIME2883noldptargeted-peer-hold-time
Parameter ParameterDescriptionParameterValue
TIME Specifiestheintervalin
seconds3-65535
CommandMode
InterfaceConfiguration
Default
Thedefaultis45seconds.
Usage
None
Examples
Inthefollowingexample,theldptargeted-peer-hold-timecommandisusedtosetthe
time-outvaluethatisthetimethattherouterwaitsbeforerejectinganadjacencywith
atargetedpeer:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#ldptargeted-peer-hold-time635
RelatedCommands
showldpinterfaceIFNAME
targeted-peer-hold-time
18.1.32routerldp
CommandPurpose
ThiscommandisusedtoentertheLDPspecificcommand-linemodeinwhichglobal
attributesfortheLDPprocesscanbeset.Withoutthiscommand,theLSRdoesnot
performanyLDPoperations,suchassendinghellopackets.2884CommandSyntax
routerldp
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,therouterldpcommandisusedtoentertheLDPspecific
command-linemodeinwhichglobalattributesfortheLDPprocesscanbeset:
Switch#configurerouter
Switch(config)#routerldp
Switch(config-router)#
RelatedCommands
None
18.1.33router-id
CommandPurpose
Usethiscommandtosettherouter-idtothesuppliedIPaddress;therouterusesthis
addresstogeneratetheLDP-ID.
UsethenoparameterwiththiscommandtoreverttousingthefirstIPaddress
configuredontheboxastherouter-idforLDP-IDgenerationpurposes.
CommandSyntax
router-idIP_ADDR2885norouter-id
Parameter ParameterDescriptionParameterValue
IP_ADDR ThenewIPaddressas
router-idIPv4Address
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,therouter-idcommandisusedtosettherouter-idtothe
suppliedIPaddress:
Switch#configurerouter
Switch(config)#routerldp
Switch(config-router)#router-id123.123.123.8
RelatedCommands
None
18.1.34showdebuggingldp
CommandPurpose
UsethiscommandtodisplaythestatusofthedebuggingoftheLDPsystem.
CommandSyntax
showdebuggingldp2886CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowdebuggingldpcommandisusedtodisplaythe
statusofthedebuggingoftheLDPsystem:
Switch#showdebuggingldp
LDPdebuggingstatus:
LDPeventdebuggingison
LDPpacketdebuggingison
LDPfinitestatemachinedebuggingison
LDPpduhexdumpdebuggingison
LDPdownstreamstatemachinedebuggingison
LDPupstreamstatemachinedebuggingison
LDPtrunkstatemachinedebuggingison
LDPQoSdebuggingison
LDPCSPFdebuggingison
LDPVCUSMdebuggingison
LDPVCDSMdebuggingison
LDPNSMdebuggingison
LDPAdvertise-labelsdebuggingison
RelatedCommands
None
18.1.35showldp
CommandPurpose
UsethiscommandtodisplaybasicLDPattributesdefinedforthecurrentLSR.2887CommandSyntax
showldp
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
ThefollowingisasampleoutputfromtheshowldpcommanddisplayingbasicLDP
attributes.:
Switch#showldp
RouterID:10.10.0.11
LDPVersion:1
GlobalMergeCapability:N/A
LabelAdvertisementMode:DownstreamUnsolicited
LabelRetentionMode:Liberal
LabelControlMode:Independent
LoopDetection:Off
LoopDetectionCount:0
RequestRetry:Off
PropagateRelease:Disabled
HelloInterval:5
TargetedHelloInterval:15
Holdtime:15
TargetedHoldtime:45
KeepaliveInterval:10
KeepaliveTimeout:30
RequestretryTimeout:5
TargetedHelloReceipt:Disabled
TransportAddress:N/A
TransportInterface:N/A
ImportBGProutes:No2888RelatedCommands
None
18.1.36showldpadjacency
CommandPurpose
UsethiscommandtodisplayalltheadjacenciesforthecurrentLSR.
CommandSyntax
showldpadjacency
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpadjacencycommandisusedtodisplayallthe
adjacenciesforthecurrentLSR:
Switch#showldpadjacency
IPAddressInterfaceNameHoldtimeLDPID
192.168.3.5eth11510.10.0.18:0
192.168.4.5eth21510.10.0.18:0
RelatedCommands
None288918.1.37showldpadvertise-labels
CommandPurpose
UsethiscommandtodisplaytheIPaccesslistofLDPadvertise-labels.
CommandSyntax
showldpadvertise-labels
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpadvertise-labelscommandisusedtodisplay
theIPaccesslistofLDPadvertise-labels:
Switch#showldpadvertise-labels
Advertisementspec:
Prefixacl=pfx1;Peeracl=pfx1
Preventthedistributionofanyassignedlabels
RelatedCommands
None
18.1.38showldpdownstream
CommandPurpose
Usethiscommandtodisplaythestatusofalldownstreamsessionsandthelabel
informationexchanged.2890CommandSyntax
showldpdownstream
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpdownstreamcommandisusedtodisplaythe
statusofalldownstreamsessionsandthelabelinformationexchanged:
Switch#showldpdownstream
Sessionpeer192.168.11.50:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:
192.168.11.50Attr:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.11.50Attr:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.11.50Attr:
Downstreamstate:EstablishedLabel:20RequestID:0Peer:192.168.11.50Attr:
Sessionpeer192.168.13.60:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:16RequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:17RequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:18RequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
Downstreamstate:EstablishedLabel:19RequestID:0Peer:192.168.13.60Attr:--More--
Downstreamstate:EstablishedLabel:20RequestID:0Peer:192.168.13.60Attr:
RelatedCommands
None289118.1.39showldpfec
CommandPurpose
UsethefollowingcommandtodisplayallFECsknowntothecurrentLSR.
CommandSyntax
showldpfec(host|prefix|)
Parameter ParameterDescriptionParameterValue
host ThehostFEC -
prefix TheprefixFEC -
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpfeccommandisusedtodisplayallFECs
knowntothecurrentLSR:
Switch#showldpfec
LSRcodes:E/N-LSRisegress/non-egressforthisFEC,
L-LSRreceivedalabelforthisFEC,
>-LSRwillusethisroutefortheFEC
CodeFECSessionOutLabelNexthopAddr
E>10.10.0.0/24non-existentnoneconnected
NL10.10.0.0/24192.168.3.5impl-nullconnected
E>192.168.3.0/24non-existentnoneconnected
NL192.168.3.0/24192.168.3.5impl-nullconnected
E>192.168.4.0/24non-existentnoneconnected2892NL192.168.4.0/24192.168.3.5impl-nullconnected
NL192.168.5.0/24192.168.3.5impl-nullinvalid
RelatedCommands
None
18.1.40showldpinterface
CommandPurpose
Usethiscommandtodisplayinformationforallinterfaces,ordetailedinformationfor
aspecificinterface.
CommandSyntax
showldpinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Thenameoftheinterface,
theformatfollowsbelow:
eth-0-1,agg1,vlan1,etcSupport
physical/aggregation/loopb
ack/vlan/tunnelports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpinterfacecommandisusedtodisplaydetailed
informationforaspecificinterface:2893Switch#showldpinterfaceeth-0-1
Status:Enabled
PrimaryIPAddress:192.168.3.4
InterfaceType:Ethernet
LabelMergeCapability:MergeCapable
HelloInterval:5
TargetedHelloInterval:15
HoldTime:15
TargetedHoldTime:45
KeepaliveInterval:10
KeepaliveTimeout:30
AdvertisementMode:DownstreamOnDemand
LabelRetentionMode:Liberal
AdministrativeGroups:Cen1:Cen2
RelatedCommands
None
18.1.41showldplsp
CommandPurpose
UsethiscommandtodisplayLDPLSPand,optionally,advertise-labelinformation.
CommandSyntax
showldplsp
CommandMode
PrivilegedEXEC
Default
None
Usage
None2894Examples
Inthefollowingexample,theshowldplspcommandisusedtodisplayLDPLSPand,
optionally,advertise-labelinformation:
Switch#showldplsp
Advertisementspec:
Prefixacl=pfx1;Peeracl=pfx1
Preventthedistributionofanyassignedlabels
FECIPV4:1.1.1.0/30->0.0.0.0
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:50.50.50.50Attr:
Advertacl(s):Preventthedistributionofanyassignedlabels
FECIPV4:3.3.3.0/30->0.0.0.0
Advertacl(s):Preventthedistributionofanyassignedlabels
FECIPV4:10.30.0.0/24->0.0.0.0
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:50.50.50.50Attr:
Advertacl(s):Preventthedistributionofanyassignedlabels
FECIPV4:50.50.50.50/32->1.1.1.1
Advertacl(s):Prefixacl=pfx1;Peeracl=pfx1
FECIPV4:55.55.55.55/32->3.3.3.2
Advertacl(s):Preventthedistributionofanyassignedlabels
FECIPV4:169.254.0.0/16->0.0.0.0
Downstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:50.50.50.50Attr:
Advertacl(s):Preventthedistributionofanyassignedlabels
RelatedCommands
showldplsphost
showldplspprefix
showldplspcr-lsp
18.1.42showldpmpls-vpws
CommandPurpose
CommandSyntax
showldpmpls-l2-circuit(detail|Virtual_Circuit_ID|)
Parameter ParameterDescriptionParameterValue
detail Showdetailedinformation-2895Virtual_Circuit_ID SpecifiestheVPWS
identifier1-4294967295
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Switch#showldpmpls-vpwsdetail
Switch#showldpmpls-vpws34detail
RelatedCommands
None
18.1.43showldpsession
CommandPurpose
UsethiscommandtodisplaysessionsestablishedbetweenthecurrentLSRand
otherLSRs.
CommandSyntax
showldpsession(IP_ADDR|)
Parameter ParameterDescriptionParameterValue
IP_ADDR TheIPv4addressofthe
peerforwhichinformation
istobeshownIPv4Address2896CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpsessioncommandisusedtodisplaysessions
establishedbetweenthecurrentLSRandotherLSRs:
Switch#showldpsession
PeerIPAddressIFNameMyRoleStateKeepAlive
192.168.11.50eth1PassiveOPERATIONAL30
192.168.13.60eth2PassiveOPERATIONAL30
Inthefollowingexample,theshowldpsessioncommandisusedtodisplaysessionsestablishedbetweenthe
currentLSRandotherLSRs:
Switch#showldpsession192.168.3.5
Sessionstate:OPERATIONAL
Sessionrole:Passive
TCPConnection:Established
IPAddressforTCP:192.168.3.5
Interfacebeingused:eth1
PeerLDPID:10.10.0.18:0
Adjacencies:192.168.3.5
192.168.4.5
Advertisementmode:DownstreamUnsolicited
Labelretentionmode:Liberal
KeepaliveTimeout:30
ReconnectInterval:15
AddressListreceived:192.168.3.5
192.168.4.5
ReceivedLabels:FecLabelMapsTo
IPV4:10.10.0.0/24impl-nullnone
IPV4:192.168.3.0/24impl-nullnone
IPV4:192.168.4.0/24impl-nullnone
IPV4:192.168.5.0/24impl-nullnone
SentLabels:FecLabelMapsTo
IPV4:10.10.0.0/24impl-nullnone
IPV4:192.168.3.0/24impl-nullnone
IPV4:192.168.4.0/24impl-nullnone
Switch#showldpsession192.168.3.52897Sessionstate:OPERATIONAL
Sessionrole:Passive
TCPConnection:Established
IPAddressforTCP:192.168.3.5
Interfacebeingused:eth1
PeerLDPID:10.10.0.18:0
Adjacencies:192.168.3.5
192.168.4.5
Advertisementmode:DownstreamUnsolicited
Labelretentionmode:Liberal
KeepaliveTimeout:30
ReconnectInterval:15
AddressListreceived:192.168.3.5
192.168.4.5
ReceivedLabels:FecLabelMapsTo
IPV4:10.10.0.0/24impl-nullnone
IPV4:192.168.3.0/24impl-nullnone
IPV4:192.168.4.0/24impl-nullnone
IPV4:192.168.5.0/24impl-nullnone
SentLabels:FecLabelMapsTo
IPV4:10.10.0.0/24impl-nullnone
IPV4:192.168.3.0/24impl-nullnone
IPV4:192.168.4.0/24impl-nullnone
RelatedCommands
None
18.1.44showldpstatistics
CommandPurpose
UsethiscommandtodisplayLDPpacketstatistics.
CommandSyntax
showldpstatistics(advertise-labels|)
Parameter ParameterDescriptionParameterValue
advertise-labels Countpereachoperation
filteredbyan
advertisementlist.-
CommandMode
PrivilegedEXEC2898Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpstatisticscommandisusedtodisplayLDP
packetstatistics:
Switch#showldpstatistics
PacketTypeTotal
SentReceived
Notification00
Hello39800
Initialization11
Keepalive19321932
Address11
AddressWithdraw00
LabelMapping77
LabelRequest00
LabelWithdraw10
LabelRelease01
RequestAbout00
Inthefollowingexample,theshowldpstatisticscommandisusedtodisplayLDPpacketstatistics:
Switch#showldpstatisticsadvertise-labels
Advertisementspec:
Prefixacl=pfx1;Peeracl=pfx1
Deny:LabelMapping=2
LabelRequest=0
Preventthedistributionofanyassignedlabels
Deny:LabelMapping=9
LabelRequest=3
Switch#showldpstatisticsadvertise-labels
Advertisementspec:
Prefixacl=pfx1;Peeracl=pfx1
Deny:LabelMapping=2
LabelRequest=0
Preventthedistributionofanyassignedlabels
Deny:LabelMapping=9
LabelRequest=32899RelatedCommands
clearldpstatisticsadvertise-labels
18.1.45showldptargeted-peers
CommandPurpose
UsethiscommandtodisplaythelistoftargetedpeersconfiguredonthecurrentLSR.
CommandSyntax
showldptargeted-peers
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldptargeted-peerscommandisusedtodisplay
thelistoftargetedpeersconfiguredonthecurrentLSR:
Switch#showldptargeted-peers
IPAddressInterface
1.1.1.3eth-0-9
RelatedCommands
None290018.1.46showldpupstream
CommandPurpose
Usethiscommandtodisplaythestatusofallupstreamsessionsandlabel
informationexchanged.
CommandSyntax
showldpupstream
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowldpupstreamcommandisusedtodisplaythe
statusofallupstreamsessionsandlabelinformationexchanged:
Switch#showldptargeted-peers
IPAddressInterface
1.1.1.3eth-0-9
RelatedCommands
None
18.1.47showmemoryldp
CommandPurpose
UsethiscommandtodisplaymemorystatisticsfortheLDP.2901CommandSyntax
showmemoryldp
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmemoryldpcommandisusedtodisplaymemory
statisticsfortheLDP:
Switch#showldpupstream
Sessionpeer192.168.11.50:
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.11.50Attr:
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.11.50Attr:
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.11.50Attr:
Sessionpeer192.168.13.60:
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
None
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
None
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
None
Upstreamstate:EstablishedLabel:16RequestID:0Peer:192.168.13.60Attr:None
Upstreamstate:EstablishedLabel:17RequestID:0Peer:192.168.13.60Attr:None
Upstreamstate:EstablishedLabel:impl-nullRequestID:0Peer:192.168.13.60Attr:
None
Upstreamstate:EstablishedLabel:18RequestID:0Peer:192.168.13.60Attr:None
Upstreamstate:EstablishedLabel:19RequestID:0Peer:192.168.13.60Attr:N--Mo
RelatedCommands
None290218.1.48targeted-peer
CommandPurpose
UsethiscommandtospecifyordeleteatargetedLDPpeer.
CommandSyntax
targeted-peerIP_ADDR
notargeted-peerIP_ADDR
Parameter ParameterDescriptionParameterValue
IP_ADDR SpecifiestheIPv4address
ofthetargetedpeerIPv4Address
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetargeted-peercommandisusedtospecifyatargeted
LDPpeer:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#targeted-peer10.10.10.10
RelatedCommands
None290318.1.49targeted-peer-hello-interval
CommandPurpose
Usethiscommandtosettheintervalforsendingunicasthellopacketstotargeted
peers.Usethenoparameterwiththiscommandtoreverttothedefaulttargeted-peer
hello-intervalvalue.
CommandSyntax
targeted-peer-hello-intervalINTERVAL
notargeted-peer-hello-interval
Parameter ParameterDescriptionParameterValue
INTERVAL Specifiestheintervalin
seconds1-21845
CommandMode
RouterConfiguration
Default
Thedefaultis15seconds.
Usage
None
Examples
Inthefollowingexample,thetargeted-peer-hello-intervalcommandisusedtosetthe
intervalforsendingunicasthellopacketstotargetedpeers:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#targeted-peer-hello-interval1002904RelatedCommands
showldp
targeted-peer-hello-interval
18.1.50targeted-peer-hello-receipt
CommandPurpose
Usethiscommandtotogglethereceiptoftargetedhellopackets.Usetheno
parametertodisabletheprocessingoftargetedhellopackets.
CommandSyntax
targeted-peer-hello-receipt
notargeted-peer-hello-receipt
CommandMode
RouterConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thetargeted-peer-hello-receiptcommandisusedtotoggle
thereceiptoftargetedhellopackets:
Switch#configurerouter
Switch(config)#routerldp
Switch(config-router)#targeted-peer-hello-receipt
RelatedCommands
None290518.1.51targeted-peer-hold-time
CommandPurpose
Usethiscommandtosetthetime-outvaluethatisthetimethattherouterwaits
beforerejectinganadjacencywithtargetedpeers.Usethenoparametertorevertto
thedefaulttargeted-peerhold-timevalue.
CommandSyntax
targeted-peer-hold-timeTIME
notargeted-peer-hold-time
Parameter ParameterDescriptionParameterValue
TIME Specifiestheintervalin
seconds3-65535
CommandMode
RouterConfiguration
Default
Thedefaultis45seconds.
Usage
None
Examples
Inthefollowingexample,thetargeted-peer-hold-timecommandisusedtosetthe
time-outvaluethatisthetimethattherouterwaitsbeforerejectinganadjacencywith
targetedpeers:
Switch#configureterminal
Switch(config)#routerldp
Switch(config-router)#targeted-peer-hold-time1002906RelatedCommands
showldp
ldptargeted-peer-hold-time
18.1.52transport-address
CommandPurpose
Usethiscommandtoconfigurethetransportaddressforalabelspace.Usetheno
parametertostopusingthetransport-addressastheIPv4transportaddress.Ifthe
label-spaceisnotspecifiedineitherformofthiscommand,alabel-spaceofzerois
assumed.
CommandSyntax
transport-addressIP_ADDR
notransport-address
Parameter ParameterDescriptionParameterValue
IP_ADDR TheIPv4addresstobe
usedasthetransport
address.Onlyaddresses
boundtoaloopback
interfacearevalidfor
manualtransportaddress
configurationIPv4Address
CommandMode
RouterConfiguration
Default
Bydefault,transportaddressesarechosenforlabelspaces.Theseaddressesmight
eitherbeboundtoaloopbackinterface,ortoaphysicalinterfacethatisboundtothe
labelspaceinquestion.2907Usage
None
Examples
Inthefollowingexample,thetransport-addresscommandisusedtoconfigurethe
transportaddressforalabelspace:
Switch#configurerouter
Switch(config)#routerldp
Switch(config-router)#transport-address10.10.0.5
RelatedCommands
None
18.1.53showldpigpsync
CommandPurpose
Usethiscommandtodisplaytheldpigpsyncinformationofinterface.
CommandSyntax
showldpigpsync
CommandMode
PrivilegedEXEC
Default
None
Usage
None2908Examples
Inthefollowingexample,theshowldpvplscommandisusedtodisplayinformation
aboutinterfacewhichenableldpigpsync:
Switch#showldpigpsync
eth-0-9isup,lineprotocolisup
LDPconfigured;LDP-IGPSynchronizationenabled.
SessionIPAddress:2.2.2.2
Syncstatus:Achieved
Delaytimer:Configured,60seconds,NotRunning
RelatedCommands
None
18.1.54showldpvpls
CommandPurpose
UsethiscommandtodisplayinformationaboutallVPLSinstances.SpecifytheVPLS
IDtodisplayinformationaboutaspecificVPLSinstance.
CommandSyntax
showldpvpls(detail|VPLS_ID|)
Parameter ParameterDescriptionParameterValue
detail Showdetailedinformation-
VPLS_ID SpecifiestheVPLS
identifier1-4294967295
CommandMode
PrivilegedEXEC
Default
None2909Usage
None
Examples
Inthefollowingexample,theshowldpvplscommandisusedtodisplayinformation
aboutallVPLSinstances:
Switch#showldpvpls
VPLS-IDPeerAddressStateTypeLabel-SentLabel-Rcvd
1192.168.0.80Upvpls16640
1192.168.0.90Upvpls18642
2192.168.0.80Upvpls19641
2192.168.0.90Upvpls17643
RelatedCommands
None
18.1.55labeldistributiondefault-route
CommandPurpose
Usethiscommandtoenablelabeldistributionfordefaultroute.
CommandSyntax
labeldistributiondefault-route
nolabeldistributiondefault-route
CommandMode
RouterConfiguration
Default
None
Usage
None2910Examples
Inthefollowingexample,thedefaultrouteenablecommandisusedtoenablelabel
distributionfordefaultroute:
Switch(config-router)#labeldistributiondefault-route
RelatedCommands
None
18.2MPLSCommands
18.2.1mplsenable-all-interfaces
CommandPurpose
UsethiscommandtoenableordisablealltheL3interfaceslabelswitchfunction.
CommandSyntax
mplsenable-all-interfaces
mplsdisable-all-interfaces
CommandMode
GlobalConfiguration
Default
Labelswitchfunctionisdisabled.
Usage
None
Examples
Inthefollowingexample,themplsdisable-all-interfacescommandisusedtodisable
alltheL3interfaceslabelswitchfunction:2911Switch#configureterminal
Switch(config)#mplsdisable-all-interfaces
RelatedCommands
None
18.2.2label-switching
CommandPurpose
Usethiscommandtoenableordisableaninterfaceslabelswitchfunction.
CommandSyntax
label-switching
nolabel-switching
CommandMode
InterfaceConfiguration
Default
Labelswitchfunctionisdisabled.
Usage
None
Examples
Inthefollowingexample,thelabel-switchingcommandisusedtoenablean
interfaceslabelswitchfunction:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#label-switching
RelatedCommands
None291218.2.3showmplsinterface
CommandPurpose
UsethiscommandtodisplayinterfacesboundtoMPLSinterface.
CommandSyntax
showmplsinterface(IFNAME|)
Parameter ParameterDescriptionParameterValue
IFNAME Thenameoftheinterface,
theformatfollowsbelow:
eth-0-1,agg1,vlan1,etcSupport
physical/aggregation/vlan
ports
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsinterfacecommandisusedtodisplay
interfacesboundtoMPLSinterface:
Switch#showmplsinterfaceeth-0-9
Interfaceeth-0-9
Labelswitchingisenabledwithlabel-space0
minimumlabelvalueconfiguredis16
maximumlabelvalueconfiguredis4095
In-labelsused:0,Out-labelsused:02913RelatedCommands
None
18.2.4mplslsp-model
CommandPurpose
Usethiscommandtoconfigurethemodelofmplslsp
CommandSyntax
mplslsp-model(uniform|pipe(expEXP|)|short-pipe(expEXP|))(domain
DOMAINID|)
nomplslsp-model
Parameter ParameterDescriptionParameterValue
uniform UniformMode -
pipe PipeMode -
short-pipe Short-pipeMode -
EXP EXPvalue 0-7
DOMIANID Domainid 0-15
CommandMode
GlobalConfiguration
Default
Uniformmode
Usage
None2914Examples
ConfigurationthemodeofMPLSLSPModel:
Switch#configureterminal
Switch(config)#mplslsp-modelshort-pipeexp7domain1
RelatedCommands
None
18.2.5mplsilm-entry
CommandPurpose
UsethiscommandtoaddordeletethestaticILMentry.
CommandSyntax
mplsilm-entryswapINLABELIP_ADDROUTLABEL
mplsilm-entryphpINLABELIP_ADDR
mplsilm-entrypopINLABEL
nomplsilm-entryINLABEL
Parameter ParameterDescriptionParameterValue
INLABEL Incominglabel 16-1048575
IP_ADDR Nexthopipaddress IPv4Address
OUTLABEL Outgoinglabel 0(explicitnull),3(implicit
null),16-1048575
CommandMode
GlobalConfiguration
Default
None2915Usage
None
Examples
Inthefollowingexample,themplsilm-entrycommandisusedtoconfigureonestatic
ILMentry:
Switch#configureterminal
Switch(config)#mplsilm-entryswap10012.12.12.2200
Switch(config)#mplsilm-entryphp10112.12.12.20
Switch(config)#mplsilm-entrypop102
RelatedCommands
None
18.2.6mplsmtu
CommandPurpose
Usethiscommandtosetmplsmtu.
CommandSyntax
mplsmtuMTU-VALUE
nomplsmtu
Parameter ParameterDescriptionParameterValue
MTU-VALUE MTUvalue 68-9216
CommandMode
InterfaceConfiguration
Default
None2916Usage
None
Examples
Inthefollowingexample,themplsmtucommandisusedtoconfiguremplsmtu:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mplsmtu1600
RelatedCommands
mtu
18.2.7showmplsilm-database
CommandPurpose
UsethiscommandtodisplayMPLSIncomingLabelMaptablefordetail.
CommandSyntax
showmplsilm-database
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsilm-databasecommandisusedtodisplay
MPLSIncomingLabelMaptablefordetail:2917Switch#showmplsilm-database
Codes:>-selectedILM,p-staleILM,B-BGPILM,K-CLIILM,
L-LDPILM,R-RSVP-TEILM,S-SNMPILM,I-IGP-Shortcut,
U-unknownILM
CodeFEC I/OLabelNexthopOut-Intf
L>5.5.5.0/241024/3 3.3.3.2eth-0-17
RelatedCommands
showmplsilm-forwarding
18.2.8showmplsilm-forwarding
CommandPurpose
UsethiscommandtodisplayMPLSIncomingLabelMaptable.
CommandSyntax
showmplsilm-forwarding
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsilm-forwardingcommandisusedtodisplay
MPLSIncomingLabelMaptable:
Switch#showmplsilm-forwarding
FEC I/OLabelNexthopOut-Intf
5.5.5.0/241024/3 3.3.3.2eth-0-172918RelatedCommands
showmplsilm-database
18.2.9mplsftn-entry
CommandPurpose
UsethiscommandtoaddordeletethestaticFTNentry.
CommandSyntax
mplsftn-entry(IP_ADDRIP_ADDR_MASK|IP_ADDR/IP_MASK_LEN)OUTLABEL
NEXTHOP
nomplsftn-entry(IP_ADDRIP_ADDR_MASK|IP_ADDR/IP_MASK_LEN)
NEXTHOP
Parameter ParameterDescriptionParameterValue
IP_ADDR IPAddressofFEC IPv4Address
IP_ADDR_MASK IPAddressmaskofFECIPv4Address
IP_MASK_LEN IPAddressmasklengthof
FEC1-32
OUTLABEL Outgoinglabel 0(explicitnull),3(implicit
null),16-1048575
NEXTHOP Nexthopipaddress IPv4Address
CommandMode
GlobalConfiguration
Default
None
Usage
None2919Examples
Inthefollowingexample,themplsftn-entrycommandisusedtoconfigureonestatic
FTNentry:
Switch#configureterminal
Switch(config)#mplsftn-entry200.200.200.0/2420012.12.12.2
RelatedCommands
None
18.2.10showmplsftn-database
CommandPurpose
UsethiscommandtodisplayMPLSForwardingtablefordetail.
CommandSyntax
showmplsftn-database
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsftn-databasecommandisusedtodisplay
MPLSForwardingtablefordetail:
Switch#showmplsftn-database
Codes:>-selectedFTN,p-staleFTN,B-BGPFTN,K-CLIFTN,
L-LDPFTN,R-RSVP-TEFTN,S-SNMPFTN,I-IGP-Shortcut,
U-unknownFTN2920CodeFEC Out-LabelNexthopOut-Intf
K19.1.1.0/240172.10.1.2-
RelatedCommands
None
18.2.11showmplsftn-forwarding
CommandPurpose
UsethiscommandtodisplayMPLSForwardingtable.
CommandSyntax
showmplsftn-forwarding
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsftn-forwardingcommandisusedtodisplay
MPLSForwardingtable:
Switch#showmplsftn-forwarding
FEC Out-LabelNexthopOut-Intf
3.3.3.0/2432.2.2.2eth-0-9
5.5.5.0/2410242.2.2.2eth-0-9
RelatedCommands
showmplsftn-database292118.2.12mplslsp-tunneling
CommandPurpose
UsethiscommandtoaddordeletetheILMtunnelentry.
CommandSyntax
mplslsp-tunnelingINLABELOUTLABELIP_ADDR/IP_MASK_LEN
nomplslsp-tunnelingINLABEL
Parameter ParameterDescriptionParameterValue
INLABEL Incominglabel 16-1048575
IP_ADDR TunnelFECIPaddressIPv4Address
IP_MASK_LEN TunnelFECIPaddress
maskIPv4Address
OUTLABEL Outgoinglabel 0(explicitnull),3(implicit
null),16-1048575
CommandMode
GlobalConfiguration
Default
None.
Usage
None
Examples
Inthefollowingexample,themplslsp-tunnelingcommandisusedtospecifyoneILM
totunnel:
Switch#configureterminal
Switch(config)#mplslsp-tunneling100300200.200.200.0/242922RelatedCommands
None
18.2.13showmplslsp-tunneling
CommandPurpose
UsethiscommandtodisplayMPLSLSP-Tunneling.
CommandSyntax
showmplslsp-tunneling
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplslsp-tunnelingcommandisusedtodisplay
MPLSLSP-Tunneling:
Switch1#showmplslsp-tunneling
Codes:>-selectedILM
CodeI/OLabelFEC Out-Intf
200/3005.5.5.0/24N/A
RelatedCommands
None292318.2.14mplsmap-route
CommandPurpose
UsethiscommandtospecifyoneFECmappedtoaFTNentry.
CommandSyntax
mplsmap-route(IP_ADDR/IP_MASK_LEN|IP_ADDRIP_ADDR_MASK)
(FEC_IP_ADDR/FEC_IP_MASK_LEN|FEC_IP_ADDRFEC_IP_MASK)
nomplsmap-route(IP_ADDR/IP_MASK_LEN|IP_ADDRIP_ADDR_MASK)
Parameter ParameterDescriptionParameterValue
IP_ADDR IPv4prefixtobemappedIPv4Address
IP_ADDR_MASK IPv4maskofprefixtobe
mappedIPv4Address
IP_MASK_LEN IPv4masklengthofprefix
tobemapped1-32
FEC_IP_ADDR IPv4Forwarding
EquivalenceClassfor
routetobemappedtoIPv4Address
FEC_IP_MASK IPv4Forwarding
EquivalenceClassmask
forroutetobemappedtoIPv4Address
FEC_IP_MASK_LEN IPv4Forwarding
EquivalenceClassmask
lengthforroutetobe
mappedto1-32
CommandMode
GlobalConfiguration2924Default
None
Usage
None
Examples
Inthefollowingexample,themplsmap-routecommandisusedtospecifyoneFEC
mappedtoaFTNentryandmappedtoatunnel:
Switch#configureterminal
Switch(config)#mplsmap-route100.100.100.0/24200.200.200.0/24
Switch(config)#mplsmap-route101.101.101.0/24tunneltun1
RelatedCommands
mplsftn-entry(IP_ADDRIP_ADDR_MASK|IP_ADDR/IP_MASK_LEN)OUTLABEL
IP_ADDR
18.2.15showmplsmap-routes
CommandPurpose
UsethiscommandtodisplaymappedMPLSroutes.
CommandSyntax
showmplsmapped-routes
CommandMode
PrivilegedEXEC
Default
None2925Usage
None
Examples
Inthefollowingexample,theshowmplsmapped-routescommandisusedtodisplay
mappedMPLSroutes:
Switch#showmplsmap-routes
Mapped-routeIPv4FEC
12.12.12.0/24-
RelatedCommands
None
18.3VPLSCommands
18.3.1mplsvpls
CommandPurpose
UsethiscommandtocreateaVPLSinstanceandcomeintotheVPLSinstance
mode.ThiscommandwillcreateaVPLSinstance,andcomeintothisinstancemode.
Iftheinstancehavebeencreated,withoutinputtingtheVPLS-ID,itcomesintothe
instancemodewithoutcreatingVPLSinstance.
CommandSyntax
mplsvplsNAMEVPLS-ID(whitelist)(ac-vlan-operation)
nomplsvplsNAME
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforVPLS
instanceUpto20characters
VPLS-ID IdentifyingvalueforVPLS
instance1-42949672952926whitelist Enablewhitelistfunction-
ac-vlan-operation Keepvlanunchange
function-
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,themplsvplscommandisusedtocreateaVPLSinstance
andcomeintotheVPLSinstancemode:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#
RelatedCommands
None
18.3.2vpls-description
CommandPurpose
UsethiscommandtoaddcharactersdescribingforVPLSinstance.
CommandSyntax
vpls-descriptionLINE
novpls-description2927Parameter ParameterDescriptionParameterValue
LINE Charactersdescribingthe
VPLSinstanceUpto20characters
CommandMode
VPLSConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thevpls-descriptioncommandisusedtoaddcharacters
describingforVPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-descriptionthisisagoodvplsinstance
RelatedCommands
None
18.3.3vpls-mtu
CommandPurpose
UsethiscommandtosetmtuforVPLSinstance.IfsettheMTUvaluefortheVPLS
instance,LDPwilladvertisethisvaluetopeersintheinstance.
CommandSyntax
vpls-mtuMTU
novpls-mtu2928Parameter ParameterDescriptionParameterValue
MTU MTUvaluefortheVPLS
instance576-65535
CommandMode
VPLSConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thevpls-mtucommandisusedtosetmtuforVPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-mtu55555
RelatedCommands
None
18.3.4vpls-peer
CommandPurpose
UsethiscommandtoaddaremotePEforVPLSinstance.Ifconfigurethiscommand
usekeywordmanual,thePWtothispeerwillnotissuebyLDPorBGP,otherwise,
thePWissuedbyLDPorBGP,cannotcreatePWfibmanually.
CommandSyntax
vpls-peerIP_ADDR(raw|tagged)(control-word|)(manual|)(upd|)
novpls-peerIP_ADDR2929Parameter ParameterDescriptionParameterValue
IP_ADDR IPaddressofthepeer
nodetobeaddedIPv4Address
raw SetPeerVirtualCircuits
typetoRawmode-
tagged SetPeerVirtualCircuits
typetoTaggedmode-
control-word Control-wordforPeer
VircualCircuits-
manual PWforpeerwillcreated
manually-
upe UserfacingProviderEdge-
CommandMode
VPLSConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thevpls-peercommandisusedtoaddaremotePEfor
VPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-peer100.100.100.1rawmanual
RelatedCommands
novpls-peer293018.3.5vpls-fib-add
CommandPurpose
UsethiscommandtoaddastaticPWforaPEinaVPLSinstance.Thepeershould
beaddedinVPLSinstanceusekey-wordmanual.
CommandSyntax
vpls-fib-addNAMEpeerIP_ADDRIN-LABLEOUT-LABEL
vpls-fib-deleteNAMEpeerIP_ADDR
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforVPLS
instanceUpto20characters
IP_ADDR IPaddressofPE IPv4Address
IN-LABLE Incominglabel 16-1048575
OUT-LABEL Outgoinglabel 16-1048575
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thevpls-fib-addcommandisusedtoaddastaticPWfora
PEinaVPLSinstance:
Switch#configureterminal
Switch(config)#vpls-fib-addvpls1peer100.100.100.11011022931RelatedCommands
vpls-fib-delete
18.3.6mpls-vpls
CommandPurpose
UsethiscommandtobindaninterfacetoaVPLSinstance.Theinterfacecannot
bindtosameVPLSinstancetwicewithdifferentvlantag;theinterfacecannotbindto
VPLSinstanceandMPLSLayer2VirtualCircuitboth.
CommandSyntax
mpls-vplsNAME(vlanVLANID(cvlanCVLANID(bundling|)|ethernet)(etree-
leaf|)(vlan-operation-tableVLAN_OP_TBL_NAME|)
nompls-vplsNAME(vlanVLANID)
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforVPLS
instanceUpto20characters
VLANID VlanID 1-4094
CVLANID CustomerethernetVLAN1-4094
bundling Enablebundlefunction-
ethernet EthernetMode -
etree-leaf Leaf-ACsinanETREE-
VLAN_OP_TBL_NAMEThenameofvlan
operationUpto16characters
CommandMode
InterfaceConfiguration2932Default
BindtoVPLSinstancewithoutvlantag.
Usage
None
Examples
Inthefollowingexample,thempls-vplscommandisusedtobindaninterfacetoa
VPLSinstance:
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mpls-vplsvpls1vlan100
RelatedCommands
None
18.3.7vpls-mac-learning
CommandPurpose
UsethiscommandtoenableordisableVPLSmaclearningwithaVPLSinstance.
CommandSyntax
vpls-mac-learning(enable|disable)
CommandMode
VPLSConfiguration
Default
EnablevplsmaclearningwithaVPLSinstancebydefault.
Usage
None2933Examples
Inthefollowingexample,thevpls-mac-learningcommandisusedtodisableVPLS
maclearningwithaVPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-mac-learningdisable
RelatedCommands
None
18.3.8vpls-mac-limitmaximum
CommandPurpose
UsethiscommandtosetVPLSmaclimitmaximum
CommandSyntax
vpls-mac-limitmaximumMAXIMUM
novpls-mac-limitmaximum
Parameter ParameterDescriptionParameterValue
MAXIMUM MAXIMUMvalueforthe
VPLSinstance1-4294967295
CommandMode
VPLSConfiguration
Default
VPLS-mac-limitisnotenabledbydefault.
Usage
None2934Examples
Inthefollowingexample,thevpls-mac-limitcommandisusedtosetVPLSmaclimit
maximumwithaVPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-mac-limitmaximum100
RelatedCommands
None
18.3.9vpls-mac-limit
CommandPurpose
UsethiscommandtosetVPLSmaclimitVPLSmaclimitaction.
CommandSyntax
vpls-mac-limitaction(warn|discard)
novpls-mac-limitaction
Parameter ParameterDescriptionParameterValue
warn Whenreach
macimum,discardpackets
withwarninglog-
discard Whenreach
macimum,discardpackets-
CommandMode
VPLSConfiguration
Default
Noactionisconfiguredbydefault.2935Usage
None
Examples
Inthefollowingexample,thevpls-mac-limitcommandisusedtosetVPLSmaclimit
actionaswarnwithaVPLSinstance:
Switch#configureterminal
Switch(config)#mplsvplsvpls11
Switch(config-vpls)#vpls-mac-limitactionwarn
RelatedCommands
None
18.3.10clearmplsvplsmac-addresses
CommandPurpose
UsethiscommandtoremoveMACaddressesthathavebeendynamicallylearned
forfasterconvergence,andthisisaccomplishedbysendinganLDPWithdraw
MessagetoallotherPEsoverthecorrespondingLDPsession.
CommandSyntax
clearmplsvplsNAMEmac-addresses
Parameter ParameterDescriptionParameterValue
NAME VPLSinstancename Upto20characters
CommandMode
PrivilegedEXEC
Default
None2936Usage
None
Examples
Inthefollowingexample,theclearmplsvplscommandisusedtoremoveMAC
addressesthathavebeendynamicallylearnedforfasterconvergence:
Switch#clearmplsvplsvpls1mac-addresse
RelatedCommands
None
18.3.11clearmacaddress-tablevpls
CommandPurpose
UsethiscommandtoremoveMACaddressesofVirtualPrivateLanService.
CommandSyntax
clearmacaddress-tablevpls(addressMAC_ADDR|interfaceINTERFACE)
Parameter ParameterDescriptionParameterValue
MAC_ADDR MACaddress MACaddress
INTERFACE Thenameoftheinterface,
theformatfollowsbelow:
eth-0-1,agg1,vlan1,etc
aggAggregation
interface.agg<1-127>
ethPhysicalinterfaceSupport
physical/aggregationports
andepsgroup
CommandMode
PrivilegedEXEC2937Default
None
Usage
None
Examples
Inthefollowingexample,theclearmacaddress-tablevplscommandisusedto
removeMACaddresses.:
Switch#clearmacaddress-tablevplspeer1.1.1.1
RelatedCommands
None
18.3.12showmplsvpls
CommandPurpose
UsethiscommandtodisplayMPLSVPLSinstanceinformation.
CommandSyntax
showmplsvpls(NAME|detail|mesh)
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforVPLSUpto20characters
detail ShowdetailedVPLS
information-
mesh ShowMPLSVPLSMesh
Forwardinginformation-
CommandMode
PrivilegedEXEC2938Default
None
Usage
None
Examples
Inthefollowingexample,theshowmplsvplscommandisusedtodisplayMPLS
VPLSinstanceinformation:
Switch#showmplsvpls
Name VPLS-IDMPeers(R)MPeers(T)SPeersState
v1 200100Active
Inthefollowingexample,theshowmplsvplsdetailcommandisusedtodisplaydetailedVPLSinformation:
Switch#showmplsvplsdetail
VirtualPrivateLANServiceInstance:v1,ID:200
GroupID:0,ConfiguredMTU:NULL
Description:none
ACinterface:none
MeshPeers:
PeerTYPEStateC-WordTunnelnameLSPname
3.3.3.3RAWUPDisabletun lsp1
Vpls-mac-learningenable
Vpls-mac-limitmaximum100
Vpls-mac-limitactionwarn
Discardfloodingdisabled
Discardunknown-unicastdisabled
Discardmulticastdisabled
Inthefollowingexample,theshowmplsvplsmeshcommandisusedtodisplayMPLSVPLSMeshForwarding
information:
Switch#showmplsvplsmesh
VPLS-IDPeerAddrIn-LabelOut-IntfOut-LabelTypeLkps/St
2003.3.3.325eth-0-926RAW2/Up
RelatedCommands
None293918.3.13showmacaddress-tablevpls
CommandPurpose
UsethiscommandtodisplayFDBlearnedbyVPLS.
CommandSyntax
showmacaddress-tablevpls(addressMAC_ADDR|interfaceIFNAME)
Parameter ParameterDescriptionParameterValue
MAC_ADDR MACaddress MACaddress
IFNAME Thenameoftheinterface,
theformatfollowsbelow:
eth-0-1,agg1,vlan1,etcSupport
physical/aggregationports
andepsgroup
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,theshowmacaddress-tablevplscommandisusedto
displayFDBlearnedbyVPLS:
Switch#showmacaddress-tablevpls
vplspeermac static
1000eth-0-10001.001f.aa120
1000eth-0-1407a.a718.340002940RelatedCommands
None
18.3.14mac-address-table
CommandPurpose
UsethiscommandontheswitchtoaddstaticaddressestotheMACaddresstable
foraVSI.Usethenoformofthiscommandtoremovestaticentriesfromthetable.
CommandSyntax
mac-address-tableMAC-ADDRforward(IFNAME|vpls-peerIP_ADDR)
mac-address-tableMAC-ADDRdiscard
mac-address-tableMAC-ADDRpermit
nomac-address-tableMAC-ADDR
Parameter ParameterDescriptionParameterValue
MAC-ADDR DestinationMACaddress
(unicast)toaddtothe
addresstable.Packets
withthisdestination
addressreceivedinthe
specifiedVSIare
discardedorforwardedto
thespecifiedinterfaceor
peernodeMACaddress
IFNAME Interfacetowhichthe
receivedpacketis
forwarded.Validinterfaces
includephysicalportsand
linkaggregationportsSupport
physical/aggregationports
andepsgroup2941IP_ADDR IPaddressofthepeer
nodetowhichthereceived
packetisforwardedIPv4Address
CommandMode
VPLSConfiguration
Default
Nostaticaddressesareconfigured.
Usage
None
Examples
Inthefollowingexample,themac-table-addressforwardcommandisusedtoaddthe
staticaddressc2f3.220a.12f4totheMACaddresstable.Whenapacketisreceived
inVPLSv1withthisMACaddressasitsdestination,thepacketisforwardedtothe
specifiedpeernode;themac-table-addressdiscardcommandisusedtoaddaMAC
blackholec2f3.220a.12f5totheMACaddresstable.Whenapacketisreceivedin
VPLSv1withthisMACaddressasitsdestination,itwillbediscardedSwitch(config)#
mplsvplsv1Switch(config-vpls)#mac-address-tablec2f3.220a.12f4forwardpeer
1.1.1.2Switch(config-vpls)#mac-address-tablec2f3.220a.12f5discard:
Switch#configureterminal
Switch(config)#mplsvplsv1
Switch(config-vpls)#mac-address-tablec2f3.220a.12f4forwardvpls-peer1.1.1.2
Switch(config-vpls)#mac-address-tablec2f3.220a.12f5discard
Inthefollowingexample,themac-table-addressforwardcommandisusedtoaddthe
staticaddressc2f3.220a.12f4totheMACaddresstable.Whenapacketisreceived
inVPLSv1withthisMACaddressasitsdestination,thepacketisforwardedother
packetswillbediscard:
Switch#configureterminal
Switch(config)#mplsvplsv1whitelist
Switch(config-vpls)#mac-address-tablec2f3.220a.12f4permit2942RelatedCommands
showmacaddress-tablevpls
18.3.15discard
CommandPurpose
UsethiscommandontheswitchtosetVPLSfloodcontrol.Usethenoformofthis
commandtounsetVPLSfloodcontrol.
CommandSyntax
discard(broadcast|unknown-unicast|unknown-multicast)
nodiscard(broadcast|unknown-unicast|unknown-multicast)
Parameter ParameterDescriptionParameterValue
broadcast Broadcastpackets -
unknown-unicast Unknownunicastpackets-
unknown-multicast Unknownmulticast
packets-
CommandMode
VPLSConfiguration
Default
Discardfloodingisdisabled.
Discardunknown-unicastisdisabled.
Discardmulticastisdisabled.
Usage
None2943Examples
Inthefollowingexample,thediscardcommandisusedtodiscardallfloodingpackets
intheVSI:
Switch#configureterminal
Switch(config)#mplsvplsv1
Switch(config-vpls)#discardunknown-unicast
RelatedCommands
showmplsvplsdetail
18.3.16mplstrusttopmost-exp
CommandPurpose
Usetheexpofthetopmostlabeltomappriorityandcolor
CommandSyntax
mplstrusttopmost-exp
nomplstrusttopmost-exp
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,usetheexpofthetopmostlabel:
Switch#configureterminal
Switch(config)#mplstrusttopmost-exp2944RelatedCommands
None
18.3.17vlanoperationtable
CommandPurpose
Createavlanoperationtable
CommandSyntax
vlanoperationtableWORD
novlanoperationtableWORD
Parameter ParameterDescriptionParameterValue
WORD tablename Upto16characters
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,createavlanoperationtablenamedpush:
Switch#configureterminal
Switch(config)#vlanoperationtablepush
RelatedCommands
rewriteingresstag294518.3.18rewriteingresstag
CommandPurpose
Addtheeditruleforvlanoperationtable
CommandSyntax
rewriteingresstag(push(vlanVLANID(second-vlanSVLANID|))|pop(1|2)|
translate(1-to-1vlanVLANID|2-to-1vlanVLANID|1-to-2vlanVLANIDsecond-
vlanSVLANID|2-to-2vlanVLANIDsecond-vlanSVLANID))
novlanoperation
Parameter ParameterDescriptionParameterValue
VLANID VlanID 1-4094
SVLANID SecondVlanID 1-4094
CommandMode
VLANOperationConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,addapushruleforavlanoperationtablenamedpush
addavlantagwithvlanid2fortheingresspacket:
Switch#configureterminal
Switch(config)#vlanoperationtablepush
Switch(config-vlan-operation)#rewriteingresstagpushvlan22946RelatedCommands
vlanoperationtable
18.3.19mplsvpls-l3vpn-compatible
CommandPurpose
Usethiscommandtoenablevplsandl3vpnonthesameinterfaceandthesamevlan.
CommandSyntax
mplsvpls-l3vpn-compatible
nomplsvpls-l3vpn-compatible
CommandMode
GlobalConfiguration
Default
None
Usage
Eachvplsinstancecanonlymapaspecificalvlanwhenthecommandisused.
Examples
Inthefollowingexample,usethecommandtoenablevplsandl3vpnonthesame
interfaceandthesamevlan.:
Switch#configureterminal
Switch(config)#mplsvpls-l3vpn-compatible
RelatedCommands
None294718.4VPWSCommands
18.4.1mplsl2-circuit
CommandPurpose
UsethiscommandtocreateaninstanceofMPLSLayer2VirtualCircuit.
CommandSyntax
mplsl2-circuitNAMEVC-IDNEXTHOP(control-word|)(manual|)(mtuMTU|)
(raw|tagged|)
nomplsl2-circuitNAME
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforMPLS
Layer-2VirtualCircuitUpto20characters
VC-ID VPWSIDIdentifying
valueforMPLSLayer-2
VirtualCircuit1-4294967295
NEXTHOP IPv4Addressforend-point
forMPLSLayer-2Virtual
CircuitIPv4Address
control-word Control-wordforMPLS
Layer-2VirtualCircuit-
manual Layer-2VirtualCircuitwill
createdmanually-
MTU Layer-2VirtualCircuitmtu
value576-65535
raw PWrawmode -
tagged PWtaggedmode -2948CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Switch#configureterminal
Switch(config)#mplsl2-circuitpw11100.100.100.1manual
RelatedCommands
nomplsl2-circuit
18.4.2mpls-l2-circuit
CommandPurpose
UsethiscommandtobindaninterfacetoaMPLSLayer2VirtualCircuit.
CommandSyntax
mpls-l2-circuitNAME(ethernet|vlanVLANID|)
nompls-l2-circuitNAME
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforMPLS
Layer-2VirtualCircuitUpto20characters
VLANID Vlanidentifier 1-4094
CommandMode
InterfaceConfiguration2949Default
PWtypeisethernet.
Usage
None
Examples
Switch#configureterminal
Switch(config)#interfaceeth-0-1
Switch(config-if)#mpls-l2-circuitpw1vlan100
RelatedCommands
nompls-l2-circuit
18.4.3mplsl2-circuit-fib-entry
CommandPurpose
UsethiscommandtoaddaLayer2VirtualCircuitFIBentry.
CommandSyntax
mplsl2-circuit-fib-entryNAMEINLABELOUTLABEL
nomplsl2-circuit-fib-entryNAME
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforMPLS
Layer-2VirtualCircuitUpto20characters
INLABEL Incominglabel 16-1048575
OUTLABEL Outgoinglabel 16-1048575
CommandMode
GlobalConfiguration2950Default
None
Usage
TheMPLSLayer2VirtualCircuitshouldbeaddedusekey-wordmanual.
Examples
Switch#configureterminal
Switch(config)#mplsl2-circuit-fib-entrypw1100200
RelatedCommands
nomplsl2-circuit-fib-entry
18.4.4showmplsl2-circuit
CommandPurpose
Usethiscommandtoshowmplsl2ciriuitinformation.
CommandSyntax
showmplsl2-circuit(NAME|)
Parameter ParameterDescriptionParameterValue
NAME IdentifyingstringforMPLS
Layer-2VirtualCircuitUpto20characters
CommandMode
PrivilegedEXEC
Default
None2951Usage
None
Examples
Switch#showmplsl2-circuit
VC-NameVC-IDInterfaceAC-typeVLANPW-modeManual
pw1100eth-0-1EthernetN/ARawYes
Switch#showmplsl2-circuitpw1
MPLSLayer-2VirtualCircuit:pw1,id:100
Endpoint:11.11.3.3
ControlWord:0
MPLSLayer-2VirtualCircuitGroup:none
Boundtointerface:eth-0-1
VirtualCircuitType:Ethernet
Owner:manual
VirtualCircuitisconfiguredasPrimary
RelatedCommands
mplsl2-circuit
18.4.5showmplsvc-table
CommandPurpose
Usethiscommandtoshowmplsvcforwardinginformation.
CommandSyntax
showmplsvc-table(detail|)
Parameter ParameterDescriptionParameterValue
vc-table MPLSLayer-2Virtual
Circuittable-
detail ShowdetailedLayer-2
VirtualCircuitinformation-2952CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
switch#showmplsvc-table
VC-IDPWIntfACIntfL/RLabelEndPointStatusManual
100eth-0-9eth-0-122/3311.11.3.3ActiveYesSwitch#showmplsvc-tabledetail
mplsl2-curcuit:test ID:100
Manual:Yes ConfiguredMTU:NULL
ACinterface:eth-0-9 PWinterface:eth-0-1
Tunnel-name:tun LSP-name:lsp1
PeerAddress:3.3.3.3 Inlable/Outlabel:23/24
PWtype:Raw ACtype:Ethernet
RelatedCommands
mplsl2-circuit
18.5MPLSSRCommands
18.5.1static-sr-mplsadjacency
CommandPurpose
Usethiscommandtocreateanadjancenysegment.
CommandSyntax
static-sr-mplsadjacencyADJNAMEin-labelIN_LABELnexthopIPV4_ADDR
nostatic-sr-mplsadjacencyADJNAME
Parameter ParameterDescriptionParameterValue2953ADJNAME Thenameforadjacency
segmentUpto20characters
IN_LABEL Inlabelfortheadjsegment16-1048575
IPV4_ADDR Nexthopaddress IPv4address
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtocreateanadjacencysegment:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplsadjacencyadj1in-label20nexthop12.1.1.2
RelatedCommands
None
18.5.2static-sr-mplsprefix
CommandPurpose
Usethiscommandtocreateanprefixsegment.
CommandSyntax
static-sr-mplsprefixPREFIXNAMEdestinationIP_ADDR/IP_MASK_LENin-label
IN_LABEL(nexthopNH_IP_ADDRout-labelOUT_LABEL|)2954nostatic-sr-mplsprefixPREFIXNAME(destinationIP_ADDR/IP_MASK_LENin-label
IN_LABEL(nexthopNH_IP_ADDRout-labelOUT_LABEL|)|)
Parameter ParameterDescriptionParameterValue
PREFIXNAME Thenameforprefix
segmentUpto20characters
IP_ADDR DestinationIPAddressIPv4address
IP_MASK_LEN MasklengthfortheIP
address1-32
IN_LABEL Inlabelfortheprefix
segment16-1048575
NH_IP_ADDR Nexthopaddress IPv4address
OUT_LABEL Outlabelfortheprefix
segment0/3/16-1048575
CommandMode
GlobalConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtocreateanprefixsegment:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplsprefixprefix1destination10.10.10.10/32in-label30nexthop12.1.1.2out-label100
RelatedCommands
None295518.5.3static-sr-mplslsp
CommandPurpose
Usethiscommandtocreateansrlsp.
CommandSyntax
static-sr-mplslspLSPNAMEout-label[OUT_LABEL]
nostatic-sr-mplslspLSPNAME
Parameter ParameterDescriptionParameterValue
LSPNAME Thenameforsrlsp Outlabelforthesrlsp
OUT_LABEL Outlabelforthesrlsp 0/3/16-1048575
CommandMode
GlobalConfiguration
Default
None
Usage
Themaxnumberofoutlabelis10
Examples
Inthefollowingexample,thecommandisusedtocreateansrlsp:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplslsplsp1out-label20304050
RelatedCommands
None295618.5.4static-sr-mplstunnel
CommandPurpose
Usethiscommandtocreateansrtunnelandtoentersrtunnelmode.
CommandSyntax
static-sr-mplstunnelTUNNELNAME(non-aps|aps|)
nostatic-sr-mplstunnelTUNNELNAME
Parameter ParameterDescriptionParameterValue
TUNNELNAME ThenameforsrtunnelUpto20characters
non-aps Tunnelwithoutaps
protection-
aps Tunnelwithapsprotection-
CommandMode
GlobalConfiguration
Default
None
Usage
Theapsornon-apstypeshouldbespecifiedwhenthetunneliscreating
Examples
Inthefollowingexample,thecommandisusedtocreateansrtunnel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplstunneltun1non-aps
RelatedCommands
None295718.5.5primary
CommandPurpose
Usethiscommandtobindprimarylsptosrtunnel.
CommandSyntax
primaryLSPNAME
noprimary
Parameter ParameterDescriptionParameterValue
LSPNAME Thenamefortheprimary
lspUpto20characters
CommandMode
SRTunnelConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtobindprimarylsptosrtunnel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplstunneltun1non-aps
Switch(config-sr-tunnel)#primarylsp1
RelatedCommands
None295818.5.6secondary
CommandPurpose
Usethiscommandtobindsecondarylsptosrtunnel.
CommandSyntax
secondaryLSPNAME
nosecondary
Parameter ParameterDescriptionParameterValue
LSPNAME Thenameforthe
secondarylspUpto20characters
CommandMode
SRTunnelConfiguration
Default
None
Usage
Onlyapstypesrtunnelsupporttoconfigsecondarylsp
Examples
Inthefollowingexample,thecommandisusedtobindsecondarylsptosrtunnel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplstunneltun1aps
Switch(config-sr-tunnel)#secondarylsp2
RelatedCommands
None295918.5.7map-route
CommandPurpose
Usethiscommandtomaproutesonthissrtunnel
CommandSyntax
map-routeIP_ADDR/IP_MASK_LEN
nomap-route
Parameter ParameterDescriptionParameterValue
IP_ADDR IPv4prefixoftheroute-
IP_MASK_LEN Prefixlengthoftheroute-
CommandMode
SRTunnelConfiguration
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtomaprouteonthesrtunnel:
Switch#configureterminal
Enterconfigurationcommands,oneperline.EndwithCNTL/Z.
Switch(config)#static-sr-mplstunneltun1non-aps
Switch(config-sr-tunnel)#map-route5.5.5.5/32
RelatedCommands
None296018.5.8static-sr-mplsmanual-switch
CommandPurpose
Usethiscommandtomanualswitchthesrtunnel
CommandSyntax
static-sr-mplsmanual-switchTUNNELNAME(to-primary|to-secondary)
Parameter ParameterDescriptionParameterValue
TUNNELNAME Thenameofsrtunnelto
bemanualswitchedUpto20characters
to-primary Manualswitchtoprimary
lsp-
to-secondary Manualswitchto
secondarylsp-
CommandMode
PrivilegedEXEC
Default
None
Usage
Onlyapstypesrtunnelsupporttobemanualswitched
Examples
Inthefollowingexample,thecommandisusedtomanualswitchsrtunnelfrom
primarytosecondary:
Switch#static-sr-mplsmanual-switchtun1to-secondary2961RelatedCommands
None
18.5.9showmplssr-adj
CommandPurpose
Usethiscommandtoshowadjacencysegment
CommandSyntax
showmplssr-adj
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtoshowtheadjacencysegment:
Switch#showmplssr-adj
sr-adjidinlabelnexthoplsp_list
adj1 02012.1.1.2lsp1
adj2 02112.1.2.2lsp2
RelatedCommands
None296218.5.10showmplssr-prefix
CommandPurpose
Usethiscommandtoshowprefixsegment
CommandSyntax
showmplssr-prefix
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtoshowtheprefixsegment:
Switch#showmplssr-prefix
sr-prefixidinlabeloutlabelnexthoplsp_list
prefix10304012.1.1.2
prefix20314112.1.1.2
RelatedCommands
None
18.5.11showmplssr-lsp
CommandPurpose
Usethiscommandtoshowsrlsp2963CommandSyntax
showmplssr-lsp
CommandMode
PrivilegedEXEC
Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtoshowthesrlsp:
Switch#showmplssr-lsp
sr-lspidtunidinstlnexthoptunneladjprefixoutlabel
lsp156112.1.1.2tun1adj1-20304050
lsp268112.1.1.2tun1adj2-21314151
RelatedCommands
None
18.5.12showmplssr-tunnel
CommandPurpose
Usethiscommandtoshowsrtunnel
CommandSyntax
showmplssr-tunnel
CommandMode
PrivilegedEXEC2964Default
None
Usage
None
Examples
Inthefollowingexample,thecommandisusedtoshowthesrtunnel:
Switch#showmplssr-tunnel
sr-tunnelidtypewlspplspslspmap-route
tun1 4apslsp1lsp2lsp15.5.5.5/326.6.6.6/32
RelatedCommands
None
18.5.13showmplssr-mapped-routes
CommandPurpose
Usethiscommandtoshowsrmaproute
CommandSyntax
showmplssr-mapped-routes
CommandMode
PrivilegedEXEC
Default
None
Usage
None2965Examples
Inthefollowingexample,thecommandisusedtoshowthesrmaproutes:
Switch#showmplssr-mapped-routes
Mapped-routeSRTunnelname
5.5.5.5/32tun1
6.6.6.6/32tun1
RelatedCommands
None